function _mergeNamespaces($,_e){for(var _t=0;_t<_e.length;_t++){const Vt=_e[_t];if(typeof Vt!="string"&&!Array.isArray(Vt)){for(const Wt in Vt)if(Wt!=="default"&&!(Wt in $)){const _i=Object.getOwnPropertyDescriptor(Vt,Wt);_i&&Object.defineProperty($,Wt,_i.get?_i:{enumerable:!0,get:()=>Vt[Wt]})}}}return Object.freeze(Object.defineProperty($,Symbol.toStringTag,{value:"Module"}))}(function(){const _e=document.createElement("link").relList;if(_e&&_e.supports&&_e.supports("modulepreload"))return;for(const Wt of document.querySelectorAll('link[rel="modulepreload"]'))Vt(Wt);new MutationObserver(Wt=>{for(const _i of Wt)if(_i.type==="childList")for(const _s of _i.addedNodes)_s.tagName==="LINK"&&_s.rel==="modulepreload"&&Vt(_s)}).observe(document,{childList:!0,subtree:!0});function _t(Wt){const _i={};return Wt.integrity&&(_i.integrity=Wt.integrity),Wt.referrerPolicy&&(_i.referrerPolicy=Wt.referrerPolicy),Wt.crossOrigin==="use-credentials"?_i.credentials="include":Wt.crossOrigin==="anonymous"?_i.credentials="omit":_i.credentials="same-origin",_i}function Vt(Wt){if(Wt.ep)return;Wt.ep=!0;const _i=_t(Wt);fetch(Wt.href,_i)}})();var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1($){return $&&$.__esModule&&Object.prototype.hasOwnProperty.call($,"default")?$.default:$}var jsxRuntimeExports={},jsxRuntime={get exports(){return jsxRuntimeExports},set exports($){jsxRuntimeExports=$}},reactJsxRuntime_production_min={},reactExports={},react={get exports(){return reactExports},set exports($){reactExports=$}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$6=Symbol.for("react.element"),n$6=Symbol.for("react.portal"),p$9=Symbol.for("react.fragment"),q$7=Symbol.for("react.strict_mode"),r$5=Symbol.for("react.profiler"),t$5=Symbol.for("react.provider"),u$6=Symbol.for("react.context"),v$7=Symbol.for("react.forward_ref"),w$3=Symbol.for("react.suspense"),x$2=Symbol.for("react.memo"),y$4=Symbol.for("react.lazy"),z$4=Symbol.iterator;function A$4($){return $===null||typeof $!="object"?null:($=z$4&&$[z$4]||$["@@iterator"],typeof $=="function"?$:null)}var B$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$3={};function E$3($,_e,_t){this.props=$,this.context=_e,this.refs=D$3,this.updater=_t||B$3}E$3.prototype.isReactComponent={};E$3.prototype.setState=function($,_e){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,_e,"setState")};E$3.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function F$2(){}F$2.prototype=E$3.prototype;function G$2($,_e,_t){this.props=$,this.context=_e,this.refs=D$3,this.updater=_t||B$3}var H$3=G$2.prototype=new F$2;H$3.constructor=G$2;C$2(H$3,E$3.prototype);H$3.isPureReactComponent=!0;var I$3=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$3={key:!0,ref:!0,__self:!0,__source:!0};function M$3($,_e,_t){var Vt,Wt={},_i=null,_s=null;if(_e!=null)for(Vt in _e.ref!==void 0&&(_s=_e.ref),_e.key!==void 0&&(_i=""+_e.key),_e)J.call(_e,Vt)&&!L$3.hasOwnProperty(Vt)&&(Wt[Vt]=_e[Vt]);var _c=arguments.length-2;if(_c===1)Wt.children=_t;else if(1<_c){for(var _l=Array(_c),_d=0;_d<_c;_d++)_l[_d]=arguments[_d+2];Wt.children=_l}if($&&$.defaultProps)for(Vt in _c=$.defaultProps,_c)Wt[Vt]===void 0&&(Wt[Vt]=_c[Vt]);return{$$typeof:l$6,type:$,key:_i,ref:_s,props:Wt,_owner:K$1.current}}function N$3($,_e){return{$$typeof:l$6,type:$.type,key:_e,ref:$.ref,props:$.props,_owner:$._owner}}function O$3($){return typeof $=="object"&&$!==null&&$.$$typeof===l$6}function escape$1($){var _e={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(_t){return _e[_t]})}var P$3=/\/+/g;function Q$3($,_e){return typeof $=="object"&&$!==null&&$.key!=null?escape$1(""+$.key):_e.toString(36)}function R$3($,_e,_t,Vt,Wt){var _i=typeof $;(_i==="undefined"||_i==="boolean")&&($=null);var _s=!1;if($===null)_s=!0;else switch(_i){case"string":case"number":_s=!0;break;case"object":switch($.$$typeof){case l$6:case n$6:_s=!0}}if(_s)return _s=$,Wt=Wt(_s),$=Vt===""?"."+Q$3(_s,0):Vt,I$3(Wt)?(_t="",$!=null&&(_t=$.replace(P$3,"$&/")+"/"),R$3(Wt,_e,_t,"",function(_d){return _d})):Wt!=null&&(O$3(Wt)&&(Wt=N$3(Wt,_t+(!Wt.key||_s&&_s.key===Wt.key?"":(""+Wt.key).replace(P$3,"$&/")+"/")+$)),_e.push(Wt)),1;if(_s=0,Vt=Vt===""?".":Vt+":",I$3($))for(var _c=0;_c<$.length;_c++){_i=$[_c];var _l=Vt+Q$3(_i,_c);_s+=R$3(_i,_e,_t,_l,Wt)}else if(_l=A$4($),typeof _l=="function")for($=_l.call($),_c=0;!(_i=$.next()).done;)_i=_i.value,_l=Vt+Q$3(_i,_c++),_s+=R$3(_i,_e,_t,_l,Wt);else if(_i==="object")throw _e=String($),Error("Objects are not valid as a React child (found: "+(_e==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":_e)+"). If you meant to render a collection of children, use an array instead.");return _s}function S$3($,_e,_t){if($==null)return $;var Vt=[],Wt=0;return R$3($,Vt,"","",function(_i){return _e.call(_t,_i,Wt++)}),Vt}function T$3($){if($._status===-1){var _e=$._result;_e=_e(),_e.then(function(_t){($._status===0||$._status===-1)&&($._status=1,$._result=_t)},function(_t){($._status===0||$._status===-1)&&($._status=2,$._result=_t)}),$._status===-1&&($._status=0,$._result=_e)}if($._status===1)return $._result.default;throw $._result}var U$2={current:null},V$1={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};react_production_min.Children={map:S$3,forEach:function($,_e,_t){S$3($,function(){_e.apply(this,arguments)},_t)},count:function($){var _e=0;return S$3($,function(){_e++}),_e},toArray:function($){return S$3($,function(_e){return _e})||[]},only:function($){if(!O$3($))throw Error("React.Children.only expected to receive a single React element child.");return $}};react_production_min.Component=E$3;react_production_min.Fragment=p$9;react_production_min.Profiler=r$5;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$7;react_production_min.Suspense=w$3;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.cloneElement=function($,_e,_t){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var Vt=C$2({},$.props),Wt=$.key,_i=$.ref,_s=$._owner;if(_e!=null){if(_e.ref!==void 0&&(_i=_e.ref,_s=K$1.current),_e.key!==void 0&&(Wt=""+_e.key),$.type&&$.type.defaultProps)var _c=$.type.defaultProps;for(_l in _e)J.call(_e,_l)&&!L$3.hasOwnProperty(_l)&&(Vt[_l]=_e[_l]===void 0&&_c!==void 0?_c[_l]:_e[_l])}var _l=arguments.length-2;if(_l===1)Vt.children=_t;else if(1<_l){_c=Array(_l);for(var _d=0;_d<_l;_d++)_c[_d]=arguments[_d+2];Vt.children=_c}return{$$typeof:l$6,type:$.type,key:Wt,ref:_i,props:Vt,_owner:_s}};react_production_min.createContext=function($){return $={$$typeof:u$6,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:t$5,_context:$},$.Consumer=$};react_production_min.createElement=M$3;react_production_min.createFactory=function($){var _e=M$3.bind(null,$);return _e.type=$,_e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function($){return{$$typeof:v$7,render:$}};react_production_min.isValidElement=O$3;react_production_min.lazy=function($){return{$$typeof:y$4,_payload:{_status:-1,_result:$},_init:T$3}};react_production_min.memo=function($,_e){return{$$typeof:x$2,type:$,compare:_e===void 0?null:_e}};react_production_min.startTransition=function($){var _e=V$1.transition;V$1.transition={};try{$()}finally{V$1.transition=_e}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function($,_e){return U$2.current.useCallback($,_e)};react_production_min.useContext=function($){return U$2.current.useContext($)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function($){return U$2.current.useDeferredValue($)};react_production_min.useEffect=function($,_e){return U$2.current.useEffect($,_e)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function($,_e,_t){return U$2.current.useImperativeHandle($,_e,_t)};react_production_min.useInsertionEffect=function($,_e){return U$2.current.useInsertionEffect($,_e)};react_production_min.useLayoutEffect=function($,_e){return U$2.current.useLayoutEffect($,_e)};react_production_min.useMemo=function($,_e){return U$2.current.useMemo($,_e)};react_production_min.useReducer=function($,_e,_t){return U$2.current.useReducer($,_e,_t)};react_production_min.useRef=function($){return U$2.current.useRef($)};react_production_min.useState=function($){return U$2.current.useState($)};react_production_min.useSyncExternalStore=function($,_e,_t){return U$2.current.useSyncExternalStore($,_e,_t)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.2.0";(function($){$.exports=react_production_min})(react);const React=getDefaultExportFromCjs$1(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$5=reactExports,k$5=Symbol.for("react.element"),l$5=Symbol.for("react.fragment"),m$7=Object.prototype.hasOwnProperty,n$5=f$5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$8={key:!0,ref:!0,__self:!0,__source:!0};function q$6($,_e,_t){var Vt,Wt={},_i=null,_s=null;_t!==void 0&&(_i=""+_t),_e.key!==void 0&&(_i=""+_e.key),_e.ref!==void 0&&(_s=_e.ref);for(Vt in _e)m$7.call(_e,Vt)&&!p$8.hasOwnProperty(Vt)&&(Wt[Vt]=_e[Vt]);if($&&$.defaultProps)for(Vt in _e=$.defaultProps,_e)Wt[Vt]===void 0&&(Wt[Vt]=_e[Vt]);return{$$typeof:k$5,type:$,key:_i,ref:_s,props:Wt,_owner:n$5.current}}reactJsxRuntime_production_min.Fragment=l$5;reactJsxRuntime_production_min.jsx=q$6;reactJsxRuntime_production_min.jsxs=q$6;(function($){$.exports=reactJsxRuntime_production_min})(jsxRuntime);const Fragment=jsxRuntimeExports.Fragment,jsx=jsxRuntimeExports.jsx,jsxs=jsxRuntimeExports.jsxs;var client={},reactDomExports={},reactDom={get exports(){return reactDomExports},set exports($){reactDomExports=$}},reactDom_production_min={},schedulerExports={},scheduler={get exports(){return schedulerExports},set exports($){schedulerExports=$}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function($){function _e(B_,Q_){var K_=B_.length;B_.push(Q_);e:for(;0<K_;){var rE=K_-1>>>1,aE=B_[rE];if(0<Wt(aE,Q_))B_[rE]=Q_,B_[K_]=aE,K_=rE;else break e}}function _t(B_){return B_.length===0?null:B_[0]}function Vt(B_){if(B_.length===0)return null;var Q_=B_[0],K_=B_.pop();if(K_!==Q_){B_[0]=K_;e:for(var rE=0,aE=B_.length,gE=aE>>>1;rE<gE;){var kE=2*(rE+1)-1,xE=B_[kE],YE=kE+1,d0=B_[YE];if(0>Wt(xE,K_))YE<aE&&0>Wt(d0,xE)?(B_[rE]=d0,B_[YE]=K_,rE=YE):(B_[rE]=xE,B_[kE]=K_,rE=kE);else if(YE<aE&&0>Wt(d0,K_))B_[rE]=d0,B_[YE]=K_,rE=YE;else break e}}return Q_}function Wt(B_,Q_){var K_=B_.sortIndex-Q_.sortIndex;return K_!==0?K_:B_.id-Q_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var _i=performance;$.unstable_now=function(){return _i.now()}}else{var _s=Date,_c=_s.now();$.unstable_now=function(){return _s.now()-_c}}var _l=[],_d=[],_m=1,e_=null,t_=3,i_=!1,c_=!1,h_=!1,y_=typeof setTimeout=="function"?setTimeout:null,l_=typeof clearTimeout=="function"?clearTimeout:null,d_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f_(B_){for(var Q_=_t(_d);Q_!==null;){if(Q_.callback===null)Vt(_d);else if(Q_.startTime<=B_)Vt(_d),Q_.sortIndex=Q_.expirationTime,_e(_l,Q_);else break;Q_=_t(_d)}}function S_(B_){if(h_=!1,f_(B_),!c_)if(_t(_l)!==null)c_=!0,Y_(T_);else{var Q_=_t(_d);Q_!==null&&z_(S_,Q_.startTime-B_)}}function T_(B_,Q_){c_=!1,h_&&(h_=!1,l_(j_),j_=-1),i_=!0;var K_=t_;try{for(f_(Q_),e_=_t(_l);e_!==null&&(!(e_.expirationTime>Q_)||B_&&!$_());){var rE=e_.callback;if(typeof rE=="function"){e_.callback=null,t_=e_.priorityLevel;var aE=rE(e_.expirationTime<=Q_);Q_=$.unstable_now(),typeof aE=="function"?e_.callback=aE:e_===_t(_l)&&Vt(_l),f_(Q_)}else Vt(_l);e_=_t(_l)}if(e_!==null)var gE=!0;else{var kE=_t(_d);kE!==null&&z_(S_,kE.startTime-Q_),gE=!1}return gE}finally{e_=null,t_=K_,i_=!1}}var R_=!1,C_=null,j_=-1,W_=5,A_=-1;function $_(){return!($.unstable_now()-A_<W_)}function q_(){if(C_!==null){var B_=$.unstable_now();A_=B_;var Q_=!0;try{Q_=C_(!0,B_)}finally{Q_?G_():(R_=!1,C_=null)}}else R_=!1}var G_;if(typeof d_=="function")G_=function(){d_(q_)};else if(typeof MessageChannel<"u"){var I_=new MessageChannel,x_=I_.port2;I_.port1.onmessage=q_,G_=function(){x_.postMessage(null)}}else G_=function(){y_(q_,0)};function Y_(B_){C_=B_,R_||(R_=!0,G_())}function z_(B_,Q_){j_=y_(function(){B_($.unstable_now())},Q_)}$.unstable_IdlePriority=5,$.unstable_ImmediatePriority=1,$.unstable_LowPriority=4,$.unstable_NormalPriority=3,$.unstable_Profiling=null,$.unstable_UserBlockingPriority=2,$.unstable_cancelCallback=function(B_){B_.callback=null},$.unstable_continueExecution=function(){c_||i_||(c_=!0,Y_(T_))},$.unstable_forceFrameRate=function(B_){0>B_||125<B_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W_=0<B_?Math.floor(1e3/B_):5},$.unstable_getCurrentPriorityLevel=function(){return t_},$.unstable_getFirstCallbackNode=function(){return _t(_l)},$.unstable_next=function(B_){switch(t_){case 1:case 2:case 3:var Q_=3;break;default:Q_=t_}var K_=t_;t_=Q_;try{return B_()}finally{t_=K_}},$.unstable_pauseExecution=function(){},$.unstable_requestPaint=function(){},$.unstable_runWithPriority=function(B_,Q_){switch(B_){case 1:case 2:case 3:case 4:case 5:break;default:B_=3}var K_=t_;t_=B_;try{return Q_()}finally{t_=K_}},$.unstable_scheduleCallback=function(B_,Q_,K_){var rE=$.unstable_now();switch(typeof K_=="object"&&K_!==null?(K_=K_.delay,K_=typeof K_=="number"&&0<K_?rE+K_:rE):K_=rE,B_){case 1:var aE=-1;break;case 2:aE=250;break;case 5:aE=1073741823;break;case 4:aE=1e4;break;default:aE=5e3}return aE=K_+aE,B_={id:_m++,callback:Q_,priorityLevel:B_,startTime:K_,expirationTime:aE,sortIndex:-1},K_>rE?(B_.sortIndex=K_,_e(_d,B_),_t(_l)===null&&B_===_t(_d)&&(h_?(l_(j_),j_=-1):h_=!0,z_(S_,K_-rE))):(B_.sortIndex=aE,_e(_l,B_),c_||i_||(c_=!0,Y_(T_))),B_},$.unstable_shouldYield=$_,$.unstable_wrapCallback=function(B_){var Q_=t_;return function(){var K_=t_;t_=Q_;try{return B_.apply(this,arguments)}finally{t_=K_}}}})(scheduler_production_min);(function($){$.exports=scheduler_production_min})(scheduler);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca$3=schedulerExports;function p$7($){for(var _e="https://reactjs.org/docs/error-decoder.html?invariant="+$,_t=1;_t<arguments.length;_t++)_e+="&args[]="+encodeURIComponent(arguments[_t]);return"Minified React error #"+$+"; visit "+_e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da$3=new Set,ea={};function fa$3($,_e){ha($,_e),ha($+"Capture",_e)}function ha($,_e){for(ea[$]=_e,$=0;$<_e.length;$++)da$3.add(_e[$])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja$3=Object.prototype.hasOwnProperty,ka$3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa($){return ja$3.call(ma,$)?!0:ja$3.call(la,$)?!1:ka$3.test($)?ma[$]=!0:(la[$]=!0,!1)}function pa($,_e,_t,Vt){if(_t!==null&&_t.type===0)return!1;switch(typeof _e){case"function":case"symbol":return!0;case"boolean":return Vt?!1:_t!==null?!_t.acceptsBooleans:($=$.toLowerCase().slice(0,5),$!=="data-"&&$!=="aria-");default:return!1}}function qa($,_e,_t,Vt){if(_e===null||typeof _e>"u"||pa($,_e,_t,Vt))return!0;if(Vt)return!1;if(_t!==null)switch(_t.type){case 3:return!_e;case 4:return _e===!1;case 5:return isNaN(_e);case 6:return isNaN(_e)||1>_e}return!1}function v$6($,_e,_t,Vt,Wt,_i,_s){this.acceptsBooleans=_e===2||_e===3||_e===4,this.attributeName=Vt,this.attributeNamespace=Wt,this.mustUseProperty=_t,this.propertyName=$,this.type=_e,this.sanitizeURL=_i,this.removeEmptyString=_s}var z$3={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function($){z$3[$]=new v$6($,0,!1,$,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function($){var _e=$[0];z$3[_e]=new v$6(_e,1,!1,$[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function($){z$3[$]=new v$6($,2,!1,$.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function($){z$3[$]=new v$6($,2,!1,$,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function($){z$3[$]=new v$6($,3,!1,$.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function($){z$3[$]=new v$6($,3,!0,$,null,!1,!1)});["capture","download"].forEach(function($){z$3[$]=new v$6($,4,!1,$,null,!1,!1)});["cols","rows","size","span"].forEach(function($){z$3[$]=new v$6($,6,!1,$,null,!1,!1)});["rowSpan","start"].forEach(function($){z$3[$]=new v$6($,5,!1,$.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa($){return $[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function($){var _e=$.replace(ra,sa);z$3[_e]=new v$6(_e,1,!1,$,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function($){var _e=$.replace(ra,sa);z$3[_e]=new v$6(_e,1,!1,$,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function($){var _e=$.replace(ra,sa);z$3[_e]=new v$6(_e,1,!1,$,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function($){z$3[$]=new v$6($,1,!1,$.toLowerCase(),null,!1,!1)});z$3.xlinkHref=new v$6("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function($){z$3[$]=new v$6($,1,!1,$.toLowerCase(),null,!0,!0)});function ta$3($,_e,_t,Vt){var Wt=z$3.hasOwnProperty(_e)?z$3[_e]:null;(Wt!==null?Wt.type!==0:Vt||!(2<_e.length)||_e[0]!=="o"&&_e[0]!=="O"||_e[1]!=="n"&&_e[1]!=="N")&&(qa(_e,_t,Wt,Vt)&&(_t=null),Vt||Wt===null?oa(_e)&&(_t===null?$.removeAttribute(_e):$.setAttribute(_e,""+_t)):Wt.mustUseProperty?$[Wt.propertyName]=_t===null?Wt.type===3?!1:"":_t:(_e=Wt.attributeName,Vt=Wt.attributeNamespace,_t===null?$.removeAttribute(_e):(Wt=Wt.type,_t=Wt===3||Wt===4&&_t===!0?"":""+_t,Vt?$.setAttributeNS(Vt,_e,_t):$.setAttribute(_e,_t))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka($){return $===null||typeof $!="object"?null:($=Ja&&$[Ja]||$["@@iterator"],typeof $=="function"?$:null)}var A$3=Object.assign,La;function Ma($){if(La===void 0)try{throw Error()}catch(_t){var _e=_t.stack.trim().match(/\n( *(at )?)/);La=_e&&_e[1]||""}return`
`+La+$}var Na=!1;function Oa($,_e){if(!$||Na)return"";Na=!0;var _t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_e)if(_e=function(){throw Error()},Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(_d){var Vt=_d}Reflect.construct($,[],_e)}else{try{_e.call()}catch(_d){Vt=_d}$.call(_e.prototype)}else{try{throw Error()}catch(_d){Vt=_d}$()}}catch(_d){if(_d&&Vt&&typeof _d.stack=="string"){for(var Wt=_d.stack.split(`
`),_i=Vt.stack.split(`
`),_s=Wt.length-1,_c=_i.length-1;1<=_s&&0<=_c&&Wt[_s]!==_i[_c];)_c--;for(;1<=_s&&0<=_c;_s--,_c--)if(Wt[_s]!==_i[_c]){if(_s!==1||_c!==1)do if(_s--,_c--,0>_c||Wt[_s]!==_i[_c]){var _l=`
`+Wt[_s].replace(" at new "," at ");return $.displayName&&_l.includes("<anonymous>")&&(_l=_l.replace("<anonymous>",$.displayName)),_l}while(1<=_s&&0<=_c);break}}}finally{Na=!1,Error.prepareStackTrace=_t}return($=$?$.displayName||$.name:"")?Ma($):""}function Pa($){switch($.tag){case 5:return Ma($.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return $=Oa($.type,!1),$;case 11:return $=Oa($.type.render,!1),$;case 1:return $=Oa($.type,!0),$;default:return""}}function Qa($){if($==null)return null;if(typeof $=="function")return $.displayName||$.name||null;if(typeof $=="string")return $;switch($){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof $=="object")switch($.$$typeof){case Ca:return($.displayName||"Context")+".Consumer";case Ba:return($._context.displayName||"Context")+".Provider";case Da:var _e=$.render;return $=$.displayName,$||($=_e.displayName||_e.name||"",$=$!==""?"ForwardRef("+$+")":"ForwardRef"),$;case Ga:return _e=$.displayName||null,_e!==null?_e:Qa($.type)||"Memo";case Ha:_e=$._payload,$=$._init;try{return Qa($(_e))}catch{}}return null}function Ra($){var _e=$.type;switch($.tag){case 24:return"Cache";case 9:return(_e.displayName||"Context")+".Consumer";case 10:return(_e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return $=_e.render,$=$.displayName||$.name||"",_e.displayName||($!==""?"ForwardRef("+$+")":"ForwardRef");case 7:return"Fragment";case 5:return _e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(_e);case 8:return _e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _e=="function")return _e.displayName||_e.name||null;if(typeof _e=="string")return _e}return null}function Sa($){switch(typeof $){case"boolean":case"number":case"string":case"undefined":return $;case"object":return $;default:return""}}function Ta($){var _e=$.type;return($=$.nodeName)&&$.toLowerCase()==="input"&&(_e==="checkbox"||_e==="radio")}function Ua($){var _e=Ta($)?"checked":"value",_t=Object.getOwnPropertyDescriptor($.constructor.prototype,_e),Vt=""+$[_e];if(!$.hasOwnProperty(_e)&&typeof _t<"u"&&typeof _t.get=="function"&&typeof _t.set=="function"){var Wt=_t.get,_i=_t.set;return Object.defineProperty($,_e,{configurable:!0,get:function(){return Wt.call(this)},set:function(_s){Vt=""+_s,_i.call(this,_s)}}),Object.defineProperty($,_e,{enumerable:_t.enumerable}),{getValue:function(){return Vt},setValue:function(_s){Vt=""+_s},stopTracking:function(){$._valueTracker=null,delete $[_e]}}}}function Va($){$._valueTracker||($._valueTracker=Ua($))}function Wa($){if(!$)return!1;var _e=$._valueTracker;if(!_e)return!0;var _t=_e.getValue(),Vt="";return $&&(Vt=Ta($)?$.checked?"true":"false":$.value),$=Vt,$!==_t?(_e.setValue($),!0):!1}function Xa($){if($=$||(typeof document<"u"?document:void 0),typeof $>"u")return null;try{return $.activeElement||$.body}catch{return $.body}}function Ya($,_e){var _t=_e.checked;return A$3({},_e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:_t??$._wrapperState.initialChecked})}function Za($,_e){var _t=_e.defaultValue==null?"":_e.defaultValue,Vt=_e.checked!=null?_e.checked:_e.defaultChecked;_t=Sa(_e.value!=null?_e.value:_t),$._wrapperState={initialChecked:Vt,initialValue:_t,controlled:_e.type==="checkbox"||_e.type==="radio"?_e.checked!=null:_e.value!=null}}function ab($,_e){_e=_e.checked,_e!=null&&ta$3($,"checked",_e,!1)}function bb($,_e){ab($,_e);var _t=Sa(_e.value),Vt=_e.type;if(_t!=null)Vt==="number"?(_t===0&&$.value===""||$.value!=_t)&&($.value=""+_t):$.value!==""+_t&&($.value=""+_t);else if(Vt==="submit"||Vt==="reset"){$.removeAttribute("value");return}_e.hasOwnProperty("value")?cb($,_e.type,_t):_e.hasOwnProperty("defaultValue")&&cb($,_e.type,Sa(_e.defaultValue)),_e.checked==null&&_e.defaultChecked!=null&&($.defaultChecked=!!_e.defaultChecked)}function db($,_e,_t){if(_e.hasOwnProperty("value")||_e.hasOwnProperty("defaultValue")){var Vt=_e.type;if(!(Vt!=="submit"&&Vt!=="reset"||_e.value!==void 0&&_e.value!==null))return;_e=""+$._wrapperState.initialValue,_t||_e===$.value||($.value=_e),$.defaultValue=_e}_t=$.name,_t!==""&&($.name=""),$.defaultChecked=!!$._wrapperState.initialChecked,_t!==""&&($.name=_t)}function cb($,_e,_t){(_e!=="number"||Xa($.ownerDocument)!==$)&&(_t==null?$.defaultValue=""+$._wrapperState.initialValue:$.defaultValue!==""+_t&&($.defaultValue=""+_t))}var eb=Array.isArray;function fb($,_e,_t,Vt){if($=$.options,_e){_e={};for(var Wt=0;Wt<_t.length;Wt++)_e["$"+_t[Wt]]=!0;for(_t=0;_t<$.length;_t++)Wt=_e.hasOwnProperty("$"+$[_t].value),$[_t].selected!==Wt&&($[_t].selected=Wt),Wt&&Vt&&($[_t].defaultSelected=!0)}else{for(_t=""+Sa(_t),_e=null,Wt=0;Wt<$.length;Wt++){if($[Wt].value===_t){$[Wt].selected=!0,Vt&&($[Wt].defaultSelected=!0);return}_e!==null||$[Wt].disabled||(_e=$[Wt])}_e!==null&&(_e.selected=!0)}}function gb($,_e){if(_e.dangerouslySetInnerHTML!=null)throw Error(p$7(91));return A$3({},_e,{value:void 0,defaultValue:void 0,children:""+$._wrapperState.initialValue})}function hb($,_e){var _t=_e.value;if(_t==null){if(_t=_e.children,_e=_e.defaultValue,_t!=null){if(_e!=null)throw Error(p$7(92));if(eb(_t)){if(1<_t.length)throw Error(p$7(93));_t=_t[0]}_e=_t}_e==null&&(_e=""),_t=_e}$._wrapperState={initialValue:Sa(_t)}}function ib($,_e){var _t=Sa(_e.value),Vt=Sa(_e.defaultValue);_t!=null&&(_t=""+_t,_t!==$.value&&($.value=_t),_e.defaultValue==null&&$.defaultValue!==_t&&($.defaultValue=_t)),Vt!=null&&($.defaultValue=""+Vt)}function jb($){var _e=$.textContent;_e===$._wrapperState.initialValue&&_e!==""&&_e!==null&&($.value=_e)}function kb($){switch($){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb$3($,_e){return $==null||$==="http://www.w3.org/1999/xhtml"?kb(_e):$==="http://www.w3.org/2000/svg"&&_e==="foreignObject"?"http://www.w3.org/1999/xhtml":$}var mb,nb$3=function($){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_e,_t,Vt,Wt){MSApp.execUnsafeLocalFunction(function(){return $(_e,_t,Vt,Wt)})}:$}(function($,_e){if($.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in $)$.innerHTML=_e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+_e.valueOf().toString()+"</svg>",_e=mb.firstChild;$.firstChild;)$.removeChild($.firstChild);for(;_e.firstChild;)$.appendChild(_e.firstChild)}});function ob($,_e){if(_e){var _t=$.firstChild;if(_t&&_t===$.lastChild&&_t.nodeType===3){_t.nodeValue=_e;return}}$.textContent=_e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function($){qb.forEach(function(_e){_e=_e+$.charAt(0).toUpperCase()+$.substring(1),pb[_e]=pb[$]})});function rb($,_e,_t){return _e==null||typeof _e=="boolean"||_e===""?"":_t||typeof _e!="number"||_e===0||pb.hasOwnProperty($)&&pb[$]?(""+_e).trim():_e+"px"}function sb($,_e){$=$.style;for(var _t in _e)if(_e.hasOwnProperty(_t)){var Vt=_t.indexOf("--")===0,Wt=rb(_t,_e[_t],Vt);_t==="float"&&(_t="cssFloat"),Vt?$.setProperty(_t,Wt):$[_t]=Wt}}var tb=A$3({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub($,_e){if(_e){if(tb[$]&&(_e.children!=null||_e.dangerouslySetInnerHTML!=null))throw Error(p$7(137,$));if(_e.dangerouslySetInnerHTML!=null){if(_e.children!=null)throw Error(p$7(60));if(typeof _e.dangerouslySetInnerHTML!="object"||!("__html"in _e.dangerouslySetInnerHTML))throw Error(p$7(61))}if(_e.style!=null&&typeof _e.style!="object")throw Error(p$7(62))}}function vb($,_e){if($.indexOf("-")===-1)return typeof _e.is=="string";switch($){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb($){return $=$.target||$.srcElement||window,$.correspondingUseElement&&($=$.correspondingUseElement),$.nodeType===3?$.parentNode:$}var yb=null,zb=null,Ab=null;function Bb($){if($=Cb($)){if(typeof yb!="function")throw Error(p$7(280));var _e=$.stateNode;_e&&(_e=Db(_e),yb($.stateNode,$.type,_e))}}function Eb($){zb?Ab?Ab.push($):Ab=[$]:zb=$}function Fb(){if(zb){var $=zb,_e=Ab;if(Ab=zb=null,Bb($),_e)for($=0;$<_e.length;$++)Bb(_e[$])}}function Gb($,_e){return $(_e)}function Hb(){}var Ib=!1;function Jb($,_e,_t){if(Ib)return $(_e,_t);Ib=!0;try{return Gb($,_e,_t)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb($,_e){var _t=$.stateNode;if(_t===null)return null;var Vt=Db(_t);if(Vt===null)return null;_t=Vt[_e];e:switch(_e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Vt=!Vt.disabled)||($=$.type,Vt=!($==="button"||$==="input"||$==="select"||$==="textarea")),$=!Vt;break e;default:$=!1}if($)return null;if(_t&&typeof _t!="function")throw Error(p$7(231,_e,typeof _t));return _t}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb($,_e,_t,Vt,Wt,_i,_s,_c,_l){var _d=Array.prototype.slice.call(arguments,3);try{_e.apply(_t,_d)}catch(_m){this.onError(_m)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function($){Ob=!0,Pb=$}};function Tb($,_e,_t,Vt,Wt,_i,_s,_c,_l){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub($,_e,_t,Vt,Wt,_i,_s,_c,_l){if(Tb.apply(this,arguments),Ob){if(Ob){var _d=Pb;Ob=!1,Pb=null}else throw Error(p$7(198));Qb||(Qb=!0,Rb=_d)}}function Vb($){var _e=$,_t=$;if($.alternate)for(;_e.return;)_e=_e.return;else{$=_e;do _e=$,_e.flags&4098&&(_t=_e.return),$=_e.return;while($)}return _e.tag===3?_t:null}function Wb($){if($.tag===13){var _e=$.memoizedState;if(_e===null&&($=$.alternate,$!==null&&(_e=$.memoizedState)),_e!==null)return _e.dehydrated}return null}function Xb($){if(Vb($)!==$)throw Error(p$7(188))}function Yb($){var _e=$.alternate;if(!_e){if(_e=Vb($),_e===null)throw Error(p$7(188));return _e!==$?null:$}for(var _t=$,Vt=_e;;){var Wt=_t.return;if(Wt===null)break;var _i=Wt.alternate;if(_i===null){if(Vt=Wt.return,Vt!==null){_t=Vt;continue}break}if(Wt.child===_i.child){for(_i=Wt.child;_i;){if(_i===_t)return Xb(Wt),$;if(_i===Vt)return Xb(Wt),_e;_i=_i.sibling}throw Error(p$7(188))}if(_t.return!==Vt.return)_t=Wt,Vt=_i;else{for(var _s=!1,_c=Wt.child;_c;){if(_c===_t){_s=!0,_t=Wt,Vt=_i;break}if(_c===Vt){_s=!0,Vt=Wt,_t=_i;break}_c=_c.sibling}if(!_s){for(_c=_i.child;_c;){if(_c===_t){_s=!0,_t=_i,Vt=Wt;break}if(_c===Vt){_s=!0,Vt=_i,_t=Wt;break}_c=_c.sibling}if(!_s)throw Error(p$7(189))}}if(_t.alternate!==Vt)throw Error(p$7(190))}if(_t.tag!==3)throw Error(p$7(188));return _t.stateNode.current===_t?$:_e}function Zb($){return $=Yb($),$!==null?$b($):null}function $b($){if($.tag===5||$.tag===6)return $;for($=$.child;$!==null;){var _e=$b($);if(_e!==null)return _e;$=$.sibling}return null}var ac=ca$3.unstable_scheduleCallback,bc=ca$3.unstable_cancelCallback,cc=ca$3.unstable_shouldYield,dc=ca$3.unstable_requestPaint,B$2=ca$3.unstable_now,ec=ca$3.unstable_getCurrentPriorityLevel,fc=ca$3.unstable_ImmediatePriority,gc=ca$3.unstable_UserBlockingPriority,hc=ca$3.unstable_NormalPriority,ic=ca$3.unstable_LowPriority,jc=ca$3.unstable_IdlePriority,kc=null,lc=null;function mc($){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,$,void 0,($.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc($){return $>>>=0,$===0?32:31-(pc($)/qc|0)|0}var rc=64,sc=4194304;function tc($){switch($&-$){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return $&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return $&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return $}}function uc($,_e){var _t=$.pendingLanes;if(_t===0)return 0;var Vt=0,Wt=$.suspendedLanes,_i=$.pingedLanes,_s=_t&268435455;if(_s!==0){var _c=_s&~Wt;_c!==0?Vt=tc(_c):(_i&=_s,_i!==0&&(Vt=tc(_i)))}else _s=_t&~Wt,_s!==0?Vt=tc(_s):_i!==0&&(Vt=tc(_i));if(Vt===0)return 0;if(_e!==0&&_e!==Vt&&!(_e&Wt)&&(Wt=Vt&-Vt,_i=_e&-_e,Wt>=_i||Wt===16&&(_i&4194240)!==0))return _e;if(Vt&4&&(Vt|=_t&16),_e=$.entangledLanes,_e!==0)for($=$.entanglements,_e&=Vt;0<_e;)_t=31-oc(_e),Wt=1<<_t,Vt|=$[_t],_e&=~Wt;return Vt}function vc($,_e){switch($){case 1:case 2:case 4:return _e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc($,_e){for(var _t=$.suspendedLanes,Vt=$.pingedLanes,Wt=$.expirationTimes,_i=$.pendingLanes;0<_i;){var _s=31-oc(_i),_c=1<<_s,_l=Wt[_s];_l===-1?(!(_c&_t)||_c&Vt)&&(Wt[_s]=vc(_c,_e)):_l<=_e&&($.expiredLanes|=_c),_i&=~_c}}function xc($){return $=$.pendingLanes&-1073741825,$!==0?$:$&1073741824?1073741824:0}function yc(){var $=rc;return rc<<=1,!(rc&4194240)&&(rc=64),$}function zc($){for(var _e=[],_t=0;31>_t;_t++)_e.push($);return _e}function Ac($,_e,_t){$.pendingLanes|=_e,_e!==536870912&&($.suspendedLanes=0,$.pingedLanes=0),$=$.eventTimes,_e=31-oc(_e),$[_e]=_t}function Bc($,_e){var _t=$.pendingLanes&~_e;$.pendingLanes=_e,$.suspendedLanes=0,$.pingedLanes=0,$.expiredLanes&=_e,$.mutableReadLanes&=_e,$.entangledLanes&=_e,_e=$.entanglements;var Vt=$.eventTimes;for($=$.expirationTimes;0<_t;){var Wt=31-oc(_t),_i=1<<Wt;_e[Wt]=0,Vt[Wt]=-1,$[Wt]=-1,_t&=~_i}}function Cc($,_e){var _t=$.entangledLanes|=_e;for($=$.entanglements;_t;){var Vt=31-oc(_t),Wt=1<<Vt;Wt&_e|$[Vt]&_e&&($[Vt]|=_e),_t&=~Wt}}var C$1=0;function Dc($){return $&=-$,1<$?4<$?$&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc($,_e){switch($){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(_e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(_e.pointerId)}}function Tc($,_e,_t,Vt,Wt,_i){return $===null||$.nativeEvent!==_i?($={blockedOn:_e,domEventName:_t,eventSystemFlags:Vt,nativeEvent:_i,targetContainers:[Wt]},_e!==null&&(_e=Cb(_e),_e!==null&&Fc(_e)),$):($.eventSystemFlags|=Vt,_e=$.targetContainers,Wt!==null&&_e.indexOf(Wt)===-1&&_e.push(Wt),$)}function Uc($,_e,_t,Vt,Wt){switch(_e){case"focusin":return Lc=Tc(Lc,$,_e,_t,Vt,Wt),!0;case"dragenter":return Mc=Tc(Mc,$,_e,_t,Vt,Wt),!0;case"mouseover":return Nc=Tc(Nc,$,_e,_t,Vt,Wt),!0;case"pointerover":var _i=Wt.pointerId;return Oc.set(_i,Tc(Oc.get(_i)||null,$,_e,_t,Vt,Wt)),!0;case"gotpointercapture":return _i=Wt.pointerId,Pc.set(_i,Tc(Pc.get(_i)||null,$,_e,_t,Vt,Wt)),!0}return!1}function Vc($){var _e=Wc($.target);if(_e!==null){var _t=Vb(_e);if(_t!==null){if(_e=_t.tag,_e===13){if(_e=Wb(_t),_e!==null){$.blockedOn=_e,Ic($.priority,function(){Gc(_t)});return}}else if(_e===3&&_t.stateNode.current.memoizedState.isDehydrated){$.blockedOn=_t.tag===3?_t.stateNode.containerInfo:null;return}}}$.blockedOn=null}function Xc($){if($.blockedOn!==null)return!1;for(var _e=$.targetContainers;0<_e.length;){var _t=Yc($.domEventName,$.eventSystemFlags,_e[0],$.nativeEvent);if(_t===null){_t=$.nativeEvent;var Vt=new _t.constructor(_t.type,_t);wb=Vt,_t.target.dispatchEvent(Vt),wb=null}else return _e=Cb(_t),_e!==null&&Fc(_e),$.blockedOn=_t,!1;_e.shift()}return!0}function Zc($,_e,_t){Xc($)&&_t.delete(_e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad($,_e){$.blockedOn===_e&&($.blockedOn=null,Jc||(Jc=!0,ca$3.unstable_scheduleCallback(ca$3.unstable_NormalPriority,$c)))}function bd($){function _e(Wt){return ad(Wt,$)}if(0<Kc.length){ad(Kc[0],$);for(var _t=1;_t<Kc.length;_t++){var Vt=Kc[_t];Vt.blockedOn===$&&(Vt.blockedOn=null)}}for(Lc!==null&&ad(Lc,$),Mc!==null&&ad(Mc,$),Nc!==null&&ad(Nc,$),Oc.forEach(_e),Pc.forEach(_e),_t=0;_t<Qc.length;_t++)Vt=Qc[_t],Vt.blockedOn===$&&(Vt.blockedOn=null);for(;0<Qc.length&&(_t=Qc[0],_t.blockedOn===null);)Vc(_t),_t.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed($,_e,_t,Vt){var Wt=C$1,_i=cd.transition;cd.transition=null;try{C$1=1,fd($,_e,_t,Vt)}finally{C$1=Wt,cd.transition=_i}}function gd$3($,_e,_t,Vt){var Wt=C$1,_i=cd.transition;cd.transition=null;try{C$1=4,fd($,_e,_t,Vt)}finally{C$1=Wt,cd.transition=_i}}function fd($,_e,_t,Vt){if(dd){var Wt=Yc($,_e,_t,Vt);if(Wt===null)hd($,_e,Vt,id$3,_t),Sc($,Vt);else if(Uc(Wt,$,_e,_t,Vt))Vt.stopPropagation();else if(Sc($,Vt),_e&4&&-1<Rc.indexOf($)){for(;Wt!==null;){var _i=Cb(Wt);if(_i!==null&&Ec(_i),_i=Yc($,_e,_t,Vt),_i===null&&hd($,_e,Vt,id$3,_t),_i===Wt)break;Wt=_i}Wt!==null&&Vt.stopPropagation()}else hd($,_e,Vt,null,_t)}}var id$3=null;function Yc($,_e,_t,Vt){if(id$3=null,$=xb(Vt),$=Wc($),$!==null)if(_e=Vb($),_e===null)$=null;else if(_t=_e.tag,_t===13){if($=Wb(_e),$!==null)return $;$=null}else if(_t===3){if(_e.stateNode.current.memoizedState.isDehydrated)return _e.tag===3?_e.stateNode.containerInfo:null;$=null}else _e!==$&&($=null);return id$3=$,null}function jd($){switch($){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var $,_e=ld,_t=_e.length,Vt,Wt="value"in kd?kd.value:kd.textContent,_i=Wt.length;for($=0;$<_t&&_e[$]===Wt[$];$++);var _s=_t-$;for(Vt=1;Vt<=_s&&_e[_t-Vt]===Wt[_i-Vt];Vt++);return md=Wt.slice($,1<Vt?1-Vt:void 0)}function od($){var _e=$.keyCode;return"charCode"in $?($=$.charCode,$===0&&_e===13&&($=13)):$=_e,$===10&&($=13),32<=$||$===13?$:0}function pd(){return!0}function qd(){return!1}function rd($){function _e(_t,Vt,Wt,_i,_s){this._reactName=_t,this._targetInst=Wt,this.type=Vt,this.nativeEvent=_i,this.target=_s,this.currentTarget=null;for(var _c in $)$.hasOwnProperty(_c)&&(_t=$[_c],this[_c]=_t?_t(_i):_i[_c]);return this.isDefaultPrevented=(_i.defaultPrevented!=null?_i.defaultPrevented:_i.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$3(_e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _t=this.nativeEvent;_t&&(_t.preventDefault?_t.preventDefault():typeof _t.returnValue!="unknown"&&(_t.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var _t=this.nativeEvent;_t&&(_t.stopPropagation?_t.stopPropagation():typeof _t.cancelBubble!="unknown"&&(_t.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),_e}var sd$3={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function($){return $.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd$3),ud=A$3({},sd$3,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$3({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function($){return $.relatedTarget===void 0?$.fromElement===$.srcElement?$.toElement:$.fromElement:$.relatedTarget},movementX:function($){return"movementX"in $?$.movementX:($!==yd&&(yd&&$.type==="mousemove"?(wd=$.screenX-yd.screenX,xd=$.screenY-yd.screenY):xd=wd=0,yd=$),wd)},movementY:function($){return"movementY"in $?$.movementY:xd}}),Bd=rd(Ad),Cd=A$3({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$3({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$3({},sd$3,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$3({},sd$3,{clipboardData:function($){return"clipboardData"in $?$.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$3({},sd$3,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd($){var _e=this.nativeEvent;return _e.getModifierState?_e.getModifierState($):($=Od[$])?!!_e[$]:!1}function zd(){return Pd}var Qd=A$3({},ud,{key:function($){if($.key){var _e=Md[$.key]||$.key;if(_e!=="Unidentified")return _e}return $.type==="keypress"?($=od($),$===13?"Enter":String.fromCharCode($)):$.type==="keydown"||$.type==="keyup"?Nd[$.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function($){return $.type==="keypress"?od($):0},keyCode:function($){return $.type==="keydown"||$.type==="keyup"?$.keyCode:0},which:function($){return $.type==="keypress"?od($):$.type==="keydown"||$.type==="keyup"?$.keyCode:0}}),Rd=rd(Qd),Sd=A$3({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$3({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$3({},sd$3,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$3({},Ad,{deltaX:function($){return"deltaX"in $?$.deltaX:"wheelDeltaX"in $?-$.wheelDeltaX:0},deltaY:function($){return"deltaY"in $?$.deltaY:"wheelDeltaY"in $?-$.wheelDeltaY:"wheelDelta"in $?-$.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de$3=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;function ge($,_e){switch($){case"keyup":return $d.indexOf(_e.keyCode)!==-1;case"keydown":return _e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$3($){return $=$.detail,typeof $=="object"&&"data"in $?$.data:null}var ie=!1;function je($,_e){switch($){case"compositionend":return he$3(_e);case"keypress":return _e.which!==32?null:(fe=!0,ee);case"textInput":return $=_e.data,$===ee&&fe?null:$;default:return null}}function ke($,_e){if(ie)return $==="compositionend"||!ae&&ge($,_e)?($=nd(),md=ld=kd=null,ie=!1,$):null;switch($){case"paste":return null;case"keypress":if(!(_e.ctrlKey||_e.altKey||_e.metaKey)||_e.ctrlKey&&_e.altKey){if(_e.char&&1<_e.char.length)return _e.char;if(_e.which)return String.fromCharCode(_e.which)}return null;case"compositionend":return de$3&&_e.locale!=="ko"?null:_e.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$3($){var _e=$&&$.nodeName&&$.nodeName.toLowerCase();return _e==="input"?!!le[$.type]:_e==="textarea"}function ne$3($,_e,_t,Vt){Eb(Vt),_e=oe(_e,"onChange"),0<_e.length&&(_t=new td("onChange","change",null,_t,Vt),$.push({event:_t,listeners:_e}))}var pe=null,qe=null;function re$1($){se$3($,0)}function te$3($){var _e=ue($);if(Wa(_e))return $}function ve($,_e){if($==="change")return _e}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be($){if($.propertyName==="value"&&te$3(qe)){var _e=[];ne$3(_e,qe,$,xb($)),Jb(re$1,_e)}}function Ce($,_e,_t){$==="focusin"?(Ae(),pe=_e,qe=_t,pe.attachEvent("onpropertychange",Be)):$==="focusout"&&Ae()}function De($){if($==="selectionchange"||$==="keyup"||$==="keydown")return te$3(qe)}function Ee($,_e){if($==="click")return te$3(_e)}function Fe($,_e){if($==="input"||$==="change")return te$3(_e)}function Ge($,_e){return $===_e&&($!==0||1/$===1/_e)||$!==$&&_e!==_e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie($,_e){if(He($,_e))return!0;if(typeof $!="object"||$===null||typeof _e!="object"||_e===null)return!1;var _t=Object.keys($),Vt=Object.keys(_e);if(_t.length!==Vt.length)return!1;for(Vt=0;Vt<_t.length;Vt++){var Wt=_t[Vt];if(!ja$3.call(_e,Wt)||!He($[Wt],_e[Wt]))return!1}return!0}function Je($){for(;$&&$.firstChild;)$=$.firstChild;return $}function Ke($,_e){var _t=Je($);$=0;for(var Vt;_t;){if(_t.nodeType===3){if(Vt=$+_t.textContent.length,$<=_e&&Vt>=_e)return{node:_t,offset:_e-$};$=Vt}e:{for(;_t;){if(_t.nextSibling){_t=_t.nextSibling;break e}_t=_t.parentNode}_t=void 0}_t=Je(_t)}}function Le($,_e){return $&&_e?$===_e?!0:$&&$.nodeType===3?!1:_e&&_e.nodeType===3?Le($,_e.parentNode):"contains"in $?$.contains(_e):$.compareDocumentPosition?!!($.compareDocumentPosition(_e)&16):!1:!1}function Me(){for(var $=window,_e=Xa();_e instanceof $.HTMLIFrameElement;){try{var _t=typeof _e.contentWindow.location.href=="string"}catch{_t=!1}if(_t)$=_e.contentWindow;else break;_e=Xa($.document)}return _e}function Ne($){var _e=$&&$.nodeName&&$.nodeName.toLowerCase();return _e&&(_e==="input"&&($.type==="text"||$.type==="search"||$.type==="tel"||$.type==="url"||$.type==="password")||_e==="textarea"||$.contentEditable==="true")}function Oe($){var _e=Me(),_t=$.focusedElem,Vt=$.selectionRange;if(_e!==_t&&_t&&_t.ownerDocument&&Le(_t.ownerDocument.documentElement,_t)){if(Vt!==null&&Ne(_t)){if(_e=Vt.start,$=Vt.end,$===void 0&&($=_e),"selectionStart"in _t)_t.selectionStart=_e,_t.selectionEnd=Math.min($,_t.value.length);else if($=(_e=_t.ownerDocument||document)&&_e.defaultView||window,$.getSelection){$=$.getSelection();var Wt=_t.textContent.length,_i=Math.min(Vt.start,Wt);Vt=Vt.end===void 0?_i:Math.min(Vt.end,Wt),!$.extend&&_i>Vt&&(Wt=Vt,Vt=_i,_i=Wt),Wt=Ke(_t,_i);var _s=Ke(_t,Vt);Wt&&_s&&($.rangeCount!==1||$.anchorNode!==Wt.node||$.anchorOffset!==Wt.offset||$.focusNode!==_s.node||$.focusOffset!==_s.offset)&&(_e=_e.createRange(),_e.setStart(Wt.node,Wt.offset),$.removeAllRanges(),_i>Vt?($.addRange(_e),$.extend(_s.node,_s.offset)):(_e.setEnd(_s.node,_s.offset),$.addRange(_e)))}}for(_e=[],$=_t;$=$.parentNode;)$.nodeType===1&&_e.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof _t.focus=="function"&&_t.focus(),_t=0;_t<_e.length;_t++)$=_e[_t],$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue($,_e,_t){var Vt=_t.window===_t?_t.document:_t.nodeType===9?_t:_t.ownerDocument;Te||Qe==null||Qe!==Xa(Vt)||(Vt=Qe,"selectionStart"in Vt&&Ne(Vt)?Vt={start:Vt.selectionStart,end:Vt.selectionEnd}:(Vt=(Vt.ownerDocument&&Vt.ownerDocument.defaultView||window).getSelection(),Vt={anchorNode:Vt.anchorNode,anchorOffset:Vt.anchorOffset,focusNode:Vt.focusNode,focusOffset:Vt.focusOffset}),Se&&Ie(Se,Vt)||(Se=Vt,Vt=oe(Re,"onSelect"),0<Vt.length&&(_e=new td("onSelect","select",null,_e,_t),$.push({event:_e,listeners:Vt}),_e.target=Qe)))}function Ve($,_e){var _t={};return _t[$.toLowerCase()]=_e.toLowerCase(),_t["Webkit"+$]="webkit"+_e,_t["Moz"+$]="moz"+_e,_t}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze($){if(Xe[$])return Xe[$];if(!We[$])return $;var _e=We[$],_t;for(_t in _e)if(_e.hasOwnProperty(_t)&&_t in Ye)return Xe[$]=_e[_t];return $}var $e=Ze("animationend"),af$3=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff($,_e){df.set($,_e),fa$3(_e,[$])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af$3,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa$3("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa$3("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa$3("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa$3("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa$3("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa$3("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf($,_e,_t){var Vt=$.type||"unknown-event";$.currentTarget=_t,Ub(Vt,_e,void 0,$),$.currentTarget=null}function se$3($,_e){_e=(_e&4)!==0;for(var _t=0;_t<$.length;_t++){var Vt=$[_t],Wt=Vt.event;Vt=Vt.listeners;e:{var _i=void 0;if(_e)for(var _s=Vt.length-1;0<=_s;_s--){var _c=Vt[_s],_l=_c.instance,_d=_c.currentTarget;if(_c=_c.listener,_l!==_i&&Wt.isPropagationStopped())break e;nf(Wt,_c,_d),_i=_l}else for(_s=0;_s<Vt.length;_s++){if(_c=Vt[_s],_l=_c.instance,_d=_c.currentTarget,_c=_c.listener,_l!==_i&&Wt.isPropagationStopped())break e;nf(Wt,_c,_d),_i=_l}}}if(Qb)throw $=Rb,Qb=!1,Rb=null,$}function D$2($,_e){var _t=_e[of];_t===void 0&&(_t=_e[of]=new Set);var Vt=$+"__bubble";_t.has(Vt)||(pf(_e,$,2,!1),_t.add(Vt))}function qf($,_e,_t){var Vt=0;_e&&(Vt|=4),pf(_t,$,Vt,_e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf($){if(!$[rf]){$[rf]=!0,da$3.forEach(function(_t){_t!=="selectionchange"&&(mf.has(_t)||qf(_t,!1,$),qf(_t,!0,$))});var _e=$.nodeType===9?$:$.ownerDocument;_e===null||_e[rf]||(_e[rf]=!0,qf("selectionchange",!1,_e))}}function pf($,_e,_t,Vt){switch(jd(_e)){case 1:var Wt=ed;break;case 4:Wt=gd$3;break;default:Wt=fd}_t=Wt.bind(null,_e,_t,$),Wt=void 0,!Lb||_e!=="touchstart"&&_e!=="touchmove"&&_e!=="wheel"||(Wt=!0),Vt?Wt!==void 0?$.addEventListener(_e,_t,{capture:!0,passive:Wt}):$.addEventListener(_e,_t,!0):Wt!==void 0?$.addEventListener(_e,_t,{passive:Wt}):$.addEventListener(_e,_t,!1)}function hd($,_e,_t,Vt,Wt){var _i=Vt;if(!(_e&1)&&!(_e&2)&&Vt!==null)e:for(;;){if(Vt===null)return;var _s=Vt.tag;if(_s===3||_s===4){var _c=Vt.stateNode.containerInfo;if(_c===Wt||_c.nodeType===8&&_c.parentNode===Wt)break;if(_s===4)for(_s=Vt.return;_s!==null;){var _l=_s.tag;if((_l===3||_l===4)&&(_l=_s.stateNode.containerInfo,_l===Wt||_l.nodeType===8&&_l.parentNode===Wt))return;_s=_s.return}for(;_c!==null;){if(_s=Wc(_c),_s===null)return;if(_l=_s.tag,_l===5||_l===6){Vt=_i=_s;continue e}_c=_c.parentNode}}Vt=Vt.return}Jb(function(){var _d=_i,_m=xb(_t),e_=[];e:{var t_=df.get($);if(t_!==void 0){var i_=td,c_=$;switch($){case"keypress":if(od(_t)===0)break e;case"keydown":case"keyup":i_=Rd;break;case"focusin":c_="focus",i_=Fd;break;case"focusout":c_="blur",i_=Fd;break;case"beforeblur":case"afterblur":i_=Fd;break;case"click":if(_t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":i_=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":i_=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":i_=Vd;break;case $e:case af$3:case bf:i_=Hd;break;case cf:i_=Xd;break;case"scroll":i_=vd;break;case"wheel":i_=Zd;break;case"copy":case"cut":case"paste":i_=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":i_=Td}var h_=(_e&4)!==0,y_=!h_&&$==="scroll",l_=h_?t_!==null?t_+"Capture":null:t_;h_=[];for(var d_=_d,f_;d_!==null;){f_=d_;var S_=f_.stateNode;if(f_.tag===5&&S_!==null&&(f_=S_,l_!==null&&(S_=Kb(d_,l_),S_!=null&&h_.push(tf(d_,S_,f_)))),y_)break;d_=d_.return}0<h_.length&&(t_=new i_(t_,c_,null,_t,_m),e_.push({event:t_,listeners:h_}))}}if(!(_e&7)){e:{if(t_=$==="mouseover"||$==="pointerover",i_=$==="mouseout"||$==="pointerout",t_&&_t!==wb&&(c_=_t.relatedTarget||_t.fromElement)&&(Wc(c_)||c_[uf]))break e;if((i_||t_)&&(t_=_m.window===_m?_m:(t_=_m.ownerDocument)?t_.defaultView||t_.parentWindow:window,i_?(c_=_t.relatedTarget||_t.toElement,i_=_d,c_=c_?Wc(c_):null,c_!==null&&(y_=Vb(c_),c_!==y_||c_.tag!==5&&c_.tag!==6)&&(c_=null)):(i_=null,c_=_d),i_!==c_)){if(h_=Bd,S_="onMouseLeave",l_="onMouseEnter",d_="mouse",($==="pointerout"||$==="pointerover")&&(h_=Td,S_="onPointerLeave",l_="onPointerEnter",d_="pointer"),y_=i_==null?t_:ue(i_),f_=c_==null?t_:ue(c_),t_=new h_(S_,d_+"leave",i_,_t,_m),t_.target=y_,t_.relatedTarget=f_,S_=null,Wc(_m)===_d&&(h_=new h_(l_,d_+"enter",c_,_t,_m),h_.target=f_,h_.relatedTarget=y_,S_=h_),y_=S_,i_&&c_)t:{for(h_=i_,l_=c_,d_=0,f_=h_;f_;f_=vf(f_))d_++;for(f_=0,S_=l_;S_;S_=vf(S_))f_++;for(;0<d_-f_;)h_=vf(h_),d_--;for(;0<f_-d_;)l_=vf(l_),f_--;for(;d_--;){if(h_===l_||l_!==null&&h_===l_.alternate)break t;h_=vf(h_),l_=vf(l_)}h_=null}else h_=null;i_!==null&&wf(e_,t_,i_,h_,!1),c_!==null&&y_!==null&&wf(e_,y_,c_,h_,!0)}}e:{if(t_=_d?ue(_d):window,i_=t_.nodeName&&t_.nodeName.toLowerCase(),i_==="select"||i_==="input"&&t_.type==="file")var T_=ve;else if(me$3(t_))if(we)T_=Fe;else{T_=De;var R_=Ce}else(i_=t_.nodeName)&&i_.toLowerCase()==="input"&&(t_.type==="checkbox"||t_.type==="radio")&&(T_=Ee);if(T_&&(T_=T_($,_d))){ne$3(e_,T_,_t,_m);break e}R_&&R_($,t_,_d),$==="focusout"&&(R_=t_._wrapperState)&&R_.controlled&&t_.type==="number"&&cb(t_,"number",t_.value)}switch(R_=_d?ue(_d):window,$){case"focusin":(me$3(R_)||R_.contentEditable==="true")&&(Qe=R_,Re=_d,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(e_,_t,_m);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(e_,_t,_m)}var C_;if(ae)e:{switch($){case"compositionstart":var j_="onCompositionStart";break e;case"compositionend":j_="onCompositionEnd";break e;case"compositionupdate":j_="onCompositionUpdate";break e}j_=void 0}else ie?ge($,_t)&&(j_="onCompositionEnd"):$==="keydown"&&_t.keyCode===229&&(j_="onCompositionStart");j_&&(de$3&&_t.locale!=="ko"&&(ie||j_!=="onCompositionStart"?j_==="onCompositionEnd"&&ie&&(C_=nd()):(kd=_m,ld="value"in kd?kd.value:kd.textContent,ie=!0)),R_=oe(_d,j_),0<R_.length&&(j_=new Ld(j_,$,null,_t,_m),e_.push({event:j_,listeners:R_}),C_?j_.data=C_:(C_=he$3(_t),C_!==null&&(j_.data=C_)))),(C_=ce?je($,_t):ke($,_t))&&(_d=oe(_d,"onBeforeInput"),0<_d.length&&(_m=new Ld("onBeforeInput","beforeinput",null,_t,_m),e_.push({event:_m,listeners:_d}),_m.data=C_))}se$3(e_,_e)})}function tf($,_e,_t){return{instance:$,listener:_e,currentTarget:_t}}function oe($,_e){for(var _t=_e+"Capture",Vt=[];$!==null;){var Wt=$,_i=Wt.stateNode;Wt.tag===5&&_i!==null&&(Wt=_i,_i=Kb($,_t),_i!=null&&Vt.unshift(tf($,_i,Wt)),_i=Kb($,_e),_i!=null&&Vt.push(tf($,_i,Wt))),$=$.return}return Vt}function vf($){if($===null)return null;do $=$.return;while($&&$.tag!==5);return $||null}function wf($,_e,_t,Vt,Wt){for(var _i=_e._reactName,_s=[];_t!==null&&_t!==Vt;){var _c=_t,_l=_c.alternate,_d=_c.stateNode;if(_l!==null&&_l===Vt)break;_c.tag===5&&_d!==null&&(_c=_d,Wt?(_l=Kb(_t,_i),_l!=null&&_s.unshift(tf(_t,_l,_c))):Wt||(_l=Kb(_t,_i),_l!=null&&_s.push(tf(_t,_l,_c)))),_t=_t.return}_s.length!==0&&$.push({event:_e,listeners:_s})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf($){return(typeof $=="string"?$:""+$).replace(xf,`
`).replace(yf,"")}function Af($,_e,_t){if(_e=zf(_e),zf($)!==_e&&_t)throw Error(p$7(425))}function Bf(){}var Cf=null,Df=null;function Ef($,_e){return $==="textarea"||$==="noscript"||typeof _e.children=="string"||typeof _e.children=="number"||typeof _e.dangerouslySetInnerHTML=="object"&&_e.dangerouslySetInnerHTML!==null&&_e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function($){return Hf.resolve(null).then($).catch(If)}:Ff;function If($){setTimeout(function(){throw $})}function Kf($,_e){var _t=_e,Vt=0;do{var Wt=_t.nextSibling;if($.removeChild(_t),Wt&&Wt.nodeType===8)if(_t=Wt.data,_t==="/$"){if(Vt===0){$.removeChild(Wt),bd(_e);return}Vt--}else _t!=="$"&&_t!=="$?"&&_t!=="$!"||Vt++;_t=Wt}while(_t);bd(_e)}function Lf($){for(;$!=null;$=$.nextSibling){var _e=$.nodeType;if(_e===1||_e===3)break;if(_e===8){if(_e=$.data,_e==="$"||_e==="$!"||_e==="$?")break;if(_e==="/$")return null}}return $}function Mf($){$=$.previousSibling;for(var _e=0;$;){if($.nodeType===8){var _t=$.data;if(_t==="$"||_t==="$!"||_t==="$?"){if(_e===0)return $;_e--}else _t==="/$"&&_e++}$=$.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc($){var _e=$[Of];if(_e)return _e;for(var _t=$.parentNode;_t;){if(_e=_t[uf]||_t[Of]){if(_t=_e.alternate,_e.child!==null||_t!==null&&_t.child!==null)for($=Mf($);$!==null;){if(_t=$[Of])return _t;$=Mf($)}return _e}$=_t,_t=$.parentNode}return null}function Cb($){return $=$[Of]||$[uf],!$||$.tag!==5&&$.tag!==6&&$.tag!==13&&$.tag!==3?null:$}function ue($){if($.tag===5||$.tag===6)return $.stateNode;throw Error(p$7(33))}function Db($){return $[Pf]||null}var Sf=[],Tf=-1;function Uf($){return{current:$}}function E$2($){0>Tf||($.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1($,_e){Tf++,Sf[Tf]=$.current,$.current=_e}var Vf={},H$2=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf($,_e){var _t=$.type.contextTypes;if(!_t)return Vf;var Vt=$.stateNode;if(Vt&&Vt.__reactInternalMemoizedUnmaskedChildContext===_e)return Vt.__reactInternalMemoizedMaskedChildContext;var Wt={},_i;for(_i in _t)Wt[_i]=_e[_i];return Vt&&($=$.stateNode,$.__reactInternalMemoizedUnmaskedChildContext=_e,$.__reactInternalMemoizedMaskedChildContext=Wt),Wt}function Zf($){return $=$.childContextTypes,$!=null}function $f(){E$2(Wf),E$2(H$2)}function ag($,_e,_t){if(H$2.current!==Vf)throw Error(p$7(168));G$1(H$2,_e),G$1(Wf,_t)}function bg$3($,_e,_t){var Vt=$.stateNode;if(_e=_e.childContextTypes,typeof Vt.getChildContext!="function")return _t;Vt=Vt.getChildContext();for(var Wt in Vt)if(!(Wt in _e))throw Error(p$7(108,Ra($)||"Unknown",Wt));return A$3({},_t,Vt)}function cg($){return $=($=$.stateNode)&&$.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$2.current,G$1(H$2,$),G$1(Wf,Wf.current),!0}function dg($,_e,_t){var Vt=$.stateNode;if(!Vt)throw Error(p$7(169));_t?($=bg$3($,_e,Xf),Vt.__reactInternalMemoizedMergedChildContext=$,E$2(Wf),E$2(H$2),G$1(H$2,$)):E$2(Wf),G$1(Wf,_t)}var eg=null,fg=!1,gg=!1;function hg($){eg===null?eg=[$]:eg.push($)}function ig($){fg=!0,hg($)}function jg(){if(!gg&&eg!==null){gg=!0;var $=0,_e=C$1;try{var _t=eg;for(C$1=1;$<_t.length;$++){var Vt=_t[$];do Vt=Vt(!0);while(Vt!==null)}eg=null,fg=!1}catch(Wt){throw eg!==null&&(eg=eg.slice($+1)),ac(fc,jg),Wt}finally{C$1=_e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg$3($,_e){kg[lg++]=ng,kg[lg++]=mg,mg=$,ng=_e}function ug($,_e,_t){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=$;var Vt=rg;$=sg;var Wt=32-oc(Vt)-1;Vt&=~(1<<Wt),_t+=1;var _i=32-oc(_e)+Wt;if(30<_i){var _s=Wt-Wt%5;_i=(Vt&(1<<_s)-1).toString(32),Vt>>=_s,Wt-=_s,rg=1<<32-oc(_e)+Wt|_t<<Wt|Vt,sg=_i+$}else rg=1<<_i|_t<<Wt|Vt,sg=$}function vg($){$.return!==null&&(tg$3($,1),ug($,1,0))}function wg($){for(;$===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;$===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$2=!1,zg=null;function Ag($,_e){var _t=Bg(5,null,null,0);_t.elementType="DELETED",_t.stateNode=_e,_t.return=$,_e=$.deletions,_e===null?($.deletions=[_t],$.flags|=16):_e.push(_t)}function Cg($,_e){switch($.tag){case 5:var _t=$.type;return _e=_e.nodeType!==1||_t.toLowerCase()!==_e.nodeName.toLowerCase()?null:_e,_e!==null?($.stateNode=_e,xg=$,yg=Lf(_e.firstChild),!0):!1;case 6:return _e=$.pendingProps===""||_e.nodeType!==3?null:_e,_e!==null?($.stateNode=_e,xg=$,yg=null,!0):!1;case 13:return _e=_e.nodeType!==8?null:_e,_e!==null?(_t=qg!==null?{id:rg,overflow:sg}:null,$.memoizedState={dehydrated:_e,treeContext:_t,retryLane:1073741824},_t=Bg(18,null,null,0),_t.stateNode=_e,_t.return=$,$.child=_t,xg=$,yg=null,!0):!1;default:return!1}}function Dg($){return($.mode&1)!==0&&($.flags&128)===0}function Eg($){if(I$2){var _e=yg;if(_e){var _t=_e;if(!Cg($,_e)){if(Dg($))throw Error(p$7(418));_e=Lf(_t.nextSibling);var Vt=xg;_e&&Cg($,_e)?Ag(Vt,_t):($.flags=$.flags&-4097|2,I$2=!1,xg=$)}}else{if(Dg($))throw Error(p$7(418));$.flags=$.flags&-4097|2,I$2=!1,xg=$}}}function Fg($){for($=$.return;$!==null&&$.tag!==5&&$.tag!==3&&$.tag!==13;)$=$.return;xg=$}function Gg($){if($!==xg)return!1;if(!I$2)return Fg($),I$2=!0,!1;var _e;if((_e=$.tag!==3)&&!(_e=$.tag!==5)&&(_e=$.type,_e=_e!=="head"&&_e!=="body"&&!Ef($.type,$.memoizedProps)),_e&&(_e=yg)){if(Dg($))throw Hg(),Error(p$7(418));for(;_e;)Ag($,_e),_e=Lf(_e.nextSibling)}if(Fg($),$.tag===13){if($=$.memoizedState,$=$!==null?$.dehydrated:null,!$)throw Error(p$7(317));e:{for($=$.nextSibling,_e=0;$;){if($.nodeType===8){var _t=$.data;if(_t==="/$"){if(_e===0){yg=Lf($.nextSibling);break e}_e--}else _t!=="$"&&_t!=="$!"&&_t!=="$?"||_e++}$=$.nextSibling}yg=null}}else yg=xg?Lf($.stateNode.nextSibling):null;return!0}function Hg(){for(var $=yg;$;)$=Lf($.nextSibling)}function Ig(){yg=xg=null,I$2=!1}function Jg($){zg===null?zg=[$]:zg.push($)}var Kg=ua.ReactCurrentBatchConfig;function Lg($,_e){if($&&$.defaultProps){_e=A$3({},_e),$=$.defaultProps;for(var _t in $)_e[_t]===void 0&&(_e[_t]=$[_t]);return _e}return _e}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg($){var _e=Mg.current;E$2(Mg),$._currentValue=_e}function Sg($,_e,_t){for(;$!==null;){var Vt=$.alternate;if(($.childLanes&_e)!==_e?($.childLanes|=_e,Vt!==null&&(Vt.childLanes|=_e)):Vt!==null&&(Vt.childLanes&_e)!==_e&&(Vt.childLanes|=_e),$===_t)break;$=$.return}}function Tg($,_e){Ng=$,Pg=Og=null,$=$.dependencies,$!==null&&$.firstContext!==null&&($.lanes&_e&&(Ug=!0),$.firstContext=null)}function Vg($){var _e=$._currentValue;if(Pg!==$)if($={context:$,memoizedValue:_e,next:null},Og===null){if(Ng===null)throw Error(p$7(308));Og=$,Ng.dependencies={lanes:0,firstContext:$}}else Og=Og.next=$;return _e}var Wg=null;function Xg($){Wg===null?Wg=[$]:Wg.push($)}function Yg($,_e,_t,Vt){var Wt=_e.interleaved;return Wt===null?(_t.next=_t,Xg(_e)):(_t.next=Wt.next,Wt.next=_t),_e.interleaved=_t,Zg($,Vt)}function Zg($,_e){$.lanes|=_e;var _t=$.alternate;for(_t!==null&&(_t.lanes|=_e),_t=$,$=$.return;$!==null;)$.childLanes|=_e,_t=$.alternate,_t!==null&&(_t.childLanes|=_e),_t=$,$=$.return;return _t.tag===3?_t.stateNode:null}var $g=!1;function ah($){$.updateQueue={baseState:$.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh($,_e){$=$.updateQueue,_e.updateQueue===$&&(_e.updateQueue={baseState:$.baseState,firstBaseUpdate:$.firstBaseUpdate,lastBaseUpdate:$.lastBaseUpdate,shared:$.shared,effects:$.effects})}function ch($,_e){return{eventTime:$,lane:_e,tag:0,payload:null,callback:null,next:null}}function dh($,_e,_t){var Vt=$.updateQueue;if(Vt===null)return null;if(Vt=Vt.shared,K&2){var Wt=Vt.pending;return Wt===null?_e.next=_e:(_e.next=Wt.next,Wt.next=_e),Vt.pending=_e,Zg($,_t)}return Wt=Vt.interleaved,Wt===null?(_e.next=_e,Xg(Vt)):(_e.next=Wt.next,Wt.next=_e),Vt.interleaved=_e,Zg($,_t)}function eh($,_e,_t){if(_e=_e.updateQueue,_e!==null&&(_e=_e.shared,(_t&4194240)!==0)){var Vt=_e.lanes;Vt&=$.pendingLanes,_t|=Vt,_e.lanes=_t,Cc($,_t)}}function fh($,_e){var _t=$.updateQueue,Vt=$.alternate;if(Vt!==null&&(Vt=Vt.updateQueue,_t===Vt)){var Wt=null,_i=null;if(_t=_t.firstBaseUpdate,_t!==null){do{var _s={eventTime:_t.eventTime,lane:_t.lane,tag:_t.tag,payload:_t.payload,callback:_t.callback,next:null};_i===null?Wt=_i=_s:_i=_i.next=_s,_t=_t.next}while(_t!==null);_i===null?Wt=_i=_e:_i=_i.next=_e}else Wt=_i=_e;_t={baseState:Vt.baseState,firstBaseUpdate:Wt,lastBaseUpdate:_i,shared:Vt.shared,effects:Vt.effects},$.updateQueue=_t;return}$=_t.lastBaseUpdate,$===null?_t.firstBaseUpdate=_e:$.next=_e,_t.lastBaseUpdate=_e}function gh($,_e,_t,Vt){var Wt=$.updateQueue;$g=!1;var _i=Wt.firstBaseUpdate,_s=Wt.lastBaseUpdate,_c=Wt.shared.pending;if(_c!==null){Wt.shared.pending=null;var _l=_c,_d=_l.next;_l.next=null,_s===null?_i=_d:_s.next=_d,_s=_l;var _m=$.alternate;_m!==null&&(_m=_m.updateQueue,_c=_m.lastBaseUpdate,_c!==_s&&(_c===null?_m.firstBaseUpdate=_d:_c.next=_d,_m.lastBaseUpdate=_l))}if(_i!==null){var e_=Wt.baseState;_s=0,_m=_d=_l=null,_c=_i;do{var t_=_c.lane,i_=_c.eventTime;if((Vt&t_)===t_){_m!==null&&(_m=_m.next={eventTime:i_,lane:0,tag:_c.tag,payload:_c.payload,callback:_c.callback,next:null});e:{var c_=$,h_=_c;switch(t_=_e,i_=_t,h_.tag){case 1:if(c_=h_.payload,typeof c_=="function"){e_=c_.call(i_,e_,t_);break e}e_=c_;break e;case 3:c_.flags=c_.flags&-65537|128;case 0:if(c_=h_.payload,t_=typeof c_=="function"?c_.call(i_,e_,t_):c_,t_==null)break e;e_=A$3({},e_,t_);break e;case 2:$g=!0}}_c.callback!==null&&_c.lane!==0&&($.flags|=64,t_=Wt.effects,t_===null?Wt.effects=[_c]:t_.push(_c))}else i_={eventTime:i_,lane:t_,tag:_c.tag,payload:_c.payload,callback:_c.callback,next:null},_m===null?(_d=_m=i_,_l=e_):_m=_m.next=i_,_s|=t_;if(_c=_c.next,_c===null){if(_c=Wt.shared.pending,_c===null)break;t_=_c,_c=t_.next,t_.next=null,Wt.lastBaseUpdate=t_,Wt.shared.pending=null}}while(1);if(_m===null&&(_l=e_),Wt.baseState=_l,Wt.firstBaseUpdate=_d,Wt.lastBaseUpdate=_m,_e=Wt.shared.interleaved,_e!==null){Wt=_e;do _s|=Wt.lane,Wt=Wt.next;while(Wt!==_e)}else _i===null&&(Wt.shared.lanes=0);hh|=_s,$.lanes=_s,$.memoizedState=e_}}function ih($,_e,_t){if($=_e.effects,_e.effects=null,$!==null)for(_e=0;_e<$.length;_e++){var Vt=$[_e],Wt=Vt.callback;if(Wt!==null){if(Vt.callback=null,Vt=_t,typeof Wt!="function")throw Error(p$7(191,Wt));Wt.call(Vt)}}}var jh=new aa.Component().refs;function kh($,_e,_t,Vt){_e=$.memoizedState,_t=_t(Vt,_e),_t=_t==null?_e:A$3({},_e,_t),$.memoizedState=_t,$.lanes===0&&($.updateQueue.baseState=_t)}var nh={isMounted:function($){return($=$._reactInternals)?Vb($)===$:!1},enqueueSetState:function($,_e,_t){$=$._reactInternals;var Vt=L$2(),Wt=lh($),_i=ch(Vt,Wt);_i.payload=_e,_t!=null&&(_i.callback=_t),_e=dh($,_i,Wt),_e!==null&&(mh(_e,$,Wt,Vt),eh(_e,$,Wt))},enqueueReplaceState:function($,_e,_t){$=$._reactInternals;var Vt=L$2(),Wt=lh($),_i=ch(Vt,Wt);_i.tag=1,_i.payload=_e,_t!=null&&(_i.callback=_t),_e=dh($,_i,Wt),_e!==null&&(mh(_e,$,Wt,Vt),eh(_e,$,Wt))},enqueueForceUpdate:function($,_e){$=$._reactInternals;var _t=L$2(),Vt=lh($),Wt=ch(_t,Vt);Wt.tag=2,_e!=null&&(Wt.callback=_e),_e=dh($,Wt,Vt),_e!==null&&(mh(_e,$,Vt,_t),eh(_e,$,Vt))}};function oh($,_e,_t,Vt,Wt,_i,_s){return $=$.stateNode,typeof $.shouldComponentUpdate=="function"?$.shouldComponentUpdate(Vt,_i,_s):_e.prototype&&_e.prototype.isPureReactComponent?!Ie(_t,Vt)||!Ie(Wt,_i):!0}function ph($,_e,_t){var Vt=!1,Wt=Vf,_i=_e.contextType;return typeof _i=="object"&&_i!==null?_i=Vg(_i):(Wt=Zf(_e)?Xf:H$2.current,Vt=_e.contextTypes,_i=(Vt=Vt!=null)?Yf($,Wt):Vf),_e=new _e(_t,_i),$.memoizedState=_e.state!==null&&_e.state!==void 0?_e.state:null,_e.updater=nh,$.stateNode=_e,_e._reactInternals=$,Vt&&($=$.stateNode,$.__reactInternalMemoizedUnmaskedChildContext=Wt,$.__reactInternalMemoizedMaskedChildContext=_i),_e}function qh($,_e,_t,Vt){$=_e.state,typeof _e.componentWillReceiveProps=="function"&&_e.componentWillReceiveProps(_t,Vt),typeof _e.UNSAFE_componentWillReceiveProps=="function"&&_e.UNSAFE_componentWillReceiveProps(_t,Vt),_e.state!==$&&nh.enqueueReplaceState(_e,_e.state,null)}function rh($,_e,_t,Vt){var Wt=$.stateNode;Wt.props=_t,Wt.state=$.memoizedState,Wt.refs=jh,ah($);var _i=_e.contextType;typeof _i=="object"&&_i!==null?Wt.context=Vg(_i):(_i=Zf(_e)?Xf:H$2.current,Wt.context=Yf($,_i)),Wt.state=$.memoizedState,_i=_e.getDerivedStateFromProps,typeof _i=="function"&&(kh($,_e,_i,_t),Wt.state=$.memoizedState),typeof _e.getDerivedStateFromProps=="function"||typeof Wt.getSnapshotBeforeUpdate=="function"||typeof Wt.UNSAFE_componentWillMount!="function"&&typeof Wt.componentWillMount!="function"||(_e=Wt.state,typeof Wt.componentWillMount=="function"&&Wt.componentWillMount(),typeof Wt.UNSAFE_componentWillMount=="function"&&Wt.UNSAFE_componentWillMount(),_e!==Wt.state&&nh.enqueueReplaceState(Wt,Wt.state,null),gh($,_t,Wt,Vt),Wt.state=$.memoizedState),typeof Wt.componentDidMount=="function"&&($.flags|=4194308)}function sh($,_e,_t){if($=_t.ref,$!==null&&typeof $!="function"&&typeof $!="object"){if(_t._owner){if(_t=_t._owner,_t){if(_t.tag!==1)throw Error(p$7(309));var Vt=_t.stateNode}if(!Vt)throw Error(p$7(147,$));var Wt=Vt,_i=""+$;return _e!==null&&_e.ref!==null&&typeof _e.ref=="function"&&_e.ref._stringRef===_i?_e.ref:(_e=function(_s){var _c=Wt.refs;_c===jh&&(_c=Wt.refs={}),_s===null?delete _c[_i]:_c[_i]=_s},_e._stringRef=_i,_e)}if(typeof $!="string")throw Error(p$7(284));if(!_t._owner)throw Error(p$7(290,$))}return $}function th$3($,_e){throw $=Object.prototype.toString.call(_e),Error(p$7(31,$==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":$))}function uh($){var _e=$._init;return _e($._payload)}function vh($){function _e(l_,d_){if($){var f_=l_.deletions;f_===null?(l_.deletions=[d_],l_.flags|=16):f_.push(d_)}}function _t(l_,d_){if(!$)return null;for(;d_!==null;)_e(l_,d_),d_=d_.sibling;return null}function Vt(l_,d_){for(l_=new Map;d_!==null;)d_.key!==null?l_.set(d_.key,d_):l_.set(d_.index,d_),d_=d_.sibling;return l_}function Wt(l_,d_){return l_=wh(l_,d_),l_.index=0,l_.sibling=null,l_}function _i(l_,d_,f_){return l_.index=f_,$?(f_=l_.alternate,f_!==null?(f_=f_.index,f_<d_?(l_.flags|=2,d_):f_):(l_.flags|=2,d_)):(l_.flags|=1048576,d_)}function _s(l_){return $&&l_.alternate===null&&(l_.flags|=2),l_}function _c(l_,d_,f_,S_){return d_===null||d_.tag!==6?(d_=xh(f_,l_.mode,S_),d_.return=l_,d_):(d_=Wt(d_,f_),d_.return=l_,d_)}function _l(l_,d_,f_,S_){var T_=f_.type;return T_===ya?_m(l_,d_,f_.props.children,S_,f_.key):d_!==null&&(d_.elementType===T_||typeof T_=="object"&&T_!==null&&T_.$$typeof===Ha&&uh(T_)===d_.type)?(S_=Wt(d_,f_.props),S_.ref=sh(l_,d_,f_),S_.return=l_,S_):(S_=yh(f_.type,f_.key,f_.props,null,l_.mode,S_),S_.ref=sh(l_,d_,f_),S_.return=l_,S_)}function _d(l_,d_,f_,S_){return d_===null||d_.tag!==4||d_.stateNode.containerInfo!==f_.containerInfo||d_.stateNode.implementation!==f_.implementation?(d_=zh$3(f_,l_.mode,S_),d_.return=l_,d_):(d_=Wt(d_,f_.children||[]),d_.return=l_,d_)}function _m(l_,d_,f_,S_,T_){return d_===null||d_.tag!==7?(d_=Ah(f_,l_.mode,S_,T_),d_.return=l_,d_):(d_=Wt(d_,f_),d_.return=l_,d_)}function e_(l_,d_,f_){if(typeof d_=="string"&&d_!==""||typeof d_=="number")return d_=xh(""+d_,l_.mode,f_),d_.return=l_,d_;if(typeof d_=="object"&&d_!==null){switch(d_.$$typeof){case va:return f_=yh(d_.type,d_.key,d_.props,null,l_.mode,f_),f_.ref=sh(l_,null,d_),f_.return=l_,f_;case wa:return d_=zh$3(d_,l_.mode,f_),d_.return=l_,d_;case Ha:var S_=d_._init;return e_(l_,S_(d_._payload),f_)}if(eb(d_)||Ka(d_))return d_=Ah(d_,l_.mode,f_,null),d_.return=l_,d_;th$3(l_,d_)}return null}function t_(l_,d_,f_,S_){var T_=d_!==null?d_.key:null;if(typeof f_=="string"&&f_!==""||typeof f_=="number")return T_!==null?null:_c(l_,d_,""+f_,S_);if(typeof f_=="object"&&f_!==null){switch(f_.$$typeof){case va:return f_.key===T_?_l(l_,d_,f_,S_):null;case wa:return f_.key===T_?_d(l_,d_,f_,S_):null;case Ha:return T_=f_._init,t_(l_,d_,T_(f_._payload),S_)}if(eb(f_)||Ka(f_))return T_!==null?null:_m(l_,d_,f_,S_,null);th$3(l_,f_)}return null}function i_(l_,d_,f_,S_,T_){if(typeof S_=="string"&&S_!==""||typeof S_=="number")return l_=l_.get(f_)||null,_c(d_,l_,""+S_,T_);if(typeof S_=="object"&&S_!==null){switch(S_.$$typeof){case va:return l_=l_.get(S_.key===null?f_:S_.key)||null,_l(d_,l_,S_,T_);case wa:return l_=l_.get(S_.key===null?f_:S_.key)||null,_d(d_,l_,S_,T_);case Ha:var R_=S_._init;return i_(l_,d_,f_,R_(S_._payload),T_)}if(eb(S_)||Ka(S_))return l_=l_.get(f_)||null,_m(d_,l_,S_,T_,null);th$3(d_,S_)}return null}function c_(l_,d_,f_,S_){for(var T_=null,R_=null,C_=d_,j_=d_=0,W_=null;C_!==null&&j_<f_.length;j_++){C_.index>j_?(W_=C_,C_=null):W_=C_.sibling;var A_=t_(l_,C_,f_[j_],S_);if(A_===null){C_===null&&(C_=W_);break}$&&C_&&A_.alternate===null&&_e(l_,C_),d_=_i(A_,d_,j_),R_===null?T_=A_:R_.sibling=A_,R_=A_,C_=W_}if(j_===f_.length)return _t(l_,C_),I$2&&tg$3(l_,j_),T_;if(C_===null){for(;j_<f_.length;j_++)C_=e_(l_,f_[j_],S_),C_!==null&&(d_=_i(C_,d_,j_),R_===null?T_=C_:R_.sibling=C_,R_=C_);return I$2&&tg$3(l_,j_),T_}for(C_=Vt(l_,C_);j_<f_.length;j_++)W_=i_(C_,l_,j_,f_[j_],S_),W_!==null&&($&&W_.alternate!==null&&C_.delete(W_.key===null?j_:W_.key),d_=_i(W_,d_,j_),R_===null?T_=W_:R_.sibling=W_,R_=W_);return $&&C_.forEach(function($_){return _e(l_,$_)}),I$2&&tg$3(l_,j_),T_}function h_(l_,d_,f_,S_){var T_=Ka(f_);if(typeof T_!="function")throw Error(p$7(150));if(f_=T_.call(f_),f_==null)throw Error(p$7(151));for(var R_=T_=null,C_=d_,j_=d_=0,W_=null,A_=f_.next();C_!==null&&!A_.done;j_++,A_=f_.next()){C_.index>j_?(W_=C_,C_=null):W_=C_.sibling;var $_=t_(l_,C_,A_.value,S_);if($_===null){C_===null&&(C_=W_);break}$&&C_&&$_.alternate===null&&_e(l_,C_),d_=_i($_,d_,j_),R_===null?T_=$_:R_.sibling=$_,R_=$_,C_=W_}if(A_.done)return _t(l_,C_),I$2&&tg$3(l_,j_),T_;if(C_===null){for(;!A_.done;j_++,A_=f_.next())A_=e_(l_,A_.value,S_),A_!==null&&(d_=_i(A_,d_,j_),R_===null?T_=A_:R_.sibling=A_,R_=A_);return I$2&&tg$3(l_,j_),T_}for(C_=Vt(l_,C_);!A_.done;j_++,A_=f_.next())A_=i_(C_,l_,j_,A_.value,S_),A_!==null&&($&&A_.alternate!==null&&C_.delete(A_.key===null?j_:A_.key),d_=_i(A_,d_,j_),R_===null?T_=A_:R_.sibling=A_,R_=A_);return $&&C_.forEach(function(q_){return _e(l_,q_)}),I$2&&tg$3(l_,j_),T_}function y_(l_,d_,f_,S_){if(typeof f_=="object"&&f_!==null&&f_.type===ya&&f_.key===null&&(f_=f_.props.children),typeof f_=="object"&&f_!==null){switch(f_.$$typeof){case va:e:{for(var T_=f_.key,R_=d_;R_!==null;){if(R_.key===T_){if(T_=f_.type,T_===ya){if(R_.tag===7){_t(l_,R_.sibling),d_=Wt(R_,f_.props.children),d_.return=l_,l_=d_;break e}}else if(R_.elementType===T_||typeof T_=="object"&&T_!==null&&T_.$$typeof===Ha&&uh(T_)===R_.type){_t(l_,R_.sibling),d_=Wt(R_,f_.props),d_.ref=sh(l_,R_,f_),d_.return=l_,l_=d_;break e}_t(l_,R_);break}else _e(l_,R_);R_=R_.sibling}f_.type===ya?(d_=Ah(f_.props.children,l_.mode,S_,f_.key),d_.return=l_,l_=d_):(S_=yh(f_.type,f_.key,f_.props,null,l_.mode,S_),S_.ref=sh(l_,d_,f_),S_.return=l_,l_=S_)}return _s(l_);case wa:e:{for(R_=f_.key;d_!==null;){if(d_.key===R_)if(d_.tag===4&&d_.stateNode.containerInfo===f_.containerInfo&&d_.stateNode.implementation===f_.implementation){_t(l_,d_.sibling),d_=Wt(d_,f_.children||[]),d_.return=l_,l_=d_;break e}else{_t(l_,d_);break}else _e(l_,d_);d_=d_.sibling}d_=zh$3(f_,l_.mode,S_),d_.return=l_,l_=d_}return _s(l_);case Ha:return R_=f_._init,y_(l_,d_,R_(f_._payload),S_)}if(eb(f_))return c_(l_,d_,f_,S_);if(Ka(f_))return h_(l_,d_,f_,S_);th$3(l_,f_)}return typeof f_=="string"&&f_!==""||typeof f_=="number"?(f_=""+f_,d_!==null&&d_.tag===6?(_t(l_,d_.sibling),d_=Wt(d_,f_),d_.return=l_,l_=d_):(_t(l_,d_),d_=xh(f_,l_.mode,S_),d_.return=l_,l_=d_),_s(l_)):_t(l_,d_)}return y_}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh($){if($===Dh)throw Error(p$7(174));return $}function Ih($,_e){switch(G$1(Gh,_e),G$1(Fh,$),G$1(Eh,Dh),$=_e.nodeType,$){case 9:case 11:_e=(_e=_e.documentElement)?_e.namespaceURI:lb$3(null,"");break;default:$=$===8?_e.parentNode:_e,_e=$.namespaceURI||null,$=$.tagName,_e=lb$3(_e,$)}E$2(Eh),G$1(Eh,_e)}function Jh(){E$2(Eh),E$2(Fh),E$2(Gh)}function Kh($){Hh(Gh.current);var _e=Hh(Eh.current),_t=lb$3(_e,$.type);_e!==_t&&(G$1(Fh,$),G$1(Eh,_t))}function Lh($){Fh.current===$&&(E$2(Eh),E$2(Fh))}var M$2=Uf(0);function Mh($){for(var _e=$;_e!==null;){if(_e.tag===13){var _t=_e.memoizedState;if(_t!==null&&(_t=_t.dehydrated,_t===null||_t.data==="$?"||_t.data==="$!"))return _e}else if(_e.tag===19&&_e.memoizedProps.revealOrder!==void 0){if(_e.flags&128)return _e}else if(_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===$)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===$)return null;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}return null}var Nh=[];function Oh(){for(var $=0;$<Nh.length;$++)Nh[$]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N$2=null,O$2=null,P$2=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$2(){throw Error(p$7(321))}function Wh($,_e){if(_e===null)return!1;for(var _t=0;_t<_e.length&&_t<$.length;_t++)if(!He($[_t],_e[_t]))return!1;return!0}function Xh($,_e,_t,Vt,Wt,_i){if(Rh=_i,N$2=_e,_e.memoizedState=null,_e.updateQueue=null,_e.lanes=0,Ph.current=$===null||$.memoizedState===null?Yh:Zh,$=_t(Vt,Wt),Th){_i=0;do{if(Th=!1,Uh=0,25<=_i)throw Error(p$7(301));_i+=1,P$2=O$2=null,_e.updateQueue=null,Ph.current=$h,$=_t(Vt,Wt)}while(Th)}if(Ph.current=ai,_e=O$2!==null&&O$2.next!==null,Rh=0,P$2=O$2=N$2=null,Sh=!1,_e)throw Error(p$7(300));return $}function bi$3(){var $=Uh!==0;return Uh=0,$}function ci(){var $={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$2===null?N$2.memoizedState=P$2=$:P$2=P$2.next=$,P$2}function di(){if(O$2===null){var $=N$2.alternate;$=$!==null?$.memoizedState:null}else $=O$2.next;var _e=P$2===null?N$2.memoizedState:P$2.next;if(_e!==null)P$2=_e,O$2=$;else{if($===null)throw Error(p$7(310));O$2=$,$={memoizedState:O$2.memoizedState,baseState:O$2.baseState,baseQueue:O$2.baseQueue,queue:O$2.queue,next:null},P$2===null?N$2.memoizedState=P$2=$:P$2=P$2.next=$}return P$2}function ei($,_e){return typeof _e=="function"?_e($):_e}function fi$3($){var _e=di(),_t=_e.queue;if(_t===null)throw Error(p$7(311));_t.lastRenderedReducer=$;var Vt=O$2,Wt=Vt.baseQueue,_i=_t.pending;if(_i!==null){if(Wt!==null){var _s=Wt.next;Wt.next=_i.next,_i.next=_s}Vt.baseQueue=Wt=_i,_t.pending=null}if(Wt!==null){_i=Wt.next,Vt=Vt.baseState;var _c=_s=null,_l=null,_d=_i;do{var _m=_d.lane;if((Rh&_m)===_m)_l!==null&&(_l=_l.next={lane:0,action:_d.action,hasEagerState:_d.hasEagerState,eagerState:_d.eagerState,next:null}),Vt=_d.hasEagerState?_d.eagerState:$(Vt,_d.action);else{var e_={lane:_m,action:_d.action,hasEagerState:_d.hasEagerState,eagerState:_d.eagerState,next:null};_l===null?(_c=_l=e_,_s=Vt):_l=_l.next=e_,N$2.lanes|=_m,hh|=_m}_d=_d.next}while(_d!==null&&_d!==_i);_l===null?_s=Vt:_l.next=_c,He(Vt,_e.memoizedState)||(Ug=!0),_e.memoizedState=Vt,_e.baseState=_s,_e.baseQueue=_l,_t.lastRenderedState=Vt}if($=_t.interleaved,$!==null){Wt=$;do _i=Wt.lane,N$2.lanes|=_i,hh|=_i,Wt=Wt.next;while(Wt!==$)}else Wt===null&&(_t.lanes=0);return[_e.memoizedState,_t.dispatch]}function gi($){var _e=di(),_t=_e.queue;if(_t===null)throw Error(p$7(311));_t.lastRenderedReducer=$;var Vt=_t.dispatch,Wt=_t.pending,_i=_e.memoizedState;if(Wt!==null){_t.pending=null;var _s=Wt=Wt.next;do _i=$(_i,_s.action),_s=_s.next;while(_s!==Wt);He(_i,_e.memoizedState)||(Ug=!0),_e.memoizedState=_i,_e.baseQueue===null&&(_e.baseState=_i),_t.lastRenderedState=_i}return[_i,Vt]}function hi$3(){}function ii($,_e){var _t=N$2,Vt=di(),Wt=_e(),_i=!He(Vt.memoizedState,Wt);if(_i&&(Vt.memoizedState=Wt,Ug=!0),Vt=Vt.queue,ji(ki.bind(null,_t,Vt,$),[$]),Vt.getSnapshot!==_e||_i||P$2!==null&&P$2.memoizedState.tag&1){if(_t.flags|=2048,li(9,mi$3.bind(null,_t,Vt,Wt,_e),void 0,null),R$2===null)throw Error(p$7(349));Rh&30||ni(_t,_e,Wt)}return Wt}function ni($,_e,_t){$.flags|=16384,$={getSnapshot:_e,value:_t},_e=N$2.updateQueue,_e===null?(_e={lastEffect:null,stores:null},N$2.updateQueue=_e,_e.stores=[$]):(_t=_e.stores,_t===null?_e.stores=[$]:_t.push($))}function mi$3($,_e,_t,Vt){_e.value=_t,_e.getSnapshot=Vt,oi(_e)&&pi($)}function ki($,_e,_t){return _t(function(){oi(_e)&&pi($)})}function oi($){var _e=$.getSnapshot;$=$.value;try{var _t=_e();return!He($,_t)}catch{return!0}}function pi($){var _e=Zg($,1);_e!==null&&mh(_e,$,1,-1)}function qi($){var _e=ci();return typeof $=="function"&&($=$()),_e.memoizedState=_e.baseState=$,$={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:$},_e.queue=$,$=$.dispatch=ri.bind(null,N$2,$),[_e.memoizedState,$]}function li($,_e,_t,Vt){return $={tag:$,create:_e,destroy:_t,deps:Vt,next:null},_e=N$2.updateQueue,_e===null?(_e={lastEffect:null,stores:null},N$2.updateQueue=_e,_e.lastEffect=$.next=$):(_t=_e.lastEffect,_t===null?_e.lastEffect=$.next=$:(Vt=_t.next,_t.next=$,$.next=Vt,_e.lastEffect=$)),$}function si$3(){return di().memoizedState}function ti($,_e,_t,Vt){var Wt=ci();N$2.flags|=$,Wt.memoizedState=li(1|_e,_t,void 0,Vt===void 0?null:Vt)}function ui($,_e,_t,Vt){var Wt=di();Vt=Vt===void 0?null:Vt;var _i=void 0;if(O$2!==null){var _s=O$2.memoizedState;if(_i=_s.destroy,Vt!==null&&Wh(Vt,_s.deps)){Wt.memoizedState=li(_e,_t,_i,Vt);return}}N$2.flags|=$,Wt.memoizedState=li(1|_e,_t,_i,Vt)}function vi$3($,_e){return ti(8390656,8,$,_e)}function ji($,_e){return ui(2048,8,$,_e)}function wi($,_e){return ui(4,2,$,_e)}function xi($,_e){return ui(4,4,$,_e)}function yi($,_e){if(typeof _e=="function")return $=$(),_e($),function(){_e(null)};if(_e!=null)return $=$(),_e.current=$,function(){_e.current=null}}function zi($,_e,_t){return _t=_t!=null?_t.concat([$]):null,ui(4,4,yi.bind(null,_e,$),_t)}function Ai(){}function Bi($,_e){var _t=di();_e=_e===void 0?null:_e;var Vt=_t.memoizedState;return Vt!==null&&_e!==null&&Wh(_e,Vt[1])?Vt[0]:(_t.memoizedState=[$,_e],$)}function Ci($,_e){var _t=di();_e=_e===void 0?null:_e;var Vt=_t.memoizedState;return Vt!==null&&_e!==null&&Wh(_e,Vt[1])?Vt[0]:($=$(),_t.memoizedState=[$,_e],$)}function Di($,_e,_t){return Rh&21?(He(_t,_e)||(_t=yc(),N$2.lanes|=_t,hh|=_t,$.baseState=!0),_e):($.baseState&&($.baseState=!1,Ug=!0),$.memoizedState=_t)}function Ei($,_e){var _t=C$1;C$1=_t!==0&&4>_t?_t:4,$(!0);var Vt=Qh.transition;Qh.transition={};try{$(!1),_e()}finally{C$1=_t,Qh.transition=Vt}}function Fi(){return di().memoizedState}function Gi($,_e,_t){var Vt=lh($);if(_t={lane:Vt,action:_t,hasEagerState:!1,eagerState:null,next:null},Hi($))Ii(_e,_t);else if(_t=Yg($,_e,_t,Vt),_t!==null){var Wt=L$2();mh(_t,$,Vt,Wt),Ji(_t,_e,Vt)}}function ri($,_e,_t){var Vt=lh($),Wt={lane:Vt,action:_t,hasEagerState:!1,eagerState:null,next:null};if(Hi($))Ii(_e,Wt);else{var _i=$.alternate;if($.lanes===0&&(_i===null||_i.lanes===0)&&(_i=_e.lastRenderedReducer,_i!==null))try{var _s=_e.lastRenderedState,_c=_i(_s,_t);if(Wt.hasEagerState=!0,Wt.eagerState=_c,He(_c,_s)){var _l=_e.interleaved;_l===null?(Wt.next=Wt,Xg(_e)):(Wt.next=_l.next,_l.next=Wt),_e.interleaved=Wt;return}}catch{}finally{}_t=Yg($,_e,Wt,Vt),_t!==null&&(Wt=L$2(),mh(_t,$,Vt,Wt),Ji(_t,_e,Vt))}}function Hi($){var _e=$.alternate;return $===N$2||_e!==null&&_e===N$2}function Ii($,_e){Th=Sh=!0;var _t=$.pending;_t===null?_e.next=_e:(_e.next=_t.next,_t.next=_e),$.pending=_e}function Ji($,_e,_t){if(_t&4194240){var Vt=_e.lanes;Vt&=$.pendingLanes,_t|=Vt,_e.lanes=_t,Cc($,_t)}}var ai={readContext:Vg,useCallback:Q$2,useContext:Q$2,useEffect:Q$2,useImperativeHandle:Q$2,useInsertionEffect:Q$2,useLayoutEffect:Q$2,useMemo:Q$2,useReducer:Q$2,useRef:Q$2,useState:Q$2,useDebugValue:Q$2,useDeferredValue:Q$2,useTransition:Q$2,useMutableSource:Q$2,useSyncExternalStore:Q$2,useId:Q$2,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function($,_e){return ci().memoizedState=[$,_e===void 0?null:_e],$},useContext:Vg,useEffect:vi$3,useImperativeHandle:function($,_e,_t){return _t=_t!=null?_t.concat([$]):null,ti(4194308,4,yi.bind(null,_e,$),_t)},useLayoutEffect:function($,_e){return ti(4194308,4,$,_e)},useInsertionEffect:function($,_e){return ti(4,2,$,_e)},useMemo:function($,_e){var _t=ci();return _e=_e===void 0?null:_e,$=$(),_t.memoizedState=[$,_e],$},useReducer:function($,_e,_t){var Vt=ci();return _e=_t!==void 0?_t(_e):_e,Vt.memoizedState=Vt.baseState=_e,$={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$,lastRenderedState:_e},Vt.queue=$,$=$.dispatch=Gi.bind(null,N$2,$),[Vt.memoizedState,$]},useRef:function($){var _e=ci();return $={current:$},_e.memoizedState=$},useState:qi,useDebugValue:Ai,useDeferredValue:function($){return ci().memoizedState=$},useTransition:function(){var $=qi(!1),_e=$[0];return $=Ei.bind(null,$[1]),ci().memoizedState=$,[_e,$]},useMutableSource:function(){},useSyncExternalStore:function($,_e,_t){var Vt=N$2,Wt=ci();if(I$2){if(_t===void 0)throw Error(p$7(407));_t=_t()}else{if(_t=_e(),R$2===null)throw Error(p$7(349));Rh&30||ni(Vt,_e,_t)}Wt.memoizedState=_t;var _i={value:_t,getSnapshot:_e};return Wt.queue=_i,vi$3(ki.bind(null,Vt,_i,$),[$]),Vt.flags|=2048,li(9,mi$3.bind(null,Vt,_i,_t,_e),void 0,null),_t},useId:function(){var $=ci(),_e=R$2.identifierPrefix;if(I$2){var _t=sg,Vt=rg;_t=(Vt&~(1<<32-oc(Vt)-1)).toString(32)+_t,_e=":"+_e+"R"+_t,_t=Uh++,0<_t&&(_e+="H"+_t.toString(32)),_e+=":"}else _t=Vh++,_e=":"+_e+"r"+_t.toString(32)+":";return $.memoizedState=_e},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi$3,useRef:si$3,useState:function(){return fi$3(ei)},useDebugValue:Ai,useDeferredValue:function($){var _e=di();return Di(_e,O$2.memoizedState,$)},useTransition:function(){var $=fi$3(ei)[0],_e=di().memoizedState;return[$,_e]},useMutableSource:hi$3,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si$3,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function($){var _e=di();return O$2===null?_e.memoizedState=$:Di(_e,O$2.memoizedState,$)},useTransition:function(){var $=gi(ei)[0],_e=di().memoizedState;return[$,_e]},useMutableSource:hi$3,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki($,_e){try{var _t="",Vt=_e;do _t+=Pa(Vt),Vt=Vt.return;while(Vt);var Wt=_t}catch(_i){Wt=`
Error generating stack: `+_i.message+`
`+_i.stack}return{value:$,source:_e,stack:Wt,digest:null}}function Li($,_e,_t){return{value:$,source:null,stack:_t??null,digest:_e??null}}function Mi($,_e){try{console.error(_e.value)}catch(_t){setTimeout(function(){throw _t})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi($,_e,_t){_t=ch(-1,_t),_t.tag=3,_t.payload={element:null};var Vt=_e.value;return _t.callback=function(){Pi||(Pi=!0,Qi=Vt),Mi($,_e)},_t}function Ri($,_e,_t){_t=ch(-1,_t),_t.tag=3;var Vt=$.type.getDerivedStateFromError;if(typeof Vt=="function"){var Wt=_e.value;_t.payload=function(){return Vt(Wt)},_t.callback=function(){Mi($,_e)}}var _i=$.stateNode;return _i!==null&&typeof _i.componentDidCatch=="function"&&(_t.callback=function(){Mi($,_e),typeof Vt!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var _s=_e.stack;this.componentDidCatch(_e.value,{componentStack:_s!==null?_s:""})}),_t}function Ti($,_e,_t){var Vt=$.pingCache;if(Vt===null){Vt=$.pingCache=new Ni;var Wt=new Set;Vt.set(_e,Wt)}else Wt=Vt.get(_e),Wt===void 0&&(Wt=new Set,Vt.set(_e,Wt));Wt.has(_t)||(Wt.add(_t),$=Ui.bind(null,$,_e,_t),_e.then($,$))}function Vi($){do{var _e;if((_e=$.tag===13)&&(_e=$.memoizedState,_e=_e!==null?_e.dehydrated!==null:!0),_e)return $;$=$.return}while($!==null);return null}function Wi($,_e,_t,Vt,Wt){return $.mode&1?($.flags|=65536,$.lanes=Wt,$):($===_e?$.flags|=65536:($.flags|=128,_t.flags|=131072,_t.flags&=-52805,_t.tag===1&&(_t.alternate===null?_t.tag=17:(_e=ch(-1,1),_e.tag=2,dh(_t,_e,1))),_t.lanes|=1),$)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi($,_e,_t,Vt){_e.child=$===null?Ch(_e,null,_t,Vt):Bh(_e,$.child,_t,Vt)}function Zi($,_e,_t,Vt,Wt){_t=_t.render;var _i=_e.ref;return Tg(_e,Wt),Vt=Xh($,_e,_t,Vt,_i,Wt),_t=bi$3(),$!==null&&!Ug?(_e.updateQueue=$.updateQueue,_e.flags&=-2053,$.lanes&=~Wt,$i($,_e,Wt)):(I$2&&_t&&vg(_e),_e.flags|=1,Yi($,_e,Vt,Wt),_e.child)}function aj($,_e,_t,Vt,Wt){if($===null){var _i=_t.type;return typeof _i=="function"&&!bj(_i)&&_i.defaultProps===void 0&&_t.compare===null&&_t.defaultProps===void 0?(_e.tag=15,_e.type=_i,cj($,_e,_i,Vt,Wt)):($=yh(_t.type,null,Vt,_e,_e.mode,Wt),$.ref=_e.ref,$.return=_e,_e.child=$)}if(_i=$.child,!($.lanes&Wt)){var _s=_i.memoizedProps;if(_t=_t.compare,_t=_t!==null?_t:Ie,_t(_s,Vt)&&$.ref===_e.ref)return $i($,_e,Wt)}return _e.flags|=1,$=wh(_i,Vt),$.ref=_e.ref,$.return=_e,_e.child=$}function cj($,_e,_t,Vt,Wt){if($!==null){var _i=$.memoizedProps;if(Ie(_i,Vt)&&$.ref===_e.ref)if(Ug=!1,_e.pendingProps=Vt=_i,($.lanes&Wt)!==0)$.flags&131072&&(Ug=!0);else return _e.lanes=$.lanes,$i($,_e,Wt)}return dj($,_e,_t,Vt,Wt)}function ej($,_e,_t){var Vt=_e.pendingProps,Wt=Vt.children,_i=$!==null?$.memoizedState:null;if(Vt.mode==="hidden")if(!(_e.mode&1))_e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(fj,gj),gj|=_t;else{if(!(_t&1073741824))return $=_i!==null?_i.baseLanes|_t:_t,_e.lanes=_e.childLanes=1073741824,_e.memoizedState={baseLanes:$,cachePool:null,transitions:null},_e.updateQueue=null,G$1(fj,gj),gj|=$,null;_e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vt=_i!==null?_i.baseLanes:_t,G$1(fj,gj),gj|=Vt}else _i!==null?(Vt=_i.baseLanes|_t,_e.memoizedState=null):Vt=_t,G$1(fj,gj),gj|=Vt;return Yi($,_e,Wt,_t),_e.child}function hj($,_e){var _t=_e.ref;($===null&&_t!==null||$!==null&&$.ref!==_t)&&(_e.flags|=512,_e.flags|=2097152)}function dj($,_e,_t,Vt,Wt){var _i=Zf(_t)?Xf:H$2.current;return _i=Yf(_e,_i),Tg(_e,Wt),_t=Xh($,_e,_t,Vt,_i,Wt),Vt=bi$3(),$!==null&&!Ug?(_e.updateQueue=$.updateQueue,_e.flags&=-2053,$.lanes&=~Wt,$i($,_e,Wt)):(I$2&&Vt&&vg(_e),_e.flags|=1,Yi($,_e,_t,Wt),_e.child)}function ij($,_e,_t,Vt,Wt){if(Zf(_t)){var _i=!0;cg(_e)}else _i=!1;if(Tg(_e,Wt),_e.stateNode===null)jj($,_e),ph(_e,_t,Vt),rh(_e,_t,Vt,Wt),Vt=!0;else if($===null){var _s=_e.stateNode,_c=_e.memoizedProps;_s.props=_c;var _l=_s.context,_d=_t.contextType;typeof _d=="object"&&_d!==null?_d=Vg(_d):(_d=Zf(_t)?Xf:H$2.current,_d=Yf(_e,_d));var _m=_t.getDerivedStateFromProps,e_=typeof _m=="function"||typeof _s.getSnapshotBeforeUpdate=="function";e_||typeof _s.UNSAFE_componentWillReceiveProps!="function"&&typeof _s.componentWillReceiveProps!="function"||(_c!==Vt||_l!==_d)&&qh(_e,_s,Vt,_d),$g=!1;var t_=_e.memoizedState;_s.state=t_,gh(_e,Vt,_s,Wt),_l=_e.memoizedState,_c!==Vt||t_!==_l||Wf.current||$g?(typeof _m=="function"&&(kh(_e,_t,_m,Vt),_l=_e.memoizedState),(_c=$g||oh(_e,_t,_c,Vt,t_,_l,_d))?(e_||typeof _s.UNSAFE_componentWillMount!="function"&&typeof _s.componentWillMount!="function"||(typeof _s.componentWillMount=="function"&&_s.componentWillMount(),typeof _s.UNSAFE_componentWillMount=="function"&&_s.UNSAFE_componentWillMount()),typeof _s.componentDidMount=="function"&&(_e.flags|=4194308)):(typeof _s.componentDidMount=="function"&&(_e.flags|=4194308),_e.memoizedProps=Vt,_e.memoizedState=_l),_s.props=Vt,_s.state=_l,_s.context=_d,Vt=_c):(typeof _s.componentDidMount=="function"&&(_e.flags|=4194308),Vt=!1)}else{_s=_e.stateNode,bh($,_e),_c=_e.memoizedProps,_d=_e.type===_e.elementType?_c:Lg(_e.type,_c),_s.props=_d,e_=_e.pendingProps,t_=_s.context,_l=_t.contextType,typeof _l=="object"&&_l!==null?_l=Vg(_l):(_l=Zf(_t)?Xf:H$2.current,_l=Yf(_e,_l));var i_=_t.getDerivedStateFromProps;(_m=typeof i_=="function"||typeof _s.getSnapshotBeforeUpdate=="function")||typeof _s.UNSAFE_componentWillReceiveProps!="function"&&typeof _s.componentWillReceiveProps!="function"||(_c!==e_||t_!==_l)&&qh(_e,_s,Vt,_l),$g=!1,t_=_e.memoizedState,_s.state=t_,gh(_e,Vt,_s,Wt);var c_=_e.memoizedState;_c!==e_||t_!==c_||Wf.current||$g?(typeof i_=="function"&&(kh(_e,_t,i_,Vt),c_=_e.memoizedState),(_d=$g||oh(_e,_t,_d,Vt,t_,c_,_l)||!1)?(_m||typeof _s.UNSAFE_componentWillUpdate!="function"&&typeof _s.componentWillUpdate!="function"||(typeof _s.componentWillUpdate=="function"&&_s.componentWillUpdate(Vt,c_,_l),typeof _s.UNSAFE_componentWillUpdate=="function"&&_s.UNSAFE_componentWillUpdate(Vt,c_,_l)),typeof _s.componentDidUpdate=="function"&&(_e.flags|=4),typeof _s.getSnapshotBeforeUpdate=="function"&&(_e.flags|=1024)):(typeof _s.componentDidUpdate!="function"||_c===$.memoizedProps&&t_===$.memoizedState||(_e.flags|=4),typeof _s.getSnapshotBeforeUpdate!="function"||_c===$.memoizedProps&&t_===$.memoizedState||(_e.flags|=1024),_e.memoizedProps=Vt,_e.memoizedState=c_),_s.props=Vt,_s.state=c_,_s.context=_l,Vt=_d):(typeof _s.componentDidUpdate!="function"||_c===$.memoizedProps&&t_===$.memoizedState||(_e.flags|=4),typeof _s.getSnapshotBeforeUpdate!="function"||_c===$.memoizedProps&&t_===$.memoizedState||(_e.flags|=1024),Vt=!1)}return kj($,_e,_t,Vt,_i,Wt)}function kj($,_e,_t,Vt,Wt,_i){hj($,_e);var _s=(_e.flags&128)!==0;if(!Vt&&!_s)return Wt&&dg(_e,_t,!1),$i($,_e,_i);Vt=_e.stateNode,Xi.current=_e;var _c=_s&&typeof _t.getDerivedStateFromError!="function"?null:Vt.render();return _e.flags|=1,$!==null&&_s?(_e.child=Bh(_e,$.child,null,_i),_e.child=Bh(_e,null,_c,_i)):Yi($,_e,_c,_i),_e.memoizedState=Vt.state,Wt&&dg(_e,_t,!0),_e.child}function lj($){var _e=$.stateNode;_e.pendingContext?ag($,_e.pendingContext,_e.pendingContext!==_e.context):_e.context&&ag($,_e.context,!1),Ih($,_e.containerInfo)}function mj($,_e,_t,Vt,Wt){return Ig(),Jg(Wt),_e.flags|=256,Yi($,_e,_t,Vt),_e.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj($){return{baseLanes:$,cachePool:null,transitions:null}}function pj($,_e,_t){var Vt=_e.pendingProps,Wt=M$2.current,_i=!1,_s=(_e.flags&128)!==0,_c;if((_c=_s)||(_c=$!==null&&$.memoizedState===null?!1:(Wt&2)!==0),_c?(_i=!0,_e.flags&=-129):($===null||$.memoizedState!==null)&&(Wt|=1),G$1(M$2,Wt&1),$===null)return Eg(_e),$=_e.memoizedState,$!==null&&($=$.dehydrated,$!==null)?(_e.mode&1?$.data==="$!"?_e.lanes=8:_e.lanes=1073741824:_e.lanes=1,null):(_s=Vt.children,$=Vt.fallback,_i?(Vt=_e.mode,_i=_e.child,_s={mode:"hidden",children:_s},!(Vt&1)&&_i!==null?(_i.childLanes=0,_i.pendingProps=_s):_i=qj(_s,Vt,0,null),$=Ah($,Vt,_t,null),_i.return=_e,$.return=_e,_i.sibling=$,_e.child=_i,_e.child.memoizedState=oj(_t),_e.memoizedState=nj,$):rj(_e,_s));if(Wt=$.memoizedState,Wt!==null&&(_c=Wt.dehydrated,_c!==null))return sj($,_e,_s,Vt,_c,Wt,_t);if(_i){_i=Vt.fallback,_s=_e.mode,Wt=$.child,_c=Wt.sibling;var _l={mode:"hidden",children:Vt.children};return!(_s&1)&&_e.child!==Wt?(Vt=_e.child,Vt.childLanes=0,Vt.pendingProps=_l,_e.deletions=null):(Vt=wh(Wt,_l),Vt.subtreeFlags=Wt.subtreeFlags&14680064),_c!==null?_i=wh(_c,_i):(_i=Ah(_i,_s,_t,null),_i.flags|=2),_i.return=_e,Vt.return=_e,Vt.sibling=_i,_e.child=Vt,Vt=_i,_i=_e.child,_s=$.child.memoizedState,_s=_s===null?oj(_t):{baseLanes:_s.baseLanes|_t,cachePool:null,transitions:_s.transitions},_i.memoizedState=_s,_i.childLanes=$.childLanes&~_t,_e.memoizedState=nj,Vt}return _i=$.child,$=_i.sibling,Vt=wh(_i,{mode:"visible",children:Vt.children}),!(_e.mode&1)&&(Vt.lanes=_t),Vt.return=_e,Vt.sibling=null,$!==null&&(_t=_e.deletions,_t===null?(_e.deletions=[$],_e.flags|=16):_t.push($)),_e.child=Vt,_e.memoizedState=null,Vt}function rj($,_e){return _e=qj({mode:"visible",children:_e},$.mode,0,null),_e.return=$,$.child=_e}function tj($,_e,_t,Vt){return Vt!==null&&Jg(Vt),Bh(_e,$.child,null,_t),$=rj(_e,_e.pendingProps.children),$.flags|=2,_e.memoizedState=null,$}function sj($,_e,_t,Vt,Wt,_i,_s){if(_t)return _e.flags&256?(_e.flags&=-257,Vt=Li(Error(p$7(422))),tj($,_e,_s,Vt)):_e.memoizedState!==null?(_e.child=$.child,_e.flags|=128,null):(_i=Vt.fallback,Wt=_e.mode,Vt=qj({mode:"visible",children:Vt.children},Wt,0,null),_i=Ah(_i,Wt,_s,null),_i.flags|=2,Vt.return=_e,_i.return=_e,Vt.sibling=_i,_e.child=Vt,_e.mode&1&&Bh(_e,$.child,null,_s),_e.child.memoizedState=oj(_s),_e.memoizedState=nj,_i);if(!(_e.mode&1))return tj($,_e,_s,null);if(Wt.data==="$!"){if(Vt=Wt.nextSibling&&Wt.nextSibling.dataset,Vt)var _c=Vt.dgst;return Vt=_c,_i=Error(p$7(419)),Vt=Li(_i,Vt,void 0),tj($,_e,_s,Vt)}if(_c=(_s&$.childLanes)!==0,Ug||_c){if(Vt=R$2,Vt!==null){switch(_s&-_s){case 4:Wt=2;break;case 16:Wt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Wt=32;break;case 536870912:Wt=268435456;break;default:Wt=0}Wt=Wt&(Vt.suspendedLanes|_s)?0:Wt,Wt!==0&&Wt!==_i.retryLane&&(_i.retryLane=Wt,Zg($,Wt),mh(Vt,$,Wt,-1))}return uj(),Vt=Li(Error(p$7(421))),tj($,_e,_s,Vt)}return Wt.data==="$?"?(_e.flags|=128,_e.child=$.child,_e=vj.bind(null,$),Wt._reactRetry=_e,null):($=_i.treeContext,yg=Lf(Wt.nextSibling),xg=_e,I$2=!0,zg=null,$!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=$.id,sg=$.overflow,qg=_e),_e=rj(_e,Vt.children),_e.flags|=4096,_e)}function wj($,_e,_t){$.lanes|=_e;var Vt=$.alternate;Vt!==null&&(Vt.lanes|=_e),Sg($.return,_e,_t)}function xj($,_e,_t,Vt,Wt){var _i=$.memoizedState;_i===null?$.memoizedState={isBackwards:_e,rendering:null,renderingStartTime:0,last:Vt,tail:_t,tailMode:Wt}:(_i.isBackwards=_e,_i.rendering=null,_i.renderingStartTime=0,_i.last=Vt,_i.tail=_t,_i.tailMode=Wt)}function yj($,_e,_t){var Vt=_e.pendingProps,Wt=Vt.revealOrder,_i=Vt.tail;if(Yi($,_e,Vt.children,_t),Vt=M$2.current,Vt&2)Vt=Vt&1|2,_e.flags|=128;else{if($!==null&&$.flags&128)e:for($=_e.child;$!==null;){if($.tag===13)$.memoizedState!==null&&wj($,_t,_e);else if($.tag===19)wj($,_t,_e);else if($.child!==null){$.child.return=$,$=$.child;continue}if($===_e)break e;for(;$.sibling===null;){if($.return===null||$.return===_e)break e;$=$.return}$.sibling.return=$.return,$=$.sibling}Vt&=1}if(G$1(M$2,Vt),!(_e.mode&1))_e.memoizedState=null;else switch(Wt){case"forwards":for(_t=_e.child,Wt=null;_t!==null;)$=_t.alternate,$!==null&&Mh($)===null&&(Wt=_t),_t=_t.sibling;_t=Wt,_t===null?(Wt=_e.child,_e.child=null):(Wt=_t.sibling,_t.sibling=null),xj(_e,!1,Wt,_t,_i);break;case"backwards":for(_t=null,Wt=_e.child,_e.child=null;Wt!==null;){if($=Wt.alternate,$!==null&&Mh($)===null){_e.child=Wt;break}$=Wt.sibling,Wt.sibling=_t,_t=Wt,Wt=$}xj(_e,!0,_t,null,_i);break;case"together":xj(_e,!1,null,null,void 0);break;default:_e.memoizedState=null}return _e.child}function jj($,_e){!(_e.mode&1)&&$!==null&&($.alternate=null,_e.alternate=null,_e.flags|=2)}function $i($,_e,_t){if($!==null&&(_e.dependencies=$.dependencies),hh|=_e.lanes,!(_t&_e.childLanes))return null;if($!==null&&_e.child!==$.child)throw Error(p$7(153));if(_e.child!==null){for($=_e.child,_t=wh($,$.pendingProps),_e.child=_t,_t.return=_e;$.sibling!==null;)$=$.sibling,_t=_t.sibling=wh($,$.pendingProps),_t.return=_e;_t.sibling=null}return _e.child}function zj($,_e,_t){switch(_e.tag){case 3:lj(_e),Ig();break;case 5:Kh(_e);break;case 1:Zf(_e.type)&&cg(_e);break;case 4:Ih(_e,_e.stateNode.containerInfo);break;case 10:var Vt=_e.type._context,Wt=_e.memoizedProps.value;G$1(Mg,Vt._currentValue),Vt._currentValue=Wt;break;case 13:if(Vt=_e.memoizedState,Vt!==null)return Vt.dehydrated!==null?(G$1(M$2,M$2.current&1),_e.flags|=128,null):_t&_e.child.childLanes?pj($,_e,_t):(G$1(M$2,M$2.current&1),$=$i($,_e,_t),$!==null?$.sibling:null);G$1(M$2,M$2.current&1);break;case 19:if(Vt=(_t&_e.childLanes)!==0,$.flags&128){if(Vt)return yj($,_e,_t);_e.flags|=128}if(Wt=_e.memoizedState,Wt!==null&&(Wt.rendering=null,Wt.tail=null,Wt.lastEffect=null),G$1(M$2,M$2.current),Vt)break;return null;case 22:case 23:return _e.lanes=0,ej($,_e,_t)}return $i($,_e,_t)}var Aj,Bj,Cj,Dj;Aj=function($,_e){for(var _t=_e.child;_t!==null;){if(_t.tag===5||_t.tag===6)$.appendChild(_t.stateNode);else if(_t.tag!==4&&_t.child!==null){_t.child.return=_t,_t=_t.child;continue}if(_t===_e)break;for(;_t.sibling===null;){if(_t.return===null||_t.return===_e)return;_t=_t.return}_t.sibling.return=_t.return,_t=_t.sibling}};Bj=function(){};Cj=function($,_e,_t,Vt){var Wt=$.memoizedProps;if(Wt!==Vt){$=_e.stateNode,Hh(Eh.current);var _i=null;switch(_t){case"input":Wt=Ya($,Wt),Vt=Ya($,Vt),_i=[];break;case"select":Wt=A$3({},Wt,{value:void 0}),Vt=A$3({},Vt,{value:void 0}),_i=[];break;case"textarea":Wt=gb($,Wt),Vt=gb($,Vt),_i=[];break;default:typeof Wt.onClick!="function"&&typeof Vt.onClick=="function"&&($.onclick=Bf)}ub(_t,Vt);var _s;_t=null;for(_d in Wt)if(!Vt.hasOwnProperty(_d)&&Wt.hasOwnProperty(_d)&&Wt[_d]!=null)if(_d==="style"){var _c=Wt[_d];for(_s in _c)_c.hasOwnProperty(_s)&&(_t||(_t={}),_t[_s]="")}else _d!=="dangerouslySetInnerHTML"&&_d!=="children"&&_d!=="suppressContentEditableWarning"&&_d!=="suppressHydrationWarning"&&_d!=="autoFocus"&&(ea.hasOwnProperty(_d)?_i||(_i=[]):(_i=_i||[]).push(_d,null));for(_d in Vt){var _l=Vt[_d];if(_c=Wt!=null?Wt[_d]:void 0,Vt.hasOwnProperty(_d)&&_l!==_c&&(_l!=null||_c!=null))if(_d==="style")if(_c){for(_s in _c)!_c.hasOwnProperty(_s)||_l&&_l.hasOwnProperty(_s)||(_t||(_t={}),_t[_s]="");for(_s in _l)_l.hasOwnProperty(_s)&&_c[_s]!==_l[_s]&&(_t||(_t={}),_t[_s]=_l[_s])}else _t||(_i||(_i=[]),_i.push(_d,_t)),_t=_l;else _d==="dangerouslySetInnerHTML"?(_l=_l?_l.__html:void 0,_c=_c?_c.__html:void 0,_l!=null&&_c!==_l&&(_i=_i||[]).push(_d,_l)):_d==="children"?typeof _l!="string"&&typeof _l!="number"||(_i=_i||[]).push(_d,""+_l):_d!=="suppressContentEditableWarning"&&_d!=="suppressHydrationWarning"&&(ea.hasOwnProperty(_d)?(_l!=null&&_d==="onScroll"&&D$2("scroll",$),_i||_c===_l||(_i=[])):(_i=_i||[]).push(_d,_l))}_t&&(_i=_i||[]).push("style",_t);var _d=_i;(_e.updateQueue=_d)&&(_e.flags|=4)}};Dj=function($,_e,_t,Vt){_t!==Vt&&(_e.flags|=4)};function Ej($,_e){if(!I$2)switch($.tailMode){case"hidden":_e=$.tail;for(var _t=null;_e!==null;)_e.alternate!==null&&(_t=_e),_e=_e.sibling;_t===null?$.tail=null:_t.sibling=null;break;case"collapsed":_t=$.tail;for(var Vt=null;_t!==null;)_t.alternate!==null&&(Vt=_t),_t=_t.sibling;Vt===null?_e||$.tail===null?$.tail=null:$.tail.sibling=null:Vt.sibling=null}}function S$2($){var _e=$.alternate!==null&&$.alternate.child===$.child,_t=0,Vt=0;if(_e)for(var Wt=$.child;Wt!==null;)_t|=Wt.lanes|Wt.childLanes,Vt|=Wt.subtreeFlags&14680064,Vt|=Wt.flags&14680064,Wt.return=$,Wt=Wt.sibling;else for(Wt=$.child;Wt!==null;)_t|=Wt.lanes|Wt.childLanes,Vt|=Wt.subtreeFlags,Vt|=Wt.flags,Wt.return=$,Wt=Wt.sibling;return $.subtreeFlags|=Vt,$.childLanes=_t,_e}function Fj($,_e,_t){var Vt=_e.pendingProps;switch(wg(_e),_e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$2(_e),null;case 1:return Zf(_e.type)&&$f(),S$2(_e),null;case 3:return Vt=_e.stateNode,Jh(),E$2(Wf),E$2(H$2),Oh(),Vt.pendingContext&&(Vt.context=Vt.pendingContext,Vt.pendingContext=null),($===null||$.child===null)&&(Gg(_e)?_e.flags|=4:$===null||$.memoizedState.isDehydrated&&!(_e.flags&256)||(_e.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj($,_e),S$2(_e),null;case 5:Lh(_e);var Wt=Hh(Gh.current);if(_t=_e.type,$!==null&&_e.stateNode!=null)Cj($,_e,_t,Vt,Wt),$.ref!==_e.ref&&(_e.flags|=512,_e.flags|=2097152);else{if(!Vt){if(_e.stateNode===null)throw Error(p$7(166));return S$2(_e),null}if($=Hh(Eh.current),Gg(_e)){Vt=_e.stateNode,_t=_e.type;var _i=_e.memoizedProps;switch(Vt[Of]=_e,Vt[Pf]=_i,$=(_e.mode&1)!==0,_t){case"dialog":D$2("cancel",Vt),D$2("close",Vt);break;case"iframe":case"object":case"embed":D$2("load",Vt);break;case"video":case"audio":for(Wt=0;Wt<lf.length;Wt++)D$2(lf[Wt],Vt);break;case"source":D$2("error",Vt);break;case"img":case"image":case"link":D$2("error",Vt),D$2("load",Vt);break;case"details":D$2("toggle",Vt);break;case"input":Za(Vt,_i),D$2("invalid",Vt);break;case"select":Vt._wrapperState={wasMultiple:!!_i.multiple},D$2("invalid",Vt);break;case"textarea":hb(Vt,_i),D$2("invalid",Vt)}ub(_t,_i),Wt=null;for(var _s in _i)if(_i.hasOwnProperty(_s)){var _c=_i[_s];_s==="children"?typeof _c=="string"?Vt.textContent!==_c&&(_i.suppressHydrationWarning!==!0&&Af(Vt.textContent,_c,$),Wt=["children",_c]):typeof _c=="number"&&Vt.textContent!==""+_c&&(_i.suppressHydrationWarning!==!0&&Af(Vt.textContent,_c,$),Wt=["children",""+_c]):ea.hasOwnProperty(_s)&&_c!=null&&_s==="onScroll"&&D$2("scroll",Vt)}switch(_t){case"input":Va(Vt),db(Vt,_i,!0);break;case"textarea":Va(Vt),jb(Vt);break;case"select":case"option":break;default:typeof _i.onClick=="function"&&(Vt.onclick=Bf)}Vt=Wt,_e.updateQueue=Vt,Vt!==null&&(_e.flags|=4)}else{_s=Wt.nodeType===9?Wt:Wt.ownerDocument,$==="http://www.w3.org/1999/xhtml"&&($=kb(_t)),$==="http://www.w3.org/1999/xhtml"?_t==="script"?($=_s.createElement("div"),$.innerHTML="<script><\/script>",$=$.removeChild($.firstChild)):typeof Vt.is=="string"?$=_s.createElement(_t,{is:Vt.is}):($=_s.createElement(_t),_t==="select"&&(_s=$,Vt.multiple?_s.multiple=!0:Vt.size&&(_s.size=Vt.size))):$=_s.createElementNS($,_t),$[Of]=_e,$[Pf]=Vt,Aj($,_e,!1,!1),_e.stateNode=$;e:{switch(_s=vb(_t,Vt),_t){case"dialog":D$2("cancel",$),D$2("close",$),Wt=Vt;break;case"iframe":case"object":case"embed":D$2("load",$),Wt=Vt;break;case"video":case"audio":for(Wt=0;Wt<lf.length;Wt++)D$2(lf[Wt],$);Wt=Vt;break;case"source":D$2("error",$),Wt=Vt;break;case"img":case"image":case"link":D$2("error",$),D$2("load",$),Wt=Vt;break;case"details":D$2("toggle",$),Wt=Vt;break;case"input":Za($,Vt),Wt=Ya($,Vt),D$2("invalid",$);break;case"option":Wt=Vt;break;case"select":$._wrapperState={wasMultiple:!!Vt.multiple},Wt=A$3({},Vt,{value:void 0}),D$2("invalid",$);break;case"textarea":hb($,Vt),Wt=gb($,Vt),D$2("invalid",$);break;default:Wt=Vt}ub(_t,Wt),_c=Wt;for(_i in _c)if(_c.hasOwnProperty(_i)){var _l=_c[_i];_i==="style"?sb($,_l):_i==="dangerouslySetInnerHTML"?(_l=_l?_l.__html:void 0,_l!=null&&nb$3($,_l)):_i==="children"?typeof _l=="string"?(_t!=="textarea"||_l!=="")&&ob($,_l):typeof _l=="number"&&ob($,""+_l):_i!=="suppressContentEditableWarning"&&_i!=="suppressHydrationWarning"&&_i!=="autoFocus"&&(ea.hasOwnProperty(_i)?_l!=null&&_i==="onScroll"&&D$2("scroll",$):_l!=null&&ta$3($,_i,_l,_s))}switch(_t){case"input":Va($),db($,Vt,!1);break;case"textarea":Va($),jb($);break;case"option":Vt.value!=null&&$.setAttribute("value",""+Sa(Vt.value));break;case"select":$.multiple=!!Vt.multiple,_i=Vt.value,_i!=null?fb($,!!Vt.multiple,_i,!1):Vt.defaultValue!=null&&fb($,!!Vt.multiple,Vt.defaultValue,!0);break;default:typeof Wt.onClick=="function"&&($.onclick=Bf)}switch(_t){case"button":case"input":case"select":case"textarea":Vt=!!Vt.autoFocus;break e;case"img":Vt=!0;break e;default:Vt=!1}}Vt&&(_e.flags|=4)}_e.ref!==null&&(_e.flags|=512,_e.flags|=2097152)}return S$2(_e),null;case 6:if($&&_e.stateNode!=null)Dj($,_e,$.memoizedProps,Vt);else{if(typeof Vt!="string"&&_e.stateNode===null)throw Error(p$7(166));if(_t=Hh(Gh.current),Hh(Eh.current),Gg(_e)){if(Vt=_e.stateNode,_t=_e.memoizedProps,Vt[Of]=_e,(_i=Vt.nodeValue!==_t)&&($=xg,$!==null))switch($.tag){case 3:Af(Vt.nodeValue,_t,($.mode&1)!==0);break;case 5:$.memoizedProps.suppressHydrationWarning!==!0&&Af(Vt.nodeValue,_t,($.mode&1)!==0)}_i&&(_e.flags|=4)}else Vt=(_t.nodeType===9?_t:_t.ownerDocument).createTextNode(Vt),Vt[Of]=_e,_e.stateNode=Vt}return S$2(_e),null;case 13:if(E$2(M$2),Vt=_e.memoizedState,$===null||$.memoizedState!==null&&$.memoizedState.dehydrated!==null){if(I$2&&yg!==null&&_e.mode&1&&!(_e.flags&128))Hg(),Ig(),_e.flags|=98560,_i=!1;else if(_i=Gg(_e),Vt!==null&&Vt.dehydrated!==null){if($===null){if(!_i)throw Error(p$7(318));if(_i=_e.memoizedState,_i=_i!==null?_i.dehydrated:null,!_i)throw Error(p$7(317));_i[Of]=_e}else Ig(),!(_e.flags&128)&&(_e.memoizedState=null),_e.flags|=4;S$2(_e),_i=!1}else zg!==null&&(Gj(zg),zg=null),_i=!0;if(!_i)return _e.flags&65536?_e:null}return _e.flags&128?(_e.lanes=_t,_e):(Vt=Vt!==null,Vt!==($!==null&&$.memoizedState!==null)&&Vt&&(_e.child.flags|=8192,_e.mode&1&&($===null||M$2.current&1?T$2===0&&(T$2=3):uj())),_e.updateQueue!==null&&(_e.flags|=4),S$2(_e),null);case 4:return Jh(),Bj($,_e),$===null&&sf(_e.stateNode.containerInfo),S$2(_e),null;case 10:return Rg(_e.type._context),S$2(_e),null;case 17:return Zf(_e.type)&&$f(),S$2(_e),null;case 19:if(E$2(M$2),_i=_e.memoizedState,_i===null)return S$2(_e),null;if(Vt=(_e.flags&128)!==0,_s=_i.rendering,_s===null)if(Vt)Ej(_i,!1);else{if(T$2!==0||$!==null&&$.flags&128)for($=_e.child;$!==null;){if(_s=Mh($),_s!==null){for(_e.flags|=128,Ej(_i,!1),Vt=_s.updateQueue,Vt!==null&&(_e.updateQueue=Vt,_e.flags|=4),_e.subtreeFlags=0,Vt=_t,_t=_e.child;_t!==null;)_i=_t,$=Vt,_i.flags&=14680066,_s=_i.alternate,_s===null?(_i.childLanes=0,_i.lanes=$,_i.child=null,_i.subtreeFlags=0,_i.memoizedProps=null,_i.memoizedState=null,_i.updateQueue=null,_i.dependencies=null,_i.stateNode=null):(_i.childLanes=_s.childLanes,_i.lanes=_s.lanes,_i.child=_s.child,_i.subtreeFlags=0,_i.deletions=null,_i.memoizedProps=_s.memoizedProps,_i.memoizedState=_s.memoizedState,_i.updateQueue=_s.updateQueue,_i.type=_s.type,$=_s.dependencies,_i.dependencies=$===null?null:{lanes:$.lanes,firstContext:$.firstContext}),_t=_t.sibling;return G$1(M$2,M$2.current&1|2),_e.child}$=$.sibling}_i.tail!==null&&B$2()>Hj&&(_e.flags|=128,Vt=!0,Ej(_i,!1),_e.lanes=4194304)}else{if(!Vt)if($=Mh(_s),$!==null){if(_e.flags|=128,Vt=!0,_t=$.updateQueue,_t!==null&&(_e.updateQueue=_t,_e.flags|=4),Ej(_i,!0),_i.tail===null&&_i.tailMode==="hidden"&&!_s.alternate&&!I$2)return S$2(_e),null}else 2*B$2()-_i.renderingStartTime>Hj&&_t!==1073741824&&(_e.flags|=128,Vt=!0,Ej(_i,!1),_e.lanes=4194304);_i.isBackwards?(_s.sibling=_e.child,_e.child=_s):(_t=_i.last,_t!==null?_t.sibling=_s:_e.child=_s,_i.last=_s)}return _i.tail!==null?(_e=_i.tail,_i.rendering=_e,_i.tail=_e.sibling,_i.renderingStartTime=B$2(),_e.sibling=null,_t=M$2.current,G$1(M$2,Vt?_t&1|2:_t&1),_e):(S$2(_e),null);case 22:case 23:return Ij(),Vt=_e.memoizedState!==null,$!==null&&$.memoizedState!==null!==Vt&&(_e.flags|=8192),Vt&&_e.mode&1?gj&1073741824&&(S$2(_e),_e.subtreeFlags&6&&(_e.flags|=8192)):S$2(_e),null;case 24:return null;case 25:return null}throw Error(p$7(156,_e.tag))}function Jj($,_e){switch(wg(_e),_e.tag){case 1:return Zf(_e.type)&&$f(),$=_e.flags,$&65536?(_e.flags=$&-65537|128,_e):null;case 3:return Jh(),E$2(Wf),E$2(H$2),Oh(),$=_e.flags,$&65536&&!($&128)?(_e.flags=$&-65537|128,_e):null;case 5:return Lh(_e),null;case 13:if(E$2(M$2),$=_e.memoizedState,$!==null&&$.dehydrated!==null){if(_e.alternate===null)throw Error(p$7(340));Ig()}return $=_e.flags,$&65536?(_e.flags=$&-65537|128,_e):null;case 19:return E$2(M$2),null;case 4:return Jh(),null;case 10:return Rg(_e.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$1=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Mj($,_e){var _t=$.ref;if(_t!==null)if(typeof _t=="function")try{_t(null)}catch(Vt){W$1($,_e,Vt)}else _t.current=null}function Nj($,_e,_t){try{_t()}catch(Vt){W$1($,_e,Vt)}}var Oj=!1;function Pj($,_e){if(Cf=dd,$=Me(),Ne($)){if("selectionStart"in $)var _t={start:$.selectionStart,end:$.selectionEnd};else e:{_t=(_t=$.ownerDocument)&&_t.defaultView||window;var Vt=_t.getSelection&&_t.getSelection();if(Vt&&Vt.rangeCount!==0){_t=Vt.anchorNode;var Wt=Vt.anchorOffset,_i=Vt.focusNode;Vt=Vt.focusOffset;try{_t.nodeType,_i.nodeType}catch{_t=null;break e}var _s=0,_c=-1,_l=-1,_d=0,_m=0,e_=$,t_=null;t:for(;;){for(var i_;e_!==_t||Wt!==0&&e_.nodeType!==3||(_c=_s+Wt),e_!==_i||Vt!==0&&e_.nodeType!==3||(_l=_s+Vt),e_.nodeType===3&&(_s+=e_.nodeValue.length),(i_=e_.firstChild)!==null;)t_=e_,e_=i_;for(;;){if(e_===$)break t;if(t_===_t&&++_d===Wt&&(_c=_s),t_===_i&&++_m===Vt&&(_l=_s),(i_=e_.nextSibling)!==null)break;e_=t_,t_=e_.parentNode}e_=i_}_t=_c===-1||_l===-1?null:{start:_c,end:_l}}else _t=null}_t=_t||{start:0,end:0}}else _t=null;for(Df={focusedElem:$,selectionRange:_t},dd=!1,V=_e;V!==null;)if(_e=V,$=_e.child,(_e.subtreeFlags&1028)!==0&&$!==null)$.return=_e,V=$;else for(;V!==null;){_e=V;try{var c_=_e.alternate;if(_e.flags&1024)switch(_e.tag){case 0:case 11:case 15:break;case 1:if(c_!==null){var h_=c_.memoizedProps,y_=c_.memoizedState,l_=_e.stateNode,d_=l_.getSnapshotBeforeUpdate(_e.elementType===_e.type?h_:Lg(_e.type,h_),y_);l_.__reactInternalSnapshotBeforeUpdate=d_}break;case 3:var f_=_e.stateNode.containerInfo;f_.nodeType===1?f_.textContent="":f_.nodeType===9&&f_.documentElement&&f_.removeChild(f_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$7(163))}}catch(S_){W$1(_e,_e.return,S_)}if($=_e.sibling,$!==null){$.return=_e.return,V=$;break}V=_e.return}return c_=Oj,Oj=!1,c_}function Qj($,_e,_t){var Vt=_e.updateQueue;if(Vt=Vt!==null?Vt.lastEffect:null,Vt!==null){var Wt=Vt=Vt.next;do{if((Wt.tag&$)===$){var _i=Wt.destroy;Wt.destroy=void 0,_i!==void 0&&Nj(_e,_t,_i)}Wt=Wt.next}while(Wt!==Vt)}}function Rj($,_e){if(_e=_e.updateQueue,_e=_e!==null?_e.lastEffect:null,_e!==null){var _t=_e=_e.next;do{if((_t.tag&$)===$){var Vt=_t.create;_t.destroy=Vt()}_t=_t.next}while(_t!==_e)}}function Sj($){var _e=$.ref;if(_e!==null){var _t=$.stateNode;switch($.tag){case 5:$=_t;break;default:$=_t}typeof _e=="function"?_e($):_e.current=$}}function Tj($){var _e=$.alternate;_e!==null&&($.alternate=null,Tj(_e)),$.child=null,$.deletions=null,$.sibling=null,$.tag===5&&(_e=$.stateNode,_e!==null&&(delete _e[Of],delete _e[Pf],delete _e[of],delete _e[Qf],delete _e[Rf])),$.stateNode=null,$.return=null,$.dependencies=null,$.memoizedProps=null,$.memoizedState=null,$.pendingProps=null,$.stateNode=null,$.updateQueue=null}function Uj($){return $.tag===5||$.tag===3||$.tag===4}function Vj($){e:for(;;){for(;$.sibling===null;){if($.return===null||Uj($.return))return null;$=$.return}for($.sibling.return=$.return,$=$.sibling;$.tag!==5&&$.tag!==6&&$.tag!==18;){if($.flags&2||$.child===null||$.tag===4)continue e;$.child.return=$,$=$.child}if(!($.flags&2))return $.stateNode}}function Wj($,_e,_t){var Vt=$.tag;if(Vt===5||Vt===6)$=$.stateNode,_e?_t.nodeType===8?_t.parentNode.insertBefore($,_e):_t.insertBefore($,_e):(_t.nodeType===8?(_e=_t.parentNode,_e.insertBefore($,_t)):(_e=_t,_e.appendChild($)),_t=_t._reactRootContainer,_t!=null||_e.onclick!==null||(_e.onclick=Bf));else if(Vt!==4&&($=$.child,$!==null))for(Wj($,_e,_t),$=$.sibling;$!==null;)Wj($,_e,_t),$=$.sibling}function Xj($,_e,_t){var Vt=$.tag;if(Vt===5||Vt===6)$=$.stateNode,_e?_t.insertBefore($,_e):_t.appendChild($);else if(Vt!==4&&($=$.child,$!==null))for(Xj($,_e,_t),$=$.sibling;$!==null;)Xj($,_e,_t),$=$.sibling}var X$1=null,Yj=!1;function Zj($,_e,_t){for(_t=_t.child;_t!==null;)ak($,_e,_t),_t=_t.sibling}function ak($,_e,_t){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,_t)}catch{}switch(_t.tag){case 5:U$1||Mj(_t,_e);case 6:var Vt=X$1,Wt=Yj;X$1=null,Zj($,_e,_t),X$1=Vt,Yj=Wt,X$1!==null&&(Yj?($=X$1,_t=_t.stateNode,$.nodeType===8?$.parentNode.removeChild(_t):$.removeChild(_t)):X$1.removeChild(_t.stateNode));break;case 18:X$1!==null&&(Yj?($=X$1,_t=_t.stateNode,$.nodeType===8?Kf($.parentNode,_t):$.nodeType===1&&Kf($,_t),bd($)):Kf(X$1,_t.stateNode));break;case 4:Vt=X$1,Wt=Yj,X$1=_t.stateNode.containerInfo,Yj=!0,Zj($,_e,_t),X$1=Vt,Yj=Wt;break;case 0:case 11:case 14:case 15:if(!U$1&&(Vt=_t.updateQueue,Vt!==null&&(Vt=Vt.lastEffect,Vt!==null))){Wt=Vt=Vt.next;do{var _i=Wt,_s=_i.destroy;_i=_i.tag,_s!==void 0&&(_i&2||_i&4)&&Nj(_t,_e,_s),Wt=Wt.next}while(Wt!==Vt)}Zj($,_e,_t);break;case 1:if(!U$1&&(Mj(_t,_e),Vt=_t.stateNode,typeof Vt.componentWillUnmount=="function"))try{Vt.props=_t.memoizedProps,Vt.state=_t.memoizedState,Vt.componentWillUnmount()}catch(_c){W$1(_t,_e,_c)}Zj($,_e,_t);break;case 21:Zj($,_e,_t);break;case 22:_t.mode&1?(U$1=(Vt=U$1)||_t.memoizedState!==null,Zj($,_e,_t),U$1=Vt):Zj($,_e,_t);break;default:Zj($,_e,_t)}}function bk($){var _e=$.updateQueue;if(_e!==null){$.updateQueue=null;var _t=$.stateNode;_t===null&&(_t=$.stateNode=new Lj),_e.forEach(function(Vt){var Wt=ck.bind(null,$,Vt);_t.has(Vt)||(_t.add(Vt),Vt.then(Wt,Wt))})}}function dk($,_e){var _t=_e.deletions;if(_t!==null)for(var Vt=0;Vt<_t.length;Vt++){var Wt=_t[Vt];try{var _i=$,_s=_e,_c=_s;e:for(;_c!==null;){switch(_c.tag){case 5:X$1=_c.stateNode,Yj=!1;break e;case 3:X$1=_c.stateNode.containerInfo,Yj=!0;break e;case 4:X$1=_c.stateNode.containerInfo,Yj=!0;break e}_c=_c.return}if(X$1===null)throw Error(p$7(160));ak(_i,_s,Wt),X$1=null,Yj=!1;var _l=Wt.alternate;_l!==null&&(_l.return=null),Wt.return=null}catch(_d){W$1(Wt,_e,_d)}}if(_e.subtreeFlags&12854)for(_e=_e.child;_e!==null;)ek(_e,$),_e=_e.sibling}function ek($,_e){var _t=$.alternate,Vt=$.flags;switch($.tag){case 0:case 11:case 14:case 15:if(dk(_e,$),fk($),Vt&4){try{Qj(3,$,$.return),Rj(3,$)}catch(h_){W$1($,$.return,h_)}try{Qj(5,$,$.return)}catch(h_){W$1($,$.return,h_)}}break;case 1:dk(_e,$),fk($),Vt&512&&_t!==null&&Mj(_t,_t.return);break;case 5:if(dk(_e,$),fk($),Vt&512&&_t!==null&&Mj(_t,_t.return),$.flags&32){var Wt=$.stateNode;try{ob(Wt,"")}catch(h_){W$1($,$.return,h_)}}if(Vt&4&&(Wt=$.stateNode,Wt!=null)){var _i=$.memoizedProps,_s=_t!==null?_t.memoizedProps:_i,_c=$.type,_l=$.updateQueue;if($.updateQueue=null,_l!==null)try{_c==="input"&&_i.type==="radio"&&_i.name!=null&&ab(Wt,_i),vb(_c,_s);var _d=vb(_c,_i);for(_s=0;_s<_l.length;_s+=2){var _m=_l[_s],e_=_l[_s+1];_m==="style"?sb(Wt,e_):_m==="dangerouslySetInnerHTML"?nb$3(Wt,e_):_m==="children"?ob(Wt,e_):ta$3(Wt,_m,e_,_d)}switch(_c){case"input":bb(Wt,_i);break;case"textarea":ib(Wt,_i);break;case"select":var t_=Wt._wrapperState.wasMultiple;Wt._wrapperState.wasMultiple=!!_i.multiple;var i_=_i.value;i_!=null?fb(Wt,!!_i.multiple,i_,!1):t_!==!!_i.multiple&&(_i.defaultValue!=null?fb(Wt,!!_i.multiple,_i.defaultValue,!0):fb(Wt,!!_i.multiple,_i.multiple?[]:"",!1))}Wt[Pf]=_i}catch(h_){W$1($,$.return,h_)}}break;case 6:if(dk(_e,$),fk($),Vt&4){if($.stateNode===null)throw Error(p$7(162));Wt=$.stateNode,_i=$.memoizedProps;try{Wt.nodeValue=_i}catch(h_){W$1($,$.return,h_)}}break;case 3:if(dk(_e,$),fk($),Vt&4&&_t!==null&&_t.memoizedState.isDehydrated)try{bd(_e.containerInfo)}catch(h_){W$1($,$.return,h_)}break;case 4:dk(_e,$),fk($);break;case 13:dk(_e,$),fk($),Wt=$.child,Wt.flags&8192&&(_i=Wt.memoizedState!==null,Wt.stateNode.isHidden=_i,!_i||Wt.alternate!==null&&Wt.alternate.memoizedState!==null||(gk=B$2())),Vt&4&&bk($);break;case 22:if(_m=_t!==null&&_t.memoizedState!==null,$.mode&1?(U$1=(_d=U$1)||_m,dk(_e,$),U$1=_d):dk(_e,$),fk($),Vt&8192){if(_d=$.memoizedState!==null,($.stateNode.isHidden=_d)&&!_m&&$.mode&1)for(V=$,_m=$.child;_m!==null;){for(e_=V=_m;V!==null;){switch(t_=V,i_=t_.child,t_.tag){case 0:case 11:case 14:case 15:Qj(4,t_,t_.return);break;case 1:Mj(t_,t_.return);var c_=t_.stateNode;if(typeof c_.componentWillUnmount=="function"){Vt=t_,_t=t_.return;try{_e=Vt,c_.props=_e.memoizedProps,c_.state=_e.memoizedState,c_.componentWillUnmount()}catch(h_){W$1(Vt,_t,h_)}}break;case 5:Mj(t_,t_.return);break;case 22:if(t_.memoizedState!==null){hk(e_);continue}}i_!==null?(i_.return=t_,V=i_):hk(e_)}_m=_m.sibling}e:for(_m=null,e_=$;;){if(e_.tag===5){if(_m===null){_m=e_;try{Wt=e_.stateNode,_d?(_i=Wt.style,typeof _i.setProperty=="function"?_i.setProperty("display","none","important"):_i.display="none"):(_c=e_.stateNode,_l=e_.memoizedProps.style,_s=_l!=null&&_l.hasOwnProperty("display")?_l.display:null,_c.style.display=rb("display",_s))}catch(h_){W$1($,$.return,h_)}}}else if(e_.tag===6){if(_m===null)try{e_.stateNode.nodeValue=_d?"":e_.memoizedProps}catch(h_){W$1($,$.return,h_)}}else if((e_.tag!==22&&e_.tag!==23||e_.memoizedState===null||e_===$)&&e_.child!==null){e_.child.return=e_,e_=e_.child;continue}if(e_===$)break e;for(;e_.sibling===null;){if(e_.return===null||e_.return===$)break e;_m===e_&&(_m=null),e_=e_.return}_m===e_&&(_m=null),e_.sibling.return=e_.return,e_=e_.sibling}}break;case 19:dk(_e,$),fk($),Vt&4&&bk($);break;case 21:break;default:dk(_e,$),fk($)}}function fk($){var _e=$.flags;if(_e&2){try{e:{for(var _t=$.return;_t!==null;){if(Uj(_t)){var Vt=_t;break e}_t=_t.return}throw Error(p$7(160))}switch(Vt.tag){case 5:var Wt=Vt.stateNode;Vt.flags&32&&(ob(Wt,""),Vt.flags&=-33);var _i=Vj($);Xj($,_i,Wt);break;case 3:case 4:var _s=Vt.stateNode.containerInfo,_c=Vj($);Wj($,_c,_s);break;default:throw Error(p$7(161))}}catch(_l){W$1($,$.return,_l)}$.flags&=-3}_e&4096&&($.flags&=-4097)}function ik($,_e,_t){V=$,jk($)}function jk($,_e,_t){for(var Vt=($.mode&1)!==0;V!==null;){var Wt=V,_i=Wt.child;if(Wt.tag===22&&Vt){var _s=Wt.memoizedState!==null||Kj;if(!_s){var _c=Wt.alternate,_l=_c!==null&&_c.memoizedState!==null||U$1;_c=Kj;var _d=U$1;if(Kj=_s,(U$1=_l)&&!_d)for(V=Wt;V!==null;)_s=V,_l=_s.child,_s.tag===22&&_s.memoizedState!==null?kk$3(Wt):_l!==null?(_l.return=_s,V=_l):kk$3(Wt);for(;_i!==null;)V=_i,jk(_i),_i=_i.sibling;V=Wt,Kj=_c,U$1=_d}lk($)}else Wt.subtreeFlags&8772&&_i!==null?(_i.return=Wt,V=_i):lk($)}}function lk($){for(;V!==null;){var _e=V;if(_e.flags&8772){var _t=_e.alternate;try{if(_e.flags&8772)switch(_e.tag){case 0:case 11:case 15:U$1||Rj(5,_e);break;case 1:var Vt=_e.stateNode;if(_e.flags&4&&!U$1)if(_t===null)Vt.componentDidMount();else{var Wt=_e.elementType===_e.type?_t.memoizedProps:Lg(_e.type,_t.memoizedProps);Vt.componentDidUpdate(Wt,_t.memoizedState,Vt.__reactInternalSnapshotBeforeUpdate)}var _i=_e.updateQueue;_i!==null&&ih(_e,_i,Vt);break;case 3:var _s=_e.updateQueue;if(_s!==null){if(_t=null,_e.child!==null)switch(_e.child.tag){case 5:_t=_e.child.stateNode;break;case 1:_t=_e.child.stateNode}ih(_e,_s,_t)}break;case 5:var _c=_e.stateNode;if(_t===null&&_e.flags&4){_t=_c;var _l=_e.memoizedProps;switch(_e.type){case"button":case"input":case"select":case"textarea":_l.autoFocus&&_t.focus();break;case"img":_l.src&&(_t.src=_l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_e.memoizedState===null){var _d=_e.alternate;if(_d!==null){var _m=_d.memoizedState;if(_m!==null){var e_=_m.dehydrated;e_!==null&&bd(e_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$7(163))}U$1||_e.flags&512&&Sj(_e)}catch(t_){W$1(_e,_e.return,t_)}}if(_e===$){V=null;break}if(_t=_e.sibling,_t!==null){_t.return=_e.return,V=_t;break}V=_e.return}}function hk($){for(;V!==null;){var _e=V;if(_e===$){V=null;break}var _t=_e.sibling;if(_t!==null){_t.return=_e.return,V=_t;break}V=_e.return}}function kk$3($){for(;V!==null;){var _e=V;try{switch(_e.tag){case 0:case 11:case 15:var _t=_e.return;try{Rj(4,_e)}catch(_l){W$1(_e,_t,_l)}break;case 1:var Vt=_e.stateNode;if(typeof Vt.componentDidMount=="function"){var Wt=_e.return;try{Vt.componentDidMount()}catch(_l){W$1(_e,Wt,_l)}}var _i=_e.return;try{Sj(_e)}catch(_l){W$1(_e,_i,_l)}break;case 5:var _s=_e.return;try{Sj(_e)}catch(_l){W$1(_e,_s,_l)}}}catch(_l){W$1(_e,_e.return,_l)}if(_e===$){V=null;break}var _c=_e.sibling;if(_c!==null){_c.return=_e.return,V=_c;break}V=_e.return}}var mk$3=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K=0,R$2=null,Y=null,Z$1=0,gj=0,fj=Uf(0),T$2=0,qk=null,hh=0,rk=0,sk$3=0,tk$3=null,uk$3=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$2(){return K&6?B$2():Bk!==-1?Bk:Bk=B$2()}function lh($){return $.mode&1?K&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):($=C$1,$!==0||($=window.event,$=$===void 0?16:jd($.type)),$):1}function mh($,_e,_t,Vt){if(50<zk)throw zk=0,Ak=null,Error(p$7(185));Ac($,_t,Vt),(!(K&2)||$!==R$2)&&($===R$2&&(!(K&2)&&(rk|=_t),T$2===4&&Dk($,Z$1)),Ek($,Vt),_t===1&&K===0&&!(_e.mode&1)&&(Hj=B$2()+500,fg&&jg()))}function Ek($,_e){var _t=$.callbackNode;wc($,_e);var Vt=uc($,$===R$2?Z$1:0);if(Vt===0)_t!==null&&bc(_t),$.callbackNode=null,$.callbackPriority=0;else if(_e=Vt&-Vt,$.callbackPriority!==_e){if(_t!=null&&bc(_t),_e===1)$.tag===0?ig(Fk.bind(null,$)):hg(Fk.bind(null,$)),Jf(function(){!(K&6)&&jg()}),_t=null;else{switch(Dc(Vt)){case 1:_t=fc;break;case 4:_t=gc;break;case 16:_t=hc;break;case 536870912:_t=jc;break;default:_t=hc}_t=Gk(_t,Hk.bind(null,$))}$.callbackPriority=_e,$.callbackNode=_t}}function Hk($,_e){if(Bk=-1,Ck=0,K&6)throw Error(p$7(327));var _t=$.callbackNode;if(Ik()&&$.callbackNode!==_t)return null;var Vt=uc($,$===R$2?Z$1:0);if(Vt===0)return null;if(Vt&30||Vt&$.expiredLanes||_e)_e=Jk($,Vt);else{_e=Vt;var Wt=K;K|=2;var _i=Kk();(R$2!==$||Z$1!==_e)&&(vk=null,Hj=B$2()+500,Lk($,_e));do try{Mk();break}catch(_c){Nk($,_c)}while(1);Qg(),nk.current=_i,K=Wt,Y!==null?_e=0:(R$2=null,Z$1=0,_e=T$2)}if(_e!==0){if(_e===2&&(Wt=xc($),Wt!==0&&(Vt=Wt,_e=Ok($,Wt))),_e===1)throw _t=qk,Lk($,0),Dk($,Vt),Ek($,B$2()),_t;if(_e===6)Dk($,Vt);else{if(Wt=$.current.alternate,!(Vt&30)&&!Pk(Wt)&&(_e=Jk($,Vt),_e===2&&(_i=xc($),_i!==0&&(Vt=_i,_e=Ok($,_i))),_e===1))throw _t=qk,Lk($,0),Dk($,Vt),Ek($,B$2()),_t;switch($.finishedWork=Wt,$.finishedLanes=Vt,_e){case 0:case 1:throw Error(p$7(345));case 2:Qk($,uk$3,vk);break;case 3:if(Dk($,Vt),(Vt&130023424)===Vt&&(_e=gk+500-B$2(),10<_e)){if(uc($,0)!==0)break;if(Wt=$.suspendedLanes,(Wt&Vt)!==Vt){L$2(),$.pingedLanes|=$.suspendedLanes&Wt;break}$.timeoutHandle=Ff(Qk.bind(null,$,uk$3,vk),_e);break}Qk($,uk$3,vk);break;case 4:if(Dk($,Vt),(Vt&4194240)===Vt)break;for(_e=$.eventTimes,Wt=-1;0<Vt;){var _s=31-oc(Vt);_i=1<<_s,_s=_e[_s],_s>Wt&&(Wt=_s),Vt&=~_i}if(Vt=Wt,Vt=B$2()-Vt,Vt=(120>Vt?120:480>Vt?480:1080>Vt?1080:1920>Vt?1920:3e3>Vt?3e3:4320>Vt?4320:1960*mk$3(Vt/1960))-Vt,10<Vt){$.timeoutHandle=Ff(Qk.bind(null,$,uk$3,vk),Vt);break}Qk($,uk$3,vk);break;case 5:Qk($,uk$3,vk);break;default:throw Error(p$7(329))}}}return Ek($,B$2()),$.callbackNode===_t?Hk.bind(null,$):null}function Ok($,_e){var _t=tk$3;return $.current.memoizedState.isDehydrated&&(Lk($,_e).flags|=256),$=Jk($,_e),$!==2&&(_e=uk$3,uk$3=_t,_e!==null&&Gj(_e)),$}function Gj($){uk$3===null?uk$3=$:uk$3.push.apply(uk$3,$)}function Pk($){for(var _e=$;;){if(_e.flags&16384){var _t=_e.updateQueue;if(_t!==null&&(_t=_t.stores,_t!==null))for(var Vt=0;Vt<_t.length;Vt++){var Wt=_t[Vt],_i=Wt.getSnapshot;Wt=Wt.value;try{if(!He(_i(),Wt))return!1}catch{return!1}}}if(_t=_e.child,_e.subtreeFlags&16384&&_t!==null)_t.return=_e,_e=_t;else{if(_e===$)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===$)return!0;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}}return!0}function Dk($,_e){for(_e&=~sk$3,_e&=~rk,$.suspendedLanes|=_e,$.pingedLanes&=~_e,$=$.expirationTimes;0<_e;){var _t=31-oc(_e),Vt=1<<_t;$[_t]=-1,_e&=~Vt}}function Fk($){if(K&6)throw Error(p$7(327));Ik();var _e=uc($,0);if(!(_e&1))return Ek($,B$2()),null;var _t=Jk($,_e);if($.tag!==0&&_t===2){var Vt=xc($);Vt!==0&&(_e=Vt,_t=Ok($,Vt))}if(_t===1)throw _t=qk,Lk($,0),Dk($,_e),Ek($,B$2()),_t;if(_t===6)throw Error(p$7(345));return $.finishedWork=$.current.alternate,$.finishedLanes=_e,Qk($,uk$3,vk),Ek($,B$2()),null}function Rk($,_e){var _t=K;K|=1;try{return $(_e)}finally{K=_t,K===0&&(Hj=B$2()+500,fg&&jg())}}function Sk($){xk!==null&&xk.tag===0&&!(K&6)&&Ik();var _e=K;K|=1;var _t=pk.transition,Vt=C$1;try{if(pk.transition=null,C$1=1,$)return $()}finally{C$1=Vt,pk.transition=_t,K=_e,!(K&6)&&jg()}}function Ij(){gj=fj.current,E$2(fj)}function Lk($,_e){$.finishedWork=null,$.finishedLanes=0;var _t=$.timeoutHandle;if(_t!==-1&&($.timeoutHandle=-1,Gf(_t)),Y!==null)for(_t=Y.return;_t!==null;){var Vt=_t;switch(wg(Vt),Vt.tag){case 1:Vt=Vt.type.childContextTypes,Vt!=null&&$f();break;case 3:Jh(),E$2(Wf),E$2(H$2),Oh();break;case 5:Lh(Vt);break;case 4:Jh();break;case 13:E$2(M$2);break;case 19:E$2(M$2);break;case 10:Rg(Vt.type._context);break;case 22:case 23:Ij()}_t=_t.return}if(R$2=$,Y=$=wh($.current,null),Z$1=gj=_e,T$2=0,qk=null,sk$3=rk=hh=0,uk$3=tk$3=null,Wg!==null){for(_e=0;_e<Wg.length;_e++)if(_t=Wg[_e],Vt=_t.interleaved,Vt!==null){_t.interleaved=null;var Wt=Vt.next,_i=_t.pending;if(_i!==null){var _s=_i.next;_i.next=Wt,Vt.next=_s}_t.pending=Vt}Wg=null}return $}function Nk($,_e){do{var _t=Y;try{if(Qg(),Ph.current=ai,Sh){for(var Vt=N$2.memoizedState;Vt!==null;){var Wt=Vt.queue;Wt!==null&&(Wt.pending=null),Vt=Vt.next}Sh=!1}if(Rh=0,P$2=O$2=N$2=null,Th=!1,Uh=0,ok.current=null,_t===null||_t.return===null){T$2=1,qk=_e,Y=null;break}e:{var _i=$,_s=_t.return,_c=_t,_l=_e;if(_e=Z$1,_c.flags|=32768,_l!==null&&typeof _l=="object"&&typeof _l.then=="function"){var _d=_l,_m=_c,e_=_m.tag;if(!(_m.mode&1)&&(e_===0||e_===11||e_===15)){var t_=_m.alternate;t_?(_m.updateQueue=t_.updateQueue,_m.memoizedState=t_.memoizedState,_m.lanes=t_.lanes):(_m.updateQueue=null,_m.memoizedState=null)}var i_=Vi(_s);if(i_!==null){i_.flags&=-257,Wi(i_,_s,_c,_i,_e),i_.mode&1&&Ti(_i,_d,_e),_e=i_,_l=_d;var c_=_e.updateQueue;if(c_===null){var h_=new Set;h_.add(_l),_e.updateQueue=h_}else c_.add(_l);break e}else{if(!(_e&1)){Ti(_i,_d,_e),uj();break e}_l=Error(p$7(426))}}else if(I$2&&_c.mode&1){var y_=Vi(_s);if(y_!==null){!(y_.flags&65536)&&(y_.flags|=256),Wi(y_,_s,_c,_i,_e),Jg(Ki(_l,_c));break e}}_i=_l=Ki(_l,_c),T$2!==4&&(T$2=2),tk$3===null?tk$3=[_i]:tk$3.push(_i),_i=_s;do{switch(_i.tag){case 3:_i.flags|=65536,_e&=-_e,_i.lanes|=_e;var l_=Oi(_i,_l,_e);fh(_i,l_);break e;case 1:_c=_l;var d_=_i.type,f_=_i.stateNode;if(!(_i.flags&128)&&(typeof d_.getDerivedStateFromError=="function"||f_!==null&&typeof f_.componentDidCatch=="function"&&(Si===null||!Si.has(f_)))){_i.flags|=65536,_e&=-_e,_i.lanes|=_e;var S_=Ri(_i,_c,_e);fh(_i,S_);break e}}_i=_i.return}while(_i!==null)}Tk(_t)}catch(T_){_e=T_,Y===_t&&_t!==null&&(Y=_t=_t.return);continue}break}while(1)}function Kk(){var $=nk.current;return nk.current=ai,$===null?ai:$}function uj(){(T$2===0||T$2===3||T$2===2)&&(T$2=4),R$2===null||!(hh&268435455)&&!(rk&268435455)||Dk(R$2,Z$1)}function Jk($,_e){var _t=K;K|=2;var Vt=Kk();(R$2!==$||Z$1!==_e)&&(vk=null,Lk($,_e));do try{Uk();break}catch(Wt){Nk($,Wt)}while(1);if(Qg(),K=_t,nk.current=Vt,Y!==null)throw Error(p$7(261));return R$2=null,Z$1=0,T$2}function Uk(){for(;Y!==null;)Vk(Y)}function Mk(){for(;Y!==null&&!cc();)Vk(Y)}function Vk($){var _e=Wk($.alternate,$,gj);$.memoizedProps=$.pendingProps,_e===null?Tk($):Y=_e,ok.current=null}function Tk($){var _e=$;do{var _t=_e.alternate;if($=_e.return,_e.flags&32768){if(_t=Jj(_t,_e),_t!==null){_t.flags&=32767,Y=_t;return}if($!==null)$.flags|=32768,$.subtreeFlags=0,$.deletions=null;else{T$2=6,Y=null;return}}else if(_t=Fj(_t,_e,gj),_t!==null){Y=_t;return}if(_e=_e.sibling,_e!==null){Y=_e;return}Y=_e=$}while(_e!==null);T$2===0&&(T$2=5)}function Qk($,_e,_t){var Vt=C$1,Wt=pk.transition;try{pk.transition=null,C$1=1,Xk($,_e,_t,Vt)}finally{pk.transition=Wt,C$1=Vt}return null}function Xk($,_e,_t,Vt){do Ik();while(xk!==null);if(K&6)throw Error(p$7(327));_t=$.finishedWork;var Wt=$.finishedLanes;if(_t===null)return null;if($.finishedWork=null,$.finishedLanes=0,_t===$.current)throw Error(p$7(177));$.callbackNode=null,$.callbackPriority=0;var _i=_t.lanes|_t.childLanes;if(Bc($,_i),$===R$2&&(Y=R$2=null,Z$1=0),!(_t.subtreeFlags&2064)&&!(_t.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),_i=(_t.flags&15990)!==0,_t.subtreeFlags&15990||_i){_i=pk.transition,pk.transition=null;var _s=C$1;C$1=1;var _c=K;K|=4,ok.current=null,Pj($,_t),ek(_t,$),Oe(Df),dd=!!Cf,Df=Cf=null,$.current=_t,ik(_t),dc(),K=_c,C$1=_s,pk.transition=_i}else $.current=_t;if(wk&&(wk=!1,xk=$,yk=Wt),_i=$.pendingLanes,_i===0&&(Si=null),mc(_t.stateNode),Ek($,B$2()),_e!==null)for(Vt=$.onRecoverableError,_t=0;_t<_e.length;_t++)Wt=_e[_t],Vt(Wt.value,{componentStack:Wt.stack,digest:Wt.digest});if(Pi)throw Pi=!1,$=Qi,Qi=null,$;return yk&1&&$.tag!==0&&Ik(),_i=$.pendingLanes,_i&1?$===Ak?zk++:(zk=0,Ak=$):zk=0,jg(),null}function Ik(){if(xk!==null){var $=Dc(yk),_e=pk.transition,_t=C$1;try{if(pk.transition=null,C$1=16>$?16:$,xk===null)var Vt=!1;else{if($=xk,xk=null,yk=0,K&6)throw Error(p$7(331));var Wt=K;for(K|=4,V=$.current;V!==null;){var _i=V,_s=_i.child;if(V.flags&16){var _c=_i.deletions;if(_c!==null){for(var _l=0;_l<_c.length;_l++){var _d=_c[_l];for(V=_d;V!==null;){var _m=V;switch(_m.tag){case 0:case 11:case 15:Qj(8,_m,_i)}var e_=_m.child;if(e_!==null)e_.return=_m,V=e_;else for(;V!==null;){_m=V;var t_=_m.sibling,i_=_m.return;if(Tj(_m),_m===_d){V=null;break}if(t_!==null){t_.return=i_,V=t_;break}V=i_}}}var c_=_i.alternate;if(c_!==null){var h_=c_.child;if(h_!==null){c_.child=null;do{var y_=h_.sibling;h_.sibling=null,h_=y_}while(h_!==null)}}V=_i}}if(_i.subtreeFlags&2064&&_s!==null)_s.return=_i,V=_s;else e:for(;V!==null;){if(_i=V,_i.flags&2048)switch(_i.tag){case 0:case 11:case 15:Qj(9,_i,_i.return)}var l_=_i.sibling;if(l_!==null){l_.return=_i.return,V=l_;break e}V=_i.return}}var d_=$.current;for(V=d_;V!==null;){_s=V;var f_=_s.child;if(_s.subtreeFlags&2064&&f_!==null)f_.return=_s,V=f_;else e:for(_s=d_;V!==null;){if(_c=V,_c.flags&2048)try{switch(_c.tag){case 0:case 11:case 15:Rj(9,_c)}}catch(T_){W$1(_c,_c.return,T_)}if(_c===_s){V=null;break e}var S_=_c.sibling;if(S_!==null){S_.return=_c.return,V=S_;break e}V=_c.return}}if(K=Wt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,$)}catch{}Vt=!0}return Vt}finally{C$1=_t,pk.transition=_e}}return!1}function Yk($,_e,_t){_e=Ki(_t,_e),_e=Oi($,_e,1),$=dh($,_e,1),_e=L$2(),$!==null&&(Ac($,1,_e),Ek($,_e))}function W$1($,_e,_t){if($.tag===3)Yk($,$,_t);else for(;_e!==null;){if(_e.tag===3){Yk(_e,$,_t);break}else if(_e.tag===1){var Vt=_e.stateNode;if(typeof _e.type.getDerivedStateFromError=="function"||typeof Vt.componentDidCatch=="function"&&(Si===null||!Si.has(Vt))){$=Ki(_t,$),$=Ri(_e,$,1),_e=dh(_e,$,1),$=L$2(),_e!==null&&(Ac(_e,1,$),Ek(_e,$));break}}_e=_e.return}}function Ui($,_e,_t){var Vt=$.pingCache;Vt!==null&&Vt.delete(_e),_e=L$2(),$.pingedLanes|=$.suspendedLanes&_t,R$2===$&&(Z$1&_t)===_t&&(T$2===4||T$2===3&&(Z$1&130023424)===Z$1&&500>B$2()-gk?Lk($,0):sk$3|=_t),Ek($,_e)}function Zk($,_e){_e===0&&($.mode&1?(_e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):_e=1);var _t=L$2();$=Zg($,_e),$!==null&&(Ac($,_e,_t),Ek($,_t))}function vj($){var _e=$.memoizedState,_t=0;_e!==null&&(_t=_e.retryLane),Zk($,_t)}function ck($,_e){var _t=0;switch($.tag){case 13:var Vt=$.stateNode,Wt=$.memoizedState;Wt!==null&&(_t=Wt.retryLane);break;case 19:Vt=$.stateNode;break;default:throw Error(p$7(314))}Vt!==null&&Vt.delete(_e),Zk($,_t)}var Wk;Wk=function($,_e,_t){if($!==null)if($.memoizedProps!==_e.pendingProps||Wf.current)Ug=!0;else{if(!($.lanes&_t)&&!(_e.flags&128))return Ug=!1,zj($,_e,_t);Ug=!!($.flags&131072)}else Ug=!1,I$2&&_e.flags&1048576&&ug(_e,ng,_e.index);switch(_e.lanes=0,_e.tag){case 2:var Vt=_e.type;jj($,_e),$=_e.pendingProps;var Wt=Yf(_e,H$2.current);Tg(_e,_t),Wt=Xh(null,_e,Vt,$,Wt,_t);var _i=bi$3();return _e.flags|=1,typeof Wt=="object"&&Wt!==null&&typeof Wt.render=="function"&&Wt.$$typeof===void 0?(_e.tag=1,_e.memoizedState=null,_e.updateQueue=null,Zf(Vt)?(_i=!0,cg(_e)):_i=!1,_e.memoizedState=Wt.state!==null&&Wt.state!==void 0?Wt.state:null,ah(_e),Wt.updater=nh,_e.stateNode=Wt,Wt._reactInternals=_e,rh(_e,Vt,$,_t),_e=kj(null,_e,Vt,!0,_i,_t)):(_e.tag=0,I$2&&_i&&vg(_e),Yi(null,_e,Wt,_t),_e=_e.child),_e;case 16:Vt=_e.elementType;e:{switch(jj($,_e),$=_e.pendingProps,Wt=Vt._init,Vt=Wt(Vt._payload),_e.type=Vt,Wt=_e.tag=$k(Vt),$=Lg(Vt,$),Wt){case 0:_e=dj(null,_e,Vt,$,_t);break e;case 1:_e=ij(null,_e,Vt,$,_t);break e;case 11:_e=Zi(null,_e,Vt,$,_t);break e;case 14:_e=aj(null,_e,Vt,Lg(Vt.type,$),_t);break e}throw Error(p$7(306,Vt,""))}return _e;case 0:return Vt=_e.type,Wt=_e.pendingProps,Wt=_e.elementType===Vt?Wt:Lg(Vt,Wt),dj($,_e,Vt,Wt,_t);case 1:return Vt=_e.type,Wt=_e.pendingProps,Wt=_e.elementType===Vt?Wt:Lg(Vt,Wt),ij($,_e,Vt,Wt,_t);case 3:e:{if(lj(_e),$===null)throw Error(p$7(387));Vt=_e.pendingProps,_i=_e.memoizedState,Wt=_i.element,bh($,_e),gh(_e,Vt,null,_t);var _s=_e.memoizedState;if(Vt=_s.element,_i.isDehydrated)if(_i={element:Vt,isDehydrated:!1,cache:_s.cache,pendingSuspenseBoundaries:_s.pendingSuspenseBoundaries,transitions:_s.transitions},_e.updateQueue.baseState=_i,_e.memoizedState=_i,_e.flags&256){Wt=Ki(Error(p$7(423)),_e),_e=mj($,_e,Vt,_t,Wt);break e}else if(Vt!==Wt){Wt=Ki(Error(p$7(424)),_e),_e=mj($,_e,Vt,_t,Wt);break e}else for(yg=Lf(_e.stateNode.containerInfo.firstChild),xg=_e,I$2=!0,zg=null,_t=Ch(_e,null,Vt,_t),_e.child=_t;_t;)_t.flags=_t.flags&-3|4096,_t=_t.sibling;else{if(Ig(),Vt===Wt){_e=$i($,_e,_t);break e}Yi($,_e,Vt,_t)}_e=_e.child}return _e;case 5:return Kh(_e),$===null&&Eg(_e),Vt=_e.type,Wt=_e.pendingProps,_i=$!==null?$.memoizedProps:null,_s=Wt.children,Ef(Vt,Wt)?_s=null:_i!==null&&Ef(Vt,_i)&&(_e.flags|=32),hj($,_e),Yi($,_e,_s,_t),_e.child;case 6:return $===null&&Eg(_e),null;case 13:return pj($,_e,_t);case 4:return Ih(_e,_e.stateNode.containerInfo),Vt=_e.pendingProps,$===null?_e.child=Bh(_e,null,Vt,_t):Yi($,_e,Vt,_t),_e.child;case 11:return Vt=_e.type,Wt=_e.pendingProps,Wt=_e.elementType===Vt?Wt:Lg(Vt,Wt),Zi($,_e,Vt,Wt,_t);case 7:return Yi($,_e,_e.pendingProps,_t),_e.child;case 8:return Yi($,_e,_e.pendingProps.children,_t),_e.child;case 12:return Yi($,_e,_e.pendingProps.children,_t),_e.child;case 10:e:{if(Vt=_e.type._context,Wt=_e.pendingProps,_i=_e.memoizedProps,_s=Wt.value,G$1(Mg,Vt._currentValue),Vt._currentValue=_s,_i!==null)if(He(_i.value,_s)){if(_i.children===Wt.children&&!Wf.current){_e=$i($,_e,_t);break e}}else for(_i=_e.child,_i!==null&&(_i.return=_e);_i!==null;){var _c=_i.dependencies;if(_c!==null){_s=_i.child;for(var _l=_c.firstContext;_l!==null;){if(_l.context===Vt){if(_i.tag===1){_l=ch(-1,_t&-_t),_l.tag=2;var _d=_i.updateQueue;if(_d!==null){_d=_d.shared;var _m=_d.pending;_m===null?_l.next=_l:(_l.next=_m.next,_m.next=_l),_d.pending=_l}}_i.lanes|=_t,_l=_i.alternate,_l!==null&&(_l.lanes|=_t),Sg(_i.return,_t,_e),_c.lanes|=_t;break}_l=_l.next}}else if(_i.tag===10)_s=_i.type===_e.type?null:_i.child;else if(_i.tag===18){if(_s=_i.return,_s===null)throw Error(p$7(341));_s.lanes|=_t,_c=_s.alternate,_c!==null&&(_c.lanes|=_t),Sg(_s,_t,_e),_s=_i.sibling}else _s=_i.child;if(_s!==null)_s.return=_i;else for(_s=_i;_s!==null;){if(_s===_e){_s=null;break}if(_i=_s.sibling,_i!==null){_i.return=_s.return,_s=_i;break}_s=_s.return}_i=_s}Yi($,_e,Wt.children,_t),_e=_e.child}return _e;case 9:return Wt=_e.type,Vt=_e.pendingProps.children,Tg(_e,_t),Wt=Vg(Wt),Vt=Vt(Wt),_e.flags|=1,Yi($,_e,Vt,_t),_e.child;case 14:return Vt=_e.type,Wt=Lg(Vt,_e.pendingProps),Wt=Lg(Vt.type,Wt),aj($,_e,Vt,Wt,_t);case 15:return cj($,_e,_e.type,_e.pendingProps,_t);case 17:return Vt=_e.type,Wt=_e.pendingProps,Wt=_e.elementType===Vt?Wt:Lg(Vt,Wt),jj($,_e),_e.tag=1,Zf(Vt)?($=!0,cg(_e)):$=!1,Tg(_e,_t),ph(_e,Vt,Wt),rh(_e,Vt,Wt,_t),kj(null,_e,Vt,!0,$,_t);case 19:return yj($,_e,_t);case 22:return ej($,_e,_t)}throw Error(p$7(156,_e.tag))};function Gk($,_e){return ac($,_e)}function al($,_e,_t,Vt){this.tag=$,this.key=_t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Vt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg($,_e,_t,Vt){return new al($,_e,_t,Vt)}function bj($){return $=$.prototype,!(!$||!$.isReactComponent)}function $k($){if(typeof $=="function")return bj($)?1:0;if($!=null){if($=$.$$typeof,$===Da)return 11;if($===Ga)return 14}return 2}function wh($,_e){var _t=$.alternate;return _t===null?(_t=Bg($.tag,_e,$.key,$.mode),_t.elementType=$.elementType,_t.type=$.type,_t.stateNode=$.stateNode,_t.alternate=$,$.alternate=_t):(_t.pendingProps=_e,_t.type=$.type,_t.flags=0,_t.subtreeFlags=0,_t.deletions=null),_t.flags=$.flags&14680064,_t.childLanes=$.childLanes,_t.lanes=$.lanes,_t.child=$.child,_t.memoizedProps=$.memoizedProps,_t.memoizedState=$.memoizedState,_t.updateQueue=$.updateQueue,_e=$.dependencies,_t.dependencies=_e===null?null:{lanes:_e.lanes,firstContext:_e.firstContext},_t.sibling=$.sibling,_t.index=$.index,_t.ref=$.ref,_t}function yh($,_e,_t,Vt,Wt,_i){var _s=2;if(Vt=$,typeof $=="function")bj($)&&(_s=1);else if(typeof $=="string")_s=5;else e:switch($){case ya:return Ah(_t.children,Wt,_i,_e);case za:_s=8,Wt|=8;break;case Aa:return $=Bg(12,_t,_e,Wt|2),$.elementType=Aa,$.lanes=_i,$;case Ea:return $=Bg(13,_t,_e,Wt),$.elementType=Ea,$.lanes=_i,$;case Fa:return $=Bg(19,_t,_e,Wt),$.elementType=Fa,$.lanes=_i,$;case Ia:return qj(_t,Wt,_i,_e);default:if(typeof $=="object"&&$!==null)switch($.$$typeof){case Ba:_s=10;break e;case Ca:_s=9;break e;case Da:_s=11;break e;case Ga:_s=14;break e;case Ha:_s=16,Vt=null;break e}throw Error(p$7(130,$==null?$:typeof $,""))}return _e=Bg(_s,_t,_e,Wt),_e.elementType=$,_e.type=Vt,_e.lanes=_i,_e}function Ah($,_e,_t,Vt){return $=Bg(7,$,Vt,_e),$.lanes=_t,$}function qj($,_e,_t,Vt){return $=Bg(22,$,Vt,_e),$.elementType=Ia,$.lanes=_t,$.stateNode={isHidden:!1},$}function xh($,_e,_t){return $=Bg(6,$,null,_e),$.lanes=_t,$}function zh$3($,_e,_t){return _e=Bg(4,$.children!==null?$.children:[],$.key,_e),_e.lanes=_t,_e.stateNode={containerInfo:$.containerInfo,pendingChildren:null,implementation:$.implementation},_e}function bl($,_e,_t,Vt,Wt){this.tag=_e,this.containerInfo=$,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=Vt,this.onRecoverableError=Wt,this.mutableSourceEagerHydrationData=null}function cl($,_e,_t,Vt,Wt,_i,_s,_c,_l){return $=new bl($,_e,_t,_c,_l),_e===1?(_e=1,_i===!0&&(_e|=8)):_e=0,_i=Bg(3,null,null,_e),$.current=_i,_i.stateNode=$,_i.memoizedState={element:Vt,isDehydrated:_t,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(_i),$}function dl($,_e,_t){var Vt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:Vt==null?null:""+Vt,children:$,containerInfo:_e,implementation:_t}}function el$3($){if(!$)return Vf;$=$._reactInternals;e:{if(Vb($)!==$||$.tag!==1)throw Error(p$7(170));var _e=$;do{switch(_e.tag){case 3:_e=_e.stateNode.context;break e;case 1:if(Zf(_e.type)){_e=_e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_e=_e.return}while(_e!==null);throw Error(p$7(171))}if($.tag===1){var _t=$.type;if(Zf(_t))return bg$3($,_t,_e)}return _e}function fl($,_e,_t,Vt,Wt,_i,_s,_c,_l){return $=cl(_t,Vt,!0,$,Wt,_i,_s,_c,_l),$.context=el$3(null),_t=$.current,Vt=L$2(),Wt=lh(_t),_i=ch(Vt,Wt),_i.callback=_e??null,dh(_t,_i,Wt),$.current.lanes=Wt,Ac($,Wt,Vt),Ek($,Vt),$}function gl$3($,_e,_t,Vt){var Wt=_e.current,_i=L$2(),_s=lh(Wt);return _t=el$3(_t),_e.context===null?_e.context=_t:_e.pendingContext=_t,_e=ch(_i,_s),_e.payload={element:$},Vt=Vt===void 0?null:Vt,Vt!==null&&(_e.callback=Vt),$=dh(Wt,_e,_s),$!==null&&(mh($,Wt,_s,_i),eh($,Wt,_s)),_s}function hl($){if($=$.current,!$.child)return null;switch($.child.tag){case 5:return $.child.stateNode;default:return $.child.stateNode}}function il($,_e){if($=$.memoizedState,$!==null&&$.dehydrated!==null){var _t=$.retryLane;$.retryLane=_t!==0&&_t<_e?_t:_e}}function jl($,_e){il($,_e),($=$.alternate)&&il($,_e)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function($){console.error($)};function ml$3($){this._internalRoot=$}nl$3.prototype.render=ml$3.prototype.render=function($){var _e=this._internalRoot;if(_e===null)throw Error(p$7(409));gl$3($,_e,null,null)};nl$3.prototype.unmount=ml$3.prototype.unmount=function(){var $=this._internalRoot;if($!==null){this._internalRoot=null;var _e=$.containerInfo;Sk(function(){gl$3(null,$,null,null)}),_e[uf]=null}};function nl$3($){this._internalRoot=$}nl$3.prototype.unstable_scheduleHydration=function($){if($){var _e=Hc();$={blockedOn:null,target:$,priority:_e};for(var _t=0;_t<Qc.length&&_e!==0&&_e<Qc[_t].priority;_t++);Qc.splice(_t,0,$),_t===0&&Vc($)}};function ol($){return!(!$||$.nodeType!==1&&$.nodeType!==9&&$.nodeType!==11)}function pl$3($){return!(!$||$.nodeType!==1&&$.nodeType!==9&&$.nodeType!==11&&($.nodeType!==8||$.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl($,_e,_t,Vt,Wt){if(Wt){if(typeof Vt=="function"){var _i=Vt;Vt=function(){var _d=hl(_s);_i.call(_d)}}var _s=fl(_e,Vt,$,0,null,!1,!1,"",ql);return $._reactRootContainer=_s,$[uf]=_s.current,sf($.nodeType===8?$.parentNode:$),Sk(),_s}for(;Wt=$.lastChild;)$.removeChild(Wt);if(typeof Vt=="function"){var _c=Vt;Vt=function(){var _d=hl(_l);_c.call(_d)}}var _l=cl($,0,!1,null,null,!1,!1,"",ql);return $._reactRootContainer=_l,$[uf]=_l.current,sf($.nodeType===8?$.parentNode:$),Sk(function(){gl$3(_e,_l,_t,Vt)}),_l}function sl$3($,_e,_t,Vt,Wt){var _i=_t._reactRootContainer;if(_i){var _s=_i;if(typeof Wt=="function"){var _c=Wt;Wt=function(){var _l=hl(_s);_c.call(_l)}}gl$3(_e,_s,$,Wt)}else _s=rl(_t,_e,$,Wt,Vt);return hl(_s)}Ec=function($){switch($.tag){case 3:var _e=$.stateNode;if(_e.current.memoizedState.isDehydrated){var _t=tc(_e.pendingLanes);_t!==0&&(Cc(_e,_t|1),Ek(_e,B$2()),!(K&6)&&(Hj=B$2()+500,jg()))}break;case 13:Sk(function(){var Vt=Zg($,1);if(Vt!==null){var Wt=L$2();mh(Vt,$,1,Wt)}}),jl($,1)}};Fc=function($){if($.tag===13){var _e=Zg($,134217728);if(_e!==null){var _t=L$2();mh(_e,$,134217728,_t)}jl($,134217728)}};Gc=function($){if($.tag===13){var _e=lh($),_t=Zg($,_e);if(_t!==null){var Vt=L$2();mh(_t,$,_e,Vt)}jl($,_e)}};Hc=function(){return C$1};Ic=function($,_e){var _t=C$1;try{return C$1=$,_e()}finally{C$1=_t}};yb=function($,_e,_t){switch(_e){case"input":if(bb($,_t),_e=_t.name,_t.type==="radio"&&_e!=null){for(_t=$;_t.parentNode;)_t=_t.parentNode;for(_t=_t.querySelectorAll("input[name="+JSON.stringify(""+_e)+'][type="radio"]'),_e=0;_e<_t.length;_e++){var Vt=_t[_e];if(Vt!==$&&Vt.form===$.form){var Wt=Db(Vt);if(!Wt)throw Error(p$7(90));Wa(Vt),bb(Vt,Wt)}}}break;case"textarea":ib($,_t);break;case"select":_e=_t.value,_e!=null&&fb($,!!_t.multiple,_e,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function($){return $=Zb($),$===null?null:$.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function($,_e){var _t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(_e))throw Error(p$7(200));return dl($,_e,null,_t)};reactDom_production_min.createRoot=function($,_e){if(!ol($))throw Error(p$7(299));var _t=!1,Vt="",Wt=ll;return _e!=null&&(_e.unstable_strictMode===!0&&(_t=!0),_e.identifierPrefix!==void 0&&(Vt=_e.identifierPrefix),_e.onRecoverableError!==void 0&&(Wt=_e.onRecoverableError)),_e=cl($,1,!1,null,null,_t,!1,Vt,Wt),$[uf]=_e.current,sf($.nodeType===8?$.parentNode:$),new ml$3(_e)};reactDom_production_min.findDOMNode=function($){if($==null)return null;if($.nodeType===1)return $;var _e=$._reactInternals;if(_e===void 0)throw typeof $.render=="function"?Error(p$7(188)):($=Object.keys($).join(","),Error(p$7(268,$)));return $=Zb(_e),$=$===null?null:$.stateNode,$};reactDom_production_min.flushSync=function($){return Sk($)};reactDom_production_min.hydrate=function($,_e,_t){if(!pl$3(_e))throw Error(p$7(200));return sl$3(null,$,_e,!0,_t)};reactDom_production_min.hydrateRoot=function($,_e,_t){if(!ol($))throw Error(p$7(405));var Vt=_t!=null&&_t.hydratedSources||null,Wt=!1,_i="",_s=ll;if(_t!=null&&(_t.unstable_strictMode===!0&&(Wt=!0),_t.identifierPrefix!==void 0&&(_i=_t.identifierPrefix),_t.onRecoverableError!==void 0&&(_s=_t.onRecoverableError)),_e=fl(_e,null,$,1,_t??null,Wt,!1,_i,_s),$[uf]=_e.current,sf($),Vt)for($=0;$<Vt.length;$++)_t=Vt[$],Wt=_t._getVersion,Wt=Wt(_t._source),_e.mutableSourceEagerHydrationData==null?_e.mutableSourceEagerHydrationData=[_t,Wt]:_e.mutableSourceEagerHydrationData.push(_t,Wt);return new nl$3(_e)};reactDom_production_min.render=function($,_e,_t){if(!pl$3(_e))throw Error(p$7(200));return sl$3(null,$,_e,!1,_t)};reactDom_production_min.unmountComponentAtNode=function($){if(!pl$3($))throw Error(p$7(40));return $._reactRootContainer?(Sk(function(){sl$3(null,null,$,!1,function(){$._reactRootContainer=null,$[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function($,_e,_t,Vt){if(!pl$3(_t))throw Error(p$7(200));if($==null||$._reactInternals===void 0)throw Error(p$7(38));return sl$3($,_e,_t,!1,Vt)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";(function($){function _e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_e)}catch(_t){console.error(_t)}}_e(),$.exports=reactDom_production_min})(reactDom);var m$6=reactDomExports;client.createRoot=m$6.createRoot,client.hydrateRoot=m$6.hydrateRoot;var shimExports={},shim$1={get exports(){return shimExports},set exports($){shimExports=$}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e$2=reactExports;function h$6($,_e){return $===_e&&($!==0||1/$===1/_e)||$!==$&&_e!==_e}var k$4=typeof Object.is=="function"?Object.is:h$6,l$4=e$2.useState,m$5=e$2.useEffect,n$4=e$2.useLayoutEffect,p$6=e$2.useDebugValue;function q$5($,_e){var _t=_e(),Vt=l$4({inst:{value:_t,getSnapshot:_e}}),Wt=Vt[0].inst,_i=Vt[1];return n$4(function(){Wt.value=_t,Wt.getSnapshot=_e,r$4(Wt)&&_i({inst:Wt})},[$,_t,_e]),m$5(function(){return r$4(Wt)&&_i({inst:Wt}),$(function(){r$4(Wt)&&_i({inst:Wt})})},[$]),p$6(_t),_t}function r$4($){var _e=$.getSnapshot;$=$.value;try{var _t=_e();return!k$4($,_t)}catch{return!0}}function t$4($,_e){return _e()}var u$5=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$4:q$5;useSyncExternalStoreShim_production_min.useSyncExternalStore=e$2.useSyncExternalStore!==void 0?e$2.useSyncExternalStore:u$5;(function($){$.exports=useSyncExternalStoreShim_production_min})(shim$1);var withSelectorExports={},withSelector={get exports(){return withSelectorExports},set exports($){withSelectorExports=$}},withSelector_production_min={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h$5=reactExports,n$3=shimExports;function p$5($,_e){return $===_e&&($!==0||1/$===1/_e)||$!==$&&_e!==_e}var q$4=typeof Object.is=="function"?Object.is:p$5,r$3=n$3.useSyncExternalStore,t$3=h$5.useRef,u$4=h$5.useEffect,v$5=h$5.useMemo,w$2=h$5.useDebugValue;withSelector_production_min.useSyncExternalStoreWithSelector=function($,_e,_t,Vt,Wt){var _i=t$3(null);if(_i.current===null){var _s={hasValue:!1,value:null};_i.current=_s}else _s=_i.current;_i=v$5(function(){function _l(i_){if(!_d){if(_d=!0,_m=i_,i_=Vt(i_),Wt!==void 0&&_s.hasValue){var c_=_s.value;if(Wt(c_,i_))return e_=c_}return e_=i_}if(c_=e_,q$4(_m,i_))return c_;var h_=Vt(i_);return Wt!==void 0&&Wt(c_,h_)?c_:(_m=i_,e_=h_)}var _d=!1,_m,e_,t_=_t===void 0?null:_t;return[function(){return _l(_e())},t_===null?void 0:function(){return _l(t_())}]},[_e,_t,Vt,Wt]);var _c=r$3($,_i[0],_i[1]);return u$4(function(){_s.hasValue=!0,_s.value=_c},[_c]),w$2(_c),_c};(function($){$.exports=withSelector_production_min})(withSelector);function defaultNoopBatch($){$()}let batch=defaultNoopBatch;const setBatch=$=>batch=$,getBatch=()=>batch,ReactReduxContext=reactExports.createContext(null);function useReduxContext(){return reactExports.useContext(ReactReduxContext)}const notInitialized=()=>{throw new Error("uSES not initialized!")};let useSyncExternalStoreWithSelector=notInitialized;const initializeUseSelector=$=>{useSyncExternalStoreWithSelector=$},refEquality=($,_e)=>$===_e;function createSelectorHook($=ReactReduxContext){const _e=$===ReactReduxContext?useReduxContext:()=>reactExports.useContext($);return function(Vt,Wt=refEquality){const{store:_i,subscription:_s,getServerState:_c}=_e(),_l=useSyncExternalStoreWithSelector(_s.addNestedSub,_i.getState,_c||_i.getState,Vt,Wt);return reactExports.useDebugValue(_l),_l}}const useSelector=createSelectorHook();var reactIsExports$1={},reactIs$2={get exports(){return reactIsExports$1},set exports($){reactIsExports$1=$}},reactIs_production_min$1={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$4=typeof Symbol=="function"&&Symbol.for,c$3=b$4?Symbol.for("react.element"):60103,d$4=b$4?Symbol.for("react.portal"):60106,e$1=b$4?Symbol.for("react.fragment"):60107,f$4=b$4?Symbol.for("react.strict_mode"):60108,g$3=b$4?Symbol.for("react.profiler"):60114,h$4=b$4?Symbol.for("react.provider"):60109,k$3=b$4?Symbol.for("react.context"):60110,l$3=b$4?Symbol.for("react.async_mode"):60111,m$4=b$4?Symbol.for("react.concurrent_mode"):60111,n$2=b$4?Symbol.for("react.forward_ref"):60112,p$4=b$4?Symbol.for("react.suspense"):60113,q$3=b$4?Symbol.for("react.suspense_list"):60120,r$2=b$4?Symbol.for("react.memo"):60115,t$2=b$4?Symbol.for("react.lazy"):60116,v$4=b$4?Symbol.for("react.block"):60121,w$1=b$4?Symbol.for("react.fundamental"):60117,x$1=b$4?Symbol.for("react.responder"):60118,y$3=b$4?Symbol.for("react.scope"):60119;function z$2($){if(typeof $=="object"&&$!==null){var _e=$.$$typeof;switch(_e){case c$3:switch($=$.type,$){case l$3:case m$4:case e$1:case g$3:case f$4:case p$4:return $;default:switch($=$&&$.$$typeof,$){case k$3:case n$2:case t$2:case r$2:case h$4:return $;default:return _e}}case d$4:return _e}}}function A$2($){return z$2($)===m$4}reactIs_production_min$1.AsyncMode=l$3;reactIs_production_min$1.ConcurrentMode=m$4;reactIs_production_min$1.ContextConsumer=k$3;reactIs_production_min$1.ContextProvider=h$4;reactIs_production_min$1.Element=c$3;reactIs_production_min$1.ForwardRef=n$2;reactIs_production_min$1.Fragment=e$1;reactIs_production_min$1.Lazy=t$2;reactIs_production_min$1.Memo=r$2;reactIs_production_min$1.Portal=d$4;reactIs_production_min$1.Profiler=g$3;reactIs_production_min$1.StrictMode=f$4;reactIs_production_min$1.Suspense=p$4;reactIs_production_min$1.isAsyncMode=function($){return A$2($)||z$2($)===l$3};reactIs_production_min$1.isConcurrentMode=A$2;reactIs_production_min$1.isContextConsumer=function($){return z$2($)===k$3};reactIs_production_min$1.isContextProvider=function($){return z$2($)===h$4};reactIs_production_min$1.isElement=function($){return typeof $=="object"&&$!==null&&$.$$typeof===c$3};reactIs_production_min$1.isForwardRef=function($){return z$2($)===n$2};reactIs_production_min$1.isFragment=function($){return z$2($)===e$1};reactIs_production_min$1.isLazy=function($){return z$2($)===t$2};reactIs_production_min$1.isMemo=function($){return z$2($)===r$2};reactIs_production_min$1.isPortal=function($){return z$2($)===d$4};reactIs_production_min$1.isProfiler=function($){return z$2($)===g$3};reactIs_production_min$1.isStrictMode=function($){return z$2($)===f$4};reactIs_production_min$1.isSuspense=function($){return z$2($)===p$4};reactIs_production_min$1.isValidElementType=function($){return typeof $=="string"||typeof $=="function"||$===e$1||$===m$4||$===g$3||$===f$4||$===p$4||$===q$3||typeof $=="object"&&$!==null&&($.$$typeof===t$2||$.$$typeof===r$2||$.$$typeof===h$4||$.$$typeof===k$3||$.$$typeof===n$2||$.$$typeof===w$1||$.$$typeof===x$1||$.$$typeof===y$3||$.$$typeof===v$4)};reactIs_production_min$1.typeOf=z$2;(function($){$.exports=reactIs_production_min$1})(reactIs$2);var reactIs$1=reactIsExports$1,FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs$1.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs$1.Memo]=MEMO_STATICS;var reactIsExports={},reactIs={get exports(){return reactIsExports},set exports($){reactIsExports=$}},reactIs_production_min={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$3=Symbol.for("react.element"),c$2=Symbol.for("react.portal"),d$3=Symbol.for("react.fragment"),e=Symbol.for("react.strict_mode"),f$3=Symbol.for("react.profiler"),g$2=Symbol.for("react.provider"),h$3=Symbol.for("react.context"),k$2=Symbol.for("react.server_context"),l$2=Symbol.for("react.forward_ref"),m$3=Symbol.for("react.suspense"),n$1=Symbol.for("react.suspense_list"),p$3=Symbol.for("react.memo"),q$2=Symbol.for("react.lazy"),t$1=Symbol.for("react.offscreen"),u$3;u$3=Symbol.for("react.module.reference");function v$3($){if(typeof $=="object"&&$!==null){var _e=$.$$typeof;switch(_e){case b$3:switch($=$.type,$){case d$3:case f$3:case e:case m$3:case n$1:return $;default:switch($=$&&$.$$typeof,$){case k$2:case h$3:case l$2:case q$2:case p$3:case g$2:return $;default:return _e}}case c$2:return _e}}}reactIs_production_min.ContextConsumer=h$3;reactIs_production_min.ContextProvider=g$2;reactIs_production_min.Element=b$3;reactIs_production_min.ForwardRef=l$2;reactIs_production_min.Fragment=d$3;reactIs_production_min.Lazy=q$2;reactIs_production_min.Memo=p$3;reactIs_production_min.Portal=c$2;reactIs_production_min.Profiler=f$3;reactIs_production_min.StrictMode=e;reactIs_production_min.Suspense=m$3;reactIs_production_min.SuspenseList=n$1;reactIs_production_min.isAsyncMode=function(){return!1};reactIs_production_min.isConcurrentMode=function(){return!1};reactIs_production_min.isContextConsumer=function($){return v$3($)===h$3};reactIs_production_min.isContextProvider=function($){return v$3($)===g$2};reactIs_production_min.isElement=function($){return typeof $=="object"&&$!==null&&$.$$typeof===b$3};reactIs_production_min.isForwardRef=function($){return v$3($)===l$2};reactIs_production_min.isFragment=function($){return v$3($)===d$3};reactIs_production_min.isLazy=function($){return v$3($)===q$2};reactIs_production_min.isMemo=function($){return v$3($)===p$3};reactIs_production_min.isPortal=function($){return v$3($)===c$2};reactIs_production_min.isProfiler=function($){return v$3($)===f$3};reactIs_production_min.isStrictMode=function($){return v$3($)===e};reactIs_production_min.isSuspense=function($){return v$3($)===m$3};reactIs_production_min.isSuspenseList=function($){return v$3($)===n$1};reactIs_production_min.isValidElementType=function($){return typeof $=="string"||typeof $=="function"||$===d$3||$===f$3||$===e||$===m$3||$===n$1||$===t$1||typeof $=="object"&&$!==null&&($.$$typeof===q$2||$.$$typeof===p$3||$.$$typeof===g$2||$.$$typeof===h$3||$.$$typeof===l$2||$.$$typeof===u$3||$.getModuleId!==void 0)};reactIs_production_min.typeOf=v$3;(function($){$.exports=reactIs_production_min})(reactIs);function createListenerCollection(){const $=getBatch();let _e=null,_t=null;return{clear(){_e=null,_t=null},notify(){$(()=>{let Vt=_e;for(;Vt;)Vt.callback(),Vt=Vt.next})},get(){let Vt=[],Wt=_e;for(;Wt;)Vt.push(Wt),Wt=Wt.next;return Vt},subscribe(Vt){let Wt=!0,_i=_t={callback:Vt,next:null,prev:_t};return _i.prev?_i.prev.next=_i:_e=_i,function(){!Wt||_e===null||(Wt=!1,_i.next?_i.next.prev=_i.prev:_t=_i.prev,_i.prev?_i.prev.next=_i.next:_e=_i.next)}}}}const nullListeners={notify(){},get:()=>[]};function createSubscription($,_e){let _t,Vt=nullListeners;function Wt(e_){return _l(),Vt.subscribe(e_)}function _i(){Vt.notify()}function _s(){_m.onStateChange&&_m.onStateChange()}function _c(){return!!_t}function _l(){_t||(_t=_e?_e.addNestedSub(_s):$.subscribe(_s),Vt=createListenerCollection())}function _d(){_t&&(_t(),_t=void 0,Vt.clear(),Vt=nullListeners)}const _m={addNestedSub:Wt,notifyNestedSubs:_i,handleChangeWrapper:_s,isSubscribed:_c,trySubscribe:_l,tryUnsubscribe:_d,getListeners:()=>Vt};return _m}const canUseDOM$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",useIsomorphicLayoutEffect$1=canUseDOM$1?reactExports.useLayoutEffect:reactExports.useEffect;function is$4($,_e){return $===_e?$!==0||_e!==0||1/$===1/_e:$!==$&&_e!==_e}function shallowEqual($,_e){if(is$4($,_e))return!0;if(typeof $!="object"||$===null||typeof _e!="object"||_e===null)return!1;const _t=Object.keys($),Vt=Object.keys(_e);if(_t.length!==Vt.length)return!1;for(let Wt=0;Wt<_t.length;Wt++)if(!Object.prototype.hasOwnProperty.call(_e,_t[Wt])||!is$4($[_t[Wt]],_e[_t[Wt]]))return!1;return!0}function Provider$1({store:$,context:_e,children:_t,serverState:Vt}){const Wt=reactExports.useMemo(()=>{const _c=createSubscription($);return{store:$,subscription:_c,getServerState:Vt?()=>Vt:void 0}},[$,Vt]),_i=reactExports.useMemo(()=>$.getState(),[$]);useIsomorphicLayoutEffect$1(()=>{const{subscription:_c}=Wt;return _c.onStateChange=_c.notifyNestedSubs,_c.trySubscribe(),_i!==$.getState()&&_c.notifyNestedSubs(),()=>{_c.tryUnsubscribe(),_c.onStateChange=void 0}},[Wt,_i]);const _s=_e||ReactReduxContext;return React.createElement(_s.Provider,{value:Wt},_t)}function createStoreHook($=ReactReduxContext){const _e=$===ReactReduxContext?useReduxContext:()=>reactExports.useContext($);return function(){const{store:Vt}=_e();return Vt}}const useStore=createStoreHook();function createDispatchHook($=ReactReduxContext){const _e=$===ReactReduxContext?useStore:createStoreHook($);return function(){return _e().dispatch}}const useDispatch=createDispatchHook();initializeUseSelector(withSelectorExports.useSyncExternalStoreWithSelector);setBatch(reactDomExports.unstable_batchedUpdates);/**
 * @remix-run/router v1.4.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function($){for(var _e=1;_e<arguments.length;_e++){var _t=arguments[_e];for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&($[Vt]=_t[Vt])}return $},_extends$5.apply(this,arguments)}var Action;(function($){$.Pop="POP",$.Push="PUSH",$.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory($){$===void 0&&($={});function _e(Vt,Wt){let{pathname:_i,search:_s,hash:_c}=Vt.location;return createLocation("",{pathname:_i,search:_s,hash:_c},Wt.state&&Wt.state.usr||null,Wt.state&&Wt.state.key||"default")}function _t(Vt,Wt){return typeof Wt=="string"?Wt:createPath(Wt)}return getUrlBasedHistory(_e,_t,null,$)}function invariant($,_e){if($===!1||$===null||typeof $>"u")throw new Error(_e)}function warning($,_e){if(!$){typeof console<"u"&&console.warn(_e);try{throw new Error(_e)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState($,_e){return{usr:$.state,key:$.key,idx:_e}}function createLocation($,_e,_t,Vt){return _t===void 0&&(_t=null),_extends$5({pathname:typeof $=="string"?$:$.pathname,search:"",hash:""},typeof _e=="string"?parsePath(_e):_e,{state:_t,key:_e&&_e.key||Vt||createKey()})}function createPath($){let{pathname:_e="/",search:_t="",hash:Vt=""}=$;return _t&&_t!=="?"&&(_e+=_t.charAt(0)==="?"?_t:"?"+_t),Vt&&Vt!=="#"&&(_e+=Vt.charAt(0)==="#"?Vt:"#"+Vt),_e}function parsePath($){let _e={};if($){let _t=$.indexOf("#");_t>=0&&(_e.hash=$.substr(_t),$=$.substr(0,_t));let Vt=$.indexOf("?");Vt>=0&&(_e.search=$.substr(Vt),$=$.substr(0,Vt)),$&&(_e.pathname=$)}return _e}function getUrlBasedHistory($,_e,_t,Vt){Vt===void 0&&(Vt={});let{window:Wt=document.defaultView,v5Compat:_i=!1}=Vt,_s=Wt.history,_c=Action.Pop,_l=null,_d=_m();_d==null&&(_d=0,_s.replaceState(_extends$5({},_s.state,{idx:_d}),""));function _m(){return(_s.state||{idx:null}).idx}function e_(){_c=Action.Pop;let y_=_m(),l_=y_==null?null:y_-_d;_d=y_,_l&&_l({action:_c,location:h_.location,delta:l_})}function t_(y_,l_){_c=Action.Push;let d_=createLocation(h_.location,y_,l_);_t&&_t(d_,y_),_d=_m()+1;let f_=getHistoryState(d_,_d),S_=h_.createHref(d_);try{_s.pushState(f_,"",S_)}catch{Wt.location.assign(S_)}_i&&_l&&_l({action:_c,location:h_.location,delta:1})}function i_(y_,l_){_c=Action.Replace;let d_=createLocation(h_.location,y_,l_);_t&&_t(d_,y_),_d=_m();let f_=getHistoryState(d_,_d),S_=h_.createHref(d_);_s.replaceState(f_,"",S_),_i&&_l&&_l({action:_c,location:h_.location,delta:0})}function c_(y_){let l_=Wt.location.origin!=="null"?Wt.location.origin:Wt.location.href,d_=typeof y_=="string"?y_:createPath(y_);return invariant(l_,"No window.location.(origin|href) available to create URL for href: "+d_),new URL(d_,l_)}let h_={get action(){return _c},get location(){return $(Wt,_s)},listen(y_){if(_l)throw new Error("A history only accepts one active listener");return Wt.addEventListener(PopStateEventType,e_),_l=y_,()=>{Wt.removeEventListener(PopStateEventType,e_),_l=null}},createHref(y_){return _e(Wt,y_)},createURL:c_,encodeLocation(y_){let l_=c_(y_);return{pathname:l_.pathname,search:l_.search,hash:l_.hash}},push:t_,replace:i_,go(y_){return _s.go(y_)}};return h_}var ResultType;(function($){$.data="data",$.deferred="deferred",$.redirect="redirect",$.error="error"})(ResultType||(ResultType={}));function matchRoutes($,_e,_t){_t===void 0&&(_t="/");let Vt=typeof _e=="string"?parsePath(_e):_e,Wt=stripBasename(Vt.pathname||"/",_t);if(Wt==null)return null;let _i=flattenRoutes($);rankRouteBranches(_i);let _s=null;for(let _c=0;_s==null&&_c<_i.length;++_c)_s=matchRouteBranch(_i[_c],safelyDecodeURI(Wt));return _s}function flattenRoutes($,_e,_t,Vt){_e===void 0&&(_e=[]),_t===void 0&&(_t=[]),Vt===void 0&&(Vt="");let Wt=(_i,_s,_c)=>{let _l={relativePath:_c===void 0?_i.path||"":_c,caseSensitive:_i.caseSensitive===!0,childrenIndex:_s,route:_i};_l.relativePath.startsWith("/")&&(invariant(_l.relativePath.startsWith(Vt),'Absolute route path "'+_l.relativePath+'" nested under path '+('"'+Vt+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),_l.relativePath=_l.relativePath.slice(Vt.length));let _d=joinPaths([Vt,_l.relativePath]),_m=_t.concat(_l);_i.children&&_i.children.length>0&&(invariant(_i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+_d+'".')),flattenRoutes(_i.children,_e,_m,_d)),!(_i.path==null&&!_i.index)&&_e.push({path:_d,score:computeScore(_d,_i.index),routesMeta:_m})};return $.forEach((_i,_s)=>{var _c;if(_i.path===""||!((_c=_i.path)!=null&&_c.includes("?")))Wt(_i,_s);else for(let _l of explodeOptionalSegments(_i.path))Wt(_i,_s,_l)}),_e}function explodeOptionalSegments($){let _e=$.split("/");if(_e.length===0)return[];let[_t,...Vt]=_e,Wt=_t.endsWith("?"),_i=_t.replace(/\?$/,"");if(Vt.length===0)return Wt?[_i,""]:[_i];let _s=explodeOptionalSegments(Vt.join("/")),_c=[];return _c.push(..._s.map(_l=>_l===""?_i:[_i,_l].join("/"))),Wt&&_c.push(..._s),_c.map(_l=>$.startsWith("/")&&_l===""?"/":_l)}function rankRouteBranches($){$.sort((_e,_t)=>_e.score!==_t.score?_t.score-_e.score:compareIndexes(_e.routesMeta.map(Vt=>Vt.childrenIndex),_t.routesMeta.map(Vt=>Vt.childrenIndex)))}const paramRe=/^:\w+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=$=>$==="*";function computeScore($,_e){let _t=$.split("/"),Vt=_t.length;return _t.some(isSplat)&&(Vt+=splatPenalty),_e&&(Vt+=indexRouteValue),_t.filter(Wt=>!isSplat(Wt)).reduce((Wt,_i)=>Wt+(paramRe.test(_i)?dynamicSegmentValue:_i===""?emptySegmentValue:staticSegmentValue),Vt)}function compareIndexes($,_e){return $.length===_e.length&&$.slice(0,-1).every((Vt,Wt)=>Vt===_e[Wt])?$[$.length-1]-_e[_e.length-1]:0}function matchRouteBranch($,_e){let{routesMeta:_t}=$,Vt={},Wt="/",_i=[];for(let _s=0;_s<_t.length;++_s){let _c=_t[_s],_l=_s===_t.length-1,_d=Wt==="/"?_e:_e.slice(Wt.length)||"/",_m=matchPath({path:_c.relativePath,caseSensitive:_c.caseSensitive,end:_l},_d);if(!_m)return null;Object.assign(Vt,_m.params);let e_=_c.route;_i.push({params:Vt,pathname:joinPaths([Wt,_m.pathname]),pathnameBase:normalizePathname(joinPaths([Wt,_m.pathnameBase])),route:e_}),_m.pathnameBase!=="/"&&(Wt=joinPaths([Wt,_m.pathnameBase]))}return _i}function matchPath($,_e){typeof $=="string"&&($={path:$,caseSensitive:!1,end:!0});let[_t,Vt]=compilePath($.path,$.caseSensitive,$.end),Wt=_e.match(_t);if(!Wt)return null;let _i=Wt[0],_s=_i.replace(/(.)\/+$/,"$1"),_c=Wt.slice(1);return{params:Vt.reduce((_d,_m,e_)=>{if(_m==="*"){let t_=_c[e_]||"";_s=_i.slice(0,_i.length-t_.length).replace(/(.)\/+$/,"$1")}return _d[_m]=safelyDecodeURIComponent(_c[e_]||"",_m),_d},{}),pathname:_i,pathnameBase:_s,pattern:$}}function compilePath($,_e,_t){_e===void 0&&(_e=!1),_t===void 0&&(_t=!0),warning($==="*"||!$.endsWith("*")||$.endsWith("/*"),'Route path "'+$+'" will be treated as if it were '+('"'+$.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+$.replace(/\*$/,"/*")+'".'));let Vt=[],Wt="^"+$.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(_s,_c)=>(Vt.push(_c),"/([^\\/]+)"));return $.endsWith("*")?(Vt.push("*"),Wt+=$==="*"||$==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):_t?Wt+="\\/*$":$!==""&&$!=="/"&&(Wt+="(?:(?=\\/|$))"),[new RegExp(Wt,_e?void 0:"i"),Vt]}function safelyDecodeURI($){try{return decodeURI($)}catch(_e){return warning(!1,'The URL path "'+$+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+_e+").")),$}}function safelyDecodeURIComponent($,_e){try{return decodeURIComponent($)}catch(_t){return warning(!1,'The value for the URL param "'+_e+'" will not be decoded because'+(' the string "'+$+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+_t+").")),$}}function stripBasename($,_e){if(_e==="/")return $;if(!$.toLowerCase().startsWith(_e.toLowerCase()))return null;let _t=_e.endsWith("/")?_e.length-1:_e.length,Vt=$.charAt(_t);return Vt&&Vt!=="/"?null:$.slice(_t)||"/"}function resolvePath($,_e){_e===void 0&&(_e="/");let{pathname:_t,search:Vt="",hash:Wt=""}=typeof $=="string"?parsePath($):$;return{pathname:_t?_t.startsWith("/")?_t:resolvePathname(_t,_e):_e,search:normalizeSearch(Vt),hash:normalizeHash(Wt)}}function resolvePathname($,_e){let _t=_e.replace(/\/+$/,"").split("/");return $.split("/").forEach(Wt=>{Wt===".."?_t.length>1&&_t.pop():Wt!=="."&&_t.push(Wt)}),_t.length>1?_t.join("/"):"/"}function getInvalidPathError($,_e,_t,Vt){return"Cannot include a '"+$+"' character in a manually specified "+("`to."+_e+"` field ["+JSON.stringify(Vt)+"].  Please separate it out to the ")+("`to."+_t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches($){return $.filter((_e,_t)=>_t===0||_e.route.path&&_e.route.path.length>0)}function resolveTo($,_e,_t,Vt){Vt===void 0&&(Vt=!1);let Wt;typeof $=="string"?Wt=parsePath($):(Wt=_extends$5({},$),invariant(!Wt.pathname||!Wt.pathname.includes("?"),getInvalidPathError("?","pathname","search",Wt)),invariant(!Wt.pathname||!Wt.pathname.includes("#"),getInvalidPathError("#","pathname","hash",Wt)),invariant(!Wt.search||!Wt.search.includes("#"),getInvalidPathError("#","search","hash",Wt)));let _i=$===""||Wt.pathname==="",_s=_i?"/":Wt.pathname,_c;if(Vt||_s==null)_c=_t;else{let e_=_e.length-1;if(_s.startsWith("..")){let t_=_s.split("/");for(;t_[0]==="..";)t_.shift(),e_-=1;Wt.pathname=t_.join("/")}_c=e_>=0?_e[e_]:"/"}let _l=resolvePath(Wt,_c),_d=_s&&_s!=="/"&&_s.endsWith("/"),_m=(_i||_s===".")&&_t.endsWith("/");return!_l.pathname.endsWith("/")&&(_d||_m)&&(_l.pathname+="/"),_l}const joinPaths=$=>$.join("/").replace(/\/\/+/g,"/"),normalizePathname=$=>$.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=$=>!$||$==="?"?"":$.startsWith("?")?$:"?"+$,normalizeHash=$=>!$||$==="#"?"":$.startsWith("#")?$:"#"+$;function isRouteErrorResponse($){return $!=null&&typeof $.status=="number"&&typeof $.statusText=="string"&&typeof $.internal=="boolean"&&"data"in $}/**
 * React Router v6.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function isPolyfill($,_e){return $===_e&&($!==0||1/$===1/_e)||$!==$&&_e!==_e}const is$3=typeof Object.is=="function"?Object.is:isPolyfill,{useState,useEffect,useLayoutEffect,useDebugValue}=React$1;function useSyncExternalStore$2($,_e,_t){const Vt=_e(),[{inst:Wt},_i]=useState({inst:{value:Vt,getSnapshot:_e}});return useLayoutEffect(()=>{Wt.value=Vt,Wt.getSnapshot=_e,checkIfSnapshotChanged(Wt)&&_i({inst:Wt})},[$,Vt,_e]),useEffect(()=>(checkIfSnapshotChanged(Wt)&&_i({inst:Wt}),$(()=>{checkIfSnapshotChanged(Wt)&&_i({inst:Wt})})),[$]),useDebugValue(Vt),Vt}function checkIfSnapshotChanged($){const _e=$.getSnapshot,_t=$.value;try{const Vt=_e();return!is$3(_t,Vt)}catch{return!0}}function useSyncExternalStore$1($,_e,_t){return _e()}const canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",isServerEnvironment=!canUseDOM,shim=isServerEnvironment?useSyncExternalStore$1:useSyncExternalStore$2;"useSyncExternalStore"in React$1&&($=>$.useSyncExternalStore)(React$1);const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[]}),RouteErrorContext=reactExports.createContext(null);function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function($){for(var _e=1;_e<arguments.length;_e++){var _t=arguments[_e];for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&($[Vt]=_t[Vt])}return $},_extends$4.apply(this,arguments)}function useHref($,_e){let{relative:_t}=_e===void 0?{}:_e;useInRouterContext()||invariant(!1);let{basename:Vt,navigator:Wt}=reactExports.useContext(NavigationContext),{hash:_i,pathname:_s,search:_c}=useResolvedPath($,{relative:_t}),_l=_s;return Vt!=="/"&&(_l=_s==="/"?Vt:joinPaths([Vt,_s])),Wt.createHref({pathname:_l,search:_c,hash:_i})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useNavigate(){useInRouterContext()||invariant(!1);let{basename:$,navigator:_e}=reactExports.useContext(NavigationContext),{matches:_t}=reactExports.useContext(RouteContext),{pathname:Vt}=useLocation(),Wt=JSON.stringify(getPathContributingMatches(_t).map(_c=>_c.pathnameBase)),_i=reactExports.useRef(!1);return reactExports.useEffect(()=>{_i.current=!0}),reactExports.useCallback(function(_c,_l){if(_l===void 0&&(_l={}),!_i.current)return;if(typeof _c=="number"){_e.go(_c);return}let _d=resolveTo(_c,JSON.parse(Wt),Vt,_l.relative==="path");$!=="/"&&(_d.pathname=_d.pathname==="/"?$:joinPaths([$,_d.pathname])),(_l.replace?_e.replace:_e.push)(_d,_l.state,_l)},[$,_e,Wt,Vt])}function useParams(){let{matches:$}=reactExports.useContext(RouteContext),_e=$[$.length-1];return _e?_e.params:{}}function useResolvedPath($,_e){let{relative:_t}=_e===void 0?{}:_e,{matches:Vt}=reactExports.useContext(RouteContext),{pathname:Wt}=useLocation(),_i=JSON.stringify(getPathContributingMatches(Vt).map(_s=>_s.pathnameBase));return reactExports.useMemo(()=>resolveTo($,JSON.parse(_i),Wt,_t==="path"),[$,_i,Wt,_t])}function useRoutes($,_e){useInRouterContext()||invariant(!1);let{navigator:_t}=reactExports.useContext(NavigationContext),Vt=reactExports.useContext(DataRouterStateContext),{matches:Wt}=reactExports.useContext(RouteContext),_i=Wt[Wt.length-1],_s=_i?_i.params:{};_i&&_i.pathname;let _c=_i?_i.pathnameBase:"/";_i&&_i.route;let _l=useLocation(),_d;if(_e){var _m;let h_=typeof _e=="string"?parsePath(_e):_e;_c==="/"||(_m=h_.pathname)!=null&&_m.startsWith(_c)||invariant(!1),_d=h_}else _d=_l;let e_=_d.pathname||"/",t_=_c==="/"?e_:e_.slice(_c.length)||"/",i_=matchRoutes($,{pathname:t_}),c_=_renderMatches(i_&&i_.map(h_=>Object.assign({},h_,{params:Object.assign({},_s,h_.params),pathname:joinPaths([_c,_t.encodeLocation?_t.encodeLocation(h_.pathname).pathname:h_.pathname]),pathnameBase:h_.pathnameBase==="/"?_c:joinPaths([_c,_t.encodeLocation?_t.encodeLocation(h_.pathnameBase).pathname:h_.pathnameBase])})),Wt,Vt||void 0);return _e&&c_?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$4({pathname:"/",search:"",hash:"",state:null,key:"default"},_d),navigationType:Action.Pop}},c_):c_}function DefaultErrorComponent(){let $=useRouteError(),_e=isRouteErrorResponse($)?$.status+" "+$.statusText:$ instanceof Error?$.message:JSON.stringify($),_t=$ instanceof Error?$.stack:null,Wt={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},_i=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},_e),_t?reactExports.createElement("pre",{style:Wt},_t):null,_i)}class RenderErrorBoundary extends reactExports.Component{constructor(_e){super(_e),this.state={location:_e.location,error:_e.error}}static getDerivedStateFromError(_e){return{error:_e}}static getDerivedStateFromProps(_e,_t){return _t.location!==_e.location?{error:_e.error,location:_e.location}:{error:_e.error||_t.error,location:_t.location}}componentDidCatch(_e,_t){console.error("React Router caught the following error during render",_e,_t)}render(){return this.state.error?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute($){let{routeContext:_e,match:_t,children:Vt}=$,Wt=reactExports.useContext(DataRouterContext);return Wt&&Wt.static&&Wt.staticContext&&(_t.route.errorElement||_t.route.ErrorBoundary)&&(Wt.staticContext._deepestRenderedBoundaryId=_t.route.id),reactExports.createElement(RouteContext.Provider,{value:_e},Vt)}function _renderMatches($,_e,_t){if(_e===void 0&&(_e=[]),$==null)if(_t!=null&&_t.errors)$=_t.matches;else return null;let Vt=$,Wt=_t==null?void 0:_t.errors;if(Wt!=null){let _i=Vt.findIndex(_s=>_s.route.id&&(Wt==null?void 0:Wt[_s.route.id]));_i>=0||invariant(!1),Vt=Vt.slice(0,Math.min(Vt.length,_i+1))}return Vt.reduceRight((_i,_s,_c)=>{let _l=_s.route.id?Wt==null?void 0:Wt[_s.route.id]:null,_d=null;_t&&(_s.route.ErrorBoundary?_d=reactExports.createElement(_s.route.ErrorBoundary,null):_s.route.errorElement?_d=_s.route.errorElement:_d=reactExports.createElement(DefaultErrorComponent,null));let _m=_e.concat(Vt.slice(0,_c+1)),e_=()=>{let t_=_i;return _l?t_=_d:_s.route.Component?t_=reactExports.createElement(_s.route.Component,null):_s.route.element&&(t_=_s.route.element),reactExports.createElement(RenderedRoute,{match:_s,routeContext:{outlet:_i,matches:_m},children:t_})};return _t&&(_s.route.ErrorBoundary||_s.route.errorElement||_c===0)?reactExports.createElement(RenderErrorBoundary,{location:_t.location,component:_d,error:_l,children:e_(),routeContext:{outlet:null,matches:_m}}):e_()},null)}var DataRouterHook$1;(function($){$.UseBlocker="useBlocker",$.UseRevalidator="useRevalidator"})(DataRouterHook$1||(DataRouterHook$1={}));var DataRouterStateHook$1;(function($){$.UseBlocker="useBlocker",$.UseLoaderData="useLoaderData",$.UseActionData="useActionData",$.UseRouteError="useRouteError",$.UseNavigation="useNavigation",$.UseRouteLoaderData="useRouteLoaderData",$.UseMatches="useMatches",$.UseRevalidator="useRevalidator"})(DataRouterStateHook$1||(DataRouterStateHook$1={}));function useDataRouterState($){let _e=reactExports.useContext(DataRouterStateContext);return _e||invariant(!1),_e}function useRouteContext($){let _e=reactExports.useContext(RouteContext);return _e||invariant(!1),_e}function useCurrentRouteId($){let _e=useRouteContext(),_t=_e.matches[_e.matches.length-1];return _t.route.id||invariant(!1),_t.route.id}function useRouteError(){var $;let _e=reactExports.useContext(RouteErrorContext),_t=useDataRouterState(DataRouterStateHook$1.UseRouteError),Vt=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return _e||(($=_t.errors)==null?void 0:$[Vt])}function Navigate($){let{to:_e,replace:_t,state:Vt,relative:Wt}=$;useInRouterContext()||invariant(!1);let _i=reactExports.useContext(DataRouterStateContext),_s=useNavigate();return reactExports.useEffect(()=>{_i&&_i.navigation.state!=="idle"||_s(_e,{replace:_t,state:Vt,relative:Wt})}),null}function Route($){invariant(!1)}function Router($){let{basename:_e="/",children:_t=null,location:Vt,navigationType:Wt=Action.Pop,navigator:_i,static:_s=!1}=$;useInRouterContext()&&invariant(!1);let _c=_e.replace(/^\/*/,"/"),_l=reactExports.useMemo(()=>({basename:_c,navigator:_i,static:_s}),[_c,_i,_s]);typeof Vt=="string"&&(Vt=parsePath(Vt));let{pathname:_d="/",search:_m="",hash:e_="",state:t_=null,key:i_="default"}=Vt,c_=reactExports.useMemo(()=>{let h_=stripBasename(_d,_c);return h_==null?null:{location:{pathname:h_,search:_m,hash:e_,state:t_,key:i_},navigationType:Wt}},[_c,_d,_m,e_,t_,i_,Wt]);return c_==null?null:reactExports.createElement(NavigationContext.Provider,{value:_l},reactExports.createElement(LocationContext.Provider,{children:_t,value:c_}))}function Routes($){let{children:_e,location:_t}=$,Vt=reactExports.useContext(DataRouterContext),Wt=Vt&&!_e?Vt.router.routes:createRoutesFromChildren(_e);return useRoutes(Wt,_t)}var AwaitRenderStatus;(function($){$[$.pending=0]="pending",$[$.success=1]="success",$[$.error=2]="error"})(AwaitRenderStatus||(AwaitRenderStatus={}));new Promise(()=>{});function createRoutesFromChildren($,_e){_e===void 0&&(_e=[]);let _t=[];return reactExports.Children.forEach($,(Vt,Wt)=>{if(!reactExports.isValidElement(Vt))return;if(Vt.type===reactExports.Fragment){_t.push.apply(_t,createRoutesFromChildren(Vt.props.children,_e));return}Vt.type!==Route&&invariant(!1),!Vt.props.index||!Vt.props.children||invariant(!1);let _i=[..._e,Wt],_s={id:Vt.props.id||_i.join("-"),caseSensitive:Vt.props.caseSensitive,element:Vt.props.element,Component:Vt.props.Component,index:Vt.props.index,path:Vt.props.path,loader:Vt.props.loader,action:Vt.props.action,errorElement:Vt.props.errorElement,ErrorBoundary:Vt.props.ErrorBoundary,hasErrorBoundary:Vt.props.ErrorBoundary!=null||Vt.props.errorElement!=null,shouldRevalidate:Vt.props.shouldRevalidate,handle:Vt.props.handle,lazy:Vt.props.lazy};Vt.props.children&&(_s.children=createRoutesFromChildren(Vt.props.children,_i)),_t.push(_s)}),_t}/**
 * React Router DOM v6.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function($){for(var _e=1;_e<arguments.length;_e++){var _t=arguments[_e];for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&($[Vt]=_t[Vt])}return $},_extends$3.apply(this,arguments)}function _objectWithoutPropertiesLoose$1($,_e){if($==null)return{};var _t={},Vt=Object.keys($),Wt,_i;for(_i=0;_i<Vt.length;_i++)Wt=Vt[_i],!(_e.indexOf(Wt)>=0)&&(_t[Wt]=$[Wt]);return _t}function isModifiedEvent($){return!!($.metaKey||$.altKey||$.ctrlKey||$.shiftKey)}function shouldProcessLinkClick($,_e){return $.button===0&&(!_e||_e==="_self")&&!isModifiedEvent($)}const _excluded=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function BrowserRouter($){let{basename:_e,children:_t,window:Vt}=$,Wt=reactExports.useRef();Wt.current==null&&(Wt.current=createBrowserHistory({window:Vt,v5Compat:!0}));let _i=Wt.current,[_s,_c]=reactExports.useState({action:_i.action,location:_i.location});return reactExports.useLayoutEffect(()=>_i.listen(_c),[_i]),reactExports.createElement(Router,{basename:_e,children:_t,location:_s.location,navigationType:_s.action,navigator:_i})}const isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(_e,_t){let{onClick:Vt,relative:Wt,reloadDocument:_i,replace:_s,state:_c,target:_l,to:_d,preventScrollReset:_m}=_e,e_=_objectWithoutPropertiesLoose$1(_e,_excluded),{basename:t_}=reactExports.useContext(NavigationContext),i_,c_=!1;if(typeof _d=="string"&&ABSOLUTE_URL_REGEX.test(_d)&&(i_=_d,isBrowser)){let d_=new URL(window.location.href),f_=_d.startsWith("//")?new URL(d_.protocol+_d):new URL(_d),S_=stripBasename(f_.pathname,t_);f_.origin===d_.origin&&S_!=null?_d=S_+f_.search+f_.hash:c_=!0}let h_=useHref(_d,{relative:Wt}),y_=useLinkClickHandler(_d,{replace:_s,state:_c,target:_l,preventScrollReset:_m,relative:Wt});function l_(d_){Vt&&Vt(d_),d_.defaultPrevented||y_(d_)}return reactExports.createElement("a",_extends$3({},e_,{href:i_||h_,onClick:c_||_i?Vt:l_,ref:_t,target:_l}))});var DataRouterHook;(function($){$.UseScrollRestoration="useScrollRestoration",$.UseSubmitImpl="useSubmitImpl",$.UseFetcher="useFetcher"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function($){$.UseFetchers="useFetchers",$.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler($,_e){let{target:_t,replace:Vt,state:Wt,preventScrollReset:_i,relative:_s}=_e===void 0?{}:_e,_c=useNavigate(),_l=useLocation(),_d=useResolvedPath($,{relative:_s});return reactExports.useCallback(_m=>{if(shouldProcessLinkClick(_m,_t)){_m.preventDefault();let e_=Vt!==void 0?Vt:createPath(_l)===createPath(_d);_c($,{replace:e_,state:Wt,preventScrollReset:_i,relative:_s})}},[_l,_c,_d,Vt,Wt,_t,$,_i,_s])}function r$1($){var _e,_t,Vt="";if(typeof $=="string"||typeof $=="number")Vt+=$;else if(typeof $=="object")if(Array.isArray($))for(_e=0;_e<$.length;_e++)$[_e]&&(_t=r$1($[_e]))&&(Vt&&(Vt+=" "),Vt+=_t);else for(_e in $)$[_e]&&(Vt&&(Vt+=" "),Vt+=_e);return Vt}function clsx(){for(var $,_e,_t=0,Vt="";_t<arguments.length;)($=arguments[_t++])&&(_e=r$1($))&&(Vt&&(Vt+=" "),Vt+=_e);return Vt}const u$2=$=>typeof $=="number"&&!isNaN($),d$2=$=>typeof $=="string",p$2=$=>typeof $=="function",m$2=$=>d$2($)||p$2($)?$:null,f$2=$=>reactExports.isValidElement($)||d$2($)||p$2($)||u$2($);function g$1($,_e,_t){_t===void 0&&(_t=300);const{scrollHeight:Vt,style:Wt}=$;requestAnimationFrame(()=>{Wt.minHeight="initial",Wt.height=Vt+"px",Wt.transition=`all ${_t}ms`,requestAnimationFrame(()=>{Wt.height="0",Wt.padding="0",Wt.margin="0",setTimeout(_e,_t)})})}function h$2($){let{enter:_e,exit:_t,appendPosition:Vt=!1,collapse:Wt=!0,collapseDuration:_i=300}=$;return function(_s){let{children:_c,position:_l,preventExitTransition:_d,done:_m,nodeRef:e_,isIn:t_}=_s;const i_=Vt?`${_e}--${_l}`:_e,c_=Vt?`${_t}--${_l}`:_t,h_=reactExports.useRef(0);return reactExports.useLayoutEffect(()=>{const y_=e_.current,l_=i_.split(" "),d_=f_=>{f_.target===e_.current&&(y_.dispatchEvent(new Event("d")),y_.removeEventListener("animationend",d_),y_.removeEventListener("animationcancel",d_),h_.current===0&&f_.type!=="animationcancel"&&y_.classList.remove(...l_))};y_.classList.add(...l_),y_.addEventListener("animationend",d_),y_.addEventListener("animationcancel",d_)},[]),reactExports.useEffect(()=>{const y_=e_.current,l_=()=>{y_.removeEventListener("animationend",l_),Wt?g$1(y_,_m,_i):_m()};t_||(_d?l_():(h_.current=1,y_.className+=` ${c_}`,y_.addEventListener("animationend",l_)))},[t_]),React.createElement(React.Fragment,null,_c)}}function y$2($,_e){return{content:$.content,containerId:$.props.containerId,id:$.props.toastId,theme:$.props.theme,type:$.props.type,data:$.props.data||{},isLoading:$.props.isLoading,icon:$.props.icon,status:_e}}const v$2={list:new Map,emitQueue:new Map,on($,_e){return this.list.has($)||this.list.set($,[]),this.list.get($).push(_e),this},off($,_e){if(_e){const _t=this.list.get($).filter(Vt=>Vt!==_e);return this.list.set($,_t),this}return this.list.delete($),this},cancelEmit($){const _e=this.emitQueue.get($);return _e&&(_e.forEach(clearTimeout),this.emitQueue.delete($)),this},emit($){this.list.has($)&&this.list.get($).forEach(_e=>{const _t=setTimeout(()=>{_e(...[].slice.call(arguments,1))},0);this.emitQueue.has($)||this.emitQueue.set($,[]),this.emitQueue.get($).push(_t)})}},T$1=$=>{let{theme:_e,type:_t,...Vt}=$;return React.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:_e==="colored"?"currentColor":`var(--toastify-icon-color-${_t})`,...Vt})},E$1={info:function($){return React.createElement(T$1,{...$},React.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function($){return React.createElement(T$1,{...$},React.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function($){return React.createElement(T$1,{...$},React.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function($){return React.createElement(T$1,{...$},React.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return React.createElement("div",{className:"Toastify__spinner"})}};function C($){const[,_e]=reactExports.useReducer(i_=>i_+1,0),[_t,Vt]=reactExports.useState([]),Wt=reactExports.useRef(null),_i=reactExports.useRef(new Map).current,_s=i_=>_t.indexOf(i_)!==-1,_c=reactExports.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:$,containerId:null,isToastActive:_s,getToast:i_=>_i.get(i_)}).current;function _l(i_){let{containerId:c_}=i_;const{limit:h_}=_c.props;!h_||c_&&_c.containerId!==c_||(_c.count-=_c.queue.length,_c.queue=[])}function _d(i_){Vt(c_=>i_==null?[]:c_.filter(h_=>h_!==i_))}function _m(){const{toastContent:i_,toastProps:c_,staleId:h_}=_c.queue.shift();t_(i_,c_,h_)}function e_(i_,c_){let{delay:h_,staleId:y_,...l_}=c_;if(!f$2(i_)||function(q_){return!Wt.current||_c.props.enableMultiContainer&&q_.containerId!==_c.props.containerId||_i.has(q_.toastId)&&q_.updateId==null}(l_))return;const{toastId:d_,updateId:f_,data:S_}=l_,{props:T_}=_c,R_=()=>_d(d_),C_=f_==null;C_&&_c.count++;const j_={...T_,style:T_.toastStyle,key:_c.toastKey++,...Object.fromEntries(Object.entries(l_).filter(q_=>{let[G_,I_]=q_;return I_!=null})),toastId:d_,updateId:f_,data:S_,closeToast:R_,isIn:!1,className:m$2(l_.className||T_.toastClassName),bodyClassName:m$2(l_.bodyClassName||T_.bodyClassName),progressClassName:m$2(l_.progressClassName||T_.progressClassName),autoClose:!l_.isLoading&&(W_=l_.autoClose,A_=T_.autoClose,W_===!1||u$2(W_)&&W_>0?W_:A_),deleteToast(){const q_=y$2(_i.get(d_),"removed");_i.delete(d_),v$2.emit(4,q_);const G_=_c.queue.length;if(_c.count=d_==null?_c.count-_c.displayedToast:_c.count-1,_c.count<0&&(_c.count=0),G_>0){const I_=d_==null?_c.props.limit:1;if(G_===1||I_===1)_c.displayedToast++,_m();else{const x_=I_>G_?G_:I_;_c.displayedToast=x_;for(let Y_=0;Y_<x_;Y_++)_m()}}else _e()}};var W_,A_;j_.iconOut=function(q_){let{theme:G_,type:I_,isLoading:x_,icon:Y_}=q_,z_=null;const B_={theme:G_,type:I_};return Y_===!1||(p$2(Y_)?z_=Y_(B_):reactExports.isValidElement(Y_)?z_=reactExports.cloneElement(Y_,B_):d$2(Y_)||u$2(Y_)?z_=Y_:x_?z_=E$1.spinner():(Q_=>Q_ in E$1)(I_)&&(z_=E$1[I_](B_))),z_}(j_),p$2(l_.onOpen)&&(j_.onOpen=l_.onOpen),p$2(l_.onClose)&&(j_.onClose=l_.onClose),j_.closeButton=T_.closeButton,l_.closeButton===!1||f$2(l_.closeButton)?j_.closeButton=l_.closeButton:l_.closeButton===!0&&(j_.closeButton=!f$2(T_.closeButton)||T_.closeButton);let $_=i_;reactExports.isValidElement(i_)&&!d$2(i_.type)?$_=reactExports.cloneElement(i_,{closeToast:R_,toastProps:j_,data:S_}):p$2(i_)&&($_=i_({closeToast:R_,toastProps:j_,data:S_})),T_.limit&&T_.limit>0&&_c.count>T_.limit&&C_?_c.queue.push({toastContent:$_,toastProps:j_,staleId:y_}):u$2(h_)?setTimeout(()=>{t_($_,j_,y_)},h_):t_($_,j_,y_)}function t_(i_,c_,h_){const{toastId:y_}=c_;h_&&_i.delete(h_);const l_={content:i_,props:c_};_i.set(y_,l_),Vt(d_=>[...d_,y_].filter(f_=>f_!==h_)),v$2.emit(4,y$2(l_,l_.props.updateId==null?"added":"updated"))}return reactExports.useEffect(()=>(_c.containerId=$.containerId,v$2.cancelEmit(3).on(0,e_).on(1,i_=>Wt.current&&_d(i_)).on(5,_l).emit(2,_c),()=>{_i.clear(),v$2.emit(3,_c)}),[]),reactExports.useEffect(()=>{_c.props=$,_c.isToastActive=_s,_c.displayedToast=_t.length}),{getToastToRender:function(i_){const c_=new Map,h_=Array.from(_i.values());return $.newestOnTop&&h_.reverse(),h_.forEach(y_=>{const{position:l_}=y_.props;c_.has(l_)||c_.set(l_,[]),c_.get(l_).push(y_)}),Array.from(c_,y_=>i_(y_[0],y_[1]))},containerRef:Wt,isToastActive:_s}}function b$2($){return $.targetTouches&&$.targetTouches.length>=1?$.targetTouches[0].clientX:$.clientX}function I$1($){return $.targetTouches&&$.targetTouches.length>=1?$.targetTouches[0].clientY:$.clientY}function _$1($){const[_e,_t]=reactExports.useState(!1),[Vt,Wt]=reactExports.useState(!1),_i=reactExports.useRef(null),_s=reactExports.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,_c=reactExports.useRef($),{autoClose:_l,pauseOnHover:_d,closeToast:_m,onClick:e_,closeOnClick:t_}=$;function i_(S_){if($.draggable){S_.nativeEvent.type==="touchstart"&&S_.nativeEvent.preventDefault(),_s.didMove=!1,document.addEventListener("mousemove",l_),document.addEventListener("mouseup",d_),document.addEventListener("touchmove",l_),document.addEventListener("touchend",d_);const T_=_i.current;_s.canCloseOnClick=!0,_s.canDrag=!0,_s.boundingRect=T_.getBoundingClientRect(),T_.style.transition="",_s.x=b$2(S_.nativeEvent),_s.y=I$1(S_.nativeEvent),$.draggableDirection==="x"?(_s.start=_s.x,_s.removalDistance=T_.offsetWidth*($.draggablePercent/100)):(_s.start=_s.y,_s.removalDistance=T_.offsetHeight*($.draggablePercent===80?1.5*$.draggablePercent:$.draggablePercent/100))}}function c_(S_){if(_s.boundingRect){const{top:T_,bottom:R_,left:C_,right:j_}=_s.boundingRect;S_.nativeEvent.type!=="touchend"&&$.pauseOnHover&&_s.x>=C_&&_s.x<=j_&&_s.y>=T_&&_s.y<=R_?y_():h_()}}function h_(){_t(!0)}function y_(){_t(!1)}function l_(S_){const T_=_i.current;_s.canDrag&&T_&&(_s.didMove=!0,_e&&y_(),_s.x=b$2(S_),_s.y=I$1(S_),_s.delta=$.draggableDirection==="x"?_s.x-_s.start:_s.y-_s.start,_s.start!==_s.x&&(_s.canCloseOnClick=!1),T_.style.transform=`translate${$.draggableDirection}(${_s.delta}px)`,T_.style.opacity=""+(1-Math.abs(_s.delta/_s.removalDistance)))}function d_(){document.removeEventListener("mousemove",l_),document.removeEventListener("mouseup",d_),document.removeEventListener("touchmove",l_),document.removeEventListener("touchend",d_);const S_=_i.current;if(_s.canDrag&&_s.didMove&&S_){if(_s.canDrag=!1,Math.abs(_s.delta)>_s.removalDistance)return Wt(!0),void $.closeToast();S_.style.transition="transform 0.2s, opacity 0.2s",S_.style.transform=`translate${$.draggableDirection}(0)`,S_.style.opacity="1"}}reactExports.useEffect(()=>{_c.current=$}),reactExports.useEffect(()=>(_i.current&&_i.current.addEventListener("d",h_,{once:!0}),p$2($.onOpen)&&$.onOpen(reactExports.isValidElement($.children)&&$.children.props),()=>{const S_=_c.current;p$2(S_.onClose)&&S_.onClose(reactExports.isValidElement(S_.children)&&S_.children.props)}),[]),reactExports.useEffect(()=>($.pauseOnFocusLoss&&(document.hasFocus()||y_(),window.addEventListener("focus",h_),window.addEventListener("blur",y_)),()=>{$.pauseOnFocusLoss&&(window.removeEventListener("focus",h_),window.removeEventListener("blur",y_))}),[$.pauseOnFocusLoss]);const f_={onMouseDown:i_,onTouchStart:i_,onMouseUp:c_,onTouchEnd:c_};return _l&&_d&&(f_.onMouseEnter=y_,f_.onMouseLeave=h_),t_&&(f_.onClick=S_=>{e_&&e_(S_),_s.canCloseOnClick&&_m()}),{playToast:h_,pauseToast:y_,isRunning:_e,preventExitTransition:Vt,toastRef:_i,eventHandlers:f_}}function L$1($){let{closeToast:_e,theme:_t,ariaLabel:Vt="close"}=$;return React.createElement("button",{className:`Toastify__close-button Toastify__close-button--${_t}`,type:"button",onClick:Wt=>{Wt.stopPropagation(),_e(Wt)},"aria-label":Vt},React.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},React.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function O$1($){let{delay:_e,isRunning:_t,closeToast:Vt,type:Wt="default",hide:_i,className:_s,style:_c,controlledProgress:_l,progress:_d,rtl:_m,isIn:e_,theme:t_}=$;const i_=_i||_l&&_d===0,c_={..._c,animationDuration:`${_e}ms`,animationPlayState:_t?"running":"paused",opacity:i_?0:1};_l&&(c_.transform=`scaleX(${_d})`);const h_=clsx("Toastify__progress-bar",_l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${t_}`,`Toastify__progress-bar--${Wt}`,{"Toastify__progress-bar--rtl":_m}),y_=p$2(_s)?_s({rtl:_m,type:Wt,defaultClassName:h_}):clsx(h_,_s);return React.createElement("div",{role:"progressbar","aria-hidden":i_?"true":"false","aria-label":"notification timer",className:y_,style:c_,[_l&&_d>=1?"onTransitionEnd":"onAnimationEnd"]:_l&&_d<1?null:()=>{e_&&Vt()}})}const N$1=$=>{const{isRunning:_e,preventExitTransition:_t,toastRef:Vt,eventHandlers:Wt}=_$1($),{closeButton:_i,children:_s,autoClose:_c,onClick:_l,type:_d,hideProgressBar:_m,closeToast:e_,transition:t_,position:i_,className:c_,style:h_,bodyClassName:y_,bodyStyle:l_,progressClassName:d_,progressStyle:f_,updateId:S_,role:T_,progress:R_,rtl:C_,toastId:j_,deleteToast:W_,isIn:A_,isLoading:$_,iconOut:q_,closeOnClick:G_,theme:I_}=$,x_=clsx("Toastify__toast",`Toastify__toast-theme--${I_}`,`Toastify__toast--${_d}`,{"Toastify__toast--rtl":C_},{"Toastify__toast--close-on-click":G_}),Y_=p$2(c_)?c_({rtl:C_,position:i_,type:_d,defaultClassName:x_}):clsx(x_,c_),z_=!!R_||!_c,B_={closeToast:e_,type:_d,theme:I_};let Q_=null;return _i===!1||(Q_=p$2(_i)?_i(B_):reactExports.isValidElement(_i)?reactExports.cloneElement(_i,B_):L$1(B_)),React.createElement(t_,{isIn:A_,done:W_,position:i_,preventExitTransition:_t,nodeRef:Vt},React.createElement("div",{id:j_,onClick:_l,className:Y_,...Wt,style:h_,ref:Vt},React.createElement("div",{...A_&&{role:T_},className:p$2(y_)?y_({type:_d}):clsx("Toastify__toast-body",y_),style:l_},q_!=null&&React.createElement("div",{className:clsx("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!$_})},q_),React.createElement("div",null,_s)),Q_,React.createElement(O$1,{...S_&&!z_?{key:`pb-${S_}`}:{},rtl:C_,theme:I_,delay:_c,isRunning:_e,isIn:A_,closeToast:e_,hide:_m,type:_d,style:f_,className:d_,controlledProgress:z_,progress:R_||0})))},M$1=function($,_e){return _e===void 0&&(_e=!1),{enter:`Toastify--animate Toastify__${$}-enter`,exit:`Toastify--animate Toastify__${$}-exit`,appendPosition:_e}},R$1=h$2(M$1("bounce",!0));h$2(M$1("slide",!0));h$2(M$1("zoom"));h$2(M$1("flip"));const k$1=reactExports.forwardRef(($,_e)=>{const{getToastToRender:_t,containerRef:Vt,isToastActive:Wt}=C($),{className:_i,style:_s,rtl:_c,containerId:_l}=$;function _d(_m){const e_=clsx("Toastify__toast-container",`Toastify__toast-container--${_m}`,{"Toastify__toast-container--rtl":_c});return p$2(_i)?_i({position:_m,rtl:_c,defaultClassName:e_}):clsx(e_,m$2(_i))}return reactExports.useEffect(()=>{_e&&(_e.current=Vt.current)},[]),React.createElement("div",{ref:Vt,className:"Toastify",id:_l},_t((_m,e_)=>{const t_=e_.length?{..._s}:{..._s,pointerEvents:"none"};return React.createElement("div",{className:_d(_m),style:t_,key:`container-${_m}`},e_.map((i_,c_)=>{let{content:h_,props:y_}=i_;return React.createElement(N$1,{...y_,isIn:Wt(y_.toastId),style:{...y_.style,"--nth":c_+1,"--len":e_.length},key:`toast-${y_.key}`},h_)}))}))});k$1.displayName="ToastContainer",k$1.defaultProps={position:"top-right",transition:R$1,autoClose:5e3,closeButton:L$1,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let P$1,B$1=new Map,D$1=[],A$1=1;function z$1(){return""+A$1++}function F$1($){return $&&(d$2($.toastId)||u$2($.toastId))?$.toastId:z$1()}function H$1($,_e){return B$1.size>0?v$2.emit(0,$,_e):D$1.push({content:$,options:_e}),_e.toastId}function S$1($,_e){return{..._e,type:_e&&_e.type||$,toastId:F$1(_e)}}function q$1($){return(_e,_t)=>H$1(_e,S$1($,_t))}function Q$1($,_e){return H$1($,S$1("default",_e))}Q$1.loading=($,_e)=>H$1($,S$1("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,..._e})),Q$1.promise=function($,_e,_t){let Vt,{pending:Wt,error:_i,success:_s}=_e;Wt&&(Vt=d$2(Wt)?Q$1.loading(Wt,_t):Q$1.loading(Wt.render,{..._t,...Wt}));const _c={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},_l=(_m,e_,t_)=>{if(e_==null)return void Q$1.dismiss(Vt);const i_={type:_m,..._c,..._t,data:t_},c_=d$2(e_)?{render:e_}:e_;return Vt?Q$1.update(Vt,{...i_,...c_}):Q$1(c_.render,{...i_,...c_}),t_},_d=p$2($)?$():$;return _d.then(_m=>_l("success",_s,_m)).catch(_m=>_l("error",_i,_m)),_d},Q$1.success=q$1("success"),Q$1.info=q$1("info"),Q$1.error=q$1("error"),Q$1.warning=q$1("warning"),Q$1.warn=Q$1.warning,Q$1.dark=($,_e)=>H$1($,S$1("default",{theme:"dark",..._e})),Q$1.dismiss=$=>{B$1.size>0?v$2.emit(1,$):D$1=D$1.filter(_e=>$!=null&&_e.options.toastId!==$)},Q$1.clearWaitingQueue=function($){return $===void 0&&($={}),v$2.emit(5,$)},Q$1.isActive=$=>{let _e=!1;return B$1.forEach(_t=>{_t.isToastActive&&_t.isToastActive($)&&(_e=!0)}),_e},Q$1.update=function($,_e){_e===void 0&&(_e={}),setTimeout(()=>{const _t=function(Vt,Wt){let{containerId:_i}=Wt;const _s=B$1.get(_i||P$1);return _s&&_s.getToast(Vt)}($,_e);if(_t){const{props:Vt,content:Wt}=_t,_i={delay:100,...Vt,..._e,toastId:_e.toastId||$,updateId:z$1()};_i.toastId!==$&&(_i.staleId=$);const _s=_i.render||Wt;delete _i.render,H$1(_s,_i)}},0)},Q$1.done=$=>{Q$1.update($,{progress:1})},Q$1.onChange=$=>(v$2.on(4,$),()=>{v$2.off(4,$)}),Q$1.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},Q$1.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},v$2.on(2,$=>{P$1=$.containerId||$,B$1.set(P$1,$),D$1.forEach(_e=>{v$2.emit(0,_e.content,_e.options)}),D$1=[]}).on(3,$=>{B$1.delete($.containerId||$),B$1.size===0&&v$2.off(0).off(1).off(5)});const PACKET_TYPES=Object.create(null);PACKET_TYPES.open="0";PACKET_TYPES.close="1";PACKET_TYPES.ping="2";PACKET_TYPES.pong="3";PACKET_TYPES.message="4";PACKET_TYPES.upgrade="5";PACKET_TYPES.noop="6";const PACKET_TYPES_REVERSE=Object.create(null);Object.keys(PACKET_TYPES).forEach($=>{PACKET_TYPES_REVERSE[PACKET_TYPES[$]]=$});const ERROR_PACKET={type:"error",data:"parser error"},withNativeBlob$1=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",withNativeArrayBuffer$2=typeof ArrayBuffer=="function",isView$1=$=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView($):$&&$.buffer instanceof ArrayBuffer,encodePacket=({type:$,data:_e},_t,Vt)=>withNativeBlob$1&&_e instanceof Blob?_t?Vt(_e):encodeBlobAsBase64(_e,Vt):withNativeArrayBuffer$2&&(_e instanceof ArrayBuffer||isView$1(_e))?_t?Vt(_e):encodeBlobAsBase64(new Blob([_e]),Vt):Vt(PACKET_TYPES[$]+(_e||"")),encodeBlobAsBase64=($,_e)=>{const _t=new FileReader;return _t.onload=function(){const Vt=_t.result.split(",")[1];_e("b"+(Vt||""))},_t.readAsDataURL($)},chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let $=0;$<chars.length;$++)lookup$1[chars.charCodeAt($)]=$;const decode$1=$=>{let _e=$.length*.75,_t=$.length,Vt,Wt=0,_i,_s,_c,_l;$[$.length-1]==="="&&(_e--,$[$.length-2]==="="&&_e--);const _d=new ArrayBuffer(_e),_m=new Uint8Array(_d);for(Vt=0;Vt<_t;Vt+=4)_i=lookup$1[$.charCodeAt(Vt)],_s=lookup$1[$.charCodeAt(Vt+1)],_c=lookup$1[$.charCodeAt(Vt+2)],_l=lookup$1[$.charCodeAt(Vt+3)],_m[Wt++]=_i<<2|_s>>4,_m[Wt++]=(_s&15)<<4|_c>>2,_m[Wt++]=(_c&3)<<6|_l&63;return _d},withNativeArrayBuffer$1=typeof ArrayBuffer=="function",decodePacket=($,_e)=>{if(typeof $!="string")return{type:"message",data:mapBinary($,_e)};const _t=$.charAt(0);return _t==="b"?{type:"message",data:decodeBase64Packet($.substring(1),_e)}:PACKET_TYPES_REVERSE[_t]?$.length>1?{type:PACKET_TYPES_REVERSE[_t],data:$.substring(1)}:{type:PACKET_TYPES_REVERSE[_t]}:ERROR_PACKET},decodeBase64Packet=($,_e)=>{if(withNativeArrayBuffer$1){const _t=decode$1($);return mapBinary(_t,_e)}else return{base64:!0,data:$}},mapBinary=($,_e)=>{switch(_e){case"blob":return $ instanceof ArrayBuffer?new Blob([$]):$;case"arraybuffer":default:return $}},SEPARATOR=String.fromCharCode(30),encodePayload=($,_e)=>{const _t=$.length,Vt=new Array(_t);let Wt=0;$.forEach((_i,_s)=>{encodePacket(_i,!1,_c=>{Vt[_s]=_c,++Wt===_t&&_e(Vt.join(SEPARATOR))})})},decodePayload=($,_e)=>{const _t=$.split(SEPARATOR),Vt=[];for(let Wt=0;Wt<_t.length;Wt++){const _i=decodePacket(_t[Wt],_e);if(Vt.push(_i),_i.type==="error")break}return Vt},protocol$1=4;function Emitter($){if($)return mixin($)}function mixin($){for(var _e in Emitter.prototype)$[_e]=Emitter.prototype[_e];return $}Emitter.prototype.on=Emitter.prototype.addEventListener=function($,_e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+$]=this._callbacks["$"+$]||[]).push(_e),this};Emitter.prototype.once=function($,_e){function _t(){this.off($,_t),_e.apply(this,arguments)}return _t.fn=_e,this.on($,_t),this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function($,_e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var _t=this._callbacks["$"+$];if(!_t)return this;if(arguments.length==1)return delete this._callbacks["$"+$],this;for(var Vt,Wt=0;Wt<_t.length;Wt++)if(Vt=_t[Wt],Vt===_e||Vt.fn===_e){_t.splice(Wt,1);break}return _t.length===0&&delete this._callbacks["$"+$],this};Emitter.prototype.emit=function($){this._callbacks=this._callbacks||{};for(var _e=new Array(arguments.length-1),_t=this._callbacks["$"+$],Vt=1;Vt<arguments.length;Vt++)_e[Vt-1]=arguments[Vt];if(_t){_t=_t.slice(0);for(var Vt=0,Wt=_t.length;Vt<Wt;++Vt)_t[Vt].apply(this,_e)}return this};Emitter.prototype.emitReserved=Emitter.prototype.emit;Emitter.prototype.listeners=function($){return this._callbacks=this._callbacks||{},this._callbacks["$"+$]||[]};Emitter.prototype.hasListeners=function($){return!!this.listeners($).length};const globalThisShim=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function pick($,..._e){return _e.reduce((_t,Vt)=>($.hasOwnProperty(Vt)&&(_t[Vt]=$[Vt]),_t),{})}const NATIVE_SET_TIMEOUT=globalThisShim.setTimeout,NATIVE_CLEAR_TIMEOUT=globalThisShim.clearTimeout;function installTimerFunctions($,_e){_e.useNativeTimers?($.setTimeoutFn=NATIVE_SET_TIMEOUT.bind(globalThisShim),$.clearTimeoutFn=NATIVE_CLEAR_TIMEOUT.bind(globalThisShim)):($.setTimeoutFn=globalThisShim.setTimeout.bind(globalThisShim),$.clearTimeoutFn=globalThisShim.clearTimeout.bind(globalThisShim))}const BASE64_OVERHEAD=1.33;function byteLength($){return typeof $=="string"?utf8Length($):Math.ceil(($.byteLength||$.size)*BASE64_OVERHEAD)}function utf8Length($){let _e=0,_t=0;for(let Vt=0,Wt=$.length;Vt<Wt;Vt++)_e=$.charCodeAt(Vt),_e<128?_t+=1:_e<2048?_t+=2:_e<55296||_e>=57344?_t+=3:(Vt++,_t+=4);return _t}class TransportError extends Error{constructor(_e,_t,Vt){super(_e),this.description=_t,this.context=Vt,this.type="TransportError"}}class Transport extends Emitter{constructor(_e){super(),this.writable=!1,installTimerFunctions(this,_e),this.opts=_e,this.query=_e.query,this.socket=_e.socket}onError(_e,_t,Vt){return super.emitReserved("error",new TransportError(_e,_t,Vt)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(_e){this.readyState==="open"&&this.write(_e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(_e){const _t=decodePacket(_e,this.socket.binaryType);this.onPacket(_t)}onPacket(_e){super.emitReserved("packet",_e)}onClose(_e){this.readyState="closed",super.emitReserved("close",_e)}pause(_e){}}const alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),length=64,map={};let seed=0,i$2=0,prev;function encode$3($){let _e="";do _e=alphabet[$%length]+_e,$=Math.floor($/length);while($>0);return _e}function yeast(){const $=encode$3(+new Date);return $!==prev?(seed=0,prev=$):$+"."+encode$3(seed++)}for(;i$2<length;i$2++)map[alphabet[i$2]]=i$2;function encode$2($){let _e="";for(let _t in $)$.hasOwnProperty(_t)&&(_e.length&&(_e+="&"),_e+=encodeURIComponent(_t)+"="+encodeURIComponent($[_t]));return _e}function decode($){let _e={},_t=$.split("&");for(let Vt=0,Wt=_t.length;Vt<Wt;Vt++){let _i=_t[Vt].split("=");_e[decodeURIComponent(_i[0])]=decodeURIComponent(_i[1])}return _e}let value=!1;try{value=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const hasCORS=value;function XHR($){const _e=$.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!_e||hasCORS))return new XMLHttpRequest}catch{}if(!_e)try{return new globalThisShim[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function empty(){}const hasXHR2=function(){return new XHR({xdomain:!1}).responseType!=null}();class Polling extends Transport{constructor(_e){if(super(_e),this.polling=!1,typeof location<"u"){const Vt=location.protocol==="https:";let Wt=location.port;Wt||(Wt=Vt?"443":"80"),this.xd=typeof location<"u"&&_e.hostname!==location.hostname||Wt!==_e.port,this.xs=_e.secure!==Vt}const _t=_e&&_e.forceBase64;this.supportsBinary=hasXHR2&&!_t}get name(){return"polling"}doOpen(){this.poll()}pause(_e){this.readyState="pausing";const _t=()=>{this.readyState="paused",_e()};if(this.polling||!this.writable){let Vt=0;this.polling&&(Vt++,this.once("pollComplete",function(){--Vt||_t()})),this.writable||(Vt++,this.once("drain",function(){--Vt||_t()}))}else _t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(_e){const _t=Vt=>{if(this.readyState==="opening"&&Vt.type==="open"&&this.onOpen(),Vt.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(Vt)};decodePayload(_e,this.socket.binaryType).forEach(_t),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const _e=()=>{this.write([{type:"close"}])};this.readyState==="open"?_e():this.once("open",_e)}write(_e){this.writable=!1,encodePayload(_e,_t=>{this.doWrite(_t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let _e=this.query||{};const _t=this.opts.secure?"https":"http";let Vt="";this.opts.timestampRequests!==!1&&(_e[this.opts.timestampParam]=yeast()),!this.supportsBinary&&!_e.sid&&(_e.b64=1),this.opts.port&&(_t==="https"&&Number(this.opts.port)!==443||_t==="http"&&Number(this.opts.port)!==80)&&(Vt=":"+this.opts.port);const Wt=encode$2(_e),_i=this.opts.hostname.indexOf(":")!==-1;return _t+"://"+(_i?"["+this.opts.hostname+"]":this.opts.hostname)+Vt+this.opts.path+(Wt.length?"?"+Wt:"")}request(_e={}){return Object.assign(_e,{xd:this.xd,xs:this.xs},this.opts),new Request$1(this.uri(),_e)}doWrite(_e,_t){const Vt=this.request({method:"POST",data:_e});Vt.on("success",_t),Vt.on("error",(Wt,_i)=>{this.onError("xhr post error",Wt,_i)})}doPoll(){const _e=this.request();_e.on("data",this.onData.bind(this)),_e.on("error",(_t,Vt)=>{this.onError("xhr poll error",_t,Vt)}),this.pollXhr=_e}}let Request$1=class XF extends Emitter{constructor(_e,_t){super(),installTimerFunctions(this,_t),this.opts=_t,this.method=_t.method||"GET",this.uri=_e,this.async=_t.async!==!1,this.data=_t.data!==void 0?_t.data:null,this.create()}create(){const _e=pick(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");_e.xdomain=!!this.opts.xd,_e.xscheme=!!this.opts.xs;const _t=this.xhr=new XHR(_e);try{_t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){_t.setDisableHeaderCheck&&_t.setDisableHeaderCheck(!0);for(let Vt in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(Vt)&&_t.setRequestHeader(Vt,this.opts.extraHeaders[Vt])}}catch{}if(this.method==="POST")try{_t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{_t.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in _t&&(_t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(_t.timeout=this.opts.requestTimeout),_t.onreadystatechange=()=>{_t.readyState===4&&(_t.status===200||_t.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof _t.status=="number"?_t.status:0)},0))},_t.send(this.data)}catch(Vt){this.setTimeoutFn(()=>{this.onError(Vt)},0);return}typeof document<"u"&&(this.index=XF.requestsCount++,XF.requests[this.index]=this)}onError(_e){this.emitReserved("error",_e,this.xhr),this.cleanup(!0)}cleanup(_e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=empty,_e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete XF.requests[this.index],this.xhr=null}}onLoad(){const _e=this.xhr.responseText;_e!==null&&(this.emitReserved("data",_e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};Request$1.requestsCount=0;Request$1.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",unloadHandler);else if(typeof addEventListener=="function"){const $="onpagehide"in globalThisShim?"pagehide":"unload";addEventListener($,unloadHandler,!1)}}function unloadHandler(){for(let $ in Request$1.requests)Request$1.requests.hasOwnProperty($)&&Request$1.requests[$].abort()}const nextTick=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?_e=>Promise.resolve().then(_e):(_e,_t)=>_t(_e,0))(),WebSocket$1=globalThisShim.WebSocket||globalThisShim.MozWebSocket,usingBrowserWebSocket=!0,defaultBinaryType="arraybuffer",isReactNative$1=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class WS extends Transport{constructor(_e){super(_e),this.supportsBinary=!_e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const _e=this.uri(),_t=this.opts.protocols,Vt=isReactNative$1?{}:pick(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(Vt.headers=this.opts.extraHeaders);try{this.ws=usingBrowserWebSocket&&!isReactNative$1?_t?new WebSocket$1(_e,_t):new WebSocket$1(_e):new WebSocket$1(_e,_t,Vt)}catch(Wt){return this.emitReserved("error",Wt)}this.ws.binaryType=this.socket.binaryType||defaultBinaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=_e=>this.onClose({description:"websocket connection closed",context:_e}),this.ws.onmessage=_e=>this.onData(_e.data),this.ws.onerror=_e=>this.onError("websocket error",_e)}write(_e){this.writable=!1;for(let _t=0;_t<_e.length;_t++){const Vt=_e[_t],Wt=_t===_e.length-1;encodePacket(Vt,this.supportsBinary,_i=>{const _s={};try{usingBrowserWebSocket&&this.ws.send(_i)}catch{}Wt&&nextTick(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let _e=this.query||{};const _t=this.opts.secure?"wss":"ws";let Vt="";this.opts.port&&(_t==="wss"&&Number(this.opts.port)!==443||_t==="ws"&&Number(this.opts.port)!==80)&&(Vt=":"+this.opts.port),this.opts.timestampRequests&&(_e[this.opts.timestampParam]=yeast()),this.supportsBinary||(_e.b64=1);const Wt=encode$2(_e),_i=this.opts.hostname.indexOf(":")!==-1;return _t+"://"+(_i?"["+this.opts.hostname+"]":this.opts.hostname)+Vt+this.opts.path+(Wt.length?"?"+Wt:"")}check(){return!!WebSocket$1}}const transports={websocket:WS,polling:Polling},re=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function parse($){const _e=$,_t=$.indexOf("["),Vt=$.indexOf("]");_t!=-1&&Vt!=-1&&($=$.substring(0,_t)+$.substring(_t,Vt).replace(/:/g,";")+$.substring(Vt,$.length));let Wt=re.exec($||""),_i={},_s=14;for(;_s--;)_i[parts[_s]]=Wt[_s]||"";return _t!=-1&&Vt!=-1&&(_i.source=_e,_i.host=_i.host.substring(1,_i.host.length-1).replace(/;/g,":"),_i.authority=_i.authority.replace("[","").replace("]","").replace(/;/g,":"),_i.ipv6uri=!0),_i.pathNames=pathNames(_i,_i.path),_i.queryKey=queryKey(_i,_i.query),_i}function pathNames($,_e){const _t=/\/{2,9}/g,Vt=_e.replace(_t,"/").split("/");return(_e.slice(0,1)=="/"||_e.length===0)&&Vt.splice(0,1),_e.slice(-1)=="/"&&Vt.splice(Vt.length-1,1),Vt}function queryKey($,_e){const _t={};return _e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(Vt,Wt,_i){Wt&&(_t[Wt]=_i)}),_t}let Socket$1=class XD extends Emitter{constructor(_e,_t={}){super(),this.writeBuffer=[],_e&&typeof _e=="object"&&(_t=_e,_e=null),_e?(_e=parse(_e),_t.hostname=_e.host,_t.secure=_e.protocol==="https"||_e.protocol==="wss",_t.port=_e.port,_e.query&&(_t.query=_e.query)):_t.host&&(_t.hostname=parse(_t.host).host),installTimerFunctions(this,_t),this.secure=_t.secure!=null?_t.secure:typeof location<"u"&&location.protocol==="https:",_t.hostname&&!_t.port&&(_t.port=this.secure?"443":"80"),this.hostname=_t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=_t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=_t.transports||["polling","websocket"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},_t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(_e){const _t=Object.assign({},this.opts.query);_t.EIO=protocol$1,_t.transport=_e,this.id&&(_t.sid=this.id);const Vt=Object.assign({},this.opts.transportOptions[_e],this.opts,{query:_t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new transports[_e](Vt)}open(){let _e;if(this.opts.rememberUpgrade&&XD.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)_e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else _e=this.transports[0];this.readyState="opening";try{_e=this.createTransport(_e)}catch{this.transports.shift(),this.open();return}_e.open(),this.setTransport(_e)}setTransport(_e){this.transport&&this.transport.removeAllListeners(),this.transport=_e,_e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",_t=>this.onClose("transport close",_t))}probe(_e){let _t=this.createTransport(_e),Vt=!1;XD.priorWebsocketSuccess=!1;const Wt=()=>{Vt||(_t.send([{type:"ping",data:"probe"}]),_t.once("packet",e_=>{if(!Vt)if(e_.type==="pong"&&e_.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",_t),!_t)return;XD.priorWebsocketSuccess=_t.name==="websocket",this.transport.pause(()=>{Vt||this.readyState!=="closed"&&(_m(),this.setTransport(_t),_t.send([{type:"upgrade"}]),this.emitReserved("upgrade",_t),_t=null,this.upgrading=!1,this.flush())})}else{const t_=new Error("probe error");t_.transport=_t.name,this.emitReserved("upgradeError",t_)}}))};function _i(){Vt||(Vt=!0,_m(),_t.close(),_t=null)}const _s=e_=>{const t_=new Error("probe error: "+e_);t_.transport=_t.name,_i(),this.emitReserved("upgradeError",t_)};function _c(){_s("transport closed")}function _l(){_s("socket closed")}function _d(e_){_t&&e_.name!==_t.name&&_i()}const _m=()=>{_t.removeListener("open",Wt),_t.removeListener("error",_s),_t.removeListener("close",_c),this.off("close",_l),this.off("upgrading",_d)};_t.once("open",Wt),_t.once("error",_s),_t.once("close",_c),this.once("close",_l),this.once("upgrading",_d),_t.open()}onOpen(){if(this.readyState="open",XD.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let _e=0;const _t=this.upgrades.length;for(;_e<_t;_e++)this.probe(this.upgrades[_e])}}onPacket(_e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",_e),this.emitReserved("heartbeat"),_e.type){case"open":this.onHandshake(JSON.parse(_e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const _t=new Error("server error");_t.code=_e.data,this.onError(_t);break;case"message":this.emitReserved("data",_e.data),this.emitReserved("message",_e.data);break}}onHandshake(_e){this.emitReserved("handshake",_e),this.id=_e.sid,this.transport.query.sid=_e.sid,this.upgrades=this.filterUpgrades(_e.upgrades),this.pingInterval=_e.pingInterval,this.pingTimeout=_e.pingTimeout,this.maxPayload=_e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const _e=this.getWritablePackets();this.transport.send(_e),this.prevBufferLen=_e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let _t=1;for(let Vt=0;Vt<this.writeBuffer.length;Vt++){const Wt=this.writeBuffer[Vt].data;if(Wt&&(_t+=byteLength(Wt)),Vt>0&&_t>this.maxPayload)return this.writeBuffer.slice(0,Vt);_t+=2}return this.writeBuffer}write(_e,_t,Vt){return this.sendPacket("message",_e,_t,Vt),this}send(_e,_t,Vt){return this.sendPacket("message",_e,_t,Vt),this}sendPacket(_e,_t,Vt,Wt){if(typeof _t=="function"&&(Wt=_t,_t=void 0),typeof Vt=="function"&&(Wt=Vt,Vt=null),this.readyState==="closing"||this.readyState==="closed")return;Vt=Vt||{},Vt.compress=Vt.compress!==!1;const _i={type:_e,data:_t,options:Vt};this.emitReserved("packetCreate",_i),this.writeBuffer.push(_i),Wt&&this.once("flush",Wt),this.flush()}close(){const _e=()=>{this.onClose("forced close"),this.transport.close()},_t=()=>{this.off("upgrade",_t),this.off("upgradeError",_t),_e()},Vt=()=>{this.once("upgrade",_t),this.once("upgradeError",_t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?Vt():_e()}):this.upgrading?Vt():_e()),this}onError(_e){XD.priorWebsocketSuccess=!1,this.emitReserved("error",_e),this.onClose("transport error",_e)}onClose(_e,_t){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",_e,_t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(_e){const _t=[];let Vt=0;const Wt=_e.length;for(;Vt<Wt;Vt++)~this.transports.indexOf(_e[Vt])&&_t.push(_e[Vt]);return _t}};Socket$1.protocol=protocol$1;function url($,_e="",_t){let Vt=$;_t=_t||typeof location<"u"&&location,$==null&&($=_t.protocol+"//"+_t.host),typeof $=="string"&&($.charAt(0)==="/"&&($.charAt(1)==="/"?$=_t.protocol+$:$=_t.host+$),/^(https?|wss?):\/\//.test($)||(typeof _t<"u"?$=_t.protocol+"//"+$:$="https://"+$),Vt=parse($)),Vt.port||(/^(http|ws)$/.test(Vt.protocol)?Vt.port="80":/^(http|ws)s$/.test(Vt.protocol)&&(Vt.port="443")),Vt.path=Vt.path||"/";const _i=Vt.host.indexOf(":")!==-1?"["+Vt.host+"]":Vt.host;return Vt.id=Vt.protocol+"://"+_i+":"+Vt.port+_e,Vt.href=Vt.protocol+"://"+_i+(_t&&_t.port===Vt.port?"":":"+Vt.port),Vt}const withNativeArrayBuffer=typeof ArrayBuffer=="function",isView=$=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView($):$.buffer instanceof ArrayBuffer,toString$1=Object.prototype.toString,withNativeBlob=typeof Blob=="function"||typeof Blob<"u"&&toString$1.call(Blob)==="[object BlobConstructor]",withNativeFile=typeof File=="function"||typeof File<"u"&&toString$1.call(File)==="[object FileConstructor]";function isBinary($){return withNativeArrayBuffer&&($ instanceof ArrayBuffer||isView($))||withNativeBlob&&$ instanceof Blob||withNativeFile&&$ instanceof File}function hasBinary($,_e){if(!$||typeof $!="object")return!1;if(Array.isArray($)){for(let _t=0,Vt=$.length;_t<Vt;_t++)if(hasBinary($[_t]))return!0;return!1}if(isBinary($))return!0;if($.toJSON&&typeof $.toJSON=="function"&&arguments.length===1)return hasBinary($.toJSON(),!0);for(const _t in $)if(Object.prototype.hasOwnProperty.call($,_t)&&hasBinary($[_t]))return!0;return!1}function deconstructPacket($){const _e=[],_t=$.data,Vt=$;return Vt.data=_deconstructPacket(_t,_e),Vt.attachments=_e.length,{packet:Vt,buffers:_e}}function _deconstructPacket($,_e){if(!$)return $;if(isBinary($)){const _t={_placeholder:!0,num:_e.length};return _e.push($),_t}else if(Array.isArray($)){const _t=new Array($.length);for(let Vt=0;Vt<$.length;Vt++)_t[Vt]=_deconstructPacket($[Vt],_e);return _t}else if(typeof $=="object"&&!($ instanceof Date)){const _t={};for(const Vt in $)Object.prototype.hasOwnProperty.call($,Vt)&&(_t[Vt]=_deconstructPacket($[Vt],_e));return _t}return $}function reconstructPacket($,_e){return $.data=_reconstructPacket($.data,_e),delete $.attachments,$}function _reconstructPacket($,_e){if(!$)return $;if($&&$._placeholder===!0){if(typeof $.num=="number"&&$.num>=0&&$.num<_e.length)return _e[$.num];throw new Error("illegal attachments")}else if(Array.isArray($))for(let _t=0;_t<$.length;_t++)$[_t]=_reconstructPacket($[_t],_e);else if(typeof $=="object")for(const _t in $)Object.prototype.hasOwnProperty.call($,_t)&&($[_t]=_reconstructPacket($[_t],_e));return $}const protocol=5;var PacketType;(function($){$[$.CONNECT=0]="CONNECT",$[$.DISCONNECT=1]="DISCONNECT",$[$.EVENT=2]="EVENT",$[$.ACK=3]="ACK",$[$.CONNECT_ERROR=4]="CONNECT_ERROR",$[$.BINARY_EVENT=5]="BINARY_EVENT",$[$.BINARY_ACK=6]="BINARY_ACK"})(PacketType||(PacketType={}));class Encoder{constructor(_e){this.replacer=_e}encode(_e){return(_e.type===PacketType.EVENT||_e.type===PacketType.ACK)&&hasBinary(_e)?this.encodeAsBinary({type:_e.type===PacketType.EVENT?PacketType.BINARY_EVENT:PacketType.BINARY_ACK,nsp:_e.nsp,data:_e.data,id:_e.id}):[this.encodeAsString(_e)]}encodeAsString(_e){let _t=""+_e.type;return(_e.type===PacketType.BINARY_EVENT||_e.type===PacketType.BINARY_ACK)&&(_t+=_e.attachments+"-"),_e.nsp&&_e.nsp!=="/"&&(_t+=_e.nsp+","),_e.id!=null&&(_t+=_e.id),_e.data!=null&&(_t+=JSON.stringify(_e.data,this.replacer)),_t}encodeAsBinary(_e){const _t=deconstructPacket(_e),Vt=this.encodeAsString(_t.packet),Wt=_t.buffers;return Wt.unshift(Vt),Wt}}class Decoder extends Emitter{constructor(_e){super(),this.reviver=_e}add(_e){let _t;if(typeof _e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");_t=this.decodeString(_e);const Vt=_t.type===PacketType.BINARY_EVENT;Vt||_t.type===PacketType.BINARY_ACK?(_t.type=Vt?PacketType.EVENT:PacketType.ACK,this.reconstructor=new BinaryReconstructor(_t),_t.attachments===0&&super.emitReserved("decoded",_t)):super.emitReserved("decoded",_t)}else if(isBinary(_e)||_e.base64)if(this.reconstructor)_t=this.reconstructor.takeBinaryData(_e),_t&&(this.reconstructor=null,super.emitReserved("decoded",_t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+_e)}decodeString(_e){let _t=0;const Vt={type:Number(_e.charAt(0))};if(PacketType[Vt.type]===void 0)throw new Error("unknown packet type "+Vt.type);if(Vt.type===PacketType.BINARY_EVENT||Vt.type===PacketType.BINARY_ACK){const _i=_t+1;for(;_e.charAt(++_t)!=="-"&&_t!=_e.length;);const _s=_e.substring(_i,_t);if(_s!=Number(_s)||_e.charAt(_t)!=="-")throw new Error("Illegal attachments");Vt.attachments=Number(_s)}if(_e.charAt(_t+1)==="/"){const _i=_t+1;for(;++_t&&!(_e.charAt(_t)===","||_t===_e.length););Vt.nsp=_e.substring(_i,_t)}else Vt.nsp="/";const Wt=_e.charAt(_t+1);if(Wt!==""&&Number(Wt)==Wt){const _i=_t+1;for(;++_t;){const _s=_e.charAt(_t);if(_s==null||Number(_s)!=_s){--_t;break}if(_t===_e.length)break}Vt.id=Number(_e.substring(_i,_t+1))}if(_e.charAt(++_t)){const _i=this.tryParse(_e.substr(_t));if(Decoder.isPayloadValid(Vt.type,_i))Vt.data=_i;else throw new Error("invalid payload")}return Vt}tryParse(_e){try{return JSON.parse(_e,this.reviver)}catch{return!1}}static isPayloadValid(_e,_t){switch(_e){case PacketType.CONNECT:return typeof _t=="object";case PacketType.DISCONNECT:return _t===void 0;case PacketType.CONNECT_ERROR:return typeof _t=="string"||typeof _t=="object";case PacketType.EVENT:case PacketType.BINARY_EVENT:return Array.isArray(_t)&&(typeof _t[0]=="string"||typeof _t[0]=="number");case PacketType.ACK:case PacketType.BINARY_ACK:return Array.isArray(_t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class BinaryReconstructor{constructor(_e){this.packet=_e,this.buffers=[],this.reconPack=_e}takeBinaryData(_e){if(this.buffers.push(_e),this.buffers.length===this.reconPack.attachments){const _t=reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),_t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const parser=Object.freeze(Object.defineProperty({__proto__:null,Decoder,Encoder,get PacketType(){return PacketType},protocol},Symbol.toStringTag,{value:"Module"}));function on$1($,_e,_t){return $.on(_e,_t),function(){$.off(_e,_t)}}const RESERVED_EVENTS=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Socket extends Emitter{constructor(_e,_t,Vt){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=_e,this.nsp=_t,Vt&&Vt.auth&&(this.auth=Vt.auth),this._opts=Object.assign({},Vt),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const _e=this.io;this.subs=[on$1(_e,"open",this.onopen.bind(this)),on$1(_e,"packet",this.onpacket.bind(this)),on$1(_e,"error",this.onerror.bind(this)),on$1(_e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(..._e){return _e.unshift("message"),this.emit.apply(this,_e),this}emit(_e,..._t){if(RESERVED_EVENTS.hasOwnProperty(_e))throw new Error('"'+_e.toString()+'" is a reserved event name');if(_t.unshift(_e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(_t),this;const Vt={type:PacketType.EVENT,data:_t};if(Vt.options={},Vt.options.compress=this.flags.compress!==!1,typeof _t[_t.length-1]=="function"){const _s=this.ids++,_c=_t.pop();this._registerAckCallback(_s,_c),Vt.id=_s}const Wt=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!Wt||!this.connected)||(this.connected?(this.notifyOutgoingListeners(Vt),this.packet(Vt)):this.sendBuffer.push(Vt)),this.flags={},this}_registerAckCallback(_e,_t){var Vt;const Wt=(Vt=this.flags.timeout)!==null&&Vt!==void 0?Vt:this._opts.ackTimeout;if(Wt===void 0){this.acks[_e]=_t;return}const _i=this.io.setTimeoutFn(()=>{delete this.acks[_e];for(let _s=0;_s<this.sendBuffer.length;_s++)this.sendBuffer[_s].id===_e&&this.sendBuffer.splice(_s,1);_t.call(this,new Error("operation has timed out"))},Wt);this.acks[_e]=(..._s)=>{this.io.clearTimeoutFn(_i),_t.apply(this,[null,..._s])}}emitWithAck(_e,..._t){const Vt=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((Wt,_i)=>{_t.push((_s,_c)=>Vt?_s?_i(_s):Wt(_c):Wt(_s)),this.emit(_e,..._t)})}_addToQueue(_e){let _t;typeof _e[_e.length-1]=="function"&&(_t=_e.pop());const Vt={id:this._queueSeq++,tryCount:0,pending:!1,args:_e,flags:Object.assign({fromQueue:!0},this.flags)};_e.push((Wt,..._i)=>Vt!==this._queue[0]?void 0:(Wt!==null?Vt.tryCount>this._opts.retries&&(this._queue.shift(),_t&&_t(Wt)):(this._queue.shift(),_t&&_t(null,..._i)),Vt.pending=!1,this._drainQueue())),this._queue.push(Vt),this._drainQueue()}_drainQueue(_e=!1){if(!this.connected||this._queue.length===0)return;const _t=this._queue[0];_t.pending&&!_e||(_t.pending=!0,_t.tryCount++,this.flags=_t.flags,this.emit.apply(this,_t.args))}packet(_e){_e.nsp=this.nsp,this.io._packet(_e)}onopen(){typeof this.auth=="function"?this.auth(_e=>{this._sendConnectPacket(_e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(_e){this.packet({type:PacketType.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},_e):_e})}onerror(_e){this.connected||this.emitReserved("connect_error",_e)}onclose(_e,_t){this.connected=!1,delete this.id,this.emitReserved("disconnect",_e,_t)}onpacket(_e){if(_e.nsp===this.nsp)switch(_e.type){case PacketType.CONNECT:_e.data&&_e.data.sid?this.onconnect(_e.data.sid,_e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case PacketType.EVENT:case PacketType.BINARY_EVENT:this.onevent(_e);break;case PacketType.ACK:case PacketType.BINARY_ACK:this.onack(_e);break;case PacketType.DISCONNECT:this.ondisconnect();break;case PacketType.CONNECT_ERROR:this.destroy();const Vt=new Error(_e.data.message);Vt.data=_e.data.data,this.emitReserved("connect_error",Vt);break}}onevent(_e){const _t=_e.data||[];_e.id!=null&&_t.push(this.ack(_e.id)),this.connected?this.emitEvent(_t):this.receiveBuffer.push(Object.freeze(_t))}emitEvent(_e){if(this._anyListeners&&this._anyListeners.length){const _t=this._anyListeners.slice();for(const Vt of _t)Vt.apply(this,_e)}super.emit.apply(this,_e),this._pid&&_e.length&&typeof _e[_e.length-1]=="string"&&(this._lastOffset=_e[_e.length-1])}ack(_e){const _t=this;let Vt=!1;return function(...Wt){Vt||(Vt=!0,_t.packet({type:PacketType.ACK,id:_e,data:Wt}))}}onack(_e){const _t=this.acks[_e.id];typeof _t=="function"&&(_t.apply(this,_e.data),delete this.acks[_e.id])}onconnect(_e,_t){this.id=_e,this.recovered=_t&&this._pid===_t,this._pid=_t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(_e=>this.emitEvent(_e)),this.receiveBuffer=[],this.sendBuffer.forEach(_e=>{this.notifyOutgoingListeners(_e),this.packet(_e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(_e=>_e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:PacketType.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(_e){return this.flags.compress=_e,this}get volatile(){return this.flags.volatile=!0,this}timeout(_e){return this.flags.timeout=_e,this}onAny(_e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(_e),this}prependAny(_e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(_e),this}offAny(_e){if(!this._anyListeners)return this;if(_e){const _t=this._anyListeners;for(let Vt=0;Vt<_t.length;Vt++)if(_e===_t[Vt])return _t.splice(Vt,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(_e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(_e),this}prependAnyOutgoing(_e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(_e),this}offAnyOutgoing(_e){if(!this._anyOutgoingListeners)return this;if(_e){const _t=this._anyOutgoingListeners;for(let Vt=0;Vt<_t.length;Vt++)if(_e===_t[Vt])return _t.splice(Vt,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(_e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const _t=this._anyOutgoingListeners.slice();for(const Vt of _t)Vt.apply(this,_e.data)}}}function Backoff($){$=$||{},this.ms=$.min||100,this.max=$.max||1e4,this.factor=$.factor||2,this.jitter=$.jitter>0&&$.jitter<=1?$.jitter:0,this.attempts=0}Backoff.prototype.duration=function(){var $=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var _e=Math.random(),_t=Math.floor(_e*this.jitter*$);$=Math.floor(_e*10)&1?$+_t:$-_t}return Math.min($,this.max)|0};Backoff.prototype.reset=function(){this.attempts=0};Backoff.prototype.setMin=function($){this.ms=$};Backoff.prototype.setMax=function($){this.max=$};Backoff.prototype.setJitter=function($){this.jitter=$};class Manager extends Emitter{constructor(_e,_t){var Vt;super(),this.nsps={},this.subs=[],_e&&typeof _e=="object"&&(_t=_e,_e=void 0),_t=_t||{},_t.path=_t.path||"/socket.io",this.opts=_t,installTimerFunctions(this,_t),this.reconnection(_t.reconnection!==!1),this.reconnectionAttempts(_t.reconnectionAttempts||1/0),this.reconnectionDelay(_t.reconnectionDelay||1e3),this.reconnectionDelayMax(_t.reconnectionDelayMax||5e3),this.randomizationFactor((Vt=_t.randomizationFactor)!==null&&Vt!==void 0?Vt:.5),this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(_t.timeout==null?2e4:_t.timeout),this._readyState="closed",this.uri=_e;const Wt=_t.parser||parser;this.encoder=new Wt.Encoder,this.decoder=new Wt.Decoder,this._autoConnect=_t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(_e){return arguments.length?(this._reconnection=!!_e,this):this._reconnection}reconnectionAttempts(_e){return _e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=_e,this)}reconnectionDelay(_e){var _t;return _e===void 0?this._reconnectionDelay:(this._reconnectionDelay=_e,(_t=this.backoff)===null||_t===void 0||_t.setMin(_e),this)}randomizationFactor(_e){var _t;return _e===void 0?this._randomizationFactor:(this._randomizationFactor=_e,(_t=this.backoff)===null||_t===void 0||_t.setJitter(_e),this)}reconnectionDelayMax(_e){var _t;return _e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=_e,(_t=this.backoff)===null||_t===void 0||_t.setMax(_e),this)}timeout(_e){return arguments.length?(this._timeout=_e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(_e){if(~this._readyState.indexOf("open"))return this;this.engine=new Socket$1(this.uri,this.opts);const _t=this.engine,Vt=this;this._readyState="opening",this.skipReconnect=!1;const Wt=on$1(_t,"open",function(){Vt.onopen(),_e&&_e()}),_i=on$1(_t,"error",_s=>{Vt.cleanup(),Vt._readyState="closed",this.emitReserved("error",_s),_e?_e(_s):Vt.maybeReconnectOnOpen()});if(this._timeout!==!1){const _s=this._timeout;_s===0&&Wt();const _c=this.setTimeoutFn(()=>{Wt(),_t.close(),_t.emit("error",new Error("timeout"))},_s);this.opts.autoUnref&&_c.unref(),this.subs.push(function(){clearTimeout(_c)})}return this.subs.push(Wt),this.subs.push(_i),this}connect(_e){return this.open(_e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const _e=this.engine;this.subs.push(on$1(_e,"ping",this.onping.bind(this)),on$1(_e,"data",this.ondata.bind(this)),on$1(_e,"error",this.onerror.bind(this)),on$1(_e,"close",this.onclose.bind(this)),on$1(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(_e){try{this.decoder.add(_e)}catch(_t){this.onclose("parse error",_t)}}ondecoded(_e){nextTick(()=>{this.emitReserved("packet",_e)},this.setTimeoutFn)}onerror(_e){this.emitReserved("error",_e)}socket(_e,_t){let Vt=this.nsps[_e];return Vt?this._autoConnect&&!Vt.active&&Vt.connect():(Vt=new Socket(this,_e,_t),this.nsps[_e]=Vt),Vt}_destroy(_e){const _t=Object.keys(this.nsps);for(const Vt of _t)if(this.nsps[Vt].active)return;this._close()}_packet(_e){const _t=this.encoder.encode(_e);for(let Vt=0;Vt<_t.length;Vt++)this.engine.write(_t[Vt],_e.options)}cleanup(){this.subs.forEach(_e=>_e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(_e,_t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",_e,_t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const _e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const _t=this.backoff.duration();this._reconnecting=!0;const Vt=this.setTimeoutFn(()=>{_e.skipReconnect||(this.emitReserved("reconnect_attempt",_e.backoff.attempts),!_e.skipReconnect&&_e.open(Wt=>{Wt?(_e._reconnecting=!1,_e.reconnect(),this.emitReserved("reconnect_error",Wt)):_e.onreconnect()}))},_t);this.opts.autoUnref&&Vt.unref(),this.subs.push(function(){clearTimeout(Vt)})}}onreconnect(){const _e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",_e)}}const cache$2={};function lookup($,_e){typeof $=="object"&&(_e=$,$=void 0),_e=_e||{};const _t=url($,_e.path||"/socket.io"),Vt=_t.source,Wt=_t.id,_i=_t.path,_s=cache$2[Wt]&&_i in cache$2[Wt].nsps,_c=_e.forceNew||_e["force new connection"]||_e.multiplex===!1||_s;let _l;return _c?_l=new Manager(Vt,_e):(cache$2[Wt]||(cache$2[Wt]=new Manager(Vt,_e)),_l=cache$2[Wt]),_t.query&&!_e.query&&(_e.query=_t.queryKey),_l.socket(_t.path,_e)}Object.assign(lookup,{Manager,Socket,io:lookup,connect:lookup});const layoutStyle="";function bind($,_e){return function(){return $.apply(_e,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=($=>_e=>{const _t=toString.call(_e);return $[_t]||($[_t]=_t.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=$=>($=$.toLowerCase(),_e=>kindOf(_e)===$),typeOfTest=$=>_e=>typeof _e===$,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer($){return $!==null&&!isUndefined($)&&$.constructor!==null&&!isUndefined($.constructor)&&isFunction$1($.constructor.isBuffer)&&$.constructor.isBuffer($)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView($){let _e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?_e=ArrayBuffer.isView($):_e=$&&$.buffer&&isArrayBuffer($.buffer),_e}const isString=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber=typeOfTest("number"),isObject$1=$=>$!==null&&typeof $=="object",isBoolean$1=$=>$===!0||$===!1,isPlainObject$3=$=>{if(kindOf($)!=="object")return!1;const _e=getPrototypeOf($);return(_e===null||_e===Object.prototype||Object.getPrototypeOf(_e)===null)&&!(Symbol.toStringTag in $)&&!(Symbol.iterator in $)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=$=>isObject$1($)&&isFunction$1($.pipe),isFormData=$=>{const _e="[object FormData]";return $&&(typeof FormData=="function"&&$ instanceof FormData||toString.call($)===_e||isFunction$1($.toString)&&$.toString()===_e)},isURLSearchParams=kindOfTest("URLSearchParams"),trim=$=>$.trim?$.trim():$.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach($,_e,{allOwnKeys:_t=!1}={}){if($===null||typeof $>"u")return;let Vt,Wt;if(typeof $!="object"&&($=[$]),isArray($))for(Vt=0,Wt=$.length;Vt<Wt;Vt++)_e.call(null,$[Vt],Vt,$);else{const _i=_t?Object.getOwnPropertyNames($):Object.keys($),_s=_i.length;let _c;for(Vt=0;Vt<_s;Vt++)_c=_i[Vt],_e.call(null,$[_c],_c,$)}}function findKey($,_e){_e=_e.toLowerCase();const _t=Object.keys($);let Vt=_t.length,Wt;for(;Vt-- >0;)if(Wt=_t[Vt],_e===Wt.toLowerCase())return Wt;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),isContextDefined=$=>!isUndefined($)&&$!==_global;function merge(){const{caseless:$}=isContextDefined(this)&&this||{},_e={},_t=(Vt,Wt)=>{const _i=$&&findKey(_e,Wt)||Wt;isPlainObject$3(_e[_i])&&isPlainObject$3(Vt)?_e[_i]=merge(_e[_i],Vt):isPlainObject$3(Vt)?_e[_i]=merge({},Vt):isArray(Vt)?_e[_i]=Vt.slice():_e[_i]=Vt};for(let Vt=0,Wt=arguments.length;Vt<Wt;Vt++)arguments[Vt]&&forEach(arguments[Vt],_t);return _e}const extend=($,_e,_t,{allOwnKeys:Vt}={})=>(forEach(_e,(Wt,_i)=>{_t&&isFunction$1(Wt)?$[_i]=bind(Wt,_t):$[_i]=Wt},{allOwnKeys:Vt}),$),stripBOM=$=>($.charCodeAt(0)===65279&&($=$.slice(1)),$),inherits=($,_e,_t,Vt)=>{$.prototype=Object.create(_e.prototype,Vt),$.prototype.constructor=$,Object.defineProperty($,"super",{value:_e.prototype}),_t&&Object.assign($.prototype,_t)},toFlatObject=($,_e,_t,Vt)=>{let Wt,_i,_s;const _c={};if(_e=_e||{},$==null)return _e;do{for(Wt=Object.getOwnPropertyNames($),_i=Wt.length;_i-- >0;)_s=Wt[_i],(!Vt||Vt(_s,$,_e))&&!_c[_s]&&(_e[_s]=$[_s],_c[_s]=!0);$=_t!==!1&&getPrototypeOf($)}while($&&(!_t||_t($,_e))&&$!==Object.prototype);return _e},endsWith=($,_e,_t)=>{$=String($),(_t===void 0||_t>$.length)&&(_t=$.length),_t-=_e.length;const Vt=$.indexOf(_e,_t);return Vt!==-1&&Vt===_t},toArray=$=>{if(!$)return null;if(isArray($))return $;let _e=$.length;if(!isNumber(_e))return null;const _t=new Array(_e);for(;_e-- >0;)_t[_e]=$[_e];return _t},isTypedArray=($=>_e=>$&&_e instanceof $)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=($,_e)=>{const Vt=($&&$[Symbol.iterator]).call($);let Wt;for(;(Wt=Vt.next())&&!Wt.done;){const _i=Wt.value;_e.call($,_i[0],_i[1])}},matchAll=($,_e)=>{let _t;const Vt=[];for(;(_t=$.exec(_e))!==null;)Vt.push(_t);return Vt},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=$=>$.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(_t,Vt,Wt){return Vt.toUpperCase()+Wt}),hasOwnProperty=(({hasOwnProperty:$})=>(_e,_t)=>$.call(_e,_t))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=($,_e)=>{const _t=Object.getOwnPropertyDescriptors($),Vt={};forEach(_t,(Wt,_i)=>{_e(Wt,_i,$)!==!1&&(Vt[_i]=Wt)}),Object.defineProperties($,Vt)},freezeMethods=$=>{reduceDescriptors($,(_e,_t)=>{if(isFunction$1($)&&["arguments","caller","callee"].indexOf(_t)!==-1)return!1;const Vt=$[_t];if(isFunction$1(Vt)){if(_e.enumerable=!1,"writable"in _e){_e.writable=!1;return}_e.set||(_e.set=()=>{throw Error("Can not rewrite read-only method '"+_t+"'")})}})},toObjectSet=($,_e)=>{const _t={},Vt=Wt=>{Wt.forEach(_i=>{_t[_i]=!0})};return isArray($)?Vt($):Vt(String($).split(_e)),_t},noop$2=()=>{},toFiniteNumber=($,_e)=>($=+$,Number.isFinite($)?$:_e),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=($=16,_e=ALPHABET.ALPHA_DIGIT)=>{let _t="";const{length:Vt}=_e;for(;$--;)_t+=_e[Math.random()*Vt|0];return _t};function isSpecCompliantForm($){return!!($&&isFunction$1($.append)&&$[Symbol.toStringTag]==="FormData"&&$[Symbol.iterator])}const toJSONObject=$=>{const _e=new Array(10),_t=(Vt,Wt)=>{if(isObject$1(Vt)){if(_e.indexOf(Vt)>=0)return;if(!("toJSON"in Vt)){_e[Wt]=Vt;const _i=isArray(Vt)?[]:{};return forEach(Vt,(_s,_c)=>{const _l=_t(_s,Wt+1);!isUndefined(_l)&&(_i[_c]=_l)}),_e[Wt]=void 0,_i}}return Vt};return _t($,0)},utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean:isBoolean$1,isObject:isObject$1,isPlainObject:isPlainObject$3,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$2,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject};function AxiosError($,_e,_t,Vt,Wt){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=$,this.name="AxiosError",_e&&(this.code=_e),_t&&(this.config=_t),Vt&&(this.request=Vt),Wt&&(this.response=Wt)}utils$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach($=>{descriptors[$]={value:$}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=($,_e,_t,Vt,Wt,_i)=>{const _s=Object.create(prototype$1);return utils$1.toFlatObject($,_s,function(_l){return _l!==Error.prototype},_c=>_c!=="isAxiosError"),AxiosError.call(_s,$.message,_e,_t,Vt,Wt),_s.cause=$,_s.name=$.name,_i&&Object.assign(_s,_i),_s};const httpAdapter=null;function isVisitable($){return utils$1.isPlainObject($)||utils$1.isArray($)}function removeBrackets($){return utils$1.endsWith($,"[]")?$.slice(0,-2):$}function renderKey($,_e,_t){return $?$.concat(_e).map(function(Wt,_i){return Wt=removeBrackets(Wt),!_t&&_i?"["+Wt+"]":Wt}).join(_t?".":""):_e}function isFlatArray($){return utils$1.isArray($)&&!$.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(_e){return/^is[A-Z]/.test(_e)});function toFormData($,_e,_t){if(!utils$1.isObject($))throw new TypeError("target must be an object");_e=_e||new FormData,_t=utils$1.toFlatObject(_t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h_,y_){return!utils$1.isUndefined(y_[h_])});const Vt=_t.metaTokens,Wt=_t.visitor||_m,_i=_t.dots,_s=_t.indexes,_l=(_t.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(_e);if(!utils$1.isFunction(Wt))throw new TypeError("visitor must be a function");function _d(c_){if(c_===null)return"";if(utils$1.isDate(c_))return c_.toISOString();if(!_l&&utils$1.isBlob(c_))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(c_)||utils$1.isTypedArray(c_)?_l&&typeof Blob=="function"?new Blob([c_]):Buffer.from(c_):c_}function _m(c_,h_,y_){let l_=c_;if(c_&&!y_&&typeof c_=="object"){if(utils$1.endsWith(h_,"{}"))h_=Vt?h_:h_.slice(0,-2),c_=JSON.stringify(c_);else if(utils$1.isArray(c_)&&isFlatArray(c_)||(utils$1.isFileList(c_)||utils$1.endsWith(h_,"[]"))&&(l_=utils$1.toArray(c_)))return h_=removeBrackets(h_),l_.forEach(function(f_,S_){!(utils$1.isUndefined(f_)||f_===null)&&_e.append(_s===!0?renderKey([h_],S_,_i):_s===null?h_:h_+"[]",_d(f_))}),!1}return isVisitable(c_)?!0:(_e.append(renderKey(y_,h_,_i),_d(c_)),!1)}const e_=[],t_=Object.assign(predicates,{defaultVisitor:_m,convertValue:_d,isVisitable});function i_(c_,h_){if(!utils$1.isUndefined(c_)){if(e_.indexOf(c_)!==-1)throw Error("Circular reference detected in "+h_.join("."));e_.push(c_),utils$1.forEach(c_,function(l_,d_){(!(utils$1.isUndefined(l_)||l_===null)&&Wt.call(_e,l_,utils$1.isString(d_)?d_.trim():d_,h_,t_))===!0&&i_(l_,h_?h_.concat(d_):[d_])}),e_.pop()}}if(!utils$1.isObject($))throw new TypeError("data must be an object");return i_($),_e}function encode$1($){const _e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent($).replace(/[!'()~]|%20|%00/g,function(Vt){return _e[Vt]})}function AxiosURLSearchParams($,_e){this._pairs=[],$&&toFormData($,this,_e)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(_e,_t){this._pairs.push([_e,_t])};prototype.toString=function(_e){const _t=_e?function(Vt){return _e.call(this,Vt,encode$1)}:encode$1;return this._pairs.map(function(Wt){return _t(Wt[0])+"="+_t(Wt[1])},"").join("&")};function encode($){return encodeURIComponent($).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL($,_e,_t){if(!_e)return $;const Vt=_t&&_t.encode||encode,Wt=_t&&_t.serialize;let _i;if(Wt?_i=Wt(_e,_t):_i=utils$1.isURLSearchParams(_e)?_e.toString():new AxiosURLSearchParams(_e,_t).toString(Vt),_i){const _s=$.indexOf("#");_s!==-1&&($=$.slice(0,_s)),$+=($.indexOf("?")===-1?"?":"&")+_i}return $}class InterceptorManager{constructor(){this.handlers=[]}use(_e,_t,Vt){return this.handlers.push({fulfilled:_e,rejected:_t,synchronous:Vt?Vt.synchronous:!1,runWhen:Vt?Vt.runWhen:null}),this.handlers.length-1}eject(_e){this.handlers[_e]&&(this.handlers[_e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(_e){utils$1.forEach(this.handlers,function(Vt){Vt!==null&&_e(Vt)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,isStandardBrowserEnv=(()=>{let $;return typeof navigator<"u"&&(($=navigator.product)==="ReactNative"||$==="NativeScript"||$==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),isStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),platform={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},isStandardBrowserEnv,isStandardBrowserWebWorkerEnv,protocols:["http","https","file","blob","url","data"]};function toURLEncodedForm($,_e){return toFormData($,new platform.classes.URLSearchParams,Object.assign({visitor:function(_t,Vt,Wt,_i){return platform.isNode&&utils$1.isBuffer(_t)?(this.append(Vt,_t.toString("base64")),!1):_i.defaultVisitor.apply(this,arguments)}},_e))}function parsePropPath($){return utils$1.matchAll(/\w+|\[(\w*)]/g,$).map(_e=>_e[0]==="[]"?"":_e[1]||_e[0])}function arrayToObject($){const _e={},_t=Object.keys($);let Vt;const Wt=_t.length;let _i;for(Vt=0;Vt<Wt;Vt++)_i=_t[Vt],_e[_i]=$[_i];return _e}function formDataToJSON($){function _e(_t,Vt,Wt,_i){let _s=_t[_i++];const _c=Number.isFinite(+_s),_l=_i>=_t.length;return _s=!_s&&utils$1.isArray(Wt)?Wt.length:_s,_l?(utils$1.hasOwnProp(Wt,_s)?Wt[_s]=[Wt[_s],Vt]:Wt[_s]=Vt,!_c):((!Wt[_s]||!utils$1.isObject(Wt[_s]))&&(Wt[_s]=[]),_e(_t,Vt,Wt[_s],_i)&&utils$1.isArray(Wt[_s])&&(Wt[_s]=arrayToObject(Wt[_s])),!_c)}if(utils$1.isFormData($)&&utils$1.isFunction($.entries)){const _t={};return utils$1.forEachEntry($,(Vt,Wt)=>{_e(parsePropPath(Vt),Wt,_t,0)}),_t}return null}const DEFAULT_CONTENT_TYPE={"Content-Type":void 0};function stringifySafely($,_e,_t){if(utils$1.isString($))try{return(_e||JSON.parse)($),utils$1.trim($)}catch(Vt){if(Vt.name!=="SyntaxError")throw Vt}return(_t||JSON.stringify)($)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function(_e,_t){const Vt=_t.getContentType()||"",Wt=Vt.indexOf("application/json")>-1,_i=utils$1.isObject(_e);if(_i&&utils$1.isHTMLForm(_e)&&(_e=new FormData(_e)),utils$1.isFormData(_e))return Wt&&Wt?JSON.stringify(formDataToJSON(_e)):_e;if(utils$1.isArrayBuffer(_e)||utils$1.isBuffer(_e)||utils$1.isStream(_e)||utils$1.isFile(_e)||utils$1.isBlob(_e))return _e;if(utils$1.isArrayBufferView(_e))return _e.buffer;if(utils$1.isURLSearchParams(_e))return _t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),_e.toString();let _c;if(_i){if(Vt.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(_e,this.formSerializer).toString();if((_c=utils$1.isFileList(_e))||Vt.indexOf("multipart/form-data")>-1){const _l=this.env&&this.env.FormData;return toFormData(_c?{"files[]":_e}:_e,_l&&new _l,this.formSerializer)}}return _i||Wt?(_t.setContentType("application/json",!1),stringifySafely(_e)):_e}],transformResponse:[function(_e){const _t=this.transitional||defaults.transitional,Vt=_t&&_t.forcedJSONParsing,Wt=this.responseType==="json";if(_e&&utils$1.isString(_e)&&(Vt&&!this.responseType||Wt)){const _s=!(_t&&_t.silentJSONParsing)&&Wt;try{return JSON.parse(_e)}catch(_c){if(_s)throw _c.name==="SyntaxError"?AxiosError.from(_c,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):_c}}return _e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(_e){return _e>=200&&_e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils$1.forEach(["delete","get","head"],function(_e){defaults.headers[_e]={}});utils$1.forEach(["post","put","patch"],function(_e){defaults.headers[_e]=utils$1.merge(DEFAULT_CONTENT_TYPE)});const defaults$1=defaults,ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=$=>{const _e={};let _t,Vt,Wt;return $&&$.split(`
`).forEach(function(_s){Wt=_s.indexOf(":"),_t=_s.substring(0,Wt).trim().toLowerCase(),Vt=_s.substring(Wt+1).trim(),!(!_t||_e[_t]&&ignoreDuplicateOf[_t])&&(_t==="set-cookie"?_e[_t]?_e[_t].push(Vt):_e[_t]=[Vt]:_e[_t]=_e[_t]?_e[_t]+", "+Vt:Vt)}),_e},$internals=Symbol("internals");function normalizeHeader($){return $&&String($).trim().toLowerCase()}function normalizeValue($){return $===!1||$==null?$:utils$1.isArray($)?$.map(normalizeValue):String($)}function parseTokens($){const _e=Object.create(null),_t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let Vt;for(;Vt=_t.exec($);)_e[Vt[1]]=Vt[2];return _e}function isValidHeaderName($){return/^[-_a-zA-Z]+$/.test($.trim())}function matchHeaderValue($,_e,_t,Vt,Wt){if(utils$1.isFunction(Vt))return Vt.call(this,_e,_t);if(Wt&&(_e=_t),!!utils$1.isString(_e)){if(utils$1.isString(Vt))return _e.indexOf(Vt)!==-1;if(utils$1.isRegExp(Vt))return Vt.test(_e)}}function formatHeader($){return $.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(_e,_t,Vt)=>_t.toUpperCase()+Vt)}function buildAccessors($,_e){const _t=utils$1.toCamelCase(" "+_e);["get","set","has"].forEach(Vt=>{Object.defineProperty($,Vt+_t,{value:function(Wt,_i,_s){return this[Vt].call(this,_e,Wt,_i,_s)},configurable:!0})})}class AxiosHeaders{constructor(_e){_e&&this.set(_e)}set(_e,_t,Vt){const Wt=this;function _i(_c,_l,_d){const _m=normalizeHeader(_l);if(!_m)throw new Error("header name must be a non-empty string");const e_=utils$1.findKey(Wt,_m);(!e_||Wt[e_]===void 0||_d===!0||_d===void 0&&Wt[e_]!==!1)&&(Wt[e_||_l]=normalizeValue(_c))}const _s=(_c,_l)=>utils$1.forEach(_c,(_d,_m)=>_i(_d,_m,_l));return utils$1.isPlainObject(_e)||_e instanceof this.constructor?_s(_e,_t):utils$1.isString(_e)&&(_e=_e.trim())&&!isValidHeaderName(_e)?_s(parseHeaders(_e),_t):_e!=null&&_i(_t,_e,Vt),this}get(_e,_t){if(_e=normalizeHeader(_e),_e){const Vt=utils$1.findKey(this,_e);if(Vt){const Wt=this[Vt];if(!_t)return Wt;if(_t===!0)return parseTokens(Wt);if(utils$1.isFunction(_t))return _t.call(this,Wt,Vt);if(utils$1.isRegExp(_t))return _t.exec(Wt);throw new TypeError("parser must be boolean|regexp|function")}}}has(_e,_t){if(_e=normalizeHeader(_e),_e){const Vt=utils$1.findKey(this,_e);return!!(Vt&&this[Vt]!==void 0&&(!_t||matchHeaderValue(this,this[Vt],Vt,_t)))}return!1}delete(_e,_t){const Vt=this;let Wt=!1;function _i(_s){if(_s=normalizeHeader(_s),_s){const _c=utils$1.findKey(Vt,_s);_c&&(!_t||matchHeaderValue(Vt,Vt[_c],_c,_t))&&(delete Vt[_c],Wt=!0)}}return utils$1.isArray(_e)?_e.forEach(_i):_i(_e),Wt}clear(_e){const _t=Object.keys(this);let Vt=_t.length,Wt=!1;for(;Vt--;){const _i=_t[Vt];(!_e||matchHeaderValue(this,this[_i],_i,_e,!0))&&(delete this[_i],Wt=!0)}return Wt}normalize(_e){const _t=this,Vt={};return utils$1.forEach(this,(Wt,_i)=>{const _s=utils$1.findKey(Vt,_i);if(_s){_t[_s]=normalizeValue(Wt),delete _t[_i];return}const _c=_e?formatHeader(_i):String(_i).trim();_c!==_i&&delete _t[_i],_t[_c]=normalizeValue(Wt),Vt[_c]=!0}),this}concat(..._e){return this.constructor.concat(this,..._e)}toJSON(_e){const _t=Object.create(null);return utils$1.forEach(this,(Vt,Wt)=>{Vt!=null&&Vt!==!1&&(_t[Wt]=_e&&utils$1.isArray(Vt)?Vt.join(", "):Vt)}),_t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([_e,_t])=>_e+": "+_t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(_e){return _e instanceof this?_e:new this(_e)}static concat(_e,..._t){const Vt=new this(_e);return _t.forEach(Wt=>Vt.set(Wt)),Vt}static accessor(_e){const Vt=(this[$internals]=this[$internals]={accessors:{}}).accessors,Wt=this.prototype;function _i(_s){const _c=normalizeHeader(_s);Vt[_c]||(buildAccessors(Wt,_s),Vt[_c]=!0)}return utils$1.isArray(_e)?_e.forEach(_i):_i(_e),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.freezeMethods(AxiosHeaders.prototype);utils$1.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData($,_e){const _t=this||defaults$1,Vt=_e||_t,Wt=AxiosHeaders$1.from(Vt.headers);let _i=Vt.data;return utils$1.forEach($,function(_c){_i=_c.call(_t,_i,Wt.normalize(),_e?_e.status:void 0)}),Wt.normalize(),_i}function isCancel($){return!!($&&$.__CANCEL__)}function CanceledError($,_e,_t){AxiosError.call(this,$??"canceled",AxiosError.ERR_CANCELED,_e,_t),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle($,_e,_t){const Vt=_t.config.validateStatus;!_t.status||!Vt||Vt(_t.status)?$(_t):_e(new AxiosError("Request failed with status code "+_t.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(_t.status/100)-4],_t.config,_t.request,_t))}const cookies=platform.isStandardBrowserEnv?function(){return{write:function(_t,Vt,Wt,_i,_s,_c){const _l=[];_l.push(_t+"="+encodeURIComponent(Vt)),utils$1.isNumber(Wt)&&_l.push("expires="+new Date(Wt).toGMTString()),utils$1.isString(_i)&&_l.push("path="+_i),utils$1.isString(_s)&&_l.push("domain="+_s),_c===!0&&_l.push("secure"),document.cookie=_l.join("; ")},read:function(_t){const Vt=document.cookie.match(new RegExp("(^|;\\s*)("+_t+")=([^;]*)"));return Vt?decodeURIComponent(Vt[3]):null},remove:function(_t){this.write(_t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function isAbsoluteURL($){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test($)}function combineURLs($,_e){return _e?$.replace(/\/+$/,"")+"/"+_e.replace(/^\/+/,""):$}function buildFullPath($,_e){return $&&!isAbsoluteURL(_e)?combineURLs($,_e):_e}const isURLSameOrigin=platform.isStandardBrowserEnv?function(){const _e=/(msie|trident)/i.test(navigator.userAgent),_t=document.createElement("a");let Vt;function Wt(_i){let _s=_i;return _e&&(_t.setAttribute("href",_s),_s=_t.href),_t.setAttribute("href",_s),{href:_t.href,protocol:_t.protocol?_t.protocol.replace(/:$/,""):"",host:_t.host,search:_t.search?_t.search.replace(/^\?/,""):"",hash:_t.hash?_t.hash.replace(/^#/,""):"",hostname:_t.hostname,port:_t.port,pathname:_t.pathname.charAt(0)==="/"?_t.pathname:"/"+_t.pathname}}return Vt=Wt(window.location.href),function(_s){const _c=utils$1.isString(_s)?Wt(_s):_s;return _c.protocol===Vt.protocol&&_c.host===Vt.host}}():function(){return function(){return!0}}();function parseProtocol($){const _e=/^([-+\w]{1,25})(:?\/\/|:)/.exec($);return _e&&_e[1]||""}function speedometer($,_e){$=$||10;const _t=new Array($),Vt=new Array($);let Wt=0,_i=0,_s;return _e=_e!==void 0?_e:1e3,function(_l){const _d=Date.now(),_m=Vt[_i];_s||(_s=_d),_t[Wt]=_l,Vt[Wt]=_d;let e_=_i,t_=0;for(;e_!==Wt;)t_+=_t[e_++],e_=e_%$;if(Wt=(Wt+1)%$,Wt===_i&&(_i=(_i+1)%$),_d-_s<_e)return;const i_=_m&&_d-_m;return i_?Math.round(t_*1e3/i_):void 0}}function progressEventReducer($,_e){let _t=0;const Vt=speedometer(50,250);return Wt=>{const _i=Wt.loaded,_s=Wt.lengthComputable?Wt.total:void 0,_c=_i-_t,_l=Vt(_c),_d=_i<=_s;_t=_i;const _m={loaded:_i,total:_s,progress:_s?_i/_s:void 0,bytes:_c,rate:_l||void 0,estimated:_l&&_s&&_d?(_s-_i)/_l:void 0,event:Wt};_m[_e?"download":"upload"]=!0,$(_m)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function($){return new Promise(function(_t,Vt){let Wt=$.data;const _i=AxiosHeaders$1.from($.headers).normalize(),_s=$.responseType;let _c;function _l(){$.cancelToken&&$.cancelToken.unsubscribe(_c),$.signal&&$.signal.removeEventListener("abort",_c)}utils$1.isFormData(Wt)&&(platform.isStandardBrowserEnv||platform.isStandardBrowserWebWorkerEnv)&&_i.setContentType(!1);let _d=new XMLHttpRequest;if($.auth){const i_=$.auth.username||"",c_=$.auth.password?unescape(encodeURIComponent($.auth.password)):"";_i.set("Authorization","Basic "+btoa(i_+":"+c_))}const _m=buildFullPath($.baseURL,$.url);_d.open($.method.toUpperCase(),buildURL(_m,$.params,$.paramsSerializer),!0),_d.timeout=$.timeout;function e_(){if(!_d)return;const i_=AxiosHeaders$1.from("getAllResponseHeaders"in _d&&_d.getAllResponseHeaders()),h_={data:!_s||_s==="text"||_s==="json"?_d.responseText:_d.response,status:_d.status,statusText:_d.statusText,headers:i_,config:$,request:_d};settle(function(l_){_t(l_),_l()},function(l_){Vt(l_),_l()},h_),_d=null}if("onloadend"in _d?_d.onloadend=e_:_d.onreadystatechange=function(){!_d||_d.readyState!==4||_d.status===0&&!(_d.responseURL&&_d.responseURL.indexOf("file:")===0)||setTimeout(e_)},_d.onabort=function(){_d&&(Vt(new AxiosError("Request aborted",AxiosError.ECONNABORTED,$,_d)),_d=null)},_d.onerror=function(){Vt(new AxiosError("Network Error",AxiosError.ERR_NETWORK,$,_d)),_d=null},_d.ontimeout=function(){let c_=$.timeout?"timeout of "+$.timeout+"ms exceeded":"timeout exceeded";const h_=$.transitional||transitionalDefaults;$.timeoutErrorMessage&&(c_=$.timeoutErrorMessage),Vt(new AxiosError(c_,h_.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,$,_d)),_d=null},platform.isStandardBrowserEnv){const i_=($.withCredentials||isURLSameOrigin(_m))&&$.xsrfCookieName&&cookies.read($.xsrfCookieName);i_&&_i.set($.xsrfHeaderName,i_)}Wt===void 0&&_i.setContentType(null),"setRequestHeader"in _d&&utils$1.forEach(_i.toJSON(),function(c_,h_){_d.setRequestHeader(h_,c_)}),utils$1.isUndefined($.withCredentials)||(_d.withCredentials=!!$.withCredentials),_s&&_s!=="json"&&(_d.responseType=$.responseType),typeof $.onDownloadProgress=="function"&&_d.addEventListener("progress",progressEventReducer($.onDownloadProgress,!0)),typeof $.onUploadProgress=="function"&&_d.upload&&_d.upload.addEventListener("progress",progressEventReducer($.onUploadProgress)),($.cancelToken||$.signal)&&(_c=i_=>{_d&&(Vt(!i_||i_.type?new CanceledError(null,$,_d):i_),_d.abort(),_d=null)},$.cancelToken&&$.cancelToken.subscribe(_c),$.signal&&($.signal.aborted?_c():$.signal.addEventListener("abort",_c)));const t_=parseProtocol(_m);if(t_&&platform.protocols.indexOf(t_)===-1){Vt(new AxiosError("Unsupported protocol "+t_+":",AxiosError.ERR_BAD_REQUEST,$));return}_d.send(Wt||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils$1.forEach(knownAdapters,($,_e)=>{if($){try{Object.defineProperty($,"name",{value:_e})}catch{}Object.defineProperty($,"adapterName",{value:_e})}});const adapters={getAdapter:$=>{$=utils$1.isArray($)?$:[$];const{length:_e}=$;let _t,Vt;for(let Wt=0;Wt<_e&&(_t=$[Wt],!(Vt=utils$1.isString(_t)?knownAdapters[_t.toLowerCase()]:_t));Wt++);if(!Vt)throw Vt===!1?new AxiosError(`Adapter ${_t} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(utils$1.hasOwnProp(knownAdapters,_t)?`Adapter '${_t}' is not available in the build`:`Unknown adapter '${_t}'`);if(!utils$1.isFunction(Vt))throw new TypeError("adapter is not a function");return Vt},adapters:knownAdapters};function throwIfCancellationRequested($){if($.cancelToken&&$.cancelToken.throwIfRequested(),$.signal&&$.signal.aborted)throw new CanceledError(null,$)}function dispatchRequest($){return throwIfCancellationRequested($),$.headers=AxiosHeaders$1.from($.headers),$.data=transformData.call($,$.transformRequest),["post","put","patch"].indexOf($.method)!==-1&&$.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter($.adapter||defaults$1.adapter)($).then(function(Vt){return throwIfCancellationRequested($),Vt.data=transformData.call($,$.transformResponse,Vt),Vt.headers=AxiosHeaders$1.from(Vt.headers),Vt},function(Vt){return isCancel(Vt)||(throwIfCancellationRequested($),Vt&&Vt.response&&(Vt.response.data=transformData.call($,$.transformResponse,Vt.response),Vt.response.headers=AxiosHeaders$1.from(Vt.response.headers))),Promise.reject(Vt)})}const headersToObject=$=>$ instanceof AxiosHeaders$1?$.toJSON():$;function mergeConfig($,_e){_e=_e||{};const _t={};function Vt(_d,_m,e_){return utils$1.isPlainObject(_d)&&utils$1.isPlainObject(_m)?utils$1.merge.call({caseless:e_},_d,_m):utils$1.isPlainObject(_m)?utils$1.merge({},_m):utils$1.isArray(_m)?_m.slice():_m}function Wt(_d,_m,e_){if(utils$1.isUndefined(_m)){if(!utils$1.isUndefined(_d))return Vt(void 0,_d,e_)}else return Vt(_d,_m,e_)}function _i(_d,_m){if(!utils$1.isUndefined(_m))return Vt(void 0,_m)}function _s(_d,_m){if(utils$1.isUndefined(_m)){if(!utils$1.isUndefined(_d))return Vt(void 0,_d)}else return Vt(void 0,_m)}function _c(_d,_m,e_){if(e_ in _e)return Vt(_d,_m);if(e_ in $)return Vt(void 0,_d)}const _l={url:_i,method:_i,data:_i,baseURL:_s,transformRequest:_s,transformResponse:_s,paramsSerializer:_s,timeout:_s,timeoutMessage:_s,withCredentials:_s,adapter:_s,responseType:_s,xsrfCookieName:_s,xsrfHeaderName:_s,onUploadProgress:_s,onDownloadProgress:_s,decompress:_s,maxContentLength:_s,maxBodyLength:_s,beforeRedirect:_s,transport:_s,httpAgent:_s,httpsAgent:_s,cancelToken:_s,socketPath:_s,responseEncoding:_s,validateStatus:_c,headers:(_d,_m)=>Wt(headersToObject(_d),headersToObject(_m),!0)};return utils$1.forEach(Object.keys($).concat(Object.keys(_e)),function(_m){const e_=_l[_m]||Wt,t_=e_($[_m],_e[_m],_m);utils$1.isUndefined(t_)&&e_!==_c||(_t[_m]=t_)}),_t}const VERSION="1.3.4",validators$1={};["object","boolean","number","function","string","symbol"].forEach(($,_e)=>{validators$1[$]=function(Vt){return typeof Vt===$||"a"+(_e<1?"n ":" ")+$}});const deprecatedWarnings={};validators$1.transitional=function(_e,_t,Vt){function Wt(_i,_s){return"[Axios v"+VERSION+"] Transitional option '"+_i+"'"+_s+(Vt?". "+Vt:"")}return(_i,_s,_c)=>{if(_e===!1)throw new AxiosError(Wt(_s," has been removed"+(_t?" in "+_t:"")),AxiosError.ERR_DEPRECATED);return _t&&!deprecatedWarnings[_s]&&(deprecatedWarnings[_s]=!0,console.warn(Wt(_s," has been deprecated since v"+_t+" and will be removed in the near future"))),_e?_e(_i,_s,_c):!0}};function assertOptions($,_e,_t){if(typeof $!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const Vt=Object.keys($);let Wt=Vt.length;for(;Wt-- >0;){const _i=Vt[Wt],_s=_e[_i];if(_s){const _c=$[_i],_l=_c===void 0||_s(_c,_i,$);if(_l!==!0)throw new AxiosError("option "+_i+" must be "+_l,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(_t!==!0)throw new AxiosError("Unknown option "+_i,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(_e){this.defaults=_e,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}request(_e,_t){typeof _e=="string"?(_t=_t||{},_t.url=_e):_t=_e||{},_t=mergeConfig(this.defaults,_t);const{transitional:Vt,paramsSerializer:Wt,headers:_i}=_t;Vt!==void 0&&validator.assertOptions(Vt,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),Wt!==void 0&&validator.assertOptions(Wt,{encode:validators.function,serialize:validators.function},!0),_t.method=(_t.method||this.defaults.method||"get").toLowerCase();let _s;_s=_i&&utils$1.merge(_i.common,_i[_t.method]),_s&&utils$1.forEach(["delete","get","head","post","put","patch","common"],c_=>{delete _i[c_]}),_t.headers=AxiosHeaders$1.concat(_s,_i);const _c=[];let _l=!0;this.interceptors.request.forEach(function(h_){typeof h_.runWhen=="function"&&h_.runWhen(_t)===!1||(_l=_l&&h_.synchronous,_c.unshift(h_.fulfilled,h_.rejected))});const _d=[];this.interceptors.response.forEach(function(h_){_d.push(h_.fulfilled,h_.rejected)});let _m,e_=0,t_;if(!_l){const c_=[dispatchRequest.bind(this),void 0];for(c_.unshift.apply(c_,_c),c_.push.apply(c_,_d),t_=c_.length,_m=Promise.resolve(_t);e_<t_;)_m=_m.then(c_[e_++],c_[e_++]);return _m}t_=_c.length;let i_=_t;for(e_=0;e_<t_;){const c_=_c[e_++],h_=_c[e_++];try{i_=c_(i_)}catch(y_){h_.call(this,y_);break}}try{_m=dispatchRequest.call(this,i_)}catch(c_){return Promise.reject(c_)}for(e_=0,t_=_d.length;e_<t_;)_m=_m.then(_d[e_++],_d[e_++]);return _m}getUri(_e){_e=mergeConfig(this.defaults,_e);const _t=buildFullPath(_e.baseURL,_e.url);return buildURL(_t,_e.params,_e.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function(_e){Axios.prototype[_e]=function(_t,Vt){return this.request(mergeConfig(Vt||{},{method:_e,url:_t,data:(Vt||{}).data}))}});utils$1.forEach(["post","put","patch"],function(_e){function _t(Vt){return function(_i,_s,_c){return this.request(mergeConfig(_c||{},{method:_e,headers:Vt?{"Content-Type":"multipart/form-data"}:{},url:_i,data:_s}))}}Axios.prototype[_e]=_t(),Axios.prototype[_e+"Form"]=_t(!0)});const Axios$1=Axios;class CancelToken{constructor(_e){if(typeof _e!="function")throw new TypeError("executor must be a function.");let _t;this.promise=new Promise(function(_i){_t=_i});const Vt=this;this.promise.then(Wt=>{if(!Vt._listeners)return;let _i=Vt._listeners.length;for(;_i-- >0;)Vt._listeners[_i](Wt);Vt._listeners=null}),this.promise.then=Wt=>{let _i;const _s=new Promise(_c=>{Vt.subscribe(_c),_i=_c}).then(Wt);return _s.cancel=function(){Vt.unsubscribe(_i)},_s},_e(function(_i,_s,_c){Vt.reason||(Vt.reason=new CanceledError(_i,_s,_c),_t(Vt.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(_e){if(this.reason){_e(this.reason);return}this._listeners?this._listeners.push(_e):this._listeners=[_e]}unsubscribe(_e){if(!this._listeners)return;const _t=this._listeners.indexOf(_e);_t!==-1&&this._listeners.splice(_t,1)}static source(){let _e;return{token:new CancelToken(function(Wt){_e=Wt}),cancel:_e}}}const CancelToken$1=CancelToken;function spread($){return function(_t){return $.apply(null,_t)}}function isAxiosError($){return utils$1.isObject($)&&$.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([$,_e])=>{HttpStatusCode[_e]=$});const HttpStatusCode$1=HttpStatusCode;function createInstance($){const _e=new Axios$1($),_t=bind(Axios$1.prototype.request,_e);return utils$1.extend(_t,Axios$1.prototype,_e,{allOwnKeys:!0}),utils$1.extend(_t,_e,null,{allOwnKeys:!0}),_t.create=function(Wt){return createInstance(mergeConfig($,Wt))},_t}const axios$1=createInstance(defaults$1);axios$1.Axios=Axios$1;axios$1.CanceledError=CanceledError;axios$1.CancelToken=CancelToken$1;axios$1.isCancel=isCancel;axios$1.VERSION=VERSION;axios$1.toFormData=toFormData;axios$1.AxiosError=AxiosError;axios$1.Cancel=axios$1.CanceledError;axios$1.all=function(_e){return Promise.all(_e)};axios$1.spread=spread;axios$1.isAxiosError=isAxiosError;axios$1.mergeConfig=mergeConfig;axios$1.AxiosHeaders=AxiosHeaders$1;axios$1.formToJSON=$=>formDataToJSON(utils$1.isHTMLForm($)?new FormData($):$);axios$1.HttpStatusCode=HttpStatusCode$1;axios$1.default=axios$1;const axios$2=axios$1,axios=axios$2.create({baseURL:"http://localhost:8080",withCredentials:!0});function postForm($,_e){return axios.post($,_e,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},withCredentials:!0})}function getrequest($){return axios.get($,{responseType:"blob",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},withCredentials:!0})}function docPost($,_e){return axios.post(`/doctor${$}`,_e,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},withCredentials:!0})}function docGet($){return axios.get(`/doctor${$}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},withCredentials:!0})}function imageForm($,_e){return axios.post(`/doctor${$}`,_e,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("token")}`},withCredentials:!0})}function Navbar({children:$}){const _e=useNavigate(),_t=useSelector(_c=>_c.user.user),Vt=[{name:"Appointments",link:"/user/appointments"},{name:"Medicines",link:"/"},{name:_t==null?void 0:_t.name.toUpperCase().split(" ")[0],link:"/user/profile"}],[Wt,_i]=reactExports.useState(!1),_s=()=>{_t!=null&&_t.isDoctor&&_t!=null&&_t.Duty&&docGet("/dutyon"),localStorage.removeItem("token"),localStorage.removeItem("check"),_e("/login")};return jsx("div",{className:"h-screen",children:jsxs("div",{className:"flex flex-col",children:[jsx("div",{className:"shadow-md w-full fixed top-0 left-0",children:jsxs("div",{className:" md:flex items-center justify-between bg-blue-900 ",children:[jsx("div",{className:"font-bold text-2xl cursor-pointer flex items-center font-[poppins] text-white",children:jsx("span",{className:"text-3xl mr-1 bg-white rounded",onClick:()=>_e("/"),children:jsx("img",{src:"/logo.png",alt:"",className:"h-16"})})}),jsx("div",{onClick:()=>_i(!Wt),className:"text-3xl absolute right-8 top-6 cursor-pointer md:hidden",children:jsx("ion-icon",{name:Wt?"close":"menu",children:" "})}),jsxs("ul",{className:`md:flex md:items-center mr-8 md:pb-0 pb-12 absolute md:static  bg-blue-900  md:z-auto z-[-1] left-0 w-full md:w-auto md:pl-0 pl-9 transition-all duration-500 ease-in ${Wt?"top-20":"top-[-490px]"}`,children:[Vt.map(_c=>jsx("li",{className:"md:ml-8 font-bold md:my-0 my-7 ",children:jsx("a",{href:_c.link,className:"text-white hover:text-purple-400 duration-500",children:_c.name})},_c.name)),jsxs("button",{type:"button",className:"text-2xl bg-blue-900 text-white font-[poppins] pt-2 px-3 rounded md:ml-8 hover:bg-blue-400 duration-500",onClick:_s,children:[jsx("ion-icon",{name:"log-out-outline"})," "]})]})]})}),jsx("div",{className:"mt-16",children:$})]})})}function u$1($,_e,_t,Vt){return new(_t||(_t=Promise))(function(Wt,_i){function _s(_d){try{_l(Vt.next(_d))}catch(_m){_i(_m)}}function _c(_d){try{_l(Vt.throw(_d))}catch(_m){_i(_m)}}function _l(_d){var _m;_d.done?Wt(_d.value):(_m=_d.value,_m instanceof _t?_m:new _t(function(e_){e_(_m)})).then(_s,_c)}_l((Vt=Vt.apply($,_e||[])).next())})}function c$1($,_e){var _t,Vt,Wt,_i,_s={label:0,sent:function(){if(1&Wt[0])throw Wt[1];return Wt[1]},trys:[],ops:[]};return _i={next:_c(0),throw:_c(1),return:_c(2)},typeof Symbol=="function"&&(_i[Symbol.iterator]=function(){return this}),_i;function _c(_l){return function(_d){return function(_m){if(_t)throw new TypeError("Generator is already executing.");for(;_s;)try{if(_t=1,Vt&&(Wt=2&_m[0]?Vt.return:_m[0]?Vt.throw||((Wt=Vt.return)&&Wt.call(Vt),0):Vt.next)&&!(Wt=Wt.call(Vt,_m[1])).done)return Wt;switch(Vt=0,Wt&&(_m=[2&_m[0],Wt.value]),_m[0]){case 0:case 1:Wt=_m;break;case 4:return _s.label++,{value:_m[1],done:!1};case 5:_s.label++,Vt=_m[1],_m=[0];continue;case 7:_m=_s.ops.pop(),_s.trys.pop();continue;default:if(Wt=_s.trys,!((Wt=Wt.length>0&&Wt[Wt.length-1])||_m[0]!==6&&_m[0]!==2)){_s=0;continue}if(_m[0]===3&&(!Wt||_m[1]>Wt[0]&&_m[1]<Wt[3])){_s.label=_m[1];break}if(_m[0]===6&&_s.label<Wt[1]){_s.label=Wt[1],Wt=_m;break}if(Wt&&_s.label<Wt[2]){_s.label=Wt[2],_s.ops.push(_m);break}Wt[2]&&_s.ops.pop(),_s.trys.pop();continue}_m=_e.call($,_s)}catch(e_){_m=[6,e_],Vt=0}finally{_t=Wt=0}if(5&_m[0])throw _m[1];return{value:_m[0]?_m[1]:void 0,done:!0}}([_l,_d])}}}function i$1($){var _e=typeof Symbol=="function"&&Symbol.iterator,_t=_e&&$[_e],Vt=0;if(_t)return _t.call($);if($&&typeof $.length=="number")return{next:function(){return $&&Vt>=$.length&&($=void 0),{value:$&&$[Vt++],done:!$}}};throw new TypeError(_e?"Object is not iterable.":"Symbol.iterator is not defined.")}function s$1($,_e){var _t=typeof Symbol=="function"&&$[Symbol.iterator];if(!_t)return $;var Vt,Wt,_i=_t.call($),_s=[];try{for(;(_e===void 0||_e-- >0)&&!(Vt=_i.next()).done;)_s.push(Vt.value)}catch(_c){Wt={error:_c}}finally{try{Vt&&!Vt.done&&(_t=_i.return)&&_t.call(_i)}finally{if(Wt)throw Wt.error}}return _s}function l$1($,_e,_t){if(_t||arguments.length===2)for(var Vt,Wt=0,_i=_e.length;Wt<_i;Wt++)!Vt&&Wt in _e||(Vt||(Vt=Array.prototype.slice.call(_e,0,Wt)),Vt[Wt]=_e[Wt]);return $.concat(Vt||Array.prototype.slice.call(_e))}function f$1($,_e,_t,Vt){for(var Wt=[],_i=4;_i<arguments.length;_i++)Wt[_i-4]=arguments[_i];return u$1(this,void 0,void 0,function(){var _s,_c,_l,_d,_m,e_;return c$1(this,function(t_){switch(t_.label){case 0:t_.trys.push([0,12,13,14]),_s=i$1(Wt),_c=_s.next(),t_.label=1;case 1:if(_c.done)return[3,11];switch(_l=_c.value,typeof _l){case"string":return[3,2];case"number":return[3,4];case"function":return[3,6]}return[3,8];case 2:return[4,d$1($,_l,_e,_t,Vt)];case 3:return t_.sent(),[3,10];case 4:return[4,h$1(_l)];case 5:return t_.sent(),[3,10];case 6:return[4,_l.apply(void 0,l$1([$,_e,_t,Vt],s$1(Wt),!1))];case 7:return t_.sent(),[3,10];case 8:return[4,_l];case 9:t_.sent(),t_.label=10;case 10:return _c=_s.next(),[3,1];case 11:return[3,14];case 12:return _d=t_.sent(),_m={error:_d},[3,14];case 13:try{_c&&!_c.done&&(e_=_s.return)&&e_.call(_s)}finally{if(_m)throw _m.error}return[7];case 14:return[2]}})})}function d$1($,_e,_t,Vt,Wt){return u$1(this,void 0,void 0,function(){var _i;return c$1(this,function(_s){switch(_s.label){case 0:return _i=function(_c,_l){var _d=s$1(_l).slice(0);return l$1(l$1([],s$1(_c),!1),[NaN],!1).findIndex(function(_m,e_){return _d[e_]!==_m})}($.textContent,_e),[4,y$1($,l$1(l$1([],s$1(v$1($.textContent,_i)),!1),s$1(p$1(_e,_i)),!1),_t,Vt,Wt)];case 1:return _s.sent(),[2]}})})}function h$1($){return u$1(this,void 0,void 0,function(){return c$1(this,function(_e){switch(_e.label){case 0:return[4,new Promise(function(_t){return setTimeout(_t,$)})];case 1:return _e.sent(),[2]}})})}function y$1($,_e,_t,Vt,Wt){return u$1(this,void 0,void 0,function(){var _i,_s,_c,_l,_d,_m,e_,t_,i_,c_,h_,y_,l_;return c$1(this,function(d_){switch(d_.label){case 0:if(_i=_e,Wt){for(_s=0,_c=1;_c<_e.length;_c++)if(_l=s$1([_e[_c-1],_e[_c]],2),_d=_l[0],(_m=_l[1]).length>_d.length||_m===""){_s=_c;break}_i=_e.slice(_s,_e.length)}d_.label=1;case 1:d_.trys.push([1,6,7,8]),e_=i$1(function(f_){var S_,T_,R_,C_,j_,W_,A_;return c$1(this,function($_){switch($_.label){case 0:S_=function(q_){return c$1(this,function(G_){switch(G_.label){case 0:return[4,{op:function(I_){return requestAnimationFrame(function(){return I_.textContent=q_})},opCode:function(I_){return q_===""||I_.textContent.length>q_.length?"DELETE":"WRITING"}}];case 1:return G_.sent(),[2]}})},$_.label=1;case 1:$_.trys.push([1,6,7,8]),T_=i$1(f_),R_=T_.next(),$_.label=2;case 2:return R_.done?[3,5]:(C_=R_.value,[5,S_(C_)]);case 3:$_.sent(),$_.label=4;case 4:return R_=T_.next(),[3,2];case 5:return[3,8];case 6:return j_=$_.sent(),W_={error:j_},[3,8];case 7:try{R_&&!R_.done&&(A_=T_.return)&&A_.call(T_)}finally{if(W_)throw W_.error}return[7];case 8:return[2]}})}(_i)),t_=e_.next(),d_.label=2;case 2:return t_.done?[3,5]:(i_=t_.value,c_=i_.opCode($)==="WRITING"?_t+_t*(Math.random()-.5):Vt+Vt*(Math.random()-.5),i_.op($),[4,h$1(c_)]);case 3:d_.sent(),d_.label=4;case 4:return t_=e_.next(),[3,2];case 5:return[3,8];case 6:return h_=d_.sent(),y_={error:h_},[3,8];case 7:try{t_&&!t_.done&&(l_=e_.return)&&l_.call(e_)}finally{if(y_)throw y_.error}return[7];case 8:return[2]}})})}function p$1($,_e,_t){var Vt=s$1($).slice(0);return _e===void 0&&(_e=0),_t===void 0&&(_t=Vt.length),c$1(this,function(Wt){switch(Wt.label){case 0:return _e<_t?[4,Vt.slice(0,++_e).join("")]:[3,2];case 1:return Wt.sent(),[3,0];case 2:return[2]}})}function v$1($,_e,_t){var Vt=s$1($).slice(0);return _e===void 0&&(_e=0),_t===void 0&&(_t=Vt.length),c$1(this,function(Wt){switch(Wt.label){case 0:return _t>_e?[4,Vt.slice(0,--_t).join("")]:[3,2];case 1:return Wt.sent(),[3,0];case 2:return[2]}})}var b$1="index-module_type__E-SaG";(function($,_e){_e===void 0&&(_e={});var _t=_e.insertAt;if($&&typeof document<"u"){var Vt=document.head||document.getElementsByTagName("head")[0],Wt=document.createElement("style");Wt.type="text/css",_t==="top"&&Vt.firstChild?Vt.insertBefore(Wt,Vt.firstChild):Vt.appendChild(Wt),Wt.styleSheet?Wt.styleSheet.cssText=$:Wt.appendChild(document.createTextNode($))}})(`.index-module_type__E-SaG::after {
  content: '|';
  animation: index-module_cursor__PQg0P 1.1s infinite step-start;
}

@keyframes index-module_cursor__PQg0P {
  50% {
    opacity: 0;
  }
}
`);var m$1=reactExports.memo(reactExports.forwardRef(function($,_e){var _t=$.sequence,Vt=$.repeat,Wt=$.className,_i=$.speed,_s=_i===void 0?40:_i,_c=$.deletionSpeed,_l=$.omitDeletionAnimation,_d=_l!==void 0&&_l,_m=$.wrapper,e_=_m===void 0?"span":_m,t_=$.cursor,i_=t_===void 0||t_,c_=$.style;_c||(_c=_s);var h_=new Array(2).fill(40);[_s,_c].forEach(function($_,q_){switch(typeof $_){case"number":h_[q_]=Math.abs($_-100);break;case"object":var G_=$_,I_=G_.type,x_=G_.value;if(typeof x_!="number")break;I_==="keyStrokeDelayInMs"&&(h_[q_]=x_)}});var y_,l_,d_,f_,S_,T_,R_=h_[0],C_=h_[1],j_=function($_,q_){q_===void 0&&(q_=null);var G_=reactExports.useRef(q_);return reactExports.useEffect(function(){$_&&(typeof $_=="function"?$_(G_.current):$_.current=G_.current)},[$_]),G_}(_e),W_=b$1;y_=Wt?"".concat(i_?W_+" ":"").concat(Wt):i_?W_:"",l_=reactExports.useRef(function(){var $_,q_=_t;return Vt===1/0?$_=f$1:typeof Vt=="number"&&(q_=Array(1+Vt).fill(_t).flat()),f$1.apply(void 0,l$1(l$1([j_.current,R_,C_,_d],s$1(q_),!1),[$_],!1)),function(){j_.current}}),d_=reactExports.useRef(),f_=reactExports.useRef(!1),S_=reactExports.useRef(!1),T_=s$1(reactExports.useState(0),2)[1],f_.current&&(S_.current=!0),reactExports.useEffect(function(){return f_.current||(d_.current=l_.current(),f_.current=!0),T_(function($_){return $_+1}),function(){S_.current&&d_.current&&d_.current()}},[]);var A_=e_;return React.createElement(A_,{style:c_,className:y_,ref:j_})}),function($,_e){return!0});const imageUrl="/assets/bannerbg3-542cd782.jpeg";function Banner(){const $=useNavigate();function _e(){$("/user/consultDoctor")}return jsx("div",{className:"bg-cover bg-center flex justify-center items-center",style:{backgroundImage:`url(${imageUrl})`},children:jsxs("div",{className:"max-w-[800px] mt-[-66px] w-full h-screen mx-auto text-center flex flex-col justify-center",children:[jsx("p",{className:"text-blue-900 font-bold p-2",children:"Expert Medic On A Single Call"}),jsx("h1",{className:"md:text-6xl sm:text-5xl text-4xl font-bold md:py-6 font-serif",children:"Consult Now"}),jsx("div",{children:jsx(m$1,{className:"md:text-4xl sm:text-3xl text-xl font-bold",sequence:["Expert medical advice, on demand.","Fast, convenient medical consultations.","Talk to a doctor anytime, anywhere.","Skip the waiting room - Join our family"],speed:15,deletionSpeed:25,repeat:1/0})}),jsx("p",{className:"md:text-xl text-sm mt-2 text-gray-500",children:"Speak directly with qualified medical professionals in real-time, from anywhere in the world"}),jsx("button",{onClick:_e,className:"rounded bg-blue-700 w-[200px] text-white font-semibold my-6 mx-auto py-2",type:"button",children:"Consult Now"})]})})}const img1$1="/assets/homepage1-cb35797a.jpg";function analytics(){return jsx("div",{className:"w-full bg-purple- py-16 px-4",children:jsxs("div",{className:"max-w-[1240px] mx-auto grid md:grid-cols-2",children:[jsx("img",{src:img1$1,alt:"img",className:"w-[500px] mx-auto my-4"}),jsxs("div",{className:"flex flex-col justify-center",children:[jsx("h1",{className:"md:text-3xl text-xl font-bold",children:"Skip the travel! Take Online Doctor Consultation"}),jsx("p",{className:"text-blue-900 font-bold ",children:"Private consultation + Audio call  Starts at just 199"}),jsx("button",{className:"rounded bg-blue-700 w-[200px] text-white font-semibold my-6 mx-auto py-2",type:"button",children:"Consult Now"})]})]})})}function newsLetter(){return jsx("div",{className:"w-full py-16 text-white bg-blue-900 rounded-sm px-4",children:jsxs("div",{className:"max-w-[1240px] mx-auto grid lg:grid-cols-3",children:[jsxs("div",{className:"lg:col-span-2 ",children:[jsx("h1",{className:"md:text-3xl sm:text-2xl text-xl font-bold py-2",children:"Have More Queries? Get In Touch With US...."}),jsx("p",{children:"Sign up to our newsletter and stay upto date"})]}),jsxs("div",{className:"my-4",children:[jsxs("div",{className:"flex flex-col  items-center justify-between w-full",children:[jsx("input",{className:"p-3 flex w-full rounded-md text-black",type:"email",placeholder:"Enter Email"}),jsx("button",{className:"rounded bg-blue-700 w-[100px] text-white font-semibold my-6 mx-auto py-2",type:"button",children:"Notify Me"})]}),jsxs("p",{className:"md:text-lg text-sm ",children:["We care about the protection of your data. Read our ",jsx("span",{className:"text-blue-400 underline",children:"Privacy Policy."})]})]})]})})}function n($){for(var _e=arguments.length,_t=Array(_e>1?_e-1:0),Vt=1;Vt<_e;Vt++)_t[Vt-1]=arguments[Vt];throw Error("[Immer] minified error nr: "+$+(_t.length?" "+_t.map(function(Wt){return"'"+Wt+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function r($){return!!$&&!!$[Q]}function t($){var _e;return!!$&&(function(_t){if(!_t||typeof _t!="object")return!1;var Vt=Object.getPrototypeOf(_t);if(Vt===null)return!0;var Wt=Object.hasOwnProperty.call(Vt,"constructor")&&Vt.constructor;return Wt===Object||typeof Wt=="function"&&Function.toString.call(Wt)===Z}($)||Array.isArray($)||!!$[L]||!!(!((_e=$.constructor)===null||_e===void 0)&&_e[L])||s($)||v($))}function i($,_e,_t){_t===void 0&&(_t=!1),o($)===0?(_t?Object.keys:nn$3)($).forEach(function(Vt){_t&&typeof Vt=="symbol"||_e(Vt,$[Vt],$)}):$.forEach(function(Vt,Wt){return _e(Wt,Vt,$)})}function o($){var _e=$[Q];return _e?_e.i>3?_e.i-4:_e.i:Array.isArray($)?1:s($)?2:v($)?3:0}function u($,_e){return o($)===2?$.has(_e):Object.prototype.hasOwnProperty.call($,_e)}function a($,_e){return o($)===2?$.get(_e):$[_e]}function f($,_e,_t){var Vt=o($);Vt===2?$.set(_e,_t):Vt===3?$.add(_t):$[_e]=_t}function c($,_e){return $===_e?$!==0||1/$==1/_e:$!=$&&_e!=_e}function s($){return X&&$ instanceof Map}function v($){return q&&$ instanceof Set}function p($){return $.o||$.t}function l($){if(Array.isArray($))return Array.prototype.slice.call($);var _e=rn$3($);delete _e[Q];for(var _t=nn$3(_e),Vt=0;Vt<_t.length;Vt++){var Wt=_t[Vt],_i=_e[Wt];_i.writable===!1&&(_i.writable=!0,_i.configurable=!0),(_i.get||_i.set)&&(_e[Wt]={configurable:!0,writable:!0,enumerable:_i.enumerable,value:$[Wt]})}return Object.create(Object.getPrototypeOf($),_e)}function d($,_e){return _e===void 0&&(_e=!1),y($)||r($)||!t($)||(o($)>1&&($.set=$.add=$.clear=$.delete=h),Object.freeze($),_e&&i($,function(_t,Vt){return d(Vt,!0)},!0)),$}function h(){n(2)}function y($){return $==null||typeof $!="object"||Object.isFrozen($)}function b($){var _e=tn[$];return _e||n(18,$),_e}function m($,_e){tn[$]||(tn[$]=_e)}function _(){return U}function j($,_e){_e&&(b("Patches"),$.u=[],$.s=[],$.v=_e)}function g($){O($),$.p.forEach(S),$.p=null}function O($){$===U&&(U=$.l)}function w($){return U={p:[],l:U,h:$,m:!0,_:0}}function S($){var _e=$[Q];_e.i===0||_e.i===1?_e.j():_e.g=!0}function P($,_e){_e._=_e.p.length;var _t=_e.p[0],Vt=$!==void 0&&$!==_t;return _e.h.O||b("ES5").S(_e,$,Vt),Vt?(_t[Q].P&&(g(_e),n(4)),t($)&&($=M(_e,$),_e.l||x(_e,$)),_e.u&&b("Patches").M(_t[Q].t,$,_e.u,_e.s)):$=M(_e,_t,[]),g(_e),_e.u&&_e.v(_e.u,_e.s),$!==H?$:void 0}function M($,_e,_t){if(y(_e))return _e;var Vt=_e[Q];if(!Vt)return i(_e,function(_c,_l){return A($,Vt,_e,_c,_l,_t)},!0),_e;if(Vt.A!==$)return _e;if(!Vt.P)return x($,Vt.t,!0),Vt.t;if(!Vt.I){Vt.I=!0,Vt.A._--;var Wt=Vt.i===4||Vt.i===5?Vt.o=l(Vt.k):Vt.o,_i=Wt,_s=!1;Vt.i===3&&(_i=new Set(Wt),Wt.clear(),_s=!0),i(_i,function(_c,_l){return A($,Vt,Wt,_c,_l,_t,_s)}),x($,Wt,!1),_t&&$.u&&b("Patches").N(Vt,_t,$.u,$.s)}return Vt.o}function A($,_e,_t,Vt,Wt,_i,_s){if(r(Wt)){var _c=M($,Wt,_i&&_e&&_e.i!==3&&!u(_e.R,Vt)?_i.concat(Vt):void 0);if(f(_t,Vt,_c),!r(_c))return;$.m=!1}else _s&&_t.add(Wt);if(t(Wt)&&!y(Wt)){if(!$.h.D&&$._<1)return;M($,Wt),_e&&_e.A.l||x($,Wt)}}function x($,_e,_t){_t===void 0&&(_t=!1),!$.l&&$.h.D&&$.m&&d(_e,_t)}function z($,_e){var _t=$[Q];return(_t?p(_t):$)[_e]}function I($,_e){if(_e in $)for(var _t=Object.getPrototypeOf($);_t;){var Vt=Object.getOwnPropertyDescriptor(_t,_e);if(Vt)return Vt;_t=Object.getPrototypeOf(_t)}}function k($){$.P||($.P=!0,$.l&&k($.l))}function E($){$.o||($.o=l($.t))}function N($,_e,_t){var Vt=s(_e)?b("MapSet").F(_e,_t):v(_e)?b("MapSet").T(_e,_t):$.O?function(Wt,_i){var _s=Array.isArray(Wt),_c={i:_s?1:0,A:_i?_i.A:_(),P:!1,I:!1,R:{},l:_i,t:Wt,k:null,o:null,j:null,C:!1},_l=_c,_d=en$3;_s&&(_l=[_c],_d=on);var _m=Proxy.revocable(_l,_d),e_=_m.revoke,t_=_m.proxy;return _c.k=t_,_c.j=e_,t_}(_e,_t):b("ES5").J(_e,_t);return(_t?_t.A:_()).p.push(Vt),Vt}function R($){return r($)||n(22,$),function _e(_t){if(!t(_t))return _t;var Vt,Wt=_t[Q],_i=o(_t);if(Wt){if(!Wt.P&&(Wt.i<4||!b("ES5").K(Wt)))return Wt.t;Wt.I=!0,Vt=D(_t,_i),Wt.I=!1}else Vt=D(_t,_i);return i(Vt,function(_s,_c){Wt&&a(Wt.t,_s)===_c||f(Vt,_s,_e(_c))}),_i===3?new Set(Vt):Vt}($)}function D($,_e){switch(_e){case 2:return new Map($);case 3:return Array.from($)}return l($)}function F(){function $(_i,_s){var _c=Wt[_i];return _c?_c.enumerable=_s:Wt[_i]=_c={configurable:!0,enumerable:_s,get:function(){var _l=this[Q];return en$3.get(_l,_i)},set:function(_l){var _d=this[Q];en$3.set(_d,_i,_l)}},_c}function _e(_i){for(var _s=_i.length-1;_s>=0;_s--){var _c=_i[_s][Q];if(!_c.P)switch(_c.i){case 5:Vt(_c)&&k(_c);break;case 4:_t(_c)&&k(_c)}}}function _t(_i){for(var _s=_i.t,_c=_i.k,_l=nn$3(_c),_d=_l.length-1;_d>=0;_d--){var _m=_l[_d];if(_m!==Q){var e_=_s[_m];if(e_===void 0&&!u(_s,_m))return!0;var t_=_c[_m],i_=t_&&t_[Q];if(i_?i_.t!==e_:!c(t_,e_))return!0}}var c_=!!_s[Q];return _l.length!==nn$3(_s).length+(c_?0:1)}function Vt(_i){var _s=_i.k;if(_s.length!==_i.t.length)return!0;var _c=Object.getOwnPropertyDescriptor(_s,_s.length-1);if(_c&&!_c.get)return!0;for(var _l=0;_l<_s.length;_l++)if(!_s.hasOwnProperty(_l))return!0;return!1}var Wt={};m("ES5",{J:function(_i,_s){var _c=Array.isArray(_i),_l=function(_m,e_){if(_m){for(var t_=Array(e_.length),i_=0;i_<e_.length;i_++)Object.defineProperty(t_,""+i_,$(i_,!0));return t_}var c_=rn$3(e_);delete c_[Q];for(var h_=nn$3(c_),y_=0;y_<h_.length;y_++){var l_=h_[y_];c_[l_]=$(l_,_m||!!c_[l_].enumerable)}return Object.create(Object.getPrototypeOf(e_),c_)}(_c,_i),_d={i:_c?5:4,A:_s?_s.A:_(),P:!1,I:!1,R:{},l:_s,t:_i,k:_l,o:null,g:!1,C:!1};return Object.defineProperty(_l,Q,{value:_d,writable:!0}),_l},S:function(_i,_s,_c){_c?r(_s)&&_s[Q].A===_i&&_e(_i.p):(_i.u&&function _l(_d){if(_d&&typeof _d=="object"){var _m=_d[Q];if(_m){var e_=_m.t,t_=_m.k,i_=_m.R,c_=_m.i;if(c_===4)i(t_,function(f_){f_!==Q&&(e_[f_]!==void 0||u(e_,f_)?i_[f_]||_l(t_[f_]):(i_[f_]=!0,k(_m)))}),i(e_,function(f_){t_[f_]!==void 0||u(t_,f_)||(i_[f_]=!1,k(_m))});else if(c_===5){if(Vt(_m)&&(k(_m),i_.length=!0),t_.length<e_.length)for(var h_=t_.length;h_<e_.length;h_++)i_[h_]=!1;else for(var y_=e_.length;y_<t_.length;y_++)i_[y_]=!0;for(var l_=Math.min(t_.length,e_.length),d_=0;d_<l_;d_++)t_.hasOwnProperty(d_)||(i_[d_]=!0),i_[d_]===void 0&&_l(t_[d_])}}}}(_i.p[0]),_e(_i.p))},K:function(_i){return _i.i===4?_t(_i):Vt(_i)}})}function T(){function $(Vt){if(!t(Vt))return Vt;if(Array.isArray(Vt))return Vt.map($);if(s(Vt))return new Map(Array.from(Vt.entries()).map(function(_s){return[_s[0],$(_s[1])]}));if(v(Vt))return new Set(Array.from(Vt).map($));var Wt=Object.create(Object.getPrototypeOf(Vt));for(var _i in Vt)Wt[_i]=$(Vt[_i]);return u(Vt,L)&&(Wt[L]=Vt[L]),Wt}function _e(Vt){return r(Vt)?$(Vt):Vt}var _t="add";m("Patches",{$:function(Vt,Wt){return Wt.forEach(function(_i){for(var _s=_i.path,_c=_i.op,_l=Vt,_d=0;_d<_s.length-1;_d++){var _m=o(_l),e_=_s[_d];typeof e_!="string"&&typeof e_!="number"&&(e_=""+e_),_m!==0&&_m!==1||e_!=="__proto__"&&e_!=="constructor"||n(24),typeof _l=="function"&&e_==="prototype"&&n(24),typeof(_l=a(_l,e_))!="object"&&n(15,_s.join("/"))}var t_=o(_l),i_=$(_i.value),c_=_s[_s.length-1];switch(_c){case"replace":switch(t_){case 2:return _l.set(c_,i_);case 3:n(16);default:return _l[c_]=i_}case _t:switch(t_){case 1:return c_==="-"?_l.push(i_):_l.splice(c_,0,i_);case 2:return _l.set(c_,i_);case 3:return _l.add(i_);default:return _l[c_]=i_}case"remove":switch(t_){case 1:return _l.splice(c_,1);case 2:return _l.delete(c_);case 3:return _l.delete(_i.value);default:return delete _l[c_]}default:n(17,_c)}}),Vt},N:function(Vt,Wt,_i,_s){switch(Vt.i){case 0:case 4:case 2:return function(_c,_l,_d,_m){var e_=_c.t,t_=_c.o;i(_c.R,function(i_,c_){var h_=a(e_,i_),y_=a(t_,i_),l_=c_?u(e_,i_)?"replace":_t:"remove";if(h_!==y_||l_!=="replace"){var d_=_l.concat(i_);_d.push(l_==="remove"?{op:l_,path:d_}:{op:l_,path:d_,value:y_}),_m.push(l_===_t?{op:"remove",path:d_}:l_==="remove"?{op:_t,path:d_,value:_e(h_)}:{op:"replace",path:d_,value:_e(h_)})}})}(Vt,Wt,_i,_s);case 5:case 1:return function(_c,_l,_d,_m){var e_=_c.t,t_=_c.R,i_=_c.o;if(i_.length<e_.length){var c_=[i_,e_];e_=c_[0],i_=c_[1];var h_=[_m,_d];_d=h_[0],_m=h_[1]}for(var y_=0;y_<e_.length;y_++)if(t_[y_]&&i_[y_]!==e_[y_]){var l_=_l.concat([y_]);_d.push({op:"replace",path:l_,value:_e(i_[y_])}),_m.push({op:"replace",path:l_,value:_e(e_[y_])})}for(var d_=e_.length;d_<i_.length;d_++){var f_=_l.concat([d_]);_d.push({op:_t,path:f_,value:_e(i_[d_])})}e_.length<i_.length&&_m.push({op:"replace",path:_l.concat(["length"]),value:e_.length})}(Vt,Wt,_i,_s);case 3:return function(_c,_l,_d,_m){var e_=_c.t,t_=_c.o,i_=0;e_.forEach(function(c_){if(!t_.has(c_)){var h_=_l.concat([i_]);_d.push({op:"remove",path:h_,value:c_}),_m.unshift({op:_t,path:h_,value:c_})}i_++}),i_=0,t_.forEach(function(c_){if(!e_.has(c_)){var h_=_l.concat([i_]);_d.push({op:_t,path:h_,value:c_}),_m.unshift({op:"remove",path:h_,value:c_})}i_++})}(Vt,Wt,_i,_s)}},M:function(Vt,Wt,_i,_s){_i.push({op:"replace",path:[],value:Wt===H?void 0:Wt}),_s.push({op:"replace",path:[],value:Vt})}})}var G,U,W=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",X=typeof Map<"u",q=typeof Set<"u",B=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",H=W?Symbol.for("immer-nothing"):((G={})["immer-nothing"]=!0,G),L=W?Symbol.for("immer-draftable"):"__$immer_draftable",Q=W?Symbol.for("immer-state"):"__$immer_state",Z=""+Object.prototype.constructor,nn$3=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function($){return Object.getOwnPropertyNames($).concat(Object.getOwnPropertySymbols($))}:Object.getOwnPropertyNames,rn$3=Object.getOwnPropertyDescriptors||function($){var _e={};return nn$3($).forEach(function(_t){_e[_t]=Object.getOwnPropertyDescriptor($,_t)}),_e},tn={},en$3={get:function($,_e){if(_e===Q)return $;var _t=p($);if(!u(_t,_e))return function(Wt,_i,_s){var _c,_l=I(_i,_s);return _l?"value"in _l?_l.value:(_c=_l.get)===null||_c===void 0?void 0:_c.call(Wt.k):void 0}($,_t,_e);var Vt=_t[_e];return $.I||!t(Vt)?Vt:Vt===z($.t,_e)?(E($),$.o[_e]=N($.A.h,Vt,$)):Vt},has:function($,_e){return _e in p($)},ownKeys:function($){return Reflect.ownKeys(p($))},set:function($,_e,_t){var Vt=I(p($),_e);if(Vt!=null&&Vt.set)return Vt.set.call($.k,_t),!0;if(!$.P){var Wt=z(p($),_e),_i=Wt==null?void 0:Wt[Q];if(_i&&_i.t===_t)return $.o[_e]=_t,$.R[_e]=!1,!0;if(c(_t,Wt)&&(_t!==void 0||u($.t,_e)))return!0;E($),k($)}return $.o[_e]===_t&&(_t!==void 0||_e in $.o)||Number.isNaN(_t)&&Number.isNaN($.o[_e])||($.o[_e]=_t,$.R[_e]=!0),!0},deleteProperty:function($,_e){return z($.t,_e)!==void 0||_e in $.t?($.R[_e]=!1,E($),k($)):delete $.R[_e],$.o&&delete $.o[_e],!0},getOwnPropertyDescriptor:function($,_e){var _t=p($),Vt=Reflect.getOwnPropertyDescriptor(_t,_e);return Vt&&{writable:!0,configurable:$.i!==1||_e!=="length",enumerable:Vt.enumerable,value:_t[_e]}},defineProperty:function(){n(11)},getPrototypeOf:function($){return Object.getPrototypeOf($.t)},setPrototypeOf:function(){n(12)}},on={};i(en$3,function($,_e){on[$]=function(){return arguments[0]=arguments[0][0],_e.apply(this,arguments)}}),on.deleteProperty=function($,_e){return on.set.call(this,$,_e,void 0)},on.set=function($,_e,_t){return en$3.set.call(this,$[0],_e,_t,$[0])};var un=function(){function $(_t){var Vt=this;this.O=B,this.D=!0,this.produce=function(Wt,_i,_s){if(typeof Wt=="function"&&typeof _i!="function"){var _c=_i;_i=Wt;var _l=Vt;return function(h_){var y_=this;h_===void 0&&(h_=_c);for(var l_=arguments.length,d_=Array(l_>1?l_-1:0),f_=1;f_<l_;f_++)d_[f_-1]=arguments[f_];return _l.produce(h_,function(S_){var T_;return(T_=_i).call.apply(T_,[y_,S_].concat(d_))})}}var _d;if(typeof _i!="function"&&n(6),_s!==void 0&&typeof _s!="function"&&n(7),t(Wt)){var _m=w(Vt),e_=N(Vt,Wt,void 0),t_=!0;try{_d=_i(e_),t_=!1}finally{t_?g(_m):O(_m)}return typeof Promise<"u"&&_d instanceof Promise?_d.then(function(h_){return j(_m,_s),P(h_,_m)},function(h_){throw g(_m),h_}):(j(_m,_s),P(_d,_m))}if(!Wt||typeof Wt!="object"){if((_d=_i(Wt))===void 0&&(_d=Wt),_d===H&&(_d=void 0),Vt.D&&d(_d,!0),_s){var i_=[],c_=[];b("Patches").M(Wt,_d,i_,c_),_s(i_,c_)}return _d}n(21,Wt)},this.produceWithPatches=function(Wt,_i){if(typeof Wt=="function")return function(_d){for(var _m=arguments.length,e_=Array(_m>1?_m-1:0),t_=1;t_<_m;t_++)e_[t_-1]=arguments[t_];return Vt.produceWithPatches(_d,function(i_){return Wt.apply(void 0,[i_].concat(e_))})};var _s,_c,_l=Vt.produce(Wt,_i,function(_d,_m){_s=_d,_c=_m});return typeof Promise<"u"&&_l instanceof Promise?_l.then(function(_d){return[_d,_s,_c]}):[_l,_s,_c]},typeof(_t==null?void 0:_t.useProxies)=="boolean"&&this.setUseProxies(_t.useProxies),typeof(_t==null?void 0:_t.autoFreeze)=="boolean"&&this.setAutoFreeze(_t.autoFreeze)}var _e=$.prototype;return _e.createDraft=function(_t){t(_t)||n(8),r(_t)&&(_t=R(_t));var Vt=w(this),Wt=N(this,_t,void 0);return Wt[Q].C=!0,O(Vt),Wt},_e.finishDraft=function(_t,Vt){var Wt=_t&&_t[Q],_i=Wt.A;return j(_i,Vt),P(void 0,_i)},_e.setAutoFreeze=function(_t){this.D=_t},_e.setUseProxies=function(_t){_t&&!B&&n(20),this.O=_t},_e.applyPatches=function(_t,Vt){var Wt;for(Wt=Vt.length-1;Wt>=0;Wt--){var _i=Vt[Wt];if(_i.path.length===0&&_i.op==="replace"){_t=_i.value;break}}Wt>-1&&(Vt=Vt.slice(Wt+1));var _s=b("Patches").$;return r(_t)?_s(_t,Vt):this.produce(_t,function(_c){return _s(_c,Vt)})},$}(),an=new un,fn=an.produce,cn=an.produceWithPatches.bind(an);an.setAutoFreeze.bind(an);an.setUseProxies.bind(an);var pn=an.applyPatches.bind(an);an.createDraft.bind(an);an.finishDraft.bind(an);function _typeof$2($){return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_e){return typeof _e}:function(_e){return _e&&typeof Symbol=="function"&&_e.constructor===Symbol&&_e!==Symbol.prototype?"symbol":typeof _e},_typeof$2($)}function _toPrimitive($,_e){if(_typeof$2($)!=="object"||$===null)return $;var _t=$[Symbol.toPrimitive];if(_t!==void 0){var Vt=_t.call($,_e||"default");if(_typeof$2(Vt)!=="object")return Vt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_e==="string"?String:Number)($)}function _toPropertyKey($){var _e=_toPrimitive($,"string");return _typeof$2(_e)==="symbol"?_e:String(_e)}function _defineProperty$4($,_e,_t){return _e=_toPropertyKey(_e),_e in $?Object.defineProperty($,_e,{value:_t,enumerable:!0,configurable:!0,writable:!0}):$[_e]=_t,$}function ownKeys$2($,_e){var _t=Object.keys($);if(Object.getOwnPropertySymbols){var Vt=Object.getOwnPropertySymbols($);_e&&(Vt=Vt.filter(function(Wt){return Object.getOwnPropertyDescriptor($,Wt).enumerable})),_t.push.apply(_t,Vt)}return _t}function _objectSpread2($){for(var _e=1;_e<arguments.length;_e++){var _t=arguments[_e]!=null?arguments[_e]:{};_e%2?ownKeys$2(Object(_t),!0).forEach(function(Vt){_defineProperty$4($,Vt,_t[Vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(_t)):ownKeys$2(Object(_t)).forEach(function(Vt){Object.defineProperty($,Vt,Object.getOwnPropertyDescriptor(_t,Vt))})}return $}function formatProdErrorMessage($){return"Minified Redux error #"+$+"; visit https://redux.js.org/Errors?code="+$+" for the full message or use the non-minified dev environment for full errors. "}var $$observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),randomString=function(){return Math.random().toString(36).substring(7).split("").join(".")},ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function isPlainObject$2($){if(typeof $!="object"||$===null)return!1;for(var _e=$;Object.getPrototypeOf(_e)!==null;)_e=Object.getPrototypeOf(_e);return Object.getPrototypeOf($)===_e}function createStore($,_e,_t){var Vt;if(typeof _e=="function"&&typeof _t=="function"||typeof _t=="function"&&typeof arguments[3]=="function")throw new Error(formatProdErrorMessage(0));if(typeof _e=="function"&&typeof _t>"u"&&(_t=_e,_e=void 0),typeof _t<"u"){if(typeof _t!="function")throw new Error(formatProdErrorMessage(1));return _t(createStore)($,_e)}if(typeof $!="function")throw new Error(formatProdErrorMessage(2));var Wt=$,_i=_e,_s=[],_c=_s,_l=!1;function _d(){_c===_s&&(_c=_s.slice())}function _m(){if(_l)throw new Error(formatProdErrorMessage(3));return _i}function e_(h_){if(typeof h_!="function")throw new Error(formatProdErrorMessage(4));if(_l)throw new Error(formatProdErrorMessage(5));var y_=!0;return _d(),_c.push(h_),function(){if(y_){if(_l)throw new Error(formatProdErrorMessage(6));y_=!1,_d();var d_=_c.indexOf(h_);_c.splice(d_,1),_s=null}}}function t_(h_){if(!isPlainObject$2(h_))throw new Error(formatProdErrorMessage(7));if(typeof h_.type>"u")throw new Error(formatProdErrorMessage(8));if(_l)throw new Error(formatProdErrorMessage(9));try{_l=!0,_i=Wt(_i,h_)}finally{_l=!1}for(var y_=_s=_c,l_=0;l_<y_.length;l_++){var d_=y_[l_];d_()}return h_}function i_(h_){if(typeof h_!="function")throw new Error(formatProdErrorMessage(10));Wt=h_,t_({type:ActionTypes.REPLACE})}function c_(){var h_,y_=e_;return h_={subscribe:function(d_){if(typeof d_!="object"||d_===null)throw new Error(formatProdErrorMessage(11));function f_(){d_.next&&d_.next(_m())}f_();var S_=y_(f_);return{unsubscribe:S_}}},h_[$$observable]=function(){return this},h_}return t_({type:ActionTypes.INIT}),Vt={dispatch:t_,subscribe:e_,getState:_m,replaceReducer:i_},Vt[$$observable]=c_,Vt}function assertReducerShape($){Object.keys($).forEach(function(_e){var _t=$[_e],Vt=_t(void 0,{type:ActionTypes.INIT});if(typeof Vt>"u")throw new Error(formatProdErrorMessage(12));if(typeof _t(void 0,{type:ActionTypes.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(formatProdErrorMessage(13))})}function combineReducers($){for(var _e=Object.keys($),_t={},Vt=0;Vt<_e.length;Vt++){var Wt=_e[Vt];typeof $[Wt]=="function"&&(_t[Wt]=$[Wt])}var _i=Object.keys(_t),_s;try{assertReducerShape(_t)}catch(_c){_s=_c}return function(_l,_d){if(_l===void 0&&(_l={}),_s)throw _s;for(var _m=!1,e_={},t_=0;t_<_i.length;t_++){var i_=_i[t_],c_=_t[i_],h_=_l[i_],y_=c_(h_,_d);if(typeof y_>"u")throw _d&&_d.type,new Error(formatProdErrorMessage(14));e_[i_]=y_,_m=_m||y_!==h_}return _m=_m||_i.length!==Object.keys(_l).length,_m?e_:_l}}function compose(){for(var $=arguments.length,_e=new Array($),_t=0;_t<$;_t++)_e[_t]=arguments[_t];return _e.length===0?function(Vt){return Vt}:_e.length===1?_e[0]:_e.reduce(function(Vt,Wt){return function(){return Vt(Wt.apply(void 0,arguments))}})}function applyMiddleware(){for(var $=arguments.length,_e=new Array($),_t=0;_t<$;_t++)_e[_t]=arguments[_t];return function(Vt){return function(){var Wt=Vt.apply(void 0,arguments),_i=function(){throw new Error(formatProdErrorMessage(15))},_s={getState:Wt.getState,dispatch:function(){return _i.apply(void 0,arguments)}},_c=_e.map(function(_l){return _l(_s)});return _i=compose.apply(void 0,_c)(Wt.dispatch),_objectSpread2(_objectSpread2({},Wt),{},{dispatch:_i})}}}var NOT_FOUND="NOT_FOUND";function createSingletonCache($){var _e;return{get:function(Vt){return _e&&$(_e.key,Vt)?_e.value:NOT_FOUND},put:function(Vt,Wt){_e={key:Vt,value:Wt}},getEntries:function(){return _e?[_e]:[]},clear:function(){_e=void 0}}}function createLruCache($,_e){var _t=[];function Vt(_c){var _l=_t.findIndex(function(_m){return _e(_c,_m.key)});if(_l>-1){var _d=_t[_l];return _l>0&&(_t.splice(_l,1),_t.unshift(_d)),_d.value}return NOT_FOUND}function Wt(_c,_l){Vt(_c)===NOT_FOUND&&(_t.unshift({key:_c,value:_l}),_t.length>$&&_t.pop())}function _i(){return _t}function _s(){_t=[]}return{get:Vt,put:Wt,getEntries:_i,clear:_s}}var defaultEqualityCheck=function(_e,_t){return _e===_t};function createCacheKeyComparator($){return function(_t,Vt){if(_t===null||Vt===null||_t.length!==Vt.length)return!1;for(var Wt=_t.length,_i=0;_i<Wt;_i++)if(!$(_t[_i],Vt[_i]))return!1;return!0}}function defaultMemoize($,_e){var _t=typeof _e=="object"?_e:{equalityCheck:_e},Vt=_t.equalityCheck,Wt=Vt===void 0?defaultEqualityCheck:Vt,_i=_t.maxSize,_s=_i===void 0?1:_i,_c=_t.resultEqualityCheck,_l=createCacheKeyComparator(Wt),_d=_s===1?createSingletonCache(_l):createLruCache(_s,_l);function _m(){var e_=_d.get(arguments);if(e_===NOT_FOUND){if(e_=$.apply(null,arguments),_c){var t_=_d.getEntries(),i_=t_.find(function(c_){return _c(c_.value,e_)});i_&&(e_=i_.value)}_d.put(arguments,e_)}return e_}return _m.clearCache=function(){return _d.clear()},_m}function getDependencies($){var _e=Array.isArray($[0])?$[0]:$;if(!_e.every(function(Vt){return typeof Vt=="function"})){var _t=_e.map(function(Vt){return typeof Vt=="function"?"function "+(Vt.name||"unnamed")+"()":typeof Vt}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+_t+"]")}return _e}function createSelectorCreator($){for(var _e=arguments.length,_t=new Array(_e>1?_e-1:0),Vt=1;Vt<_e;Vt++)_t[Vt-1]=arguments[Vt];var Wt=function(){for(var _s=arguments.length,_c=new Array(_s),_l=0;_l<_s;_l++)_c[_l]=arguments[_l];var _d=0,_m,e_={memoizeOptions:void 0},t_=_c.pop();if(typeof t_=="object"&&(e_=t_,t_=_c.pop()),typeof t_!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof t_+"]");var i_=e_,c_=i_.memoizeOptions,h_=c_===void 0?_t:c_,y_=Array.isArray(h_)?h_:[h_],l_=getDependencies(_c),d_=$.apply(void 0,[function(){return _d++,t_.apply(null,arguments)}].concat(y_)),f_=$(function(){for(var T_=[],R_=l_.length,C_=0;C_<R_;C_++)T_.push(l_[C_].apply(null,arguments));return _m=d_.apply(null,T_),_m});return Object.assign(f_,{resultFunc:t_,memoizedResultFunc:d_,dependencies:l_,lastResult:function(){return _m},recomputations:function(){return _d},resetRecomputations:function(){return _d=0}}),f_};return Wt}var createSelector=createSelectorCreator(defaultMemoize);function createThunkMiddleware($){var _e=function(Vt){var Wt=Vt.dispatch,_i=Vt.getState;return function(_s){return function(_c){return typeof _c=="function"?_c(Wt,_i,$):_s(_c)}}};return _e}var thunk=createThunkMiddleware();thunk.withExtraArgument=createThunkMiddleware;const thunkMiddleware=thunk;var __extends=globalThis&&globalThis.__extends||function(){var $=function(_e,_t){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Vt,Wt){Vt.__proto__=Wt}||function(Vt,Wt){for(var _i in Wt)Object.prototype.hasOwnProperty.call(Wt,_i)&&(Vt[_i]=Wt[_i])},$(_e,_t)};return function(_e,_t){if(typeof _t!="function"&&_t!==null)throw new TypeError("Class extends value "+String(_t)+" is not a constructor or null");$(_e,_t);function Vt(){this.constructor=_e}_e.prototype=_t===null?Object.create(_t):(Vt.prototype=_t.prototype,new Vt)}}(),__generator$1=globalThis&&globalThis.__generator||function($,_e){var _t={label:0,sent:function(){if(_i[0]&1)throw _i[1];return _i[1]},trys:[],ops:[]},Vt,Wt,_i,_s;return _s={next:_c(0),throw:_c(1),return:_c(2)},typeof Symbol=="function"&&(_s[Symbol.iterator]=function(){return this}),_s;function _c(_d){return function(_m){return _l([_d,_m])}}function _l(_d){if(Vt)throw new TypeError("Generator is already executing.");for(;_t;)try{if(Vt=1,Wt&&(_i=_d[0]&2?Wt.return:_d[0]?Wt.throw||((_i=Wt.return)&&_i.call(Wt),0):Wt.next)&&!(_i=_i.call(Wt,_d[1])).done)return _i;switch(Wt=0,_i&&(_d=[_d[0]&2,_i.value]),_d[0]){case 0:case 1:_i=_d;break;case 4:return _t.label++,{value:_d[1],done:!1};case 5:_t.label++,Wt=_d[1],_d=[0];continue;case 7:_d=_t.ops.pop(),_t.trys.pop();continue;default:if(_i=_t.trys,!(_i=_i.length>0&&_i[_i.length-1])&&(_d[0]===6||_d[0]===2)){_t=0;continue}if(_d[0]===3&&(!_i||_d[1]>_i[0]&&_d[1]<_i[3])){_t.label=_d[1];break}if(_d[0]===6&&_t.label<_i[1]){_t.label=_i[1],_i=_d;break}if(_i&&_t.label<_i[2]){_t.label=_i[2],_t.ops.push(_d);break}_i[2]&&_t.ops.pop(),_t.trys.pop();continue}_d=_e.call($,_t)}catch(_m){_d=[6,_m],Wt=0}finally{Vt=_i=0}if(_d[0]&5)throw _d[1];return{value:_d[0]?_d[1]:void 0,done:!0}}},__spreadArray$2=globalThis&&globalThis.__spreadArray||function($,_e){for(var _t=0,Vt=_e.length,Wt=$.length;_t<Vt;_t++,Wt++)$[Wt]=_e[_t];return $},__defProp$2=Object.defineProperty,__defProps$2=Object.defineProperties,__getOwnPropDescs$2=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$2=Object.getOwnPropertySymbols,__hasOwnProp$2=Object.prototype.hasOwnProperty,__propIsEnum$2=Object.prototype.propertyIsEnumerable,__defNormalProp$2=function($,_e,_t){return _e in $?__defProp$2($,_e,{enumerable:!0,configurable:!0,writable:!0,value:_t}):$[_e]=_t},__spreadValues$2=function($,_e){for(var _t in _e||(_e={}))__hasOwnProp$2.call(_e,_t)&&__defNormalProp$2($,_t,_e[_t]);if(__getOwnPropSymbols$2)for(var Vt=0,Wt=__getOwnPropSymbols$2(_e);Vt<Wt.length;Vt++){var _t=Wt[Vt];__propIsEnum$2.call(_e,_t)&&__defNormalProp$2($,_t,_e[_t])}return $},__spreadProps$2=function($,_e){return __defProps$2($,__getOwnPropDescs$2(_e))},__async$1=function($,_e,_t){return new Promise(function(Vt,Wt){var _i=function(_l){try{_c(_t.next(_l))}catch(_d){Wt(_d)}},_s=function(_l){try{_c(_t.throw(_l))}catch(_d){Wt(_d)}},_c=function(_l){return _l.done?Vt(_l.value):Promise.resolve(_l.value).then(_i,_s)};_c((_t=_t.apply($,_e)).next())})},composeWithDevTools=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?compose:compose.apply(null,arguments)};function isPlainObject$1($){if(typeof $!="object"||$===null)return!1;var _e=Object.getPrototypeOf($);if(_e===null)return!0;for(var _t=_e;Object.getPrototypeOf(_t)!==null;)_t=Object.getPrototypeOf(_t);return _e===_t}var MiddlewareArray=function($){__extends(_e,$);function _e(){for(var _t=[],Vt=0;Vt<arguments.length;Vt++)_t[Vt]=arguments[Vt];var Wt=$.apply(this,_t)||this;return Object.setPrototypeOf(Wt,_e.prototype),Wt}return Object.defineProperty(_e,Symbol.species,{get:function(){return _e},enumerable:!1,configurable:!0}),_e.prototype.concat=function(){for(var _t=[],Vt=0;Vt<arguments.length;Vt++)_t[Vt]=arguments[Vt];return $.prototype.concat.apply(this,_t)},_e.prototype.prepend=function(){for(var _t=[],Vt=0;Vt<arguments.length;Vt++)_t[Vt]=arguments[Vt];return _t.length===1&&Array.isArray(_t[0])?new(_e.bind.apply(_e,__spreadArray$2([void 0],_t[0].concat(this)))):new(_e.bind.apply(_e,__spreadArray$2([void 0],_t.concat(this))))},_e}(Array);function freezeDraftable($){return t($)?fn($,function(){}):$}function isBoolean($){return typeof $=="boolean"}function curryGetDefaultMiddleware(){return function(_e){return getDefaultMiddleware(_e)}}function getDefaultMiddleware($){$===void 0&&($={});var _e=$.thunk,_t=_e===void 0?!0:_e;$.immutableCheck,$.serializableCheck;var Vt=new MiddlewareArray;return _t&&(isBoolean(_t)?Vt.push(thunkMiddleware):Vt.push(thunkMiddleware.withExtraArgument(_t.extraArgument))),Vt}var IS_PRODUCTION=!0;function configureStore($){var _e=curryGetDefaultMiddleware(),_t=$||{},Vt=_t.reducer,Wt=Vt===void 0?void 0:Vt,_i=_t.middleware,_s=_i===void 0?_e():_i,_c=_t.devTools,_l=_c===void 0?!0:_c,_d=_t.preloadedState,_m=_d===void 0?void 0:_d,e_=_t.enhancers,t_=e_===void 0?void 0:e_,i_;if(typeof Wt=="function")i_=Wt;else if(isPlainObject$1(Wt))i_=combineReducers(Wt);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var c_=_s;typeof c_=="function"&&(c_=c_(_e));var h_=applyMiddleware.apply(void 0,c_),y_=compose;_l&&(y_=composeWithDevTools(__spreadValues$2({trace:!IS_PRODUCTION},typeof _l=="object"&&_l)));var l_=[h_];Array.isArray(t_)?l_=__spreadArray$2([h_],t_):typeof t_=="function"&&(l_=t_(l_));var d_=y_.apply(void 0,l_);return createStore(i_,_m,d_)}function createAction($,_e){function _t(){for(var Vt=[],Wt=0;Wt<arguments.length;Wt++)Vt[Wt]=arguments[Wt];if(_e){var _i=_e.apply(void 0,Vt);if(!_i)throw new Error("prepareAction did not return an object");return __spreadValues$2(__spreadValues$2({type:$,payload:_i.payload},"meta"in _i&&{meta:_i.meta}),"error"in _i&&{error:_i.error})}return{type:$,payload:Vt[0]}}return _t.toString=function(){return""+$},_t.type=$,_t.match=function(Vt){return Vt.type===$},_t}function executeReducerBuilderCallback($){var _e={},_t=[],Vt,Wt={addCase:function(_i,_s){var _c=typeof _i=="string"?_i:_i.type;if(_c in _e)throw new Error("addCase cannot be called with two reducers for the same action type");return _e[_c]=_s,Wt},addMatcher:function(_i,_s){return _t.push({matcher:_i,reducer:_s}),Wt},addDefaultCase:function(_i){return Vt=_i,Wt}};return $(Wt),[_e,_t,Vt]}function isStateFunction($){return typeof $=="function"}function createReducer($,_e,_t,Vt){_t===void 0&&(_t=[]);var Wt=typeof _e=="function"?executeReducerBuilderCallback(_e):[_e,_t,Vt],_i=Wt[0],_s=Wt[1],_c=Wt[2],_l;if(isStateFunction($))_l=function(){return freezeDraftable($())};else{var _d=freezeDraftable($);_l=function(){return _d}}function _m(e_,t_){e_===void 0&&(e_=_l());var i_=__spreadArray$2([_i[t_.type]],_s.filter(function(c_){var h_=c_.matcher;return h_(t_)}).map(function(c_){var h_=c_.reducer;return h_}));return i_.filter(function(c_){return!!c_}).length===0&&(i_=[_c]),i_.reduce(function(c_,h_){if(h_)if(r(c_)){var y_=c_,l_=h_(y_,t_);return l_===void 0?c_:l_}else{if(t(c_))return fn(c_,function(d_){return h_(d_,t_)});var l_=h_(c_,t_);if(l_===void 0){if(c_===null)return c_;throw Error("A case reducer on a non-draftable value must not return undefined")}return l_}return c_},e_)}return _m.getInitialState=_l,_m}function getType2($,_e){return $+"/"+_e}function createSlice($){var _e=$.name;if(!_e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var _t=typeof $.initialState=="function"?$.initialState:freezeDraftable($.initialState),Vt=$.reducers||{},Wt=Object.keys(Vt),_i={},_s={},_c={};Wt.forEach(function(_m){var e_=Vt[_m],t_=getType2(_e,_m),i_,c_;"reducer"in e_?(i_=e_.reducer,c_=e_.prepare):i_=e_,_i[_m]=i_,_s[t_]=i_,_c[_m]=c_?createAction(t_,c_):createAction(t_)});function _l(){var _m=typeof $.extraReducers=="function"?executeReducerBuilderCallback($.extraReducers):[$.extraReducers],e_=_m[0],t_=e_===void 0?{}:e_,i_=_m[1],c_=i_===void 0?[]:i_,h_=_m[2],y_=h_===void 0?void 0:h_,l_=__spreadValues$2(__spreadValues$2({},t_),_s);return createReducer(_t,function(d_){for(var f_ in l_)d_.addCase(f_,l_[f_]);for(var S_=0,T_=c_;S_<T_.length;S_++){var R_=T_[S_];d_.addMatcher(R_.matcher,R_.reducer)}y_&&d_.addDefaultCase(y_)})}var _d;return{name:_e,reducer:function(_m,e_){return _d||(_d=_l()),_d(_m,e_)},actions:_c,caseReducers:_i,getInitialState:function(){return _d||(_d=_l()),_d.getInitialState()}}}var urlAlphabet="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",nanoid=function($){$===void 0&&($=21);for(var _e="",_t=$;_t--;)_e+=urlAlphabet[Math.random()*64|0];return _e},commonProperties=["name","message","stack","code"],RejectWithValue=function(){function $(_e,_t){this.payload=_e,this.meta=_t}return $}(),FulfillWithMeta=function(){function $(_e,_t){this.payload=_e,this.meta=_t}return $}(),miniSerializeError=function($){if(typeof $=="object"&&$!==null){for(var _e={},_t=0,Vt=commonProperties;_t<Vt.length;_t++){var Wt=Vt[_t];typeof $[Wt]=="string"&&(_e[Wt]=$[Wt])}return _e}return{message:String($)}},createAsyncThunk=function(){function $(_e,_t,Vt){var Wt=createAction(_e+"/fulfilled",function(_d,_m,e_,t_){return{payload:_d,meta:__spreadProps$2(__spreadValues$2({},t_||{}),{arg:e_,requestId:_m,requestStatus:"fulfilled"})}}),_i=createAction(_e+"/pending",function(_d,_m,e_){return{payload:void 0,meta:__spreadProps$2(__spreadValues$2({},e_||{}),{arg:_m,requestId:_d,requestStatus:"pending"})}}),_s=createAction(_e+"/rejected",function(_d,_m,e_,t_,i_){return{payload:t_,error:(Vt&&Vt.serializeError||miniSerializeError)(_d||"Rejected"),meta:__spreadProps$2(__spreadValues$2({},i_||{}),{arg:e_,requestId:_m,rejectedWithValue:!!t_,requestStatus:"rejected",aborted:(_d==null?void 0:_d.name)==="AbortError",condition:(_d==null?void 0:_d.name)==="ConditionError"})}}),_c=typeof AbortController<"u"?AbortController:function(){function _d(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return _d.prototype.abort=function(){},_d}();function _l(_d){return function(_m,e_,t_){var i_=Vt!=null&&Vt.idGenerator?Vt.idGenerator(_d):nanoid(),c_=new _c,h_;function y_(d_){h_=d_,c_.abort()}var l_=function(){return __async$1(this,null,function(){var d_,f_,S_,T_,R_,C_,j_;return __generator$1(this,function(W_){switch(W_.label){case 0:return W_.trys.push([0,4,,5]),T_=(d_=Vt==null?void 0:Vt.condition)==null?void 0:d_.call(Vt,_d,{getState:e_,extra:t_}),isThenable(T_)?[4,T_]:[3,2];case 1:T_=W_.sent(),W_.label=2;case 2:if(T_===!1||c_.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return R_=new Promise(function(A_,$_){return c_.signal.addEventListener("abort",function(){return $_({name:"AbortError",message:h_||"Aborted"})})}),_m(_i(i_,_d,(f_=Vt==null?void 0:Vt.getPendingMeta)==null?void 0:f_.call(Vt,{requestId:i_,arg:_d},{getState:e_,extra:t_}))),[4,Promise.race([R_,Promise.resolve(_t(_d,{dispatch:_m,getState:e_,extra:t_,requestId:i_,signal:c_.signal,abort:y_,rejectWithValue:function(A_,$_){return new RejectWithValue(A_,$_)},fulfillWithValue:function(A_,$_){return new FulfillWithMeta(A_,$_)}})).then(function(A_){if(A_ instanceof RejectWithValue)throw A_;return A_ instanceof FulfillWithMeta?Wt(A_.payload,i_,_d,A_.meta):Wt(A_,i_,_d)})])];case 3:return S_=W_.sent(),[3,5];case 4:return C_=W_.sent(),S_=C_ instanceof RejectWithValue?_s(null,i_,_d,C_.payload,C_.meta):_s(C_,i_,_d),[3,5];case 5:return j_=Vt&&!Vt.dispatchConditionRejection&&_s.match(S_)&&S_.meta.condition,j_||_m(S_),[2,S_]}})})}();return Object.assign(l_,{abort:y_,requestId:i_,arg:_d,unwrap:function(){return l_.then(unwrapResult)}})}}return Object.assign(_l,{pending:_i,rejected:_s,fulfilled:Wt,typePrefix:_e})}return $.withTypes=function(){return $},$}();function unwrapResult($){if($.meta&&$.meta.rejectedWithValue)throw $.payload;if($.error)throw $.error;return $.payload}function isThenable($){return $!==null&&typeof $=="object"&&typeof $.then=="function"}var hasMatchFunction=function($){return $&&typeof $.match=="function"},matches=function($,_e){return hasMatchFunction($)?$.match(_e):$(_e)};function isAnyOf(){for(var $=[],_e=0;_e<arguments.length;_e++)$[_e]=arguments[_e];return function(_t){return $.some(function(Vt){return matches(Vt,_t)})}}function isAllOf(){for(var $=[],_e=0;_e<arguments.length;_e++)$[_e]=arguments[_e];return function(_t){return $.every(function(Vt){return matches(Vt,_t)})}}function hasExpectedRequestMetadata($,_e){if(!$||!$.meta)return!1;var _t=typeof $.meta.requestId=="string",Vt=_e.indexOf($.meta.requestStatus)>-1;return _t&&Vt}function isAsyncThunkArray($){return typeof $[0]=="function"&&"pending"in $[0]&&"fulfilled"in $[0]&&"rejected"in $[0]}function isPending(){for(var $=[],_e=0;_e<arguments.length;_e++)$[_e]=arguments[_e];return $.length===0?function(_t){return hasExpectedRequestMetadata(_t,["pending"])}:isAsyncThunkArray($)?function(_t){var Vt=$.map(function(_i){return _i.pending}),Wt=isAnyOf.apply(void 0,Vt);return Wt(_t)}:isPending()($[0])}function isRejected(){for(var $=[],_e=0;_e<arguments.length;_e++)$[_e]=arguments[_e];return $.length===0?function(_t){return hasExpectedRequestMetadata(_t,["rejected"])}:isAsyncThunkArray($)?function(_t){var Vt=$.map(function(_i){return _i.rejected}),Wt=isAnyOf.apply(void 0,Vt);return Wt(_t)}:isRejected()($[0])}function isRejectedWithValue(){for(var $=[],_e=0;_e<arguments.length;_e++)$[_e]=arguments[_e];var _t=function(Vt){return Vt&&Vt.meta&&Vt.meta.rejectedWithValue};return $.length===0?function(Vt){var Wt=isAllOf(isRejected.apply(void 0,$),_t);return Wt(Vt)}:isAsyncThunkArray($)?function(Vt){var Wt=isAllOf(isRejected.apply(void 0,$),_t);return Wt(Vt)}:isRejectedWithValue()($[0])}function isFulfilled(){for(var $=[],_e=0;_e<arguments.length;_e++)$[_e]=arguments[_e];return $.length===0?function(_t){return hasExpectedRequestMetadata(_t,["fulfilled"])}:isAsyncThunkArray($)?function(_t){var Vt=$.map(function(_i){return _i.fulfilled}),Wt=isAnyOf.apply(void 0,Vt);return Wt(_t)}:isFulfilled()($[0])}function isAsyncThunkAction(){for(var $=[],_e=0;_e<arguments.length;_e++)$[_e]=arguments[_e];return $.length===0?function(_t){return hasExpectedRequestMetadata(_t,["pending","fulfilled","rejected"])}:isAsyncThunkArray($)?function(_t){for(var Vt=[],Wt=0,_i=$;Wt<_i.length;Wt++){var _s=_i[Wt];Vt.push(_s.pending,_s.rejected,_s.fulfilled)}var _c=isAnyOf.apply(void 0,Vt);return _c(_t)}:isAsyncThunkAction()($[0])}var alm="listenerMiddleware";createAction(alm+"/add");createAction(alm+"/removeAll");createAction(alm+"/remove");var SHOULD_AUTOBATCH="RTK_autoBatch",prepareAutoBatched=function(){return function($){var _e;return{payload:$,meta:(_e={},_e[SHOULD_AUTOBATCH]=!0,_e)}}},promise$1;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);F();var __generator=globalThis&&globalThis.__generator||function($,_e){var _t={label:0,sent:function(){if(_i[0]&1)throw _i[1];return _i[1]},trys:[],ops:[]},Vt,Wt,_i,_s;return _s={next:_c(0),throw:_c(1),return:_c(2)},typeof Symbol=="function"&&(_s[Symbol.iterator]=function(){return this}),_s;function _c(_d){return function(_m){return _l([_d,_m])}}function _l(_d){if(Vt)throw new TypeError("Generator is already executing.");for(;_t;)try{if(Vt=1,Wt&&(_i=_d[0]&2?Wt.return:_d[0]?Wt.throw||((_i=Wt.return)&&_i.call(Wt),0):Wt.next)&&!(_i=_i.call(Wt,_d[1])).done)return _i;switch(Wt=0,_i&&(_d=[_d[0]&2,_i.value]),_d[0]){case 0:case 1:_i=_d;break;case 4:return _t.label++,{value:_d[1],done:!1};case 5:_t.label++,Wt=_d[1],_d=[0];continue;case 7:_d=_t.ops.pop(),_t.trys.pop();continue;default:if(_i=_t.trys,!(_i=_i.length>0&&_i[_i.length-1])&&(_d[0]===6||_d[0]===2)){_t=0;continue}if(_d[0]===3&&(!_i||_d[1]>_i[0]&&_d[1]<_i[3])){_t.label=_d[1];break}if(_d[0]===6&&_t.label<_i[1]){_t.label=_i[1],_i=_d;break}if(_i&&_t.label<_i[2]){_t.label=_i[2],_t.ops.push(_d);break}_i[2]&&_t.ops.pop(),_t.trys.pop();continue}_d=_e.call($,_t)}catch(_m){_d=[6,_m],Wt=0}finally{Vt=_i=0}if(_d[0]&5)throw _d[1];return{value:_d[0]?_d[1]:void 0,done:!0}}},__spreadArray$1=globalThis&&globalThis.__spreadArray||function($,_e){for(var _t=0,Vt=_e.length,Wt=$.length;_t<Vt;_t++,Wt++)$[Wt]=_e[_t];return $},__defProp$1=Object.defineProperty,__defProps$1=Object.defineProperties,__getOwnPropDescs$1=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$1=Object.getOwnPropertySymbols,__hasOwnProp$1=Object.prototype.hasOwnProperty,__propIsEnum$1=Object.prototype.propertyIsEnumerable,__defNormalProp$1=function($,_e,_t){return _e in $?__defProp$1($,_e,{enumerable:!0,configurable:!0,writable:!0,value:_t}):$[_e]=_t},__spreadValues$1=function($,_e){for(var _t in _e||(_e={}))__hasOwnProp$1.call(_e,_t)&&__defNormalProp$1($,_t,_e[_t]);if(__getOwnPropSymbols$1)for(var Vt=0,Wt=__getOwnPropSymbols$1(_e);Vt<Wt.length;Vt++){var _t=Wt[Vt];__propIsEnum$1.call(_e,_t)&&__defNormalProp$1($,_t,_e[_t])}return $},__spreadProps$1=function($,_e){return __defProps$1($,__getOwnPropDescs$1(_e))},__objRest=function($,_e){var _t={};for(var Vt in $)__hasOwnProp$1.call($,Vt)&&_e.indexOf(Vt)<0&&(_t[Vt]=$[Vt]);if($!=null&&__getOwnPropSymbols$1)for(var Wt=0,_i=__getOwnPropSymbols$1($);Wt<_i.length;Wt++){var Vt=_i[Wt];_e.indexOf(Vt)<0&&__propIsEnum$1.call($,Vt)&&(_t[Vt]=$[Vt])}return _t},__async=function($,_e,_t){return new Promise(function(Vt,Wt){var _i=function(_l){try{_c(_t.next(_l))}catch(_d){Wt(_d)}},_s=function(_l){try{_c(_t.throw(_l))}catch(_d){Wt(_d)}},_c=function(_l){return _l.done?Vt(_l.value):Promise.resolve(_l.value).then(_i,_s)};_c((_t=_t.apply($,_e)).next())})},QueryStatus;(function($){$.uninitialized="uninitialized",$.pending="pending",$.fulfilled="fulfilled",$.rejected="rejected"})(QueryStatus||(QueryStatus={}));function getRequestStatusFlags($){return{status:$,isUninitialized:$===QueryStatus.uninitialized,isLoading:$===QueryStatus.pending,isSuccess:$===QueryStatus.fulfilled,isError:$===QueryStatus.rejected}}function isAbsoluteUrl($){return new RegExp("(^|:)//").test($)}var withoutTrailingSlash=function($){return $.replace(/\/$/,"")},withoutLeadingSlash=function($){return $.replace(/^\//,"")};function joinUrls($,_e){if(!$)return _e;if(!_e)return $;if(isAbsoluteUrl(_e))return _e;var _t=$.endsWith("/")||!_e.startsWith("?")?"/":"";return $=withoutTrailingSlash($),_e=withoutLeadingSlash(_e),""+$+_t+_e}var flatten=function($){return[].concat.apply([],$)};function isOnline(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}function isDocumentVisible(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}var isPlainObject=isPlainObject$1;function copyWithStructuralSharing($,_e){if($===_e||!(isPlainObject($)&&isPlainObject(_e)||Array.isArray($)&&Array.isArray(_e)))return _e;for(var _t=Object.keys(_e),Vt=Object.keys($),Wt=_t.length===Vt.length,_i=Array.isArray(_e)?[]:{},_s=0,_c=_t;_s<_c.length;_s++){var _l=_c[_s];_i[_l]=copyWithStructuralSharing($[_l],_e[_l]),Wt&&(Wt=$[_l]===_i[_l])}return Wt?$:_i}var defaultFetchFn=function(){for(var $=[],_e=0;_e<arguments.length;_e++)$[_e]=arguments[_e];return fetch.apply(void 0,$)},defaultValidateStatus=function($){return $.status>=200&&$.status<=299},defaultIsJsonContentType=function($){return/ion\/(vnd\.api\+)?json/.test($.get("content-type")||"")};function stripUndefined($){if(!isPlainObject$1($))return $;for(var _e=__spreadValues$1({},$),_t=0,Vt=Object.entries(_e);_t<Vt.length;_t++){var Wt=Vt[_t],_i=Wt[0],_s=Wt[1];_s===void 0&&delete _e[_i]}return _e}function fetchBaseQuery($){var _e=this;$===void 0&&($={});var _t=$,Vt=_t.baseUrl,Wt=_t.prepareHeaders,_i=Wt===void 0?function(d_){return d_}:Wt,_s=_t.fetchFn,_c=_s===void 0?defaultFetchFn:_s,_l=_t.paramsSerializer,_d=_t.isJsonContentType,_m=_d===void 0?defaultIsJsonContentType:_d,e_=_t.jsonContentType,t_=e_===void 0?"application/json":e_,i_=_t.jsonReplacer,c_=_t.timeout,h_=_t.validateStatus,y_=__objRest(_t,["baseUrl","prepareHeaders","fetchFn","paramsSerializer","isJsonContentType","jsonContentType","jsonReplacer","timeout","validateStatus"]);return typeof fetch>"u"&&_c===defaultFetchFn&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),function(d_,f_){return __async(_e,null,function(){var S_,T_,R_,C_,j_,W_,A_,$_,q_,G_,I_,x_,Y_,z_,B_,Q_,K_,rE,aE,gE,kE,xE,YE,d0,M0,u0,D0,C0,QE,f0,$E,m0,SE,zE,N0,K0;return __generator(this,function(RE){switch(RE.label){case 0:return S_=f_.signal,T_=f_.getState,R_=f_.extra,C_=f_.endpoint,j_=f_.forced,W_=f_.type,$_=typeof d_=="string"?{url:d_}:d_,q_=$_.url,G_=$_.headers,I_=G_===void 0?new Headers(y_.headers):G_,x_=$_.params,Y_=x_===void 0?void 0:x_,z_=$_.responseHandler,B_=z_===void 0?"json":z_,Q_=$_.validateStatus,K_=Q_===void 0?h_??defaultValidateStatus:Q_,rE=$_.timeout,aE=rE===void 0?c_:rE,gE=__objRest($_,["url","headers","params","responseHandler","validateStatus","timeout"]),kE=__spreadValues$1(__spreadProps$1(__spreadValues$1({},y_),{signal:S_}),gE),I_=new Headers(stripUndefined(I_)),xE=kE,[4,_i(I_,{getState:T_,extra:R_,endpoint:C_,forced:j_,type:W_})];case 1:xE.headers=RE.sent()||I_,YE=function(VE){return typeof VE=="object"&&(isPlainObject$1(VE)||Array.isArray(VE)||typeof VE.toJSON=="function")},!kE.headers.has("content-type")&&YE(kE.body)&&kE.headers.set("content-type",t_),YE(kE.body)&&_m(kE.headers)&&(kE.body=JSON.stringify(kE.body,i_)),Y_&&(d0=~q_.indexOf("?")?"&":"?",M0=_l?_l(Y_):new URLSearchParams(stripUndefined(Y_)),q_+=d0+M0),q_=joinUrls(Vt,q_),u0=new Request(q_,kE),D0=u0.clone(),A_={request:D0},QE=!1,f0=aE&&setTimeout(function(){QE=!0,f_.abort()},aE),RE.label=2;case 2:return RE.trys.push([2,4,5,6]),[4,_c(u0)];case 3:return C0=RE.sent(),[3,6];case 4:return $E=RE.sent(),[2,{error:{status:QE?"TIMEOUT_ERROR":"FETCH_ERROR",error:String($E)},meta:A_}];case 5:return f0&&clearTimeout(f0),[7];case 6:m0=C0.clone(),A_.response=m0,zE="",RE.label=7;case 7:return RE.trys.push([7,9,,10]),[4,Promise.all([l_(C0,B_).then(function(VE){return SE=VE},function(VE){return N0=VE}),m0.text().then(function(VE){return zE=VE},function(){})])];case 8:if(RE.sent(),N0)throw N0;return[3,10];case 9:return K0=RE.sent(),[2,{error:{status:"PARSING_ERROR",originalStatus:C0.status,data:zE,error:String(K0)},meta:A_}];case 10:return[2,K_(C0,SE)?{data:SE,meta:A_}:{error:{status:C0.status,data:SE},meta:A_}]}})})};function l_(d_,f_){return __async(this,null,function(){var S_;return __generator(this,function(T_){switch(T_.label){case 0:return typeof f_=="function"?[2,f_(d_)]:(f_==="content-type"&&(f_=_m(d_.headers)?"json":"text"),f_!=="json"?[3,2]:[4,d_.text()]);case 1:return S_=T_.sent(),[2,S_.length?JSON.parse(S_):null];case 2:return[2,d_.text()]}})})}}var HandledError=function(){function $(_e,_t){_t===void 0&&(_t=void 0),this.value=_e,this.meta=_t}return $}(),onFocus=createAction("__rtkq/focused"),onFocusLost=createAction("__rtkq/unfocused"),onOnline=createAction("__rtkq/online"),onOffline=createAction("__rtkq/offline"),initialized=!1;function setupListeners($,_e){function _t(){var Vt=function(){return $(onFocus())},Wt=function(){return $(onFocusLost())},_i=function(){return $(onOnline())},_s=function(){return $(onOffline())},_c=function(){window.document.visibilityState==="visible"?Vt():Wt()};initialized||typeof window<"u"&&window.addEventListener&&(window.addEventListener("visibilitychange",_c,!1),window.addEventListener("focus",Vt,!1),window.addEventListener("online",_i,!1),window.addEventListener("offline",_s,!1),initialized=!0);var _l=function(){window.removeEventListener("focus",Vt),window.removeEventListener("visibilitychange",_c),window.removeEventListener("online",_i),window.removeEventListener("offline",_s),initialized=!1};return _l}return _e?_e($,{onFocus,onFocusLost,onOffline,onOnline}):_t()}var DefinitionType$1;(function($){$.query="query",$.mutation="mutation"})(DefinitionType$1||(DefinitionType$1={}));function isQueryDefinition$1($){return $.type===DefinitionType$1.query}function isMutationDefinition$1($){return $.type===DefinitionType$1.mutation}function calculateProvidedBy($,_e,_t,Vt,Wt,_i){return isFunction($)?$(_e,_t,Vt,Wt).map(expandTagDescription).map(_i):Array.isArray($)?$.map(expandTagDescription).map(_i):[]}function isFunction($){return typeof $=="function"}function expandTagDescription($){return typeof $=="string"?{type:$}:$}function isNotNullish($){return $!=null}var forceQueryFnSymbol=Symbol("forceQueryFn"),isUpsertQuery=function($){return typeof $[forceQueryFnSymbol]=="function"};function buildInitiate($){var _e=$.serializeQueryArgs,_t=$.queryThunk,Vt=$.mutationThunk,Wt=$.api,_i=$.context,_s=new Map,_c=new Map,_l=Wt.internalActions,_d=_l.unsubscribeQueryResult,_m=_l.removeMutationResult,e_=_l.updateSubscriptionOptions;return{buildInitiateQuery:d_,buildInitiateMutation:f_,getRunningQueryThunk:c_,getRunningMutationThunk:h_,getRunningQueriesThunk:y_,getRunningMutationsThunk:l_,getRunningOperationPromises:i_,removalWarning:t_};function t_(){throw new Error(`This method had to be removed due to a conceptual bug in RTK.
       Please see https://github.com/reduxjs/redux-toolkit/pull/2481 for details.
       See https://redux-toolkit.js.org/rtk-query/usage/server-side-rendering for new guidance on SSR.`)}function i_(){typeof process<"u";var S_=function(T_){return Array.from(T_.values()).flatMap(function(R_){return R_?Object.values(R_):[]})};return __spreadArray$1(__spreadArray$1([],S_(_s)),S_(_c)).filter(isNotNullish)}function c_(S_,T_){return function(R_){var C_,j_=_i.endpointDefinitions[S_],W_=_e({queryArgs:T_,endpointDefinition:j_,endpointName:S_});return(C_=_s.get(R_))==null?void 0:C_[W_]}}function h_(S_,T_){return function(R_){var C_;return(C_=_c.get(R_))==null?void 0:C_[T_]}}function y_(){return function(S_){return Object.values(_s.get(S_)||{}).filter(isNotNullish)}}function l_(){return function(S_){return Object.values(_c.get(S_)||{}).filter(isNotNullish)}}function d_(S_,T_){var R_=function(C_,j_){var W_=j_===void 0?{}:j_,A_=W_.subscribe,$_=A_===void 0?!0:A_,q_=W_.forceRefetch,G_=W_.subscriptionOptions,I_=forceQueryFnSymbol,x_=W_[I_];return function(Y_,z_){var B_,Q_,K_=_e({queryArgs:C_,endpointDefinition:T_,endpointName:S_}),rE=_t((B_={type:"query",subscribe:$_,forceRefetch:q_,subscriptionOptions:G_,endpointName:S_,originalArgs:C_,queryCacheKey:K_},B_[forceQueryFnSymbol]=x_,B_)),aE=Wt.endpoints[S_].select(C_),gE=Y_(rE),kE=aE(z_()),xE=gE.requestId,YE=gE.abort,d0=kE.requestId!==xE,M0=(Q_=_s.get(Y_))==null?void 0:Q_[K_],u0=function(){return aE(z_())},D0=Object.assign(x_?gE.then(u0):d0&&!M0?Promise.resolve(kE):Promise.all([M0,gE]).then(u0),{arg:C_,requestId:xE,subscriptionOptions:G_,queryCacheKey:K_,abort:YE,unwrap:function(){return __async(this,null,function(){var QE;return __generator(this,function(f0){switch(f0.label){case 0:return[4,D0];case 1:if(QE=f0.sent(),QE.isError)throw QE.error;return[2,QE.data]}})})},refetch:function(){return Y_(R_(C_,{subscribe:!1,forceRefetch:!0}))},unsubscribe:function(){$_&&Y_(_d({queryCacheKey:K_,requestId:xE}))},updateSubscriptionOptions:function(QE){D0.subscriptionOptions=QE,Y_(e_({endpointName:S_,requestId:xE,queryCacheKey:K_,options:QE}))}});if(!M0&&!d0&&!x_){var C0=_s.get(Y_)||{};C0[K_]=D0,_s.set(Y_,C0),D0.then(function(){delete C0[K_],Object.keys(C0).length||_s.delete(Y_)})}return D0}};return R_}function f_(S_){return function(T_,R_){var C_=R_===void 0?{}:R_,j_=C_.track,W_=j_===void 0?!0:j_,A_=C_.fixedCacheKey;return function($_,q_){var G_=Vt({type:"mutation",endpointName:S_,originalArgs:T_,track:W_,fixedCacheKey:A_}),I_=$_(G_),x_=I_.requestId,Y_=I_.abort,z_=I_.unwrap,B_=I_.unwrap().then(function(aE){return{data:aE}}).catch(function(aE){return{error:aE}}),Q_=function(){$_(_m({requestId:x_,fixedCacheKey:A_}))},K_=Object.assign(B_,{arg:I_.arg,requestId:x_,abort:Y_,unwrap:z_,unsubscribe:Q_,reset:Q_}),rE=_c.get($_)||{};return _c.set($_,rE),rE[x_]=K_,K_.then(function(){delete rE[x_],Object.keys(rE).length||_c.delete($_)}),A_&&(rE[A_]=K_,K_.then(function(){rE[A_]===K_&&(delete rE[A_],Object.keys(rE).length||_c.delete($_))})),K_}}}}function defaultTransformResponse($){return $}function buildThunks($){var _e=this,_t=$.reducerPath,Vt=$.baseQuery,Wt=$.context.endpointDefinitions,_i=$.serializeQueryArgs,_s=$.api,_c=function(f_,S_,T_){return function(R_){var C_=Wt[f_];R_(_s.internalActions.queryResultPatched({queryCacheKey:_i({queryArgs:S_,endpointDefinition:C_,endpointName:f_}),patches:T_}))}},_l=function(f_,S_,T_){return function(R_,C_){var j_,W_,A_=_s.endpoints[f_].select(S_)(C_()),$_={patches:[],inversePatches:[],undo:function(){return R_(_s.util.patchQueryData(f_,S_,$_.inversePatches))}};if(A_.status===QueryStatus.uninitialized)return $_;if("data"in A_)if(t(A_.data)){var q_=cn(A_.data,T_),G_=q_[1],I_=q_[2];(j_=$_.patches).push.apply(j_,G_),(W_=$_.inversePatches).push.apply(W_,I_)}else{var x_=T_(A_.data);$_.patches.push({op:"replace",path:[],value:x_}),$_.inversePatches.push({op:"replace",path:[],value:A_.data})}return R_(_s.util.patchQueryData(f_,S_,$_.patches)),$_}},_d=function(f_,S_,T_){return function(R_){var C_;return R_(_s.endpoints[f_].initiate(S_,(C_={subscribe:!1,forceRefetch:!0},C_[forceQueryFnSymbol]=function(){return{data:T_}},C_)))}},_m=function(f_,S_){return __async(_e,[f_,S_],function(T_,R_){var C_,j_,W_,A_,$_,q_,G_,I_,x_,Y_,z_,B_,Q_,K_,rE,aE,gE,kE,xE=R_.signal,YE=R_.abort,d0=R_.rejectWithValue,M0=R_.fulfillWithValue,u0=R_.dispatch,D0=R_.getState,C0=R_.extra;return __generator(this,function(QE){switch(QE.label){case 0:C_=Wt[T_.endpointName],QE.label=1;case 1:return QE.trys.push([1,8,,13]),j_=defaultTransformResponse,W_=void 0,A_={signal:xE,abort:YE,dispatch:u0,getState:D0,extra:C0,endpoint:T_.endpointName,type:T_.type,forced:T_.type==="query"?e_(T_,D0()):void 0},$_=T_.type==="query"?T_[forceQueryFnSymbol]:void 0,$_?(W_=$_(),[3,6]):[3,2];case 2:return C_.query?[4,Vt(C_.query(T_.originalArgs),A_,C_.extraOptions)]:[3,4];case 3:return W_=QE.sent(),C_.transformResponse&&(j_=C_.transformResponse),[3,6];case 4:return[4,C_.queryFn(T_.originalArgs,A_,C_.extraOptions,function(f0){return Vt(f0,A_,C_.extraOptions)})];case 5:W_=QE.sent(),QE.label=6;case 6:if(typeof process<"u",W_.error)throw new HandledError(W_.error,W_.meta);return z_=M0,[4,j_(W_.data,W_.meta,T_.originalArgs)];case 7:return[2,z_.apply(void 0,[QE.sent(),(gE={fulfilledTimeStamp:Date.now(),baseQueryMeta:W_.meta},gE[SHOULD_AUTOBATCH]=!0,gE)])];case 8:if(B_=QE.sent(),Q_=B_,!(Q_ instanceof HandledError))return[3,12];K_=defaultTransformResponse,C_.query&&C_.transformErrorResponse&&(K_=C_.transformErrorResponse),QE.label=9;case 9:return QE.trys.push([9,11,,12]),rE=d0,[4,K_(Q_.value,Q_.meta,T_.originalArgs)];case 10:return[2,rE.apply(void 0,[QE.sent(),(kE={baseQueryMeta:Q_.meta},kE[SHOULD_AUTOBATCH]=!0,kE)])];case 11:return aE=QE.sent(),Q_=aE,[3,12];case 12:throw typeof process<"u",console.error(Q_),Q_;case 13:return[2]}})})};function e_(f_,S_){var T_,R_,C_,j_,W_=(R_=(T_=S_[_t])==null?void 0:T_.queries)==null?void 0:R_[f_.queryCacheKey],A_=(C_=S_[_t])==null?void 0:C_.config.refetchOnMountOrArgChange,$_=W_==null?void 0:W_.fulfilledTimeStamp,q_=(j_=f_.forceRefetch)!=null?j_:f_.subscribe&&A_;return q_?q_===!0||(Number(new Date)-Number($_))/1e3>=q_:!1}var t_=createAsyncThunk(_t+"/executeQuery",_m,{getPendingMeta:function(){var f_;return f_={startedTimeStamp:Date.now()},f_[SHOULD_AUTOBATCH]=!0,f_},condition:function(f_,S_){var T_=S_.getState,R_,C_,j_,W_=T_(),A_=(C_=(R_=W_[_t])==null?void 0:R_.queries)==null?void 0:C_[f_.queryCacheKey],$_=A_==null?void 0:A_.fulfilledTimeStamp,q_=f_.originalArgs,G_=A_==null?void 0:A_.originalArgs,I_=Wt[f_.endpointName];return isUpsertQuery(f_)?!0:(A_==null?void 0:A_.status)==="pending"?!1:e_(f_,W_)||isQueryDefinition$1(I_)&&((j_=I_==null?void 0:I_.forceRefetch)!=null&&j_.call(I_,{currentArg:q_,previousArg:G_,endpointState:A_,state:W_}))?!0:!$_},dispatchConditionRejection:!0}),i_=createAsyncThunk(_t+"/executeMutation",_m,{getPendingMeta:function(){var f_;return f_={startedTimeStamp:Date.now()},f_[SHOULD_AUTOBATCH]=!0,f_}}),c_=function(f_){return"force"in f_},h_=function(f_){return"ifOlderThan"in f_},y_=function(f_,S_,T_){return function(R_,C_){var j_=c_(T_)&&T_.force,W_=h_(T_)&&T_.ifOlderThan,A_=function(I_){return I_===void 0&&(I_=!0),_s.endpoints[f_].initiate(S_,{forceRefetch:I_})},$_=_s.endpoints[f_].select(S_)(C_());if(j_)R_(A_());else if(W_){var q_=$_==null?void 0:$_.fulfilledTimeStamp;if(!q_){R_(A_());return}var G_=(Number(new Date)-Number(new Date(q_)))/1e3>=W_;G_&&R_(A_())}else R_(A_(!1))}};function l_(f_){return function(S_){var T_,R_;return((R_=(T_=S_==null?void 0:S_.meta)==null?void 0:T_.arg)==null?void 0:R_.endpointName)===f_}}function d_(f_,S_){return{matchPending:isAllOf(isPending(f_),l_(S_)),matchFulfilled:isAllOf(isFulfilled(f_),l_(S_)),matchRejected:isAllOf(isRejected(f_),l_(S_))}}return{queryThunk:t_,mutationThunk:i_,prefetch:y_,updateQueryData:_l,upsertQueryData:_d,patchQueryData:_c,buildMatchThunkActions:d_}}function calculateProvidedByThunk($,_e,_t,Vt){return calculateProvidedBy(_t[$.meta.arg.endpointName][_e],isFulfilled($)?$.payload:void 0,isRejectedWithValue($)?$.payload:void 0,$.meta.arg.originalArgs,"baseQueryMeta"in $.meta?$.meta.baseQueryMeta:void 0,Vt)}function updateQuerySubstateIfExists($,_e,_t){var Vt=$[_e];Vt&&_t(Vt)}function getMutationCacheKey($){var _e;return(_e="arg"in $?$.arg.fixedCacheKey:$.fixedCacheKey)!=null?_e:$.requestId}function updateMutationSubstateIfExists($,_e,_t){var Vt=$[getMutationCacheKey(_e)];Vt&&_t(Vt)}var initialState={};function buildSlice($){var _e=$.reducerPath,_t=$.queryThunk,Vt=$.mutationThunk,Wt=$.context,_i=Wt.endpointDefinitions,_s=Wt.apiUid,_c=Wt.extractRehydrationInfo,_l=Wt.hasRehydrationInfo,_d=$.assertTagType,_m=$.config,e_=createAction(_e+"/resetApiState"),t_=createSlice({name:_e+"/queries",initialState,reducers:{removeQueryResult:{reducer:function(T_,R_){var C_=R_.payload.queryCacheKey;delete T_[C_]},prepare:prepareAutoBatched()},queryResultPatched:function(T_,R_){var C_=R_.payload,j_=C_.queryCacheKey,W_=C_.patches;updateQuerySubstateIfExists(T_,j_,function(A_){A_.data=pn(A_.data,W_.concat())})}},extraReducers:function(T_){T_.addCase(_t.pending,function(R_,C_){var j_=C_.meta,W_=C_.meta.arg,A_,$_,q_=isUpsertQuery(W_);(W_.subscribe||q_)&&(($_=R_[A_=W_.queryCacheKey])!=null||(R_[A_]={status:QueryStatus.uninitialized,endpointName:W_.endpointName})),updateQuerySubstateIfExists(R_,W_.queryCacheKey,function(G_){G_.status=QueryStatus.pending,G_.requestId=q_&&G_.requestId?G_.requestId:j_.requestId,W_.originalArgs!==void 0&&(G_.originalArgs=W_.originalArgs),G_.startedTimeStamp=j_.startedTimeStamp})}).addCase(_t.fulfilled,function(R_,C_){var j_=C_.meta,W_=C_.payload;updateQuerySubstateIfExists(R_,j_.arg.queryCacheKey,function(A_){var $_;if(!(A_.requestId!==j_.requestId&&!isUpsertQuery(j_.arg))){var q_=_i[j_.arg.endpointName].merge;if(A_.status=QueryStatus.fulfilled,q_)if(A_.data!==void 0){var G_=j_.fulfilledTimeStamp,I_=j_.arg,x_=j_.baseQueryMeta,Y_=j_.requestId,z_=fn(A_.data,function(B_){return q_(B_,W_,{arg:I_.originalArgs,baseQueryMeta:x_,fulfilledTimeStamp:G_,requestId:Y_})});A_.data=z_}else A_.data=W_;else A_.data=($_=_i[j_.arg.endpointName].structuralSharing)==null||$_?copyWithStructuralSharing(A_.data,W_):W_;delete A_.error,A_.fulfilledTimeStamp=j_.fulfilledTimeStamp}})}).addCase(_t.rejected,function(R_,C_){var j_=C_.meta,W_=j_.condition,A_=j_.arg,$_=j_.requestId,q_=C_.error,G_=C_.payload;updateQuerySubstateIfExists(R_,A_.queryCacheKey,function(I_){if(!W_){if(I_.requestId!==$_)return;I_.status=QueryStatus.rejected,I_.error=G_??q_}})}).addMatcher(_l,function(R_,C_){for(var j_=_c(C_).queries,W_=0,A_=Object.entries(j_);W_<A_.length;W_++){var $_=A_[W_],q_=$_[0],G_=$_[1];((G_==null?void 0:G_.status)===QueryStatus.fulfilled||(G_==null?void 0:G_.status)===QueryStatus.rejected)&&(R_[q_]=G_)}})}}),i_=createSlice({name:_e+"/mutations",initialState,reducers:{removeMutationResult:{reducer:function(T_,R_){var C_=R_.payload,j_=getMutationCacheKey(C_);j_ in T_&&delete T_[j_]},prepare:prepareAutoBatched()}},extraReducers:function(T_){T_.addCase(Vt.pending,function(R_,C_){var j_=C_.meta,W_=C_.meta,A_=W_.requestId,$_=W_.arg,q_=W_.startedTimeStamp;$_.track&&(R_[getMutationCacheKey(j_)]={requestId:A_,status:QueryStatus.pending,endpointName:$_.endpointName,startedTimeStamp:q_})}).addCase(Vt.fulfilled,function(R_,C_){var j_=C_.payload,W_=C_.meta;W_.arg.track&&updateMutationSubstateIfExists(R_,W_,function(A_){A_.requestId===W_.requestId&&(A_.status=QueryStatus.fulfilled,A_.data=j_,A_.fulfilledTimeStamp=W_.fulfilledTimeStamp)})}).addCase(Vt.rejected,function(R_,C_){var j_=C_.payload,W_=C_.error,A_=C_.meta;A_.arg.track&&updateMutationSubstateIfExists(R_,A_,function($_){$_.requestId===A_.requestId&&($_.status=QueryStatus.rejected,$_.error=j_??W_)})}).addMatcher(_l,function(R_,C_){for(var j_=_c(C_).mutations,W_=0,A_=Object.entries(j_);W_<A_.length;W_++){var $_=A_[W_],q_=$_[0],G_=$_[1];((G_==null?void 0:G_.status)===QueryStatus.fulfilled||(G_==null?void 0:G_.status)===QueryStatus.rejected)&&q_!==(G_==null?void 0:G_.requestId)&&(R_[q_]=G_)}})}}),c_=createSlice({name:_e+"/invalidation",initialState,reducers:{},extraReducers:function(T_){T_.addCase(t_.actions.removeQueryResult,function(R_,C_){for(var j_=C_.payload.queryCacheKey,W_=0,A_=Object.values(R_);W_<A_.length;W_++)for(var $_=A_[W_],q_=0,G_=Object.values($_);q_<G_.length;q_++){var I_=G_[q_],x_=I_.indexOf(j_);x_!==-1&&I_.splice(x_,1)}}).addMatcher(_l,function(R_,C_){for(var j_,W_,A_,$_,q_=_c(C_).provided,G_=0,I_=Object.entries(q_);G_<I_.length;G_++)for(var x_=I_[G_],Y_=x_[0],z_=x_[1],B_=0,Q_=Object.entries(z_);B_<Q_.length;B_++)for(var K_=Q_[B_],rE=K_[0],aE=K_[1],gE=($_=(W_=(j_=R_[Y_])!=null?j_:R_[Y_]={})[A_=rE||"__internal_without_id"])!=null?$_:W_[A_]=[],kE=0,xE=aE;kE<xE.length;kE++){var YE=xE[kE],d0=gE.includes(YE);d0||gE.push(YE)}}).addMatcher(isAnyOf(isFulfilled(_t),isRejectedWithValue(_t)),function(R_,C_){for(var j_,W_,A_,$_,q_=calculateProvidedByThunk(C_,"providesTags",_i,_d),G_=C_.meta.arg.queryCacheKey,I_=0,x_=Object.values(R_);I_<x_.length;I_++)for(var Y_=x_[I_],z_=0,B_=Object.values(Y_);z_<B_.length;z_++){var Q_=B_[z_],K_=Q_.indexOf(G_);K_!==-1&&Q_.splice(K_,1)}for(var rE=0,aE=q_;rE<aE.length;rE++){var gE=aE[rE],kE=gE.type,xE=gE.id,YE=($_=(W_=(j_=R_[kE])!=null?j_:R_[kE]={})[A_=xE||"__internal_without_id"])!=null?$_:W_[A_]=[],d0=YE.includes(G_);d0||YE.push(G_)}})}}),h_=createSlice({name:_e+"/subscriptions",initialState,reducers:{updateSubscriptionOptions:function(T_,R_){},unsubscribeQueryResult:function(T_,R_){},internal_probeSubscription:function(T_,R_){}}}),y_=createSlice({name:_e+"/internalSubscriptions",initialState,reducers:{subscriptionsUpdated:function(T_,R_){return pn(T_,R_.payload)}}}),l_=createSlice({name:_e+"/config",initialState:__spreadValues$1({online:isOnline(),focused:isDocumentVisible(),middlewareRegistered:!1},_m),reducers:{middlewareRegistered:function(T_,R_){var C_=R_.payload;T_.middlewareRegistered=T_.middlewareRegistered==="conflict"||_s!==C_?"conflict":!0}},extraReducers:function(T_){T_.addCase(onOnline,function(R_){R_.online=!0}).addCase(onOffline,function(R_){R_.online=!1}).addCase(onFocus,function(R_){R_.focused=!0}).addCase(onFocusLost,function(R_){R_.focused=!1}).addMatcher(_l,function(R_){return __spreadValues$1({},R_)})}}),d_=combineReducers({queries:t_.reducer,mutations:i_.reducer,provided:c_.reducer,subscriptions:y_.reducer,config:l_.reducer}),f_=function(T_,R_){return d_(e_.match(R_)?void 0:T_,R_)},S_=__spreadProps$1(__spreadValues$1(__spreadValues$1(__spreadValues$1(__spreadValues$1(__spreadValues$1({},l_.actions),t_.actions),h_.actions),y_.actions),i_.actions),{unsubscribeMutationResult:i_.actions.removeMutationResult,resetApiState:e_});return{reducer:f_,actions:S_}}var skipToken=Symbol.for("RTKQ/skipToken"),initialSubState={status:QueryStatus.uninitialized},defaultQuerySubState=fn(initialSubState,function(){}),defaultMutationSubState=fn(initialSubState,function(){});function buildSelectors($){var _e=$.serializeQueryArgs,_t=$.reducerPath,Vt=function(_m){return defaultQuerySubState},Wt=function(_m){return defaultMutationSubState};return{buildQuerySelector:_c,buildMutationSelector:_l,selectInvalidatedBy:_d};function _i(_m){return __spreadValues$1(__spreadValues$1({},_m),getRequestStatusFlags(_m.status))}function _s(_m){var e_=_m[_t];return e_}function _c(_m,e_){return function(t_){var i_=_e({queryArgs:t_,endpointDefinition:e_,endpointName:_m}),c_=function(y_){var l_,d_,f_;return(f_=(d_=(l_=_s(y_))==null?void 0:l_.queries)==null?void 0:d_[i_])!=null?f_:defaultQuerySubState},h_=t_===skipToken?Vt:c_;return createSelector(h_,_i)}}function _l(){return function(_m){var e_,t_;typeof _m=="object"?t_=(e_=getMutationCacheKey(_m))!=null?e_:skipToken:t_=_m;var i_=function(h_){var y_,l_,d_;return(d_=(l_=(y_=_s(h_))==null?void 0:y_.mutations)==null?void 0:l_[t_])!=null?d_:defaultMutationSubState},c_=t_===skipToken?Wt:i_;return createSelector(c_,_i)}}function _d(_m,e_){for(var t_,i_=_m[_t],c_=new Set,h_=0,y_=e_.map(expandTagDescription);h_<y_.length;h_++){var l_=y_[h_],d_=i_.provided[l_.type];if(d_)for(var f_=(t_=l_.id!==void 0?d_[l_.id]:flatten(Object.values(d_)))!=null?t_:[],S_=0,T_=f_;S_<T_.length;S_++){var R_=T_[S_];c_.add(R_)}}return flatten(Array.from(c_.values()).map(function(C_){var j_=i_.queries[C_];return j_?[{queryCacheKey:C_,endpointName:j_.endpointName,originalArgs:j_.originalArgs}]:[]}))}}var cache$1=WeakMap?new WeakMap:void 0,defaultSerializeQueryArgs$1=function($){var _e=$.endpointName,_t=$.queryArgs,Vt="",Wt=cache$1==null?void 0:cache$1.get(_t);if(typeof Wt=="string")Vt=Wt;else{var _i=JSON.stringify(_t,function(_s,_c){return isPlainObject$1(_c)?Object.keys(_c).sort().reduce(function(_l,_d){return _l[_d]=_c[_d],_l},{}):_c});isPlainObject$1(_t)&&(cache$1==null||cache$1.set(_t,_i)),Vt=_i}return _e+"("+Vt+")"};function buildCreateApi(){for(var $=[],_e=0;_e<arguments.length;_e++)$[_e]=arguments[_e];return function(Vt){var Wt=defaultMemoize(function(_m){var e_,t_;return(t_=Vt.extractRehydrationInfo)==null?void 0:t_.call(Vt,_m,{reducerPath:(e_=Vt.reducerPath)!=null?e_:"api"})}),_i=__spreadProps$1(__spreadValues$1({reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1},Vt),{extractRehydrationInfo:Wt,serializeQueryArgs:function(_m){var e_=defaultSerializeQueryArgs$1;if("serializeQueryArgs"in _m.endpointDefinition){var t_=_m.endpointDefinition.serializeQueryArgs;e_=function(i_){var c_=t_(i_);return typeof c_=="string"?c_:defaultSerializeQueryArgs$1(__spreadProps$1(__spreadValues$1({},i_),{queryArgs:c_}))}}else Vt.serializeQueryArgs&&(e_=Vt.serializeQueryArgs);return e_(_m)},tagTypes:__spreadArray$1([],Vt.tagTypes||[])}),_s={endpointDefinitions:{},batch:function(_m){_m()},apiUid:nanoid(),extractRehydrationInfo:Wt,hasRehydrationInfo:defaultMemoize(function(_m){return Wt(_m)!=null})},_c={injectEndpoints:_d,enhanceEndpoints:function(_m){var e_=_m.addTagTypes,t_=_m.endpoints;if(e_)for(var i_=0,c_=e_;i_<c_.length;i_++){var h_=c_[i_];_i.tagTypes.includes(h_)||_i.tagTypes.push(h_)}if(t_)for(var y_=0,l_=Object.entries(t_);y_<l_.length;y_++){var d_=l_[y_],f_=d_[0],S_=d_[1];typeof S_=="function"?S_(_s.endpointDefinitions[f_]):Object.assign(_s.endpointDefinitions[f_]||{},S_)}return _c}},_l=$.map(function(_m){return _m.init(_c,_i,_s)});function _d(_m){for(var e_=_m.endpoints({query:function(S_){return __spreadProps$1(__spreadValues$1({},S_),{type:DefinitionType$1.query})},mutation:function(S_){return __spreadProps$1(__spreadValues$1({},S_),{type:DefinitionType$1.mutation})}}),t_=0,i_=Object.entries(e_);t_<i_.length;t_++){var c_=i_[t_],h_=c_[0],y_=c_[1];if(!_m.overrideExisting&&h_ in _s.endpointDefinitions){typeof process<"u";continue}_s.endpointDefinitions[h_]=y_;for(var l_=0,d_=_l;l_<d_.length;l_++){var f_=d_[l_];f_.injectEndpoint(h_,y_)}}return _c}return _c.injectEndpoints({endpoints:Vt.endpoints})}}function isObjectEmpty($){for(var _e in $)return!1;return!0}var THIRTY_TWO_BIT_MAX_TIMER_SECONDS=2147483647/1e3-1,buildCacheCollectionHandler=function($){var _e=$.reducerPath,_t=$.api,Vt=$.context,Wt=$.internalState,_i=_t.internalActions,_s=_i.removeQueryResult,_c=_i.unsubscribeQueryResult;function _l(t_){var i_=Wt.currentSubscriptions[t_];return!!i_&&!isObjectEmpty(i_)}var _d={},_m=function(t_,i_,c_){var h_;if(_c.match(t_)){var y_=i_.getState()[_e],l_=t_.payload.queryCacheKey;e_(l_,(h_=y_.queries[l_])==null?void 0:h_.endpointName,i_,y_.config)}if(_t.util.resetApiState.match(t_))for(var d_=0,f_=Object.entries(_d);d_<f_.length;d_++){var S_=f_[d_],T_=S_[0],R_=S_[1];R_&&clearTimeout(R_),delete _d[T_]}if(Vt.hasRehydrationInfo(t_))for(var y_=i_.getState()[_e],C_=Vt.extractRehydrationInfo(t_).queries,j_=0,W_=Object.entries(C_);j_<W_.length;j_++){var A_=W_[j_],l_=A_[0],$_=A_[1];e_(l_,$_==null?void 0:$_.endpointName,i_,y_.config)}};function e_(t_,i_,c_,h_){var y_,l_=Vt.endpointDefinitions[i_],d_=(y_=l_==null?void 0:l_.keepUnusedDataFor)!=null?y_:h_.keepUnusedDataFor;if(d_!==1/0){var f_=Math.max(0,Math.min(d_,THIRTY_TWO_BIT_MAX_TIMER_SECONDS));if(!_l(t_)){var S_=_d[t_];S_&&clearTimeout(S_),_d[t_]=setTimeout(function(){_l(t_)||c_.dispatch(_s({queryCacheKey:t_})),delete _d[t_]},f_*1e3)}}}return _m},buildInvalidationByTagsHandler=function($){var _e=$.reducerPath,_t=$.context,Vt=$.context.endpointDefinitions,Wt=$.mutationThunk,_i=$.api,_s=$.assertTagType,_c=$.refetchQuery,_l=_i.internalActions.removeQueryResult,_d=isAnyOf(isFulfilled(Wt),isRejectedWithValue(Wt)),_m=function(t_,i_){_d(t_)&&e_(calculateProvidedByThunk(t_,"invalidatesTags",Vt,_s),i_),_i.util.invalidateTags.match(t_)&&e_(calculateProvidedBy(t_.payload,void 0,void 0,void 0,void 0,_s),i_)};function e_(t_,i_){var c_=i_.getState(),h_=c_[_e],y_=_i.util.selectInvalidatedBy(c_,t_);_t.batch(function(){for(var l_,d_=Array.from(y_.values()),f_=0,S_=d_;f_<S_.length;f_++){var T_=S_[f_].queryCacheKey,R_=h_.queries[T_],C_=(l_=h_.subscriptions[T_])!=null?l_:{};R_&&(Object.keys(C_).length===0?i_.dispatch(_l({queryCacheKey:T_})):R_.status!==QueryStatus.uninitialized&&i_.dispatch(_c(R_,T_)))}})}return _m},buildPollingHandler=function($){var _e=$.reducerPath,_t=$.queryThunk,Vt=$.api,Wt=$.refetchQuery,_i=$.internalState,_s={},_c=function(i_,c_){(Vt.internalActions.updateSubscriptionOptions.match(i_)||Vt.internalActions.unsubscribeQueryResult.match(i_))&&_d(i_.payload,c_),(_t.pending.match(i_)||_t.rejected.match(i_)&&i_.meta.condition)&&_d(i_.meta.arg,c_),(_t.fulfilled.match(i_)||_t.rejected.match(i_)&&!i_.meta.condition)&&_l(i_.meta.arg,c_),Vt.util.resetApiState.match(i_)&&e_()};function _l(i_,c_){var h_=i_.queryCacheKey,y_=c_.getState()[_e],l_=y_.queries[h_],d_=_i.currentSubscriptions[h_];if(!(!l_||l_.status===QueryStatus.uninitialized)){var f_=t_(d_);if(Number.isFinite(f_)){var S_=_s[h_];S_!=null&&S_.timeout&&(clearTimeout(S_.timeout),S_.timeout=void 0);var T_=Date.now()+f_,R_=_s[h_]={nextPollTimestamp:T_,pollingInterval:f_,timeout:setTimeout(function(){R_.timeout=void 0,c_.dispatch(Wt(l_,h_))},f_)}}}}function _d(i_,c_){var h_=i_.queryCacheKey,y_=c_.getState()[_e],l_=y_.queries[h_],d_=_i.currentSubscriptions[h_];if(!(!l_||l_.status===QueryStatus.uninitialized)){var f_=t_(d_);if(!Number.isFinite(f_)){_m(h_);return}var S_=_s[h_],T_=Date.now()+f_;(!S_||T_<S_.nextPollTimestamp)&&_l({queryCacheKey:h_},c_)}}function _m(i_){var c_=_s[i_];c_!=null&&c_.timeout&&clearTimeout(c_.timeout),delete _s[i_]}function e_(){for(var i_=0,c_=Object.keys(_s);i_<c_.length;i_++){var h_=c_[i_];_m(h_)}}function t_(i_){i_===void 0&&(i_={});var c_=Number.POSITIVE_INFINITY;for(var h_ in i_)i_[h_].pollingInterval&&(c_=Math.min(i_[h_].pollingInterval,c_));return c_}return _c},buildWindowEventHandler=function($){var _e=$.reducerPath,_t=$.context,Vt=$.api,Wt=$.refetchQuery,_i=$.internalState,_s=Vt.internalActions.removeQueryResult,_c=function(_d,_m){onFocus.match(_d)&&_l(_m,"refetchOnFocus"),onOnline.match(_d)&&_l(_m,"refetchOnReconnect")};function _l(_d,_m){var e_=_d.getState()[_e],t_=e_.queries,i_=_i.currentSubscriptions;_t.batch(function(){for(var c_=0,h_=Object.keys(i_);c_<h_.length;c_++){var y_=h_[c_],l_=t_[y_],d_=i_[y_];if(!(!d_||!l_)){var f_=Object.values(d_).some(function(S_){return S_[_m]===!0})||Object.values(d_).every(function(S_){return S_[_m]===void 0})&&e_.config[_m];f_&&(Object.keys(d_).length===0?_d.dispatch(_s({queryCacheKey:y_})):l_.status!==QueryStatus.uninitialized&&_d.dispatch(Wt(l_,y_)))}}})}return _c},neverResolvedError=new Error("Promise never resolved before cacheEntryRemoved."),buildCacheLifecycleHandler=function($){var _e=$.api,_t=$.reducerPath,Vt=$.context,Wt=$.queryThunk,_i=$.mutationThunk;$.internalState;var _s=isAsyncThunkAction(Wt),_c=isAsyncThunkAction(_i),_l=isFulfilled(Wt,_i),_d={},_m=function(i_,c_,h_){var y_=e_(i_);if(Wt.pending.match(i_)){var l_=h_[_t].queries[y_],d_=c_.getState()[_t].queries[y_];!l_&&d_&&t_(i_.meta.arg.endpointName,i_.meta.arg.originalArgs,y_,c_,i_.meta.requestId)}else if(_i.pending.match(i_)){var d_=c_.getState()[_t].mutations[y_];d_&&t_(i_.meta.arg.endpointName,i_.meta.arg.originalArgs,y_,c_,i_.meta.requestId)}else if(_l(i_)){var f_=_d[y_];f_!=null&&f_.valueResolved&&(f_.valueResolved({data:i_.payload,meta:i_.meta.baseQueryMeta}),delete f_.valueResolved)}else if(_e.internalActions.removeQueryResult.match(i_)||_e.internalActions.removeMutationResult.match(i_)){var f_=_d[y_];f_&&(delete _d[y_],f_.cacheEntryRemoved())}else if(_e.util.resetApiState.match(i_))for(var S_=0,T_=Object.entries(_d);S_<T_.length;S_++){var R_=T_[S_],C_=R_[0],f_=R_[1];delete _d[C_],f_.cacheEntryRemoved()}};function e_(i_){return _s(i_)?i_.meta.arg.queryCacheKey:_c(i_)?i_.meta.requestId:_e.internalActions.removeQueryResult.match(i_)?i_.payload.queryCacheKey:_e.internalActions.removeMutationResult.match(i_)?getMutationCacheKey(i_.payload):""}function t_(i_,c_,h_,y_,l_){var d_=Vt.endpointDefinitions[i_],f_=d_==null?void 0:d_.onCacheEntryAdded;if(f_){var S_={},T_=new Promise(function($_){S_.cacheEntryRemoved=$_}),R_=Promise.race([new Promise(function($_){S_.valueResolved=$_}),T_.then(function(){throw neverResolvedError})]);R_.catch(function(){}),_d[h_]=S_;var C_=_e.endpoints[i_].select(d_.type===DefinitionType$1.query?c_:h_),j_=y_.dispatch(function($_,q_,G_){return G_}),W_=__spreadProps$1(__spreadValues$1({},y_),{getCacheEntry:function(){return C_(y_.getState())},requestId:l_,extra:j_,updateCachedData:d_.type===DefinitionType$1.query?function($_){return y_.dispatch(_e.util.updateQueryData(i_,c_,$_))}:void 0,cacheDataLoaded:R_,cacheEntryRemoved:T_}),A_=f_(c_,W_);Promise.resolve(A_).catch(function($_){if($_!==neverResolvedError)throw $_})}}return _m},buildQueryLifecycleHandler=function($){var _e=$.api,_t=$.context,Vt=$.queryThunk,Wt=$.mutationThunk,_i=isPending(Vt,Wt),_s=isRejected(Vt,Wt),_c=isFulfilled(Vt,Wt),_l={},_d=function(_m,e_){var t_,i_,c_;if(_i(_m)){var h_=_m.meta,y_=h_.requestId,l_=h_.arg,d_=l_.endpointName,f_=l_.originalArgs,S_=_t.endpointDefinitions[d_],T_=S_==null?void 0:S_.onQueryStarted;if(T_){var R_={},C_=new Promise(function(x_,Y_){R_.resolve=x_,R_.reject=Y_});C_.catch(function(){}),_l[y_]=R_;var j_=_e.endpoints[d_].select(S_.type===DefinitionType$1.query?f_:y_),W_=e_.dispatch(function(x_,Y_,z_){return z_}),A_=__spreadProps$1(__spreadValues$1({},e_),{getCacheEntry:function(){return j_(e_.getState())},requestId:y_,extra:W_,updateCachedData:S_.type===DefinitionType$1.query?function(x_){return e_.dispatch(_e.util.updateQueryData(d_,f_,x_))}:void 0,queryFulfilled:C_});T_(f_,A_)}}else if(_c(_m)){var $_=_m.meta,y_=$_.requestId,q_=$_.baseQueryMeta;(t_=_l[y_])==null||t_.resolve({data:_m.payload,meta:q_}),delete _l[y_]}else if(_s(_m)){var G_=_m.meta,y_=G_.requestId,I_=G_.rejectedWithValue,q_=G_.baseQueryMeta;(c_=_l[y_])==null||c_.reject({error:(i_=_m.payload)!=null?i_:_m.error,isUnhandledError:!I_,meta:q_}),delete _l[y_]}};return _d},buildDevCheckHandler=function($){var _e=$.api,_t=$.context.apiUid,Vt=$.reducerPath;return function(Wt,_i){var _s,_c;_e.util.resetApiState.match(Wt)&&_i.dispatch(_e.internalActions.middlewareRegistered(_t)),typeof process<"u"}},promise,queueMicrotaskShim=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis):function($){return(promise||(promise=Promise.resolve())).then($).catch(function(_e){return setTimeout(function(){throw _e},0)})},buildBatchedActionsHandler=function($){var _e=$.api,_t=$.queryThunk,Vt=$.internalState,Wt=_e.reducerPath+"/subscriptions",_i=null,_s=!1,_c=_e.internalActions,_l=_c.updateSubscriptionOptions,_d=_c.unsubscribeQueryResult,_m=function(e_,t_){var i_,c_,h_,y_,l_,d_,f_,S_,T_;if(_l.match(t_)){var R_=t_.payload,C_=R_.queryCacheKey,j_=R_.requestId,W_=R_.options;return(i_=e_==null?void 0:e_[C_])!=null&&i_[j_]&&(e_[C_][j_]=W_),!0}if(_d.match(t_)){var A_=t_.payload,C_=A_.queryCacheKey,j_=A_.requestId;return e_[C_]&&delete e_[C_][j_],!0}if(_e.internalActions.removeQueryResult.match(t_))return delete e_[t_.payload.queryCacheKey],!0;if(_t.pending.match(t_)){var $_=t_.meta,q_=$_.arg,j_=$_.requestId;if(q_.subscribe){var G_=(h_=e_[c_=q_.queryCacheKey])!=null?h_:e_[c_]={};return G_[j_]=(l_=(y_=q_.subscriptionOptions)!=null?y_:G_[j_])!=null?l_:{},!0}}if(_t.rejected.match(t_)){var I_=t_.meta,x_=I_.condition,q_=I_.arg,j_=I_.requestId;if(x_&&q_.subscribe){var G_=(f_=e_[d_=q_.queryCacheKey])!=null?f_:e_[d_]={};return G_[j_]=(T_=(S_=q_.subscriptionOptions)!=null?S_:G_[j_])!=null?T_:{},!0}}return!1};return function(e_,t_){var i_,c_;if(_i||(_i=JSON.parse(JSON.stringify(Vt.currentSubscriptions))),_e.internalActions.internal_probeSubscription.match(e_)){var h_=e_.payload,y_=h_.queryCacheKey,l_=h_.requestId,d_=!!((i_=Vt.currentSubscriptions[y_])!=null&&i_[l_]);return[!1,d_]}var f_=_m(Vt.currentSubscriptions,e_);if(f_){_s||(queueMicrotaskShim(function(){var C_=JSON.parse(JSON.stringify(Vt.currentSubscriptions)),j_=cn(_i,function(){return C_}),W_=j_[1];t_.next(_e.internalActions.subscriptionsUpdated(W_)),_i=C_,_s=!1}),_s=!0);var S_=!!((c_=e_.type)!=null&&c_.startsWith(Wt)),T_=_t.rejected.match(e_)&&e_.meta.condition&&!!e_.meta.arg.subscribe,R_=!S_&&!T_;return[R_,!1]}return[!0,!1]}};function buildMiddleware($){var _e=$.reducerPath,_t=$.queryThunk,Vt=$.api,Wt=$.context,_i=Wt.apiUid,_s={invalidateTags:createAction(_e+"/invalidateTags")},_c=function(e_){return!!e_&&typeof e_.type=="string"&&e_.type.startsWith(_e+"/")},_l=[buildDevCheckHandler,buildCacheCollectionHandler,buildInvalidationByTagsHandler,buildPollingHandler,buildCacheLifecycleHandler,buildQueryLifecycleHandler],_d=function(e_){var t_=!1,i_={currentSubscriptions:{}},c_=__spreadProps$1(__spreadValues$1({},$),{internalState:i_,refetchQuery:_m}),h_=_l.map(function(d_){return d_(c_)}),y_=buildBatchedActionsHandler(c_),l_=buildWindowEventHandler(c_);return function(d_){return function(f_){t_||(t_=!0,e_.dispatch(Vt.internalActions.middlewareRegistered(_i)));var S_=__spreadProps$1(__spreadValues$1({},e_),{next:d_}),T_=e_.getState(),R_=y_(f_,S_,T_),C_=R_[0],j_=R_[1],W_;if(C_?W_=d_(f_):W_=j_,e_.getState()[_e]&&(l_(f_,S_,T_),_c(f_)||Wt.hasRehydrationInfo(f_)))for(var A_=0,$_=h_;A_<$_.length;A_++){var q_=$_[A_];q_(f_,S_,T_)}return W_}}};return{middleware:_d,actions:_s};function _m(e_,t_,i_){return i_===void 0&&(i_={}),_t(__spreadValues$1({type:"query",endpointName:e_.endpointName,originalArgs:e_.originalArgs,subscribe:!1,forceRefetch:!0,queryCacheKey:t_},i_))}}function safeAssign$1($){for(var _e=[],_t=1;_t<arguments.length;_t++)_e[_t-1]=arguments[_t];Object.assign.apply(Object,__spreadArray$1([$],_e))}var coreModuleName=Symbol(),coreModule=function(){return{name:coreModuleName,init:function($,_e,_t){var Vt=_e.baseQuery,Wt=_e.tagTypes,_i=_e.reducerPath,_s=_e.serializeQueryArgs,_c=_e.keepUnusedDataFor,_l=_e.refetchOnMountOrArgChange,_d=_e.refetchOnFocus,_m=_e.refetchOnReconnect;T();var e_=function(gE){return typeof process<"u",gE};Object.assign($,{reducerPath:_i,endpoints:{},internalActions:{onOnline,onOffline,onFocus,onFocusLost},util:{}});var t_=buildThunks({baseQuery:Vt,reducerPath:_i,context:_t,api:$,serializeQueryArgs:_s}),i_=t_.queryThunk,c_=t_.mutationThunk,h_=t_.patchQueryData,y_=t_.updateQueryData,l_=t_.upsertQueryData,d_=t_.prefetch,f_=t_.buildMatchThunkActions,S_=buildSlice({context:_t,queryThunk:i_,mutationThunk:c_,reducerPath:_i,assertTagType:e_,config:{refetchOnFocus:_d,refetchOnReconnect:_m,refetchOnMountOrArgChange:_l,keepUnusedDataFor:_c,reducerPath:_i}}),T_=S_.reducer,R_=S_.actions;safeAssign$1($.util,{patchQueryData:h_,updateQueryData:y_,upsertQueryData:l_,prefetch:d_,resetApiState:R_.resetApiState}),safeAssign$1($.internalActions,R_);var C_=buildMiddleware({reducerPath:_i,context:_t,queryThunk:i_,mutationThunk:c_,api:$,assertTagType:e_}),j_=C_.middleware,W_=C_.actions;safeAssign$1($.util,W_),safeAssign$1($,{reducer:T_,middleware:j_});var A_=buildSelectors({serializeQueryArgs:_s,reducerPath:_i}),$_=A_.buildQuerySelector,q_=A_.buildMutationSelector,G_=A_.selectInvalidatedBy;safeAssign$1($.util,{selectInvalidatedBy:G_});var I_=buildInitiate({queryThunk:i_,mutationThunk:c_,api:$,serializeQueryArgs:_s,context:_t}),x_=I_.buildInitiateQuery,Y_=I_.buildInitiateMutation,z_=I_.getRunningMutationThunk,B_=I_.getRunningMutationsThunk,Q_=I_.getRunningQueriesThunk,K_=I_.getRunningQueryThunk,rE=I_.getRunningOperationPromises,aE=I_.removalWarning;return safeAssign$1($.util,{getRunningOperationPromises:rE,getRunningOperationPromise:aE,getRunningMutationThunk:z_,getRunningMutationsThunk:B_,getRunningQueryThunk:K_,getRunningQueriesThunk:Q_}),{name:coreModuleName,injectEndpoint:function(gE,kE){var xE,YE,d0=$;(YE=(xE=d0.endpoints)[gE])!=null||(xE[gE]={}),isQueryDefinition$1(kE)?safeAssign$1(d0.endpoints[gE],{name:gE,select:$_(gE,kE),initiate:x_(gE,kE)},f_(i_,gE)):isMutationDefinition$1(kE)&&safeAssign$1(d0.endpoints[gE],{name:gE,select:q_(),initiate:Y_(gE)},f_(c_,gE))}}}}},__spreadArray=globalThis&&globalThis.__spreadArray||function($,_e){for(var _t=0,Vt=_e.length,Wt=$.length;_t<Vt;_t++,Wt++)$[Wt]=_e[_t];return $},__defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=function($,_e,_t){return _e in $?__defProp($,_e,{enumerable:!0,configurable:!0,writable:!0,value:_t}):$[_e]=_t},__spreadValues=function($,_e){for(var _t in _e||(_e={}))__hasOwnProp.call(_e,_t)&&__defNormalProp($,_t,_e[_t]);if(__getOwnPropSymbols)for(var Vt=0,Wt=__getOwnPropSymbols(_e);Vt<Wt.length;Vt++){var _t=Wt[Vt];__propIsEnum.call(_e,_t)&&__defNormalProp($,_t,_e[_t])}return $},__spreadProps=function($,_e){return __defProps($,__getOwnPropDescs(_e))};function useStableQueryArgs($,_e,_t,Vt){var Wt=reactExports.useMemo(function(){return{queryArgs:$,serialized:typeof $=="object"?_e({queryArgs:$,endpointDefinition:_t,endpointName:Vt}):$}},[$,_e,_t,Vt]),_i=reactExports.useRef(Wt);return reactExports.useEffect(function(){_i.current.serialized!==Wt.serialized&&(_i.current=Wt)},[Wt]),_i.current.serialized===Wt.serialized?_i.current.queryArgs:$}var UNINITIALIZED_VALUE=Symbol();function useShallowStableValue($){var _e=reactExports.useRef($);return reactExports.useEffect(function(){shallowEqual(_e.current,$)||(_e.current=$)},[$]),shallowEqual(_e.current,$)?_e.current:$}var cache=WeakMap?new WeakMap:void 0,defaultSerializeQueryArgs=function($){var _e=$.endpointName,_t=$.queryArgs,Vt="",Wt=cache==null?void 0:cache.get(_t);if(typeof Wt=="string")Vt=Wt;else{var _i=JSON.stringify(_t,function(_s,_c){return isPlainObject$1(_c)?Object.keys(_c).sort().reduce(function(_l,_d){return _l[_d]=_c[_d],_l},{}):_c});isPlainObject$1(_t)&&(cache==null||cache.set(_t,_i)),Vt=_i}return _e+"("+Vt+")"},useIsomorphicLayoutEffect=typeof window<"u"&&window.document&&window.document.createElement?reactExports.useLayoutEffect:reactExports.useEffect,defaultMutationStateSelector=function($){return $},noPendingQueryStateSelector=function($){return $.isUninitialized?__spreadProps(__spreadValues({},$),{isUninitialized:!1,isFetching:!0,isLoading:$.data===void 0,status:QueryStatus.pending}):$};function buildHooks($){var _e=$.api,_t=$.moduleOptions,Vt=_t.batch,Wt=_t.useDispatch,_i=_t.useSelector,_s=_t.useStore,_c=_t.unstable__sideEffectsInRender,_l=$.serializeQueryArgs,_d=$.context,_m=_c?function(h_){return h_()}:reactExports.useEffect;return{buildQueryHooks:i_,buildMutationHook:c_,usePrefetch:t_};function e_(h_,y_,l_){if(y_!=null&&y_.endpointName&&h_.isUninitialized){var d_=y_.endpointName,f_=_d.endpointDefinitions[d_];_l({queryArgs:y_.originalArgs,endpointDefinition:f_,endpointName:d_})===_l({queryArgs:l_,endpointDefinition:f_,endpointName:d_})&&(y_=void 0)}var S_=h_.isSuccess?h_.data:y_==null?void 0:y_.data;S_===void 0&&(S_=h_.data);var T_=S_!==void 0,R_=h_.isLoading,C_=!T_&&R_,j_=h_.isSuccess||R_&&T_;return __spreadProps(__spreadValues({},h_),{data:S_,currentData:h_.data,isFetching:R_,isLoading:C_,isSuccess:j_})}function t_(h_,y_){var l_=Wt(),d_=useShallowStableValue(y_);return reactExports.useCallback(function(f_,S_){return l_(_e.util.prefetch(h_,f_,__spreadValues(__spreadValues({},d_),S_)))},[h_,l_,d_])}function i_(h_){var y_=function(f_,S_){var T_=S_===void 0?{}:S_,R_=T_.refetchOnReconnect,C_=T_.refetchOnFocus,j_=T_.refetchOnMountOrArgChange,W_=T_.skip,A_=W_===void 0?!1:W_,$_=T_.pollingInterval,q_=$_===void 0?0:$_,G_=_e.endpoints[h_].initiate,I_=Wt(),x_=useStableQueryArgs(A_?skipToken:f_,defaultSerializeQueryArgs,_d.endpointDefinitions[h_],h_),Y_=useShallowStableValue({refetchOnReconnect:R_,refetchOnFocus:C_,pollingInterval:q_}),z_=reactExports.useRef(!1),B_=reactExports.useRef(),Q_=B_.current||{},K_=Q_.queryCacheKey,rE=Q_.requestId,aE=!1;if(K_&&rE){var gE=I_(_e.internalActions.internal_probeSubscription({queryCacheKey:K_,requestId:rE}));aE=!!gE}var kE=!aE&&z_.current;return _m(function(){z_.current=aE}),_m(function(){kE&&(B_.current=void 0)},[kE]),_m(function(){var xE,YE=B_.current;if(typeof process<"u",x_===skipToken){YE==null||YE.unsubscribe(),B_.current=void 0;return}var d0=(xE=B_.current)==null?void 0:xE.subscriptionOptions;if(!YE||YE.arg!==x_){YE==null||YE.unsubscribe();var M0=I_(G_(x_,{subscriptionOptions:Y_,forceRefetch:j_}));B_.current=M0}else Y_!==d0&&YE.updateSubscriptionOptions(Y_)},[I_,G_,j_,x_,Y_,kE]),reactExports.useEffect(function(){return function(){var xE;(xE=B_.current)==null||xE.unsubscribe(),B_.current=void 0}},[]),reactExports.useMemo(function(){return{refetch:function(){var xE;if(!B_.current)throw new Error("Cannot refetch a query that has not been started yet.");return(xE=B_.current)==null?void 0:xE.refetch()}}},[])},l_=function(f_){var S_=f_===void 0?{}:f_,T_=S_.refetchOnReconnect,R_=S_.refetchOnFocus,C_=S_.pollingInterval,j_=C_===void 0?0:C_,W_=_e.endpoints[h_].initiate,A_=Wt(),$_=reactExports.useState(UNINITIALIZED_VALUE),q_=$_[0],G_=$_[1],I_=reactExports.useRef(),x_=useShallowStableValue({refetchOnReconnect:T_,refetchOnFocus:R_,pollingInterval:j_});_m(function(){var B_,Q_,K_=(B_=I_.current)==null?void 0:B_.subscriptionOptions;x_!==K_&&((Q_=I_.current)==null||Q_.updateSubscriptionOptions(x_))},[x_]);var Y_=reactExports.useRef(x_);_m(function(){Y_.current=x_},[x_]);var z_=reactExports.useCallback(function(B_,Q_){Q_===void 0&&(Q_=!1);var K_;return Vt(function(){var rE;(rE=I_.current)==null||rE.unsubscribe(),I_.current=K_=A_(W_(B_,{subscriptionOptions:Y_.current,forceRefetch:!Q_})),G_(B_)}),K_},[A_,W_]);return reactExports.useEffect(function(){return function(){var B_;(B_=I_==null?void 0:I_.current)==null||B_.unsubscribe()}},[]),reactExports.useEffect(function(){q_!==UNINITIALIZED_VALUE&&!I_.current&&z_(q_,!0)},[q_,z_]),reactExports.useMemo(function(){return[z_,q_]},[z_,q_])},d_=function(f_,S_){var T_=S_===void 0?{}:S_,R_=T_.skip,C_=R_===void 0?!1:R_,j_=T_.selectFromResult,W_=_e.endpoints[h_].select,A_=useStableQueryArgs(C_?skipToken:f_,_l,_d.endpointDefinitions[h_],h_),$_=reactExports.useRef(),q_=reactExports.useMemo(function(){return createSelector([W_(A_),function(z_,B_){return B_},function(z_){return A_}],e_)},[W_,A_]),G_=reactExports.useMemo(function(){return j_?createSelector([q_],j_):q_},[q_,j_]),I_=_i(function(z_){return G_(z_,$_.current)},shallowEqual),x_=_s(),Y_=q_(x_.getState(),$_.current);return useIsomorphicLayoutEffect(function(){$_.current=Y_},[Y_]),I_};return{useQueryState:d_,useQuerySubscription:y_,useLazyQuerySubscription:l_,useLazyQuery:function(f_){var S_=l_(f_),T_=S_[0],R_=S_[1],C_=d_(R_,__spreadProps(__spreadValues({},f_),{skip:R_===UNINITIALIZED_VALUE})),j_=reactExports.useMemo(function(){return{lastArg:R_}},[R_]);return reactExports.useMemo(function(){return[T_,C_,j_]},[T_,C_,j_])},useQuery:function(f_,S_){var T_=y_(f_,S_),R_=d_(f_,__spreadValues({selectFromResult:f_===skipToken||S_!=null&&S_.skip?void 0:noPendingQueryStateSelector},S_)),C_=R_.data,j_=R_.status,W_=R_.isLoading,A_=R_.isSuccess,$_=R_.isError,q_=R_.error;return reactExports.useDebugValue({data:C_,status:j_,isLoading:W_,isSuccess:A_,isError:$_,error:q_}),reactExports.useMemo(function(){return __spreadValues(__spreadValues({},R_),T_)},[R_,T_])}}}function c_(h_){return function(y_){var l_=y_===void 0?{}:y_,d_=l_.selectFromResult,f_=d_===void 0?defaultMutationStateSelector:d_,S_=l_.fixedCacheKey,T_=_e.endpoints[h_],R_=T_.select,C_=T_.initiate,j_=Wt(),W_=reactExports.useState(),A_=W_[0],$_=W_[1];reactExports.useEffect(function(){return function(){A_!=null&&A_.arg.fixedCacheKey||A_==null||A_.reset()}},[A_]);var q_=reactExports.useCallback(function(YE){var d0=j_(C_(YE,{fixedCacheKey:S_}));return $_(d0),d0},[j_,C_,S_]),G_=(A_||{}).requestId,I_=reactExports.useMemo(function(){return createSelector([R_({fixedCacheKey:S_,requestId:A_==null?void 0:A_.requestId})],f_)},[R_,A_,f_,S_]),x_=_i(I_,shallowEqual),Y_=S_==null?A_==null?void 0:A_.arg.originalArgs:void 0,z_=reactExports.useCallback(function(){Vt(function(){A_&&$_(void 0),S_&&j_(_e.internalActions.removeMutationResult({requestId:G_,fixedCacheKey:S_}))})},[j_,S_,A_,G_]),B_=x_.endpointName,Q_=x_.data,K_=x_.status,rE=x_.isLoading,aE=x_.isSuccess,gE=x_.isError,kE=x_.error;reactExports.useDebugValue({endpointName:B_,data:Q_,status:K_,isLoading:rE,isSuccess:aE,isError:gE,error:kE});var xE=reactExports.useMemo(function(){return __spreadProps(__spreadValues({},x_),{originalArgs:Y_,reset:z_})},[x_,Y_,z_]);return reactExports.useMemo(function(){return[q_,xE]},[q_,xE])}}}var DefinitionType;(function($){$.query="query",$.mutation="mutation"})(DefinitionType||(DefinitionType={}));function isQueryDefinition($){return $.type===DefinitionType.query}function isMutationDefinition($){return $.type===DefinitionType.mutation}function capitalize($){return $.replace($[0],$[0].toUpperCase())}function safeAssign($){for(var _e=[],_t=1;_t<arguments.length;_t++)_e[_t-1]=arguments[_t];Object.assign.apply(Object,__spreadArray([$],_e))}var reactHooksModuleName=Symbol(),reactHooksModule=function($){var _e=$===void 0?{}:$,_t=_e.batch,Vt=_t===void 0?reactDomExports.unstable_batchedUpdates:_t,Wt=_e.useDispatch,_i=Wt===void 0?useDispatch:Wt,_s=_e.useSelector,_c=_s===void 0?useSelector:_s,_l=_e.useStore,_d=_l===void 0?useStore:_l,_m=_e.unstable__sideEffectsInRender,e_=_m===void 0?!1:_m;return{name:reactHooksModuleName,init:function(t_,i_,c_){var h_=i_.serializeQueryArgs,y_=t_,l_=buildHooks({api:t_,moduleOptions:{batch:Vt,useDispatch:_i,useSelector:_c,useStore:_d,unstable__sideEffectsInRender:e_},serializeQueryArgs:h_,context:c_}),d_=l_.buildQueryHooks,f_=l_.buildMutationHook,S_=l_.usePrefetch;return safeAssign(y_,{usePrefetch:S_}),safeAssign(c_,{batch:Vt}),{injectEndpoint:function(T_,R_){if(isQueryDefinition(R_)){var C_=d_(T_),j_=C_.useQuery,W_=C_.useLazyQuery,A_=C_.useLazyQuerySubscription,$_=C_.useQueryState,q_=C_.useQuerySubscription;safeAssign(y_.endpoints[T_],{useQuery:j_,useLazyQuery:W_,useLazyQuerySubscription:A_,useQueryState:$_,useQuerySubscription:q_}),t_["use"+capitalize(T_)+"Query"]=j_,t_["useLazy"+capitalize(T_)+"Query"]=W_}else if(isMutationDefinition(R_)){var G_=f_(T_);safeAssign(y_.endpoints[T_],{useMutation:G_}),t_["use"+capitalize(T_)+"Mutation"]=G_}}}}}},createApi=buildCreateApi(coreModule(),reactHooksModule());const baseQuery=fetchBaseQuery({baseUrl:"http://localhost:8080/",prepareHeaders:$=>($.set("authorization",`Bearer ${localStorage.getItem("token")}`),$.set("credentials","include"),$)}),apiSlice=createApi({reducerPath:"api",baseQuery,tagTypes:["user","doctor","doctors","leave","timeSlot","appointments","conversation","messages","secondUSer"],endpoints:$=>({userLogin:$.mutation({query:_e=>({url:"/login",method:"POST",body:_e}),invalidatesTags:["user","doctor"]}),userGoogleLogin:$.mutation({query:_e=>({url:"/googleRegister",method:"POST",body:_e}),invalidatesTags:["user","doctor"]}),getUserDetails:$.query({query:()=>"/getUserData",providesTags:["user","doctor"],headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),docCheck:$.query({query:()=>"/doctor/getDocCheck",providesTags:["doctor"],headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),fetchDoctors:$.query({query:_e=>`/doctor/fetchDoctors/${_e}`,providesTags:["doctors"]}),fetchSpecialities:$.query({query:()=>"/doctor/fetchSpecialities",providesTags:["doctor","speciality"]}),updatePhone:$.mutation({query:_e=>({url:"/updatePhone",method:"PATCH",body:_e}),invalidatesTags:["user"]}),fetchDocLeaveDates:$.query({query:()=>"/doctor/fetchLeaveDates",providesTags:["doctor","leave"]}),updateDocLeave:$.mutation({query:_e=>({url:"/doctor/updateLeave",method:"POST",body:_e}),invalidatesTags:["doctor","leave"]}),removeLeave:$.mutation({query:_e=>({url:"/doctor/removeLeave",method:"PATCH",body:_e}),invalidatesTags:["doctor","leave"]}),updateTimeSlot:$.mutation({query:_e=>({url:"/doctor/updateTimeSlot",method:"PATCH",body:_e}),invalidatesTags:["doctor","timeSlot"]}),fetchTimeSlot:$.query({query:()=>"/doctor/fetchTimeSlot",providesTags:["doctor","timeSlot"]}),fetchDoctorProfile:$.query({query:_e=>`/doctorProfile/${_e}`,providesTags:["doctors"]}),bookSlot:$.mutation({query:_e=>({url:"/bookSlot",method:"POST",body:_e}),invalidatesTags:["doctor","appointments"]}),patientAppointments:$.query({query:()=>"/fetchAppointments",providesTags:["appointments"]}),fetchConversation:$.query({query:()=>"/com/fetchConvo",providesTags:["conversation"]}),fetchSecondUser:$.query({query:_e=>`/com/fetchSecondUser/${_e}`,providesTags:["secondUSer"]}),fetchMessages:$.query({query:_e=>`/com/getMessages/${_e}`,providesTags:["messages"]}),sendMessage:$.mutation({query:_e=>({url:"/com/addMessage",method:"POST",body:_e}),invalidatesTags:["messages"]}),createSession:$.mutation({query:_e=>({url:"/com/addConvo",method:"POST",body:_e}),invalidatesTags:["conversation","appointments"]}),endSession:$.mutation({query:_e=>({url:"/com/endConvo",method:"PATCH",body:_e}),invalidatesTags:["conversation","appointments"]}),fetchDoctorAppointments:$.query({query:()=>"/doctor/fetchAppointments",providesTags:["appointments"]}),fetchVideoToken:$.query({query:_e=>`/com/generateToken/${_e}`,providesTags:["conversation"]}),submitReview:$.mutation({query:_e=>({url:"/submitFeedback",method:"POST",body:_e}),invalidatesTags:["appointments"]}),createCheckOutSession:$.mutation({query:_e=>({url:"/create-checkout-session",method:"POST",body:_e})}),submitPrescription:$.mutation({query:_e=>({url:"/doctor/submitPrescription",method:"POST",body:_e}),invalidatesTags:["appointments"]}),doctorProfileData:$.query({query:()=>"/doctor/doctorProfileData",providesTags:["doctor","appointments"]}),withdrawWalletAmount:$.mutation({query:()=>({url:"/doctor/walletwithdraw",method:"PATCH"}),invalidatesTags:["doctor","appointments"]}),updateUserProfile:$.mutation({query:_e=>({url:"/updateProfile",method:"PATCH",body:_e}),invalidatesTags:["user"]}),fetchAppointmentsCount:$.query({query:()=>"/consultationCount",providesTags:["user","appointments"]})})}),{useGetUserDetailsQuery,useUserLoginMutation,useUserGoogleLoginMutation,useDocCheckQuery,useFetchDoctorsQuery,useFetchSpecialitiesQuery,useUpdatePhoneMutation,useUpdateDocLeaveMutation,useFetchDocLeaveDatesQuery,useRemoveLeaveMutation,useFetchTimeSlotQuery,useUpdateTimeSlotMutation,useFetchDoctorProfileQuery,useBookSlotMutation,usePatientAppointmentsQuery,useFetchConversationQuery,useFetchSecondUserQuery,useFetchMessagesQuery,useSendMessageMutation,useCreateSessionMutation,useEndSessionMutation,useFetchDoctorAppointmentsQuery,useFetchVideoTokenQuery,useSubmitReviewMutation,useCreateCheckOutSessionMutation,useSubmitPrescriptionMutation,useDoctorProfileDataQuery,useWithdrawWalletAmountMutation,useUpdateUserProfileMutation,useFetchAppointmentsCountQuery}=apiSlice,alertSlice=createSlice({name:"alerts",initialState:{loading:!1},reducers:{showloading:$=>{$.loading=!0},hideLoading:$=>{$.loading=!1}}}),{showloading,hideLoading}=alertSlice.actions;function HomePage(){const $=useDispatch(),_e=useNavigate(),{data:_t,isSuccess:Vt,isLoading:Wt,isFetching:_i,isError:_s}=useDocCheckQuery();return reactExports.useEffect(()=>{var _c;Wt||_i?$(showloading()):_s?$(hideLoading()):Vt&&($(hideLoading()),(_c=_t==null?void 0:_t.doc)!=null&&_c.isDoctor&&_e("/doctor"))},[Wt,_i,Vt,_t,$,_e]),jsx("div",{children:jsxs(Navbar,{children:[jsx(Banner,{}),jsx(analytics,{}),jsx(newsLetter,{})]})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function($){const _e=[];let _t=0;for(let Vt=0;Vt<$.length;Vt++){let Wt=$.charCodeAt(Vt);Wt<128?_e[_t++]=Wt:Wt<2048?(_e[_t++]=Wt>>6|192,_e[_t++]=Wt&63|128):(Wt&64512)===55296&&Vt+1<$.length&&($.charCodeAt(Vt+1)&64512)===56320?(Wt=65536+((Wt&1023)<<10)+($.charCodeAt(++Vt)&1023),_e[_t++]=Wt>>18|240,_e[_t++]=Wt>>12&63|128,_e[_t++]=Wt>>6&63|128,_e[_t++]=Wt&63|128):(_e[_t++]=Wt>>12|224,_e[_t++]=Wt>>6&63|128,_e[_t++]=Wt&63|128)}return _e},byteArrayToString=function($){const _e=[];let _t=0,Vt=0;for(;_t<$.length;){const Wt=$[_t++];if(Wt<128)_e[Vt++]=String.fromCharCode(Wt);else if(Wt>191&&Wt<224){const _i=$[_t++];_e[Vt++]=String.fromCharCode((Wt&31)<<6|_i&63)}else if(Wt>239&&Wt<365){const _i=$[_t++],_s=$[_t++],_c=$[_t++],_l=((Wt&7)<<18|(_i&63)<<12|(_s&63)<<6|_c&63)-65536;_e[Vt++]=String.fromCharCode(55296+(_l>>10)),_e[Vt++]=String.fromCharCode(56320+(_l&1023))}else{const _i=$[_t++],_s=$[_t++];_e[Vt++]=String.fromCharCode((Wt&15)<<12|(_i&63)<<6|_s&63)}}return _e.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray($,_e){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const _t=_e?this.byteToCharMapWebSafe_:this.byteToCharMap_,Vt=[];for(let Wt=0;Wt<$.length;Wt+=3){const _i=$[Wt],_s=Wt+1<$.length,_c=_s?$[Wt+1]:0,_l=Wt+2<$.length,_d=_l?$[Wt+2]:0,_m=_i>>2,e_=(_i&3)<<4|_c>>4;let t_=(_c&15)<<2|_d>>6,i_=_d&63;_l||(i_=64,_s||(t_=64)),Vt.push(_t[_m],_t[e_],_t[t_],_t[i_])}return Vt.join("")},encodeString($,_e){return this.HAS_NATIVE_SUPPORT&&!_e?btoa($):this.encodeByteArray(stringToByteArray$1($),_e)},decodeString($,_e){return this.HAS_NATIVE_SUPPORT&&!_e?atob($):byteArrayToString(this.decodeStringToByteArray($,_e))},decodeStringToByteArray($,_e){this.init_();const _t=_e?this.charToByteMapWebSafe_:this.charToByteMap_,Vt=[];for(let Wt=0;Wt<$.length;){const _i=_t[$.charAt(Wt++)],_c=Wt<$.length?_t[$.charAt(Wt)]:0;++Wt;const _d=Wt<$.length?_t[$.charAt(Wt)]:64;++Wt;const e_=Wt<$.length?_t[$.charAt(Wt)]:64;if(++Wt,_i==null||_c==null||_d==null||e_==null)throw new DecodeBase64StringError;const t_=_i<<2|_c>>4;if(Vt.push(t_),_d!==64){const i_=_c<<4&240|_d>>2;if(Vt.push(i_),e_!==64){const c_=_d<<6&192|e_;Vt.push(c_)}}}return Vt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function($){const _e=stringToByteArray$1($);return base64.encodeByteArray(_e,!0)},base64urlEncodeWithoutPadding=function($){return base64Encode($).replace(/\./g,"")},base64Decode=function($){try{return base64.decodeString($,!0)}catch(_e){console.error("base64Decode failed: ",_e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof process.env>"u")return;const $={}.__FIREBASE_DEFAULTS__;if($)return JSON.parse($)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const _e=$&&base64Decode($[1]);return _e&&JSON.parse(_e)},getDefaults=()=>{try{return getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch($){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`);return}},getDefaultEmulatorHost=$=>{var _e,_t;return(_t=(_e=getDefaults())===null||_e===void 0?void 0:_e.emulatorHosts)===null||_t===void 0?void 0:_t[$]},getDefaultAppConfig=()=>{var $;return($=getDefaults())===null||$===void 0?void 0:$.config},getExperimentalSetting=$=>{var _e;return(_e=getDefaults())===null||_e===void 0?void 0:_e[`_${$}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((_e,_t)=>{this.resolve=_e,this.reject=_t})}wrapCallback(_e){return(_t,Vt)=>{_t?this.reject(_t):this.resolve(Vt),typeof _e=="function"&&(this.promise.catch(()=>{}),_e.length===1?_e(_t):_e(_t,Vt))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isBrowserExtension(){const $=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof $=="object"&&$.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const $=getUA();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise(($,_e)=>{try{let _t=!0;const Vt="validate-browser-context-for-indexeddb-analytics-module",Wt=self.indexedDB.open(Vt);Wt.onsuccess=()=>{Wt.result.close(),_t||self.indexedDB.deleteDatabase(Vt),$(!0)},Wt.onupgradeneeded=()=>{_t=!1},Wt.onerror=()=>{var _i;_e(((_i=Wt.error)===null||_i===void 0?void 0:_i.message)||"")}}catch(_t){_e(_t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(_e,_t,Vt){super(_t),this.code=_e,this.customData=Vt,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(_e,_t,Vt){this.service=_e,this.serviceName=_t,this.errors=Vt}create(_e,..._t){const Vt=_t[0]||{},Wt=`${this.service}/${_e}`,_i=this.errors[_e],_s=_i?replaceTemplate(_i,Vt):"Error",_c=`${this.serviceName}: ${_s} (${Wt}).`;return new FirebaseError(Wt,_c,Vt)}}function replaceTemplate($,_e){return $.replace(PATTERN,(_t,Vt)=>{const Wt=_e[Vt];return Wt!=null?String(Wt):`<${Vt}?>`})}const PATTERN=/\{\$([^}]+)}/g;function isEmpty($){for(const _e in $)if(Object.prototype.hasOwnProperty.call($,_e))return!1;return!0}function deepEqual($,_e){if($===_e)return!0;const _t=Object.keys($),Vt=Object.keys(_e);for(const Wt of _t){if(!Vt.includes(Wt))return!1;const _i=$[Wt],_s=_e[Wt];if(isObject(_i)&&isObject(_s)){if(!deepEqual(_i,_s))return!1}else if(_i!==_s)return!1}for(const Wt of Vt)if(!_t.includes(Wt))return!1;return!0}function isObject($){return $!==null&&typeof $=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring($){const _e=[];for(const[_t,Vt]of Object.entries($))Array.isArray(Vt)?Vt.forEach(Wt=>{_e.push(encodeURIComponent(_t)+"="+encodeURIComponent(Wt))}):_e.push(encodeURIComponent(_t)+"="+encodeURIComponent(Vt));return _e.length?"&"+_e.join("&"):""}function createSubscribe($,_e){const _t=new ObserverProxy($,_e);return _t.subscribe.bind(_t)}class ObserverProxy{constructor(_e,_t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=_t,this.task.then(()=>{_e(this)}).catch(Vt=>{this.error(Vt)})}next(_e){this.forEachObserver(_t=>{_t.next(_e)})}error(_e){this.forEachObserver(_t=>{_t.error(_e)}),this.close(_e)}complete(){this.forEachObserver(_e=>{_e.complete()}),this.close()}subscribe(_e,_t,Vt){let Wt;if(_e===void 0&&_t===void 0&&Vt===void 0)throw new Error("Missing Observer.");implementsAnyMethods(_e,["next","error","complete"])?Wt=_e:Wt={next:_e,error:_t,complete:Vt},Wt.next===void 0&&(Wt.next=noop$1),Wt.error===void 0&&(Wt.error=noop$1),Wt.complete===void 0&&(Wt.complete=noop$1);const _i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Wt.error(this.finalError):Wt.complete()}catch{}}),this.observers.push(Wt),_i}unsubscribeOne(_e){this.observers===void 0||this.observers[_e]===void 0||(delete this.observers[_e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(_e){if(!this.finalized)for(let _t=0;_t<this.observers.length;_t++)this.sendOne(_t,_e)}sendOne(_e,_t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[_e]!==void 0)try{_t(this.observers[_e])}catch(Vt){typeof console<"u"&&console.error&&console.error(Vt)}})}close(_e){this.finalized||(this.finalized=!0,_e!==void 0&&(this.finalError=_e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods($,_e){if(typeof $!="object"||$===null)return!1;for(const _t of _e)if(_t in $&&typeof $[_t]=="function")return!0;return!1}function noop$1(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance($){return $&&$._delegate?$._delegate:$}class Component{constructor(_e,_t,Vt){this.name=_e,this.instanceFactory=_t,this.type=Vt,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(_e){return this.instantiationMode=_e,this}setMultipleInstances(_e){return this.multipleInstances=_e,this}setServiceProps(_e){return this.serviceProps=_e,this}setInstanceCreatedCallback(_e){return this.onInstanceCreated=_e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(_e,_t){this.name=_e,this.container=_t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(_e){const _t=this.normalizeInstanceIdentifier(_e);if(!this.instancesDeferred.has(_t)){const Vt=new Deferred;if(this.instancesDeferred.set(_t,Vt),this.isInitialized(_t)||this.shouldAutoInitialize())try{const Wt=this.getOrInitializeService({instanceIdentifier:_t});Wt&&Vt.resolve(Wt)}catch{}}return this.instancesDeferred.get(_t).promise}getImmediate(_e){var _t;const Vt=this.normalizeInstanceIdentifier(_e==null?void 0:_e.identifier),Wt=(_t=_e==null?void 0:_e.optional)!==null&&_t!==void 0?_t:!1;if(this.isInitialized(Vt)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:Vt})}catch(_i){if(Wt)return null;throw _i}else{if(Wt)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(_e){if(_e.name!==this.name)throw Error(`Mismatching Component ${_e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=_e,!!this.shouldAutoInitialize()){if(isComponentEager(_e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[_t,Vt]of this.instancesDeferred.entries()){const Wt=this.normalizeInstanceIdentifier(_t);try{const _i=this.getOrInitializeService({instanceIdentifier:Wt});Vt.resolve(_i)}catch{}}}}clearInstance(_e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(_e),this.instancesOptions.delete(_e),this.instances.delete(_e)}async delete(){const _e=Array.from(this.instances.values());await Promise.all([..._e.filter(_t=>"INTERNAL"in _t).map(_t=>_t.INTERNAL.delete()),..._e.filter(_t=>"_delete"in _t).map(_t=>_t._delete())])}isComponentSet(){return this.component!=null}isInitialized(_e=DEFAULT_ENTRY_NAME$1){return this.instances.has(_e)}getOptions(_e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(_e)||{}}initialize(_e={}){const{options:_t={}}=_e,Vt=this.normalizeInstanceIdentifier(_e.instanceIdentifier);if(this.isInitialized(Vt))throw Error(`${this.name}(${Vt}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Wt=this.getOrInitializeService({instanceIdentifier:Vt,options:_t});for(const[_i,_s]of this.instancesDeferred.entries()){const _c=this.normalizeInstanceIdentifier(_i);Vt===_c&&_s.resolve(Wt)}return Wt}onInit(_e,_t){var Vt;const Wt=this.normalizeInstanceIdentifier(_t),_i=(Vt=this.onInitCallbacks.get(Wt))!==null&&Vt!==void 0?Vt:new Set;_i.add(_e),this.onInitCallbacks.set(Wt,_i);const _s=this.instances.get(Wt);return _s&&_e(_s,Wt),()=>{_i.delete(_e)}}invokeOnInitCallbacks(_e,_t){const Vt=this.onInitCallbacks.get(_t);if(Vt)for(const Wt of Vt)try{Wt(_e,_t)}catch{}}getOrInitializeService({instanceIdentifier:_e,options:_t={}}){let Vt=this.instances.get(_e);if(!Vt&&this.component&&(Vt=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(_e),options:_t}),this.instances.set(_e,Vt),this.instancesOptions.set(_e,_t),this.invokeOnInitCallbacks(Vt,_e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,_e,Vt)}catch{}return Vt||null}normalizeInstanceIdentifier(_e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?_e:DEFAULT_ENTRY_NAME$1:_e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory($){return $===DEFAULT_ENTRY_NAME$1?void 0:$}function isComponentEager($){return $.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(_e){this.name=_e,this.providers=new Map}addComponent(_e){const _t=this.getProvider(_e.name);if(_t.isComponentSet())throw new Error(`Component ${_e.name} has already been registered with ${this.name}`);_t.setComponent(_e)}addOrOverwriteComponent(_e){this.getProvider(_e.name).isComponentSet()&&this.providers.delete(_e.name),this.addComponent(_e)}getProvider(_e){if(this.providers.has(_e))return this.providers.get(_e);const _t=new Provider(_e,this);return this.providers.set(_e,_t),_t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function($){$[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=($,_e,..._t)=>{if(_e<$.logLevel)return;const Vt=new Date().toISOString(),Wt=ConsoleMethod[_e];if(Wt)console[Wt](`[${Vt}]  ${$.name}:`,..._t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${_e})`)};class Logger{constructor(_e){this.name=_e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(_e){if(!(_e in LogLevel))throw new TypeError(`Invalid value "${_e}" assigned to \`logLevel\``);this._logLevel=_e}setLogLevel(_e){this._logLevel=typeof _e=="string"?levelStringToEnum[_e]:_e}get logHandler(){return this._logHandler}set logHandler(_e){if(typeof _e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=_e}get userLogHandler(){return this._userLogHandler}set userLogHandler(_e){this._userLogHandler=_e}debug(..._e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,..._e),this._logHandler(this,LogLevel.DEBUG,..._e)}log(..._e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,..._e),this._logHandler(this,LogLevel.VERBOSE,..._e)}info(..._e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,..._e),this._logHandler(this,LogLevel.INFO,..._e)}warn(..._e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,..._e),this._logHandler(this,LogLevel.WARN,..._e)}error(..._e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,..._e),this._logHandler(this,LogLevel.ERROR,..._e)}}const instanceOfAny=($,_e)=>_e.some(_t=>$ instanceof _t);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest($){const _e=new Promise((_t,Vt)=>{const Wt=()=>{$.removeEventListener("success",_i),$.removeEventListener("error",_s)},_i=()=>{_t(wrap($.result)),Wt()},_s=()=>{Vt($.error),Wt()};$.addEventListener("success",_i),$.addEventListener("error",_s)});return _e.then(_t=>{_t instanceof IDBCursor&&cursorRequestMap.set(_t,$)}).catch(()=>{}),reverseTransformCache.set(_e,$),_e}function cacheDonePromiseForTransaction($){if(transactionDoneMap.has($))return;const _e=new Promise((_t,Vt)=>{const Wt=()=>{$.removeEventListener("complete",_i),$.removeEventListener("error",_s),$.removeEventListener("abort",_s)},_i=()=>{_t(),Wt()},_s=()=>{Vt($.error||new DOMException("AbortError","AbortError")),Wt()};$.addEventListener("complete",_i),$.addEventListener("error",_s),$.addEventListener("abort",_s)});transactionDoneMap.set($,_e)}let idbProxyTraps={get($,_e,_t){if($ instanceof IDBTransaction){if(_e==="done")return transactionDoneMap.get($);if(_e==="objectStoreNames")return $.objectStoreNames||transactionStoreNamesMap.get($);if(_e==="store")return _t.objectStoreNames[1]?void 0:_t.objectStore(_t.objectStoreNames[0])}return wrap($[_e])},set($,_e,_t){return $[_e]=_t,!0},has($,_e){return $ instanceof IDBTransaction&&(_e==="done"||_e==="store")?!0:_e in $}};function replaceTraps($){idbProxyTraps=$(idbProxyTraps)}function wrapFunction($){return $===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(_e,..._t){const Vt=$.call(unwrap(this),_e,..._t);return transactionStoreNamesMap.set(Vt,_e.sort?_e.sort():[_e]),wrap(Vt)}:getCursorAdvanceMethods().includes($)?function(..._e){return $.apply(unwrap(this),_e),wrap(cursorRequestMap.get(this))}:function(..._e){return wrap($.apply(unwrap(this),_e))}}function transformCachableValue($){return typeof $=="function"?wrapFunction($):($ instanceof IDBTransaction&&cacheDonePromiseForTransaction($),instanceOfAny($,getIdbProxyableTypes())?new Proxy($,idbProxyTraps):$)}function wrap($){if($ instanceof IDBRequest)return promisifyRequest($);if(transformCache.has($))return transformCache.get($);const _e=transformCachableValue($);return _e!==$&&(transformCache.set($,_e),reverseTransformCache.set(_e,$)),_e}const unwrap=$=>reverseTransformCache.get($);function openDB($,_e,{blocked:_t,upgrade:Vt,blocking:Wt,terminated:_i}={}){const _s=indexedDB.open($,_e),_c=wrap(_s);return Vt&&_s.addEventListener("upgradeneeded",_l=>{Vt(wrap(_s.result),_l.oldVersion,_l.newVersion,wrap(_s.transaction))}),_t&&_s.addEventListener("blocked",()=>_t()),_c.then(_l=>{_i&&_l.addEventListener("close",()=>_i()),Wt&&_l.addEventListener("versionchange",()=>Wt())}).catch(()=>{}),_c}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod($,_e){if(!($ instanceof IDBDatabase&&!(_e in $)&&typeof _e=="string"))return;if(cachedMethods.get(_e))return cachedMethods.get(_e);const _t=_e.replace(/FromIndex$/,""),Vt=_e!==_t,Wt=writeMethods.includes(_t);if(!(_t in(Vt?IDBIndex:IDBObjectStore).prototype)||!(Wt||readMethods.includes(_t)))return;const _i=async function(_s,..._c){const _l=this.transaction(_s,Wt?"readwrite":"readonly");let _d=_l.store;return Vt&&(_d=_d.index(_c.shift())),(await Promise.all([_d[_t](..._c),Wt&&_l.done]))[0]};return cachedMethods.set(_e,_i),_i}replaceTraps($=>({...$,get:(_e,_t,Vt)=>getMethod(_e,_t)||$.get(_e,_t,Vt),has:(_e,_t)=>!!getMethod(_e,_t)||$.has(_e,_t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(_e){this.container=_e}getPlatformInfoString(){return this.container.getProviders().map(_t=>{if(isVersionServiceProvider(_t)){const Vt=_t.getImmediate();return`${Vt.library}/${Vt.version}`}else return null}).filter(_t=>_t).join(" ")}}function isVersionServiceProvider($){const _e=$.getComponent();return(_e==null?void 0:_e.type)==="VERSION"}const name$o="@firebase/app",version$1$1="0.9.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger("@firebase/app"),name$n="@firebase/app-compat",name$m="@firebase/analytics-compat",name$l="@firebase/analytics",name$k="@firebase/app-check-compat",name$j="@firebase/app-check",name$i="@firebase/auth",name$h="@firebase/auth-compat",name$g="@firebase/database",name$f="@firebase/database-compat",name$e="@firebase/functions",name$d="@firebase/functions-compat",name$c="@firebase/installations",name$b="@firebase/installations-compat",name$a="@firebase/messaging",name$9="@firebase/messaging-compat",name$8="@firebase/performance",name$7="@firebase/performance-compat",name$6="@firebase/remote-config",name$5="@firebase/remote-config-compat",name$4="@firebase/storage",name$3="@firebase/storage-compat",name$2="@firebase/firestore",name$1$1="@firebase/firestore-compat",name$p="firebase",version$2="9.19.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$o]:"fire-core",[name$n]:"fire-core-compat",[name$l]:"fire-analytics",[name$m]:"fire-analytics-compat",[name$j]:"fire-app-check",[name$k]:"fire-app-check-compat",[name$i]:"fire-auth",[name$h]:"fire-auth-compat",[name$g]:"fire-rtdb",[name$f]:"fire-rtdb-compat",[name$e]:"fire-fn",[name$d]:"fire-fn-compat",[name$c]:"fire-iid",[name$b]:"fire-iid-compat",[name$a]:"fire-fcm",[name$9]:"fire-fcm-compat",[name$8]:"fire-perf",[name$7]:"fire-perf-compat",[name$6]:"fire-rc",[name$5]:"fire-rc-compat",[name$4]:"fire-gcs",[name$3]:"fire-gcs-compat",[name$2]:"fire-fst",[name$1$1]:"fire-fst-compat","fire-js":"fire-js",[name$p]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_components=new Map;function _addComponent($,_e){try{$.container.addComponent(_e)}catch(_t){logger.debug(`Component ${_e.name} failed to register with FirebaseApp ${$.name}`,_t)}}function _registerComponent($){const _e=$.name;if(_components.has(_e))return logger.debug(`There were multiple attempts to register component ${_e}.`),!1;_components.set(_e,$);for(const _t of _apps.values())_addComponent(_t,$);return!0}function _getProvider($,_e){const _t=$.container.getProvider("heartbeat").getImmediate({optional:!0});return _t&&_t.triggerHeartbeat(),$.container.getProvider(_e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(_e,_t,Vt){this._isDeleted=!1,this._options=Object.assign({},_e),this._config=Object.assign({},_t),this._name=_t.name,this._automaticDataCollectionEnabled=_t.automaticDataCollectionEnabled,this._container=Vt,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this.checkDestroyed(),this._automaticDataCollectionEnabled=_e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(_e){this._isDeleted=_e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version$2;function initializeApp($,_e={}){let _t=$;typeof _e!="object"&&(_e={name:_e});const Vt=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!1},_e),Wt=Vt.name;if(typeof Wt!="string"||!Wt)throw ERROR_FACTORY.create("bad-app-name",{appName:String(Wt)});if(_t||(_t=getDefaultAppConfig()),!_t)throw ERROR_FACTORY.create("no-options");const _i=_apps.get(Wt);if(_i){if(deepEqual(_t,_i.options)&&deepEqual(Vt,_i.config))return _i;throw ERROR_FACTORY.create("duplicate-app",{appName:Wt})}const _s=new ComponentContainer(Wt);for(const _l of _components.values())_s.addComponent(_l);const _c=new FirebaseAppImpl(_t,Vt,_s);return _apps.set(Wt,_c),_c}function getApp($=DEFAULT_ENTRY_NAME){const _e=_apps.get($);if(!_e&&$===DEFAULT_ENTRY_NAME)return initializeApp();if(!_e)throw ERROR_FACTORY.create("no-app",{appName:$});return _e}function registerVersion($,_e,_t){var Vt;let Wt=(Vt=PLATFORM_LOG_STRING[$])!==null&&Vt!==void 0?Vt:$;_t&&(Wt+=`-${_t}`);const _i=Wt.match(/\s|\//),_s=_e.match(/\s|\//);if(_i||_s){const _c=[`Unable to register library "${Wt}" with version "${_e}":`];_i&&_c.push(`library name "${Wt}" contains illegal characters (whitespace or "/")`),_i&&_s&&_c.push("and"),_s&&_c.push(`version name "${_e}" contains illegal characters (whitespace or "/")`),logger.warn(_c.join(" "));return}_registerComponent(new Component(`${Wt}-version`,()=>({library:Wt,version:_e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:($,_e)=>{switch(_e){case 0:$.createObjectStore(STORE_NAME)}}}).catch($=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:$.message})})),dbPromise}async function readHeartbeatsFromIndexedDB($){try{return(await getDbPromise()).transaction(STORE_NAME).objectStore(STORE_NAME).get(computeKey($))}catch(_e){if(_e instanceof FirebaseError)logger.warn(_e.message);else{const _t=ERROR_FACTORY.create("idb-get",{originalErrorMessage:_e==null?void 0:_e.message});logger.warn(_t.message)}}}async function writeHeartbeatsToIndexedDB($,_e){try{const Vt=(await getDbPromise()).transaction(STORE_NAME,"readwrite");return await Vt.objectStore(STORE_NAME).put(_e,computeKey($)),Vt.done}catch(_t){if(_t instanceof FirebaseError)logger.warn(_t.message);else{const Vt=ERROR_FACTORY.create("idb-set",{originalErrorMessage:_t==null?void 0:_t.message});logger.warn(Vt.message)}}}function computeKey($){return`${$.name}!${$.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,STORED_HEARTBEAT_RETENTION_MAX_MILLIS=30*24*60*60*1e3;class HeartbeatServiceImpl{constructor(_e){this.container=_e,this._heartbeatsCache=null;const _t=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(_t),this._heartbeatsCachePromise=this._storage.read().then(Vt=>(this._heartbeatsCache=Vt,Vt))}async triggerHeartbeat(){const _t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Vt=getUTCDateString();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===Vt||this._heartbeatsCache.heartbeats.some(Wt=>Wt.date===Vt)))return this._heartbeatsCache.heartbeats.push({date:Vt,agent:_t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(Wt=>{const _i=new Date(Wt.date).valueOf();return Date.now()-_i<=STORED_HEARTBEAT_RETENTION_MAX_MILLIS}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const _e=getUTCDateString(),{heartbeatsToSend:_t,unsentEntries:Vt}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),Wt=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:_t}));return this._heartbeatsCache.lastSentHeartbeatDate=_e,Vt.length>0?(this._heartbeatsCache.heartbeats=Vt,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),Wt}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader($,_e=MAX_HEADER_BYTES){const _t=[];let Vt=$.slice();for(const Wt of $){const _i=_t.find(_s=>_s.agent===Wt.agent);if(_i){if(_i.dates.push(Wt.date),countBytes(_t)>_e){_i.dates.pop();break}}else if(_t.push({agent:Wt.agent,dates:[Wt.date]}),countBytes(_t)>_e){_t.pop();break}Vt=Vt.slice(1)}return{heartbeatsToSend:_t,unsentEntries:Vt}}class HeartbeatStorageImpl{constructor(_e){this.app=_e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await readHeartbeatsFromIndexedDB(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(_e){var _t;if(await this._canUseIndexedDBPromise){const Wt=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(_t=_e.lastSentHeartbeatDate)!==null&&_t!==void 0?_t:Wt.lastSentHeartbeatDate,heartbeats:_e.heartbeats})}else return}async add(_e){var _t;if(await this._canUseIndexedDBPromise){const Wt=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(_t=_e.lastSentHeartbeatDate)!==null&&_t!==void 0?_t:Wt.lastSentHeartbeatDate,heartbeats:[...Wt.heartbeats,..._e.heartbeats]})}else return}}function countBytes($){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:$})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents($){_registerComponent(new Component("platform-logger",_e=>new PlatformLoggerServiceImpl(_e),"PRIVATE")),_registerComponent(new Component("heartbeat",_e=>new HeartbeatServiceImpl(_e),"PRIVATE")),registerVersion(name$o,version$1$1,$),registerVersion(name$o,version$1$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");function __rest$1($,_e){var _t={};for(var Vt in $)Object.prototype.hasOwnProperty.call($,Vt)&&_e.indexOf(Vt)<0&&(_t[Vt]=$[Vt]);if($!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Wt=0,Vt=Object.getOwnPropertySymbols($);Wt<Vt.length;Wt++)_e.indexOf(Vt[Wt])<0&&Object.prototype.propertyIsEnumerable.call($,Vt[Wt])&&(_t[Vt[Wt]]=$[Vt[Wt]]);return _t}function _prodErrorMap(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger("@firebase/auth");function _logError($,..._e){logClient.logLevel<=LogLevel.ERROR&&logClient.error(`Auth (${SDK_VERSION}): ${$}`,..._e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail($,..._e){throw createErrorInternal($,..._e)}function _createError($,..._e){return createErrorInternal($,..._e)}function _errorWithCustomMessage($,_e,_t){const Vt=Object.assign(Object.assign({},prodErrorMap()),{[_e]:_t});return new ErrorFactory("auth","Firebase",Vt).create(_e,{appName:$.name})}function _assertInstanceOf($,_e,_t){const Vt=_t;if(!(_e instanceof Vt))throw Vt.name!==_e.constructor.name&&_fail($,"argument-error"),_errorWithCustomMessage($,"argument-error",`Type of ${_e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function createErrorInternal($,..._e){if(typeof $!="string"){const _t=_e[0],Vt=[..._e.slice(1)];return Vt[0]&&(Vt[0].appName=$.name),$._errorFactory.create(_t,...Vt)}return _DEFAULT_AUTH_ERROR_FACTORY.create($,..._e)}function _assert($,_e,..._t){if(!$)throw createErrorInternal(_e,..._t)}function debugFail($){const _e="INTERNAL ASSERTION FAILED: "+$;throw _logError(_e),new Error(_e)}function debugAssert($,_e){$||debugFail(_e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance($){debugAssert($ instanceof Function,"Expected a class definition");let _e=instanceCache.get($);return _e?(debugAssert(_e instanceof $,"Instance stored in cache mismatched with class"),_e):(_e=new $,instanceCache.set($,_e),_e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth($,_e){const _t=_getProvider($,"auth");if(_t.isInitialized()){const Wt=_t.getImmediate(),_i=_t.getOptions();if(deepEqual(_i,_e??{}))return Wt;_fail(Wt,"already-initialized")}return _t.initialize({options:_e})}function _initializeAuthInstance($,_e){const _t=(_e==null?void 0:_e.persistence)||[],Vt=(Array.isArray(_t)?_t:[_t]).map(_getInstance);_e!=null&&_e.errorMap&&$._updateErrorMap(_e.errorMap),$._initializeWithPersistence(Vt,_e==null?void 0:_e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){var $;return typeof self<"u"&&(($=self.location)===null||$===void 0?void 0:$.href)||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){var $;return typeof self<"u"&&(($=self.location)===null||$===void 0?void 0:$.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const $=navigator;return $.languages&&$.languages[0]||$.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(_e,_t){this.shortDelay=_e,this.longDelay=_t,debugAssert(_t>_e,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl($,_e){debugAssert($.emulator,"Emulator should always be set here");const{url:_t}=$.emulator;return _e?`${_t}${_e.startsWith("/")?_e.slice(1):_e}`:_t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(_e,_t,Vt){this.fetchImpl=_e,_t&&(this.headersImpl=_t),Vt&&(this.responseImpl=Vt)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary($,_e){return $.tenantId&&!_e.tenantId?Object.assign(Object.assign({},_e),{tenantId:$.tenantId}):_e}async function _performApiRequest($,_e,_t,Vt,Wt={}){return _performFetchWithErrorHandling($,Wt,async()=>{let _i={},_s={};Vt&&(_e==="GET"?_s=Vt:_i={body:JSON.stringify(Vt)});const _c=querystring(Object.assign({key:$.config.apiKey},_s)).slice(1),_l=await $._getAdditionalHeaders();return _l["Content-Type"]="application/json",$.languageCode&&(_l["X-Firebase-Locale"]=$.languageCode),FetchProvider.fetch()(_getFinalTarget($,$.config.apiHost,_t,_c),Object.assign({method:_e,headers:_l,referrerPolicy:"no-referrer"},_i))})}async function _performFetchWithErrorHandling($,_e,_t){$._canInitEmulator=!1;const Vt=Object.assign(Object.assign({},SERVER_ERROR_MAP),_e);try{const Wt=new NetworkTimeout($),_i=await Promise.race([_t(),Wt.promise]);Wt.clearNetworkTimeout();const _s=await _i.json();if("needConfirmation"in _s)throw _makeTaggedError($,"account-exists-with-different-credential",_s);if(_i.ok&&!("errorMessage"in _s))return _s;{const _c=_i.ok?_s.errorMessage:_s.error.message,[_l,_d]=_c.split(" : ");if(_l==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError($,"credential-already-in-use",_s);if(_l==="EMAIL_EXISTS")throw _makeTaggedError($,"email-already-in-use",_s);if(_l==="USER_DISABLED")throw _makeTaggedError($,"user-disabled",_s);const _m=Vt[_l]||_l.toLowerCase().replace(/[_\s]+/g,"-");if(_d)throw _errorWithCustomMessage($,_m,_d);_fail($,_m)}}catch(Wt){if(Wt instanceof FirebaseError)throw Wt;_fail($,"network-request-failed",{message:String(Wt)})}}async function _performSignInRequest($,_e,_t,Vt,Wt={}){const _i=await _performApiRequest($,_e,_t,Vt,Wt);return"mfaPendingCredential"in _i&&_fail($,"multi-factor-auth-required",{_serverResponse:_i}),_i}function _getFinalTarget($,_e,_t,Vt){const Wt=`${_e}${_t}?${Vt}`;return $.config.emulator?_emulatorUrl($.config,Wt):`${$.config.apiScheme}://${Wt}`}class NetworkTimeout{constructor(_e){this.auth=_e,this.timer=null,this.promise=new Promise((_t,Vt)=>{this.timer=setTimeout(()=>Vt(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _makeTaggedError($,_e,_t){const Vt={appName:$.name};_t.email&&(Vt.email=_t.email),_t.phoneNumber&&(Vt.phoneNumber=_t.phoneNumber);const Wt=_createError($,_e,Vt);return Wt.customData._tokenResponse=_t,Wt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount($,_e){return _performApiRequest($,"POST","/v1/accounts:delete",_e)}async function getAccountInfo($,_e){return _performApiRequest($,"POST","/v1/accounts:lookup",_e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString($){if($)try{const _e=new Date(Number($));if(!isNaN(_e.getTime()))return _e.toUTCString()}catch{}}async function getIdTokenResult($,_e=!1){const _t=getModularInstance($),Vt=await _t.getIdToken(_e),Wt=_parseToken(Vt);_assert(Wt&&Wt.exp&&Wt.auth_time&&Wt.iat,_t.auth,"internal-error");const _i=typeof Wt.firebase=="object"?Wt.firebase:void 0,_s=_i==null?void 0:_i.sign_in_provider;return{claims:Wt,token:Vt,authTime:utcTimestampToDateString(secondsStringToMilliseconds(Wt.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(Wt.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(Wt.exp)),signInProvider:_s||null,signInSecondFactor:(_i==null?void 0:_i.sign_in_second_factor)||null}}function secondsStringToMilliseconds($){return Number($)*1e3}function _parseToken($){const[_e,_t,Vt]=$.split(".");if(_e===void 0||_t===void 0||Vt===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const Wt=base64Decode(_t);return Wt?JSON.parse(Wt):(_logError("Failed to decode base64 JWT payload"),null)}catch(Wt){return _logError("Caught error parsing JWT payload as JSON",Wt==null?void 0:Wt.toString()),null}}function _tokenExpiresIn($){const _e=_parseToken($);return _assert(_e,"internal-error"),_assert(typeof _e.exp<"u","internal-error"),_assert(typeof _e.iat<"u","internal-error"),Number(_e.exp)-Number(_e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated($,_e,_t=!1){if(_t)return _e;try{return await _e}catch(Vt){throw Vt instanceof FirebaseError&&isUserInvalidated(Vt)&&$.auth.currentUser===$&&await $.auth.signOut(),Vt}}function isUserInvalidated({code:$}){return $==="auth/user-disabled"||$==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(_e){this.user=_e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(_e){var _t;if(_e){const Vt=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),Vt}else{this.errorBackoff=3e4;const Wt=((_t=this.user.stsTokenManager.expirationTime)!==null&&_t!==void 0?_t:0)-Date.now()-3e5;return Math.max(0,Wt)}}schedule(_e=!1){if(!this.isRunning)return;const _t=this.getInterval(_e);this.timerId=setTimeout(async()=>{await this.iteration()},_t)}async iteration(){try{await this.user.getIdToken(!0)}catch(_e){(_e==null?void 0:_e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(_e,_t){this.createdAt=_e,this.lastLoginAt=_t,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(_e){this.createdAt=_e.createdAt,this.lastLoginAt=_e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving($){var _e;const _t=$.auth,Vt=await $.getIdToken(),Wt=await _logoutIfInvalidated($,getAccountInfo(_t,{idToken:Vt}));_assert(Wt==null?void 0:Wt.users.length,_t,"internal-error");const _i=Wt.users[0];$._notifyReloadListener(_i);const _s=!((_e=_i.providerUserInfo)===null||_e===void 0)&&_e.length?extractProviderData(_i.providerUserInfo):[],_c=mergeProviderData($.providerData,_s),_l=$.isAnonymous,_d=!($.email&&_i.passwordHash)&&!(_c!=null&&_c.length),_m=_l?_d:!1,e_={uid:_i.localId,displayName:_i.displayName||null,photoURL:_i.photoUrl||null,email:_i.email||null,emailVerified:_i.emailVerified||!1,phoneNumber:_i.phoneNumber||null,tenantId:_i.tenantId||null,providerData:_c,metadata:new UserMetadata(_i.createdAt,_i.lastLoginAt),isAnonymous:_m};Object.assign($,e_)}async function reload($){const _e=getModularInstance($);await _reloadWithoutSaving(_e),await _e.auth._persistUserIfCurrent(_e),_e.auth._notifyListenersIfCurrent(_e)}function mergeProviderData($,_e){return[...$.filter(Vt=>!_e.some(Wt=>Wt.providerId===Vt.providerId)),..._e]}function extractProviderData($){return $.map(_e=>{var{providerId:_t}=_e,Vt=__rest$1(_e,["providerId"]);return{providerId:_t,uid:Vt.rawId||"",displayName:Vt.displayName||null,email:Vt.email||null,phoneNumber:Vt.phoneNumber||null,photoURL:Vt.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken($,_e){const _t=await _performFetchWithErrorHandling($,{},async()=>{const Vt=querystring({grant_type:"refresh_token",refresh_token:_e}).slice(1),{tokenApiHost:Wt,apiKey:_i}=$.config,_s=_getFinalTarget($,Wt,"/v1/token",`key=${_i}`),_c=await $._getAdditionalHeaders();return _c["Content-Type"]="application/x-www-form-urlencoded",FetchProvider.fetch()(_s,{method:"POST",headers:_c,body:Vt})});return{accessToken:_t.access_token,expiresIn:_t.expires_in,refreshToken:_t.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(_e){_assert(_e.idToken,"internal-error"),_assert(typeof _e.idToken<"u","internal-error"),_assert(typeof _e.refreshToken<"u","internal-error");const _t="expiresIn"in _e&&typeof _e.expiresIn<"u"?Number(_e.expiresIn):_tokenExpiresIn(_e.idToken);this.updateTokensAndExpiration(_e.idToken,_e.refreshToken,_t)}async getToken(_e,_t=!1){return _assert(!this.accessToken||this.refreshToken,_e,"user-token-expired"),!_t&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(_e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(_e,_t){const{accessToken:Vt,refreshToken:Wt,expiresIn:_i}=await requestStsToken(_e,_t);this.updateTokensAndExpiration(Vt,Wt,Number(_i))}updateTokensAndExpiration(_e,_t,Vt){this.refreshToken=_t||null,this.accessToken=_e||null,this.expirationTime=Date.now()+Vt*1e3}static fromJSON(_e,_t){const{refreshToken:Vt,accessToken:Wt,expirationTime:_i}=_t,_s=new StsTokenManager;return Vt&&(_assert(typeof Vt=="string","internal-error",{appName:_e}),_s.refreshToken=Vt),Wt&&(_assert(typeof Wt=="string","internal-error",{appName:_e}),_s.accessToken=Wt),_i&&(_assert(typeof _i=="number","internal-error",{appName:_e}),_s.expirationTime=_i),_s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(_e){this.accessToken=_e.accessToken,this.refreshToken=_e.refreshToken,this.expirationTime=_e.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined($,_e){_assert(typeof $=="string"||typeof $>"u","internal-error",{appName:_e})}class UserImpl{constructor(_e){var{uid:_t,auth:Vt,stsTokenManager:Wt}=_e,_i=__rest$1(_e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_t,this.auth=Vt,this.stsTokenManager=Wt,this.accessToken=Wt.accessToken,this.displayName=_i.displayName||null,this.email=_i.email||null,this.emailVerified=_i.emailVerified||!1,this.phoneNumber=_i.phoneNumber||null,this.photoURL=_i.photoURL||null,this.isAnonymous=_i.isAnonymous||!1,this.tenantId=_i.tenantId||null,this.providerData=_i.providerData?[..._i.providerData]:[],this.metadata=new UserMetadata(_i.createdAt||void 0,_i.lastLoginAt||void 0)}async getIdToken(_e){const _t=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,_e));return _assert(_t,this.auth,"internal-error"),this.accessToken!==_t&&(this.accessToken=_t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),_t}getIdTokenResult(_e){return getIdTokenResult(this,_e)}reload(){return reload(this)}_assign(_e){this!==_e&&(_assert(this.uid===_e.uid,this.auth,"internal-error"),this.displayName=_e.displayName,this.photoURL=_e.photoURL,this.email=_e.email,this.emailVerified=_e.emailVerified,this.phoneNumber=_e.phoneNumber,this.isAnonymous=_e.isAnonymous,this.tenantId=_e.tenantId,this.providerData=_e.providerData.map(_t=>Object.assign({},_t)),this.metadata._copy(_e.metadata),this.stsTokenManager._assign(_e.stsTokenManager))}_clone(_e){const _t=new UserImpl(Object.assign(Object.assign({},this),{auth:_e,stsTokenManager:this.stsTokenManager._clone()}));return _t.metadata._copy(this.metadata),_t}_onReload(_e){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=_e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(_e){this.reloadListener?this.reloadListener(_e):this.reloadUserInfo=_e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(_e,_t=!1){let Vt=!1;_e.idToken&&_e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(_e),Vt=!0),_t&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),Vt&&this.auth._notifyListenersIfCurrent(this)}async delete(){const _e=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:_e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(_e=>Object.assign({},_e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(_e,_t){var Vt,Wt,_i,_s,_c,_l,_d,_m;const e_=(Vt=_t.displayName)!==null&&Vt!==void 0?Vt:void 0,t_=(Wt=_t.email)!==null&&Wt!==void 0?Wt:void 0,i_=(_i=_t.phoneNumber)!==null&&_i!==void 0?_i:void 0,c_=(_s=_t.photoURL)!==null&&_s!==void 0?_s:void 0,h_=(_c=_t.tenantId)!==null&&_c!==void 0?_c:void 0,y_=(_l=_t._redirectEventId)!==null&&_l!==void 0?_l:void 0,l_=(_d=_t.createdAt)!==null&&_d!==void 0?_d:void 0,d_=(_m=_t.lastLoginAt)!==null&&_m!==void 0?_m:void 0,{uid:f_,emailVerified:S_,isAnonymous:T_,providerData:R_,stsTokenManager:C_}=_t;_assert(f_&&C_,_e,"internal-error");const j_=StsTokenManager.fromJSON(this.name,C_);_assert(typeof f_=="string",_e,"internal-error"),assertStringOrUndefined(e_,_e.name),assertStringOrUndefined(t_,_e.name),_assert(typeof S_=="boolean",_e,"internal-error"),_assert(typeof T_=="boolean",_e,"internal-error"),assertStringOrUndefined(i_,_e.name),assertStringOrUndefined(c_,_e.name),assertStringOrUndefined(h_,_e.name),assertStringOrUndefined(y_,_e.name),assertStringOrUndefined(l_,_e.name),assertStringOrUndefined(d_,_e.name);const W_=new UserImpl({uid:f_,auth:_e,email:t_,emailVerified:S_,displayName:e_,isAnonymous:T_,photoURL:c_,phoneNumber:i_,tenantId:h_,stsTokenManager:j_,createdAt:l_,lastLoginAt:d_});return R_&&Array.isArray(R_)&&(W_.providerData=R_.map(A_=>Object.assign({},A_))),y_&&(W_._redirectEventId=y_),W_}static async _fromIdTokenResponse(_e,_t,Vt=!1){const Wt=new StsTokenManager;Wt.updateFromServerResponse(_t);const _i=new UserImpl({uid:_t.localId,auth:_e,stsTokenManager:Wt,isAnonymous:Vt});return await _reloadWithoutSaving(_i),_i}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(_e,_t){this.storage[_e]=_t}async _get(_e){const _t=this.storage[_e];return _t===void 0?null:_t}async _remove(_e){delete this.storage[_e]}_addListener(_e,_t){}_removeListener(_e,_t){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName($,_e,_t){return`firebase:${$}:${_e}:${_t}`}class PersistenceUserManager{constructor(_e,_t,Vt){this.persistence=_e,this.auth=_t,this.userKey=Vt;const{config:Wt,name:_i}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,Wt.apiKey,_i),this.fullPersistenceKey=_persistenceKeyName("persistence",Wt.apiKey,_i),this.boundEventHandler=_t._onStorageEvent.bind(_t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(_e){return this.persistence._set(this.fullUserKey,_e.toJSON())}async getCurrentUser(){const _e=await this.persistence._get(this.fullUserKey);return _e?UserImpl._fromJSON(this.auth,_e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(_e){if(this.persistence===_e)return;const _t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=_e,_t)return this.setCurrentUser(_t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(_e,_t,Vt="authUser"){if(!_t.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),_e,Vt);const Wt=(await Promise.all(_t.map(async _d=>{if(await _d._isAvailable())return _d}))).filter(_d=>_d);let _i=Wt[0]||_getInstance(inMemoryPersistence);const _s=_persistenceKeyName(Vt,_e.config.apiKey,_e.name);let _c=null;for(const _d of _t)try{const _m=await _d._get(_s);if(_m){const e_=UserImpl._fromJSON(_e,_m);_d!==_i&&(_c=e_),_i=_d;break}}catch{}const _l=Wt.filter(_d=>_d._shouldAllowMigration);return!_i._shouldAllowMigration||!_l.length?new PersistenceUserManager(_i,_e,Vt):(_i=_l[0],_c&&await _i._set(_s,_c.toJSON()),await Promise.all(_t.map(async _d=>{if(_d!==_i)try{await _d._remove(_s)}catch{}})),new PersistenceUserManager(_i,_e,Vt))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName($){const _e=$.toLowerCase();if(_e.includes("opera/")||_e.includes("opr/")||_e.includes("opios/"))return"Opera";if(_isIEMobile(_e))return"IEMobile";if(_e.includes("msie")||_e.includes("trident/"))return"IE";if(_e.includes("edge/"))return"Edge";if(_isFirefox(_e))return"Firefox";if(_e.includes("silk/"))return"Silk";if(_isBlackBerry(_e))return"Blackberry";if(_isWebOS(_e))return"Webos";if(_isSafari(_e))return"Safari";if((_e.includes("chrome/")||_isChromeIOS(_e))&&!_e.includes("edge/"))return"Chrome";if(_isAndroid(_e))return"Android";{const _t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,Vt=$.match(_t);if((Vt==null?void 0:Vt.length)===2)return Vt[1]}return"Other"}function _isFirefox($=getUA()){return/firefox\//i.test($)}function _isSafari($=getUA()){const _e=$.toLowerCase();return _e.includes("safari/")&&!_e.includes("chrome/")&&!_e.includes("crios/")&&!_e.includes("android")}function _isChromeIOS($=getUA()){return/crios\//i.test($)}function _isIEMobile($=getUA()){return/iemobile/i.test($)}function _isAndroid($=getUA()){return/android/i.test($)}function _isBlackBerry($=getUA()){return/blackberry/i.test($)}function _isWebOS($=getUA()){return/webos/i.test($)}function _isIOS($=getUA()){return/iphone|ipad|ipod/i.test($)||/macintosh/i.test($)&&/mobile/i.test($)}function _isIOSStandalone($=getUA()){var _e;return _isIOS($)&&!!(!((_e=window.navigator)===null||_e===void 0)&&_e.standalone)}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser($=getUA()){return _isIOS($)||_isAndroid($)||_isWebOS($)||_isBlackBerry($)||/windows phone/i.test($)||_isIEMobile($)}function _isIframe(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion($,_e=[]){let _t;switch($){case"Browser":_t=_getBrowserName(getUA());break;case"Worker":_t=`${_getBrowserName(getUA())}-${$}`;break;default:_t=$}const Vt=_e.length?_e.join(","):"FirebaseCore-web";return`${_t}/JsCore/${SDK_VERSION}/${Vt}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(_e){this.auth=_e,this.queue=[]}pushCallback(_e,_t){const Vt=_i=>new Promise((_s,_c)=>{try{const _l=_e(_i);_s(_l)}catch(_l){_c(_l)}});Vt.onAbort=_t,this.queue.push(Vt);const Wt=this.queue.length-1;return()=>{this.queue[Wt]=()=>Promise.resolve()}}async runMiddleware(_e){if(this.auth.currentUser===_e)return;const _t=[];try{for(const Vt of this.queue)await Vt(_e),Vt.onAbort&&_t.push(Vt.onAbort)}catch(Vt){_t.reverse();for(const Wt of _t)try{Wt()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:Vt==null?void 0:Vt.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(_e,_t,Vt){this.app=_e,this.heartbeatServiceProvider=_t,this.config=Vt,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=_e.name,this.clientVersion=Vt.sdkClientVersion}_initializeWithPersistence(_e,_t){return _t&&(this._popupRedirectResolver=_getInstance(_t)),this._initializationPromise=this.queue(async()=>{var Vt,Wt;if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,_e),!this._deleted)){if(!((Vt=this._popupRedirectResolver)===null||Vt===void 0)&&Vt._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(_t),this.lastNotifiedUid=((Wt=this.currentUser)===null||Wt===void 0?void 0:Wt.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const _e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!_e)){if(this.currentUser&&_e&&this.currentUser.uid===_e.uid){this._currentUser._assign(_e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(_e,!0)}}async initializeCurrentUser(_e){var _t;const Vt=await this.assertedPersistence.getCurrentUser();let Wt=Vt,_i=!1;if(_e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const _s=(_t=this.redirectUser)===null||_t===void 0?void 0:_t._redirectEventId,_c=Wt==null?void 0:Wt._redirectEventId,_l=await this.tryRedirectSignIn(_e);(!_s||_s===_c)&&(_l!=null&&_l.user)&&(Wt=_l.user,_i=!0)}if(!Wt)return this.directlySetCurrentUser(null);if(!Wt._redirectEventId){if(_i)try{await this.beforeStateQueue.runMiddleware(Wt)}catch(_s){Wt=Vt,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(_s))}return Wt?this.reloadAndSetCurrentUserOrClear(Wt):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===Wt._redirectEventId?this.directlySetCurrentUser(Wt):this.reloadAndSetCurrentUserOrClear(Wt)}async tryRedirectSignIn(_e){let _t=null;try{_t=await this._popupRedirectResolver._completeRedirectFn(this,_e,!0)}catch{await this._setRedirectUser(null)}return _t}async reloadAndSetCurrentUserOrClear(_e){try{await _reloadWithoutSaving(_e)}catch(_t){if((_t==null?void 0:_t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(_e)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(_e){const _t=_e?getModularInstance(_e):null;return _t&&_assert(_t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(_t&&_t._clone(this))}async _updateCurrentUser(_e,_t=!1){if(!this._deleted)return _e&&_assert(this.tenantId===_e.tenantId,this,"tenant-id-mismatch"),_t||await this.beforeStateQueue.runMiddleware(_e),this.queue(async()=>{await this.directlySetCurrentUser(_e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(_e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(_e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(_e){this._errorFactory=new ErrorFactory("auth","Firebase",_e())}onAuthStateChanged(_e,_t,Vt){return this.registerStateListener(this.authStateSubscription,_e,_t,Vt)}beforeAuthStateChanged(_e,_t){return this.beforeStateQueue.pushCallback(_e,_t)}onIdTokenChanged(_e,_t,Vt){return this.registerStateListener(this.idTokenSubscription,_e,_t,Vt)}toJSON(){var _e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(_e=this._currentUser)===null||_e===void 0?void 0:_e.toJSON()}}async _setRedirectUser(_e,_t){const Vt=await this.getOrInitRedirectPersistenceManager(_t);return _e===null?Vt.removeCurrentUser():Vt.setCurrentUser(_e)}async getOrInitRedirectPersistenceManager(_e){if(!this.redirectPersistenceManager){const _t=_e&&_getInstance(_e)||this._popupRedirectResolver;_assert(_t,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(_t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(_e){var _t,Vt;return this._isInitialized&&await this.queue(async()=>{}),((_t=this._currentUser)===null||_t===void 0?void 0:_t._redirectEventId)===_e?this._currentUser:((Vt=this.redirectUser)===null||Vt===void 0?void 0:Vt._redirectEventId)===_e?this.redirectUser:null}async _persistUserIfCurrent(_e){if(_e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(_e))}_notifyListenersIfCurrent(_e){_e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var _e,_t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const Vt=(_t=(_e=this.currentUser)===null||_e===void 0?void 0:_e.uid)!==null&&_t!==void 0?_t:null;this.lastNotifiedUid!==Vt&&(this.lastNotifiedUid=Vt,this.authStateSubscription.next(this.currentUser))}registerStateListener(_e,_t,Vt,Wt){if(this._deleted)return()=>{};const _i=typeof _t=="function"?_t:_t.next.bind(_t),_s=this._isInitialized?Promise.resolve():this._initializationPromise;return _assert(_s,this,"internal-error"),_s.then(()=>_i(this.currentUser)),typeof _t=="function"?_e.addObserver(_t,Vt,Wt):_e.addObserver(_t)}async directlySetCurrentUser(_e){this.currentUser&&this.currentUser!==_e&&this._currentUser._stopProactiveRefresh(),_e&&this.isProactiveRefreshEnabled&&_e._startProactiveRefresh(),this.currentUser=_e,_e?await this.assertedPersistence.setCurrentUser(_e):await this.assertedPersistence.removeCurrentUser()}queue(_e){return this.operations=this.operations.then(_e,_e),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(_e){!_e||this.frameworks.includes(_e)||(this.frameworks.push(_e),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var _e;const _t={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(_t["X-Firebase-gmpid"]=this.app.options.appId);const Vt=await((_e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||_e===void 0?void 0:_e.getHeartbeatsHeader());return Vt&&(_t["X-Firebase-Client"]=Vt),_t}}function _castAuth($){return getModularInstance($)}class Subscription{constructor(_e){this.auth=_e,this.observer=null,this.addObserver=createSubscribe(_t=>this.observer=_t)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function connectAuthEmulator($,_e,_t){const Vt=_castAuth($);_assert(Vt._canInitEmulator,Vt,"emulator-config-failed"),_assert(/^https?:\/\//.test(_e),Vt,"invalid-emulator-scheme");const Wt=!!(_t!=null&&_t.disableWarnings),_i=extractProtocol(_e),{host:_s,port:_c}=extractHostAndPort(_e),_l=_c===null?"":`:${_c}`;Vt.config.emulator={url:`${_i}//${_s}${_l}/`},Vt.settings.appVerificationDisabledForTesting=!0,Vt.emulatorConfig=Object.freeze({host:_s,port:_c,protocol:_i.replace(":",""),options:Object.freeze({disableWarnings:Wt})}),Wt||emitEmulatorWarning()}function extractProtocol($){const _e=$.indexOf(":");return _e<0?"":$.substr(0,_e+1)}function extractHostAndPort($){const _e=extractProtocol($),_t=/(\/\/)?([^?#/]+)/.exec($.substr(_e.length));if(!_t)return{host:"",port:null};const Vt=_t[2].split("@").pop()||"",Wt=/^(\[[^\]]+\])(:|$)/.exec(Vt);if(Wt){const _i=Wt[1];return{host:_i,port:parsePort(Vt.substr(_i.length+1))}}else{const[_i,_s]=Vt.split(":");return{host:_i,port:parsePort(_s)}}}function parsePort($){if(!$)return null;const _e=Number($);return isNaN(_e)?null:_e}function emitEmulatorWarning(){function $(){const _e=document.createElement("p"),_t=_e.style;_e.innerText="Running in emulator mode. Do not use with production credentials.",_t.position="fixed",_t.width="100%",_t.backgroundColor="#ffffff",_t.border=".1em solid #000000",_t.color="#b50000",_t.bottom="0px",_t.left="0px",_t.margin="0px",_t.zIndex="10000",_t.textAlign="center",_e.classList.add("firebase-emulator-warning"),document.body.appendChild(_e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",$):$())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(_e,_t){this.providerId=_e,this.signInMethod=_t}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(_e){return debugFail("not implemented")}_linkToIdToken(_e,_t){return debugFail("not implemented")}_getReauthenticationResolver(_e){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp($,_e){return _performSignInRequest($,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary($,_e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(_e){const _t=new OAuthCredential(_e.providerId,_e.signInMethod);return _e.idToken||_e.accessToken?(_e.idToken&&(_t.idToken=_e.idToken),_e.accessToken&&(_t.accessToken=_e.accessToken),_e.nonce&&!_e.pendingToken&&(_t.nonce=_e.nonce),_e.pendingToken&&(_t.pendingToken=_e.pendingToken)):_e.oauthToken&&_e.oauthTokenSecret?(_t.accessToken=_e.oauthToken,_t.secret=_e.oauthTokenSecret):_fail("argument-error"),_t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(_e){const _t=typeof _e=="string"?JSON.parse(_e):_e,{providerId:Vt,signInMethod:Wt}=_t,_i=__rest$1(_t,["providerId","signInMethod"]);if(!Vt||!Wt)return null;const _s=new OAuthCredential(Vt,Wt);return _s.idToken=_i.idToken||void 0,_s.accessToken=_i.accessToken||void 0,_s.secret=_i.secret,_s.nonce=_i.nonce,_s.pendingToken=_i.pendingToken||null,_s}_getIdTokenResponse(_e){const _t=this.buildRequest();return signInWithIdp(_e,_t)}_linkToIdToken(_e,_t){const Vt=this.buildRequest();return Vt.idToken=_t,signInWithIdp(_e,Vt)}_getReauthenticationResolver(_e){const _t=this.buildRequest();return _t.autoCreate=!1,signInWithIdp(_e,_t)}buildRequest(){const _e={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)_e.pendingToken=this.pendingToken;else{const _t={};this.idToken&&(_t.id_token=this.idToken),this.accessToken&&(_t.access_token=this.accessToken),this.secret&&(_t.oauth_token_secret=this.secret),_t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_t.nonce=this.nonce),_e.postBody=querystring(_t)}return _e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sendPhoneVerificationCode($,_e){return _performApiRequest($,"POST","/v1/accounts:sendVerificationCode",_addTidIfNecessary($,_e))}async function signInWithPhoneNumber$1($,_e){return _performSignInRequest($,"POST","/v1/accounts:signInWithPhoneNumber",_addTidIfNecessary($,_e))}async function linkWithPhoneNumber$1($,_e){const _t=await _performSignInRequest($,"POST","/v1/accounts:signInWithPhoneNumber",_addTidIfNecessary($,_e));if(_t.temporaryProof)throw _makeTaggedError($,"account-exists-with-different-credential",_t);return _t}const VERIFY_PHONE_NUMBER_FOR_EXISTING_ERROR_MAP_={USER_NOT_FOUND:"user-not-found"};async function verifyPhoneNumberForExisting($,_e){const _t=Object.assign(Object.assign({},_e),{operation:"REAUTH"});return _performSignInRequest($,"POST","/v1/accounts:signInWithPhoneNumber",_addTidIfNecessary($,_t),VERIFY_PHONE_NUMBER_FOR_EXISTING_ERROR_MAP_)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PhoneAuthCredential extends AuthCredential{constructor(_e){super("phone","phone"),this.params=_e}static _fromVerification(_e,_t){return new PhoneAuthCredential({verificationId:_e,verificationCode:_t})}static _fromTokenResponse(_e,_t){return new PhoneAuthCredential({phoneNumber:_e,temporaryProof:_t})}_getIdTokenResponse(_e){return signInWithPhoneNumber$1(_e,this._makeVerificationRequest())}_linkToIdToken(_e,_t){return linkWithPhoneNumber$1(_e,Object.assign({idToken:_t},this._makeVerificationRequest()))}_getReauthenticationResolver(_e){return verifyPhoneNumberForExisting(_e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:_e,phoneNumber:_t,verificationId:Vt,verificationCode:Wt}=this.params;return _e&&_t?{temporaryProof:_e,phoneNumber:_t}:{sessionInfo:Vt,code:Wt}}toJSON(){const _e={providerId:this.providerId};return this.params.phoneNumber&&(_e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(_e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(_e.verificationCode=this.params.verificationCode),this.params.verificationId&&(_e.verificationId=this.params.verificationId),_e}static fromJSON(_e){typeof _e=="string"&&(_e=JSON.parse(_e));const{verificationId:_t,verificationCode:Vt,phoneNumber:Wt,temporaryProof:_i}=_e;return!Vt&&!_t&&!Wt&&!_i?null:new PhoneAuthCredential({verificationId:_t,verificationCode:Vt,phoneNumber:Wt,temporaryProof:_i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(_e){this.providerId=_e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(_e){this.defaultLanguageCode=_e}setCustomParameters(_e){return this.customParameters=_e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(_e){return this.scopes.includes(_e)||this.scopes.push(_e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(_e){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:_e})}static credentialFromResult(_e){return FacebookAuthProvider.credentialFromTaggedObject(_e)}static credentialFromError(_e){return FacebookAuthProvider.credentialFromTaggedObject(_e.customData||{})}static credentialFromTaggedObject({_tokenResponse:_e}){if(!_e||!("oauthAccessToken"in _e)||!_e.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(_e.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(_e,_t){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:_e,accessToken:_t})}static credentialFromResult(_e){return GoogleAuthProvider.credentialFromTaggedObject(_e)}static credentialFromError(_e){return GoogleAuthProvider.credentialFromTaggedObject(_e.customData||{})}static credentialFromTaggedObject({_tokenResponse:_e}){if(!_e)return null;const{oauthIdToken:_t,oauthAccessToken:Vt}=_e;if(!_t&&!Vt)return null;try{return GoogleAuthProvider.credential(_t,Vt)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(_e){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:_e})}static credentialFromResult(_e){return GithubAuthProvider.credentialFromTaggedObject(_e)}static credentialFromError(_e){return GithubAuthProvider.credentialFromTaggedObject(_e.customData||{})}static credentialFromTaggedObject({_tokenResponse:_e}){if(!_e||!("oauthAccessToken"in _e)||!_e.oauthAccessToken)return null;try{return GithubAuthProvider.credential(_e.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(_e,_t){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:_e,oauthTokenSecret:_t})}static credentialFromResult(_e){return TwitterAuthProvider.credentialFromTaggedObject(_e)}static credentialFromError(_e){return TwitterAuthProvider.credentialFromTaggedObject(_e.customData||{})}static credentialFromTaggedObject({_tokenResponse:_e}){if(!_e)return null;const{oauthAccessToken:_t,oauthTokenSecret:Vt}=_e;if(!_t||!Vt)return null;try{return TwitterAuthProvider.credential(_t,Vt)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(_e){this.user=_e.user,this.providerId=_e.providerId,this._tokenResponse=_e._tokenResponse,this.operationType=_e.operationType}static async _fromIdTokenResponse(_e,_t,Vt,Wt=!1){const _i=await UserImpl._fromIdTokenResponse(_e,Vt,Wt),_s=providerIdForResponse(Vt);return new UserCredentialImpl({user:_i,providerId:_s,_tokenResponse:Vt,operationType:_t})}static async _forOperation(_e,_t,Vt){await _e._updateTokensIfNecessary(Vt,!0);const Wt=providerIdForResponse(Vt);return new UserCredentialImpl({user:_e,providerId:Wt,_tokenResponse:Vt,operationType:_t})}}function providerIdForResponse($){return $.providerId?$.providerId:"phoneNumber"in $?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(_e,_t,Vt,Wt){var _i;super(_t.code,_t.message),this.operationType=Vt,this.user=Wt,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:_e.name,tenantId:(_i=_e.tenantId)!==null&&_i!==void 0?_i:void 0,_serverResponse:_t.customData._serverResponse,operationType:Vt}}static _fromErrorAndOperation(_e,_t,Vt,Wt){return new MultiFactorError(_e,_t,Vt,Wt)}}function _processCredentialSavingMfaContextIfNecessary($,_e,_t,Vt){return(_e==="reauthenticate"?_t._getReauthenticationResolver($):_t._getIdTokenResponse($)).catch(_i=>{throw _i.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation($,_i,_e,Vt):_i})}async function _link$1($,_e,_t=!1){const Vt=await _logoutIfInvalidated($,_e._linkToIdToken($.auth,await $.getIdToken()),_t);return UserCredentialImpl._forOperation($,"link",Vt)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate($,_e,_t=!1){const{auth:Vt}=$,Wt="reauthenticate";try{const _i=await _logoutIfInvalidated($,_processCredentialSavingMfaContextIfNecessary(Vt,Wt,_e,$),_t);_assert(_i.idToken,Vt,"internal-error");const _s=_parseToken(_i.idToken);_assert(_s,Vt,"internal-error");const{sub:_c}=_s;return _assert($.uid===_c,Vt,"user-mismatch"),UserCredentialImpl._forOperation($,Wt,_i)}catch(_i){throw(_i==null?void 0:_i.code)==="auth/user-not-found"&&_fail(Vt,"user-mismatch"),_i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential($,_e,_t=!1){const Vt="signIn",Wt=await _processCredentialSavingMfaContextIfNecessary($,Vt,_e),_i=await UserCredentialImpl._fromIdTokenResponse($,Vt,Wt);return _t||await $._updateCurrentUser(_i.user),_i}async function signInWithCredential($,_e){return _signInWithCredential(_castAuth($),_e)}function onIdTokenChanged($,_e,_t,Vt){return getModularInstance($).onIdTokenChanged(_e,_t,Vt)}function beforeAuthStateChanged($,_e,_t){return getModularInstance($).beforeAuthStateChanged(_e,_t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function startEnrollPhoneMfa($,_e){return _performApiRequest($,"POST","/v2/accounts/mfaEnrollment:start",_addTidIfNecessary($,_e))}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(_e,_t){this.storageRetriever=_e,this.type=_t}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(_e,_t){return this.storage.setItem(_e,JSON.stringify(_t)),Promise.resolve()}_get(_e){const _t=this.storage.getItem(_e);return Promise.resolve(_t?JSON.parse(_t):null)}_remove(_e){return this.storage.removeItem(_e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _iframeCannotSyncWebStorage(){const $=getUA();return _isSafari($)||_isIOS($)}const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_e,_t)=>this.onStorageEvent(_e,_t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=_iframeCannotSyncWebStorage()&&_isIframe(),this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(_e){for(const _t of Object.keys(this.listeners)){const Vt=this.storage.getItem(_t),Wt=this.localCache[_t];Vt!==Wt&&_e(_t,Wt,Vt)}}onStorageEvent(_e,_t=!1){if(!_e.key){this.forAllChangedKeys((_s,_c,_l)=>{this.notifyListeners(_s,_l)});return}const Vt=_e.key;if(_t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const _s=this.storage.getItem(Vt);if(_e.newValue!==_s)_e.newValue!==null?this.storage.setItem(Vt,_e.newValue):this.storage.removeItem(Vt);else if(this.localCache[Vt]===_e.newValue&&!_t)return}const Wt=()=>{const _s=this.storage.getItem(Vt);!_t&&this.localCache[Vt]===_s||this.notifyListeners(Vt,_s)},_i=this.storage.getItem(Vt);_isIE10()&&_i!==_e.newValue&&_e.newValue!==_e.oldValue?setTimeout(Wt,IE10_LOCAL_STORAGE_SYNC_DELAY):Wt()}notifyListeners(_e,_t){this.localCache[_e]=_t;const Vt=this.listeners[_e];if(Vt)for(const Wt of Array.from(Vt))Wt(_t&&JSON.parse(_t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_e,_t,Vt)=>{this.onStorageEvent(new StorageEvent("storage",{key:_e,oldValue:_t,newValue:Vt}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_e,_t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_e]||(this.listeners[_e]=new Set,this.localCache[_e]=this.storage.getItem(_e)),this.listeners[_e].add(_t)}_removeListener(_e,_t){this.listeners[_e]&&(this.listeners[_e].delete(_t),this.listeners[_e].size===0&&delete this.listeners[_e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(_e,_t){await super._set(_e,_t),this.localCache[_e]=JSON.stringify(_t)}async _get(_e){const _t=await super._get(_e);return this.localCache[_e]=JSON.stringify(_t),_t}async _remove(_e){await super._remove(_e),delete this.localCache[_e]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_e,_t){}_removeListener(_e,_t){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled($){return Promise.all($.map(async _e=>{try{return{fulfilled:!0,value:await _e}}catch(_t){return{fulfilled:!1,reason:_t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(_e){this.eventTarget=_e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_e){const _t=this.receivers.find(Wt=>Wt.isListeningto(_e));if(_t)return _t;const Vt=new Receiver(_e);return this.receivers.push(Vt),Vt}isListeningto(_e){return this.eventTarget===_e}async handleEvent(_e){const _t=_e,{eventId:Vt,eventType:Wt,data:_i}=_t.data,_s=this.handlersMap[Wt];if(!(_s!=null&&_s.size))return;_t.ports[0].postMessage({status:"ack",eventId:Vt,eventType:Wt});const _c=Array.from(_s).map(async _d=>_d(_t.origin,_i)),_l=await _allSettled(_c);_t.ports[0].postMessage({status:"done",eventId:Vt,eventType:Wt,response:_l})}_subscribe(_e,_t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_e]||(this.handlersMap[_e]=new Set),this.handlersMap[_e].add(_t)}_unsubscribe(_e,_t){this.handlersMap[_e]&&_t&&this.handlersMap[_e].delete(_t),(!_t||this.handlersMap[_e].size===0)&&delete this.handlersMap[_e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId($="",_e=10){let _t="";for(let Vt=0;Vt<_e;Vt++)_t+=Math.floor(Math.random()*10);return $+_t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(_e){this.target=_e,this.handlers=new Set}removeMessageHandler(_e){_e.messageChannel&&(_e.messageChannel.port1.removeEventListener("message",_e.onMessage),_e.messageChannel.port1.close()),this.handlers.delete(_e)}async _send(_e,_t,Vt=50){const Wt=typeof MessageChannel<"u"?new MessageChannel:null;if(!Wt)throw new Error("connection_unavailable");let _i,_s;return new Promise((_c,_l)=>{const _d=_generateEventId("",20);Wt.port1.start();const _m=setTimeout(()=>{_l(new Error("unsupported_event"))},Vt);_s={messageChannel:Wt,onMessage(e_){const t_=e_;if(t_.data.eventId===_d)switch(t_.data.status){case"ack":clearTimeout(_m),_i=setTimeout(()=>{_l(new Error("timeout"))},3e3);break;case"done":clearTimeout(_i),_c(t_.data.response);break;default:clearTimeout(_m),clearTimeout(_i),_l(new Error("invalid_response"));break}}},this.handlers.add(_s),Wt.port1.addEventListener("message",_s.onMessage),this.target.postMessage({eventType:_e,eventId:_d,data:_t},[Wt.port2])}).finally(()=>{_s&&this.removeMessageHandler(_s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window$2(){return window}function _setWindowLocation($){_window$2().location.href=$}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window$2().WorkerGlobalScope<"u"&&typeof _window$2().importScripts=="function"}async function _getActiveServiceWorker(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){var $;return(($=navigator==null?void 0:navigator.serviceWorker)===null||$===void 0?void 0:$.controller)||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(_e){this.request=_e}toPromise(){return new Promise((_e,_t)=>{this.request.addEventListener("success",()=>{_e(this.request.result)}),this.request.addEventListener("error",()=>{_t(this.request.error)})})}}function getObjectStore($,_e){return $.transaction([DB_OBJECTSTORE_NAME],_e?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const $=indexedDB.deleteDatabase(DB_NAME);return new DBPromise($).toPromise()}function _openDatabase(){const $=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((_e,_t)=>{$.addEventListener("error",()=>{_t($.error)}),$.addEventListener("upgradeneeded",()=>{const Vt=$.result;try{Vt.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(Wt){_t(Wt)}}),$.addEventListener("success",async()=>{const Vt=$.result;Vt.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?_e(Vt):(Vt.close(),await _deleteDatabase(),_e(await _openDatabase()))})})}async function _putObject($,_e,_t){const Vt=getObjectStore($,!0).put({[DB_DATA_KEYPATH]:_e,value:_t});return new DBPromise(Vt).toPromise()}async function getObject($,_e){const _t=getObjectStore($,!1).get(_e),Vt=await new DBPromise(_t).toPromise();return Vt===void 0?null:Vt.value}function _deleteObject($,_e){const _t=getObjectStore($,!0).delete(_e);return new DBPromise(_t).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(_e){let _t=0;for(;;)try{const Vt=await this._openDb();return await _e(Vt)}catch(Vt){if(_t++>_TRANSACTION_RETRY_COUNT)throw Vt;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(_e,_t)=>({keyProcessed:(await this._poll()).includes(_t.key)})),this.receiver._subscribe("ping",async(_e,_t)=>["keyChanged"])}async initializeSender(){var _e,_t;if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const Vt=await this.sender._send("ping",{},800);Vt&&!((_e=Vt[0])===null||_e===void 0)&&_e.fulfilled&&!((_t=Vt[0])===null||_t===void 0)&&_t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(_e){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:_e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const _e=await _openDatabase();return await _putObject(_e,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(_e,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(_e){this.pendingWrites++;try{await _e()}finally{this.pendingWrites--}}async _set(_e,_t){return this._withPendingWrite(async()=>(await this._withRetries(Vt=>_putObject(Vt,_e,_t)),this.localCache[_e]=_t,this.notifyServiceWorker(_e)))}async _get(_e){const _t=await this._withRetries(Vt=>getObject(Vt,_e));return this.localCache[_e]=_t,_t}async _remove(_e){return this._withPendingWrite(async()=>(await this._withRetries(_t=>_deleteObject(_t,_e)),delete this.localCache[_e],this.notifyServiceWorker(_e)))}async _poll(){const _e=await this._withRetries(Wt=>{const _i=getObjectStore(Wt,!1).getAll();return new DBPromise(_i).toPromise()});if(!_e)return[];if(this.pendingWrites!==0)return[];const _t=[],Vt=new Set;for(const{fbase_key:Wt,value:_i}of _e)Vt.add(Wt),JSON.stringify(this.localCache[Wt])!==JSON.stringify(_i)&&(this.notifyListeners(Wt,_i),_t.push(Wt));for(const Wt of Object.keys(this.localCache))this.localCache[Wt]&&!Vt.has(Wt)&&(this.notifyListeners(Wt,null),_t.push(Wt));return _t}notifyListeners(_e,_t){this.localCache[_e]=_t;const Vt=this.listeners[_e];if(Vt)for(const Wt of Array.from(Vt))Wt(_t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_e,_t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[_e]||(this.listeners[_e]=new Set,this._get(_e)),this.listeners[_e].add(_t)}_removeListener(_e,_t){this.listeners[_e]&&(this.listeners[_e].delete(_t),this.listeners[_e].size===0&&delete this.listeners[_e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function startSignInPhoneMfa($,_e){return _performApiRequest($,"POST","/v2/accounts/mfaSignIn:start",_addTidIfNecessary($,_e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getRecaptchaParams($){return(await _performApiRequest($,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getScriptParentElement(){var $,_e;return(_e=($=document.getElementsByTagName("head"))===null||$===void 0?void 0:$[0])!==null&&_e!==void 0?_e:document}function _loadJS($){return new Promise((_e,_t)=>{const Vt=document.createElement("script");Vt.setAttribute("src",$),Vt.onload=_e,Vt.onerror=Wt=>{const _i=_createError("internal-error");_i.customData=Wt,_t(_i)},Vt.type="text/javascript",Vt.charset="UTF-8",getScriptParentElement().appendChild(Vt)})}function _generateCallbackName($){return`__${$}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _SOLVE_TIME_MS=500,_EXPIRATION_TIME_MS=6e4,_WIDGET_ID_START=1e12;class MockReCaptcha{constructor(_e){this.auth=_e,this.counter=_WIDGET_ID_START,this._widgets=new Map}render(_e,_t){const Vt=this.counter;return this._widgets.set(Vt,new MockWidget(_e,this.auth.name,_t||{})),this.counter++,Vt}reset(_e){var _t;const Vt=_e||_WIDGET_ID_START;(_t=this._widgets.get(Vt))===null||_t===void 0||_t.delete(),this._widgets.delete(Vt)}getResponse(_e){var _t;const Vt=_e||_WIDGET_ID_START;return((_t=this._widgets.get(Vt))===null||_t===void 0?void 0:_t.getResponse())||""}async execute(_e){var _t;const Vt=_e||_WIDGET_ID_START;return(_t=this._widgets.get(Vt))===null||_t===void 0||_t.execute(),""}}class MockWidget{constructor(_e,_t,Vt){this.params=Vt,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const Wt=typeof _e=="string"?document.getElementById(_e):_e;_assert(Wt,"argument-error",{appName:_t}),this.container=Wt,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=generateRandomAlphaNumericString(50);const{callback:_e,"expired-callback":_t}=this.params;if(_e)try{_e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_t)try{_t()}catch{}this.isVisible&&this.execute()},_EXPIRATION_TIME_MS)},_SOLVE_TIME_MS))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function generateRandomAlphaNumericString($){const _e=[],_t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Vt=0;Vt<$;Vt++)_e.push(_t.charAt(Math.floor(Math.random()*_t.length)));return _e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _JSLOAD_CALLBACK=_generateCallbackName("rcb"),NETWORK_TIMEOUT_DELAY=new Delay(3e4,6e4),RECAPTCHA_BASE="https://www.google.com/recaptcha/api.js?";class ReCaptchaLoaderImpl{constructor(){var _e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((_e=_window$2().grecaptcha)===null||_e===void 0)&&_e.render)}load(_e,_t=""){return _assert(isHostLanguageValid(_t),_e,"argument-error"),this.shouldResolveImmediately(_t)?Promise.resolve(_window$2().grecaptcha):new Promise((Vt,Wt)=>{const _i=_window$2().setTimeout(()=>{Wt(_createError(_e,"network-request-failed"))},NETWORK_TIMEOUT_DELAY.get());_window$2()[_JSLOAD_CALLBACK]=()=>{_window$2().clearTimeout(_i),delete _window$2()[_JSLOAD_CALLBACK];const _c=_window$2().grecaptcha;if(!_c){Wt(_createError(_e,"internal-error"));return}const _l=_c.render;_c.render=(_d,_m)=>{const e_=_l(_d,_m);return this.counter++,e_},this.hostLanguage=_t,Vt(_c)};const _s=`${RECAPTCHA_BASE}?${querystring({onload:_JSLOAD_CALLBACK,render:"explicit",hl:_t})}`;_loadJS(_s).catch(()=>{clearTimeout(_i),Wt(_createError(_e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(_e){var _t;return!!(!((_t=_window$2().grecaptcha)===null||_t===void 0)&&_t.render)&&(_e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function isHostLanguageValid($){return $.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test($)}class MockReCaptchaLoaderImpl{async load(_e){return new MockReCaptcha(_e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RECAPTCHA_VERIFIER_TYPE="recaptcha",DEFAULT_PARAMS={theme:"light",type:"image"};class RecaptchaVerifier{constructor(_e,_t=Object.assign({},DEFAULT_PARAMS),Vt){this.parameters=_t,this.type=RECAPTCHA_VERIFIER_TYPE,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_castAuth(Vt),this.isInvisible=this.parameters.size==="invisible",_assert(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const Wt=typeof _e=="string"?document.getElementById(_e):_e;_assert(Wt,this.auth,"argument-error"),this.container=Wt,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new MockReCaptchaLoaderImpl:new ReCaptchaLoaderImpl,this.validateStartingState()}async verify(){this.assertNotDestroyed();const _e=await this.render(),_t=this.getAssertedRecaptcha(),Vt=_t.getResponse(_e);return Vt||new Promise(Wt=>{const _i=_s=>{_s&&(this.tokenChangeListeners.delete(_i),Wt(_s))};this.tokenChangeListeners.add(_i),this.isInvisible&&_t.execute(_e)})}render(){try{this.assertNotDestroyed()}catch(_e){return Promise.reject(_e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(_e=>{throw this.renderPromise=null,_e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(_e=>{this.container.removeChild(_e)})}validateStartingState(){_assert(!this.parameters.sitekey,this.auth,"argument-error"),_assert(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),_assert(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(_e){return _t=>{if(this.tokenChangeListeners.forEach(Vt=>Vt(_t)),typeof _e=="function")_e(_t);else if(typeof _e=="string"){const Vt=_window$2()[_e];typeof Vt=="function"&&Vt(_t)}}}assertNotDestroyed(){_assert(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let _e=this.container;if(!this.isInvisible){const _t=document.createElement("div");_e.appendChild(_t),_e=_t}this.widgetId=this.getAssertedRecaptcha().render(_e,this.parameters)}return this.widgetId}async init(){_assert(_isHttpOrHttps()&&!_isWorker(),this.auth,"internal-error"),await domReady(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const _e=await getRecaptchaParams(this.auth);_assert(_e,this.auth,"internal-error"),this.parameters.sitekey=_e}getAssertedRecaptcha(){return _assert(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function domReady(){let $=null;return new Promise(_e=>{if(document.readyState==="complete"){_e();return}$=()=>_e(),window.addEventListener("load",$)}).catch(_e=>{throw $&&window.removeEventListener("load",$),_e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ConfirmationResultImpl{constructor(_e,_t){this.verificationId=_e,this.onConfirmation=_t}confirm(_e){const _t=PhoneAuthCredential._fromVerification(this.verificationId,_e);return this.onConfirmation(_t)}}async function signInWithPhoneNumber($,_e,_t){const Vt=_castAuth($),Wt=await _verifyPhoneNumber(Vt,_e,getModularInstance(_t));return new ConfirmationResultImpl(Wt,_i=>signInWithCredential(Vt,_i))}async function _verifyPhoneNumber($,_e,_t){var Vt;const Wt=await _t.verify();try{_assert(typeof Wt=="string",$,"argument-error"),_assert(_t.type===RECAPTCHA_VERIFIER_TYPE,$,"argument-error");let _i;if(typeof _e=="string"?_i={phoneNumber:_e}:_i=_e,"session"in _i){const _s=_i.session;if("phoneNumber"in _i)return _assert(_s.type==="enroll",$,"internal-error"),(await startEnrollPhoneMfa($,{idToken:_s.credential,phoneEnrollmentInfo:{phoneNumber:_i.phoneNumber,recaptchaToken:Wt}})).phoneSessionInfo.sessionInfo;{_assert(_s.type==="signin",$,"internal-error");const _c=((Vt=_i.multiFactorHint)===null||Vt===void 0?void 0:Vt.uid)||_i.multiFactorUid;return _assert(_c,$,"missing-multi-factor-info"),(await startSignInPhoneMfa($,{mfaPendingCredential:_s.credential,mfaEnrollmentId:_c,phoneSignInInfo:{recaptchaToken:Wt}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:_s}=await sendPhoneVerificationCode($,{phoneNumber:_i.phoneNumber,recaptchaToken:Wt});return _s}}finally{_t._reset()}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver($,_e){return _e?_getInstance(_e):(_assert($._popupRedirectResolver,$,"argument-error"),$._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(_e){super("custom","custom"),this.params=_e}_getIdTokenResponse(_e){return signInWithIdp(_e,this._buildIdpRequest())}_linkToIdToken(_e,_t){return signInWithIdp(_e,this._buildIdpRequest(_t))}_getReauthenticationResolver(_e){return signInWithIdp(_e,this._buildIdpRequest())}_buildIdpRequest(_e){const _t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return _e&&(_t.idToken=_e),_t}}function _signIn($){return _signInWithCredential($.auth,new IdpCredential($),$.bypassAuthState)}function _reauth($){const{auth:_e,user:_t}=$;return _assert(_t,_e,"internal-error"),_reauthenticate(_t,new IdpCredential($),$.bypassAuthState)}async function _link($){const{auth:_e,user:_t}=$;return _assert(_t,_e,"internal-error"),_link$1(_t,new IdpCredential($),$.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(_e,_t,Vt,Wt,_i=!1){this.auth=_e,this.resolver=Vt,this.user=Wt,this.bypassAuthState=_i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_t)?_t:[_t]}execute(){return new Promise(async(_e,_t)=>{this.pendingPromise={resolve:_e,reject:_t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Vt){this.reject(Vt)}})}async onAuthEvent(_e){const{urlResponse:_t,sessionId:Vt,postBody:Wt,tenantId:_i,error:_s,type:_c}=_e;if(_s){this.reject(_s);return}const _l={auth:this.auth,requestUri:_t,sessionId:Vt,tenantId:_i||void 0,postBody:Wt||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(_c)(_l))}catch(_d){this.reject(_d)}}onError(_e){this.reject(_e)}getIdpTask(_e){switch(_e){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(_e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(_e),this.unregisterAndCleanUp()}reject(_e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(_e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);async function signInWithPopup($,_e,_t){const Vt=_castAuth($);_assertInstanceOf($,_e,FederatedAuthProvider);const Wt=_withDefaultResolver(Vt,_t);return new PopupOperation(Vt,"signInViaPopup",_e,Wt).executeNotNull()}class PopupOperation extends AbstractPopupRedirectOperation{constructor(_e,_t,Vt,Wt,_i){super(_e,_t,Wt,_i),this.provider=Vt,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const _e=await this.execute();return _assert(_e,this.auth,"internal-error"),_e}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const _e=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],_e),this.authWindow.associatedEvent=_e,this.resolver._originValidation(this.auth).catch(_t=>{this.reject(_t)}),this.resolver._isIframeWebStorageSupported(this.auth,_t=>{_t||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var _e;return((_e=this.authWindow)===null||_e===void 0?void 0:_e.associatedEvent)||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const _e=()=>{var _t,Vt;if(!((Vt=(_t=this.authWindow)===null||_t===void 0?void 0:_t.window)===null||Vt===void 0)&&Vt.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(_e,_POLL_WINDOW_CLOSE_TIMEOUT.get())};_e()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(_e,_t,Vt=!1){super(_e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_t,void 0,Vt),this.eventId=null}async execute(){let _e=redirectOutcomeMap.get(this.auth._key());if(!_e){try{const Vt=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;_e=()=>Promise.resolve(Vt)}catch(_t){_e=()=>Promise.reject(_t)}redirectOutcomeMap.set(this.auth._key(),_e)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),_e()}async onAuthEvent(_e){if(_e.type==="signInViaRedirect")return super.onAuthEvent(_e);if(_e.type==="unknown"){this.resolve(null);return}if(_e.eventId){const _t=await this.auth._redirectUserForId(_e.eventId);if(_t)return this.user=_t,super.onAuthEvent(_e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus($,_e){const _t=pendingRedirectKey(_e),Vt=resolverPersistence($);if(!await Vt._isAvailable())return!1;const Wt=await Vt._get(_t)==="true";return await Vt._remove(_t),Wt}function _overrideRedirectResult($,_e){redirectOutcomeMap.set($._key(),_e)}function resolverPersistence($){return _getInstance($._redirectPersistence)}function pendingRedirectKey($){return _persistenceKeyName(PENDING_REDIRECT_KEY,$.config.apiKey,$.name)}async function _getRedirectResult($,_e,_t=!1){const Vt=_castAuth($),Wt=_withDefaultResolver(Vt,_e),_s=await new RedirectAction(Vt,Wt,_t).execute();return _s&&!_t&&(delete _s.user._redirectEventId,await Vt._persistUserIfCurrent(_s.user),await Vt._setRedirectUser(null,_e)),_s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=10*60*1e3;class AuthEventManager{constructor(_e){this.auth=_e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(_e){this.consumers.add(_e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,_e)&&(this.sendToConsumer(this.queuedRedirectEvent,_e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(_e){this.consumers.delete(_e)}onEvent(_e){if(this.hasEventBeenHandled(_e))return!1;let _t=!1;return this.consumers.forEach(Vt=>{this.isEventForConsumer(_e,Vt)&&(_t=!0,this.sendToConsumer(_e,Vt),this.saveEventToCache(_e))}),this.hasHandledPotentialRedirect||!isRedirectEvent(_e)||(this.hasHandledPotentialRedirect=!0,_t||(this.queuedRedirectEvent=_e,_t=!0)),_t}sendToConsumer(_e,_t){var Vt;if(_e.error&&!isNullRedirectEvent(_e)){const Wt=((Vt=_e.error.code)===null||Vt===void 0?void 0:Vt.split("auth/")[1])||"internal-error";_t.onError(_createError(this.auth,Wt))}else _t.onAuthEvent(_e)}isEventForConsumer(_e,_t){const Vt=_t.eventId===null||!!_e.eventId&&_e.eventId===_t.eventId;return _t.filter.includes(_e.type)&&Vt}hasEventBeenHandled(_e){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(_e))}saveEventToCache(_e){this.cachedEventUids.add(eventUid(_e)),this.lastProcessedEventTime=Date.now()}}function eventUid($){return[$.type,$.eventId,$.sessionId,$.tenantId].filter(_e=>_e).join("-")}function isNullRedirectEvent({type:$,error:_e}){return $==="unknown"&&(_e==null?void 0:_e.code)==="auth/no-auth-event"}function isRedirectEvent($){switch($.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent($);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig($,_e={}){return _performApiRequest($,"GET","/v1/projects",_e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin($){if($.config.emulator)return;const{authorizedDomains:_e}=await _getProjectConfig($);for(const _t of _e)try{if(matchDomain(_t))return}catch{}_fail($,"unauthorized-domain")}function matchDomain($){const _e=_getCurrentUrl(),{protocol:_t,hostname:Vt}=new URL(_e);if($.startsWith("chrome-extension://")){const _s=new URL($);return _s.hostname===""&&Vt===""?_t==="chrome-extension:"&&$.replace("chrome-extension://","")===_e.replace("chrome-extension://",""):_t==="chrome-extension:"&&_s.hostname===Vt}if(!HTTP_REGEX.test(_t))return!1;if(IP_ADDRESS_REGEX.test($))return Vt===$;const Wt=$.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Wt+"|"+Wt+")$","i").test(Vt)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const $=_window$2().___jsl;if($!=null&&$.H){for(const _e of Object.keys($.H))if($.H[_e].r=$.H[_e].r||[],$.H[_e].L=$.H[_e].L||[],$.H[_e].r=[...$.H[_e].L],$.CP)for(let _t=0;_t<$.CP.length;_t++)$.CP[_t]=null}}function loadGapi($){return new Promise((_e,_t)=>{var Vt,Wt,_i;function _s(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{_e(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),_t(_createError($,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(!((Wt=(Vt=_window$2().gapi)===null||Vt===void 0?void 0:Vt.iframes)===null||Wt===void 0)&&Wt.Iframe)_e(gapi.iframes.getContext());else if(!((_i=_window$2().gapi)===null||_i===void 0)&&_i.load)_s();else{const _c=_generateCallbackName("iframefcb");return _window$2()[_c]=()=>{gapi.load?_s():_t(_createError($,"network-request-failed"))},_loadJS(`https://apis.google.com/js/api.js?onload=${_c}`).catch(_l=>_t(_l))}}).catch(_e=>{throw cachedGApiLoader=null,_e})}let cachedGApiLoader=null;function _loadGapi($){return cachedGApiLoader=cachedGApiLoader||loadGapi($),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl($){const _e=$.config;_assert(_e.authDomain,$,"auth-domain-config-required");const _t=_e.emulator?_emulatorUrl(_e,EMULATED_IFRAME_PATH):`https://${$.config.authDomain}/${IFRAME_PATH}`,Vt={apiKey:_e.apiKey,appName:$.name,v:SDK_VERSION},Wt=EID_FROM_APIHOST.get($.config.apiHost);Wt&&(Vt.eid=Wt);const _i=$._getFrameworks();return _i.length&&(Vt.fw=_i.join(",")),`${_t}?${querystring(Vt).slice(1)}`}async function _openIframe($){const _e=await _loadGapi($),_t=_window$2().gapi;return _assert(_t,$,"internal-error"),_e.open({where:document.body,url:getIframeUrl($),messageHandlersFilter:_t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},Vt=>new Promise(async(Wt,_i)=>{await Vt.restyle({setHideOnLeave:!1});const _s=_createError($,"network-request-failed"),_c=_window$2().setTimeout(()=>{_i(_s)},PING_TIMEOUT.get());function _l(){_window$2().clearTimeout(_c),Wt(Vt)}Vt.ping(_l).then(_l,()=>{_i(_s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(_e){this.window=_e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open($,_e,_t,Vt=DEFAULT_WIDTH,Wt=DEFAULT_HEIGHT){const _i=Math.max((window.screen.availHeight-Wt)/2,0).toString(),_s=Math.max((window.screen.availWidth-Vt)/2,0).toString();let _c="";const _l=Object.assign(Object.assign({},BASE_POPUP_OPTIONS),{width:Vt.toString(),height:Wt.toString(),top:_i,left:_s}),_d=getUA().toLowerCase();_t&&(_c=_isChromeIOS(_d)?TARGET_BLANK:_t),_isFirefox(_d)&&(_e=_e||FIREFOX_EMPTY_URL,_l.scrollbars="yes");const _m=Object.entries(_l).reduce((t_,[i_,c_])=>`${t_}${i_}=${c_},`,"");if(_isIOSStandalone(_d)&&_c!=="_self")return openAsNewWindowIOS(_e||"",_c),new AuthPopup(null);const e_=window.open(_e||"",_c,_m);_assert(e_,$,"popup-blocked");try{e_.focus()}catch{}return new AuthPopup(e_)}function openAsNewWindowIOS($,_e){const _t=document.createElement("a");_t.href=$,_t.target=_e;const Vt=document.createEvent("MouseEvent");Vt.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_t.dispatchEvent(Vt)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler";function _getRedirectUrl($,_e,_t,Vt,Wt,_i){_assert($.config.authDomain,$,"auth-domain-config-required"),_assert($.config.apiKey,$,"invalid-api-key");const _s={apiKey:$.config.apiKey,appName:$.name,authType:_t,redirectUrl:Vt,v:SDK_VERSION,eventId:Wt};if(_e instanceof FederatedAuthProvider){_e.setDefaultLanguage($.languageCode),_s.providerId=_e.providerId||"",isEmpty(_e.getCustomParameters())||(_s.customParameters=JSON.stringify(_e.getCustomParameters()));for(const[_l,_d]of Object.entries(_i||{}))_s[_l]=_d}if(_e instanceof BaseOAuthProvider){const _l=_e.getScopes().filter(_d=>_d!=="");_l.length>0&&(_s.scopes=_l.join(","))}$.tenantId&&(_s.tid=$.tenantId);const _c=_s;for(const _l of Object.keys(_c))_c[_l]===void 0&&delete _c[_l];return`${getHandlerBase($)}?${querystring(_c).slice(1)}`}function getHandlerBase({config:$}){return $.emulator?_emulatorUrl($,EMULATOR_WIDGET_PATH):`https://${$.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(_e,_t,Vt,Wt){var _i;debugAssert((_i=this.eventManagers[_e._key()])===null||_i===void 0?void 0:_i.manager,"_initialize() not called before _openPopup()");const _s=_getRedirectUrl(_e,_t,Vt,_getCurrentUrl(),Wt);return _open(_e,_s,_generateEventId())}async _openRedirect(_e,_t,Vt,Wt){return await this._originValidation(_e),_setWindowLocation(_getRedirectUrl(_e,_t,Vt,_getCurrentUrl(),Wt)),new Promise(()=>{})}_initialize(_e){const _t=_e._key();if(this.eventManagers[_t]){const{manager:Wt,promise:_i}=this.eventManagers[_t];return Wt?Promise.resolve(Wt):(debugAssert(_i,"If manager is not set, promise should be"),_i)}const Vt=this.initAndGetManager(_e);return this.eventManagers[_t]={promise:Vt},Vt.catch(()=>{delete this.eventManagers[_t]}),Vt}async initAndGetManager(_e){const _t=await _openIframe(_e),Vt=new AuthEventManager(_e);return _t.register("authEvent",Wt=>(_assert(Wt==null?void 0:Wt.authEvent,_e,"invalid-auth-event"),{status:Vt.onEvent(Wt.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[_e._key()]={manager:Vt},this.iframes[_e._key()]=_t,Vt}_isIframeWebStorageSupported(_e,_t){this.iframes[_e._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},Wt=>{var _i;const _s=(_i=Wt==null?void 0:Wt[0])===null||_i===void 0?void 0:_i[WEB_STORAGE_SUPPORT_KEY];_s!==void 0&&_t(!!_s),_fail(_e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(_e){const _t=_e._key();return this.originValidationPromises[_t]||(this.originValidationPromises[_t]=_validateOrigin(_e)),this.originValidationPromises[_t]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name$1="@firebase/auth",version$1="0.22.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(_e){this.auth=_e,this.internalListeners=new Map}getUid(){var _e;return this.assertAuthConfigured(),((_e=this.auth.currentUser)===null||_e===void 0?void 0:_e.uid)||null}async getToken(_e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(_e)}:null}addAuthTokenListener(_e){if(this.assertAuthConfigured(),this.internalListeners.has(_e))return;const _t=this.auth.onIdTokenChanged(Vt=>{_e((Vt==null?void 0:Vt.stsTokenManager.accessToken)||null)});this.internalListeners.set(_e,_t),this.updateProactiveRefresh()}removeAuthTokenListener(_e){this.assertAuthConfigured();const _t=this.internalListeners.get(_e);_t&&(this.internalListeners.delete(_e),_t(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform($){switch($){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function registerAuth($){_registerComponent(new Component("auth",(_e,{options:_t})=>{const Vt=_e.getProvider("app").getImmediate(),Wt=_e.getProvider("heartbeat"),{apiKey:_i,authDomain:_s}=Vt.options;return((_c,_l)=>{_assert(_i&&!_i.includes(":"),"invalid-api-key",{appName:_c.name}),_assert(!(_s!=null&&_s.includes(":")),"argument-error",{appName:_c.name});const _d={apiKey:_i,authDomain:_s,clientPlatform:$,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion($)},_m=new AuthImpl(_c,_l,_d);return _initializeAuthInstance(_m,_t),_m})(Vt,Wt)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((_e,_t,Vt)=>{_e.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",_e=>{const _t=_castAuth(_e.getProvider("auth").getImmediate());return(Vt=>new AuthInterop(Vt))(_t)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name$1,version$1,getVersionForPlatform($)),registerVersion(name$1,version$1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=5*60,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=$=>async _e=>{const _t=_e&&await _e.getIdTokenResult(),Vt=_t&&(new Date().getTime()-Date.parse(_t.issuedAtTime))/1e3;if(Vt&&Vt>authIdTokenMaxAge)return;const Wt=_t==null?void 0:_t.token;lastPostedIdToken!==Wt&&(lastPostedIdToken=Wt,await fetch($,{method:Wt?"POST":"DELETE",headers:Wt?{Authorization:`Bearer ${Wt}`}:{}}))};function getAuth($=getApp()){const _e=_getProvider($,"auth");if(_e.isInitialized())return _e.getImmediate();const _t=initializeAuth($,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),Vt=getExperimentalSetting("authTokenSyncURL");if(Vt){const _i=mintCookieFactory(Vt);beforeAuthStateChanged(_t,_i,()=>_i(_t.currentUser)),onIdTokenChanged(_t,_s=>_i(_s))}const Wt=getDefaultEmulatorHost("auth");return Wt&&connectAuthEmulator(_t,`http://${Wt}`),_t}registerAuth("Browser");var name="firebase",version="9.19.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name,version,"app");const{VITE_API_KEY,VITE_AUTH_DOMAIN,VITE_PROJECT_ID,VITE_STORAGE_BUCKET,VITE_MESSAGING_SENDER_ID,VITE_APP_ID,VITE_MEASUREMENT_ID}={VITE_API_KEY:"AIzaSyBfEWQrNf7BFMsNsG5peHgxVgiuELyj1xg",VITE_AUTH_DOMAIN:"medic-on-call-5a2e8.firebaseapp.com",VITE_PROJECT_ID:"medic-on-call-5a2e8",VITE_STORAGE_BUCKET:"medic-on-call-5a2e8.appspot.com",VITE_MESSAGING_SENDER_ID:"162946425419",VITE_APP_ID:"1:162946425419:web:99d76418837fe847c8e3ce",VITE_MEASUREMENT_ID:"G-GC2YXB9VMB",VITE_STRIPE_PUBLISHABLE_KEY:"pk_test_51NCqeASG9AXi2VUQtPyBiARxRh8Re2mNbtKyb9RdWp52V4uxl58ndEZ6IVhOZuTUyaOsXSLjuY9EAkiq2kXiy7lY008NkH4vQq",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},firebaseConfig={apiKey:VITE_API_KEY,authDomain:VITE_AUTH_DOMAIN,projectId:VITE_PROJECT_ID,storageBucket:VITE_STORAGE_BUCKET,messagingSenderId:VITE_MESSAGING_SENDER_ID,appId:VITE_APP_ID,measurementId:VITE_MEASUREMENT_ID},app=initializeApp(firebaseConfig),auth=getAuth(app),provider=new GoogleAuthProvider;function recaptcha(){window.recaptchaVerifier=new RecaptchaVerifier("recaptcha-container",{size:"invisible",callback:()=>{},"expired-callback":()=>{}},auth)}function onSignInSubmit($,_e){return recaptcha(),new Promise((_t,Vt)=>{signInWithPhoneNumber(auth,$+_e,window.recaptchaVerifier).then(Wt=>{window.confirmationResult=Wt,_t()}).catch(Wt=>{alert(Wt),Vt(Wt)})})}function verify($){return new Promise((_e,_t)=>{window.confirmationResult.confirm($).then(()=>{_e()}).catch(Vt=>{_t(Vt)})})}const validatePhone=$=>/^\d{10}$/.test($),isValidName=$=>/^[a-zA-Z\s'-]+$/.test($),isValidText=$=>/^[a-zA-Z\s]{4,}$/.test($),isValidRegNumber=$=>/^\d{5}$/.test($);function validatePassword($){const _e=/[A-Z]/.test($),_t=/\d/.test($),Vt=/[!@#$%^&*(),.?":{}|<>]/.test($),Wt=$.length>=8;return _e?_t?Vt?Wt?null:"Password must be at least 8 characters long":"Password must contain at least one special character":"Password must contain at least one number":"Password must contain at least one uppercase letter"}const userSlice=createSlice({name:"user",initialState:{user:null},reducers:{setUser:($,_e)=>{$.user=_e.payload}}}),{setUser}=userSlice.actions,Login=()=>{const $=useDispatch(),[_e,{isLoading:_t}]=useUserLoginMutation(),[Vt]=useUserGoogleLoginMutation(),Wt=useNavigate(),[_i,_s]=reactExports.useState({});function _c(_m){const{name:e_,value:t_}=_m.target;_s({..._i,[e_]:t_})}async function _l(_m){_m.preventDefault();try{!_i.phone||!_i.password?Q$1("Please fill in the credentials"):(validatePhone(_i.phone)||Q$1("enter valid phone"),validatePhone(_i.phone)&&!_t&&($(showloading()),_e(_i).then(e_=>{if(e_.data.success)if(localStorage.setItem("token",e_.data.token),$(setUser(e_.data.response)),$(hideLoading()),e_.data.response.isDoctor){const t_={isDoctor:e_.data.response.isDoctor,isProfileComplete:e_.data.response.isProfileComplete,isVerified:e_.data.response.isVerified};console.log(t_),localStorage.setItem("check",JSON.stringify(t_)),Wt("/doctor")}else{const t_={isDoctor:!1};console.log(t_),localStorage.setItem("check",JSON.stringify(t_)),Wt("/")}else Q$1.error(e_.data.message),$(hideLoading())})))}catch(e_){console.log(e_)}}return jsx("div",{children:jsx("section",{className:"bg-gray-50 dark:bg-gray-900",children:jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 mx-auto h-screen lg:py-0",children:[jsx("a",{href:"#",className:"flex items-center text-2xl font-semibold text-gray-00 dark:text-white",children:jsx("img",{className:"w-auto h-24 mr-2",src:"./src/assets/logo.png",alt:"logo"})}),jsx("div",{className:"w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700",children:jsxs("div",{className:"p-6 space-y-4 md:space-y-4",children:[jsx("h1",{className:"text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white",children:"Login to Your Account"}),jsxs("form",{className:"space-y-4 md:space-y-",onSubmit:_l,children:[jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",htmlFor:"phone",children:"Phone Number"}),jsx("div",{children:jsx("input",{type:"",name:"phone",id:"number",placeholder:"eg: 1234567890",className:"inline-flex w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-400 dark:bg-gray-600 dark:hover:bg-gray-600 dark:hover:text-white rounded-lg",required:"",onChange:_c})}),jsxs("div",{children:[jsx("label",{htmlFor:"confirm-password",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Password"}),jsx("input",{type:"password",name:"password",id:"password",placeholder:"",className:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:"",onChange:_c})]}),jsx("div",{className:"flex items-start"}),jsx("button",{type:"submit",className:"w-full text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800",children:"Login"}),jsxs("p",{className:"text-sm font-light text-gray-500 dark:text-gray-400",children:["Already have an account?",jsx("a",{href:"/register",className:"font-medium text-primary-600 hover:underline dark:text-primary-500",children:"Regsister here"})]}),jsxs("div",{className:"text-center flex-col flex text-white",children:[jsx("span",{className:"font-bold",children:"Login with Google"}),jsx("button",{type:"button",className:"text-2xl bg-red-600 mt-1 rounded-lg",onClick:()=>{signInWithPopup(auth,provider).then(_m=>{const e_={name:_m.user.displayName,email:_m.user.email,profilePhoto:_m.user.photoURL};_m.user.emailVerified&&Vt(e_).then(t_=>{t_.data.success?(Q$1("login succesfull"),localStorage.setItem("token",t_.data.token),Wt("/")):Q$1(t_.data.message)})})},children:jsx("ion-icon",{name:"logo-google"})})]})]})]})})]})})})};var sweetalert2_allExports={},sweetalert2_all={get exports(){return sweetalert2_allExports},set exports($){sweetalert2_allExports=$}};/*!
* sweetalert2 v11.7.3
* Released under the MIT License.
*/(function($,_e){(function(_t,Vt){$.exports=Vt()})(commonjsGlobal$1,function(){var _t={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const Vt="swal2-",Wt=__=>{const v_={};for(const O_ in __)v_[__[O_]]=Vt+__[O_];return v_},_i=Wt(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),_s=Wt(["success","warning","info","question","error"]),_c="SweetAlert2:",_l=__=>{const v_=[];for(let O_=0;O_<__.length;O_++)v_.indexOf(__[O_])===-1&&v_.push(__[O_]);return v_},_d=__=>__.charAt(0).toUpperCase()+__.slice(1),_m=__=>{console.warn(`${_c} ${typeof __=="object"?__.join(" "):__}`)},e_=__=>{console.error(`${_c} ${__}`)},t_=[],i_=__=>{t_.includes(__)||(t_.push(__),_m(__))},c_=(__,v_)=>{i_(`"${__}" is deprecated and will be removed in the next major release. Please use "${v_}" instead.`)},h_=__=>typeof __=="function"?__():__,y_=__=>__&&typeof __.toPromise=="function",l_=__=>y_(__)?__.toPromise():Promise.resolve(__),d_=__=>__&&Promise.resolve(__)===__,f_=()=>document.body.querySelector(`.${_i.container}`),S_=__=>{const v_=f_();return v_?v_.querySelector(__):null},T_=__=>S_(`.${__}`),R_=()=>T_(_i.popup),C_=()=>T_(_i.icon),j_=()=>T_(_i["icon-content"]),W_=()=>T_(_i.title),A_=()=>T_(_i["html-container"]),$_=()=>T_(_i.image),q_=()=>T_(_i["progress-steps"]),G_=()=>T_(_i["validation-message"]),I_=()=>S_(`.${_i.actions} .${_i.confirm}`),x_=()=>S_(`.${_i.actions} .${_i.cancel}`),Y_=()=>S_(`.${_i.actions} .${_i.deny}`),z_=()=>T_(_i["input-label"]),B_=()=>S_(`.${_i.loader}`),Q_=()=>T_(_i.actions),K_=()=>T_(_i.footer),rE=()=>T_(_i["timer-progress-bar"]),aE=()=>T_(_i.close),gE=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,kE=()=>{const __=Array.from(R_().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((O_,X_)=>{const lE=parseInt(O_.getAttribute("tabindex")),HE=parseInt(X_.getAttribute("tabindex"));return lE>HE?1:lE<HE?-1:0}),v_=Array.from(R_().querySelectorAll(gE)).filter(O_=>O_.getAttribute("tabindex")!=="-1");return _l(__.concat(v_)).filter(O_=>_w(O_))},xE=()=>D0(document.body,_i.shown)&&!D0(document.body,_i["toast-shown"])&&!D0(document.body,_i["no-backdrop"]),YE=()=>R_()&&D0(R_(),_i.toast),d0=()=>R_().hasAttribute("data-loading"),M0={previousBodyPadding:null},u0=(__,v_)=>{if(__.textContent="",v_){const X_=new DOMParser().parseFromString(v_,"text/html");Array.from(X_.querySelector("head").childNodes).forEach(lE=>{__.appendChild(lE)}),Array.from(X_.querySelector("body").childNodes).forEach(lE=>{lE instanceof HTMLVideoElement||lE instanceof HTMLAudioElement?__.appendChild(lE.cloneNode(!0)):__.appendChild(lE)})}},D0=(__,v_)=>{if(!v_)return!1;const O_=v_.split(/\s+/);for(let X_=0;X_<O_.length;X_++)if(!__.classList.contains(O_[X_]))return!1;return!0},C0=(__,v_)=>{Array.from(__.classList).forEach(O_=>{!Object.values(_i).includes(O_)&&!Object.values(_s).includes(O_)&&!Object.values(v_.showClass).includes(O_)&&__.classList.remove(O_)})},QE=(__,v_,O_)=>{if(C0(__,v_),v_.customClass&&v_.customClass[O_]){if(typeof v_.customClass[O_]!="string"&&!v_.customClass[O_].forEach){_m(`Invalid type of customClass.${O_}! Expected string or iterable object, got "${typeof v_.customClass[O_]}"`);return}SE(__,v_.customClass[O_])}},f0=(__,v_)=>{if(!v_)return null;switch(v_){case"select":case"textarea":case"file":return __.querySelector(`.${_i.popup} > .${_i[v_]}`);case"checkbox":return __.querySelector(`.${_i.popup} > .${_i.checkbox} input`);case"radio":return __.querySelector(`.${_i.popup} > .${_i.radio} input:checked`)||__.querySelector(`.${_i.popup} > .${_i.radio} input:first-child`);case"range":return __.querySelector(`.${_i.popup} > .${_i.range} input`);default:return __.querySelector(`.${_i.popup} > .${_i.input}`)}},$E=__=>{if(__.focus(),__.type!=="file"){const v_=__.value;__.value="",__.value=v_}},m0=(__,v_,O_)=>{!__||!v_||(typeof v_=="string"&&(v_=v_.split(/\s+/).filter(Boolean)),v_.forEach(X_=>{Array.isArray(__)?__.forEach(lE=>{O_?lE.classList.add(X_):lE.classList.remove(X_)}):O_?__.classList.add(X_):__.classList.remove(X_)}))},SE=(__,v_)=>{m0(__,v_,!0)},zE=(__,v_)=>{m0(__,v_,!1)},N0=(__,v_)=>{const O_=Array.from(__.children);for(let X_=0;X_<O_.length;X_++){const lE=O_[X_];if(lE instanceof HTMLElement&&D0(lE,v_))return lE}},K0=(__,v_,O_)=>{O_===`${parseInt(O_)}`&&(O_=parseInt(O_)),O_||parseInt(O_)===0?__.style[v_]=typeof O_=="number"?`${O_}px`:O_:__.style.removeProperty(v_)},RE=function(__){let v_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";__.style.display=v_},VE=__=>{__.style.display="none"},jS=(__,v_,O_,X_)=>{const lE=__.querySelector(v_);lE&&(lE.style[O_]=X_)},IT=function(__,v_){let O_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";v_?RE(__,O_):VE(__)},_w=__=>!!(__&&(__.offsetWidth||__.offsetHeight||__.getClientRects().length)),EI=()=>!_w(I_())&&!_w(Y_())&&!_w(x_()),hN=__=>__.scrollHeight>__.clientHeight,tR=__=>{const v_=window.getComputedStyle(__),O_=parseFloat(v_.getPropertyValue("animation-duration")||"0"),X_=parseFloat(v_.getPropertyValue("transition-duration")||"0");return O_>0||X_>0},OR=function(__){let v_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const O_=rE();_w(O_)&&(v_&&(O_.style.transition="none",O_.style.width="100%"),setTimeout(()=>{O_.style.transition=`width ${__/1e3}s linear`,O_.style.width="0%"},10))},pN=()=>{const __=rE(),v_=parseInt(window.getComputedStyle(__).width);__.style.removeProperty("transition"),__.style.width="100%";const O_=parseInt(window.getComputedStyle(__).width),X_=v_/O_*100;__.style.width=`${X_}%`},bO=100,y0={},fN=()=>{y0.previousActiveElement instanceof HTMLElement?(y0.previousActiveElement.focus(),y0.previousActiveElement=null):document.body&&document.body.focus()},mN=__=>new Promise(v_=>{if(!__)return v_();const O_=window.scrollX,X_=window.scrollY;y0.restoreFocusTimeout=setTimeout(()=>{fN(),v_()},bO),window.scrollTo(O_,X_)}),t1=()=>typeof window>"u"||typeof document>"u",_N=`
 <div aria-labelledby="${_i.title}" aria-describedby="${_i["html-container"]}" class="${_i.popup}" tabindex="-1">
   <button type="button" class="${_i.close}"></button>
   <ul class="${_i["progress-steps"]}"></ul>
   <div class="${_i.icon}"></div>
   <img class="${_i.image}" />
   <h2 class="${_i.title}" id="${_i.title}"></h2>
   <div class="${_i["html-container"]}" id="${_i["html-container"]}"></div>
   <input class="${_i.input}" />
   <input type="file" class="${_i.file}" />
   <div class="${_i.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${_i.select}"></select>
   <div class="${_i.radio}"></div>
   <label for="${_i.checkbox}" class="${_i.checkbox}">
     <input type="checkbox" />
     <span class="${_i.label}"></span>
   </label>
   <textarea class="${_i.textarea}"></textarea>
   <div class="${_i["validation-message"]}" id="${_i["validation-message"]}"></div>
   <div class="${_i.actions}">
     <div class="${_i.loader}"></div>
     <button type="button" class="${_i.confirm}"></button>
     <button type="button" class="${_i.deny}"></button>
     <button type="button" class="${_i.cancel}"></button>
   </div>
   <div class="${_i.footer}"></div>
   <div class="${_i["timer-progress-bar-container"]}">
     <div class="${_i["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),gN=()=>{const __=f_();return __?(__.remove(),zE([document.documentElement,document.body],[_i["no-backdrop"],_i["toast-shown"],_i["has-column"]]),!0):!1},nR=()=>{y0.currentInstance.resetValidationMessage()},ZD=()=>{const __=R_(),v_=N0(__,_i.input),O_=N0(__,_i.file),X_=__.querySelector(`.${_i.range} input`),lE=__.querySelector(`.${_i.range} output`),HE=N0(__,_i.select),J0=__.querySelector(`.${_i.checkbox} input`),kT=N0(__,_i.textarea);v_.oninput=nR,O_.onchange=nR,HE.onchange=nR,J0.onchange=nR,kT.oninput=nR,X_.oninput=()=>{nR(),lE.value=X_.value},X_.onchange=()=>{nR(),lE.value=X_.value}},n1=__=>typeof __=="string"?document.querySelector(__):__,eP=__=>{const v_=R_();v_.setAttribute("role",__.toast?"alert":"dialog"),v_.setAttribute("aria-live",__.toast?"polite":"assertive"),__.toast||v_.setAttribute("aria-modal","true")},wL=__=>{window.getComputedStyle(__).direction==="rtl"&&SE(f_(),_i.rtl)},TL=__=>{const v_=gN();if(t1()){e_("SweetAlert2 requires document to initialize");return}const O_=document.createElement("div");O_.className=_i.container,v_&&SE(O_,_i["no-transition"]),u0(O_,_N);const X_=n1(__.target);X_.appendChild(O_),eP(__),wL(X_),ZD()},rR=(__,v_)=>{__ instanceof HTMLElement?v_.appendChild(__):typeof __=="object"?tP(__,v_):__&&u0(v_,__)},tP=(__,v_)=>{__.jquery?vN(v_,__):u0(v_,__.toString())},vN=(__,v_)=>{if(__.textContent="",0 in v_)for(let O_=0;O_ in v_;O_++)__.appendChild(v_[O_].cloneNode(!0));else __.appendChild(v_.cloneNode(!0))},bI=(()=>{if(t1())return!1;const __=document.createElement("div"),v_={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const O_ in v_)if(Object.prototype.hasOwnProperty.call(v_,O_)&&typeof __.style[O_]<"u")return v_[O_];return!1})(),r1=()=>{const __=document.createElement("div");__.className=_i["scrollbar-measure"],document.body.appendChild(__);const v_=__.getBoundingClientRect().width-__.clientWidth;return document.body.removeChild(__),v_},yN=(__,v_)=>{const O_=Q_(),X_=B_();!v_.showConfirmButton&&!v_.showDenyButton&&!v_.showCancelButton?VE(O_):RE(O_),QE(O_,v_,"actions"),nP(O_,X_,v_),u0(X_,v_.loaderHtml),QE(X_,v_,"loader")};function nP(__,v_,O_){const X_=I_(),lE=Y_(),HE=x_();BI(X_,"confirm",O_),BI(lE,"deny",O_),BI(HE,"cancel",O_),i1(X_,lE,HE,O_),O_.reverseButtons&&(O_.toast?(__.insertBefore(HE,X_),__.insertBefore(lE,X_)):(__.insertBefore(HE,v_),__.insertBefore(lE,v_),__.insertBefore(X_,v_)))}function i1(__,v_,O_,X_){if(!X_.buttonsStyling){zE([__,v_,O_],_i.styled);return}SE([__,v_,O_],_i.styled),X_.confirmButtonColor&&(__.style.backgroundColor=X_.confirmButtonColor,SE(__,_i["default-outline"])),X_.denyButtonColor&&(v_.style.backgroundColor=X_.denyButtonColor,SE(v_,_i["default-outline"])),X_.cancelButtonColor&&(O_.style.backgroundColor=X_.cancelButtonColor,SE(O_,_i["default-outline"]))}function BI(__,v_,O_){IT(__,O_[`show${_d(v_)}Button`],"inline-block"),u0(__,O_[`${v_}ButtonText`]),__.setAttribute("aria-label",O_[`${v_}ButtonAriaLabel`]),__.className=_i[v_],QE(__,O_,`${v_}Button`),SE(__,O_[`${v_}ButtonClass`])}const rP=(__,v_)=>{const O_=aE();u0(O_,v_.closeButtonHtml),QE(O_,v_,"closeButton"),IT(O_,v_.showCloseButton),O_.setAttribute("aria-label",v_.closeButtonAriaLabel)},EN=(__,v_)=>{const O_=f_();O_&&(RL(O_,v_.backdrop),bN(O_,v_.position),IL(O_,v_.grow),QE(O_,v_,"container"))};function RL(__,v_){typeof v_=="string"?__.style.background=v_:v_||SE([document.documentElement,document.body],_i["no-backdrop"])}function bN(__,v_){v_ in _i?SE(__,_i[v_]):(_m('The "position" parameter is not valid, defaulting to "center"'),SE(__,_i.center))}function IL(__,v_){if(v_&&typeof v_=="string"){const O_=`grow-${v_}`;O_ in _i&&SE(__,_i[O_])}}const iP=["input","file","range","select","radio","checkbox","textarea"],oP=(__,v_)=>{const O_=R_(),X_=_t.innerParams.get(__),lE=!X_||v_.input!==X_.input;iP.forEach(HE=>{const J0=N0(O_,_i[HE]);aP(HE,v_.inputAttributes),J0.className=_i[HE],lE&&VE(J0)}),v_.input&&(lE&&KR(v_),eT(v_))},KR=__=>{if(!tT[__.input]){e_(`Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "${__.input}"`);return}const v_=CL(__.input),O_=tT[__.input](v_,__);RE(v_),__.inputAutoFocus&&setTimeout(()=>{$E(O_)})},sP=__=>{for(let v_=0;v_<__.attributes.length;v_++){const O_=__.attributes[v_].name;["type","value","style"].includes(O_)||__.removeAttribute(O_)}},aP=(__,v_)=>{const O_=f0(R_(),__);if(O_){sP(O_);for(const X_ in v_)O_.setAttribute(X_,v_[X_])}},eT=__=>{const v_=CL(__.input);typeof __.customClass=="object"&&SE(v_,__.customClass.input)},SN=(__,v_)=>{(!__.placeholder||v_.inputPlaceholder)&&(__.placeholder=v_.inputPlaceholder)},SO=(__,v_,O_)=>{if(O_.inputLabel){__.id=_i.input;const X_=document.createElement("label"),lE=_i["input-label"];X_.setAttribute("for",__.id),X_.className=lE,typeof O_.customClass=="object"&&SE(X_,O_.customClass.inputLabel),X_.innerText=O_.inputLabel,v_.insertAdjacentElement("beforebegin",X_)}},CL=__=>N0(R_(),_i[__]||_i.input),o1=(__,v_)=>{["string","number"].includes(typeof v_)?__.value=`${v_}`:d_(v_)||_m(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof v_}"`)},tT={};tT.text=tT.email=tT.password=tT.number=tT.tel=tT.url=(__,v_)=>(o1(__,v_.inputValue),SO(__,__,v_),SN(__,v_),__.type=v_.input,__),tT.file=(__,v_)=>(SO(__,__,v_),SN(__,v_),__),tT.range=(__,v_)=>{const O_=__.querySelector("input"),X_=__.querySelector("output");return o1(O_,v_.inputValue),O_.type=v_.input,o1(X_,v_.inputValue),SO(O_,__,v_),__},tT.select=(__,v_)=>{if(__.textContent="",v_.inputPlaceholder){const O_=document.createElement("option");u0(O_,v_.inputPlaceholder),O_.value="",O_.disabled=!0,O_.selected=!0,__.appendChild(O_)}return SO(__,__,v_),__},tT.radio=__=>(__.textContent="",__),tT.checkbox=(__,v_)=>{const O_=f0(R_(),"checkbox");O_.value="1",O_.id=_i.checkbox,O_.checked=!!v_.inputValue;const X_=__.querySelector("span");return u0(X_,v_.inputPlaceholder),O_},tT.textarea=(__,v_)=>{o1(__,v_.inputValue),SN(__,v_),SO(__,__,v_);const O_=X_=>parseInt(window.getComputedStyle(X_).marginLeft)+parseInt(window.getComputedStyle(X_).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const X_=parseInt(window.getComputedStyle(R_()).width),lE=()=>{const HE=__.offsetWidth+O_(__);HE>X_?R_().style.width=`${HE}px`:R_().style.width=null};new MutationObserver(lE).observe(__,{attributes:!0,attributeFilter:["style"]})}}),__};const cP=(__,v_)=>{const O_=A_();QE(O_,v_,"htmlContainer"),v_.html?(rR(v_.html,O_),RE(O_,"block")):v_.text?(O_.textContent=v_.text,RE(O_,"block")):VE(O_),oP(__,v_)},s1=(__,v_)=>{const O_=K_();IT(O_,v_.footer),v_.footer&&rR(v_.footer,O_),QE(O_,v_,"footer")},AL=(__,v_)=>{const O_=_t.innerParams.get(__),X_=C_();if(O_&&v_.icon===O_.icon){NR(X_,v_),wO(X_,v_);return}if(!v_.icon&&!v_.iconHtml){VE(X_);return}if(v_.icon&&Object.keys(_s).indexOf(v_.icon)===-1){e_(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${v_.icon}"`),VE(X_);return}RE(X_),NR(X_,v_),wO(X_,v_),SE(X_,v_.showClass.icon)},wO=(__,v_)=>{for(const O_ in _s)v_.icon!==O_&&zE(__,_s[O_]);SE(__,_s[v_.icon]),wN(__,v_),OL(),QE(__,v_,"icon")},OL=()=>{const __=R_(),v_=window.getComputedStyle(__).getPropertyValue("background-color"),O_=__.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let X_=0;X_<O_.length;X_++)O_[X_].style.backgroundColor=v_},NL=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,TO=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,NR=(__,v_)=>{let O_=__.innerHTML,X_;v_.iconHtml?X_=TN(v_.iconHtml):v_.icon==="success"?(X_=NL,O_=O_.replace(/ style=".*?"/g,"")):v_.icon==="error"?X_=TO:X_=TN({question:"?",warning:"!",info:"i"}[v_.icon]),O_.trim()!==X_.trim()&&u0(__,X_)},wN=(__,v_)=>{if(v_.iconColor){__.style.color=v_.iconColor,__.style.borderColor=v_.iconColor;for(const O_ of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])jS(__,O_,"backgroundColor",v_.iconColor);jS(__,".swal2-success-ring","borderColor",v_.iconColor)}},TN=__=>`<div class="${_i["icon-content"]}">${__}</div>`,xS=(__,v_)=>{const O_=$_();if(!v_.imageUrl){VE(O_);return}RE(O_,""),O_.setAttribute("src",v_.imageUrl),O_.setAttribute("alt",v_.imageAlt),K0(O_,"width",v_.imageWidth),K0(O_,"height",v_.imageHeight),O_.className=_i.image,QE(O_,v_,"image")},uP=(__,v_)=>{const O_=f_(),X_=R_();v_.toast?(K0(O_,"width",v_.width),X_.style.width="100%",X_.insertBefore(B_(),C_())):K0(X_,"width",v_.width),K0(X_,"padding",v_.padding),v_.color&&(X_.style.color=v_.color),v_.background&&(X_.style.background=v_.background),VE(G_()),kL(X_,v_)},kL=(__,v_)=>{__.className=`${_i.popup} ${_w(__)?v_.showClass.popup:""}`,v_.toast?(SE([document.documentElement,document.body],_i["toast-shown"]),SE(__,_i.toast)):SE(__,_i.modal),QE(__,v_,"popup"),typeof v_.customClass=="string"&&SE(__,v_.customClass),v_.icon&&SE(__,_i[`icon-${v_.icon}`])},xL=(__,v_)=>{const O_=q_();if(!v_.progressSteps||v_.progressSteps.length===0){VE(O_);return}RE(O_),O_.textContent="",v_.currentProgressStep>=v_.progressSteps.length&&_m("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),v_.progressSteps.forEach((X_,lE)=>{const HE=LL(X_);if(O_.appendChild(HE),lE===v_.currentProgressStep&&SE(HE,_i["active-progress-step"]),lE!==v_.progressSteps.length-1){const J0=ML(v_);O_.appendChild(J0)}})},LL=__=>{const v_=document.createElement("li");return SE(v_,_i["progress-step"]),u0(v_,__),v_},ML=__=>{const v_=document.createElement("li");return SE(v_,_i["progress-step-line"]),__.progressStepsDistance&&K0(v_,"width",__.progressStepsDistance),v_},DL=(__,v_)=>{const O_=W_();IT(O_,v_.title||v_.titleText,"block"),v_.title&&rR(v_.title,O_),v_.titleText&&(O_.innerText=v_.titleText),QE(O_,v_,"title")},a1=(__,v_)=>{uP(__,v_),EN(__,v_),xL(__,v_),AL(__,v_),xS(__,v_),DL(__,v_),rP(__,v_),cP(__,v_),yN(__,v_),s1(__,v_),typeof v_.didRender=="function"&&v_.didRender(R_())};function PL(){const __=_t.innerParams.get(this);if(!__)return;const v_=_t.domCache.get(this);VE(v_.loader),YE()?__.icon&&RE(C_()):jL(v_),zE([v_.popup,v_.actions],_i.loading),v_.popup.removeAttribute("aria-busy"),v_.popup.removeAttribute("data-loading"),v_.confirmButton.disabled=!1,v_.denyButton.disabled=!1,v_.cancelButton.disabled=!1}const jL=__=>{const v_=__.popup.getElementsByClassName(__.loader.getAttribute("data-button-to-replace"));v_.length?RE(v_[0],"inline-block"):EI()&&VE(__.actions)};function c1(__){const v_=_t.innerParams.get(__||this),O_=_t.domCache.get(__||this);return O_?f0(O_.popup,v_.input):null}const RO=()=>_w(R_()),RN=()=>I_()&&I_().click(),u1=()=>Y_()&&Y_().click(),UL=()=>x_()&&x_().click(),lR=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),$L=__=>{__.keydownTarget&&__.keydownHandlerAdded&&(__.keydownTarget.removeEventListener("keydown",__.keydownHandler,{capture:__.keydownListenerCapture}),__.keydownHandlerAdded=!1)},IN=(__,v_,O_,X_)=>{$L(v_),O_.toast||(v_.keydownHandler=lE=>FL(__,lE,X_),v_.keydownTarget=O_.keydownListenerCapture?window:R_(),v_.keydownListenerCapture=O_.keydownListenerCapture,v_.keydownTarget.addEventListener("keydown",v_.keydownHandler,{capture:v_.keydownListenerCapture}),v_.keydownHandlerAdded=!0)},IO=(__,v_)=>{const O_=kE();if(O_.length){__=__+v_,__===O_.length?__=0:__===-1&&(__=O_.length-1),O_[__].focus();return}R_().focus()},l1=["ArrowRight","ArrowDown"],VI=["ArrowLeft","ArrowUp"],FL=(__,v_,O_)=>{const X_=_t.innerParams.get(__);X_&&(v_.isComposing||v_.keyCode===229||(X_.stopKeydownPropagation&&v_.stopPropagation(),v_.key==="Enter"?YL(__,v_,X_):v_.key==="Tab"?lP(v_):[...l1,...VI].includes(v_.key)?BL(v_.key):v_.key==="Escape"&&VL(v_,X_,O_)))},YL=(__,v_,O_)=>{if(h_(O_.allowEnterKey)&&v_.target&&__.getInput()&&v_.target instanceof HTMLElement&&v_.target.outerHTML===__.getInput().outerHTML){if(["textarea","file"].includes(O_.input))return;RN(),v_.preventDefault()}},lP=__=>{const v_=__.target,O_=kE();let X_=-1;for(let lE=0;lE<O_.length;lE++)if(v_===O_[lE]){X_=lE;break}__.shiftKey?IO(X_,-1):IO(X_,1),__.stopPropagation(),__.preventDefault()},BL=__=>{const v_=I_(),O_=Y_(),X_=x_(),lE=[v_,O_,X_];if(document.activeElement instanceof HTMLElement&&!lE.includes(document.activeElement))return;const HE=l1.includes(__)?"nextElementSibling":"previousElementSibling";let J0=document.activeElement;for(let kT=0;kT<Q_().children.length;kT++){if(J0=J0[HE],!J0)return;if(J0 instanceof HTMLButtonElement&&_w(J0))break}J0 instanceof HTMLButtonElement&&J0.focus()},VL=(__,v_,O_)=>{h_(v_.allowEscapeKey)&&(__.preventDefault(),O_(lR.esc))};var SI={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const HL=()=>{Array.from(document.body.children).forEach(v_=>{v_===f_()||v_.contains(f_())||(v_.hasAttribute("aria-hidden")&&v_.setAttribute("data-previous-aria-hidden",v_.getAttribute("aria-hidden")),v_.setAttribute("aria-hidden","true"))})},GL=()=>{Array.from(document.body.children).forEach(v_=>{v_.hasAttribute("data-previous-aria-hidden")?(v_.setAttribute("aria-hidden",v_.getAttribute("data-previous-aria-hidden")),v_.removeAttribute("data-previous-aria-hidden")):v_.removeAttribute("aria-hidden")})},dP=()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!D0(document.body,_i.iosfix)){const v_=document.body.scrollTop;document.body.style.top=`${v_*-1}px`,SE(document.body,_i.iosfix),qL(),CO()}},CO=()=>{const __=navigator.userAgent,v_=!!__.match(/iPad/i)||!!__.match(/iPhone/i),O_=!!__.match(/WebKit/i);v_&&O_&&!__.match(/CriOS/i)&&R_().scrollHeight>window.innerHeight-44&&(f_().style.paddingBottom="44px")},qL=()=>{const __=f_();let v_;__.ontouchstart=O_=>{v_=hP(O_)},__.ontouchmove=O_=>{v_&&(O_.preventDefault(),O_.stopPropagation())}},hP=__=>{const v_=__.target,O_=f_();return pP(__)||fP(__)?!1:v_===O_||!hN(O_)&&v_ instanceof HTMLElement&&v_.tagName!=="INPUT"&&v_.tagName!=="TEXTAREA"&&!(hN(A_())&&A_().contains(v_))},pP=__=>__.touches&&__.touches.length&&__.touches[0].touchType==="stylus",fP=__=>__.touches&&__.touches.length>1,WL=()=>{if(D0(document.body,_i.iosfix)){const __=parseInt(document.body.style.top,10);zE(document.body,_i.iosfix),document.body.style.top="",document.body.scrollTop=__*-1}},CN=()=>{M0.previousBodyPadding===null&&document.body.scrollHeight>window.innerHeight&&(M0.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${M0.previousBodyPadding+r1()}px`)},mP=()=>{M0.previousBodyPadding!==null&&(document.body.style.paddingRight=`${M0.previousBodyPadding}px`,M0.previousBodyPadding=null)};function zL(__,v_,O_,X_){YE()?JL(__,X_):(mN(O_).then(()=>JL(__,X_)),$L(y0)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(v_.setAttribute("style","display:none !important"),v_.removeAttribute("class"),v_.innerHTML=""):v_.remove(),xE()&&(mP(),WL(),GL()),AO()}function AO(){zE([document.documentElement,document.body],[_i.shown,_i["height-auto"],_i["no-backdrop"],_i["toast-shown"]])}function yT(__){__=_P(__);const v_=SI.swalPromiseResolve.get(this),O_=rS(this);this.isAwaitingPromise()?__.isDismissed||(OO(this),v_(__)):O_&&v_(__)}function KL(){return!!_t.awaitingPromise.get(this)}const rS=__=>{const v_=R_();if(!v_)return!1;const O_=_t.innerParams.get(__);if(!O_||D0(v_,O_.hideClass.popup))return!1;zE(v_,O_.showClass.popup),SE(v_,O_.hideClass.popup);const X_=f_();return zE(X_,O_.showClass.backdrop),SE(X_,O_.hideClass.backdrop),iR(__,v_,O_),!0};function iS(__){const v_=SI.swalPromiseReject.get(this);OO(this),v_&&v_(__)}const OO=__=>{__.isAwaitingPromise()&&(_t.awaitingPromise.delete(__),_t.innerParams.get(__)||__._destroy())},_P=__=>typeof __>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},__),iR=(__,v_,O_)=>{const X_=f_(),lE=bI&&tR(v_);typeof O_.willClose=="function"&&O_.willClose(v_),lE?gP(__,v_,X_,O_.returnFocus,O_.didClose):zL(__,X_,O_.returnFocus,O_.didClose)},gP=(__,v_,O_,X_,lE)=>{y0.swalCloseEventFinishedCallback=zL.bind(null,__,O_,X_,lE),v_.addEventListener(bI,function(HE){HE.target===v_&&(y0.swalCloseEventFinishedCallback(),delete y0.swalCloseEventFinishedCallback)})},JL=(__,v_)=>{setTimeout(()=>{typeof v_=="function"&&v_.bind(__.params)(),__._destroy()})};function QL(__,v_,O_){const X_=_t.domCache.get(__);v_.forEach(lE=>{X_[lE].disabled=O_})}function HI(__,v_){if(__)if(__.type==="radio"){const X_=__.parentNode.parentNode.querySelectorAll("input");for(let lE=0;lE<X_.length;lE++)X_[lE].disabled=v_}else __.disabled=v_}function XL(){QL(this,["confirmButton","denyButton","cancelButton"],!1)}function HS(){QL(this,["confirmButton","denyButton","cancelButton"],!0)}function NO(){HI(this.getInput(),!1)}function wI(){HI(this.getInput(),!0)}function ZL(__){const v_=_t.domCache.get(this),O_=_t.innerParams.get(this);u0(v_.validationMessage,__),v_.validationMessage.className=_i["validation-message"],O_.customClass&&O_.customClass.validationMessage&&SE(v_.validationMessage,O_.customClass.validationMessage),RE(v_.validationMessage);const X_=this.getInput();X_&&(X_.setAttribute("aria-invalid",!0),X_.setAttribute("aria-describedby",_i["validation-message"]),$E(X_),SE(X_,_i.inputerror))}function AN(){const __=_t.domCache.get(this);__.validationMessage&&VE(__.validationMessage);const v_=this.getInput();v_&&(v_.removeAttribute("aria-invalid"),v_.removeAttribute("aria-describedby"),zE(v_,_i.inputerror))}const GS={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},eM=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],tM={},JR=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],GI=__=>Object.prototype.hasOwnProperty.call(GS,__),ON=__=>eM.indexOf(__)!==-1,d1=__=>tM[__],CT=__=>{GI(__)||_m(`Unknown parameter "${__}"`)},vP=__=>{JR.includes(__)&&_m(`The parameter "${__}" is incompatible with toasts`)},YT=__=>{d1(__)&&c_(__,d1(__))},qI=__=>{__.backdrop===!1&&__.allowOutsideClick&&_m('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const v_ in __)CT(v_),__.toast&&vP(v_),YT(v_)};function nM(__){const v_=R_(),O_=_t.innerParams.get(this);if(!v_||D0(v_,O_.hideClass.popup)){_m("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const X_=AT(__),lE=Object.assign({},O_,X_);a1(this,lE),_t.innerParams.set(this,lE),Object.defineProperties(this,{params:{value:Object.assign({},this.params,__),writable:!1,enumerable:!0}})}const AT=__=>{const v_={};return Object.keys(__).forEach(O_=>{ON(O_)?v_[O_]=__[O_]:_m(`Invalid parameter to update: ${O_}`)}),v_};function kO(){const __=_t.domCache.get(this),v_=_t.innerParams.get(this);if(!v_){v0(this);return}__.popup&&y0.swalCloseEventFinishedCallback&&(y0.swalCloseEventFinishedCallback(),delete y0.swalCloseEventFinishedCallback),typeof v_.didDestroy=="function"&&v_.didDestroy(),NN(this)}const NN=__=>{v0(__),delete __.params,delete y0.keydownHandler,delete y0.keydownTarget,delete y0.currentInstance},v0=__=>{__.isAwaitingPromise()?(dR(_t,__),_t.awaitingPromise.set(__,!0)):(dR(SI,__),dR(_t,__))},dR=(__,v_)=>{for(const O_ in __)__[O_].delete(v_)};var h1=Object.freeze({__proto__:null,_destroy:kO,close:yT,closeModal:yT,closePopup:yT,closeToast:yT,disableButtons:HS,disableInput:wI,disableLoading:PL,enableButtons:XL,enableInput:NO,getInput:c1,handleAwaitingPromise:OO,hideLoading:PL,isAwaitingPromise:KL,rejectPromise:iS,resetValidationMessage:AN,showValidationMessage:ZL,update:nM});const QR=__=>{let v_=R_();v_||new tI,v_=R_();const O_=B_();YE()?VE(C_()):kN(v_,__),RE(O_),v_.setAttribute("data-loading","true"),v_.setAttribute("aria-busy","true"),v_.focus()},kN=(__,v_)=>{const O_=Q_(),X_=B_();!v_&&_w(I_())&&(v_=I_()),RE(O_),v_&&(VE(v_),X_.setAttribute("data-button-to-replace",v_.className)),X_.parentNode.insertBefore(X_,v_),SE([__,O_],_i.loading)},yP=(__,v_)=>{v_.input==="select"||v_.input==="radio"?WI(__,v_):["text","email","number","tel","textarea"].includes(v_.input)&&(y_(v_.inputValue)||d_(v_.inputValue))&&(QR(I_()),bP(__,v_))},EP=(__,v_)=>{const O_=__.getInput();if(!O_)return null;switch(v_.input){case"checkbox":return XR(O_);case"radio":return rM(O_);case"file":return p1(O_);default:return v_.inputAutoTrim?O_.value.trim():O_.value}},XR=__=>__.checked?1:0,rM=__=>__.checked?__.value:null,p1=__=>__.files.length?__.getAttribute("multiple")!==null?__.files:__.files[0]:null,WI=(__,v_)=>{const O_=R_(),X_=lE=>{iM[v_.input](O_,xO(lE),v_)};y_(v_.inputOptions)||d_(v_.inputOptions)?(QR(I_()),l_(v_.inputOptions).then(lE=>{__.hideLoading(),X_(lE)})):typeof v_.inputOptions=="object"?X_(v_.inputOptions):e_(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof v_.inputOptions}`)},bP=(__,v_)=>{const O_=__.getInput();VE(O_),l_(v_.inputValue).then(X_=>{O_.value=v_.input==="number"?`${parseFloat(X_)||0}`:`${X_}`,RE(O_),O_.focus(),__.hideLoading()}).catch(X_=>{e_(`Error in inputValue promise: ${X_}`),O_.value="",RE(O_),O_.focus(),__.hideLoading()})},iM={select:(__,v_,O_)=>{const X_=N0(__,_i.select),lE=(HE,J0,kT)=>{const fT=document.createElement("option");fT.value=kT,u0(fT,J0),fT.selected=f1(kT,O_.inputValue),HE.appendChild(fT)};v_.forEach(HE=>{const J0=HE[0],kT=HE[1];if(Array.isArray(kT)){const fT=document.createElement("optgroup");fT.label=J0,fT.disabled=!1,X_.appendChild(fT),kT.forEach(XI=>lE(fT,XI[1],XI[0]))}else lE(X_,kT,J0)}),X_.focus()},radio:(__,v_,O_)=>{const X_=N0(__,_i.radio);v_.forEach(HE=>{const J0=HE[0],kT=HE[1],fT=document.createElement("input"),XI=document.createElement("label");fT.type="radio",fT.name=_i.radio,fT.value=J0,f1(J0,O_.inputValue)&&(fT.checked=!0);const ZI=document.createElement("span");u0(ZI,kT),ZI.className=_i.label,XI.appendChild(fT),XI.appendChild(ZI),X_.appendChild(XI)});const lE=X_.querySelectorAll("input");lE.length&&lE[0].focus()}},xO=__=>{const v_=[];return typeof Map<"u"&&__ instanceof Map?__.forEach((O_,X_)=>{let lE=O_;typeof lE=="object"&&(lE=xO(lE)),v_.push([X_,lE])}):Object.keys(__).forEach(O_=>{let X_=__[O_];typeof X_=="object"&&(X_=xO(X_)),v_.push([O_,X_])}),v_},f1=(__,v_)=>v_&&v_.toString()===__.toString(),xN=__=>{const v_=_t.innerParams.get(__);__.disableButtons(),v_.input?g1(__,"confirm"):LO(__,!0)},m1=__=>{const v_=_t.innerParams.get(__);__.disableButtons(),v_.returnInputValueOnDeny?g1(__,"deny"):LN(__,!1)},_1=(__,v_)=>{__.disableButtons(),v_(lR.cancel)},g1=(__,v_)=>{const O_=_t.innerParams.get(__);if(!O_.input){e_(`The "input" parameter is needed to be set when using returnInputValueOn${_d(v_)}`);return}const X_=EP(__,O_);O_.inputValidator?v1(__,X_,v_):__.getInput().checkValidity()?v_==="deny"?LN(__,X_):LO(__,X_):(__.enableButtons(),__.showValidationMessage(O_.validationMessage))},v1=(__,v_,O_)=>{const X_=_t.innerParams.get(__);__.disableInput(),Promise.resolve().then(()=>l_(X_.inputValidator(v_,X_.validationMessage))).then(HE=>{__.enableButtons(),__.enableInput(),HE?__.showValidationMessage(HE):O_==="deny"?LN(__,v_):LO(__,v_)})},LN=(__,v_)=>{const O_=_t.innerParams.get(__||void 0);O_.showLoaderOnDeny&&QR(Y_()),O_.preDeny?(_t.awaitingPromise.set(__||void 0,!0),Promise.resolve().then(()=>l_(O_.preDeny(v_,O_.validationMessage))).then(lE=>{lE===!1?(__.hideLoading(),OO(__)):__.close({isDenied:!0,value:typeof lE>"u"?v_:lE})}).catch(lE=>CS(__||void 0,lE))):__.close({isDenied:!0,value:v_})},MN=(__,v_)=>{__.close({isConfirmed:!0,value:v_})},CS=(__,v_)=>{__.rejectPromise(v_)},LO=(__,v_)=>{const O_=_t.innerParams.get(__||void 0);O_.showLoaderOnConfirm&&QR(),O_.preConfirm?(__.resetValidationMessage(),_t.awaitingPromise.set(__||void 0,!0),Promise.resolve().then(()=>l_(O_.preConfirm(v_,O_.validationMessage))).then(lE=>{_w(G_())||lE===!1?(__.hideLoading(),OO(__)):MN(__,typeof lE>"u"?v_:lE)}).catch(lE=>CS(__||void 0,lE))):MN(__,v_)},MO=(__,v_,O_)=>{_t.innerParams.get(__).toast?oM(__,v_,O_):(ZR(v_),sM(v_),aM(__,v_,O_))},oM=(__,v_,O_)=>{v_.popup.onclick=()=>{const X_=_t.innerParams.get(__);X_&&(y1(X_)||X_.timer||X_.input)||O_(lR.close)}},y1=__=>__.showConfirmButton||__.showDenyButton||__.showCancelButton||__.showCloseButton;let DO=!1;const ZR=__=>{__.popup.onmousedown=()=>{__.container.onmouseup=function(v_){__.container.onmouseup=void 0,v_.target===__.container&&(DO=!0)}}},sM=__=>{__.container.onmousedown=()=>{__.popup.onmouseup=function(v_){__.popup.onmouseup=void 0,(v_.target===__.popup||__.popup.contains(v_.target))&&(DO=!0)}}},aM=(__,v_,O_)=>{v_.container.onclick=X_=>{const lE=_t.innerParams.get(__);if(DO){DO=!1;return}X_.target===v_.container&&h_(lE.allowOutsideClick)&&O_(lR.backdrop)}},E1=__=>typeof __=="object"&&__.jquery,OT=__=>__ instanceof Element||E1(__),SP=__=>{const v_={};return typeof __[0]=="object"&&!OT(__[0])?Object.assign(v_,__[0]):["title","html","icon"].forEach((O_,X_)=>{const lE=__[X_];typeof lE=="string"||OT(lE)?v_[O_]=lE:lE!==void 0&&e_(`Unexpected type of ${O_}! Expected "string" or "Element", got ${typeof lE}`)}),v_};function wP(){const __=this;for(var v_=arguments.length,O_=new Array(v_),X_=0;X_<v_;X_++)O_[X_]=arguments[X_];return new __(...O_)}function b1(__){class v_ extends this{_main(X_,lE){return super._main(X_,Object.assign({},__,lE))}}return v_}const S1=()=>y0.timeout&&y0.timeout.getTimerLeft(),kR=()=>{if(y0.timeout)return pN(),y0.timeout.stop()},zI=()=>{if(y0.timeout){const __=y0.timeout.start();return OR(__),__}},cM=()=>{const __=y0.timeout;return __&&(__.running?kR():zI())},uM=__=>{if(y0.timeout){const v_=y0.timeout.increase(__);return OR(v_,!0),v_}},TP=()=>y0.timeout&&y0.timeout.isRunning();let TI=!1;const ET={};function PO(){let __=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";ET[__]=this,TI||(document.body.addEventListener("click",RP),TI=!0)}const RP=__=>{for(let v_=__.target;v_&&v_!==document;v_=v_.parentNode)for(const O_ in ET){const X_=v_.getAttribute(O_);if(X_){ET[O_].fire({template:X_});return}}};var IP=Object.freeze({__proto__:null,argsToParams:SP,bindClickHandler:PO,clickCancel:UL,clickConfirm:RN,clickDeny:u1,enableLoading:QR,fire:wP,getActions:Q_,getCancelButton:x_,getCloseButton:aE,getConfirmButton:I_,getContainer:f_,getDenyButton:Y_,getFocusableElements:kE,getFooter:K_,getHtmlContainer:A_,getIcon:C_,getIconContent:j_,getImage:$_,getInputLabel:z_,getLoader:B_,getPopup:R_,getProgressSteps:q_,getTimerLeft:S1,getTimerProgressBar:rE,getTitle:W_,getValidationMessage:G_,increaseTimer:uM,isDeprecatedParameter:d1,isLoading:d0,isTimerRunning:TP,isUpdatableParameter:ON,isValidParameter:GI,isVisible:RO,mixin:b1,resumeTimer:zI,showLoading:QR,stopTimer:kR,toggleTimer:cM});class CP{constructor(v_,O_){this.callback=v_,this.remaining=O_,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(v_){const O_=this.running;return O_&&this.stop(),this.remaining+=v_,O_&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const lM=["swal-title","swal-html","swal-footer"],AP=__=>{const v_=typeof __.template=="string"?document.querySelector(__.template):__.template;if(!v_)return{};const O_=v_.content;return US(O_),Object.assign(KI(O_),eE(O_),fE(O_),cE(O_),jE(O_),l0(O_),G0(O_,lM))},KI=__=>{const v_={};return Array.from(__.querySelectorAll("swal-param")).forEach(X_=>{Y0(X_,["name","value"]);const lE=X_.getAttribute("name"),HE=X_.getAttribute("value");typeof GS[lE]=="boolean"?v_[lE]=HE!=="false":typeof GS[lE]=="object"?v_[lE]=JSON.parse(HE):v_[lE]=HE}),v_},eE=__=>{const v_={};return Array.from(__.querySelectorAll("swal-function-param")).forEach(X_=>{const lE=X_.getAttribute("name"),HE=X_.getAttribute("value");v_[lE]=new Function(`return ${HE}`)()}),v_},fE=__=>{const v_={};return Array.from(__.querySelectorAll("swal-button")).forEach(X_=>{Y0(X_,["type","color","aria-label"]);const lE=X_.getAttribute("type");v_[`${lE}ButtonText`]=X_.innerHTML,v_[`show${_d(lE)}Button`]=!0,X_.hasAttribute("color")&&(v_[`${lE}ButtonColor`]=X_.getAttribute("color")),X_.hasAttribute("aria-label")&&(v_[`${lE}ButtonAriaLabel`]=X_.getAttribute("aria-label"))}),v_},cE=__=>{const v_={},O_=__.querySelector("swal-image");return O_&&(Y0(O_,["src","width","height","alt"]),O_.hasAttribute("src")&&(v_.imageUrl=O_.getAttribute("src")),O_.hasAttribute("width")&&(v_.imageWidth=O_.getAttribute("width")),O_.hasAttribute("height")&&(v_.imageHeight=O_.getAttribute("height")),O_.hasAttribute("alt")&&(v_.imageAlt=O_.getAttribute("alt"))),v_},jE=__=>{const v_={},O_=__.querySelector("swal-icon");return O_&&(Y0(O_,["type","color"]),O_.hasAttribute("type")&&(v_.icon=O_.getAttribute("type")),O_.hasAttribute("color")&&(v_.iconColor=O_.getAttribute("color")),v_.iconHtml=O_.innerHTML),v_},l0=__=>{const v_={},O_=__.querySelector("swal-input");O_&&(Y0(O_,["type","label","placeholder","value"]),v_.input=O_.getAttribute("type")||"text",O_.hasAttribute("label")&&(v_.inputLabel=O_.getAttribute("label")),O_.hasAttribute("placeholder")&&(v_.inputPlaceholder=O_.getAttribute("placeholder")),O_.hasAttribute("value")&&(v_.inputValue=O_.getAttribute("value")));const X_=Array.from(__.querySelectorAll("swal-input-option"));return X_.length&&(v_.inputOptions={},X_.forEach(lE=>{Y0(lE,["value"]);const HE=lE.getAttribute("value"),J0=lE.innerHTML;v_.inputOptions[HE]=J0})),v_},G0=(__,v_)=>{const O_={};for(const X_ in v_){const lE=v_[X_],HE=__.querySelector(lE);HE&&(Y0(HE,[]),O_[lE.replace(/^swal-/,"")]=HE.innerHTML.trim())}return O_},US=__=>{const v_=lM.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(__.children).forEach(O_=>{const X_=O_.tagName.toLowerCase();v_.includes(X_)||_m(`Unrecognized element <${X_}>`)})},Y0=(__,v_)=>{Array.from(__.attributes).forEach(O_=>{v_.indexOf(O_.name)===-1&&_m([`Unrecognized attribute "${O_.name}" on <${__.tagName.toLowerCase()}>.`,`${v_.length?`Allowed attributes are: ${v_.join(", ")}`:"To set the value, use HTML within the element."}`])})},w1=10,OP=__=>{const v_=f_(),O_=R_();typeof __.willOpen=="function"&&__.willOpen(O_);const lE=window.getComputedStyle(document.body).overflowY;JI(v_,O_,__),setTimeout(()=>{T1(v_,O_)},w1),xE()&&(R1(v_,__.scrollbarPadding,lE),HL()),!YE()&&!y0.previousActiveElement&&(y0.previousActiveElement=document.activeElement),typeof __.didOpen=="function"&&setTimeout(()=>__.didOpen(O_)),zE(v_,_i["no-transition"])},NT=__=>{const v_=R_();if(__.target!==v_)return;const O_=f_();v_.removeEventListener(bI,NT),O_.style.overflowY="auto"},T1=(__,v_)=>{bI&&tR(v_)?(__.style.overflowY="hidden",v_.addEventListener(bI,NT)):__.style.overflowY="auto"},R1=(__,v_,O_)=>{dP(),v_&&O_!=="hidden"&&CN(),setTimeout(()=>{__.scrollTop=0})},JI=(__,v_,O_)=>{SE(__,O_.showClass.backdrop),v_.style.setProperty("opacity","0","important"),RE(v_,"grid"),setTimeout(()=>{SE(v_,O_.showClass.popup),v_.style.removeProperty("opacity")},w1),SE([document.documentElement,document.body],_i.shown),O_.heightAuto&&O_.backdrop&&!O_.toast&&SE([document.documentElement,document.body],_i["height-auto"])};var jO={email:(__,v_)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(__)?Promise.resolve():Promise.resolve(v_||"Invalid email address"),url:(__,v_)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(__)?Promise.resolve():Promise.resolve(v_||"Invalid URL")};function I1(__){__.inputValidator||Object.keys(jO).forEach(v_=>{__.input===v_&&(__.inputValidator=jO[v_])})}function q0(__){(!__.target||typeof __.target=="string"&&!document.querySelector(__.target)||typeof __.target!="string"&&!__.target.appendChild)&&(_m('Target parameter is not valid, defaulting to "body"'),__.target="body")}function NP(__){I1(__),__.showLoaderOnConfirm&&!__.preConfirm&&_m(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),q0(__),typeof __.title=="string"&&(__.title=__.title.split(`
`).join("<br />")),TL(__)}let oR;class xR{constructor(){if(typeof window>"u")return;oR=this;for(var v_=arguments.length,O_=new Array(v_),X_=0;X_<v_;X_++)O_[X_]=arguments[X_];const lE=Object.freeze(this.constructor.argsToParams(O_));Object.defineProperties(this,{params:{value:lE,writable:!1,enumerable:!0,configurable:!0}});const HE=oR._main(oR.params);_t.promise.set(this,HE)}_main(v_){let O_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};qI(Object.assign({},O_,v_)),y0.currentInstance&&(y0.currentInstance._destroy(),xE()&&GL()),y0.currentInstance=oR;const X_=kP(v_,O_);NP(X_),Object.freeze(X_),y0.timeout&&(y0.timeout.stop(),delete y0.timeout),clearTimeout(y0.restoreFocusTimeout);const lE=C1(oR);return a1(oR,X_),_t.innerParams.set(oR,X_),dM(oR,lE,X_)}then(v_){return _t.promise.get(this).then(v_)}finally(v_){return _t.promise.get(this).finally(v_)}}const dM=(__,v_,O_)=>new Promise((X_,lE)=>{const HE=J0=>{__.close({isDismissed:!0,dismiss:J0})};SI.swalPromiseResolve.set(__,X_),SI.swalPromiseReject.set(__,lE),v_.confirmButton.onclick=()=>{xN(__)},v_.denyButton.onclick=()=>{m1(__)},v_.cancelButton.onclick=()=>{_1(__,HE)},v_.closeButton.onclick=()=>{HE(lR.close)},MO(__,v_,HE),IN(__,y0,O_,HE),yP(__,O_),OP(O_),QI(y0,O_,HE),eI(v_,O_),setTimeout(()=>{v_.container.scrollTop=0})}),kP=(__,v_)=>{const O_=AP(__),X_=Object.assign({},GS,v_,O_,__);return X_.showClass=Object.assign({},GS.showClass,X_.showClass),X_.hideClass=Object.assign({},GS.hideClass,X_.hideClass),X_},C1=__=>{const v_={popup:R_(),container:f_(),actions:Q_(),confirmButton:I_(),denyButton:Y_(),cancelButton:x_(),loader:B_(),closeButton:aE(),validationMessage:G_(),progressSteps:q_()};return _t.domCache.set(__,v_),v_},QI=(__,v_,O_)=>{const X_=rE();VE(X_),v_.timer&&(__.timeout=new CP(()=>{O_("timer"),delete __.timeout},v_.timer),v_.timerProgressBar&&(RE(X_),QE(X_,v_,"timerProgressBar"),setTimeout(()=>{__.timeout&&__.timeout.running&&OR(v_.timer)})))},eI=(__,v_)=>{if(!v_.toast){if(!h_(v_.allowEnterKey)){hM();return}A1(__,v_)||IO(-1,1)}},A1=(__,v_)=>v_.focusDeny&&_w(__.denyButton)?(__.denyButton.focus(),!0):v_.focusCancel&&_w(__.cancelButton)?(__.cancelButton.focus(),!0):v_.focusConfirm&&_w(__.confirmButton)?(__.confirmButton.focus(),!0):!1,hM=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|xn--p1ai)$/)){const __=new Date,v_=localStorage.getItem("swal-initiation");v_?(__.getTime()-Date.parse(v_))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const O_=document.createElement("audio");O_.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",O_.loop=!0,document.body.appendChild(O_),setTimeout(()=>{O_.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${__}`)}Object.assign(xR.prototype,h1),Object.assign(xR,IP),Object.keys(h1).forEach(__=>{xR[__]=function(){if(oR)return oR[__](...arguments)}}),xR.DismissReason=lR,xR.version="11.7.3";const tI=xR;return tI.default=tI,tI}),typeof commonjsGlobal$1<"u"&&commonjsGlobal$1.Sweetalert2&&(commonjsGlobal$1.swal=commonjsGlobal$1.sweetAlert=commonjsGlobal$1.Swal=commonjsGlobal$1.SweetAlert=commonjsGlobal$1.Sweetalert2),typeof document<"u"&&function(_t,Vt){var Wt=_t.createElement("style");if(_t.getElementsByTagName("head")[0].appendChild(Wt),Wt.styleSheet)Wt.styleSheet.disabled||(Wt.styleSheet.cssText=Vt);else try{Wt.innerHTML=Vt}catch{Wt.innerText=Vt}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:rgba(0,0,0,0) !important}.swal2-container.swal2-top-start,.swal2-container.swal2-center-start,.swal2-container.swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}.swal2-container.swal2-top,.swal2-container.swal2-center,.swal2-container.swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}.swal2-container.swal2-top-end,.swal2-container.swal2-center-end,.swal2-container.swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-start>.swal2-popup,.swal2-container.swal2-center-left>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-start>.swal2-popup,.swal2-container.swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-row>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none !important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:none}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:none}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:rgba(0,0,0,0);color:#f27474}.swal2-close:focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-input,.swal2-file,.swal2-textarea,.swal2-select,.swal2-radio,.swal2-checkbox{margin:1em 2em 3px}.swal2-input,.swal2-file,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-input.swal2-inputerror,.swal2-file.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}.swal2-input:focus,.swal2-file:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-input::placeholder,.swal2-file::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-radio,.swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-radio label,.swal2-checkbox label{margin:0 .6em;font-size:1.125em}.swal2-radio input,.swal2-checkbox input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')})(sweetalert2_all);const Swal=sweetalert2_allExports;function Register(){const $=useNavigate(),[_e,_t]=reactExports.useState({code:"+91"}),[Vt,Wt]=reactExports.useState(!1);function _i(_l){const{name:_d,value:_m}=_l.target;_t({..._e,[_d]:_m})}function _s(){Wt(!Vt)}async function _c(_l){_l.preventDefault();try{if(!_e.phone||!_e.name||!_e.password)Q$1.error("Please fill in the credentials");else if(isValidName(_e.name)||Q$1.warn("Enter a valid name"),validatePhone(_e.phone)||Q$1.warn("Enter valid phone number"),validatePassword(_e.password)&&Q$1.warn(validatePassword(_e.password)),isValidName(_e.name)&&validatePhone(_e.phone)&&!validatePassword(_e.password)){_e.isDoctor=Vt;const{phone:_d}=_e,_m=await docPost("/existDoc",{phone:_d}),e_=await postForm("/existUser",{phone:_d});Vt?_m.data.success?e_.data.success||Q$1.error("The entered number is already registered as a user"):Q$1(_m.data.message):e_.data.success?_m.data.success||Q$1.error("The entered number is already registered as a doctor"):Q$1.success(e_.data.message),_m.data.success&&e_.data.success&&onSignInSubmit(_e.code,_e.phone).then(()=>{Swal.fire("OTP Sent!","Please check your phone","success").then(()=>{$("/otpSubmit",{state:_e})})})}}catch(_d){console.log(_d)}}return jsx("div",{children:jsx("section",{className:"bg-gray-50 dark:bg-gray-900",children:jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 mx-auto md:h-screen lg:py-0",children:[jsx("a",{href:"#",className:"flex items-center text-2xl font-semibold text-gray-00 dark:text-white",children:jsx("img",{className:"w-auto h-24 mr-2",src:"./src/assets/logo.png",alt:"logo"})}),jsx("div",{className:"w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700",children:jsxs("div",{className:"p-6 space-y-4 md:space-y-4",children:[jsxs("div",{className:"flex",children:[jsx("h1",{className:"text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white",children:"Join Us"}),jsx("span",{className:"ml-36 mr-2 text-sm font-medium text-gray-900 dark:text-gray-300",children:"Are you a Doctor?"}),jsxs("label",{className:"relative items-center cursor-pointer ",children:[jsx("input",{type:"checkbox",onChange:_s,value:"",className:"sr-only peer"}),jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),jsxs("form",{className:"space-y-4 md:space-y-",onSubmit:_c,children:[jsxs("div",{children:[jsx("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Full Name"}),jsx("input",{type:"name",name:"name",id:"name",className:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"eg: Joe Doe",required:"",onChange:_i})]}),jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",htmlFor:"phone",children:"Phone Number"}),jsxs("div",{className:"flex",children:[jsxs("select",{id:"countries",name:"code",className:"flex-shrink-0 z-10 inline-flex items-center text-sm font-medium text-gray-500 bg-gray-100 border-gray-300 rounded-l-lg hover:bg-gray-200 focus:ring-4 focus focus:outline-none focus:ring-gray-100 dark:bg-gray-700 dark:hover:bg-gray-600 dark:focus:ring-gray-700 dark:text-white dark:border-gray-600",onChange:_i,children:[jsx("option",{defaultValue:"+91",children:"+91"}),jsx("option",{value:"+1",children:"+1"}),jsx("option",{value:"+92",children:"+92"}),jsx("option",{value:"+86",children:"+86"}),jsx("option",{value:"+81",children:"+81"})]}),jsx("input",{type:"",name:"phone",id:"number",placeholder:"eg: 1234567890",className:"inline-flex w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-400 dark:bg-gray-600 dark:hover:bg-gray-600 dark:hover:text-white rounded-r-lg",required:"",onChange:_i})]}),jsxs("div",{children:[jsx("label",{htmlFor:"confirm-password",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Password"}),jsx("input",{type:"password",name:"password",id:"password",placeholder:"",className:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:"",onChange:_i})]}),jsx("div",{className:"flex items-start",children:jsx("div",{id:"recaptcha-container",children:" "})}),jsx("button",{type:"submit",className:"w-full text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800",children:"Register"}),jsxs("p",{className:"text-sm font-light text-gray-500 dark:text-gray-400",children:["Already have an account?",jsx("a",{href:"/login",className:"font-medium text-primary-600 hover:underline dark:text-primary-500",children:"Login here"})]})]})]})})]})})})}const ReactToastify="",App$1="";function ProtectedRoute({children:$}){var _s;const _e=useDispatch(),_t=localStorage.getItem("token"),{data:Vt,isSuccess:Wt}=useGetUserDetailsQuery(),_i=useDocCheckQuery();if((_s=_i==null?void 0:_i.data)!=null&&_s.success){const _c=_i==null?void 0:_i.data.doc;localStorage.setItem("check",JSON.stringify(_c))}if(Wt&&_e(setUser(Vt.data)),_t)try{if(Vt&&!Vt.success)return localStorage.clear(),jsx(Navigate,{to:"/login"})}catch(_c){console.log("error in protected route",_c)}return localStorage.getItem("token")?$:jsx(Navigate,{to:"/login"})}function publicRoute({children:$}){return localStorage.getItem("token")?jsx(Navigate,{to:"/"}):$}function OtpInput(){const _e=useLocation().state,_t=useNavigate(),[Vt,Wt]=reactExports.useState(!1),_i=[reactExports.useRef(null),reactExports.useRef(null),reactExports.useRef(null),reactExports.useRef(null),reactExports.useRef(null),reactExports.useRef(null)],[_s,_c]=reactExports.useState("");function _l(_m,e_){const t_=_m.target;_m.key==="Backspace"&&e_>0&&!t_.value&&_i[e_-1].current.focus(),t_.value.length>0&&e_<_i.length-1&&_i[e_+1].current.focus();let i_="";_i.forEach(c_=>{i_+=c_.current.value}),_c(i_)}function _d(){try{verify(_s).then(()=>{Q$1("OTP verified"),postForm("/register",_e).then(()=>{_t("/login")})}).catch(_m=>{alert(_m)})}catch{Wt(!0)}}return Vt?jsx("p",{children:"sorry signup failed"}):jsx("div",{children:jsx("section",{className:"bg-gray-50 dark:bg-gray-900",children:jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 mx-auto h-screen lg:py-0",children:[jsx("a",{href:"/",className:"flex items-center text-2xl font-semibold text-gray-00 dark:text-white",children:jsx("img",{className:"w-auto h-24 mr-2",src:"./src/assets/logo.png",alt:"logo"})}),jsx("div",{className:"w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700",children:jsxs("div",{className:"p-6 space-y-4 md:space-y-4",children:[jsx("h1",{className:"text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white text-center",children:"Enter Your OTP"}),jsxs("form",{className:"space-y-4",children:[jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Your One Time Pssword has been send to your phone. Please enter the number below"}),jsx("div",{className:"flex mt-8",children:_i.map((_m,e_)=>jsx("input",{className:" w-full py-2 text-center text-gray-700 hover:bg-gray-100 dark:text-gray-400 dark:bg-gray-600 dark:hover:bg-gray-600 dark:hover:text-white rounded-lg mr-1",ref:_m,type:"text",maxLength:1,onKeyUp:t_=>_l(t_,e_)},e_))}),jsx("div",{className:"flex justify-center pt-3",children:jsx("button",{type:"button",className:"w-32 text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800",onClick:_d,children:"validate"})})]})]})})]})})})}function DoctorForm(){const $=useNavigate(),_e=JSON.parse(localStorage.getItem("check"));_e.isProfileComplete&&$("/doctor");let _t;const{data:Vt,isSuccess:Wt}=useGetUserDetailsQuery();Wt&&(_t=Vt==null?void 0:Vt.data);const _i=useDispatch(),[_s,_c]=reactExports.useState(!1),[_l,_d]=reactExports.useState({}),[_m,e_]=reactExports.useState(""),[t_,i_]=reactExports.useState({speciality:"",regYear:"",qualification:"",council:"",hospital:"",regNumber:""});function c_(y_){const{name:l_,value:d_}=y_.target;_d({..._l,[l_]:d_})}async function h_(y_){y_.preventDefault();try{if(!_l.speciality||!_l.qualification||!_l.council||!_l.Fee||!_l.regYear||!_l.regNumber||!_m)Q$1.error("Please fill in the details");else if(isValidText(_l.speciality)?isValidText(_l.qualification)?isValidText(_l.council)?isValidText(_l.hospital)?isValidRegNumber(_l.regNumber)?(i_(l_=>({...l_,speciality:"",qualification:"",council:"",hospital:"",regNumber:""})),_c(!0)):(i_(l_=>({...l_,regNumber:"Enter Valid Registration Number"})),_c(!1)):(i_(l_=>({...l_,hospital:"Enter Valid Hospital Name"})),_c(!1)):(i_(l_=>({...l_,council:"Enter Valid Council Name"})),_c(!1)):(i_(l_=>({...l_,qualification:"Enter Valid Qualification"})),_c(!1)):(i_(l_=>({...l_,speciality:"Enter Valid Speciality"})),_c(!1)),_s){_i(showloading());const l_=new FormData;for(const d_ in _l)l_.append(d_,_l[d_]);l_.append("image",_m),imageForm(`/profilecomplete/${_t.phone}`,l_).then(d_=>{_i(hideLoading()),console.log(d_),$("/pendingVerification"),_e.isProfileComplete=!0,localStorage.setItem("check",JSON.stringify(_e))})}}catch(l_){console.log(l_),_i(hideLoading())}}return jsx("div",{children:jsx(Navbar,{children:jsxs("div",{className:"flex flex-col p-4",children:[jsx("h4",{className:"font-semibold",children:"Profile Doctor"}),jsx("hr",{className:"border-t-2 border-gray-300 my-2"}),jsx("h1",{className:"text-3xl font-semibold text-blue-900",children:"Hello Let's build your profile"}),jsx("form",{action:"",className:"mt-6",onSubmit:h_,children:jsxs("div",{className:"flex justify-between mx-16 items-center",children:[jsxs("div",{className:"flex  flex-col",children:[jsxs("div",{className:"mt-6",children:[jsx("label",{className:"block font-semibold mb-2 ml-1",children:"Speciality"}),jsx("input",{name:"speciality",className:"inline-flex w-80 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg border-2",onChange:c_}),jsx("span",{className:"block text-red-500 font-semibold",children:t_.speciality})]}),jsxs("div",{className:"mt-6",children:[jsx("label",{className:"block font-semibold mb-2 ml-1",children:"Educational Qualification"}),jsx("input",{name:"qualification",className:"inline-flex w-80 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg border-2 ",onChange:c_}),jsx("span",{className:"block text-red-500 font-semibold",children:t_.qualification})]}),jsxs("div",{className:"mt-6",children:[jsx("label",{className:"block font-semibold mb-2 ml-1",children:"Registration Council"}),jsx("input",{name:"council",className:"inline-flex w-80 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg border-2 ",onChange:c_}),jsx("span",{className:"block text-red-500 font-semibold",children:t_.council})]})]}),jsxs("div",{className:"flex  flex-col",children:[jsxs("div",{className:"mt-6",children:[jsx("label",{className:"block font-semibold mb-2 ml-1",children:"Fee Per Consultation"}),jsx("input",{name:"Fee",className:"inline-flex w-80 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg border-2 ",onChange:c_}),jsx("span",{className:"block text-red-500 font-semibold",children:t_.hospital})]}),jsxs("div",{className:"mt-6",children:[jsx("label",{className:"block font-semibold mb-2 ml-1",children:"Medical Registration Number"}),jsx("input",{name:"regNumber",className:"inline-flex w-80 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg border-2 ",onChange:c_}),jsx("span",{className:"block text-red-500 font-semibold",children:t_.regNumber})]}),jsxs("div",{className:"mt-6",children:[jsx("label",{className:"block font-semibold mb-2 ml-1",children:"Registration Year"}),jsx("input",{name:"regYear",className:"inline-flex w-80 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg border-2 ",onChange:c_}),jsx("span",{className:"block text-red-500 font-semibold",children:t_.regYear})]})]}),jsx("div",{children:jsxs("div",{className:"mt-6 flex flex-col",children:[jsx("label",{className:"block font-semibold mb-2 ml-1",children:"Upload Profile picture"}),jsx("input",{type:"file",onChange:y_=>{e_(y_.target.files[0])},name:"profileImage",className:"inline-flex w-80 px-4 py-2 text-sm text-gray-700 bg-white hover:bg-gray-100 rounded-lg border-2 border-gray-300 focus:outline-none focus:border-blue-500"}),jsx("span",{className:"block text-red-500 font-semibold",children:t_.img}),jsx("button",{className:"mt-3 rounded bg-blue-900 text-white font-bold py-2 w-1/6 fixed md:bottom-32",type:"submit",children:"Submit"})]})})]})})]})})})}const spinner=()=>jsx("div",{className:"preloader loaded-success fixed top-0 inset-0 bg-white bg-opacity-40 z-50",children:jsx("div",{className:"absolute left-1/2 top-1/2 transform -translate-y-1/2",children:jsx("div",{className:"relative mx-auto my-12",children:jsx("div",{className:"inline-block",children:jsxs("span",{className:"relative flex h-10 w-10",children:[jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),jsx("span",{className:"relative inline-flex rounded-full h-10 w-10 bg-blue-800"})]})})})})});function DocterPendingVerification(){const $=useNavigate(),{data:_e}=useGetUserDetailsQuery();JSON.parse(localStorage.getItem("check")).isVerified&&$("/doctor");const Vt=_e==null?void 0:_e.data;return Vt!=null&&Vt.isVerified&&$("/doctor"),jsx(Navbar,{children:jsx("div",{className:"justify-center items-center flex md:h-[89vh] h-[92vh] bg-gray-100",children:jsxs("div",{className:"max-w-lg rounded overflow-hidden ",children:[jsx("img",{src:"/src/assets/verifypending.png",className:"mx-auto w-48",alt:"Sunset in the mountains"}),jsxs("div",{className:"px-6 py-4",children:[jsxs("div",{className:"mb-2",children:[jsx("h1",{className:"font-semibold text-blue-800 text-2xl mb-2 text-center",children:"Your account is being verified"}),jsx(m$1,{className:"text-left ml-5 text-md font-semibold",sequence:["Verification in progress. Thank you for your patience.","Almost there! We're verifying your account now.","We're processing your account. Please stand by."],speed:90,deletionSpeed:80,repeat:1/0})]}),jsx("p",{className:"text-gray-400 text-sm text-center",children:`Your account's is currently undergoing verification by our team. The
              purpose of this verification process is likely to confirm
              your identity, qualifications, or other relevant information
              to ensure that they meet the necessary standards or requirements
              for the professional role. Once the verification is complete,
              you should be able to access the relevant systems or
              services associated with your account.`})]})]})})})}const navElements$1=[{id:0,title:"Dashboard",icon:jsx("ion-icon",{name:"apps"}),route:"/"},{id:1,title:"Profile",icon:jsx("ion-icon",{name:"person"}),route:"/doctor/profile"},{id:2,title:"Availability",icon:jsx("ion-icon",{name:"checkmark-done"}),route:"/doctor/availability"},{id:3,title:"Appointments",icon:jsx("ion-icon",{name:"chatbubbles"}),route:"/doctor/appointments"},{id:3,title:"Appointment History",icon:jsx("ion-icon",{name:"clipboard"}),route:"/doctor/appointmentHistory"}];function SideBar$1(){return jsx("nav",{className:"col-span-2 fixed bg-blue-900  md:block border-r border-gray-200 min-h-[90vh] w-[80px] xl:w-[225px] pt-8 px-1 flex flex-col items-start justify-between",style:{overflow:"hidden"},children:jsxs("div",{className:"space-y-8 w-full ",children:[navElements$1.slice(0,4).map($=>jsx(NavItem$1,{link:$},$.id)),jsx("div",{className:"w-full border-t border-gray-200"}),navElements$1.slice(4,6).map($=>jsx(NavItem$1,{link:$},$.id))]})})}function NavItem$1({link:$}){const _e=useNavigate(),_t=40;return jsxs("div",{onClick:()=>{_e($.route)},className:`w-full flex items-center justify-start space-x-8 px-5 cursor-pointer
       group hover:border-gray-900 border-l-4  ${_t===$.id&&"border-gray-900"} `,children:[jsxs("span",{className:"text-white",children:[" ",$.icon]}),jsx("h1",{className:`text-white font-semibold group-hover:text-black xl:flex hidden ${_t===$.id&&"text-black "}} `,children:$.title})]},$.id)}function DocNavbar({children:$}){const _e=useNavigate(),_t=useSelector(_l=>_l.user.user),Vt=[{name:"Appointments",link:"/doctor/appointments"},{name:"Medicines",link:"/"},{name:_t==null?void 0:_t.name.toUpperCase().split(" ")[0],link:"/"}],[Wt,_i]=reactExports.useState(!1),_s=()=>{_t!=null&&_t.isDoctor&&_t!=null&&_t.Duty&&docGet("/dutyon"),localStorage.removeItem("token"),localStorage.removeItem("check"),_e("/login")};return jsx("div",{className:"h-screen",children:jsxs("div",{className:"flex flex-col",children:[jsx("div",{className:"shadow-md w-full fixed top-0 left-0",children:jsxs("div",{className:"md:flex items-center justify-between bg-blue-900",children:[jsx("div",{className:"font-bold text-2xl cursor-pointer flex items-center font-[poppins] text-white",children:jsx("span",{className:"text-3xl mr-1 bg-white rounded",children:jsx("img",{src:"/logo.png",alt:"",className:"h-16"})})}),jsx("div",{className:"md:hidden",children:jsx("button",{type:"button",className:"text-3xl text-white hover:text-purple-400 duration-500 focus:outline-none",onClick:()=>{_i(!Wt)},children:jsx("ion-icon",{name:"menu-outline"})})}),jsxs("ul",{className:`md:flex md:items-center mr-8 md:pb-0 pb-12 absolute md:static bg-blue-900 md:z-auto z-[-1] left-0 w-full md:w-auto md:pl-0 pl-9 transition-all duration-500 ease-in ${Wt?"top-20":"-top-72"} md:top-auto`,children:[Vt.map(_l=>jsx("li",{className:"md:ml-8 font-bold md:my-0 my-7 ",children:jsx("a",{href:_l.link,className:"text-white hover:text-purple-400 duration-500",children:_l.name})},_l.name)),jsxs("button",{type:"button",className:"text-2xl bg-blue-900 text-white font-[poppins] pt-2 px-3 rounded md:ml-8 hover:bg-blue-400 duration-500",onClick:_s,children:[jsx("ion-icon",{name:"log-out-outline"})," "]})]})]})}),jsxs("div",{className:"md:flex mt-16",children:[jsx(SideBar$1,{}),jsx("div",{className:"md:flex-1 md:ml-[225px]",children:$})]})]})})}const img="/assets/error-c0f6fafa.webp";function WentWrong(){return jsx(Navbar,{children:jsx("div",{className:"flex items-center justify-center",children:jsx("div",{className:"shadow-sm w-full md:w-[60%] justify-center box-border flex flex-col md:flex-row h-[65vh] md:mt-20 rounded-lg",children:jsx("img",{src:img,alt:"error msg"})})})})}function Dashboard(){const{data:$,isSuccess:_e,isLoading:_t}=useGetUserDetailsQuery(),Vt=$==null?void 0:$.data;return!_e&&!_t?jsx(WentWrong,{}):jsx("div",{className:" p-5",children:jsx("div",{className:"max-w-xl mx-aut",children:jsx("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:jsxs("div",{className:"bg-blue-100 rounded-lg p-4",children:[jsx("h3",{className:"text-lg font-bold mb-2",children:"Appointments Completed Till Now"}),jsxs("div",{className:"flex items-center",children:[jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-600 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm0-2a6 6 0 100-12 6 6 0 000 12zM9 7a1 1 0 012 0v4a1 1 0 11-2 0V7z",clipRule:"evenodd"})}),jsxs("p",{className:"font-semibold text-xl",children:[Vt==null?void 0:Vt.wallet.totalAppointments," Appointments Completed"]})]})]})})})})}function DocHome(){return jsx("div",{children:jsx(DocNavbar,{children:jsx(Dashboard,{})})})}function DocProfile(){const _e=new Date().toLocaleString("default",{month:"long"}),{data:_t,isSuccess:Vt,isLoading:Wt}=useDoctorProfileDataQuery(),_i=_t==null?void 0:_t.doctor,[_s,_c]=useWithdrawWalletAmountMutation(),_l=()=>{_s().then(()=>{Swal.fire({icon:"success",title:"Withdrawal Successful",text:"The amount has been transferred to your bank account."})}).catch(_d=>{Swal.fire({icon:"error",title:"Withdrawal Failed",text:"An error occurred while processing your withdrawal."})})};return!Vt&&!Wt?jsx(WentWrong,{}):jsx("div",{children:jsx(DocNavbar,{children:jsx("div",{className:"container mx-auto mt-8",children:jsxs("div",{className:"max-w-4xl mx-auto mt-20 bg-white shadow-lg p-8 rounded-md",children:[jsxs("div",{className:"flex items-center mb-4",children:[jsx("img",{className:"w-12 h-12 rounded-full mr-4",src:_i==null?void 0:_i.additionalDetails.profileImage,alt:"Profile"}),jsxs("div",{children:[jsxs("h2",{className:"text-2xl font-semibold",children:["Hi, ",_i==null?void 0:_i.name]}),jsx("p",{className:"text-gray-600",children:_i==null?void 0:_i.additionalDetails.speciality}),jsxs("p",{className:"text-gray-600",children:["Phone: ",_i==null?void 0:_i.phone]})]})]}),jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxs("div",{className:"bg-blue-100 p-4 rounded-md",children:[jsx("h3",{className:"text-lg font-semibold mb-2",children:"Total Appointments"}),jsx("p",{className:"text-2xl",children:_i==null?void 0:_i.wallet.totalAppointments})]}),jsxs("div",{className:"bg-yellow-100 p-4 rounded-md",children:[jsx("h3",{className:"text-lg font-semibold mb-2",children:"Pending Amount"}),jsxs("p",{className:"text-2xl",children:[" ",_i==null?void 0:_i.wallet.DueAmount," /-"]}),jsxs("p",{className:"text-sm font-extralight",children:["(due ",_e,")"]})]}),jsxs("div",{className:"bg-green-100 p-4 rounded-md",children:[jsx("h3",{className:"text-lg font-semibold mb-2",children:"Wallet Balance"}),jsxs("p",{className:"text-2xl",children:[" ",_i==null?void 0:_i.wallet.CurrentBalance," /-"]})]}),jsxs("div",{className:"bg-blue-500 text-white p-4 rounded-md flex flex-col justify-center items-center",children:[jsx("h3",{className:"text-lg font-semibold mb-2",children:"Withdraw Amount"}),(_i==null?void 0:_i.wallet.CurrentBalance)===0?jsx("button",{type:"button",className:"bg-gray-300 cursor-not-allowed text-gray-500 py-2 px-4 rounded-md mt-4",disabled:!0,children:"Withdraw"}):jsx("button",{type:"button",className:"bg-white text-blue-500 py-2 px-4 rounded-md mt-4",onClick:_l,children:"Withdraw"})]})]}),jsx("div",{className:"mt-4",children:jsxs("p",{className:"font-semibold text-xl",children:["Total Money Earned:  ",jsxs("span",{className:"text-blue-600",children:[_i==null?void 0:_i.wallet.amountWithdrawn," /-"]})]})})]})})})})}var dayjs_minExports={},dayjs_min={get exports(){return dayjs_minExports},set exports($){dayjs_minExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt()})(commonjsGlobal$1,function(){var _t=1e3,Vt=6e4,Wt=36e5,_i="millisecond",_s="second",_c="minute",_l="hour",_d="day",_m="week",e_="month",t_="quarter",i_="year",c_="date",h_="Invalid Date",y_=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,l_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(G_){var I_=["th","st","nd","rd"],x_=G_%100;return"["+G_+(I_[(x_-20)%10]||I_[x_]||I_[0])+"]"}},f_=function(G_,I_,x_){var Y_=String(G_);return!Y_||Y_.length>=I_?G_:""+Array(I_+1-Y_.length).join(x_)+G_},S_={s:f_,z:function(G_){var I_=-G_.utcOffset(),x_=Math.abs(I_),Y_=Math.floor(x_/60),z_=x_%60;return(I_<=0?"+":"-")+f_(Y_,2,"0")+":"+f_(z_,2,"0")},m:function G_(I_,x_){if(I_.date()<x_.date())return-G_(x_,I_);var Y_=12*(x_.year()-I_.year())+(x_.month()-I_.month()),z_=I_.clone().add(Y_,e_),B_=x_-z_<0,Q_=I_.clone().add(Y_+(B_?-1:1),e_);return+(-(Y_+(x_-z_)/(B_?z_-Q_:Q_-z_))||0)},a:function(G_){return G_<0?Math.ceil(G_)||0:Math.floor(G_)},p:function(G_){return{M:e_,y:i_,w:_m,d:_d,D:c_,h:_l,m:_c,s:_s,ms:_i,Q:t_}[G_]||String(G_||"").toLowerCase().replace(/s$/,"")},u:function(G_){return G_===void 0}},T_="en",R_={};R_[T_]=d_;var C_=function(G_){return G_ instanceof $_},j_=function G_(I_,x_,Y_){var z_;if(!I_)return T_;if(typeof I_=="string"){var B_=I_.toLowerCase();R_[B_]&&(z_=B_),x_&&(R_[B_]=x_,z_=B_);var Q_=I_.split("-");if(!z_&&Q_.length>1)return G_(Q_[0])}else{var K_=I_.name;R_[K_]=I_,z_=K_}return!Y_&&z_&&(T_=z_),z_||!Y_&&T_},W_=function(G_,I_){if(C_(G_))return G_.clone();var x_=typeof I_=="object"?I_:{};return x_.date=G_,x_.args=arguments,new $_(x_)},A_=S_;A_.l=j_,A_.i=C_,A_.w=function(G_,I_){return W_(G_,{locale:I_.$L,utc:I_.$u,x:I_.$x,$offset:I_.$offset})};var $_=function(){function G_(x_){this.$L=j_(x_.locale,null,!0),this.parse(x_)}var I_=G_.prototype;return I_.parse=function(x_){this.$d=function(Y_){var z_=Y_.date,B_=Y_.utc;if(z_===null)return new Date(NaN);if(A_.u(z_))return new Date;if(z_ instanceof Date)return new Date(z_);if(typeof z_=="string"&&!/Z$/i.test(z_)){var Q_=z_.match(y_);if(Q_){var K_=Q_[2]-1||0,rE=(Q_[7]||"0").substring(0,3);return B_?new Date(Date.UTC(Q_[1],K_,Q_[3]||1,Q_[4]||0,Q_[5]||0,Q_[6]||0,rE)):new Date(Q_[1],K_,Q_[3]||1,Q_[4]||0,Q_[5]||0,Q_[6]||0,rE)}}return new Date(z_)}(x_),this.$x=x_.x||{},this.init()},I_.init=function(){var x_=this.$d;this.$y=x_.getFullYear(),this.$M=x_.getMonth(),this.$D=x_.getDate(),this.$W=x_.getDay(),this.$H=x_.getHours(),this.$m=x_.getMinutes(),this.$s=x_.getSeconds(),this.$ms=x_.getMilliseconds()},I_.$utils=function(){return A_},I_.isValid=function(){return this.$d.toString()!==h_},I_.isSame=function(x_,Y_){var z_=W_(x_);return this.startOf(Y_)<=z_&&z_<=this.endOf(Y_)},I_.isAfter=function(x_,Y_){return W_(x_)<this.startOf(Y_)},I_.isBefore=function(x_,Y_){return this.endOf(Y_)<W_(x_)},I_.$g=function(x_,Y_,z_){return A_.u(x_)?this[Y_]:this.set(z_,x_)},I_.unix=function(){return Math.floor(this.valueOf()/1e3)},I_.valueOf=function(){return this.$d.getTime()},I_.startOf=function(x_,Y_){var z_=this,B_=!!A_.u(Y_)||Y_,Q_=A_.p(x_),K_=function(M0,u0){var D0=A_.w(z_.$u?Date.UTC(z_.$y,u0,M0):new Date(z_.$y,u0,M0),z_);return B_?D0:D0.endOf(_d)},rE=function(M0,u0){return A_.w(z_.toDate()[M0].apply(z_.toDate("s"),(B_?[0,0,0,0]:[23,59,59,999]).slice(u0)),z_)},aE=this.$W,gE=this.$M,kE=this.$D,xE="set"+(this.$u?"UTC":"");switch(Q_){case i_:return B_?K_(1,0):K_(31,11);case e_:return B_?K_(1,gE):K_(0,gE+1);case _m:var YE=this.$locale().weekStart||0,d0=(aE<YE?aE+7:aE)-YE;return K_(B_?kE-d0:kE+(6-d0),gE);case _d:case c_:return rE(xE+"Hours",0);case _l:return rE(xE+"Minutes",1);case _c:return rE(xE+"Seconds",2);case _s:return rE(xE+"Milliseconds",3);default:return this.clone()}},I_.endOf=function(x_){return this.startOf(x_,!1)},I_.$set=function(x_,Y_){var z_,B_=A_.p(x_),Q_="set"+(this.$u?"UTC":""),K_=(z_={},z_[_d]=Q_+"Date",z_[c_]=Q_+"Date",z_[e_]=Q_+"Month",z_[i_]=Q_+"FullYear",z_[_l]=Q_+"Hours",z_[_c]=Q_+"Minutes",z_[_s]=Q_+"Seconds",z_[_i]=Q_+"Milliseconds",z_)[B_],rE=B_===_d?this.$D+(Y_-this.$W):Y_;if(B_===e_||B_===i_){var aE=this.clone().set(c_,1);aE.$d[K_](rE),aE.init(),this.$d=aE.set(c_,Math.min(this.$D,aE.daysInMonth())).$d}else K_&&this.$d[K_](rE);return this.init(),this},I_.set=function(x_,Y_){return this.clone().$set(x_,Y_)},I_.get=function(x_){return this[A_.p(x_)]()},I_.add=function(x_,Y_){var z_,B_=this;x_=Number(x_);var Q_=A_.p(Y_),K_=function(gE){var kE=W_(B_);return A_.w(kE.date(kE.date()+Math.round(gE*x_)),B_)};if(Q_===e_)return this.set(e_,this.$M+x_);if(Q_===i_)return this.set(i_,this.$y+x_);if(Q_===_d)return K_(1);if(Q_===_m)return K_(7);var rE=(z_={},z_[_c]=Vt,z_[_l]=Wt,z_[_s]=_t,z_)[Q_]||1,aE=this.$d.getTime()+x_*rE;return A_.w(aE,this)},I_.subtract=function(x_,Y_){return this.add(-1*x_,Y_)},I_.format=function(x_){var Y_=this,z_=this.$locale();if(!this.isValid())return z_.invalidDate||h_;var B_=x_||"YYYY-MM-DDTHH:mm:ssZ",Q_=A_.z(this),K_=this.$H,rE=this.$m,aE=this.$M,gE=z_.weekdays,kE=z_.months,xE=function(u0,D0,C0,QE){return u0&&(u0[D0]||u0(Y_,B_))||C0[D0].slice(0,QE)},YE=function(u0){return A_.s(K_%12||12,u0,"0")},d0=z_.meridiem||function(u0,D0,C0){var QE=u0<12?"AM":"PM";return C0?QE.toLowerCase():QE},M0={YY:String(this.$y).slice(-2),YYYY:this.$y,M:aE+1,MM:A_.s(aE+1,2,"0"),MMM:xE(z_.monthsShort,aE,kE,3),MMMM:xE(kE,aE),D:this.$D,DD:A_.s(this.$D,2,"0"),d:String(this.$W),dd:xE(z_.weekdaysMin,this.$W,gE,2),ddd:xE(z_.weekdaysShort,this.$W,gE,3),dddd:gE[this.$W],H:String(K_),HH:A_.s(K_,2,"0"),h:YE(1),hh:YE(2),a:d0(K_,rE,!0),A:d0(K_,rE,!1),m:String(rE),mm:A_.s(rE,2,"0"),s:String(this.$s),ss:A_.s(this.$s,2,"0"),SSS:A_.s(this.$ms,3,"0"),Z:Q_};return B_.replace(l_,function(u0,D0){return D0||M0[u0]||Q_.replace(":","")})},I_.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},I_.diff=function(x_,Y_,z_){var B_,Q_=A_.p(Y_),K_=W_(x_),rE=(K_.utcOffset()-this.utcOffset())*Vt,aE=this-K_,gE=A_.m(this,K_);return gE=(B_={},B_[i_]=gE/12,B_[e_]=gE,B_[t_]=gE/3,B_[_m]=(aE-rE)/6048e5,B_[_d]=(aE-rE)/864e5,B_[_l]=aE/Wt,B_[_c]=aE/Vt,B_[_s]=aE/_t,B_)[Q_]||aE,z_?gE:A_.a(gE)},I_.daysInMonth=function(){return this.endOf(e_).$D},I_.$locale=function(){return R_[this.$L]},I_.locale=function(x_,Y_){if(!x_)return this.$L;var z_=this.clone(),B_=j_(x_,Y_,!0);return B_&&(z_.$L=B_),z_},I_.clone=function(){return A_.w(this.$d,this)},I_.toDate=function(){return new Date(this.valueOf())},I_.toJSON=function(){return this.isValid()?this.toISOString():null},I_.toISOString=function(){return this.$d.toISOString()},I_.toString=function(){return this.$d.toUTCString()},G_}(),q_=$_.prototype;return W_.prototype=q_,[["$ms",_i],["$s",_s],["$m",_c],["$H",_l],["$W",_d],["$M",e_],["$y",i_],["$D",c_]].forEach(function(G_){q_[G_[1]]=function(I_){return this.$g(I_,G_[0],G_[1])}}),W_.extend=function(G_,I_){return G_.$i||(G_(I_,$_,W_),G_.$i=!0),W_},W_.locale=j_,W_.isDayjs=C_,W_.unix=function(G_){return W_(1e3*G_)},W_.en=R_[T_],W_.Ls=R_,W_.p={},W_})})(dayjs_min);const require$$0=dayjs_minExports;function _mergeNamespaces$1($,_e){return _e.forEach(function(_t){_t&&typeof _t!="string"&&!Array.isArray(_t)&&Object.keys(_t).forEach(function(Vt){if(Vt!=="default"&&!(Vt in $)){var Wt=Object.getOwnPropertyDescriptor(_t,Vt);Object.defineProperty($,Vt,Wt.get?Wt:{enumerable:!0,get:function(){return _t[Vt]}})}})}),Object.freeze($)}const COLORS=["blue","orange","yellow","red","purple","amber","lime","green","emerald","teal","cyan","sky","indigo","violet","purple","fuchsia","pink","rose"],DEFAULT_COLOR="blue",LANGUAGE="en",DATE_FORMAT="YYYY-MM-DD",START_WEEK="sun",DAYS=[0,1,2,3,4,5,6],MONTHS=[1,2,3,4,5,6,7,8,9,10,11,12],CALENDAR_SIZE=42,BG_COLOR={100:{blue:"bg-blue-100",orange:"bg-orange-100",yellow:"bg-yellow-100",red:"bg-red-100",purple:"bg-purple-100",amber:"bg-amber-100",lime:"bg-lime-100",green:"bg-green-100",emerald:"bg-emerald-100",teal:"bg-teal-100",cyan:"bg-cyan-100",sky:"bg-sky-100",indigo:"bg-indigo-100",violet:"bg-violet-100",fuchsia:"bg-fuchsia-100",pink:"bg-pink-100",rose:"bg-rose-100"},200:{blue:"bg-blue-200",orange:"bg-orange-200",yellow:"bg-yellow-200",red:"bg-red-200",purple:"bg-purple-200",amber:"bg-amber-200",lime:"bg-lime-200",green:"bg-green-200",emerald:"bg-emerald-200",teal:"bg-teal-200",cyan:"bg-cyan-200",sky:"bg-sky-200",indigo:"bg-indigo-200",violet:"bg-violet-200",fuchsia:"bg-fuchsia-200",pink:"bg-pink-200",rose:"bg-rose-200"},500:{blue:"bg-blue-500",orange:"bg-orange-500",yellow:"bg-yellow-500",red:"bg-red-500",purple:"bg-purple-500",amber:"bg-amber-500",lime:"bg-lime-500",green:"bg-green-500",emerald:"bg-emerald-500",teal:"bg-teal-500",cyan:"bg-cyan-500",sky:"bg-sky-500",indigo:"bg-indigo-500",violet:"bg-violet-500",fuchsia:"bg-fuchsia-500",pink:"bg-pink-500",rose:"bg-rose-500"},hover:{blue:"hover:bg-blue-600",orange:"hover:bg-orange-600",yellow:"hover:bg-yellow-600",red:"hover:bg-red-600",purple:"hover:bg-purple-600",amber:"hover:bg-amber-600",lime:"hover:bg-lime-600",green:"hover:bg-green-600",emerald:"hover:bg-emerald-600",teal:"hover:bg-teal-600",cyan:"hover:bg-cyan-600",sky:"hover:bg-sky-600",indigo:"hover:bg-indigo-600",violet:"hover:bg-violet-600",fuchsia:"hover:bg-fuchsia-600",pink:"hover:bg-pink-600",rose:"hover:bg-rose-600"}},TEXT_COLOR={500:{blue:"text-blue-500",orange:"text-orange-500",yellow:"text-yellow-500",red:"text-red-500",purple:"text-purple-500",amber:"text-amber-500",lime:"text-lime-500",green:"text-green-500",emerald:"text-emerald-500",teal:"text-teal-500",cyan:"text-cyan-500",sky:"text-sky-500",indigo:"text-indigo-500",violet:"text-violet-500",fuchsia:"text-fuchsia-500",pink:"text-pink-500",rose:"text-rose-500"},600:{blue:"text-blue-600 dark:text-blue-400 dark:hover:text-blue-400",orange:"text-orange-600 dark:text-orange-400 dark:hover:text-orange-400",yellow:"text-yellow-600 dark:text-yellow-400 dark:hover:text-yellow-400",red:"text-red-600 dark:text-red-400 dark:hover:text-red-400",purple:"text-purple-600 dark:text-purple-400 dark:hover:text-purple-400",amber:"text-amber-600 dark:text-amber-400 dark:hover:text-amber-400",lime:"text-lime-600 dark:text-lime-400 dark:hover:text-lime-400",green:"text-green-600 dark:text-green-400 dark:hover:text-green-400",emerald:"text-emerald-600 dark:text-emerald-400 dark:hover:text-emerald-400",teal:"text-teal-600 dark:text-teal-400 dark:hover:text-teal-400",cyan:"text-cyan-600 dark:text-cyan-400 dark:hover:text-cyan-400",sky:"text-sky-600 dark:text-sky-400 dark:hover:text-sky-400",indigo:"text-indigo-600 dark:text-indigo-400 dark:hover:text-indigo-400",violet:"text-violet-600 dark:text-violet-400 dark:hover:text-violet-400",fuchsia:"text-fuchsia-600 dark:text-fuchsia-400 dark:hover:text-fuchsia-400",pink:"text-pink-600 dark:text-pink-400 dark:hover:text-pink-400",rose:"text-rose-600 dark:text-rose-400 dark:hover:text-rose-400"},hover:{blue:"hover:text-blue-700",orange:"hover:text-orange-700",yellow:"hover:text-yellow-700",red:"hover:text-red-700",purple:"hover:text-purple-700",amber:"hover:text-amber-700",lime:"hover:text-lime-700",green:"hover:text-green-700",emerald:"hover:text-emerald-700",teal:"hover:text-teal-700",cyan:"hover:text-cyan-700",sky:"hover:text-sky-700",indigo:"hover:text-indigo-700",violet:"hover:text-violet-700",fuchsia:"hover:text-fuchsia-700",pink:"hover:text-pink-700",rose:"hover:text-rose-700"}},BORDER_COLOR={500:{blue:"border-blue-500",orange:"border-orange-500",yellow:"border-yellow-500",red:"border-red-500",purple:"border-purple-500",amber:"border-amber-500",lime:"border-lime-500",green:"border-green-500",emerald:"border-emerald-500",teal:"border-teal-500",cyan:"border-cyan-500",sky:"border-sky-500",indigo:"border-indigo-500",violet:"border-violet-500",fuchsia:"border-fuchsia-500",pink:"border-pink-500",rose:"border-rose-500"},focus:{blue:"focus:border-blue-500",orange:"focus:border-orange-500",yellow:"focus:border-yellow-500",red:"focus:border-red-500",purple:"focus:border-purple-500",amber:"focus:border-amber-500",lime:"focus:border-lime-500",green:"focus:border-green-500",emerald:"focus:border-emerald-500",teal:"focus:border-teal-500",cyan:"focus:border-cyan-500",sky:"focus:border-sky-500",indigo:"focus:border-indigo-500",violet:"focus:border-violet-500",fuchsia:"focus:border-fuchsia-500",pink:"focus:border-pink-500",rose:"focus:border-rose-500"}},RING_COLOR={focus:{blue:"focus:ring-blue-500",orange:"focus:ring-orange-500",yellow:"focus:ring-yellow-500",red:"focus:ring-red-500",purple:"focus:ring-purple-500",amber:"focus:ring-amber-500",lime:"focus:ring-lime-500",green:"focus:ring-green-500",emerald:"focus:ring-emerald-500",teal:"focus:ring-teal-500",cyan:"focus:ring-cyan-500",sky:"focus:ring-sky-500",indigo:"focus:ring-indigo-500",violet:"focus:ring-violet-500",fuchsia:"focus:ring-fuchsia-500",pink:"focus:ring-pink-500",rose:"focus:ring-rose-500"},"second-focus":{blue:"focus:ring-blue-500/20",orange:"focus:ring-orange-500/20",yellow:"focus:ring-yellow-500/20",red:"focus:ring-red-500/20",purple:"focus:ring-purple-500/20",amber:"focus:ring-amber-500/20",lime:"focus:ring-lime-500/20",green:"focus:ring-green-500/20",emerald:"focus:ring-emerald-500/20",teal:"focus:ring-teal-500/20",cyan:"focus:ring-cyan-500/20",sky:"focus:ring-sky-500/20",indigo:"focus:ring-indigo-500/20",violet:"focus:ring-violet-500/20",fuchsia:"focus:ring-fuchsia-500/20",pink:"focus:ring-pink-500/20",rose:"focus:ring-rose-500/20"}},BUTTON_COLOR={focus:{blue:"focus:ring-blue-500/50 focus:bg-blue-100/50",orange:"focus:ring-orange-500/50 focus:bg-orange-100/50",yellow:"focus:ring-yellow-500/50 focus:bg-yellow-100/50",red:"focus:ring-red-500/50 focus:bg-red-100/50",purple:"focus:ring-purple-500/50 focus:bg-purple-100/50",amber:"focus:ring-amber-500/50 focus:bg-amber-100/50",lime:"focus:ring-lime-500/50 focus:bg-lime-100/50",green:"focus:ring-green-500/50 focus:bg-green-100/50",emerald:"focus:ring-emerald-500/50 focus:bg-emerald-100/50",teal:"focus:ring-teal-500/50 focus:bg-teal-100/50",cyan:"focus:ring-cyan-500/50 focus:bg-cyan-100/50",sky:"focus:ring-sky-500/50 focus:bg-sky-100/50",indigo:"focus:ring-indigo-500/50 focus:bg-indigo-100/50",violet:"focus:ring-violet-500/50 focus:bg-violet-100/50",fuchsia:"focus:ring-fuchsia-500/50 focus:bg-fuchsia-100/50",pink:"focus:ring-pink-500/50 focus:bg-pink-100/50",rose:"focus:ring-rose-500/50 focus:bg-rose-100/50"}},DatepickerContext=reactExports.createContext({input:void 0,primaryColor:"blue",configs:void 0,calendarContainer:null,arrowContainer:null,hideDatepicker:()=>{},period:{start:null,end:null},changePeriod:$=>{},dayHover:null,changeDayHover:$=>{},inputText:"",changeInputText:$=>{},updateFirstDate:$=>{},changeDatepickerValue:($,_e)=>{},showFooter:!1,value:null,i18n:LANGUAGE,disabled:!1,inputClassName:"",containerClassName:"",toggleClassName:"",readOnly:!1,displayFormat:DATE_FORMAT,minDate:null,maxDate:null,disabledDates:null,inputId:void 0,inputName:void 0,startWeekOn:START_WEEK,toggleIcon:void 0,classNames:void 0,popoverDirection:void 0});function classNames(...$){return $.filter(Boolean).join(" ")}function generateArrayNumber($=0,_e=0){const _t=[];for(let Vt=$;Vt<=_e;Vt++)_t.push(Vt);return _t}function shortString($,_e=3){return $.slice(0,_e)}function ucFirst($){return`${$[0].toUpperCase()}${$.slice(1,$.length)}`}function formatDate($,_e=DATE_FORMAT){return $.format(_e)}function getFirstDayInMonth($){return{ddd:formatDate(require$$0($).startOf("month"),"ddd"),basic:formatDate(require$$0($).startOf("month")),object:require$$0($).startOf("month")}}function getDaysInMonth($){return isNaN(require$$0($).daysInMonth())?[]:[...generateArrayNumber(1,require$$0($).daysInMonth())]}function nextMonth($){return $.date(1).hour(0).minute(0).second(0).month($.month()+1)}function previousMonth($){return $.date(1).hour(0).minute(0).second(0).month($.month()-1)}function getFirstElementsInArray($=[],_e=0){return $.slice(0,_e)}function getLastElementsInArray($=[],_e=0){const _t=[];if(Array.isArray($)&&_e>0){if(_e>=$.length)return $;let Vt=$.length-1;for(let Wt=0;Wt<_e;Wt++)_t.push($[Vt]),Vt--}return _t.reverse()}function getNumberOfDay($,_e){let _t=0,Vt=0;if(_e)switch(_e){case"mon":Vt=6;break;case"tue":Vt=5;break;case"wed":Vt=4;break;case"thu":Vt=3;break;case"fri":Vt=2;break;case"sat":Vt=1;break;case"sun":Vt=0;break}return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].forEach((Wt,_i)=>{Wt.includes($)&&(_t=(_i+Vt)%7)}),_t}function getLastDaysInMonth($,_e=0){return getLastElementsInArray(getDaysInMonth($),_e)}function getFirstDaysInMonth($,_e=0){return getFirstElementsInArray(getDaysInMonth($),_e)}function loadLanguageModule($=LANGUAGE){switch($){case"af":Promise.resolve().then(function(){return af$1});break;case"am":Promise.resolve().then(function(){return am$1});break;case"ar-dz":Promise.resolve().then(function(){return arDz$1});break;case"ar-iq":Promise.resolve().then(function(){return arIq$1});break;case"ar-kw":Promise.resolve().then(function(){return arKw$1});break;case"ar-ly":Promise.resolve().then(function(){return arLy$1});break;case"ar-ma":Promise.resolve().then(function(){return arMa$1});break;case"ar-sa":Promise.resolve().then(function(){return arSa$1});break;case"ar-tn":Promise.resolve().then(function(){return arTn$1});break;case"ar":Promise.resolve().then(function(){return ar$1});break;case"az":Promise.resolve().then(function(){return az$1});break;case"bg":Promise.resolve().then(function(){return bg$1});break;case"bi":Promise.resolve().then(function(){return bi$1});break;case"bm":Promise.resolve().then(function(){return bm$1});break;case"bn-bd":Promise.resolve().then(function(){return bnBd$1});break;case"bn":Promise.resolve().then(function(){return bn$1});break;case"bo":Promise.resolve().then(function(){return bo$1});break;case"br":Promise.resolve().then(function(){return br$1});break;case"ca":Promise.resolve().then(function(){return ca$1});break;case"cs":Promise.resolve().then(function(){return cs$1});break;case"cv":Promise.resolve().then(function(){return cv$1});break;case"cy":Promise.resolve().then(function(){return cy$1});break;case"da":Promise.resolve().then(function(){return da$1});break;case"de-at":Promise.resolve().then(function(){return deAt$1});break;case"de-ch":Promise.resolve().then(function(){return deCh$1});break;case"de":Promise.resolve().then(function(){return de$1});break;case"dv":Promise.resolve().then(function(){return dv$1});break;case"el":Promise.resolve().then(function(){return el$1});break;case"en-au":Promise.resolve().then(function(){return enAu$1});break;case"en-gb":Promise.resolve().then(function(){return enGb$1});break;case"en-ie":Promise.resolve().then(function(){return enIe$1});break;case"en-il":Promise.resolve().then(function(){return enIl$1});break;case"en-in":Promise.resolve().then(function(){return enIn$1});break;case"en-nz":Promise.resolve().then(function(){return enNz$1});break;case"en-sg":Promise.resolve().then(function(){return enSg$1});break;case"en-tt":Promise.resolve().then(function(){return enTt$1});break;case"en":Promise.resolve().then(function(){return en$1});break;case"eo":Promise.resolve().then(function(){return eo$1});break;case"es-do":Promise.resolve().then(function(){return esDo$1});break;case"es-mx":Promise.resolve().then(function(){return esMx$1});break;case"es-pr":Promise.resolve().then(function(){return esPr$1});break;case"es-us":Promise.resolve().then(function(){return esUs$1});break;case"es":Promise.resolve().then(function(){return es$1});break;case"et":Promise.resolve().then(function(){return et$1});break;case"eu":Promise.resolve().then(function(){return eu$1});break;case"fa":Promise.resolve().then(function(){return fa$1});break;case"fi":Promise.resolve().then(function(){return fi$1});break;case"fo":Promise.resolve().then(function(){return fo$1});break;case"fr-ch":Promise.resolve().then(function(){return frCh$1});break;case"fr":Promise.resolve().then(function(){return fr$1});break;case"fy":Promise.resolve().then(function(){return fy$1});break;case"ga":Promise.resolve().then(function(){return ga$1});break;case"gd":Promise.resolve().then(function(){return gd$1});break;case"gl":Promise.resolve().then(function(){return gl$1});break;case"gom-latn":Promise.resolve().then(function(){return gomLatn$1});break;case"gu":Promise.resolve().then(function(){return gu$1});break;case"he":Promise.resolve().then(function(){return he$1});break;case"hi":Promise.resolve().then(function(){return hi$1});break;case"hr":Promise.resolve().then(function(){return hr$1});break;case"ht":Promise.resolve().then(function(){return ht$1});break;case"hu":Promise.resolve().then(function(){return hu$1});break;case"hy-am":Promise.resolve().then(function(){return hyAm$1});break;case"id":Promise.resolve().then(function(){return id$1});break;case"is":Promise.resolve().then(function(){return is$1});break;case"it-ch":Promise.resolve().then(function(){return itCh$1});break;case"it":Promise.resolve().then(function(){return it$1});break;case"ja":Promise.resolve().then(function(){return ja$1});break;case"jv":Promise.resolve().then(function(){return jv$1});break;case"ka":Promise.resolve().then(function(){return ka$1});break;case"kk":Promise.resolve().then(function(){return kk$1});break;case"ko":Promise.resolve().then(function(){return ko$1});break;case"ku":Promise.resolve().then(function(){return ku$1});break;case"ky":Promise.resolve().then(function(){return ky$1});break;case"lb":Promise.resolve().then(function(){return lb$1});break;case"lo":Promise.resolve().then(function(){return lo$1});break;case"lt":Promise.resolve().then(function(){return lt$1});break;case"lv":Promise.resolve().then(function(){return lv$1});break;case"me":Promise.resolve().then(function(){return me$1});break;case"mi":Promise.resolve().then(function(){return mi$1});break;case"mk":Promise.resolve().then(function(){return mk$1});break;case"ml":Promise.resolve().then(function(){return ml$1});break;case"mn":Promise.resolve().then(function(){return mn$1});break;case"ms-my":Promise.resolve().then(function(){return msMy$1});break;case"ms":Promise.resolve().then(function(){return ms$1});break;case"mt":Promise.resolve().then(function(){return mt$1});break;case"my":Promise.resolve().then(function(){return my$1});break;case"nb":Promise.resolve().then(function(){return nb$1});break;case"ne":Promise.resolve().then(function(){return ne$1});break;case"nl-be":Promise.resolve().then(function(){return nlBe$1});break;case"nl":Promise.resolve().then(function(){return nl$1});break;case"nn":Promise.resolve().then(function(){return nn$1});break;case"oc-lnc":Promise.resolve().then(function(){return ocLnc$1});break;case"pa-in":Promise.resolve().then(function(){return paIn$1});break;case"pl":Promise.resolve().then(function(){return pl$1});break;case"pt-br":Promise.resolve().then(function(){return ptBr$1});break;case"pt":Promise.resolve().then(function(){return pt$1});break;case"rn":Promise.resolve().then(function(){return rn$1});break;case"ro":Promise.resolve().then(function(){return ro$1});break;case"ru":Promise.resolve().then(function(){return ru$1});break;case"rw":Promise.resolve().then(function(){return rw$1});break;case"sd":Promise.resolve().then(function(){return sd$1});break;case"se":Promise.resolve().then(function(){return se$1});break;case"si":Promise.resolve().then(function(){return si$1});break;case"sk":Promise.resolve().then(function(){return sk$1});break;case"sl":Promise.resolve().then(function(){return sl$1});break;case"sq":Promise.resolve().then(function(){return sq$1});break;case"sr":Promise.resolve().then(function(){return sr$1});break;case"sr-cyrl":Promise.resolve().then(function(){return srCyrl$1});break;case"ss":Promise.resolve().then(function(){return ss$1});break;case"sv-fi":Promise.resolve().then(function(){return svFi$1});break;case"sv":Promise.resolve().then(function(){return sv$1});break;case"sw":Promise.resolve().then(function(){return sw$1});break;case"ta":Promise.resolve().then(function(){return ta$1});break;case"te":Promise.resolve().then(function(){return te$1});break;case"tg":Promise.resolve().then(function(){return tg$1});break;case"th":Promise.resolve().then(function(){return th$1});break;case"tk":Promise.resolve().then(function(){return tk$1});break;case"tl-ph":Promise.resolve().then(function(){return tlPh$1});break;case"tlh":Promise.resolve().then(function(){return tlh$1});break;case"tr":Promise.resolve().then(function(){return tr$1});break;case"tzl":Promise.resolve().then(function(){return tzl$1});break;case"tzm-latn":Promise.resolve().then(function(){return tzmLatn$1});break;case"tzm":Promise.resolve().then(function(){return tzm$1});break;case"ug-cn":Promise.resolve().then(function(){return ugCn$1});break;case"uk":Promise.resolve().then(function(){return uk$1});break;case"ur":Promise.resolve().then(function(){return ur$1});break;case"uz-latn":Promise.resolve().then(function(){return uzLatn$1});break;case"uz":Promise.resolve().then(function(){return uz$1});break;case"vi":Promise.resolve().then(function(){return vi$1});break;case"x-pseudo":Promise.resolve().then(function(){return xPseudo$1});break;case"yo":Promise.resolve().then(function(){return yo$1});break;case"zh-cn":Promise.resolve().then(function(){return zhCn$1});break;case"zh-hk":Promise.resolve().then(function(){return zhHk$1});break;case"zh-tw":Promise.resolve().then(function(){return zhTw$1});break;case"zh":Promise.resolve().then(function(){return zh$1});break;default:Promise.resolve().then(function(){return en$1});break}}function dateIsValid($){return $ instanceof Date&&!isNaN($.getTime())}const DateIcon=({className:$="w-6 h-6"})=>React.createElement("svg",{className:$,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5m-9-6h.008v.008H12v-.008zM12 15h.008v.008H12V15zm0 2.25h.008v.008H12v-.008zM9.75 15h.008v.008H9.75V15zm0 2.25h.008v.008H9.75v-.008zM7.5 15h.008v.008H7.5V15zm0 2.25h.008v.008H7.5v-.008zm6.75-4.5h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V15zm0 2.25h.008v.008h-.008v-.008zm2.25-4.5h.008v.008H16.5v-.008zm0 2.25h.008v.008H16.5V15z"})),CloseIcon=({className:$="w-6 h-6"})=>React.createElement("svg",{className:$,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})),ChevronLeftIcon=({className:$="w-6 h-6"})=>React.createElement("svg",{className:$,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})),DoubleChevronLeftIcon=({className:$="w-6 h-6"})=>React.createElement("svg",{className:$,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"})),ChevronRightIcon=({className:$="w-6 h-6"})=>React.createElement("svg",{className:$,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})),DoubleChevronRightIcon=({className:$="w-6 h-6"})=>React.createElement("svg",{className:$,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"})),Arrow=React.forwardRef(($,_e)=>React.createElement("div",{ref:_e,className:"absolute z-20 h-4 w-4 rotate-45 mt-0.5 ml-[1.2rem] border-l border-t border-gray-300 bg-white dark:bg-slate-800 dark:border-slate-600"})),SecondaryButton=({children:$,onClick:_e,disabled:_t=!1})=>{const{primaryColor:Vt}=reactExports.useContext(DatepickerContext),Wt=reactExports.useCallback(()=>`w-full transition-all duration-300 bg-white dark:text-gray-700 font-medium border border-gray-300 px-4 py-2 text-sm rounded-md focus:ring-2 focus:ring-offset-2 hover:bg-gray-50 ${RING_COLOR.focus[Vt]}`,[Vt]);return React.createElement("button",{type:"button",className:Wt(),onClick:_e,disabled:_t},$)},PrimaryButton=({children:$,onClick:_e,disabled:_t=!1})=>{const{primaryColor:Vt}=reactExports.useContext(DatepickerContext),Wt=BG_COLOR[500][Vt],_i=BORDER_COLOR[500][Vt],_s=BG_COLOR.hover[Vt],_c=RING_COLOR.focus[Vt],_l=reactExports.useCallback(()=>`w-full transition-all duration-300 ${Wt} ${_i} text-white font-medium border px-4 py-2 text-sm rounded-md focus:ring-2 focus:ring-offset-2 ${_s} ${_c} ${_t?" cursor-no-drop":""}`,[Wt,_s,_i,_t,_c]);return React.createElement("button",{type:"button",className:_l(),onClick:_e,disabled:_t},$)},RoundedButton=({children:$,onClick:_e,roundedFull:_t=!1,padding:Vt="py-[0.55rem]"})=>{const{primaryColor:Wt}=reactExports.useContext(DatepickerContext),_i=reactExports.useCallback(()=>{const _s="dark:text-white/70 dark:hover:bg-white/10 dark:focus:bg-white/10",_c=_t?`${_s} transition-all duration-300 hover:bg-gray-100 rounded-full p-[0.45rem] focus:ring-1`:`w-full tracking-wide ${_s} transition-all duration-300 px-3 ${Vt} uppercase hover:bg-gray-100 rounded-md focus:ring-1`,_l=BUTTON_COLOR.focus[Wt];return`${_c} ${_l}`},[Vt,Wt,_t]);return React.createElement("button",{type:"button",className:_i(),onClick:_e},$)},VerticalDash=()=>{const{primaryColor:$}=reactExports.useContext(DatepickerContext),_e=BG_COLOR[500][$];return React.createElement("div",{className:`bg-blue-500 h-7 w-1 rounded-full hidden md:block ${_e}`})};var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs($){return $&&$.__esModule&&Object.prototype.hasOwnProperty.call($,"default")?$.default:$}var isBetweenExports={},isBetween$1={get exports(){return isBetweenExports},set exports($){isBetweenExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt()})(commonjsGlobal,function(){return function(_t,Vt,Wt){Vt.prototype.isBetween=function(_i,_s,_c,_l){var _d=Wt(_i),_m=Wt(_s),e_=(_l=_l||"()")[0]==="(",t_=_l[1]===")";return(e_?this.isAfter(_d,_c):!this.isBefore(_d,_c))&&(t_?this.isBefore(_m,_c):!this.isAfter(_m,_c))||(e_?this.isBefore(_d,_c):!this.isAfter(_d,_c))&&(t_?this.isAfter(_m,_c):!this.isBefore(_m,_c))}}})})(isBetween$1);var isBetween=isBetweenExports;require$$0.extend(isBetween);const Days=({calendarData:$,onClickPreviousDays:_e,onClickDay:_t,onClickNextDays:Vt})=>{const{primaryColor:Wt,period:_i,changePeriod:_s,dayHover:_c,changeDayHover:_l,minDate:_d,maxDate:_m,disabledDates:e_}=reactExports.useContext(DatepickerContext),t_=reactExports.useCallback(C_=>{const j_=`${$.date.year()}-${$.date.month()+1}-${C_>=10?C_:"0"+C_}`;return formatDate(require$$0())===formatDate(require$$0(j_))?TEXT_COLOR[500][Wt]:""},[$.date,Wt]),i_=reactExports.useCallback(C_=>{const j_=`${$.date.year()}-${$.date.month()+1}-${C_}`;let W_="";return require$$0(j_).isSame(_i.start)&&require$$0(j_).isSame(_i.end)?W_=` ${BG_COLOR[500][Wt]} text-white font-medium rounded-full`:require$$0(j_).isSame(_i.start)?W_=` ${BG_COLOR[500][Wt]} text-white font-medium ${require$$0(j_).isSame(_c)&&!_i.end?"rounded-full":"rounded-l-full"}`:require$$0(j_).isSame(_i.end)&&(W_=` ${BG_COLOR[500][Wt]} text-white font-medium ${require$$0(j_).isSame(_c)&&!_i.start?"rounded-full":"rounded-r-full"}`),{active:require$$0(j_).isSame(_i.start)||require$$0(j_).isSame(_i.end),className:W_}},[$.date,_c,_i.end,_i.start,Wt]),c_=reactExports.useCallback(C_=>{let j_=t_(C_);const W_=`${$.date.year()}-${$.date.month()+1}-${C_>=10?C_:"0"+C_}`;return _i.start&&_i.end&&require$$0(W_).isBetween(_i.start,_i.end,"day","[)")?` ${BG_COLOR[100][Wt]} ${t_(C_)} dark:bg-white/10`:(_c&&(_i.start&&require$$0(W_).isBetween(_i.start,_c,"day","[)")&&(j_=` ${BG_COLOR[100][Wt]} ${t_(C_)} dark:bg-white/10`),_i.end&&require$$0(W_).isBetween(_c,_i.end,"day","[)")&&(j_=` ${BG_COLOR[100][Wt]} ${t_(C_)} dark:bg-white/10`),_c===W_&&(j_=` transition-all duration-500 text-white font-medium ${BG_COLOR[500][Wt]} ${_i.start?"rounded-r-full":"rounded-l-full"}`)),j_)},[$.date,t_,_c,_i.end,_i.start,Wt]),h_=reactExports.useCallback((C_,j_)=>{if(!_d)return!1;const A_={previous:previousMonth($.date),current:$.date,next:nextMonth($.date)}[j_],$_=`${A_.year()}-${A_.month()+1}-${C_>=10?C_:"0"+C_}`;return require$$0($_).isSame(require$$0(_d))?!1:require$$0($_).isBefore(require$$0(_d))},[$.date,_d]),y_=reactExports.useCallback((C_,j_)=>{if(!_m)return!1;const A_={previous:previousMonth($.date),current:$.date,next:nextMonth($.date)}[j_],$_=`${A_.year()}-${A_.month()+1}-${C_>=10?C_:"0"+C_}`;return require$$0($_).isSame(_m)?!1:require$$0($_).isAfter(require$$0(_m))},[$.date,_m]),l_=reactExports.useCallback((C_,j_)=>{if(h_(C_,j_)||y_(C_,j_))return!0;const A_={previous:previousMonth($.date),current:$.date,next:nextMonth($.date)}[j_],$_=`${A_.year()}-${A_.month()+1}-${C_>=10?C_:"0"+C_}`;if(!e_||Array.isArray(e_)&&!e_.length)return!1;let q_=0;return e_==null||e_.forEach(G_=>{require$$0($_).isAfter(G_.startDate)&&require$$0($_).isBefore(G_.endDate)&&q_++,(require$$0($_).isSame(G_.startDate)||require$$0($_).isSame(G_.endDate))&&q_++}),q_>0},[$.date,h_,y_,e_]),d_=reactExports.useCallback((C_,j_)=>classNames("flex items-center justify-center w-12 h-12 lg:w-10 lg:h-10",i_(C_).active?i_(C_).className:c_(C_),l_(C_,j_)&&"line-through"),[i_,c_,l_]),f_=reactExports.useCallback(C_=>{if(!Array.isArray(e_))return!1;for(let j_=0;j_<e_.length;j_++)if(require$$0(C_.start).isBefore(e_[j_].startDate)&&require$$0(C_.end).isAfter(e_[j_].endDate))return!0;return!1},[e_]),S_=reactExports.useCallback(()=>({previous:previousMonth($.date),current:$.date,next:nextMonth($.date)}),[$.date]),T_=reactExports.useCallback((C_,j_)=>{const A_=S_()[j_],$_=`${A_.year()}-${A_.month()+1}-${C_>=10?C_:"0"+C_}`;if(_i.start&&!_i.end){const q_={..._i,end:$_};require$$0($_).isBefore(require$$0(_i.start))&&(q_.start=$_,q_.end=_i.start,f_(q_)||_s({start:null,end:_i.start})),f_(q_)||_l($_)}if(!_i.start&&_i.end){const q_={..._i,start:$_};require$$0($_).isAfter(require$$0(_i.end))&&(q_.start=_i.end,q_.end=$_,f_(q_)||_s({start:_i.end,end:null})),f_(q_)||_l($_)}},[_l,_s,f_,S_,_i]),R_=reactExports.useCallback((C_,j_)=>{function W_(){j_==="previous"&&_e(C_),j_==="current"&&_t(C_),j_==="next"&&Vt(C_)}if(e_!=null&&e_.length){const $_=S_()[j_],q_=`${$_.year()}-${$_.month()+1}-${C_>=10?C_:"0"+C_}`;_i.start&&!_i.end||!_i.start&&_i.end?require$$0(q_).isSame(_c)&&W_():W_()}else W_()},[_c,e_==null?void 0:e_.length,S_,_t,Vt,_e,_i.end,_i.start]);return React.createElement("div",{className:"grid grid-cols-7 gap-y-0.5 my-1"},$.days.previous.map((C_,j_)=>React.createElement("button",{type:"button",key:j_,disabled:l_(C_,"previous"),className:"flex items-center justify-center text-gray-400 h-12 w-12 lg:w-10 lg:h-10",onClick:()=>R_(C_,"previous"),onMouseOver:()=>{T_(C_,"previous")}},C_)),$.days.current.map((C_,j_)=>React.createElement("button",{type:"button",key:j_,disabled:l_(C_,"current"),className:`${d_(C_,"current")}`,onClick:()=>R_(C_,"current"),onMouseOver:()=>{T_(C_,"current")}},C_)),$.days.next.map((C_,j_)=>React.createElement("button",{type:"button",key:j_,disabled:l_(j_,"next"),className:"flex items-center justify-center text-gray-400 h-12 w-12 lg:w-10 lg:h-10",onClick:()=>R_(C_,"next"),onMouseOver:()=>{T_(C_,"next")}},C_)))},Months=({clickMonth:$})=>{const{i18n:_e}=reactExports.useContext(DatepickerContext);return loadLanguageModule(_e),React.createElement("div",{className:"w-full grid grid-cols-2 gap-2 mt-2"},MONTHS.map(_t=>React.createElement(RoundedButton,{key:_t,padding:"py-3",onClick:()=>{$(_t)}},React.createElement(React.Fragment,null,require$$0(`2022-${_t}-01`).locale(_e).format("MMM")))))},Week=()=>{const{i18n:$,startWeekOn:_e}=reactExports.useContext(DatepickerContext);loadLanguageModule($);const _t=reactExports.useMemo(()=>{if(_e)switch(_e){case"mon":return 1;case"tue":return 2;case"wed":return 3;case"thu":return 4;case"fri":return 5;case"sat":return 6;case"sun":return 0;default:return 0}return 0},[_e]);return React.createElement("div",{className:"grid grid-cols-7 border-b border-gray-300 dark:border-gray-700 py-2"},DAYS.map(Vt=>React.createElement("div",{key:Vt,className:"tracking-wide text-gray-500 text-center"},ucFirst(shortString(require$$0(`2022-11-${6+(Vt+_t)}`).locale($).format("ddd"))))))},Years=({year:$,clickYear:_e})=>React.createElement("div",{className:"w-full grid grid-cols-2 gap-2 mt-2"},generateArrayNumber($,$+11).map((_t,Vt)=>React.createElement(RoundedButton,{key:Vt,padding:"py-3",onClick:()=>{_e(_t)}},React.createElement(React.Fragment,null,_t)))),Calendar=({date:$,onClickPrevious:_e,onClickNext:_t,changeMonth:Vt,changeYear:Wt})=>{const{period:_i,changePeriod:_s,changeDayHover:_c,showFooter:_l,changeDatepickerValue:_d,hideDatepicker:_m,asSingle:e_,i18n:t_,startWeekOn:i_,input:c_}=reactExports.useContext(DatepickerContext);loadLanguageModule(t_);const[h_,y_]=reactExports.useState(!1),[l_,d_]=reactExports.useState(!1),[f_,S_]=reactExports.useState($.year()),T_=reactExports.useCallback(()=>getLastDaysInMonth(previousMonth($),getNumberOfDay(getFirstDayInMonth($).ddd,i_)),[$,i_]),R_=reactExports.useCallback(()=>getDaysInMonth(formatDate($)),[$]),C_=reactExports.useCallback(()=>getFirstDaysInMonth(previousMonth($),CALENDAR_SIZE-(T_().length+R_().length)),[R_,$,T_]),j_=reactExports.useCallback(()=>{h_&&y_(!1)},[h_]),W_=reactExports.useCallback(()=>{l_&&d_(!1)},[l_]),A_=reactExports.useCallback(Y_=>{setTimeout(()=>{Vt(Y_),y_(!h_)},250)},[Vt,h_]),$_=reactExports.useCallback(Y_=>{setTimeout(()=>{Wt(Y_),d_(!l_)},250)},[Wt,l_]),q_=reactExports.useCallback((Y_,z_=$.month()+1,B_=$.year())=>{const Q_=`${B_}-${z_}-${Y_}`;let K_,rE=null;function aE(gE,kE){const xE=c_==null?void 0:c_.current;_d({startDate:require$$0(gE).format("YYYY-MM-DD"),endDate:require$$0(kE).format("YYYY-MM-DD")},xE),_m()}if(_i.start&&_i.end&&(_c&&_c(null),_s({start:null,end:null})),!_i.start&&!_i.end||_i.start&&_i.end)!_i.start&&!_i.end&&_c(Q_),K_=Q_,e_&&(rE=Q_,aE(Q_,Q_));else{if(_i.start&&!_i.end){const gE=require$$0(Q_).isSame(require$$0(_i.start))||require$$0(Q_).isAfter(require$$0(_i.start));K_=gE?_i.start:Q_,rE=gE?Q_:_i.start}else{const gE=require$$0(Q_).isSame(require$$0(_i.end))||require$$0(Q_).isBefore(require$$0(_i.end));K_=gE?Q_:_i.start,rE=gE?_i.end:Q_}_l||K_&&rE&&aE(K_,rE)}(!(rE&&K_)||_l)&&_s({start:K_,end:rE})},[e_,_d,_c,_s,$,_m,_i.end,_i.start,_l,c_]),G_=reactExports.useCallback(Y_=>{const z_=previousMonth($);q_(Y_,z_.month()+1,z_.year()),_e()},[q_,$,_e]),I_=reactExports.useCallback(Y_=>{const z_=nextMonth($);q_(Y_,z_.month()+1,z_.year()),_t()},[q_,$,_t]);reactExports.useEffect(()=>{S_($.year())},[$]);const x_=reactExports.useMemo(()=>({date:$,days:{previous:T_(),current:R_(),next:C_()}}),[R_,$,C_,T_]);return React.createElement("div",{className:"w-full md:w-[297px] md:min-w-[297px]"},React.createElement("div",{className:"flex items-center space-x-1.5 border border-gray-300 dark:border-gray-700 rounded-md px-2 py-1.5"},!h_&&!l_&&React.createElement("div",{className:"flex-none"},React.createElement(RoundedButton,{roundedFull:!0,onClick:_e},React.createElement(ChevronLeftIcon,{className:"h-5 w-5"}))),l_&&React.createElement("div",{className:"flex-none"},React.createElement(RoundedButton,{roundedFull:!0,onClick:()=>{S_(f_-12)}},React.createElement(DoubleChevronLeftIcon,{className:"h-5 w-5"}))),React.createElement("div",{className:"flex flex-1 items-center space-x-1.5"},React.createElement("div",{className:"w-1/2"},React.createElement(RoundedButton,{onClick:()=>{y_(!h_),W_()}},React.createElement(React.Fragment,null,x_.date.locale(t_).format("MMM")))),React.createElement("div",{className:"w-1/2"},React.createElement(RoundedButton,{onClick:()=>{d_(!l_),j_()}},React.createElement(React.Fragment,null,x_.date.year())))),l_&&React.createElement("div",{className:"flex-none"},React.createElement(RoundedButton,{roundedFull:!0,onClick:()=>{S_(f_+12)}},React.createElement(DoubleChevronRightIcon,{className:"h-5 w-5"}))),!h_&&!l_&&React.createElement("div",{className:"flex-none"},React.createElement(RoundedButton,{roundedFull:!0,onClick:_t},React.createElement(ChevronRightIcon,{className:"h-5 w-5"})))),React.createElement("div",{className:"px-0.5 sm:px-2 mt-0.5 min-h-[285px]"},h_&&React.createElement(Months,{clickMonth:A_}),l_&&React.createElement(Years,{year:f_,clickYear:$_}),!h_&&!l_&&React.createElement(React.Fragment,null,React.createElement(Week,null),React.createElement(Days,{calendarData:x_,onClickPreviousDays:G_,onClickDay:q_,onClickNextDays:I_}))))},Footer=()=>{var _s,_c;const{hideDatepicker:$,period:_e,changeDatepickerValue:_t,configs:Vt,classNames:Wt}=reactExports.useContext(DatepickerContext),_i=reactExports.useCallback(()=>typeof Wt<"u"&&typeof(Wt==null?void 0:Wt.footer)=="function"?Wt.footer():"flex items-center justify-end pb-2.5 pt-3 border-t border-gray-300 dark:border-gray-700",[Wt]);return React.createElement("div",{className:_i()},React.createElement("div",{className:"w-full md:w-auto flex items-center justify-center space-x-3"},React.createElement(SecondaryButton,{onClick:()=>{$()}},React.createElement(React.Fragment,null,(_s=Vt==null?void 0:Vt.footer)!=null&&_s.cancel?Vt.footer.cancel:"Cancel")),React.createElement(PrimaryButton,{onClick:()=>{_e.start&&_e.end&&(_t({startDate:require$$0(_e.start).format(DATE_FORMAT),endDate:require$$0(_e.end).format(DATE_FORMAT)}),$())},disabled:!(_e.start&&_e.end)},React.createElement(React.Fragment,null,(_c=Vt==null?void 0:Vt.footer)!=null&&_c.apply?Vt.footer.apply:"Apply"))))};var PopoverDirectionType;(function($){$.up="up",$.down="down"})(PopoverDirectionType||(PopoverDirectionType={}));const ToggleButton=$=>$.isEmpty?React.createElement(DateIcon,{className:"h-5 w-5"}):React.createElement(CloseIcon,{className:"h-5 w-5"}),Input=$=>{const{primaryColor:_e,period:_t,dayHover:Vt,changeDayHover:Wt,calendarContainer:_i,arrowContainer:_s,inputText:_c,changeInputText:_l,hideDatepicker:_d,changeDatepickerValue:_m,asSingle:e_,placeholder:t_,separator:i_,disabled:c_,inputClassName:h_,toggleClassName:y_,toggleIcon:l_,readOnly:d_,displayFormat:f_,inputId:S_,inputName:T_,classNames:R_,popoverDirection:C_}=reactExports.useContext(DatepickerContext),j_=reactExports.useRef(null),W_=reactExports.useRef(null),A_=reactExports.useCallback(()=>{const I_=W_.current;if(I_&&typeof R_<"u"&&typeof(R_==null?void 0:R_.input)=="function")return R_.input(I_);const x_=BORDER_COLOR.focus[_e],Y_=RING_COLOR["second-focus"][_e],z_=`relative transition-all duration-300 py-2.5 pl-4 pr-14 w-full border-gray-300 dark:bg-slate-800 dark:text-white/80 dark:border-slate-600 rounded-lg tracking-wide font-light text-sm placeholder-gray-400 bg-white focus:ring disabled:opacity-40 disabled:cursor-not-allowed ${x_} ${Y_}`;return typeof h_=="function"?h_(z_):typeof h_=="string"&&h_!==""?h_:z_},[W_,R_,_e,h_]),$_=reactExports.useCallback(I_=>{const x_=I_.target.value,Y_=`${x_.slice(0,4)}-${x_.slice(5,7)}-${x_.slice(8,10)}`,z_=`${x_.slice(13,17)}-${x_.slice(18,20)}-${x_.slice(21,x_.length)}`,B_=W_==null?void 0:W_.current;Y_.length===10&&z_.length===10&&dateIsValid(new Date(Y_))&&dateIsValid(new Date(z_))&&require$$0(Y_).isBefore(z_)&&(_m({startDate:Y_,endDate:z_},I_.target),Wt(require$$0(z_).add(-1,"day").format(DATE_FORMAT)),_d(),B_&&B_.blur()),_l(I_.target.value)},[_m,Wt,_l,_d]),q_=reactExports.useCallback(I_=>typeof l_>"u"?React.createElement(ToggleButton,{isEmpty:I_}):l_(I_),[l_]),G_=reactExports.useCallback(()=>{const I_=j_.current;if(I_&&typeof R_<"u"&&typeof(R_==null?void 0:R_.toggleButton)=="function")return R_.toggleButton(I_);const x_="absolute right-0 h-full px-3 text-gray-400 focus:outline-none disabled:opacity-40 disabled:cursor-not-allowed";return typeof y_=="function"?y_(x_):typeof y_=="string"&&y_!==""?y_:x_},[y_,j_,R_]);return reactExports.useEffect(()=>{W_&&$.setContextRef&&typeof $.setContextRef=="function"&&$.setContextRef(W_)},[$,W_]),reactExports.useEffect(()=>{const I_=j_==null?void 0:j_.current;function x_(Y_){Y_.stopPropagation();const z_=W_.current;z_&&(z_.focus(),_c&&!d_&&(_l(""),Vt&&Wt(null),_t.start&&_t.end&&_m({startDate:null,endDate:null},z_)))}return I_&&I_.addEventListener("click",x_),()=>{I_&&I_.removeEventListener("click",x_)}},[_m,Wt,_l,Vt,_c,_t.end,_t.start,d_,W_]),reactExports.useEffect(()=>{const I_=_i==null?void 0:_i.current,x_=W_.current,Y_=_s==null?void 0:_s.current;function z_(){if(Y_&&I_&&I_.classList.contains("hidden")){I_.classList.remove("hidden"),I_.classList.add("block");const B_=C_==PopoverDirectionType.up,Q_=C_===PopoverDirectionType.down;(B_||window.innerWidth>767&&window.screen.height-100<I_.getBoundingClientRect().bottom&&!Q_)&&(I_.classList.add("bottom-full"),I_.classList.add("mb-2.5"),I_.classList.remove("mt-2.5"),Y_.classList.add("-bottom-2"),Y_.classList.add("border-r"),Y_.classList.add("border-b"),Y_.classList.remove("border-l"),Y_.classList.remove("border-t")),setTimeout(()=>{I_.classList.remove("translate-y-4"),I_.classList.remove("opacity-0"),I_.classList.add("translate-y-0"),I_.classList.add("opacity-1")},1)}}return I_&&x_&&x_.addEventListener("focus",z_),()=>{x_&&x_.removeEventListener("focus",z_)}},[_i,_s,C_]),React.createElement(React.Fragment,null,React.createElement("input",{ref:W_,type:"text",className:A_(),disabled:c_,readOnly:d_,placeholder:t_||`${f_}${e_?"":` ${i_} ${f_}`}`,value:_c,id:S_,name:T_,autoComplete:"off",role:"presentation",onChange:$_}),React.createElement("button",{type:"button",ref:j_,disabled:c_,className:G_()},q_(_c==null||!(_c!=null&&_c.length))))},DEFAULT_SHORTCUTS={today:{text:"Today",period:{start:formatDate(require$$0()),end:formatDate(require$$0())}},yesterday:{text:"Yesterday",period:{start:formatDate(require$$0().subtract(1,"d")),end:formatDate(require$$0().subtract(1,"d"))}},past:[{daysNumber:7,text:"Last 7 days",period:{start:formatDate(require$$0().subtract(7,"d")),end:formatDate(require$$0())}},{daysNumber:30,text:"Last 30 days",period:{start:formatDate(require$$0().subtract(30,"d")),end:formatDate(require$$0())}}],currentMonth:{text:"This month",period:{start:formatDate(require$$0().startOf("month")),end:formatDate(require$$0().endOf("month"))}},pastMonth:{text:"Last month",period:{start:formatDate(previousMonth(require$$0()).startOf("month")),end:formatDate(previousMonth(require$$0()).endOf("month"))}}},ItemTemplate=React.memo($=>{const{primaryColor:_e,period:_t,changePeriod:Vt,changeInputText:Wt,updateFirstDate:_i,dayHover:_s,changeDayHover:_c,hideDatepicker:_l,changeDatepickerValue:_d}=reactExports.useContext(DatepickerContext),_m=reactExports.useCallback(()=>{const i_=TEXT_COLOR[600][_e],c_=TEXT_COLOR.hover[_e];return`whitespace-nowrap w-1/2 md:w-1/3 lg:w-auto transition-all duration-300 hover:bg-gray-100 dark:hover:bg-white/10 p-2 rounded cursor-pointer ${i_} ${c_}`},[_e]),e_=reactExports.useCallback(i_=>{_s&&_c(null),(_t.start||_t.end)&&Vt({start:null,end:null}),Wt(`${i_.start} ~ ${i_.end}`),Vt(i_),_d({startDate:i_.start,endDate:i_.end}),_i(require$$0(i_.start)),_l()},[_d,_c,Wt,Vt,_s,_l,_t.end,_t.start,_i]),t_=$==null?void 0:$.children;return React.createElement("li",{className:_m(),onClick:()=>{e_($==null?void 0:$.item.period)}},t_)}),Shortcuts=()=>{const{configs:$}=reactExports.useContext(DatepickerContext),_e=reactExports.useCallback((Wt,_i)=>typeof Wt=="function"?Wt(_i):null,[]),_t=reactExports.useMemo(()=>{let Wt;if($!=null&&$.shortcuts&&($!=null&&$.shortcuts)){const _i=Object.keys($.shortcuts).map(_s=>{var _c,_l;if(Object.keys(DEFAULT_SHORTCUTS).includes(_s))return[_s,DEFAULT_SHORTCUTS[_s]];if($.shortcuts&&($!=null&&$.shortcuts[_s])){const _d=$==null?void 0:$.shortcuts[_s],_m=_d==null?void 0:_d.text,e_=require$$0((_c=_d==null?void 0:_d.period)==null?void 0:_c.start),t_=require$$0((_l=_d==null?void 0:_d.period)==null?void 0:_l.end);return _m&&e_.isValid()&&t_.isValid()&&(e_.isBefore(t_)||e_.isSame(t_))?[_s,{text:_m,period:{start:e_.format(DATE_FORMAT),end:t_.format(DATE_FORMAT)}}]:void 0}});Wt=_i==null?void 0:_i.filter(_s=>!!_s)}else Wt=Object.entries(DEFAULT_SHORTCUTS);return Wt},[$]),Vt=reactExports.useCallback(Wt=>(Wt==null?void 0:Wt.text)??null,[]);return _t!=null&&_t.length?React.createElement("div",{className:"md:border-b mb-3 lg:mb-0 lg:border-r lg:border-b-0 border-gray-300 dark:border-gray-700 pr-1"},React.createElement("ul",{className:"w-full tracking-wide flex flex-wrap lg:flex-col pb-1 lg:pb-0"},_t==null?void 0:_t.map(([Wt,_i],_s)=>Array.isArray(_i)?_i.map((_c,_l)=>React.createElement(ItemTemplate,{key:_l,item:_c},React.createElement(React.Fragment,null,Wt==="past"&&($!=null&&$.shortcuts)&&Wt in $.shortcuts&&_c.daysNumber?_e($.shortcuts[Wt],_c.daysNumber):_c.text))):React.createElement(ItemTemplate,{key:_s,item:_i},React.createElement(React.Fragment,null,$!=null&&$.shortcuts&&Wt in $.shortcuts?typeof $.shortcuts[Wt]=="object"?Vt(_i):$.shortcuts[Wt]:Vt(_i)))))):null};function useOnClickOutside($,_e){reactExports.useEffect(()=>{const _t=Vt=>{!$.current||$.current.contains(Vt.target)||_e(Vt)};return document.addEventListener("mousedown",_t),document.addEventListener("touchstart",_t),()=>{document.removeEventListener("mousedown",_t),document.removeEventListener("touchstart",_t)}},[$,_e])}const Datepicker=({primaryColor:$="blue",value:_e=null,onChange:_t,useRange:Vt=!0,showFooter:Wt=!1,showShortcuts:_i=!1,configs:_s=void 0,asSingle:_c=!1,placeholder:_l=null,separator:_d="~",startFrom:_m=null,i18n:e_=LANGUAGE,disabled:t_=!1,inputClassName:i_=null,containerClassName:c_=null,toggleClassName:h_=null,toggleIcon:y_=void 0,displayFormat:l_=DATE_FORMAT,readOnly:d_=!1,minDate:f_=null,maxDate:S_=null,disabledDates:T_=null,inputId:R_,inputName:C_,startWeekOn:j_="sun",classNames:W_=void 0,popoverDirection:A_=void 0})=>{const $_=reactExports.useRef(null),q_=reactExports.useRef(null),G_=reactExports.useRef(null),[I_,x_]=reactExports.useState(_m&&require$$0(_m).isValid()?require$$0(_m):require$$0()),[Y_,z_]=reactExports.useState(nextMonth(I_)),[B_,Q_]=reactExports.useState({start:null,end:null}),[K_,rE]=reactExports.useState(null),[aE,gE]=reactExports.useState(""),[kE,xE]=reactExports.useState(React.createRef());useOnClickOutside($_,()=>{$_.current&&YE()});const YE=reactExports.useCallback(()=>{const RE=q_.current,VE=G_.current;VE&&RE&&RE.classList.contains("block")&&(RE.classList.remove("block"),RE.classList.remove("translate-y-0"),RE.classList.remove("opacity-1"),RE.classList.add("translate-y-4"),RE.classList.add("opacity-0"),setTimeout(()=>{RE.classList.remove("bottom-full"),RE.classList.add("hidden"),RE.classList.add("mb-2.5"),RE.classList.add("mt-2.5"),VE.classList.remove("-bottom-2"),VE.classList.remove("border-r"),VE.classList.remove("border-b"),VE.classList.add("border-l"),VE.classList.add("border-t")},300))},[]),d0=reactExports.useCallback(RE=>{const VE=require$$0(formatDate(RE)),jS=require$$0(formatDate(Y_));(VE.isSame(jS)||VE.isAfter(jS))&&z_(nextMonth(RE)),x_(RE)},[Y_]),M0=reactExports.useCallback(()=>{x_(previousMonth(I_))},[I_]),u0=reactExports.useCallback(()=>{d0(nextMonth(I_))},[I_,d0]),D0=reactExports.useCallback(RE=>{d0(require$$0(`${I_.year()}-${RE<10?"0":""}${RE}-01`))},[I_,d0]),C0=reactExports.useCallback(RE=>{d0(require$$0(`${RE}-${I_.month()+1}-01`))},[I_,d0]),QE=reactExports.useCallback(RE=>{const VE=require$$0(formatDate(RE,l_)),jS=require$$0(formatDate(I_,l_));(VE.isSame(jS)||VE.isBefore(jS))&&x_(previousMonth(RE)),z_(RE)},[I_,l_]),f0=reactExports.useCallback(()=>{QE(previousMonth(Y_))},[Y_,QE]),$E=reactExports.useCallback(()=>{z_(nextMonth(Y_))},[Y_]),m0=reactExports.useCallback(RE=>{QE(require$$0(`${Y_.year()}-${RE<10?"0":""}${RE}-01`))},[Y_,QE]),SE=reactExports.useCallback(RE=>{QE(require$$0(`${RE}-${Y_.month()+1}-01`))},[Y_,QE]);reactExports.useEffect(()=>{const RE=$_.current,VE=q_.current,jS=G_.current;if(RE&&VE&&jS){const IT=RE.getBoundingClientRect(),_w=window.innerWidth/2;(IT.right-IT.x)/2+IT.x>_w&&(jS.classList.add("right-0"),jS.classList.add("mr-3.5"),VE.classList.add("right-0"))}},[]),reactExports.useEffect(()=>{if(_e&&_e.startDate&&_e.endDate){const RE=require$$0(_e.startDate),VE=require$$0(_e.endDate);RE.isValid()&&VE.isValid()&&(RE.isSame(VE)||RE.isBefore(VE))&&(Q_({start:formatDate(RE),end:formatDate(VE)}),gE(`${formatDate(RE,l_)}${_c?"":` ${_d} ${formatDate(VE,l_)}`}`))}_e&&_e.startDate===null&&_e.endDate===null&&(Q_({start:null,end:null}),gE(""))},[_c,_e,l_,_d]),reactExports.useEffect(()=>{_m&&require$$0(_m).isValid()&&((_e==null?void 0:_e.startDate)!=null?(x_(require$$0(_e.startDate)),z_(nextMonth(require$$0(_e.startDate)))):(x_(require$$0(_m)),z_(nextMonth(require$$0(_m)))))},[_m,_e]);const zE=reactExports.useMemo(()=>COLORS.includes($)?$:DEFAULT_COLOR,[$]),N0=reactExports.useMemo(()=>({asSingle:_c,primaryColor:zE,configs:_s,calendarContainer:q_,arrowContainer:G_,hideDatepicker:YE,period:B_,changePeriod:RE=>Q_(RE),dayHover:K_,changeDayHover:RE=>rE(RE),inputText:aE,changeInputText:RE=>gE(RE),updateFirstDate:RE=>d0(RE),changeDatepickerValue:_t,showFooter:Wt,placeholder:_l,separator:_d,i18n:e_,value:_e,disabled:t_,inputClassName:i_,containerClassName:c_,toggleClassName:h_,toggleIcon:y_,readOnly:d_,displayFormat:l_,minDate:f_,maxDate:S_,disabledDates:T_,inputId:R_,inputName:C_,startWeekOn:j_,classNames:W_,onChange:_t,input:kE,popoverDirection:A_}),[_c,zE,_s,YE,B_,K_,aE,_t,Wt,_l,_d,e_,_e,t_,i_,c_,h_,y_,d_,l_,d0,f_,S_,T_,R_,C_,j_,W_,kE,A_]),K0=reactExports.useMemo(()=>{const RE="relative w-full text-gray-700";return typeof c_=="function"?c_(RE):typeof c_=="string"&&c_!==""?c_:RE},[c_]);return React.createElement(DatepickerContext.Provider,{value:N0},React.createElement("div",{className:K0,ref:$_},React.createElement(Input,{setContextRef:xE}),React.createElement("div",{className:"transition-all ease-out duration-300 absolute z-10 mt-[1px] text-sm lg:text-xs 2xl:text-sm translate-y-4 opacity-0 hidden",ref:q_},React.createElement(Arrow,{ref:G_}),React.createElement("div",{className:"mt-2.5 shadow-sm border border-gray-300 px-1 py-0.5 bg-white dark:bg-slate-800 dark:text-white dark:border-slate-600 rounded-lg"},React.createElement("div",{className:"flex flex-col lg:flex-row py-2"},_i&&React.createElement(Shortcuts,null),React.createElement("div",{className:`flex items-stretch flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-1.5 ${_i?"md:pl-2":"md:pl-1"} pr-2 lg:pr-1`},React.createElement(Calendar,{date:I_,onClickPrevious:M0,onClickNext:u0,changeMonth:D0,changeYear:C0}),Vt&&React.createElement(React.Fragment,null,React.createElement("div",{className:"flex items-center"},React.createElement(VerticalDash,null)),React.createElement(Calendar,{date:Y_,onClickPrevious:f0,onClickNext:$E,changeMonth:m0,changeYear:SE})))),Wt&&React.createElement(Footer,null)))))};var afExports={},af$2={get exports(){return afExports},set exports($){afExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"af",weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),weekStart:1,weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"}};return Wt.default.locale(_i,null,!0),_i})})(af$2);var af=afExports,af$1=_mergeNamespaces$1({__proto__:null,default:af},[afExports]),amExports={},am$2={get exports(){return amExports},set exports($){amExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"am",weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),months:"___________".split("_"),monthsShort:"___________".split("_"),weekStart:1,yearStart:4,relativeTime:{future:"%s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"MMMM D  YYYY",LLL:"MMMM D  YYYY HH:mm",LLLL:"dddd  MMMM D  YYYY HH:mm"},ordinal:function(_s){return _s+""}};return Wt.default.locale(_i,null,!0),_i})})(am$2);var am=amExports,am$1=_mergeNamespaces$1({__proto__:null,default:am},[amExports]),arDzExports={},arDz$2={get exports(){return arDzExports},set exports($){arDzExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"ar-dz",weekdays:"______".split("_"),months:"___________".split("_"),weekdaysShort:"______".split("_"),monthsShort:"___________".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiem:function(_s){return _s>12?"":""},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(arDz$2);var arDz=arDzExports,arDz$1=_mergeNamespaces$1({__proto__:null,default:arDz},[arDzExports]),arIqExports={},arIq$2={get exports(){return arIqExports},set exports($){arIqExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"ar-iq",weekdays:"______".split("_"),months:" _________ _  _ ".split("_"),weekStart:1,weekdaysShort:"______".split("_"),monthsShort:" _________ _  _ ".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiem:function(_s){return _s>12?"":""},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(arIq$2);var arIq=arIqExports,arIq$1=_mergeNamespaces$1({__proto__:null,default:arIq},[arIqExports]),arKwExports={},arKw$2={get exports(){return arKwExports},set exports($){arKwExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"ar-kw",weekdays:"______".split("_"),months:"___________".split("_"),weekdaysShort:"______".split("_"),monthsShort:"___________".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiem:function(_s){return _s>12?"":""},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(arKw$2);var arKw=arKwExports,arKw$1=_mergeNamespaces$1({__proto__:null,default:arKw},[arKwExports]),arLyExports={},arLy$2={get exports(){return arLyExports},set exports($){arLyExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"ar-ly",weekdays:"______".split("_"),months:"___________".split("_"),weekStart:6,weekdaysShort:"______".split("_"),monthsShort:"___________".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},meridiem:function(_s){return _s>12?"":""},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"}};return Wt.default.locale(_i,null,!0),_i})})(arLy$2);var arLy=arLyExports,arLy$1=_mergeNamespaces$1({__proto__:null,default:arLy},[arLyExports]),arMaExports={},arMa$2={get exports(){return arMaExports},set exports($){arMaExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"ar-ma",weekdays:"______".split("_"),months:"___________".split("_"),weekStart:6,weekdaysShort:"______".split("_"),monthsShort:"___________".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiem:function(_s){return _s>12?"":""},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(arMa$2);var arMa=arMaExports,arMa$1=_mergeNamespaces$1({__proto__:null,default:arMa},[arMaExports]),arSaExports={},arSa$2={get exports(){return arSaExports},set exports($){arSaExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"ar-sa",weekdays:"______".split("_"),months:"___________".split("_"),weekdaysShort:"______".split("_"),monthsShort:"___________".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiem:function(_s){return _s>12?"":""},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(arSa$2);var arSa=arSaExports,arSa$1=_mergeNamespaces$1({__proto__:null,default:arSa},[arSaExports]),arTnExports={},arTn$2={get exports(){return arTnExports},set exports($){arTnExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"ar-tn",weekdays:"______".split("_"),months:"___________".split("_"),weekStart:1,weekdaysShort:"______".split("_"),monthsShort:"___________".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiem:function(_s){return _s>12?"":""},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(arTn$2);var arTn=arTnExports,arTn$1=_mergeNamespaces$1({__proto__:null,default:arTn},[arTnExports]),arExports={},ar$2={get exports(){return arExports},set exports($){arExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_d){return _d&&typeof _d=="object"&&"default"in _d?_d:{default:_d}}var Wt=Vt(_t),_i="___________".split("_"),_s={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},_c={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},_l={name:"ar",weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),months:_i,monthsShort:_i,weekStart:6,relativeTime:{future:" %s",past:" %s",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(_d){return _d.replace(/[]/g,function(_m){return _c[_m]}).replace(//g,",")},postformat:function(_d){return _d.replace(/\d/g,function(_m){return _s[_m]}).replace(/,/g,"")},ordinal:function(_d){return _d},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"}};return Wt.default.locale(_l,null,!0),_l})})(ar$2);var ar=arExports,ar$1=_mergeNamespaces$1({__proto__:null,default:ar},[arExports]),azExports={},az$2={get exports(){return azExports},set exports($){azExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"az",weekdays:"Bazar_Bazar ertsi_rnb axam_rnb_Cm axam_Cm_nb".split("_"),weekdaysShort:"Baz_BzE_Ax_r_CAx_Cm_n".split("_"),weekdaysMin:"Bz_BE_A__CA_C_".split("_"),months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., H:mm",LLLL:"dddd, D MMMM YYYY ., H:mm"},relativeTime:{future:"%s sonra",past:"%s vvl",s:"bir ne saniy",m:"bir dqiq",mm:"%d dqiq",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},ordinal:function(_s){return _s}};return Wt.default.locale(_i,null,!0),_i})})(az$2);var az=azExports,az$1=_mergeNamespaces$1({__proto__:null,default:az},[azExports]),bgExports={},bg$2={get exports(){return bgExports},set exports($){bgExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"bg",weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),months:"___________".split("_"),monthsShort:"___________".split("_"),weekStart:1,ordinal:function(_s){var _c=_s%100;if(_c>10&&_c<20)return _s+"-";var _l=_s%10;return _l===1?_s+"-":_l===2?_s+"-":_l===7||_l===8?_s+"-":_s+"-"},formats:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(bg$2);var bg=bgExports,bg$1=_mergeNamespaces$1({__proto__:null,default:bg},[bgExports]),biExports={},bi$2={get exports(){return biExports},set exports($){biExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"bi",weekdays:"Sande_Mande_Tusde_Wenesde_Tosde_Fraede_Sarade".split("_"),months:"Januari_Februari_Maj_Eprel_Mei_Jun_Julae_Okis_Septemba_Oktoba_Novemba_Disemba".split("_"),weekStart:1,weekdaysShort:"San_Man_Tus_Wen_Tos_Frae_Sar".split("_"),monthsShort:"Jan_Feb_Maj_Epr_Mai_Jun_Jul_Oki_Sep_Okt_Nov_Dis".split("_"),weekdaysMin:"San_Ma_Tu_We_To_Fr_Sar".split("_"),ordinal:function(_s){return _s},formats:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},relativeTime:{future:"lo %s",past:"%s bifo",s:"sam seken",m:"wan minit",mm:"%d minit",h:"wan haoa",hh:"%d haoa",d:"wan dei",dd:"%d dei",M:"wan manis",MM:"%d manis",y:"wan yia",yy:"%d yia"}};return Wt.default.locale(_i,null,!0),_i})})(bi$2);var bi=biExports,bi$1=_mergeNamespaces$1({__proto__:null,default:bi},[biExports]),bmExports={},bm$2={get exports(){return bmExports},set exports($){bmExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"bm",weekdays:"Kari_Ntnn_Tarata_Araba_Alamisa_Juma_Sibiri".split("_"),months:"Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_Mkalo_Zuwnkalo_Zuluyekalo_Utikalo_Stanburukalo_kutburukalo_Nowanburukalo_Desanburukalo".split("_"),weekStart:1,weekdaysShort:"Kar_Nt_Tar_Ara_Ala_Jum_Sib".split("_"),monthsShort:"Zan_Few_Mar_Awi_M_Zuw_Zul_Uti_St_ku_Now_Des".split("_"),weekdaysMin:"Ka_Nt_Ta_Ar_Al_Ju_Si".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"MMMM [tile] D [san] YYYY",LLL:"MMMM [tile] D [san] YYYY [lr] HH:mm",LLLL:"dddd MMMM [tile] D [san] YYYY [lr] HH:mm"},relativeTime:{future:"%s kn",past:"a b %s b",s:"sanga dama dama",m:"miniti kelen",mm:"miniti %d",h:"lr kelen",hh:"lr %d",d:"tile kelen",dd:"tile %d",M:"kalo kelen",MM:"kalo %d",y:"san kelen",yy:"san %d"}};return Wt.default.locale(_i,null,!0),_i})})(bm$2);var bm=bmExports,bm$1=_mergeNamespaces$1({__proto__:null,default:bm},[bmExports]),bnBdExports={},bnBd$2={get exports(){return bnBdExports},set exports($){bnBdExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_l){return _l&&typeof _l=="object"&&"default"in _l?_l:{default:_l}}var Wt=Vt(_t),_i={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},_s={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},_c={name:"bn-bd",weekdays:"______".split("_"),months:"___________".split("_"),weekdaysShort:"______".split("_"),monthsShort:"___________".split("_"),weekdaysMin:"______".split("_"),weekStart:0,preparse:function(_l){return _l.replace(/[]/g,function(_d){return _s[_d]})},postformat:function(_l){return _l.replace(/\d/g,function(_d){return _i[_d]})},ordinal:function(_l){var _d=["","","","",""],_m=_l%100;return"["+_l+(_d[(_m-20)%10]||_d[_m]||_d[0])+"]"},formats:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY ",LL:"D MMMM YYYY ",LLL:"D MMMM YYYY , A h:mm ",LLLL:"dddd, D MMMM YYYY , A h:mm "},meridiem:function(_l){return _l<4?"":_l<6?"":_l<12?"":_l<15?"":_l<18?"":_l<20?"":""},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "}};return Wt.default.locale(_c,null,!0),_c})})(bnBd$2);var bnBd=bnBdExports,bnBd$1=_mergeNamespaces$1({__proto__:null,default:bnBd},[bnBdExports]),bnExports={},bn$2={get exports(){return bnExports},set exports($){bnExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_l){return _l&&typeof _l=="object"&&"default"in _l?_l:{default:_l}}var Wt=Vt(_t),_i={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},_s={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},_c={name:"bn",weekdays:"______".split("_"),months:"___________".split("_"),weekdaysShort:"______".split("_"),monthsShort:"___________".split("_"),weekdaysMin:"______".split("_"),preparse:function(_l){return _l.replace(/[]/g,function(_d){return _s[_d]})},postformat:function(_l){return _l.replace(/\d/g,function(_d){return _i[_d]})},ordinal:function(_l){return _l},formats:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "}};return Wt.default.locale(_c,null,!0),_c})})(bn$2);var bn=bnExports,bn$1=_mergeNamespaces$1({__proto__:null,default:bn},[bnExports]),boExports={},bo$2={get exports(){return boExports},set exports($){boExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"bo",weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),months:"___________".split("_"),monthsShort:"___________".split("_"),ordinal:function(_s){return _s},formats:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},relativeTime:{future:"%s ",past:"%s ",s:"",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"}};return Wt.default.locale(_i,null,!0),_i})})(bo$2);var bo=boExports,bo$1=_mergeNamespaces$1({__proto__:null,default:bo},[boExports]),brExports={},br$2={get exports(){return brExports},set exports($){brExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_l){return _l&&typeof _l=="object"&&"default"in _l?_l:{default:_l}}var Wt=Vt(_t);function _i(_l){return _l>9?_i(_l%10):_l}function _s(_l,_d,_m){return _l+" "+function(e_,t_){return t_===2?function(i_){return{m:"v",b:"v",d:"z"}[i_.charAt(0)]+i_.substring(1)}(e_):e_}({mm:"munutenn",MM:"miz",dd:"devezh"}[_m],_l)}var _c={name:"br",weekdays:"Sul_Lun_Meurzh_Mercher_Yaou_Gwener_Sadorn".split("_"),months:"Genver_Chwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),weekStart:1,weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),monthsShort:"Gen_Chwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),ordinal:function(_l){return _l},formats:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY h[e]mm A",LLLL:"dddd, D [a viz] MMMM YYYY h[e]mm A"},relativeTime:{future:"a-benn %s",past:"%s zo",s:"un nebeud segondenno",m:"ur vunutenn",mm:_s,h:"un eur",hh:"%d eur",d:"un devezh",dd:_s,M:"ur miz",MM:_s,y:"ur bloaz",yy:function(_l){switch(_i(_l)){case 1:case 3:case 4:case 5:case 9:return _l+" bloaz";default:return _l+" vloaz"}}},meridiem:function(_l){return _l<12?"a.m.":"g.m."}};return Wt.default.locale(_c,null,!0),_c})})(br$2);var br=brExports,br$1=_mergeNamespaces$1({__proto__:null,default:br},[brExports]),caExports={},ca$2={get exports(){return caExports},set exports($){caExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"ca",weekdays:"Diumenge_Dilluns_Dimarts_Dimecres_Dijous_Divendres_Dissabte".split("_"),weekdaysShort:"Dg._Dl._Dt._Dc._Dj._Dv._Ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),months:"Gener_Febrer_Mar_Abril_Maig_Juny_Juliol_Agost_Setembre_Octubre_Novembre_Desembre".split("_"),monthsShort:"Gen._Febr._Mar_Abr._Maig_Juny_Jul._Ag._Set._Oct._Nov._Des.".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",LLL:"D MMMM [de] YYYY [a les] H:mm",LLLL:"dddd D MMMM [de] YYYY [a les] H:mm",ll:"D MMM YYYY",lll:"D MMM YYYY, H:mm",llll:"ddd D MMM YYYY, H:mm"},relativeTime:{future:"d'aqu %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinal:function(_s){return""+_s+(_s===1||_s===3?"r":_s===2?"n":_s===4?"t":"")}};return Wt.default.locale(_i,null,!0),_i})})(ca$2);var ca=caExports,ca$1=_mergeNamespaces$1({__proto__:null,default:ca},[caExports]),csExports={},cs$2={get exports(){return csExports},set exports($){csExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_l){return _l&&typeof _l=="object"&&"default"in _l?_l:{default:_l}}var Wt=Vt(_t);function _i(_l){return _l>1&&_l<5&&~~(_l/10)!=1}function _s(_l,_d,_m,e_){var t_=_l+" ";switch(_m){case"s":return _d||e_?"pr sekund":"pr sekundami";case"m":return _d?"minuta":e_?"minutu":"minutou";case"mm":return _d||e_?t_+(_i(_l)?"minuty":"minut"):t_+"minutami";case"h":return _d?"hodina":e_?"hodinu":"hodinou";case"hh":return _d||e_?t_+(_i(_l)?"hodiny":"hodin"):t_+"hodinami";case"d":return _d||e_?"den":"dnem";case"dd":return _d||e_?t_+(_i(_l)?"dny":"dn"):t_+"dny";case"M":return _d||e_?"msc":"mscem";case"MM":return _d||e_?t_+(_i(_l)?"msce":"msc"):t_+"msci";case"y":return _d||e_?"rok":"rokem";case"yy":return _d||e_?t_+(_i(_l)?"roky":"let"):t_+"lety"}}var _c={name:"cs",weekdays:"nedle_pondl_ter_steda_tvrtek_ptek_sobota".split("_"),weekdaysShort:"ne_po_t_st_t_p_so".split("_"),weekdaysMin:"ne_po_t_st_t_p_so".split("_"),months:"leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec".split("_"),monthsShort:"led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro".split("_"),weekStart:1,yearStart:4,ordinal:function(_l){return _l+"."},formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},relativeTime:{future:"za %s",past:"ped %s",s:_s,m:_s,mm:_s,h:_s,hh:_s,d:_s,dd:_s,M:_s,MM:_s,y:_s,yy:_s}};return Wt.default.locale(_c,null,!0),_c})})(cs$2);var cs=csExports,cs$1=_mergeNamespaces$1({__proto__:null,default:cs},[csExports]),cvExports={},cv$2={get exports(){return cvExports},set exports($){cvExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"cv",weekdays:"______".split("_"),months:"___________".split("_"),weekStart:1,weekdaysShort:"______".split("_"),monthsShort:"___________".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [] MMMM [] D[-]",LLL:"YYYY [] MMMM [] D[-], HH:mm",LLLL:"dddd, YYYY [] MMMM [] D[-], HH:mm"}};return Wt.default.locale(_i,null,!0),_i})})(cv$2);var cv=cvExports,cv$1=_mergeNamespaces$1({__proto__:null,default:cv},[cvExports]),cyExports={},cy$2={get exports(){return cyExports},set exports($){cyExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"cy",weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),weekStart:1,weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},relativeTime:{future:"mewn %s",past:"%s yn l",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"}};return Wt.default.locale(_i,null,!0),_i})})(cy$2);var cy=cyExports,cy$1=_mergeNamespaces$1({__proto__:null,default:cy},[cyExports]),daExports={},da$2={get exports(){return daExports},set exports($){daExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"da",weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn._man._tirs._ons._tors._fre._lr.".split("_"),weekdaysMin:"s._ma._ti._on._to._fr._l.".split("_"),months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj_juni_juli_aug._sept._okt._nov._dec.".split("_"),weekStart:1,ordinal:function(_s){return _s+"."},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY [kl.] HH:mm"},relativeTime:{future:"om %s",past:"%s siden",s:"f sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mned",MM:"%d mneder",y:"et r",yy:"%d r"}};return Wt.default.locale(_i,null,!0),_i})})(da$2);var da=daExports,da$1=_mergeNamespaces$1({__proto__:null,default:da},[daExports]),deAtExports={},deAt$2={get exports(){return deAtExports},set exports($){deAtExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_l){return _l&&typeof _l=="object"&&"default"in _l?_l:{default:_l}}var Wt=Vt(_t),_i={s:"ein paar Sekunden",m:["eine Minute","einer Minute"],mm:"%d Minuten",h:["eine Stunde","einer Stunde"],hh:"%d Stunden",d:["ein Tag","einem Tag"],dd:["%d Tage","%d Tagen"],M:["ein Monat","einem Monat"],MM:["%d Monate","%d Monaten"],y:["ein Jahr","einem Jahr"],yy:["%d Jahre","%d Jahren"]};function _s(_l,_d,_m){var e_=_i[_m];return Array.isArray(e_)&&(e_=e_[_d?0:1]),e_.replace("%d",_l)}var _c={name:"de-at",weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),months:"Jnner_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jn._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),ordinal:function(_l){return _l+"."},weekStart:1,formats:{LTS:"HH:mm:ss",LT:"HH:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},relativeTime:{future:"in %s",past:"vor %s",s:_s,m:_s,mm:_s,h:_s,hh:_s,d:_s,dd:_s,M:_s,MM:_s,y:_s,yy:_s}};return Wt.default.locale(_c,null,!0),_c})})(deAt$2);var deAt=deAtExports,deAt$1=_mergeNamespaces$1({__proto__:null,default:deAt},[deAtExports]),deChExports={},deCh$2={get exports(){return deChExports},set exports($){deChExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_l){return _l&&typeof _l=="object"&&"default"in _l?_l:{default:_l}}var Wt=Vt(_t),_i={s:"ein paar Sekunden",m:["eine Minute","einer Minute"],mm:"%d Minuten",h:["eine Stunde","einer Stunde"],hh:"%d Stunden",d:["ein Tag","einem Tag"],dd:["%d Tage","%d Tagen"],M:["ein Monat","einem Monat"],MM:["%d Monate","%d Monaten"],y:["ein Jahr","einem Jahr"],yy:["%d Jahre","%d Jahren"]};function _s(_l,_d,_m){var e_=_i[_m];return Array.isArray(e_)&&(e_=e_[_d?0:1]),e_.replace("%d",_l)}var _c={name:"de-ch",weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),ordinal:function(_l){return _l+"."},weekStart:1,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},relativeTime:{future:"in %s",past:"vor %s",s:_s,m:_s,mm:_s,h:_s,hh:_s,d:_s,dd:_s,M:_s,MM:_s,y:_s,yy:_s}};return Wt.default.locale(_c,null,!0),_c})})(deCh$2);var deCh=deChExports,deCh$1=_mergeNamespaces$1({__proto__:null,default:deCh},[deChExports]),deExports={},de$2={get exports(){return deExports},set exports($){deExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_l){return _l&&typeof _l=="object"&&"default"in _l?_l:{default:_l}}var Wt=Vt(_t),_i={s:"ein paar Sekunden",m:["eine Minute","einer Minute"],mm:"%d Minuten",h:["eine Stunde","einer Stunde"],hh:"%d Stunden",d:["ein Tag","einem Tag"],dd:["%d Tage","%d Tagen"],M:["ein Monat","einem Monat"],MM:["%d Monate","%d Monaten"],y:["ein Jahr","einem Jahr"],yy:["%d Jahre","%d Jahren"]};function _s(_l,_d,_m){var e_=_i[_m];return Array.isArray(e_)&&(e_=e_[_d?0:1]),e_.replace("%d",_l)}var _c={name:"de",weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sept._Okt._Nov._Dez.".split("_"),ordinal:function(_l){return _l+"."},weekStart:1,yearStart:4,formats:{LTS:"HH:mm:ss",LT:"HH:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},relativeTime:{future:"in %s",past:"vor %s",s:_s,m:_s,mm:_s,h:_s,hh:_s,d:_s,dd:_s,M:_s,MM:_s,y:_s,yy:_s}};return Wt.default.locale(_c,null,!0),_c})})(de$2);var de=deExports,de$1=_mergeNamespaces$1({__proto__:null,default:de},[deExports]),dvExports={},dv$2={get exports(){return dvExports},set exports($){dvExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"dv",weekdays:"______".split("_"),months:"___________".split("_"),weekStart:7,weekdaysShort:"______".split("_"),monthsShort:"___________".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"}};return Wt.default.locale(_i,null,!0),_i})})(dv$2);var dv=dvExports,dv$1=_mergeNamespaces$1({__proto__:null,default:dv},[dvExports]),elExports={},el$2={get exports(){return elExports},set exports($){elExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"el",weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),months:"___________".split("_"),monthsShort:"___________".split("_"),ordinal:function(_s){return _s},weekStart:1,relativeTime:{future:" %s",past:" %s",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},formats:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"}};return Wt.default.locale(_i,null,!0),_i})})(el$2);var el=elExports,el$1=_mergeNamespaces$1({__proto__:null,default:el},[elExports]),enAuExports={},enAu$2={get exports(){return enAuExports},set exports($){enAuExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"en-au",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),weekStart:1,weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ordinal:function(_s){return _s},formats:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}};return Wt.default.locale(_i,null,!0),_i})})(enAu$2);var enAu=enAuExports,enAu$1=_mergeNamespaces$1({__proto__:null,default:enAu},[enAuExports]),enGbExports={},enGb$2={get exports(){return enGbExports},set exports($){enGbExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"en-gb",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekStart:1,yearStart:4,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},ordinal:function(_s){var _c=["th","st","nd","rd"],_l=_s%100;return"["+_s+(_c[(_l-20)%10]||_c[_l]||_c[0])+"]"}};return Wt.default.locale(_i,null,!0),_i})})(enGb$2);var enGb=enGbExports,enGb$1=_mergeNamespaces$1({__proto__:null,default:enGb},[enGbExports]),enIeExports={},enIe$2={get exports(){return enIeExports},set exports($){enIeExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"en-ie",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),weekStart:1,weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}};return Wt.default.locale(_i,null,!0),_i})})(enIe$2);var enIe=enIeExports,enIe$1=_mergeNamespaces$1({__proto__:null,default:enIe},[enIeExports]),enIlExports={},enIl$2={get exports(){return enIlExports},set exports($){enIlExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"en-il",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}};return Wt.default.locale(_i,null,!0),_i})})(enIl$2);var enIl=enIlExports,enIl$1=_mergeNamespaces$1({__proto__:null,default:enIl},[enIlExports]),enInExports={},enIn$2={get exports(){return enInExports},set exports($){enInExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"en-in",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekStart:1,yearStart:4,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},ordinal:function(_s){var _c=["th","st","nd","rd"],_l=_s%100;return"["+_s+(_c[(_l-20)%10]||_c[_l]||_c[0])+"]"}};return Wt.default.locale(_i,null,!0),_i})})(enIn$2);var enIn=enInExports,enIn$1=_mergeNamespaces$1({__proto__:null,default:enIn},[enInExports]),enNzExports={},enNz$2={get exports(){return enNzExports},set exports($){enNzExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"en-nz",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),weekStart:1,weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ordinal:function(_s){var _c=["th","st","nd","rd"],_l=_s%100;return"["+_s+(_c[(_l-20)%10]||_c[_l]||_c[0])+"]"},formats:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}};return Wt.default.locale(_i,null,!0),_i})})(enNz$2);var enNz=enNzExports,enNz$1=_mergeNamespaces$1({__proto__:null,default:enNz},[enNzExports]),enSgExports={},enSg$2={get exports(){return enSgExports},set exports($){enSgExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"en-sg",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),weekStart:1,weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}};return Wt.default.locale(_i,null,!0),_i})})(enSg$2);var enSg=enSgExports,enSg$1=_mergeNamespaces$1({__proto__:null,default:enSg},[enSgExports]),enTtExports={},enTt$2={get exports(){return enTtExports},set exports($){enTtExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"en-tt",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekStart:1,yearStart:4,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},ordinal:function(_s){var _c=["th","st","nd","rd"],_l=_s%100;return"["+_s+(_c[(_l-20)%10]||_c[_l]||_c[0])+"]"}};return Wt.default.locale(_i,null,!0),_i})})(enTt$2);var enTt=enTtExports,enTt$1=_mergeNamespaces$1({__proto__:null,default:enTt},[enTtExports]),enExports={},en$2={get exports(){return enExports},set exports($){enExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt()})(commonjsGlobal,function(){return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(_t){var Vt=["th","st","nd","rd"],Wt=_t%100;return"["+_t+(Vt[(Wt-20)%10]||Vt[Wt]||Vt[0])+"]"}}})})(en$2);var en=enExports,en$1=_mergeNamespaces$1({__proto__:null,default:en},[enExports]),eoExports={},eo$2={get exports(){return eoExports},set exports($){eoExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"eo",weekdays:"dimano_lundo_mardo_merkredo_ado_vendredo_sabato".split("_"),months:"januaro_februaro_marto_aprilo_majo_junio_julio_agusto_septembro_oktobro_novembro_decembro".split("_"),weekStart:1,weekdaysShort:"dim_lun_mard_merk_a_ven_sab".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_ag_sep_okt_nov_dec".split("_"),weekdaysMin:"di_lu_ma_me_a_ve_sa".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D[-a de] MMMM, YYYY",LLL:"D[-a de] MMMM, YYYY HH:mm",LLLL:"dddd, [la] D[-a de] MMMM, YYYY HH:mm"},relativeTime:{future:"post %s",past:"anta %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"}};return Wt.default.locale(_i,null,!0),_i})})(eo$2);var eo=eoExports,eo$1=_mergeNamespaces$1({__proto__:null,default:eo},[eoExports]),esDoExports={},esDo$2={get exports(){return esDoExports},set exports($){esDoExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"es-do",weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekStart:1,relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinal:function(_s){return _s+""},formats:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"}};return Wt.default.locale(_i,null,!0),_i})})(esDo$2);var esDo=esDoExports,esDo$1=_mergeNamespaces$1({__proto__:null,default:esDo},[esDoExports]),esMxExports={},esMx$2={get exports(){return esMxExports},set exports($){esMxExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"es-mx",weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinal:function(_s){return _s+""},formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"}};return Wt.default.locale(_i,null,!0),_i})})(esMx$2);var esMx=esMxExports,esMx$1=_mergeNamespaces$1({__proto__:null,default:esMx},[esMxExports]),esPrExports={},esPr$2={get exports(){return esPrExports},set exports($){esPrExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"es-pr",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"h:mm A",LTS:"h:mm:ss A",L:"MM/DD/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinal:function(_s){return _s+""}};return Wt.default.locale(_i,null,!0),_i})})(esPr$2);var esPr=esPrExports,esPr$1=_mergeNamespaces$1({__proto__:null,default:esPr},[esPrExports]),esUsExports={},esUs$2={get exports(){return esUsExports},set exports($){esUsExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"es-us",weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinal:function(_s){return _s+""},formats:{LT:"h:mm A",LTS:"h:mm:ss A",L:"MM/DD/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"}};return Wt.default.locale(_i,null,!0),_i})})(esUs$2);var esUs=esUsExports,esUs$1=_mergeNamespaces$1({__proto__:null,default:esUs},[esUsExports]),esExports={},es$2={get exports(){return esExports},set exports($){esExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinal:function(_s){return _s+""}};return Wt.default.locale(_i,null,!0),_i})})(es$2);var es=esExports,es$1=_mergeNamespaces$1({__proto__:null,default:es},[esExports]),etExports={},et$2={get exports(){return etExports},set exports($){etExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_c){return _c&&typeof _c=="object"&&"default"in _c?_c:{default:_c}}var Wt=Vt(_t);function _i(_c,_l,_d,_m){var e_={s:["mne sekundi","mni sekund","paar sekundit"],m:["he minuti","ks minut"],mm:["%d minuti","%d minutit"],h:["he tunni","tund aega","ks tund"],hh:["%d tunni","%d tundi"],d:["he peva","ks pev"],M:["kuu aja","kuu aega","ks kuu"],MM:["%d kuu","%d kuud"],y:["he aasta","aasta","ks aasta"],yy:["%d aasta","%d aastat"]};return _l?(e_[_d][2]?e_[_d][2]:e_[_d][1]).replace("%d",_c):(_m?e_[_d][0]:e_[_d][1]).replace("%d",_c)}var _s={name:"et",weekdays:"phapev_esmaspev_teisipev_kolmapev_neljapev_reede_laupev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),months:"jaanuar_veebruar_mrts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_mrts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),ordinal:function(_c){return _c+"."},weekStart:1,relativeTime:{future:"%s prast",past:"%s tagasi",s:_i,m:_i,mm:_i,h:_i,hh:_i,d:_i,dd:"%d peva",M:_i,MM:_i,y:_i,yy:_i},formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"}};return Wt.default.locale(_s,null,!0),_s})})(et$2);var et=etExports,et$1=_mergeNamespaces$1({__proto__:null,default:et},[etExports]),euExports={},eu$2={get exports(){return euExports},set exports($){euExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"eu",weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),weekStart:1,weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"}};return Wt.default.locale(_i,null,!0),_i})})(eu$2);var eu=euExports,eu$1=_mergeNamespaces$1({__proto__:null,default:eu},[euExports]),faExports={},fa$2={get exports(){return faExports},set exports($){faExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"fa",weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekStart:6,months:"___________".split("_"),monthsShort:"___________".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(fa$2);var fa=faExports,fa$1=_mergeNamespaces$1({__proto__:null,default:fa},[faExports]),fiExports={},fi$2={get exports(){return fiExports},set exports($){fiExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_c){return _c&&typeof _c=="object"&&"default"in _c?_c:{default:_c}}var Wt=Vt(_t);function _i(_c,_l,_d,_m){var e_={s:"muutama sekunti",m:"minuutti",mm:"%d minuuttia",h:"tunti",hh:"%d tuntia",d:"piv",dd:"%d piv",M:"kuukausi",MM:"%d kuukautta",y:"vuosi",yy:"%d vuotta",numbers:"nolla_yksi_kaksi_kolme_nelj_viisi_kuusi_seitsemn_kahdeksan_yhdeksn".split("_")},t_={s:"muutaman sekunnin",m:"minuutin",mm:"%d minuutin",h:"tunnin",hh:"%d tunnin",d:"pivn",dd:"%d pivn",M:"kuukauden",MM:"%d kuukauden",y:"vuoden",yy:"%d vuoden",numbers:"nollan_yhden_kahden_kolmen_neljn_viiden_kuuden_seitsemn_kahdeksan_yhdeksn".split("_")},i_=_m&&!_l?t_:e_,c_=i_[_d];return _c<10?c_.replace("%d",i_.numbers[_c]):c_.replace("%d",_c)}var _s={name:"fi",weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu".split("_"),ordinal:function(_c){return _c+"."},weekStart:1,yearStart:4,relativeTime:{future:"%s pst",past:"%s sitten",s:_i,m:_i,mm:_i,h:_i,hh:_i,d:_i,dd:_i,M:_i,MM:_i,y:_i,yy:_i},formats:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM[ta] YYYY",LLL:"D. MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, D. MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"D. MMM YYYY",lll:"D. MMM YYYY, [klo] HH.mm",llll:"ddd, D. MMM YYYY, [klo] HH.mm"}};return Wt.default.locale(_s,null,!0),_s})})(fi$2);var fi=fiExports,fi$1=_mergeNamespaces$1({__proto__:null,default:fi},[fiExports]),foExports={},fo$2={get exports(){return foExports},set exports($){foExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"fo",weekdays:"sunnudagur_mnadagur_tsdagur_mikudagur_hsdagur_frggjadagur_leygardagur".split("_"),months:"januar_februar_mars_aprl_mai_juni_juli_august_september_oktober_november_desember".split("_"),weekStart:1,weekdaysShort:"sun_mn_ts_mik_hs_fr_ley".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdaysMin:"su_m_t_mi_h_fr_le".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},relativeTime:{future:"um %s",past:"%s sani",s:"f sekund",m:"ein minuttur",mm:"%d minuttir",h:"ein tmi",hh:"%d tmar",d:"ein dagur",dd:"%d dagar",M:"ein mnaur",MM:"%d mnair",y:"eitt r",yy:"%d r"}};return Wt.default.locale(_i,null,!0),_i})})(fo$2);var fo=foExports,fo$1=_mergeNamespaces$1({__proto__:null,default:fo},[foExports]),frChExports={},frCh$2={get exports(){return frChExports},set exports($){frChExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"fr-ch",weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),weekStart:1,weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"}};return Wt.default.locale(_i,null,!0),_i})})(frCh$2);var frCh=frChExports,frCh$1=_mergeNamespaces$1({__proto__:null,default:frCh},[frChExports]),frExports={},fr$2={get exports(){return frExports},set exports($){frExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"fr",weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(_s){return""+_s+(_s===1?"er":"")}};return Wt.default.locale(_i,null,!0),_i})})(fr$2);var fr=frExports,fr$1=_mergeNamespaces$1({__proto__:null,default:fr},[frExports]),fyExports={},fy$2={get exports(){return fyExports},set exports($){fyExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"fy",weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:"jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),weekStart:1,weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",m:"ien mint",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"}};return Wt.default.locale(_i,null,!0),_i})})(fy$2);var fy=fyExports,fy$1=_mergeNamespaces$1({__proto__:null,default:fy},[fyExports]),gaExports={},ga$2={get exports(){return gaExports},set exports($){gaExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"ga",weekdays:"D Domhnaigh_D Luain_D Mirt_D Cadaoin_Dardaoin_D hAoine_D Satharn".split("_"),months:"Eanir_Feabhra_Mrta_Aibren_Bealtaine_Mitheamh_Iil_Lnasa_Men Fmhair_Deaireadh Fmhair_Samhain_Nollaig".split("_"),weekStart:1,weekdaysShort:"Dom_Lua_Mi_Ca_Da_hAo_Sat".split("_"),monthsShort:"Ean_Feab_Mrt_Aibr_Beal_Mit_Iil_Lna_Men_Deai_Samh_Noll".split("_"),weekdaysMin:"Do_Lu_M_Ce_D_hA_Sa".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},relativeTime:{future:"i %s",past:"%s  shin",s:"cpla soicind",m:"nimad",mm:"%d nimad",h:"uair an chloig",hh:"%d uair an chloig",d:"l",dd:"%d l",M:"m",MM:"%d m",y:"bliain",yy:"%d bliain"}};return Wt.default.locale(_i,null,!0),_i})})(ga$2);var ga=gaExports,ga$1=_mergeNamespaces$1({__proto__:null,default:ga},[gaExports]),gdExports={},gd$2={get exports(){return gdExports},set exports($){gdExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"gd",weekdays:"Didmhnaich_Diluain_Dimirt_Diciadain_Diardaoin_Dihaoine_Disathairne".split("_"),months:"Am Faoilleach_An Gearran_Am Mrt_An Giblean_An Citean_An t-gmhios_An t-Iuchar_An Lnastal_An t-Sultain_An Dmhair_An t-Samhain_An Dbhlachd".split("_"),weekStart:1,weekdaysShort:"Did_Dil_Dim_Dic_Dia_Dih_Dis".split("_"),monthsShort:"Faoi_Gear_Mrt_Gibl_Cit_gmh_Iuch_Ln_Sult_Dmh_Samh_Dbh".split("_"),weekdaysMin:"D_Lu_M_Ci_Ar_Ha_Sa".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mos",MM:"%d mosan",y:"bliadhna",yy:"%d bliadhna"}};return Wt.default.locale(_i,null,!0),_i})})(gd$2);var gd=gdExports,gd$1=_mergeNamespaces$1({__proto__:null,default:gd},[gdExports]),glExports={},gl$2={get exports(){return glExports},set exports($){glExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"gl",weekdays:"domingo_luns_martes_mrcores_xoves_venres_sbado".split("_"),months:"xaneiro_febreiro_marzo_abril_maio_xuo_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),weekStart:1,weekdaysShort:"dom._lun._mar._mr._xov._ven._sb.".split("_"),monthsShort:"xan._feb._mar._abr._mai._xu._xul._ago._set._out._nov._dec.".split("_"),weekdaysMin:"do_lu_ma_m_xo_ve_s".split("_"),ordinal:function(_s){return _s+""},formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"fai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"}};return Wt.default.locale(_i,null,!0),_i})})(gl$2);var gl=glExports,gl$1=_mergeNamespaces$1({__proto__:null,default:gl},[glExports]),gomLatnExports={},gomLatn$2={get exports(){return gomLatnExports},set exports($){gomLatnExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"gom-latn",weekdays:"Aitar_Somar_Mongllar_Budvar_Brestar_Sukrar_Son'var".split("_"),months:"Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr".split("_"),weekStart:1,weekdaysShort:"Ait._Som._Mon._Bud._Bre._Suk._Son.".split("_"),monthsShort:"Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.".split("_"),weekdaysMin:"Ai_Sm_Mo_Bu_Br_Su_Sn".split("_"),ordinal:function(_s){return _s},formats:{LT:"A h:mm [vazta]",LTS:"A h:mm:ss [vazta]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [vazta]",LLLL:"dddd, MMMM[achea] Do, YYYY, A h:mm [vazta]",llll:"ddd, D MMM YYYY, A h:mm [vazta]"}};return Wt.default.locale(_i,null,!0),_i})})(gomLatn$2);var gomLatn=gomLatnExports,gomLatn$1=_mergeNamespaces$1({__proto__:null,default:gomLatn},[gomLatnExports]),guExports={},gu$2={get exports(){return guExports},set exports($){guExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"gu",weekdays:"______".split("_"),months:"___________".split("_"),weekdaysShort:"______".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(gu$2);var gu=guExports,gu$1=_mergeNamespaces$1({__proto__:null,default:gu},[guExports]),heExports={},he$2={get exports(){return heExports},set exports($){heExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_l){return _l&&typeof _l=="object"&&"default"in _l?_l:{default:_l}}var Wt=Vt(_t),_i={s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",hh2:"",d:"",dd:"%d ",dd2:"",M:"",MM:"%d ",MM2:"",y:"",yy:"%d ",yy2:""};function _s(_l,_d,_m){return(_i[_m+(_l===2?"2":"")]||_i[_m]).replace("%d",_l)}var _c={name:"he",weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),months:"___________".split("_"),monthsShort:"___________".split("_"),relativeTime:{future:" %s",past:" %s",s:_s,m:_s,mm:_s,h:_s,hh:_s,d:_s,dd:_s,M:_s,MM:_s,y:_s,yy:_s},ordinal:function(_l){return _l},format:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D []MMMM YYYY",LLL:"D []MMMM YYYY HH:mm",LLLL:"dddd, D []MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D []MMMM YYYY",LLL:"D []MMMM YYYY HH:mm",LLLL:"dddd, D []MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"}};return Wt.default.locale(_c,null,!0),_c})})(he$2);var he=heExports,he$1=_mergeNamespaces$1({__proto__:null,default:he},[heExports]),hiExports={},hi$2={get exports(){return hiExports},set exports($){hiExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"hi",weekdays:"______".split("_"),months:"___________".split("_"),weekdaysShort:"______".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(hi$2);var hi=hiExports,hi$1=_mergeNamespaces$1({__proto__:null,default:hi},[hiExports]),hrExports={},hr$2={get exports(){return hrExports},set exports($){hrExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_m){return _m&&typeof _m=="object"&&"default"in _m?_m:{default:_m}}var Wt=Vt(_t),_i="sijenja_veljae_oujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),_s="sijeanj_veljaa_oujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_"),_c=/D[oD]?(\[[^[\]]*\]|\s)+MMMM?/,_l=function(_m,e_){return _c.test(e_)?_i[_m.month()]:_s[_m.month()]};_l.s=_s,_l.f=_i;var _d={name:"hr",weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),months:_l,monthsShort:"sij._velj._ou._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},relativeTime:{future:"za %s",past:"prije %s",s:"sekunda",m:"minuta",mm:"%d minuta",h:"sat",hh:"%d sati",d:"dan",dd:"%d dana",M:"mjesec",MM:"%d mjeseci",y:"godina",yy:"%d godine"},ordinal:function(_m){return _m+"."}};return Wt.default.locale(_d,null,!0),_d})})(hr$2);var hr=hrExports,hr$1=_mergeNamespaces$1({__proto__:null,default:hr},[hrExports]),htExports={},ht$2={get exports(){return htExports},set exports($){htExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"ht",weekdays:"dimanch_lendi_madi_mkredi_jedi_vandredi_samdi".split("_"),months:"janvye_fevriye_mas_avril_me_jen_jiy_out_septanm_oktb_novanm_desanm".split("_"),weekdaysShort:"dim._len._mad._mk._jed._van._sam.".split("_"),monthsShort:"jan._fev._mas_avr._me_jen_jiy._out_sept._okt._nov._des.".split("_"),weekdaysMin:"di_le_ma_m_je_va_sa".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"nan %s",past:"sa gen %s",s:"kk segond",m:"yon minit",mm:"%d minit",h:"indtan",hh:"%d z",d:"yon jou",dd:"%d jou",M:"yon mwa",MM:"%d mwa",y:"yon ane",yy:"%d ane"}};return Wt.default.locale(_i,null,!0),_i})})(ht$2);var ht=htExports,ht$1=_mergeNamespaces$1({__proto__:null,default:ht},[htExports]),huExports={},hu$2={get exports(){return huExports},set exports($){huExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"hu",weekdays:"vasrnap_htf_kedd_szerda_cstrtk_pntek_szombat".split("_"),weekdaysShort:"vas_ht_kedd_sze_cst_pn_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),months:"janur_februr_mrcius_prilis_mjus_jnius_jlius_augusztus_szeptember_oktber_november_december".split("_"),monthsShort:"jan_feb_mrc_pr_mj_jn_jl_aug_szept_okt_nov_dec".split("_"),ordinal:function(_s){return _s+"."},weekStart:1,relativeTime:{future:"%s mlva",past:"%s",s:function(_s,_c,_l,_d){return"nhny msodperc"+(_d||_c?"":"e")},m:function(_s,_c,_l,_d){return"egy perc"+(_d||_c?"":"e")},mm:function(_s,_c,_l,_d){return _s+" perc"+(_d||_c?"":"e")},h:function(_s,_c,_l,_d){return"egy "+(_d||_c?"ra":"rja")},hh:function(_s,_c,_l,_d){return _s+" "+(_d||_c?"ra":"rja")},d:function(_s,_c,_l,_d){return"egy "+(_d||_c?"nap":"napja")},dd:function(_s,_c,_l,_d){return _s+" "+(_d||_c?"nap":"napja")},M:function(_s,_c,_l,_d){return"egy "+(_d||_c?"hnap":"hnapja")},MM:function(_s,_c,_l,_d){return _s+" "+(_d||_c?"hnap":"hnapja")},y:function(_s,_c,_l,_d){return"egy "+(_d||_c?"v":"ve")},yy:function(_s,_c,_l,_d){return _s+" "+(_d||_c?"v":"ve")}},formats:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"}};return Wt.default.locale(_i,null,!0),_i})})(hu$2);var hu=huExports,hu$1=_mergeNamespaces$1({__proto__:null,default:hu},[huExports]),hyAmExports={},hyAm$2={get exports(){return hyAmExports},set exports($){hyAmExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"hy-am",weekdays:"______".split("_"),months:"___________".split("_"),weekStart:1,weekdaysShort:"______".split("_"),monthsShort:"___________".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(hyAm$2);var hyAm=hyAmExports,hyAm$1=_mergeNamespaces$1({__proto__:null,default:hyAm},[hyAmExports]),idExports={},id$2={get exports(){return idExports},set exports($){idExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"id",weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),weekStart:1,formats:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},ordinal:function(_s){return _s+"."}};return Wt.default.locale(_i,null,!0),_i})})(id$2);var id=idExports,id$1=_mergeNamespaces$1({__proto__:null,default:id},[idExports]),isExports={},is$2={get exports(){return isExports},set exports($){isExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_l){return _l&&typeof _l=="object"&&"default"in _l?_l:{default:_l}}var Wt=Vt(_t),_i={s:["nokkrar sekndur","nokkrar sekndur","nokkrum sekndum"],m:["mnta","mntu","mntu"],mm:["mntur","mntur","mntum"],h:["klukkustund","klukkustund","klukkustund"],hh:["klukkustundir","klukkustundir","klukkustundum"],d:["dagur","dag","degi"],dd:["dagar","daga","dgum"],M:["mnuur","mnu","mnui"],MM:["mnuir","mnui","mnuum"],y:["r","r","ri"],yy:["r","r","rum"]};function _s(_l,_d,_m,e_){var t_=function(i_,c_,h_,y_){var l_=y_?0:h_?1:2,d_=i_.length===2&&c_%10==1?i_[0]:i_,f_=_i[d_][l_];return i_.length===1?f_:"%d "+f_}(_m,_l,e_,_d);return t_.replace("%d",_l)}var _c={name:"is",weekdays:"sunnudagur_mnudagur_rijudagur_mivikudagur_fimmtudagur_fstudagur_laugardagur".split("_"),months:"janar_febrar_mars_aprl_ma_jn_jl_gst_september_oktber_nvember_desember".split("_"),weekStart:1,weekdaysShort:"sun_mn_ri_mi_fim_fs_lau".split("_"),monthsShort:"jan_feb_mar_apr_ma_jn_jl_g_sep_okt_nv_des".split("_"),weekdaysMin:"Su_M_r_Mi_Fi_F_La".split("_"),ordinal:function(_l){return _l},formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},relativeTime:{future:"eftir %s",past:"fyrir %s san",s:_s,m:_s,mm:_s,h:_s,hh:_s,d:_s,dd:_s,M:_s,MM:_s,y:_s,yy:_s}};return Wt.default.locale(_c,null,!0),_c})})(is$2);var is=isExports,is$1=_mergeNamespaces$1({__proto__:null,default:is},[isExports]),itChExports={},itCh$2={get exports(){return itChExports},set exports($){itChExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"it-ch",weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),weekStart:1,weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"tra %s",past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"}};return Wt.default.locale(_i,null,!0),_i})})(itCh$2);var itCh=itChExports,itCh$1=_mergeNamespaces$1({__proto__:null,default:itCh},[itChExports]),itExports={},it$2={get exports(){return itExports},set exports($){itExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"it",weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),weekStart:1,monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"tra %s",past:"%s fa",s:"qualche secondo",m:"un minuto",mm:"%d minuti",h:"un' ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinal:function(_s){return _s+""}};return Wt.default.locale(_i,null,!0),_i})})(it$2);var it=itExports,it$1=_mergeNamespaces$1({__proto__:null,default:it},[itExports]),jaExports={},ja$2={get exports(){return jaExports},set exports($){jaExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"ja",weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),ordinal:function(_s){return _s+""},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMD dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMD(ddd) HH:mm"},meridiem:function(_s){return _s<12?"":""},relativeTime:{future:"%s",past:"%s",s:"",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}};return Wt.default.locale(_i,null,!0),_i})})(ja$2);var ja=jaExports,ja$1=_mergeNamespaces$1({__proto__:null,default:ja},[jaExports]),jvExports={},jv$2={get exports(){return jvExports},set exports($){jvExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"jv",weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),weekStart:1,weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"}};return Wt.default.locale(_i,null,!0),_i})})(jv$2);var jv=jvExports,jv$1=_mergeNamespaces$1({__proto__:null,default:jv},[jvExports]),kaExports={},ka$2={get exports(){return kaExports},set exports($){kaExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"ka",weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),months:"___________".split("_"),monthsShort:"___________".split("_"),weekStart:1,formats:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},relativeTime:{future:"%s ",past:"%s ",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d  ",M:"",MM:"%d ",y:"",yy:"%d "},ordinal:function(_s){return _s}};return Wt.default.locale(_i,null,!0),_i})})(ka$2);var ka=kaExports,ka$1=_mergeNamespaces$1({__proto__:null,default:ka},[kaExports]),kkExports={},kk$2={get exports(){return kkExports},set exports($){kkExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"kk",weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),months:"___________".split("_"),monthsShort:"___________".split("_"),weekStart:1,relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"}};return Wt.default.locale(_i,null,!0),_i})})(kk$2);var kk=kkExports,kk$1=_mergeNamespaces$1({__proto__:null,default:kk},[kkExports]),koExports={},ko$2={get exports(){return koExports},set exports($){koExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"ko",weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),ordinal:function(_s){return _s},formats:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY MMMM D",LLL:"YYYY MMMM D A h:mm",LLLL:"YYYY MMMM D dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY MMMM D",lll:"YYYY MMMM D A h:mm",llll:"YYYY MMMM D dddd A h:mm"},meridiem:function(_s){return _s<12?"":""},relativeTime:{future:"%s ",past:"%s ",s:" ",m:"1",mm:"%d",h:" ",hh:"%d",d:"",dd:"%d",M:" ",MM:"%d",y:" ",yy:"%d"}};return Wt.default.locale(_i,null,!0),_i})})(ko$2);var ko=koExports,ko$1=_mergeNamespaces$1({__proto__:null,default:ko},[koExports]),kuExports={},ku$2={get exports(){return kuExports},set exports($){kuExports=$}};(function($,_e){(function(_t,Vt){Vt(_e,require$$0)})(commonjsGlobal,function(_t,Vt){function Wt(_m){return _m&&typeof _m=="object"&&"default"in _m?_m:{default:_m}}var _i=Wt(Vt),_s={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},_c={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},_l=[" ","","","","","","","",""," "," "," "],_d={name:"ku",months:_l,monthsShort:_l,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekStart:6,weekdaysMin:"______".split("_"),preparse:function(_m){return _m.replace(/[]/g,function(e_){return _c[e_]}).replace(//g,",")},postformat:function(_m){return _m.replace(/\d/g,function(e_){return _s[e_]}).replace(/,/g,"")},ordinal:function(_m){return _m},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiem:function(_m){return _m<12?".":"."},relativeTime:{future:" %s",past:" %s",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "}};_i.default.locale(_d,null,!0),_t.default=_d,_t.englishToArabicNumbersMap=_s,Object.defineProperty(_t,"__esModule",{value:!0})})})(ku$2,kuExports);var ku=getDefaultExportFromCjs(kuExports),ku$1=_mergeNamespaces$1({__proto__:null,default:ku},[kuExports]),kyExports={},ky$2={get exports(){return kyExports},set exports($){kyExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"ky",weekdays:"______".split("_"),months:"___________".split("_"),weekStart:1,weekdaysShort:"______".split("_"),monthsShort:"___________".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(ky$2);var ky=kyExports,ky$1=_mergeNamespaces$1({__proto__:null,default:ky},[kyExports]),lbExports={},lb$2={get exports(){return lbExports},set exports($){lbExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"lb",weekdays:"Sonndeg_Mindeg_Dnschdeg_Mttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),months:"Januar_Februar_Merz_Abrll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),weekStart:1,weekdaysShort:"So._M._D._M._Do._Fr._Sa.".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdaysMin:"So_M_D_M_Do_Fr_Sa".split("_"),ordinal:function(_s){return _s},formats:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"}};return Wt.default.locale(_i,null,!0),_i})})(lb$2);var lb=lbExports,lb$1=_mergeNamespaces$1({__proto__:null,default:lb},[lbExports]),loExports={},lo$2={get exports(){return loExports},set exports($){loExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"lo",weekdays:"______".split("_"),months:"___________".split("_"),weekdaysShort:"______".split("_"),monthsShort:"___________".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:" %s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(lo$2);var lo=loExports,lo$1=_mergeNamespaces$1({__proto__:null,default:lo},[loExports]),ltExports={},lt$2={get exports(){return ltExports},set exports($){ltExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_m){return _m&&typeof _m=="object"&&"default"in _m?_m:{default:_m}}var Wt=Vt(_t),_i="sausio_vasario_kovo_balandio_gegus_birelio_liepos_rugpjio_rugsjo_spalio_lapkriio_gruodio".split("_"),_s="sausis_vasaris_kovas_balandis_gegu_birelis_liepa_rugpjtis_rugsjis_spalis_lapkritis_gruodis".split("_"),_c=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/,_l=function(_m,e_){return _c.test(e_)?_i[_m.month()]:_s[_m.month()]};_l.s=_s,_l.f=_i;var _d={name:"lt",weekdays:"sekmadienis_pirmadienis_antradienis_treiadienis_ketvirtadienis_penktadienis_etadienis".split("_"),weekdaysShort:"sek_pir_ant_tre_ket_pen_e".split("_"),weekdaysMin:"s_p_a_t_k_pn_".split("_"),months:_l,monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),ordinal:function(_m){return _m+"."},weekStart:1,relativeTime:{future:"u %s",past:"prie %s",s:"kelias sekundes",m:"minut",mm:"%d minutes",h:"valand",hh:"%d valandas",d:"dien",dd:"%d dienas",M:"mnes",MM:"%d mnesius",y:"metus",yy:"%d metus"},format:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"}};return Wt.default.locale(_d,null,!0),_d})})(lt$2);var lt=ltExports,lt$1=_mergeNamespaces$1({__proto__:null,default:lt},[ltExports]),lvExports={},lv$2={get exports(){return lvExports},set exports($){lvExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"lv",weekdays:"svtdiena_pirmdiena_otrdiena_trediena_ceturtdiena_piektdiena_sestdiena".split("_"),months:"janvris_februris_marts_aprlis_maijs_jnijs_jlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),weekStart:1,weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),monthsShort:"jan_feb_mar_apr_mai_jn_jl_aug_sep_okt_nov_dec".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},relativeTime:{future:"pc %s",past:"pirms %s",s:"dam sekundm",m:"mintes",mm:"%d mintm",h:"stundas",hh:"%d stundm",d:"dienas",dd:"%d dienm",M:"mnea",MM:"%d mneiem",y:"gada",yy:"%d gadiem"}};return Wt.default.locale(_i,null,!0),_i})})(lv$2);var lv=lvExports,lv$1=_mergeNamespaces$1({__proto__:null,default:lv},[lvExports]),meExports={},me$2={get exports(){return meExports},set exports($){meExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"me",weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),weekStart:1,weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),ordinal:function(_s){return _s},formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"}};return Wt.default.locale(_i,null,!0),_i})})(me$2);var me=meExports,me$1=_mergeNamespaces$1({__proto__:null,default:me},[meExports]),miExports={},mi$2={get exports(){return miExports},set exports($){miExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"mi",weekdays:"Rtapu_Mane_Trei_Wenerei_Tite_Paraire_Htarei".split("_"),months:"Kohi-tte_Hui-tanguru_Pout-te-rangi_Paenga-whwh_Haratua_Pipiri_Hngoingoi_Here-turi-kk_Mahuru_Whiringa--nuku_Whiringa--rangi_Hakihea".split("_"),weekStart:1,weekdaysShort:"Ta_Ma_T_We_Ti_Pa_H".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_Hngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),weekdaysMin:"Ta_Ma_T_We_Ti_Pa_H".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te hkona ruarua",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"}};return Wt.default.locale(_i,null,!0),_i})})(mi$2);var mi=miExports,mi$1=_mergeNamespaces$1({__proto__:null,default:mi},[miExports]),mkExports={},mk$2={get exports(){return mkExports},set exports($){mkExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"mk",weekdays:"______".split("_"),months:"___________".split("_"),weekStart:1,weekdaysShort:"______".split("_"),monthsShort:"___________".split("_"),weekdaysMin:"e_o_____a".split("_"),ordinal:function(_s){return _s},formats:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(mk$2);var mk=mkExports,mk$1=_mergeNamespaces$1({__proto__:null,default:mk},[mkExports]),mlExports={},ml$2={get exports(){return mlExports},set exports($){mlExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"ml",weekdays:"______".split("_"),months:"___________".split("_"),weekdaysShort:"______".split("_"),monthsShort:"._._._.___._._._._._.".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"A h:mm -",LTS:"A h:mm:ss -",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -",LLLL:"dddd, D MMMM YYYY, A h:mm -"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(ml$2);var ml=mlExports,ml$1=_mergeNamespaces$1({__proto__:null,default:ml},[mlExports]),mnExports={},mn$2={get exports(){return mnExports},set exports($){mnExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"mn",weekdays:"______".split("_"),months:" _ _ _ _ _ _ _ _ _ _  _  ".split("_"),weekdaysShort:"______".split("_"),monthsShort:"1 _2 _3 _4 _5 _6 _7 _8 _9 _10 _11 _12 ".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY  MMMM D",LLL:"YYYY  MMMM D HH:mm",LLLL:"dddd, YYYY  MMMM D HH:mm"},relativeTime:{future:"%s",past:"%s",s:"",m:"",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}};return Wt.default.locale(_i,null,!0),_i})})(mn$2);var mn=mnExports,mn$1=_mergeNamespaces$1({__proto__:null,default:mn},[mnExports]),msMyExports={},msMy$2={get exports(){return msMyExports},set exports($){msMyExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"ms-my",weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),weekStart:1,weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"}};return Wt.default.locale(_i,null,!0),_i})})(msMy$2);var msMy=msMyExports,msMy$1=_mergeNamespaces$1({__proto__:null,default:msMy},[msMyExports]),msExports={},ms$2={get exports(){return msExports},set exports($){msExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"ms",weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekStart:1,formats:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH.mm",LLLL:"dddd, D MMMM YYYY HH.mm"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},ordinal:function(_s){return _s+"."}};return Wt.default.locale(_i,null,!0),_i})})(ms$2);var ms=msExports,ms$1=_mergeNamespaces$1({__proto__:null,default:ms},[msExports]),mtExports={},mt$2={get exports(){return mtExports},set exports($){mtExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"mt",weekdays:"Il-add_It-Tnejn_It-Tlieta_L-Erbga_Il-amis_Il-imga_Is-Sibt".split("_"),months:"Jannar_Frar_Marzu_April_Mejju_unju_Lulju_Awwissu_Settembru_Ottubru_Novembru_Diembru".split("_"),weekStart:1,weekdaysShort:"ad_Tne_Tli_Erb_am_im_Sib".split("_"),monthsShort:"Jan_Fra_Mar_Apr_Mej_un_Lul_Aww_Set_Ott_Nov_Di".split("_"),weekdaysMin:"a_Tn_Tl_Er_a_i_Si".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},relativeTime:{future:"f %s",past:"%s ilu",s:"ftit sekondi",m:"minuta",mm:"%d minuti",h:"siega",hh:"%d siegat",d:"urnata",dd:"%d ranet",M:"xahar",MM:"%d xhur",y:"sena",yy:"%d sni"}};return Wt.default.locale(_i,null,!0),_i})})(mt$2);var mt=mtExports,mt$1=_mergeNamespaces$1({__proto__:null,default:mt},[mtExports]),myExports={},my$2={get exports(){return myExports},set exports($){myExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"my",weekdays:"______".split("_"),months:"___________".split("_"),weekStart:1,weekdaysShort:"______".split("_"),monthsShort:"___________".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:" %s ",past:" %s ",s:".",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(my$2);var my=myExports,my$1=_mergeNamespaces$1({__proto__:null,default:my},[myExports]),nbExports={},nb$2={get exports(){return nbExports},set exports($){nbExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"nb",weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"s._ma._ti._on._to._fr._l.".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),ordinal:function(_s){return _s+"."},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en mned",MM:"%d mneder",y:"ett r",yy:"%d r"}};return Wt.default.locale(_i,null,!0),_i})})(nb$2);var nb=nbExports,nb$1=_mergeNamespaces$1({__proto__:null,default:nb},[nbExports]),neExports={},ne$2={get exports(){return neExports},set exports($){neExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"ne",weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"._._._._._._.".split("_"),months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),relativeTime:{future:"%s ",past:"%s ",s:"",m:" ",mm:"%d ",h:"",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinal:function(_s){return(""+_s).replace(/\d/g,function(_c){return""[_c]})},formats:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "}};return Wt.default.locale(_i,null,!0),_i})})(ne$2);var ne=neExports,ne$1=_mergeNamespaces$1({__proto__:null,default:ne},[neExports]),nlBeExports={},nlBe$2={get exports(){return nlBeExports},set exports($){nlBeExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"nl-be",weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),weekStart:1,weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"}};return Wt.default.locale(_i,null,!0),_i})})(nlBe$2);var nlBe=nlBeExports,nlBe$1=_mergeNamespaces$1({__proto__:null,default:nlBe},[nlBeExports]),nlExports={},nl$2={get exports(){return nlExports},set exports($){nlExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"nl",weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),ordinal:function(_s){return"["+_s+(_s===1||_s===8||_s>=20?"ste":"de")+"]"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"een minuut",mm:"%d minuten",h:"een uur",hh:"%d uur",d:"een dag",dd:"%d dagen",M:"een maand",MM:"%d maanden",y:"een jaar",yy:"%d jaar"}};return Wt.default.locale(_i,null,!0),_i})})(nl$2);var nl=nlExports,nl$1=_mergeNamespaces$1({__proto__:null,default:nl},[nlExports]),nnExports={},nn$2={get exports(){return nnExports},set exports($){nnExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"nn",weekdays:"sundag_mndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mn_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_m_ty_on_to_fr_la".split("_"),months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),ordinal:function(_s){return _s+"."},weekStart:1,relativeTime:{future:"om %s",past:"for %s sidan",s:"nokre sekund",m:"eitt minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein mnad",MM:"%d mnadar",y:"eitt r",yy:"%d r"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"}};return Wt.default.locale(_i,null,!0),_i})})(nn$2);var nn=nnExports,nn$1=_mergeNamespaces$1({__proto__:null,default:nn},[nnExports]),ocLncExports={},ocLnc$2={get exports(){return ocLncExports},set exports($){ocLncExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"oc-lnc",weekdays:"dimenge_diluns_dimars_dimcres_dijus_divendres_dissabte".split("_"),weekdaysShort:"Dg_Dl_Dm_Dc_Dj_Dv_Ds".split("_"),weekdaysMin:"dg_dl_dm_dc_dj_dv_ds".split("_"),months:"genir_febrir_mar_abrial_mai_junh_julhet_agost_setembre_octbre_novembre_decembre".split("_"),monthsShort:"gen_feb_mar_abr_mai_junh_julh_ago_set_oct_nov_dec".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",LLL:"D MMMM [de] YYYY [a] H:mm",LLLL:"dddd D MMMM [de] YYYY [a] H:mm"},relativeTime:{future:"d'aqu %s",past:"fa %s",s:"unas segondas",m:"una minuta",mm:"%d minutas",h:"una ora",hh:"%d oras",d:"un jorn",dd:"%d jorns",M:"un mes",MM:"%d meses",y:"un an",yy:"%d ans"},ordinal:function(_s){return _s+""}};return Wt.default.locale(_i,null,!0),_i})})(ocLnc$2);var ocLnc=ocLncExports,ocLnc$1=_mergeNamespaces$1({__proto__:null,default:ocLnc},[ocLncExports]),paInExports={},paIn$2={get exports(){return paInExports},set exports($){paInExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"pa-in",weekdays:"______".split("_"),months:"___________".split("_"),weekdaysShort:"______".split("_"),monthsShort:"___________".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(paIn$2);var paIn=paInExports,paIn$1=_mergeNamespaces$1({__proto__:null,default:paIn},[paInExports]),plExports={},pl$2={get exports(){return plExports},set exports($){plExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(t_){return t_&&typeof t_=="object"&&"default"in t_?t_:{default:t_}}var Wt=Vt(_t);function _i(t_){return t_%10<5&&t_%10>1&&~~(t_/10)%10!=1}function _s(t_,i_,c_){var h_=t_+" ";switch(c_){case"m":return i_?"minuta":"minut";case"mm":return h_+(_i(t_)?"minuty":"minut");case"h":return i_?"godzina":"godzin";case"hh":return h_+(_i(t_)?"godziny":"godzin");case"MM":return h_+(_i(t_)?"miesice":"miesicy");case"yy":return h_+(_i(t_)?"lata":"lat")}}var _c="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_"),_l="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),_d=/D MMMM/,_m=function(t_,i_){return _d.test(i_)?_c[t_.month()]:_l[t_.month()]};_m.s=_l,_m.f=_c;var e_={name:"pl",weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_r_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_r_Cz_Pt_So".split("_"),months:_m,monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),ordinal:function(t_){return t_+"."},weekStart:1,yearStart:4,relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:_s,mm:_s,h:_s,hh:_s,d:"1 dzie",dd:"%d dni",M:"miesic",MM:_s,y:"rok",yy:_s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"}};return Wt.default.locale(e_,null,!0),e_})})(pl$2);var pl=plExports,pl$1=_mergeNamespaces$1({__proto__:null,default:pl},[plExports]),ptBrExports={},ptBr$2={get exports(){return ptBrExports},set exports($){ptBrExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"pt-br",weekdays:"domingo_segunda-feira_tera-feira_quarta-feira_quinta-feira_sexta-feira_sbado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sb".split("_"),weekdaysMin:"Do_2_3_4_5_6_S".split("_"),months:"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),ordinal:function(_s){return _s+""},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [s] HH:mm"},relativeTime:{future:"em %s",past:"h %s",s:"poucos segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"}};return Wt.default.locale(_i,null,!0),_i})})(ptBr$2);var ptBr=ptBrExports,ptBr$1=_mergeNamespaces$1({__proto__:null,default:ptBr},[ptBrExports]),ptExports={},pt$2={get exports(){return ptExports},set exports($){ptExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"pt",weekdays:"domingo_segunda-feira_tera-feira_quarta-feira_quinta-feira_sexta-feira_sbado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sab".split("_"),weekdaysMin:"Do_2_3_4_5_6_Sa".split("_"),months:"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),ordinal:function(_s){return _s+""},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [s] HH:mm"},relativeTime:{future:"em %s",past:"h %s",s:"alguns segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"}};return Wt.default.locale(_i,null,!0),_i})})(pt$2);var pt=ptExports,pt$1=_mergeNamespaces$1({__proto__:null,default:pt},[ptExports]),rnExports={},rn$2={get exports(){return rnExports},set exports($){rnExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"rn",weekdays:"Ku wa Mungu_Ku wa Mbere_Ku wa Kabiri_Ku wa Gatatu_Ku wa Kane_Ku wa Gatanu_Ku wa Gatandatu".split("_"),weekdaysShort:"Kngu_Kmbr_Kbri_Ktat_Kkan_Ktan_Kdat".split("_"),weekdaysMin:"K7_K1_K2_K3_K4_K5_K6".split("_"),months:"Nzero_Ruhuhuma_Ntwarante_Ndamukiza_Rusama_Ruhenshi_Mukakaro_Myandagaro_Nyakanga_Gitugutu_Munyonyo_Kigarama".split("_"),monthsShort:"Nzer_Ruhuh_Ntwar_Ndam_Rus_Ruhen_Muk_Myand_Nyak_Git_Muny_Kig".split("_"),weekStart:1,ordinal:function(_s){return _s},relativeTime:{future:"mu %s",past:"%s",s:"amasegonda",m:"Umunota",mm:"%d iminota",h:"isaha",hh:"%d amasaha",d:"Umunsi",dd:"%d iminsi",M:"ukwezi",MM:"%d amezi",y:"umwaka",yy:"%d imyaka"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"}};return Wt.default.locale(_i,null,!0),_i})})(rn$2);var rn=rnExports,rn$1=_mergeNamespaces$1({__proto__:null,default:rn},[rnExports]),roExports={},ro$2={get exports(){return roExports},set exports($){roExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"ro",weekdays:"Duminic_Luni_Mari_Miercuri_Joi_Vineri_Smbt".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_S".split("_"),months:"Ianuarie_Februarie_Martie_Aprilie_Mai_Iunie_Iulie_August_Septembrie_Octombrie_Noiembrie_Decembrie".split("_"),monthsShort:"Ian._Febr._Mart._Apr._Mai_Iun._Iul._Aug._Sept._Oct._Nov._Dec.".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},relativeTime:{future:"peste %s",past:"acum %s",s:"cteva secunde",m:"un minut",mm:"%d minute",h:"o or",hh:"%d ore",d:"o zi",dd:"%d zile",M:"o lun",MM:"%d luni",y:"un an",yy:"%d ani"},ordinal:function(_s){return _s}};return Wt.default.locale(_i,null,!0),_i})})(ro$2);var ro=roExports,ro$1=_mergeNamespaces$1({__proto__:null,default:ro},[roExports]),ruExports={},ru$2={get exports(){return ruExports},set exports($){ruExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(c_){return c_&&typeof c_=="object"&&"default"in c_?c_:{default:c_}}var Wt=Vt(_t),_i="___________".split("_"),_s="___________".split("_"),_c="._._._.____._._._._.".split("_"),_l="._.__.____._._._._.".split("_"),_d=/D[oD]?(\[[^[\]]*\]|\s)+MMMM?/;function _m(c_,h_,y_){var l_,d_;return y_==="m"?h_?"":"":c_+" "+(l_=+c_,d_={mm:h_?"__":"__",hh:"__",dd:"__",MM:"__",yy:"__"}[y_].split("_"),l_%10==1&&l_%100!=11?d_[0]:l_%10>=2&&l_%10<=4&&(l_%100<10||l_%100>=20)?d_[1]:d_[2])}var e_=function(c_,h_){return _d.test(h_)?_i[c_.month()]:_s[c_.month()]};e_.s=_s,e_.f=_i;var t_=function(c_,h_){return _d.test(h_)?_c[c_.month()]:_l[c_.month()]};t_.s=_l,t_.f=_c;var i_={name:"ru",weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),months:e_,monthsShort:t_,weekStart:1,yearStart:4,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., H:mm",LLLL:"dddd, D MMMM YYYY ., H:mm"},relativeTime:{future:" %s",past:"%s ",s:" ",m:_m,mm:_m,h:"",hh:_m,d:"",dd:_m,M:"",MM:_m,y:"",yy:_m},ordinal:function(c_){return c_},meridiem:function(c_){return c_<4?"":c_<12?"":c_<17?"":""}};return Wt.default.locale(i_,null,!0),i_})})(ru$2);var ru=ruExports,ru$1=_mergeNamespaces$1({__proto__:null,default:ru},[ruExports]),rwExports={},rw$2={get exports(){return rwExports},set exports($){rwExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"rw",weekdays:"Ku Cyumweru_Kuwa Mbere_Kuwa Kabiri_Kuwa Gatatu_Kuwa Kane_Kuwa Gatanu_Kuwa Gatandatu".split("_"),months:"Mutarama_Gashyantare_Werurwe_Mata_Gicurasi_Kamena_Nyakanga_Kanama_Nzeri_Ukwakira_Ugushyingo_Ukuboza".split("_"),relativeTime:{future:"mu %s",past:"%s",s:"amasegonda",m:"Umunota",mm:"%d iminota",h:"isaha",hh:"%d amasaha",d:"Umunsi",dd:"%d iminsi",M:"ukwezi",MM:"%d amezi",y:"umwaka",yy:"%d imyaka"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},ordinal:function(_s){return _s}};return Wt.default.locale(_i,null,!0),_i})})(rw$2);var rw=rwExports,rw$1=_mergeNamespaces$1({__proto__:null,default:rw},[rwExports]),sdExports={},sd$2={get exports(){return sdExports},set exports($){sdExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"sd",weekdays:"______".split("_"),months:"___________".split("_"),weekStart:1,weekdaysShort:"______".split("_"),monthsShort:"___________".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(sd$2);var sd=sdExports,sd$1=_mergeNamespaces$1({__proto__:null,default:sd},[sdExports]),seExports={},se$2={get exports(){return seExports},set exports($){seExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"se",weekdays:"sotnabeaivi_vuossrga_maebrga_gaskavahkku_duorastat_bearjadat_lvvardat".split("_"),months:"oajagemnnu_guovvamnnu_njukamnnu_cuoomnnu_miessemnnu_geassemnnu_suoidnemnnu_borgemnnu_akamnnu_golggotmnnu_skbmamnnu_juovlamnnu".split("_"),weekStart:1,weekdaysShort:"sotn_vuos_ma_gask_duor_bear_lv".split("_"),monthsShort:"oj_guov_njuk_cuo_mies_geas_suoi_borg_ak_golg_skb_juov".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},relativeTime:{future:"%s geaes",past:"mait %s",s:"moadde sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mnnu",MM:"%d mnut",y:"okta jahki",yy:"%d jagit"}};return Wt.default.locale(_i,null,!0),_i})})(se$2);var se=seExports,se$1=_mergeNamespaces$1({__proto__:null,default:se},[seExports]),siExports={},si$2={get exports(){return siExports},set exports($){siExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"si",weekdays:"______".split("_"),months:"___________".split("_"),weekdaysShort:"______".split("_"),monthsShort:"___________".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [] dddd, a h:mm:ss"},relativeTime:{future:"%s",past:"%s ",s:" ",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"}};return Wt.default.locale(_i,null,!0),_i})})(si$2);var si=siExports,si$1=_mergeNamespaces$1({__proto__:null,default:si},[siExports]),skExports={},sk$2={get exports(){return skExports},set exports($){skExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_l){return _l&&typeof _l=="object"&&"default"in _l?_l:{default:_l}}var Wt=Vt(_t);function _i(_l){return _l>1&&_l<5&&~~(_l/10)!=1}function _s(_l,_d,_m,e_){var t_=_l+" ";switch(_m){case"s":return _d||e_?"pr seknd":"pr sekundami";case"m":return _d?"minta":e_?"mintu":"mintou";case"mm":return _d||e_?t_+(_i(_l)?"minty":"mint"):t_+"mintami";case"h":return _d?"hodina":e_?"hodinu":"hodinou";case"hh":return _d||e_?t_+(_i(_l)?"hodiny":"hodn"):t_+"hodinami";case"d":return _d||e_?"de":"dom";case"dd":return _d||e_?t_+(_i(_l)?"dni":"dn"):t_+"dami";case"M":return _d||e_?"mesiac":"mesiacom";case"MM":return _d||e_?t_+(_i(_l)?"mesiace":"mesiacov"):t_+"mesiacmi";case"y":return _d||e_?"rok":"rokom";case"yy":return _d||e_?t_+(_i(_l)?"roky":"rokov"):t_+"rokmi"}}var _c={name:"sk",weekdays:"nedea_pondelok_utorok_streda_tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_t_pi_so".split("_"),months:"janur_februr_marec_aprl_mj_jn_jl_august_september_oktber_november_december".split("_"),monthsShort:"jan_feb_mar_apr_mj_jn_jl_aug_sep_okt_nov_dec".split("_"),weekStart:1,yearStart:4,ordinal:function(_l){return _l+"."},formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},relativeTime:{future:"za %s",past:"pred %s",s:_s,m:_s,mm:_s,h:_s,hh:_s,d:_s,dd:_s,M:_s,MM:_s,y:_s,yy:_s}};return Wt.default.locale(_c,null,!0),_c})})(sk$2);var sk=skExports,sk$1=_mergeNamespaces$1({__proto__:null,default:sk},[skExports]),slExports={},sl$2={get exports(){return slExports},set exports($){slExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"sl",weekdays:"nedelja_ponedeljek_torek_sreda_etrtek_petek_sobota".split("_"),months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),weekStart:1,weekdaysShort:"ned._pon._tor._sre._et._pet._sob.".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),weekdaysMin:"ne_po_to_sr_e_pe_so".split("_"),ordinal:function(_s){return _s+"."},formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},relativeTime:{future:"ez %s",past:"pred %s",s:"nekaj sekund",m:"minuta",mm:"%d minut",h:"ura",hh:"%d ur",d:"dan",dd:"%d dni",M:"mesec",MM:"%d mesecev",y:"leto",yy:"%d let"}};return Wt.default.locale(_i,null,!0),_i})})(sl$2);var sl=slExports,sl$1=_mergeNamespaces$1({__proto__:null,default:sl},[slExports]),sqExports={},sq$2={get exports(){return sqExports},set exports($){sqExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"sq",weekdays:"E Diel_E Hn_E Mart_E Mrkur_E Enjte_E Premte_E Shtun".split("_"),months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nntor_Dhjetor".split("_"),weekStart:1,weekdaysShort:"Die_Hn_Mar_Mr_Enj_Pre_Sht".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nn_Dhj".split("_"),weekdaysMin:"D_H_Ma_M_E_P_Sh".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},relativeTime:{future:"n %s",past:"%s m par",s:"disa sekonda",m:"nj minut",mm:"%d minuta",h:"nj or",hh:"%d or",d:"nj dit",dd:"%d dit",M:"nj muaj",MM:"%d muaj",y:"nj vit",yy:"%d vite"}};return Wt.default.locale(_i,null,!0),_i})})(sq$2);var sq=sqExports,sq$1=_mergeNamespaces$1({__proto__:null,default:sq},[sqExports]),srExports={},sr$2={get exports(){return srExports},set exports($){srExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_c){return _c&&typeof _c=="object"&&"default"in _c?_c:{default:_c}}var Wt=Vt(_t),_i={words:{m:["jedan minut","jednog minuta"],mm:["%d minut","%d minuta","%d minuta"],h:["jedan sat","jednog sata"],hh:["%d sat","%d sata","%d sati"],d:["jedan dan","jednog dana"],dd:["%d dan","%d dana","%d dana"],M:["jedan mesec","jednog meseca"],MM:["%d mesec","%d meseca","%d meseci"],y:["jednu godinu","jedne godine"],yy:["%d godinu","%d godine","%d godina"]},correctGrammarCase:function(_c,_l){return _c%10>=1&&_c%10<=4&&(_c%100<10||_c%100>=20)?_c%10==1?_l[0]:_l[1]:_l[2]},relativeTimeFormatter:function(_c,_l,_d,_m){var e_=_i.words[_d];if(_d.length===1)return _d==="y"&&_l?"jedna godina":_m||_l?e_[0]:e_[1];var t_=_i.correctGrammarCase(_c,e_);return _d==="yy"&&_l&&t_==="%d godinu"?_c+" godina":t_.replace("%d",_c)}},_s={name:"sr",weekdays:"Nedelja_Ponedeljak_Utorak_Sreda_etvrtak_Petak_Subota".split("_"),weekdaysShort:"Ned._Pon._Uto._Sre._et._Pet._Sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),months:"Januar_Februar_Mart_April_Maj_Jun_Jul_Avgust_Septembar_Oktobar_Novembar_Decembar".split("_"),monthsShort:"Jan._Feb._Mar._Apr._Maj_Jun_Jul_Avg._Sep._Okt._Nov._Dec.".split("_"),weekStart:1,relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:_i.relativeTimeFormatter,mm:_i.relativeTimeFormatter,h:_i.relativeTimeFormatter,hh:_i.relativeTimeFormatter,d:_i.relativeTimeFormatter,dd:_i.relativeTimeFormatter,M:_i.relativeTimeFormatter,MM:_i.relativeTimeFormatter,y:_i.relativeTimeFormatter,yy:_i.relativeTimeFormatter},ordinal:function(_c){return _c+"."},formats:{LT:"H:mm",LTS:"H:mm:ss",L:"D. M. YYYY.",LL:"D. MMMM YYYY.",LLL:"D. MMMM YYYY. H:mm",LLLL:"dddd, D. MMMM YYYY. H:mm"}};return Wt.default.locale(_s,null,!0),_s})})(sr$2);var sr=srExports,sr$1=_mergeNamespaces$1({__proto__:null,default:sr},[srExports]),srCyrlExports={},srCyrl$2={get exports(){return srCyrlExports},set exports($){srCyrlExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_c){return _c&&typeof _c=="object"&&"default"in _c?_c:{default:_c}}var Wt=Vt(_t),_i={words:{m:[" "," "],mm:["%d ","%d ","%d "],h:[" "," "],hh:["%d ","%d ","%d "],d:[" "," "],dd:["%d ","%d ","%d "],M:[" "," "],MM:["%d ","%d ","%d "],y:[" "," "],yy:["%d ","%d ","%d "]},correctGrammarCase:function(_c,_l){return _c%10>=1&&_c%10<=4&&(_c%100<10||_c%100>=20)?_c%10==1?_l[0]:_l[1]:_l[2]},relativeTimeFormatter:function(_c,_l,_d,_m){var e_=_i.words[_d];if(_d.length===1)return _d==="y"&&_l?" ":_m||_l?e_[0]:e_[1];var t_=_i.correctGrammarCase(_c,e_);return _d==="yy"&&_l&&t_==="%d "?_c+" ":t_.replace("%d",_c)}},_s={name:"sr-cyrl",weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"______".split("_"),months:"___________".split("_"),monthsShort:"._._._.____._._._._.".split("_"),weekStart:1,relativeTime:{future:" %s",past:" %s",s:" ",m:_i.relativeTimeFormatter,mm:_i.relativeTimeFormatter,h:_i.relativeTimeFormatter,hh:_i.relativeTimeFormatter,d:_i.relativeTimeFormatter,dd:_i.relativeTimeFormatter,M:_i.relativeTimeFormatter,MM:_i.relativeTimeFormatter,y:_i.relativeTimeFormatter,yy:_i.relativeTimeFormatter},ordinal:function(_c){return _c+"."},formats:{LT:"H:mm",LTS:"H:mm:ss",L:"D. M. YYYY.",LL:"D. MMMM YYYY.",LLL:"D. MMMM YYYY. H:mm",LLLL:"dddd, D. MMMM YYYY. H:mm"}};return Wt.default.locale(_s,null,!0),_s})})(srCyrl$2);var srCyrl=srCyrlExports,srCyrl$1=_mergeNamespaces$1({__proto__:null,default:srCyrl},[srCyrlExports]),ssExports={},ss$2={get exports(){return ssExports},set exports($){ssExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"ss",weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),weekStart:1,weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),ordinal:function(_s){return _s},formats:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"}};return Wt.default.locale(_i,null,!0),_i})})(ss$2);var ss=ssExports,ss$1=_mergeNamespaces$1({__proto__:null,default:ss},[ssExports]),svFiExports={},svFi$2={get exports(){return svFiExports},set exports($){svFiExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"sv-fi",weekdays:"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_mn_tis_ons_tor_fre_lr".split("_"),weekdaysMin:"s_m_ti_on_to_fr_l".split("_"),months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekStart:1,yearStart:4,ordinal:function(_s){var _c=_s%10;return"["+_s+(_c===1||_c===2?"a":"e")+"]"},formats:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY, [kl.] HH.mm",LLLL:"dddd, D. MMMM YYYY, [kl.] HH.mm",l:"D.M.YYYY",ll:"D. MMM YYYY",lll:"D. MMM YYYY, [kl.] HH.mm",llll:"ddd, D. MMM YYYY, [kl.] HH.mm"},relativeTime:{future:"om %s",past:"fr %s sedan",s:"ngra sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mnad",MM:"%d mnader",y:"ett r",yy:"%d r"}};return Wt.default.locale(_i,null,!0),_i})})(svFi$2);var svFi=svFiExports,svFi$1=_mergeNamespaces$1({__proto__:null,default:svFi},[svFiExports]),svExports={},sv$2={get exports(){return svExports},set exports($){svExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"sv",weekdays:"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_mn_tis_ons_tor_fre_lr".split("_"),weekdaysMin:"s_m_ti_on_to_fr_l".split("_"),months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekStart:1,yearStart:4,ordinal:function(_s){var _c=_s%10;return"["+_s+(_c===1||_c===2?"a":"e")+"]"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},relativeTime:{future:"om %s",past:"fr %s sedan",s:"ngra sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mnad",MM:"%d mnader",y:"ett r",yy:"%d r"}};return Wt.default.locale(_i,null,!0),_i})})(sv$2);var sv=svExports,sv$1=_mergeNamespaces$1({__proto__:null,default:sv},[svExports]),swExports={},sw$2={get exports(){return swExports},set exports($){swExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"sw",weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekStart:1,ordinal:function(_s){return _s},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"masiku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"}};return Wt.default.locale(_i,null,!0),_i})})(sw$2);var sw=swExports,sw$1=_mergeNamespaces$1({__proto__:null,default:sw},[swExports]),taExports={},ta$2={get exports(){return taExports},set exports($){taExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"ta",weekdays:"______".split("_"),months:"___________".split("_"),weekdaysShort:"______".split("_"),monthsShort:"___________".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:" ",mm:"%d ",h:"  ",hh:"%d  ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(ta$2);var ta=taExports,ta$1=_mergeNamespaces$1({__proto__:null,default:ta},[taExports]),teExports={},te$2={get exports(){return teExports},set exports($){teExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"te",weekdays:"______".split("_"),months:"___________".split("_"),weekdaysShort:"______".split("_"),monthsShort:"._.__.____._._._._.".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(te$2);var te=teExports,te$1=_mergeNamespaces$1({__proto__:null,default:te},[teExports]),tgExports={},tg$2={get exports(){return tgExports},set exports($){tgExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"tg",weekdays:"______".split("_"),months:"___________".split("_"),weekStart:1,weekdaysShort:"______".split("_"),monthsShort:"___________".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(tg$2);var tg=tgExports,tg$1=_mergeNamespaces$1({__proto__:null,default:tg},[tgExports]),thExports={},th$2={get exports(){return thExports},set exports($){thExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"th",weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"._._._._._._.".split("_"),months:"___________".split("_"),monthsShort:".._.._.._.._.._.._.._.._.._.._.._..".split("_"),formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY  H:mm",LLLL:"dddd D MMMM YYYY  H:mm"},relativeTime:{future:" %s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},ordinal:function(_s){return _s+"."}};return Wt.default.locale(_i,null,!0),_i})})(th$2);var th=thExports,th$1=_mergeNamespaces$1({__proto__:null,default:th},[thExports]),tkExports={},tk$2={get exports(){return tkExports},set exports($){tkExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"tk",weekdays:"ekenbe_Duenbe_Sienbe_arenbe_Penenbe_Anna_enbe".split("_"),weekdaysShort:"ek_Du_Si_ar_Pen_Ann_en".split("_"),weekdaysMin:"k_D_S_r_Pn_An_n".split("_"),months:"anwar_Fewral_Mart_Aprel_Ma_Iun_Iul_Awgust_Sentabr_Oktabr_Noabr_Dekabr".split("_"),monthsShort:"an_Few_Mar_Apr_Ma_In_Il_Awg_Sen_Okt_No_Dek".split("_"),weekStart:1,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},relativeTime:{future:"%s so",past:"%s ",s:"birne sekunt",m:"bir minut",mm:"%d minut",h:"bir sagat",hh:"%d sagat",d:"bir gn",dd:"%d gn",M:"bir a",MM:"%d a",y:"bir yl",yy:"%d yl"},ordinal:function(_s){return _s+"."}};return Wt.default.locale(_i,null,!0),_i})})(tk$2);var tk=tkExports,tk$1=_mergeNamespaces$1({__proto__:null,default:tk},[tkExports]),tlPhExports={},tlPh$2={get exports(){return tlPhExports},set exports($){tlPhExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"tl-ph",weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),weekStart:1,weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"}};return Wt.default.locale(_i,null,!0),_i})})(tlPh$2);var tlPh=tlPhExports,tlPh$1=_mergeNamespaces$1({__proto__:null,default:tlPh},[tlPhExports]),tlhExports={},tlh$2={get exports(){return tlhExports},set exports($){tlhExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"tlh",weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),months:"tera jar wa_tera jar cha_tera jar wej_tera jar loS_tera jar vagh_tera jar jav_tera jar Soch_tera jar chorgh_tera jar Hut_tera jar wamaH_tera jar wamaH wa_tera jar wamaH cha".split("_"),weekStart:1,weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),monthsShort:"jar wa_jar cha_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wamaH_jar wamaH wa_jar wamaH cha".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"}};return Wt.default.locale(_i,null,!0),_i})})(tlh$2);var tlh=tlhExports,tlh$1=_mergeNamespaces$1({__proto__:null,default:tlh},[tlhExports]),trExports={},tr$2={get exports(){return trExports},set exports($){trExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"tr",weekdays:"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_ar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),months:"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),monthsShort:"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara".split("_"),weekStart:1,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},relativeTime:{future:"%s sonra",past:"%s nce",s:"birka saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir yl",yy:"%d yl"},ordinal:function(_s){return _s+"."}};return Wt.default.locale(_i,null,!0),_i})})(tr$2);var tr=trExports,tr$1=_mergeNamespaces$1({__proto__:null,default:tr},[trExports]),tzlExports={},tzl$2={get exports(){return tzlExports},set exports($){tzlExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"tzl",weekdays:"Sladi_Lnei_Maitzi_Mrcuri_Xhadi_Vineri_Sturi".split("_"),months:"Januar_Fevraglh_Mar_Avru_Mai_Gn_Julia_Guscht_Setemvar_Listopts_Noemvar_Zecemvar".split("_"),weekStart:1,weekdaysShort:"Sl_Ln_Mai_Mr_Xh_Vi_St".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gn_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdaysMin:"S_L_Ma_M_Xh_Vi_S".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"}};return Wt.default.locale(_i,null,!0),_i})})(tzl$2);var tzl=tzlExports,tzl$1=_mergeNamespaces$1({__proto__:null,default:tzl},[tzlExports]),tzmLatnExports={},tzmLatn$2={get exports(){return tzmLatnExports},set exports($){tzmLatnExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"tzm-latn",weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),months:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),weekStart:6,weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),monthsShort:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",m:"minu",mm:"%d minu",h:"saa",hh:"%d tassain",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"}};return Wt.default.locale(_i,null,!0),_i})})(tzmLatn$2);var tzmLatn=tzmLatnExports,tzmLatn$1=_mergeNamespaces$1({__proto__:null,default:tzmLatn},[tzmLatnExports]),tzmExports={},tzm$2={get exports(){return tzmExports},set exports($){tzmExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"tzm",weekdays:"______".split("_"),months:"___________".split("_"),weekStart:6,weekdaysShort:"______".split("_"),monthsShort:"___________".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"   %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d o",M:"o",MM:"%d ",y:"",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(tzm$2);var tzm=tzmExports,tzm$1=_mergeNamespaces$1({__proto__:null,default:tzm},[tzmExports]),ugCnExports={},ugCn$2={get exports(){return ugCnExports},set exports($){ugCnExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"ug-cn",weekdays:"______".split("_"),months:"___________".split("_"),weekStart:1,weekdaysShort:"______".split("_"),monthsShort:"___________".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY-M-D-",LLL:"YYYY-M-D- HH:mm",LLLL:"dddd YYYY-M-D- HH:mm"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(ugCn$2);var ugCn=ugCnExports,ugCn$1=_mergeNamespaces$1({__proto__:null,default:ugCn},[ugCnExports]),ukExports={},uk$2={get exports(){return ukExports},set exports($){ukExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(e_){return e_&&typeof e_=="object"&&"default"in e_?e_:{default:e_}}var Wt=Vt(_t),_i="___________".split("_"),_s="___________".split("_"),_c=/D[oD]?(\[[^[\]]*\]|\s)+MMMM?/;function _l(e_,t_,i_){var c_,h_;return i_==="m"?t_?"":"":i_==="h"?t_?"":"":e_+" "+(c_=+e_,h_={ss:t_?"__":"__",mm:t_?"__":"__",hh:t_?"__":"__",dd:"__",MM:"__",yy:"__"}[i_].split("_"),c_%10==1&&c_%100!=11?h_[0]:c_%10>=2&&c_%10<=4&&(c_%100<10||c_%100>=20)?h_[1]:h_[2])}var _d=function(e_,t_){return _c.test(t_)?_i[e_.month()]:_s[e_.month()]};_d.s=_s,_d.f=_i;var _m={name:"uk",weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),months:_d,monthsShort:"___________".split("_"),weekStart:1,relativeTime:{future:" %s",past:"%s ",s:" ",m:_l,mm:_l,h:_l,hh:_l,d:"",dd:_l,M:"",MM:_l,y:"",yy:_l},ordinal:function(e_){return e_},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"}};return Wt.default.locale(_m,null,!0),_m})})(uk$2);var uk=ukExports,uk$1=_mergeNamespaces$1({__proto__:null,default:uk},[ukExports]),urExports={},ur$2={get exports(){return urExports},set exports($){urExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"ur",weekdays:"______".split("_"),months:"___________".split("_"),weekStart:1,weekdaysShort:"______".split("_"),monthsShort:"___________".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(ur$2);var ur=urExports,ur$1=_mergeNamespaces$1({__proto__:null,default:ur},[urExports]),uzLatnExports={},uzLatn$2={get exports(){return uzLatnExports},set exports($){uzLatnExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"uz-latn",weekdays:"Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba".split("_"),months:"Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr".split("_"),weekStart:1,weekdaysShort:"Yak_Dush_Sesh_Chor_Pay_Jum_Shan".split("_"),monthsShort:"Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek".split("_"),weekdaysMin:"Ya_Du_Se_Cho_Pa_Ju_Sha".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},relativeTime:{future:"Yaqin %s ichida",past:"Bir necha %s oldin",s:"soniya",m:"bir daqiqa",mm:"%d daqiqa",h:"bir soat",hh:"%d soat",d:"bir kun",dd:"%d kun",M:"bir oy",MM:"%d oy",y:"bir yil",yy:"%d yil"}};return Wt.default.locale(_i,null,!0),_i})})(uzLatn$2);var uzLatn=uzLatnExports,uzLatn$1=_mergeNamespaces$1({__proto__:null,default:uzLatn},[uzLatnExports]),uzExports={},uz$2={get exports(){return uzExports},set exports($){uzExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"uz",weekdays:"______".split("_"),months:"___________".split("_"),weekStart:1,weekdaysShort:"______".split("_"),monthsShort:"___________".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},relativeTime:{future:" %s ",past:"  %s ",s:"",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(uz$2);var uz=uzExports,uz$1=_mergeNamespaces$1({__proto__:null,default:uz},[uzExports]),viExports={},vi$2={get exports(){return viExports},set exports($){viExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"vi",weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),weekStart:1,weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY HH:mm",LLLL:"dddd, D MMMM [nm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",m:"mt pht",mm:"%d pht",h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"}};return Wt.default.locale(_i,null,!0),_i})})(vi$2);var vi=viExports,vi$1=_mergeNamespaces$1({__proto__:null,default:vi},[viExports]),xPseudoExports={},xPseudo$2={get exports(){return xPseudoExports},set exports($){xPseudoExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"x-pseudo",weekdays:"S~d~_M~d~_T~sd~_Wd~sd~_T~hrs~d_~Frd~_S~tr~d".split("_"),months:"J~~r_F~br~r_~Mrc~h_p~rl_~M_~J~_Jl~_~gst~_Sp~tmb~r_~ctb~r_~vm~br_~Dc~mbr".split("_"),weekStart:1,weekdaysShort:"S~_~M_~T_~Wd_~Th_~Fr_~St".split("_"),monthsShort:"J~_~Fb_~Mr_~pr_~M_~J_~Jl_~g_~Sp_~ct_~v_~Dc".split("_"),weekdaysMin:"S~_M~_T_~W_T~h_Fr~_S".split("_"),ordinal:function(_s){return _s},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},relativeTime:{future:"~ %s",past:"%s ~g",s:" ~fw ~sc~ds",m:" ~m~t",mm:"%d m~~ts",h:"~ h~r",hh:"%d h~rs",d:" ~d",dd:"%d d~s",M:" ~m~th",MM:"%d m~t~hs",y:" ~r",yy:"%d ~rs"}};return Wt.default.locale(_i,null,!0),_i})})(xPseudo$2);var xPseudo=xPseudoExports,xPseudo$1=_mergeNamespaces$1({__proto__:null,default:xPseudo},[xPseudoExports]),yoExports={},yo$2={get exports(){return yoExports},set exports($){yoExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"yo",weekdays:"Aiku_Aje_Isgun_jru_jb_ti_Abamta".split("_"),months:"Sr_Erele_rna_Igbe_Ebibi_Okudu_Agmo_Ogun_Owewe_wara_Belu_p".split("_"),weekStart:1,weekdaysShort:"Aik_Aje_Is_jr_jb_ti_Aba".split("_"),monthsShort:"Sr_Erl_rn_Igb_Ebi_Oku_Ag_Ogu_Owe_wa_Bel_p".split("_"),weekdaysMin:"Ai_Aj_Is_r_b_t_Ab".split("_"),ordinal:function(_s){return _s},formats:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},relativeTime:{future:"ni %s",past:"%s kja",s:"isju aaya die",m:"isju kan",mm:"isju %d",h:"wakati kan",hh:"wakati %d",d:"j kan",dd:"j %d",M:"osu kan",MM:"osu %d",y:"dun kan",yy:"dun %d"}};return Wt.default.locale(_i,null,!0),_i})})(yo$2);var yo=yoExports,yo$1=_mergeNamespaces$1({__proto__:null,default:yo},[yoExports]),zhCnExports={},zhCn$2={get exports(){return zhCnExports},set exports($){zhCnExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"zh-cn",weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),ordinal:function(_s,_c){return _c==="W"?_s+"":_s+""},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMDAhmm",LLLL:"YYYYMDddddAhmm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},relativeTime:{future:"%s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},meridiem:function(_s,_c){var _l=100*_s+_c;return _l<600?"":_l<900?"":_l<1100?"":_l<1300?"":_l<1800?"":""}};return Wt.default.locale(_i,null,!0),_i})})(zhCn$2);var zhCn=zhCnExports,zhCn$1=_mergeNamespaces$1({__proto__:null,default:zhCn},[zhCnExports]),zhHkExports={},zhHk$2={get exports(){return zhHkExports},set exports($){zhHkExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"zh-hk",months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),ordinal:function(_s,_c){return _c==="W"?_s+"":_s+""},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm"},relativeTime:{future:"%s",past:"%s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "}};return Wt.default.locale(_i,null,!0),_i})})(zhHk$2);var zhHk=zhHkExports,zhHk$1=_mergeNamespaces$1({__proto__:null,default:zhHk},[zhHkExports]),zhTwExports={},zhTw$2={get exports(){return zhTwExports},set exports($){zhTwExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"zh-tw",weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),ordinal:function(_s,_c){return _c==="W"?_s+"":_s+""},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},relativeTime:{future:"%s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},meridiem:function(_s,_c){var _l=100*_s+_c;return _l<600?"":_l<900?"":_l<1100?"":_l<1300?"":_l<1800?"":""}};return Wt.default.locale(_i,null,!0),_i})})(zhTw$2);var zhTw=zhTwExports,zhTw$1=_mergeNamespaces$1({__proto__:null,default:zhTw},[zhTwExports]),zhExports={},zh$2={get exports(){return zhExports},set exports($){zhExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt(require$$0)})(commonjsGlobal,function(_t){function Vt(_s){return _s&&typeof _s=="object"&&"default"in _s?_s:{default:_s}}var Wt=Vt(_t),_i={name:"zh",weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),ordinal:function(_s,_c){return _c==="W"?_s+"":_s+""},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMDAhmm",LLLL:"YYYYMDddddAhmm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},relativeTime:{future:"%s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},meridiem:function(_s,_c){var _l=100*_s+_c;return _l<600?"":_l<900?"":_l<1100?"":_l<1300?"":_l<1800?"":""}};return Wt.default.locale(_i,null,!0),_i})})(zh$2);var zh=zhExports,zh$1=_mergeNamespaces$1({__proto__:null,default:zh},[zhExports]);function Availability($){var $_,q_;const[_e,_t]=reactExports.useState({startDate:new Date,endDate:new Date().setMonth(11)}),{data:Vt,isSuccess:Wt,isLoading:_i}=useFetchDocLeaveDatesQuery(),_s=useDispatch(),[_c,_l]=reactExports.useState(),_d=["08:00 AM","09:00 AM","10:00 AM","11:00 AM"],_m=["12:00 PM","01:00 PM","02:00 PM","03:00 PM"],e_=["04:00 PM","05:00 PM","06:00 PM","07:00 PM","08:00 PM"],[t_,i_]=reactExports.useState(!1),[c_,h_]=useUpdateDocLeaveMutation(),[y_,l_]=useRemoveLeaveMutation(),[d_,f_]=reactExports.useState([]),[S_,T_]=useUpdateTimeSlotMutation(),R_=useFetchTimeSlotQuery();reactExports.useState([]);const C_=G_=>{G_.preventDefault(),S_({timeSlot:d_})};reactExports.useEffect(()=>{const x_=["January","February","March","April","May","June","July","August","Septemper","October","November","December"][new Date().getMonth()];_l(x_)},[]);function j_(){h_.isLoading||c_(_e).then(G_=>{G_.data.success?Q$1.success("succesfully added leave"):Q$1.error("error occurred")})}reactExports.useEffect(()=>{h_.isLoading?_s(showloading()):_s(hideLoading())},[h_.isLoading]);const W_=G_=>{i_(!0),_t(G_)},A_=G_=>{y_({date:G_})};return jsx("div",{children:jsxs(DocNavbar,{children:[jsxs("div",{id:"alert-border-1",className:"flex flex-row justify-between p-2 text-blue-800 border-t-4 border-blue-300 bg-blue-300",role:"alert",children:[jsxs("div",{children:[jsx("svg",{className:"m-0 w-5 h-10  inline-block",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),jsxs("p",{className:"ml-2 m-0  inline-block font-semibold text-xl text-black text-center",children:["This is the time slot for ",jsx("u",{children:_c})," month"]})]}),jsxs("div",{className:"flex items-center w-1/2",children:[jsx("h5",{className:"mr-2 inline-block  items-end text-lg font-bold text-blue-900 tracking-tight",children:"Planning for a leave?"}),jsx(Datepicker,{primaryColor:"red",disabledDates:Vt==null?void 0:Vt.leaveDates,value:_e,onChange:W_}),t_&&jsx("button",{type:"button",onClick:j_,className:"max-w-md px-4 py-2 ml-2 tracking-wide inline-block text-white transition-colors duration-200 transform bg-blue-700 rounded-md hover:bg-blue-900 focus:outline-none focus:bg-purple-600",children:"Done"})]})]}),jsxs("div",{children:[jsx("h5",{className:"mb-2 mt-4 text-base font-semibold tracking-tight text-gray-900",children:"Your selected time slot"}),jsx("ul",{className:"items-center w-full text-sm font-medium text-gray-900 bg-white rounded-lg border border-gray-200 max-w-screen-md sm:flex",children:($_=R_==null?void 0:R_.data)==null?void 0:$_.timeSlot.map(G_=>jsx("li",{className:"w-[150px] border-b border-green-500  sm:border",children:jsx("div",{className:"flex flex-row items-center justify-around",children:jsx("label",{htmlFor:"vue-checkbox-list",className:"py-3  text-sm font-medium text-gray-900 text-center inline-block",children:G_.time})})}))})]}),jsxs("div",{children:[jsx("h5",{className:"mb-2 mt-4 text-base font-semibold  tracking-tight text-gray-900",children:"Your leave dates"}),jsx("ul",{className:"items-center w-full text-sm font-medium text-gray-900 bg-white rounded-lg border border-gray-200 sm:flex",children:(q_=Vt==null?void 0:Vt.leaveDates)==null?void 0:q_.map(G_=>jsxs("li",{className:"w-auto  border-b bg-red-100 border-blue-300  sm:border",children:[jsx("span",{className:"float-right text-red-500 text-base cursor-pointer",onClick:()=>A_(G_),children:jsx("ion-icon",{name:"close-circle"})}),jsx("div",{className:"flex p-2 flex-row justify-center items-center",children:jsxs("label",{htmlFor:"vue-checkbox-list",className:"py-3 text-sm font-medium text-gray-900",children:[G_.startDate," - ",G_.endDate]})})]}))})]}),jsx("div",{href:"#",className:"block max-w-full mt-2 p-6 bg-blue-900 border border-gray-200 rounded-lg shadow-md",children:jsxs("form",{onSubmit:G_=>C_(G_),children:[jsx("h5",{className:"text-xl font-bold tracking-tight text-gray-900 dark:text-white text-center",children:"Morning"}),jsx("ul",{className:"items-center w-full text-sm font-medium text-gray-900 bg-white rounded-lg border border-gray-200 sm:flex",children:_d.map(G_=>jsx("li",{className:"w-full border-b hover:bg-gray-200 border-gray-200 sm:border-b-0 sm:border-r",children:jsxs("div",{className:"flex items-center pl-3",children:[jsx("input",{id:"vue-checkbox-list",type:"checkbox",value:G_,name:"slot",className:"w-4 h-4 text-blue-600  bg-gray-100 rounded border-gray-300 focus:ring-blue-500 focus:ring-2",onChange:I_=>I_.target.checked?f_([...d_,{time:I_.target.value,status:!0}]):f_(d_.filter(x_=>{if(x_.time!==I_.target.value)return x_}))}),jsx("label",{htmlFor:"vue-checkbox-list",className:"py-3 ml-2 w-full text-sm font-medium text-",children:G_})]})}))}),jsx("h5",{className:"mb-2 mt-4 text-xl font-bold tracking-tight text-white text-center",children:"Afternoon"}),jsx("ul",{className:"items-center w-full text-sm font-medium bg-white rounded-lg border border-gray-200 sm:flex",children:_m.map(G_=>jsx("li",{className:"w-full border-b border-gray-200 sm:border-b-0 hover:bg-gray-200 sm:border-r",children:jsxs("div",{className:"flex items-center pl-3",children:[jsx("input",{id:"react-checkbox-list",type:"checkbox",value:G_,name:"slot",className:"w-4 h-4 text-black bg-gray-100 rounded border-gray-300 focus:ring-blue-500 focus:ring-2",onChange:I_=>I_.target.checked?f_([...d_,{time:I_.target.value,status:!0}]):f_(d_.filter(x_=>{if(x_.time!==I_.target.value)return x_}))}),jsx("label",{htmlFor:"react-checkbox-list",className:"py-3 ml-2 w-full text-sm font-medium",children:G_})]})}))}),jsx("h5",{className:"mb-2 mt-4 text-xl font-bold tracking-tight text-white  text-center",children:"Evening"}),jsx("ul",{className:"items-center w-full text-sm font-medium text-gray-900 bg-white rounded-lg border border-gray-200 sm:flex",children:e_.map(G_=>jsx("li",{className:"w-full border-b border-gray-200 sm:border-b-0 sm:border-r hover:bg-gray-200",children:jsxs("div",{className:"flex items-center pl-3",children:[jsx("input",{id:"react-checkbox-list",type:"checkbox",value:G_,name:"slot",className:"w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-700 focus:ring-2 dark:bg-gray-600 dark:border-gray-500",onChange:I_=>I_.target.checked?f_([...d_,{time:I_.target.value,status:!0}]):f_(d_.filter(x_=>{if(x_.time!==I_.target.value)return x_}))}),jsx("label",{htmlFor:"react-checkbox-list",className:"py-3 ml-2 w-full text-sm font-medium text-gray-900 ",children:G_})]})}))}),jsx("div",{className:"mt-3 flex mx-auto justify-center",children:jsx("button",{type:"submit",className:"max-w-md px-4 py-2 tracking-wide text-blue-900 font-bold transition-colors duration-200 transform bg-white rounded-md hover:bg-blue-300 focus:outline-none focus:bg-purple-600",children:"Save Changes"})})]})})]})})}var lodashExports={},lodash={get exports(){return lodashExports},set exports($){lodashExports=$}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function($,_e){(function(){var _t,Vt="4.17.21",Wt=200,_i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",_s="Expected a function",_c="Invalid `variable` option passed into `_.template`",_l="__lodash_hash_undefined__",_d=500,_m="__lodash_placeholder__",e_=1,t_=2,i_=4,c_=1,h_=2,y_=1,l_=2,d_=4,f_=8,S_=16,T_=32,R_=64,C_=128,j_=256,W_=512,A_=30,$_="...",q_=800,G_=16,I_=1,x_=2,Y_=3,z_=1/0,B_=9007199254740991,Q_=17976931348623157e292,K_=0/0,rE=4294967295,aE=rE-1,gE=rE>>>1,kE=[["ary",C_],["bind",y_],["bindKey",l_],["curry",f_],["curryRight",S_],["flip",W_],["partial",T_],["partialRight",R_],["rearg",j_]],xE="[object Arguments]",YE="[object Array]",d0="[object AsyncFunction]",M0="[object Boolean]",u0="[object Date]",D0="[object DOMException]",C0="[object Error]",QE="[object Function]",f0="[object GeneratorFunction]",$E="[object Map]",m0="[object Number]",SE="[object Null]",zE="[object Object]",N0="[object Promise]",K0="[object Proxy]",RE="[object RegExp]",VE="[object Set]",jS="[object String]",IT="[object Symbol]",_w="[object Undefined]",EI="[object WeakMap]",hN="[object WeakSet]",tR="[object ArrayBuffer]",OR="[object DataView]",pN="[object Float32Array]",bO="[object Float64Array]",y0="[object Int8Array]",fN="[object Int16Array]",mN="[object Int32Array]",t1="[object Uint8Array]",_N="[object Uint8ClampedArray]",gN="[object Uint16Array]",nR="[object Uint32Array]",ZD=/\b__p \+= '';/g,n1=/\b(__p \+=) '' \+/g,eP=/(__e\(.*?\)|\b__t\)) \+\n'';/g,wL=/&(?:amp|lt|gt|quot|#39);/g,TL=/[&<>"']/g,rR=RegExp(wL.source),tP=RegExp(TL.source),vN=/<%-([\s\S]+?)%>/g,bI=/<%([\s\S]+?)%>/g,r1=/<%=([\s\S]+?)%>/g,yN=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nP=/^\w*$/,i1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,BI=/[\\^$.*+?()[\]{}|]/g,rP=RegExp(BI.source),EN=/^\s+/,RL=/\s/,bN=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,IL=/\{\n\/\* \[wrapped with (.+)\] \*/,iP=/,? & /,oP=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,KR=/[()=,{}\[\]\/\s]/,sP=/\\(\\)?/g,aP=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,eT=/\w*$/,SN=/^[-+]0x[0-9a-f]+$/i,SO=/^0b[01]+$/i,CL=/^\[object .+?Constructor\]$/,o1=/^0o[0-7]+$/i,tT=/^(?:0|[1-9]\d*)$/,cP=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,s1=/($^)/,AL=/['\n\r\u2028\u2029\\]/g,wO="\\ud800-\\udfff",OL="\\u0300-\\u036f",NL="\\ufe20-\\ufe2f",TO="\\u20d0-\\u20ff",NR=OL+NL+TO,wN="\\u2700-\\u27bf",TN="a-z\\xdf-\\xf6\\xf8-\\xff",xS="\\xac\\xb1\\xd7\\xf7",uP="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",kL="\\u2000-\\u206f",xL=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",LL="A-Z\\xc0-\\xd6\\xd8-\\xde",ML="\\ufe0e\\ufe0f",DL=xS+uP+kL+xL,a1="[']",PL="["+wO+"]",jL="["+DL+"]",c1="["+NR+"]",RO="\\d+",RN="["+wN+"]",u1="["+TN+"]",UL="[^"+wO+DL+RO+wN+TN+LL+"]",lR="\\ud83c[\\udffb-\\udfff]",$L="(?:"+c1+"|"+lR+")",IN="[^"+wO+"]",IO="(?:\\ud83c[\\udde6-\\uddff]){2}",l1="[\\ud800-\\udbff][\\udc00-\\udfff]",VI="["+LL+"]",FL="\\u200d",YL="(?:"+u1+"|"+UL+")",lP="(?:"+VI+"|"+UL+")",BL="(?:"+a1+"(?:d|ll|m|re|s|t|ve))?",VL="(?:"+a1+"(?:D|LL|M|RE|S|T|VE))?",SI=$L+"?",HL="["+ML+"]?",GL="(?:"+FL+"(?:"+[IN,IO,l1].join("|")+")"+HL+SI+")*",dP="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",CO="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",qL=HL+SI+GL,hP="(?:"+[RN,IO,l1].join("|")+")"+qL,pP="(?:"+[IN+c1+"?",c1,IO,l1,PL].join("|")+")",fP=RegExp(a1,"g"),WL=RegExp(c1,"g"),CN=RegExp(lR+"(?="+lR+")|"+pP+qL,"g"),mP=RegExp([VI+"?"+u1+"+"+BL+"(?="+[jL,VI,"$"].join("|")+")",lP+"+"+VL+"(?="+[jL,VI+YL,"$"].join("|")+")",VI+"?"+YL+"+"+BL,VI+"+"+VL,CO,dP,RO,hP].join("|"),"g"),zL=RegExp("["+FL+wO+NR+ML+"]"),AO=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,yT=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],KL=-1,rS={};rS[pN]=rS[bO]=rS[y0]=rS[fN]=rS[mN]=rS[t1]=rS[_N]=rS[gN]=rS[nR]=!0,rS[xE]=rS[YE]=rS[tR]=rS[M0]=rS[OR]=rS[u0]=rS[C0]=rS[QE]=rS[$E]=rS[m0]=rS[zE]=rS[RE]=rS[VE]=rS[jS]=rS[EI]=!1;var iS={};iS[xE]=iS[YE]=iS[tR]=iS[OR]=iS[M0]=iS[u0]=iS[pN]=iS[bO]=iS[y0]=iS[fN]=iS[mN]=iS[$E]=iS[m0]=iS[zE]=iS[RE]=iS[VE]=iS[jS]=iS[IT]=iS[t1]=iS[_N]=iS[gN]=iS[nR]=!0,iS[C0]=iS[QE]=iS[EI]=!1;var OO={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},_P={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},iR={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},gP={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},JL=parseFloat,QL=parseInt,HI=typeof commonjsGlobal$1=="object"&&commonjsGlobal$1&&commonjsGlobal$1.Object===Object&&commonjsGlobal$1,XL=typeof self=="object"&&self&&self.Object===Object&&self,HS=HI||XL||Function("return this")(),NO=_e&&!_e.nodeType&&_e,wI=NO&&!0&&$&&!$.nodeType&&$,ZL=wI&&wI.exports===NO,AN=ZL&&HI.process,GS=function(){try{var eE=wI&&wI.require&&wI.require("util").types;return eE||AN&&AN.binding&&AN.binding("util")}catch{}}(),eM=GS&&GS.isArrayBuffer,tM=GS&&GS.isDate,JR=GS&&GS.isMap,GI=GS&&GS.isRegExp,ON=GS&&GS.isSet,d1=GS&&GS.isTypedArray;function CT(eE,fE,cE){switch(cE.length){case 0:return eE.call(fE);case 1:return eE.call(fE,cE[0]);case 2:return eE.call(fE,cE[0],cE[1]);case 3:return eE.call(fE,cE[0],cE[1],cE[2])}return eE.apply(fE,cE)}function vP(eE,fE,cE,jE){for(var l0=-1,G0=eE==null?0:eE.length;++l0<G0;){var US=eE[l0];fE(jE,US,cE(US),eE)}return jE}function YT(eE,fE){for(var cE=-1,jE=eE==null?0:eE.length;++cE<jE&&fE(eE[cE],cE,eE)!==!1;);return eE}function qI(eE,fE){for(var cE=eE==null?0:eE.length;cE--&&fE(eE[cE],cE,eE)!==!1;);return eE}function nM(eE,fE){for(var cE=-1,jE=eE==null?0:eE.length;++cE<jE;)if(!fE(eE[cE],cE,eE))return!1;return!0}function AT(eE,fE){for(var cE=-1,jE=eE==null?0:eE.length,l0=0,G0=[];++cE<jE;){var US=eE[cE];fE(US,cE,eE)&&(G0[l0++]=US)}return G0}function kO(eE,fE){var cE=eE==null?0:eE.length;return!!cE&&WI(eE,fE,0)>-1}function NN(eE,fE,cE){for(var jE=-1,l0=eE==null?0:eE.length;++jE<l0;)if(cE(fE,eE[jE]))return!0;return!1}function v0(eE,fE){for(var cE=-1,jE=eE==null?0:eE.length,l0=Array(jE);++cE<jE;)l0[cE]=fE(eE[cE],cE,eE);return l0}function dR(eE,fE){for(var cE=-1,jE=fE.length,l0=eE.length;++cE<jE;)eE[l0+cE]=fE[cE];return eE}function h1(eE,fE,cE,jE){var l0=-1,G0=eE==null?0:eE.length;for(jE&&G0&&(cE=eE[++l0]);++l0<G0;)cE=fE(cE,eE[l0],l0,eE);return cE}function QR(eE,fE,cE,jE){var l0=eE==null?0:eE.length;for(jE&&l0&&(cE=eE[--l0]);l0--;)cE=fE(cE,eE[l0],l0,eE);return cE}function kN(eE,fE){for(var cE=-1,jE=eE==null?0:eE.length;++cE<jE;)if(fE(eE[cE],cE,eE))return!0;return!1}var yP=f1("length");function EP(eE){return eE.split("")}function XR(eE){return eE.match(oP)||[]}function rM(eE,fE,cE){var jE;return cE(eE,function(l0,G0,US){if(fE(l0,G0,US))return jE=G0,!1}),jE}function p1(eE,fE,cE,jE){for(var l0=eE.length,G0=cE+(jE?1:-1);jE?G0--:++G0<l0;)if(fE(eE[G0],G0,eE))return G0;return-1}function WI(eE,fE,cE){return fE===fE?uM(eE,fE,cE):p1(eE,iM,cE)}function bP(eE,fE,cE,jE){for(var l0=cE-1,G0=eE.length;++l0<G0;)if(jE(eE[l0],fE))return l0;return-1}function iM(eE){return eE!==eE}function xO(eE,fE){var cE=eE==null?0:eE.length;return cE?g1(eE,fE)/cE:K_}function f1(eE){return function(fE){return fE==null?_t:fE[eE]}}function xN(eE){return function(fE){return eE==null?_t:eE[fE]}}function m1(eE,fE,cE,jE,l0){return l0(eE,function(G0,US,Y0){cE=jE?(jE=!1,G0):fE(cE,G0,US,Y0)}),cE}function _1(eE,fE){var cE=eE.length;for(eE.sort(fE);cE--;)eE[cE]=eE[cE].value;return eE}function g1(eE,fE){for(var cE,jE=-1,l0=eE.length;++jE<l0;){var G0=fE(eE[jE]);G0!==_t&&(cE=cE===_t?G0:cE+G0)}return cE}function v1(eE,fE){for(var cE=-1,jE=Array(eE);++cE<eE;)jE[cE]=fE(cE);return jE}function LN(eE,fE){return v0(fE,function(cE){return[cE,eE[cE]]})}function MN(eE){return eE&&eE.slice(0,PO(eE)+1).replace(EN,"")}function CS(eE){return function(fE){return eE(fE)}}function LO(eE,fE){return v0(fE,function(cE){return eE[cE]})}function MO(eE,fE){return eE.has(fE)}function oM(eE,fE){for(var cE=-1,jE=eE.length;++cE<jE&&WI(fE,eE[cE],0)>-1;);return cE}function y1(eE,fE){for(var cE=eE.length;cE--&&WI(fE,eE[cE],0)>-1;);return cE}function DO(eE,fE){for(var cE=eE.length,jE=0;cE--;)eE[cE]===fE&&++jE;return jE}var ZR=xN(OO),sM=xN(_P);function aM(eE){return"\\"+gP[eE]}function E1(eE,fE){return eE==null?_t:eE[fE]}function OT(eE){return zL.test(eE)}function SP(eE){return AO.test(eE)}function wP(eE){for(var fE,cE=[];!(fE=eE.next()).done;)cE.push(fE.value);return cE}function b1(eE){var fE=-1,cE=Array(eE.size);return eE.forEach(function(jE,l0){cE[++fE]=[l0,jE]}),cE}function S1(eE,fE){return function(cE){return eE(fE(cE))}}function kR(eE,fE){for(var cE=-1,jE=eE.length,l0=0,G0=[];++cE<jE;){var US=eE[cE];(US===fE||US===_m)&&(eE[cE]=_m,G0[l0++]=cE)}return G0}function zI(eE){var fE=-1,cE=Array(eE.size);return eE.forEach(function(jE){cE[++fE]=jE}),cE}function cM(eE){var fE=-1,cE=Array(eE.size);return eE.forEach(function(jE){cE[++fE]=[jE,jE]}),cE}function uM(eE,fE,cE){for(var jE=cE-1,l0=eE.length;++jE<l0;)if(eE[jE]===fE)return jE;return-1}function TP(eE,fE,cE){for(var jE=cE+1;jE--;)if(eE[jE]===fE)return jE;return jE}function TI(eE){return OT(eE)?IP(eE):yP(eE)}function ET(eE){return OT(eE)?CP(eE):EP(eE)}function PO(eE){for(var fE=eE.length;fE--&&RL.test(eE.charAt(fE)););return fE}var RP=xN(iR);function IP(eE){for(var fE=CN.lastIndex=0;CN.test(eE);)++fE;return fE}function CP(eE){return eE.match(CN)||[]}function lM(eE){return eE.match(mP)||[]}var AP=function eE(fE){fE=fE==null?HS:KI.defaults(HS.Object(),fE,KI.pick(HS,yT));var cE=fE.Array,jE=fE.Date,l0=fE.Error,G0=fE.Function,US=fE.Math,Y0=fE.Object,w1=fE.RegExp,OP=fE.String,NT=fE.TypeError,T1=cE.prototype,R1=G0.prototype,JI=Y0.prototype,jO=fE["__core-js_shared__"],I1=R1.toString,q0=JI.hasOwnProperty,NP=0,oR=function(){var _h=/[^.]+$/.exec(jO&&jO.keys&&jO.keys.IE_PROTO||"");return _h?"Symbol(src)_1."+_h:""}(),xR=JI.toString,dM=I1.call(Y0),kP=HS._,C1=w1("^"+I1.call(q0).replace(BI,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),QI=ZL?fE.Buffer:_t,eI=fE.Symbol,A1=fE.Uint8Array,hM=QI?QI.allocUnsafe:_t,tI=S1(Y0.getPrototypeOf,Y0),__=Y0.create,v_=JI.propertyIsEnumerable,O_=T1.splice,X_=eI?eI.isConcatSpreadable:_t,lE=eI?eI.iterator:_t,HE=eI?eI.toStringTag:_t,J0=function(){try{var _h=aO(Y0,"defineProperty");return _h({},"",{}),_h}catch{}}(),kT=fE.clearTimeout!==HS.clearTimeout&&fE.clearTimeout,fT=jE&&jE.now!==HS.Date.now&&jE.now,XI=fE.setTimeout!==HS.setTimeout&&fE.setTimeout,ZI=US.ceil,DN=US.floor,xP=Y0.getOwnPropertySymbols,tY=QI?QI.isBuffer:_t,BU=fE.isFinite,LP=T1.join,nY=S1(Y0.keys,Y0),qS=US.max,nT=US.min,rY=jE.now,iY=fE.parseInt,VU=US.random,oY=T1.reverse,MP=aO(fE,"DataView"),PN=aO(fE,"Map"),O1=aO(fE,"Promise"),UO=aO(fE,"Set"),jN=aO(fE,"WeakMap"),UN=aO(Y0,"create"),$N=jN&&new jN,N1={},sY=MR(MP),aY=MR(PN),HU=MR(O1),DP=MR(UO),GU=MR(jN),FN=eI?eI.prototype:_t,_C=FN?FN.valueOf:_t,YN=FN?FN.toString:_t;function F_(_h){if(AS(_h)&&!uE(_h)&&!(_h instanceof U0)){if(_h instanceof hR)return _h;if(q0.call(_h,"__wrapped__"))return $M(_h)}return new hR(_h)}var k1=function(){function _h(){}return function(Qm){if(!SS(Qm))return{};if(__)return __(Qm);_h.prototype=Qm;var a_=new _h;return _h.prototype=_t,a_}}();function BN(){}function hR(_h,Qm){this.__wrapped__=_h,this.__actions__=[],this.__chain__=!!Qm,this.__index__=0,this.__values__=_t}F_.templateSettings={escape:vN,evaluate:bI,interpolate:r1,variable:"",imports:{_:F_}},F_.prototype=BN.prototype,F_.prototype.constructor=F_,hR.prototype=k1(BN.prototype),hR.prototype.constructor=hR;function U0(_h){this.__wrapped__=_h,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=rE,this.__views__=[]}function cY(){var _h=new U0(this.__wrapped__);return _h.__actions__=LT(this.__actions__),_h.__dir__=this.__dir__,_h.__filtered__=this.__filtered__,_h.__iteratees__=LT(this.__iteratees__),_h.__takeCount__=this.__takeCount__,_h.__views__=LT(this.__views__),_h}function x1(){if(this.__filtered__){var _h=new U0(this);_h.__dir__=-1,_h.__filtered__=!0}else _h=this.clone(),_h.__dir__*=-1;return _h}function uY(){var _h=this.__wrapped__.value(),Qm=this.__dir__,a_=uE(_h),b_=Qm<0,N_=a_?_h.length:0,H_=WY(0,N_,this.__views__),Z_=H_.start,_v=H_.end,nE=_v-Z_,vE=b_?_v:Z_-1,yE=this.__iteratees__,wE=yE.length,DE=0,qE=nT(nE,this.__takeCount__);if(!a_||!b_&&N_==nE&&qE==nE)return h$(_h,this.__actions__);var _b=[];e:for(;nE--&&DE<qE;){vE+=Qm;for(var e0=-1,t0=_h[vE];++e0<wE;){var k0=yE[e0],B0=k0.iteratee,BS=k0.type,_T=B0(t0);if(BS==x_)t0=_T;else if(!_T){if(BS==I_)continue e;break e}}_b[DE++]=t0}return _b}U0.prototype=k1(BN.prototype),U0.prototype.constructor=U0;function $O(_h){var Qm=-1,a_=_h==null?0:_h.length;for(this.clear();++Qm<a_;){var b_=_h[Qm];this.set(b_[0],b_[1])}}function lY(){this.__data__=UN?UN(null):{},this.size=0}function qU(_h){var Qm=this.has(_h)&&delete this.__data__[_h];return this.size-=Qm?1:0,Qm}function PP(_h){var Qm=this.__data__;if(UN){var a_=Qm[_h];return a_===_l?_t:a_}return q0.call(Qm,_h)?Qm[_h]:_t}function dY(_h){var Qm=this.__data__;return UN?Qm[_h]!==_t:q0.call(Qm,_h)}function hY(_h,Qm){var a_=this.__data__;return this.size+=this.has(_h)?0:1,a_[_h]=UN&&Qm===_t?_l:Qm,this}$O.prototype.clear=lY,$O.prototype.delete=qU,$O.prototype.get=PP,$O.prototype.has=dY,$O.prototype.set=hY;function RI(_h){var Qm=-1,a_=_h==null?0:_h.length;for(this.clear();++Qm<a_;){var b_=_h[Qm];this.set(b_[0],b_[1])}}function pM(){this.__data__=[],this.size=0}function pY(_h){var Qm=this.__data__,a_=fM(Qm,_h);if(a_<0)return!1;var b_=Qm.length-1;return a_==b_?Qm.pop():O_.call(Qm,a_,1),--this.size,!0}function fY(_h){var Qm=this.__data__,a_=fM(Qm,_h);return a_<0?_t:Qm[a_][1]}function mY(_h){return fM(this.__data__,_h)>-1}function _A(_h,Qm){var a_=this.__data__,b_=fM(a_,_h);return b_<0?(++this.size,a_.push([_h,Qm])):a_[b_][1]=Qm,this}RI.prototype.clear=pM,RI.prototype.delete=pY,RI.prototype.get=fY,RI.prototype.has=mY,RI.prototype.set=_A;function II(_h){var Qm=-1,a_=_h==null?0:_h.length;for(this.clear();++Qm<a_;){var b_=_h[Qm];this.set(b_[0],b_[1])}}function WU(){this.size=0,this.__data__={hash:new $O,map:new(PN||RI),string:new $O}}function _Y(_h){var Qm=oO(this,_h).delete(_h);return this.size-=Qm?1:0,Qm}function gY(_h){return oO(this,_h).get(_h)}function zU(_h){return oO(this,_h).has(_h)}function vY(_h,Qm){var a_=oO(this,_h),b_=a_.size;return a_.set(_h,Qm),this.size+=a_.size==b_?0:1,this}II.prototype.clear=WU,II.prototype.delete=_Y,II.prototype.get=gY,II.prototype.has=zU,II.prototype.set=vY;function FO(_h){var Qm=-1,a_=_h==null?0:_h.length;for(this.__data__=new II;++Qm<a_;)this.add(_h[Qm])}function yY(_h){return this.__data__.set(_h,_l),this}function EY(_h){return this.__data__.has(_h)}FO.prototype.add=FO.prototype.push=yY,FO.prototype.has=EY;function LR(_h){var Qm=this.__data__=new RI(_h);this.size=Qm.size}function bY(){this.__data__=new RI,this.size=0}function SY(_h){var Qm=this.__data__,a_=Qm.delete(_h);return this.size=Qm.size,a_}function KU(_h){return this.__data__.get(_h)}function wY(_h){return this.__data__.has(_h)}function TY(_h,Qm){var a_=this.__data__;if(a_ instanceof RI){var b_=a_.__data__;if(!PN||b_.length<Wt-1)return b_.push([_h,Qm]),this.size=++a_.size,this;a_=this.__data__=new II(b_)}return a_.set(_h,Qm),this.size=a_.size,this}LR.prototype.clear=bY,LR.prototype.delete=SY,LR.prototype.get=KU,LR.prototype.has=wY,LR.prototype.set=TY;function JU(_h,Qm){var a_=uE(_h),b_=!a_&&uO(_h),N_=!a_&&!b_&&MI(_h),H_=!a_&&!b_&&!N_&&WO(_h),Z_=a_||b_||N_||H_,_v=Z_?v1(_h.length,OP):[],nE=_v.length;for(var vE in _h)(Qm||q0.call(_h,vE))&&!(Z_&&(vE=="length"||N_&&(vE=="offset"||vE=="parent")||H_&&(vE=="buffer"||vE=="byteLength"||vE=="byteOffset")||kI(vE,nE)))&&_v.push(vE);return _v}function QU(_h){var Qm=_h.length;return Qm?_h[bM(0,Qm-1)]:_t}function RY(_h,Qm){return nL(LT(_h),nI(Qm,0,_h.length))}function IY(_h){return nL(LT(_h))}function jP(_h,Qm,a_){(a_!==_t&&!aR(_h[Qm],a_)||a_===_t&&!(Qm in _h))&&pR(_h,Qm,a_)}function L1(_h,Qm,a_){var b_=_h[Qm];(!(q0.call(_h,Qm)&&aR(b_,a_))||a_===_t&&!(Qm in _h))&&pR(_h,Qm,a_)}function fM(_h,Qm){for(var a_=_h.length;a_--;)if(aR(_h[a_][0],Qm))return a_;return-1}function CY(_h,Qm,a_,b_){return eO(_h,function(N_,H_,Z_){Qm(b_,N_,a_(N_),Z_)}),b_}function UP(_h,Qm){return _h&&rI(Qm,YS(Qm),_h)}function AY(_h,Qm){return _h&&rI(Qm,mS(Qm),_h)}function pR(_h,Qm,a_){Qm=="__proto__"&&J0?J0(_h,Qm,{configurable:!0,enumerable:!0,value:a_,writable:!0}):_h[Qm]=a_}function mM(_h,Qm){for(var a_=-1,b_=Qm.length,N_=cE(b_),H_=_h==null;++a_<b_;)N_[a_]=H_?_t:W1(_h,Qm[a_]);return N_}function nI(_h,Qm,a_){return _h===_h&&(a_!==_t&&(_h=_h<=a_?_h:a_),Qm!==_t&&(_h=_h>=Qm?_h:Qm)),_h}function fR(_h,Qm,a_,b_,N_,H_){var Z_,_v=Qm&e_,nE=Qm&t_,vE=Qm&i_;if(a_&&(Z_=N_?a_(_h,b_,N_,H_):a_(_h)),Z_!==_t)return Z_;if(!SS(_h))return _h;var yE=uE(_h);if(yE){if(Z_=zY(_h),!_v)return LT(_h,Z_)}else{var wE=bT(_h),DE=wE==QE||wE==f0;if(MI(_h))return m$(_h,_v);if(wE==zE||wE==xE||DE&&!N_){if(Z_=nE||DE?{}:u2(_h),!_v)return nE?t2(_h,AY(Z_,_h)):OM(_h,UP(Z_,_h))}else{if(!iS[wE])return N_?_h:{};Z_=l2(_h,wE,_v)}}H_||(H_=new LR);var qE=H_.get(_h);if(qE)return qE;H_.set(_h,Z_),q2(_h)?_h.forEach(function(t0){Z_.add(fR(t0,Qm,a_,t0,_h,H_))}):H2(_h)&&_h.forEach(function(t0,k0){Z_.set(k0,fR(t0,Qm,a_,k0,_h,H_))});var _b=vE?nE?ZN:DM:nE?mS:YS,e0=yE?_t:_b(_h);return YT(e0||_h,function(t0,k0){e0&&(k0=t0,t0=_h[k0]),L1(Z_,k0,fR(t0,Qm,a_,k0,_h,H_))}),Z_}function OY(_h){var Qm=YS(_h);return function(a_){return YO(a_,_h,Qm)}}function YO(_h,Qm,a_){var b_=a_.length;if(_h==null)return!b_;for(_h=Y0(_h);b_--;){var N_=a_[b_],H_=Qm[N_],Z_=_h[N_];if(Z_===_t&&!(N_ in _h)||!H_(Z_))return!1}return!0}function XU(_h,Qm,a_){if(typeof _h!="function")throw new NT(_s);return eL(function(){_h.apply(_t,a_)},Qm)}function VN(_h,Qm,a_,b_){var N_=-1,H_=kO,Z_=!0,_v=_h.length,nE=[],vE=Qm.length;if(!_v)return nE;a_&&(Qm=v0(Qm,CS(a_))),b_?(H_=NN,Z_=!1):Qm.length>=Wt&&(H_=MO,Z_=!1,Qm=new FO(Qm));e:for(;++N_<_v;){var yE=_h[N_],wE=a_==null?yE:a_(yE);if(yE=b_||yE!==0?yE:0,Z_&&wE===wE){for(var DE=vE;DE--;)if(Qm[DE]===wE)continue e;nE.push(yE)}else H_(Qm,wE,b_)||nE.push(yE)}return nE}var eO=n2(mR),ZU=n2($P,!0);function NY(_h,Qm){var a_=!0;return eO(_h,function(b_,N_,H_){return a_=!!Qm(b_,N_,H_),a_}),a_}function _M(_h,Qm,a_){for(var b_=-1,N_=_h.length;++b_<N_;){var H_=_h[b_],Z_=Qm(H_);if(Z_!=null&&(_v===_t?Z_===Z_&&!VT(Z_):a_(Z_,_v)))var _v=Z_,nE=H_}return nE}function kY(_h,Qm,a_,b_){var N_=_h.length;for(a_=b0(a_),a_<0&&(a_=-a_>N_?0:N_+a_),b_=b_===_t||b_>N_?N_:b0(b_),b_<0&&(b_+=N_),b_=a_>b_?0:M3(b_);a_<b_;)_h[a_++]=Qm;return _h}function HN(_h,Qm){var a_=[];return eO(_h,function(b_,N_,H_){Qm(b_,N_,H_)&&a_.push(b_)}),a_}function mT(_h,Qm,a_,b_,N_){var H_=-1,Z_=_h.length;for(a_||(a_=sR),N_||(N_=[]);++H_<Z_;){var _v=_h[H_];Qm>0&&a_(_v)?Qm>1?mT(_v,Qm-1,a_,b_,N_):dR(N_,_v):b_||(N_[N_.length]=_v)}return N_}var gM=y$(),GN=y$(!0);function mR(_h,Qm){return _h&&gM(_h,Qm,YS)}function $P(_h,Qm){return _h&&GN(_h,Qm,YS)}function vM(_h,Qm){return AT(Qm,function(a_){return cI(_h[a_])})}function BO(_h,Qm){Qm=AI(Qm,_h);for(var a_=0,b_=Qm.length;_h!=null&&a_<b_;)_h=_h[ST(Qm[a_++])];return a_&&a_==b_?_h:_t}function e$(_h,Qm,a_){var b_=Qm(_h);return uE(_h)?b_:dR(b_,a_(_h))}function xT(_h){return _h==null?_h===_t?_w:SE:HE&&HE in Y0(_h)?c2(_h):f2(_h)}function FP(_h,Qm){return _h>Qm}function yM(_h,Qm){return _h!=null&&q0.call(_h,Qm)}function xY(_h,Qm){return _h!=null&&Qm in Y0(_h)}function qN(_h,Qm,a_){return _h>=nT(Qm,a_)&&_h<qS(Qm,a_)}function WN(_h,Qm,a_){for(var b_=a_?NN:kO,N_=_h[0].length,H_=_h.length,Z_=H_,_v=cE(H_),nE=1/0,vE=[];Z_--;){var yE=_h[Z_];Z_&&Qm&&(yE=v0(yE,CS(Qm))),nE=nT(yE.length,nE),_v[Z_]=!a_&&(Qm||N_>=120&&yE.length>=120)?new FO(Z_&&yE):_t}yE=_h[0];var wE=-1,DE=_v[0];e:for(;++wE<N_&&vE.length<nE;){var qE=yE[wE],_b=Qm?Qm(qE):qE;if(qE=a_||qE!==0?qE:0,!(DE?MO(DE,_b):b_(vE,_b,a_))){for(Z_=H_;--Z_;){var e0=_v[Z_];if(!(e0?MO(e0,_b):b_(_h[Z_],_b,a_)))continue e}DE&&DE.push(_b),vE.push(qE)}}return vE}function LY(_h,Qm,a_,b_){return mR(_h,function(N_,H_,Z_){Qm(b_,a_(N_),H_,Z_)}),b_}function VO(_h,Qm,a_){Qm=AI(Qm,_h),_h=m2(_h,Qm);var b_=_h==null?_h:_h[ST(gR(Qm))];return b_==null?_t:CT(b_,_h,a_)}function t$(_h){return AS(_h)&&xT(_h)==xE}function EM(_h){return AS(_h)&&xT(_h)==tR}function zN(_h){return AS(_h)&&xT(_h)==u0}function tO(_h,Qm,a_,b_,N_){return _h===Qm?!0:_h==null||Qm==null||!AS(_h)&&!AS(Qm)?_h!==_h&&Qm!==Qm:YP(_h,Qm,a_,b_,tO,N_)}function YP(_h,Qm,a_,b_,N_,H_){var Z_=uE(_h),_v=uE(Qm),nE=Z_?YE:bT(_h),vE=_v?YE:bT(Qm);nE=nE==xE?zE:nE,vE=vE==xE?zE:vE;var yE=nE==zE,wE=vE==zE,DE=nE==vE;if(DE&&MI(_h)){if(!MI(Qm))return!1;Z_=!0,yE=!1}if(DE&&!yE)return H_||(H_=new LR),Z_||WO(_h)?O$(_h,Qm,a_,b_,N_,H_):qY(_h,Qm,nE,a_,b_,N_,H_);if(!(a_&c_)){var qE=yE&&q0.call(_h,"__wrapped__"),_b=wE&&q0.call(Qm,"__wrapped__");if(qE||_b){var e0=qE?_h.value():_h,t0=_b?Qm.value():Qm;return H_||(H_=new LR),N_(e0,t0,a_,b_,H_)}}return DE?(H_||(H_=new LR),N$(_h,Qm,a_,b_,N_,H_)):!1}function MY(_h){return AS(_h)&&bT(_h)==$E}function BP(_h,Qm,a_,b_){var N_=a_.length,H_=N_,Z_=!b_;if(_h==null)return!H_;for(_h=Y0(_h);N_--;){var _v=a_[N_];if(Z_&&_v[2]?_v[1]!==_h[_v[0]]:!(_v[0]in _h))return!1}for(;++N_<H_;){_v=a_[N_];var nE=_v[0],vE=_h[nE],yE=_v[1];if(Z_&&_v[2]){if(vE===_t&&!(nE in _h))return!1}else{var wE=new LR;if(b_)var DE=b_(vE,yE,nE,_h,Qm,wE);if(!(DE===_t?tO(yE,vE,c_|h_,b_,wE):DE))return!1}}return!0}function VP(_h){if(!SS(_h)||D$(_h))return!1;var Qm=cI(_h)?C1:CL;return Qm.test(MR(_h))}function DY(_h){return AS(_h)&&xT(_h)==RE}function n$(_h){return AS(_h)&&bT(_h)==VE}function HP(_h){return AS(_h)&&H1(_h.length)&&!!rS[xT(_h)]}function r$(_h){return typeof _h=="function"?_h:_h==null?GT:typeof _h=="object"?uE(_h)?WP(_h[0],_h[1]):o$(_h):aL(_h)}function GP(_h){if(!j1(_h))return nY(_h);var Qm=[];for(var a_ in Y0(_h))q0.call(_h,a_)&&a_!="constructor"&&Qm.push(a_);return Qm}function qP(_h){if(!SS(_h))return QY(_h);var Qm=j1(_h),a_=[];for(var b_ in _h)b_=="constructor"&&(Qm||!q0.call(_h,b_))||a_.push(b_);return a_}function KN(_h,Qm){return _h<Qm}function i$(_h,Qm){var a_=-1,b_=DT(_h)?cE(_h.length):[];return eO(_h,function(N_,H_,Z_){b_[++a_]=Qm(N_,H_,Z_)}),b_}function o$(_h){var Qm=sO(_h);return Qm.length==1&&Qm[0][2]?j$(Qm[0][0],Qm[0][1]):function(a_){return a_===_h||BP(a_,_h,Qm)}}function WP(_h,Qm){return jM(_h)&&P$(Qm)?j$(ST(_h),Qm):function(a_){var b_=W1(a_,_h);return b_===_t&&b_===Qm?Z2(a_,_h):tO(Qm,b_,c_|h_)}}function M1(_h,Qm,a_,b_,N_){_h!==Qm&&gM(Qm,function(H_,Z_){if(N_||(N_=new LR),SS(H_))PY(_h,Qm,Z_,a_,M1,b_,N_);else{var _v=b_?b_(_x(_h,Z_),H_,Z_+"",_h,Qm,N_):_t;_v===_t&&(_v=H_),jP(_h,Z_,_v)}},mS)}function PY(_h,Qm,a_,b_,N_,H_,Z_){var _v=_x(_h,a_),nE=_x(Qm,a_),vE=Z_.get(nE);if(vE){jP(_h,a_,vE);return}var yE=H_?H_(_v,nE,a_+"",_h,Qm,Z_):_t,wE=yE===_t;if(wE){var DE=uE(nE),qE=!DE&&MI(nE),_b=!DE&&!qE&&WO(nE);yE=nE,DE||qE||_b?uE(_v)?yE=_v:LS(_v)?yE=LT(_v):qE?(wE=!1,yE=m$(nE,!0)):_b?(wE=!1,yE=_$(nE,!0)):yE=[]:G1(nE)||uO(nE)?(yE=_v,uO(_v)?yE=D3(_v):(!SS(_v)||cI(_v))&&(yE=u2(nE))):wE=!1}wE&&(Z_.set(nE,yE),N_(yE,nE,b_,H_,Z_),Z_.delete(nE)),jP(_h,a_,yE)}function nO(_h,Qm){var a_=_h.length;if(a_)return Qm+=Qm<0?a_:0,kI(Qm,a_)?_h[Qm]:_t}function s$(_h,Qm,a_){Qm.length?Qm=v0(Qm,function(H_){return uE(H_)?function(Z_){return BO(Z_,H_.length===1?H_[0]:H_)}:H_}):Qm=[GT];var b_=-1;Qm=v0(Qm,CS(ZE()));var N_=i$(_h,function(H_,Z_,_v){var nE=v0(Qm,function(vE){return vE(H_)});return{criteria:nE,index:++b_,value:H_}});return _1(N_,function(H_,Z_){return VY(H_,Z_,a_)})}function a$(_h,Qm){return c$(_h,Qm,function(a_,b_){return Z2(_h,b_)})}function c$(_h,Qm,a_){for(var b_=-1,N_=Qm.length,H_={};++b_<N_;){var Z_=Qm[b_],_v=BO(_h,Z_);a_(_v,Z_)&&HO(H_,AI(Z_,_h),_v)}return H_}function D1(_h){return function(Qm){return BO(Qm,_h)}}function CI(_h,Qm,a_,b_){var N_=b_?bP:WI,H_=-1,Z_=Qm.length,_v=_h;for(_h===Qm&&(Qm=LT(Qm)),a_&&(_v=v0(_h,CS(a_)));++H_<Z_;)for(var nE=0,vE=Qm[H_],yE=a_?a_(vE):vE;(nE=N_(_v,yE,nE,b_))>-1;)_v!==_h&&O_.call(_v,nE,1),O_.call(_h,nE,1);return _h}function zP(_h,Qm){for(var a_=_h?Qm.length:0,b_=a_-1;a_--;){var N_=Qm[a_];if(a_==b_||N_!==H_){var H_=N_;kI(N_)?O_.call(_h,N_,1):CM(_h,N_)}}return _h}function bM(_h,Qm){return _h+DN(VU()*(Qm-_h+1))}function SM(_h,Qm,a_,b_){for(var N_=-1,H_=qS(ZI((Qm-_h)/(a_||1)),0),Z_=cE(H_);H_--;)Z_[b_?H_:++N_]=_h,_h+=a_;return Z_}function JN(_h,Qm){var a_="";if(!_h||Qm<1||Qm>B_)return a_;do Qm%2&&(a_+=_h),Qm=DN(Qm/2),Qm&&(_h+=_h);while(Qm);return a_}function A0(_h,Qm){return tL(U$(_h,Qm,GT),_h+"")}function u$(_h){return QU(DR(_h))}function jY(_h,Qm){var a_=DR(_h);return nL(a_,nI(Qm,0,a_.length))}function HO(_h,Qm,a_,b_){if(!SS(_h))return _h;Qm=AI(Qm,_h);for(var N_=-1,H_=Qm.length,Z_=H_-1,_v=_h;_v!=null&&++N_<H_;){var nE=ST(Qm[N_]),vE=a_;if(nE==="__proto__"||nE==="constructor"||nE==="prototype")return _h;if(N_!=Z_){var yE=_v[nE];vE=b_?b_(yE,nE,_v):_t,vE===_t&&(vE=SS(yE)?yE:kI(Qm[N_+1])?[]:{})}L1(_v,nE,vE),_v=_v[nE]}return _h}var KP=$N?function(_h,Qm){return $N.set(_h,Qm),_h}:GT,UY=J0?function(_h,Qm){return J0(_h,"toString",{configurable:!0,enumerable:!1,value:JS(Qm),writable:!0})}:GT;function wM(_h){return nL(DR(_h))}function _R(_h,Qm,a_){var b_=-1,N_=_h.length;Qm<0&&(Qm=-Qm>N_?0:N_+Qm),a_=a_>N_?N_:a_,a_<0&&(a_+=N_),N_=Qm>a_?0:a_-Qm>>>0,Qm>>>=0;for(var H_=cE(N_);++b_<N_;)H_[b_]=_h[b_+Qm];return H_}function $Y(_h,Qm){var a_;return eO(_h,function(b_,N_,H_){return a_=Qm(b_,N_,H_),!a_}),!!a_}function TM(_h,Qm,a_){var b_=0,N_=_h==null?b_:_h.length;if(typeof Qm=="number"&&Qm===Qm&&N_<=gE){for(;b_<N_;){var H_=b_+N_>>>1,Z_=_h[H_];Z_!==null&&!VT(Z_)&&(a_?Z_<=Qm:Z_<Qm)?b_=H_+1:N_=H_}return N_}return RM(_h,Qm,GT,a_)}function RM(_h,Qm,a_,b_){var N_=0,H_=_h==null?0:_h.length;if(H_===0)return 0;Qm=a_(Qm);for(var Z_=Qm!==Qm,_v=Qm===null,nE=VT(Qm),vE=Qm===_t;N_<H_;){var yE=DN((N_+H_)/2),wE=a_(_h[yE]),DE=wE!==_t,qE=wE===null,_b=wE===wE,e0=VT(wE);if(Z_)var t0=b_||_b;else vE?t0=_b&&(b_||DE):_v?t0=_b&&DE&&(b_||!qE):nE?t0=_b&&DE&&!qE&&(b_||!e0):qE||e0?t0=!1:t0=b_?wE<=Qm:wE<Qm;t0?N_=yE+1:H_=yE}return nT(H_,aE)}function l$(_h,Qm){for(var a_=-1,b_=_h.length,N_=0,H_=[];++a_<b_;){var Z_=_h[a_],_v=Qm?Qm(Z_):Z_;if(!a_||!aR(_v,nE)){var nE=_v;H_[N_++]=Z_===0?0:Z_}}return H_}function IM(_h){return typeof _h=="number"?_h:VT(_h)?K_:+_h}function BT(_h){if(typeof _h=="string")return _h;if(uE(_h))return v0(_h,BT)+"";if(VT(_h))return YN?YN.call(_h):"";var Qm=_h+"";return Qm=="0"&&1/_h==-z_?"-0":Qm}function rO(_h,Qm,a_){var b_=-1,N_=kO,H_=_h.length,Z_=!0,_v=[],nE=_v;if(a_)Z_=!1,N_=NN;else if(H_>=Wt){var vE=Qm?null:T$(_h);if(vE)return zI(vE);Z_=!1,N_=MO,nE=new FO}else nE=Qm?[]:_v;e:for(;++b_<H_;){var yE=_h[b_],wE=Qm?Qm(yE):yE;if(yE=a_||yE!==0?yE:0,Z_&&wE===wE){for(var DE=nE.length;DE--;)if(nE[DE]===wE)continue e;Qm&&nE.push(wE),_v.push(yE)}else N_(nE,wE,a_)||(nE!==_v&&nE.push(wE),_v.push(yE))}return _v}function CM(_h,Qm){return Qm=AI(Qm,_h),_h=m2(_h,Qm),_h==null||delete _h[ST(gR(Qm))]}function d$(_h,Qm,a_,b_){return HO(_h,Qm,a_(BO(_h,Qm)),b_)}function AM(_h,Qm,a_,b_){for(var N_=_h.length,H_=b_?N_:-1;(b_?H_--:++H_<N_)&&Qm(_h[H_],H_,_h););return a_?_R(_h,b_?0:H_,b_?H_+1:N_):_R(_h,b_?H_+1:0,b_?N_:H_)}function h$(_h,Qm){var a_=_h;return a_ instanceof U0&&(a_=a_.value()),h1(Qm,function(b_,N_){return N_.func.apply(N_.thisArg,dR([b_],N_.args))},a_)}function JP(_h,Qm,a_){var b_=_h.length;if(b_<2)return b_?rO(_h[0]):[];for(var N_=-1,H_=cE(b_);++N_<b_;)for(var Z_=_h[N_],_v=-1;++_v<b_;)_v!=N_&&(H_[N_]=VN(H_[N_]||Z_,_h[_v],Qm,a_));return rO(mT(H_,1),Qm,a_)}function p$(_h,Qm,a_){for(var b_=-1,N_=_h.length,H_=Qm.length,Z_={};++b_<N_;){var _v=b_<H_?Qm[b_]:_t;a_(Z_,_h[b_],_v)}return Z_}function QP(_h){return LS(_h)?_h:[]}function XP(_h){return typeof _h=="function"?_h:GT}function AI(_h,Qm){return uE(_h)?_h:jM(_h,Qm)?[_h]:$1(Z0(_h))}var QN=A0;function iO(_h,Qm,a_){var b_=_h.length;return a_=a_===_t?b_:a_,!Qm&&a_>=b_?_h:_R(_h,Qm,a_)}var f$=kT||function(_h){return HS.clearTimeout(_h)};function m$(_h,Qm){if(Qm)return _h.slice();var a_=_h.length,b_=hM?hM(a_):new _h.constructor(a_);return _h.copy(b_),b_}function ZP(_h){var Qm=new _h.constructor(_h.byteLength);return new A1(Qm).set(new A1(_h)),Qm}function FY(_h,Qm){var a_=Qm?ZP(_h.buffer):_h.buffer;return new _h.constructor(a_,_h.byteOffset,_h.byteLength)}function YY(_h){var Qm=new _h.constructor(_h.source,eT.exec(_h));return Qm.lastIndex=_h.lastIndex,Qm}function BY(_h){return _C?Y0(_C.call(_h)):{}}function _$(_h,Qm){var a_=Qm?ZP(_h.buffer):_h.buffer;return new _h.constructor(a_,_h.byteOffset,_h.length)}function g$(_h,Qm){if(_h!==Qm){var a_=_h!==_t,b_=_h===null,N_=_h===_h,H_=VT(_h),Z_=Qm!==_t,_v=Qm===null,nE=Qm===Qm,vE=VT(Qm);if(!_v&&!vE&&!H_&&_h>Qm||H_&&Z_&&nE&&!_v&&!vE||b_&&Z_&&nE||!a_&&nE||!N_)return 1;if(!b_&&!H_&&!vE&&_h<Qm||vE&&a_&&N_&&!b_&&!H_||_v&&a_&&N_||!Z_&&N_||!nE)return-1}return 0}function VY(_h,Qm,a_){for(var b_=-1,N_=_h.criteria,H_=Qm.criteria,Z_=N_.length,_v=a_.length;++b_<Z_;){var nE=g$(N_[b_],H_[b_]);if(nE){if(b_>=_v)return nE;var vE=a_[b_];return nE*(vE=="desc"?-1:1)}}return _h.index-Qm.index}function v$(_h,Qm,a_,b_){for(var N_=-1,H_=_h.length,Z_=a_.length,_v=-1,nE=Qm.length,vE=qS(H_-Z_,0),yE=cE(nE+vE),wE=!b_;++_v<nE;)yE[_v]=Qm[_v];for(;++N_<Z_;)(wE||N_<H_)&&(yE[a_[N_]]=_h[N_]);for(;vE--;)yE[_v++]=_h[N_++];return yE}function e2(_h,Qm,a_,b_){for(var N_=-1,H_=_h.length,Z_=-1,_v=a_.length,nE=-1,vE=Qm.length,yE=qS(H_-_v,0),wE=cE(yE+vE),DE=!b_;++N_<yE;)wE[N_]=_h[N_];for(var qE=N_;++nE<vE;)wE[qE+nE]=Qm[nE];for(;++Z_<_v;)(DE||N_<H_)&&(wE[qE+a_[Z_]]=_h[N_++]);return wE}function LT(_h,Qm){var a_=-1,b_=_h.length;for(Qm||(Qm=cE(b_));++a_<b_;)Qm[a_]=_h[a_];return Qm}function rI(_h,Qm,a_,b_){var N_=!a_;a_||(a_={});for(var H_=-1,Z_=Qm.length;++H_<Z_;){var _v=Qm[H_],nE=b_?b_(a_[_v],_h[_v],_v,a_,_h):_t;nE===_t&&(nE=_h[_v]),N_?pR(a_,_v,nE):L1(a_,_v,nE)}return a_}function OM(_h,Qm){return rI(_h,_k(_h),Qm)}function t2(_h,Qm){return rI(_h,k$(_h),Qm)}function XN(_h,Qm){return function(a_,b_){var N_=uE(a_)?vP:CY,H_=Qm?Qm():{};return N_(a_,_h,ZE(b_,2),H_)}}function OI(_h){return A0(function(Qm,a_){var b_=-1,N_=a_.length,H_=N_>1?a_[N_-1]:_t,Z_=N_>2?a_[2]:_t;for(H_=_h.length>3&&typeof H_=="function"?(N_--,H_):_t,Z_&&MT(a_[0],a_[1],Z_)&&(H_=N_<3?_t:H_,N_=1),Qm=Y0(Qm);++b_<N_;){var _v=a_[b_];_v&&_h(Qm,_v,b_,H_)}return Qm})}function n2(_h,Qm){return function(a_,b_){if(a_==null)return a_;if(!DT(a_))return _h(a_,b_);for(var N_=a_.length,H_=Qm?N_:-1,Z_=Y0(a_);(Qm?H_--:++H_<N_)&&b_(Z_[H_],H_,Z_)!==!1;);return a_}}function y$(_h){return function(Qm,a_,b_){for(var N_=-1,H_=Y0(Qm),Z_=b_(Qm),_v=Z_.length;_v--;){var nE=Z_[_h?_v:++N_];if(a_(H_[nE],nE,H_)===!1)break}return Qm}}function E$(_h,Qm,a_){var b_=Qm&y_,N_=P1(_h);function H_(){var Z_=this&&this!==HS&&this instanceof H_?N_:_h;return Z_.apply(b_?a_:this,arguments)}return H_}function b$(_h){return function(Qm){Qm=Z0(Qm);var a_=OT(Qm)?ET(Qm):_t,b_=a_?a_[0]:Qm.charAt(0),N_=a_?iO(a_,1).join(""):Qm.slice(1);return b_[_h]()+N_}}function GO(_h){return function(Qm){return h1(wD(lO(Qm).replace(fP,"")),_h,"")}}function P1(_h){return function(){var Qm=arguments;switch(Qm.length){case 0:return new _h;case 1:return new _h(Qm[0]);case 2:return new _h(Qm[0],Qm[1]);case 3:return new _h(Qm[0],Qm[1],Qm[2]);case 4:return new _h(Qm[0],Qm[1],Qm[2],Qm[3]);case 5:return new _h(Qm[0],Qm[1],Qm[2],Qm[3],Qm[4]);case 6:return new _h(Qm[0],Qm[1],Qm[2],Qm[3],Qm[4],Qm[5]);case 7:return new _h(Qm[0],Qm[1],Qm[2],Qm[3],Qm[4],Qm[5],Qm[6])}var a_=k1(_h.prototype),b_=_h.apply(a_,Qm);return SS(b_)?b_:a_}}function HY(_h,Qm,a_){var b_=P1(_h);function N_(){for(var H_=arguments.length,Z_=cE(H_),_v=H_,nE=oI(N_);_v--;)Z_[_v]=arguments[_v];var vE=H_<3&&Z_[0]!==nE&&Z_[H_-1]!==nE?[]:kR(Z_,nE);if(H_-=vE.length,H_<a_)return w$(_h,Qm,NM,N_.placeholder,_t,Z_,vE,_t,_t,a_-H_);var yE=this&&this!==HS&&this instanceof N_?b_:_h;return CT(yE,this,Z_)}return N_}function r2(_h){return function(Qm,a_,b_){var N_=Y0(Qm);if(!DT(Qm)){var H_=ZE(a_,3);Qm=YS(Qm),a_=function(_v){return H_(N_[_v],_v,N_)}}var Z_=_h(Qm,a_,b_);return Z_>-1?N_[H_?Qm[Z_]:Z_]:_t}}function S$(_h){return NI(function(Qm){var a_=Qm.length,b_=a_,N_=hR.prototype.thru;for(_h&&Qm.reverse();b_--;){var H_=Qm[b_];if(typeof H_!="function")throw new NT(_s);if(N_&&!Z_&&PM(H_)=="wrapper")var Z_=new hR([],!0)}for(b_=Z_?b_:a_;++b_<a_;){H_=Qm[b_];var _v=PM(H_),nE=_v=="wrapper"?a2(H_):_t;nE&&d2(nE[0])&&nE[1]==(C_|f_|T_|j_)&&!nE[4].length&&nE[9]==1?Z_=Z_[PM(nE[0])].apply(Z_,nE[3]):Z_=H_.length==1&&d2(H_)?Z_[_v]():Z_.thru(H_)}return function(){var vE=arguments,yE=vE[0];if(Z_&&vE.length==1&&uE(yE))return Z_.plant(yE).value();for(var wE=0,DE=a_?Qm[wE].apply(this,vE):yE;++wE<a_;)DE=Qm[wE].call(this,DE);return DE}})}function NM(_h,Qm,a_,b_,N_,H_,Z_,_v,nE,vE){var yE=Qm&C_,wE=Qm&y_,DE=Qm&l_,qE=Qm&(f_|S_),_b=Qm&W_,e0=DE?_t:P1(_h);function t0(){for(var k0=arguments.length,B0=cE(k0),BS=k0;BS--;)B0[BS]=arguments[BS];if(qE)var _T=oI(t0),qT=DO(B0,_T);if(b_&&(B0=v$(B0,b_,N_,qE)),H_&&(B0=e2(B0,H_,Z_,qE)),k0-=qT,qE&&k0<vE){var MS=kR(B0,_T);return w$(_h,Qm,NM,t0.placeholder,a_,B0,MS,_v,nE,vE-k0)}var jR=wE?a_:this,lI=DE?jR[_h]:_h;return k0=B0.length,_v?B0=XY(B0,_v):_b&&k0>1&&B0.reverse(),yE&&nE<k0&&(B0.length=nE),this&&this!==HS&&this instanceof t0&&(lI=e0||P1(lI)),lI.apply(jR,B0)}return t0}function i2(_h,Qm){return function(a_,b_){return LY(a_,_h,Qm(b_),{})}}function kM(_h,Qm){return function(a_,b_){var N_;if(a_===_t&&b_===_t)return Qm;if(a_!==_t&&(N_=a_),b_!==_t){if(N_===_t)return b_;typeof a_=="string"||typeof b_=="string"?(a_=BT(a_),b_=BT(b_)):(a_=IM(a_),b_=IM(b_)),N_=_h(a_,b_)}return N_}}function o2(_h){return NI(function(Qm){return Qm=v0(Qm,CS(ZE())),A0(function(a_){var b_=this;return _h(Qm,function(N_){return CT(N_,b_,a_)})})})}function xM(_h,Qm){Qm=Qm===_t?" ":BT(Qm);var a_=Qm.length;if(a_<2)return a_?JN(Qm,_h):Qm;var b_=JN(Qm,ZI(_h/TI(Qm)));return OT(Qm)?iO(ET(b_),0,_h).join(""):b_.slice(0,_h)}function GY(_h,Qm,a_,b_){var N_=Qm&y_,H_=P1(_h);function Z_(){for(var _v=-1,nE=arguments.length,vE=-1,yE=b_.length,wE=cE(yE+nE),DE=this&&this!==HS&&this instanceof Z_?H_:_h;++vE<yE;)wE[vE]=b_[vE];for(;nE--;)wE[vE++]=arguments[++_v];return CT(DE,N_?a_:this,wE)}return Z_}function s2(_h){return function(Qm,a_,b_){return b_&&typeof b_!="number"&&MT(Qm,a_,b_)&&(a_=b_=_t),Qm=vR(Qm),a_===_t?(a_=Qm,Qm=0):a_=vR(a_),b_=b_===_t?Qm<a_?1:-1:vR(b_),SM(Qm,a_,b_,_h)}}function LM(_h){return function(Qm,a_){return typeof Qm=="string"&&typeof a_=="string"||(Qm=HT(Qm),a_=HT(a_)),_h(Qm,a_)}}function w$(_h,Qm,a_,b_,N_,H_,Z_,_v,nE,vE){var yE=Qm&f_,wE=yE?Z_:_t,DE=yE?_t:Z_,qE=yE?H_:_t,_b=yE?_t:H_;Qm|=yE?T_:R_,Qm&=~(yE?R_:T_),Qm&d_||(Qm&=~(y_|l_));var e0=[_h,Qm,N_,qE,wE,_b,DE,_v,nE,vE],t0=a_.apply(_t,e0);return d2(_h)&&U1(t0,e0),t0.placeholder=b_,UM(t0,_h,Qm)}function MM(_h){var Qm=US[_h];return function(a_,b_){if(a_=HT(a_),b_=b_==null?0:nT(b0(b_),292),b_&&BU(a_)){var N_=(Z0(a_)+"e").split("e"),H_=Qm(N_[0]+"e"+(+N_[1]+b_));return N_=(Z0(H_)+"e").split("e"),+(N_[0]+"e"+(+N_[1]-b_))}return Qm(a_)}}var T$=UO&&1/zI(new UO([,-0]))[1]==z_?function(_h){return new UO(_h)}:dO;function R$(_h){return function(Qm){var a_=bT(Qm);return a_==$E?b1(Qm):a_==VE?cM(Qm):LN(Qm,_h(Qm))}}function iI(_h,Qm,a_,b_,N_,H_,Z_,_v){var nE=Qm&l_;if(!nE&&typeof _h!="function")throw new NT(_s);var vE=b_?b_.length:0;if(vE||(Qm&=~(T_|R_),b_=N_=_t),Z_=Z_===_t?Z_:qS(b0(Z_),0),_v=_v===_t?_v:b0(_v),vE-=N_?N_.length:0,Qm&R_){var yE=b_,wE=N_;b_=N_=_t}var DE=nE?_t:a2(_h),qE=[_h,Qm,a_,b_,N_,yE,wE,H_,Z_,_v];if(DE&&p2(qE,DE),_h=qE[0],Qm=qE[1],a_=qE[2],b_=qE[3],N_=qE[4],_v=qE[9]=qE[9]===_t?nE?0:_h.length:qS(qE[9]-vE,0),!_v&&Qm&(f_|S_)&&(Qm&=~(f_|S_)),!Qm||Qm==y_)var _b=E$(_h,Qm,a_);else Qm==f_||Qm==S_?_b=HY(_h,Qm,_v):(Qm==T_||Qm==(y_|T_))&&!N_.length?_b=GY(_h,Qm,a_,b_):_b=NM.apply(_t,qE);var e0=DE?KP:U1;return UM(e0(_b,qE),_h,Qm)}function I$(_h,Qm,a_,b_){return _h===_t||aR(_h,JI[a_])&&!q0.call(b_,a_)?Qm:_h}function C$(_h,Qm,a_,b_,N_,H_){return SS(_h)&&SS(Qm)&&(H_.set(Qm,_h),M1(_h,Qm,_t,C$,H_),H_.delete(Qm)),_h}function A$(_h){return G1(_h)?_t:_h}function O$(_h,Qm,a_,b_,N_,H_){var Z_=a_&c_,_v=_h.length,nE=Qm.length;if(_v!=nE&&!(Z_&&nE>_v))return!1;var vE=H_.get(_h),yE=H_.get(Qm);if(vE&&yE)return vE==Qm&&yE==_h;var wE=-1,DE=!0,qE=a_&h_?new FO:_t;for(H_.set(_h,Qm),H_.set(Qm,_h);++wE<_v;){var _b=_h[wE],e0=Qm[wE];if(b_)var t0=Z_?b_(e0,_b,wE,Qm,_h,H_):b_(_b,e0,wE,_h,Qm,H_);if(t0!==_t){if(t0)continue;DE=!1;break}if(qE){if(!kN(Qm,function(k0,B0){if(!MO(qE,B0)&&(_b===k0||N_(_b,k0,a_,b_,H_)))return qE.push(B0)})){DE=!1;break}}else if(!(_b===e0||N_(_b,e0,a_,b_,H_))){DE=!1;break}}return H_.delete(_h),H_.delete(Qm),DE}function qY(_h,Qm,a_,b_,N_,H_,Z_){switch(a_){case OR:if(_h.byteLength!=Qm.byteLength||_h.byteOffset!=Qm.byteOffset)return!1;_h=_h.buffer,Qm=Qm.buffer;case tR:return!(_h.byteLength!=Qm.byteLength||!H_(new A1(_h),new A1(Qm)));case M0:case u0:case m0:return aR(+_h,+Qm);case C0:return _h.name==Qm.name&&_h.message==Qm.message;case RE:case jS:return _h==Qm+"";case $E:var _v=b1;case VE:var nE=b_&c_;if(_v||(_v=zI),_h.size!=Qm.size&&!nE)return!1;var vE=Z_.get(_h);if(vE)return vE==Qm;b_|=h_,Z_.set(_h,Qm);var yE=O$(_v(_h),_v(Qm),b_,N_,H_,Z_);return Z_.delete(_h),yE;case IT:if(_C)return _C.call(_h)==_C.call(Qm)}return!1}function N$(_h,Qm,a_,b_,N_,H_){var Z_=a_&c_,_v=DM(_h),nE=_v.length,vE=DM(Qm),yE=vE.length;if(nE!=yE&&!Z_)return!1;for(var wE=nE;wE--;){var DE=_v[wE];if(!(Z_?DE in Qm:q0.call(Qm,DE)))return!1}var qE=H_.get(_h),_b=H_.get(Qm);if(qE&&_b)return qE==Qm&&_b==_h;var e0=!0;H_.set(_h,Qm),H_.set(Qm,_h);for(var t0=Z_;++wE<nE;){DE=_v[wE];var k0=_h[DE],B0=Qm[DE];if(b_)var BS=Z_?b_(B0,k0,DE,Qm,_h,H_):b_(k0,B0,DE,_h,Qm,H_);if(!(BS===_t?k0===B0||N_(k0,B0,a_,b_,H_):BS)){e0=!1;break}t0||(t0=DE=="constructor")}if(e0&&!t0){var _T=_h.constructor,qT=Qm.constructor;_T!=qT&&"constructor"in _h&&"constructor"in Qm&&!(typeof _T=="function"&&_T instanceof _T&&typeof qT=="function"&&qT instanceof qT)&&(e0=!1)}return H_.delete(_h),H_.delete(Qm),e0}function NI(_h){return tL(U$(_h,_t,H$),_h+"")}function DM(_h){return e$(_h,YS,_k)}function ZN(_h){return e$(_h,mS,k$)}var a2=$N?function(_h){return $N.get(_h)}:dO;function PM(_h){for(var Qm=_h.name+"",a_=N1[Qm],b_=q0.call(N1,Qm)?a_.length:0;b_--;){var N_=a_[b_],H_=N_.func;if(H_==null||H_==_h)return N_.name}return Qm}function oI(_h){var Qm=q0.call(F_,"placeholder")?F_:_h;return Qm.placeholder}function ZE(){var _h=F_.iteratee||K1;return _h=_h===K1?r$:_h,arguments.length?_h(arguments[0],arguments[1]):_h}function oO(_h,Qm){var a_=_h.__data__;return KY(Qm)?a_[typeof Qm=="string"?"string":"hash"]:a_.map}function sO(_h){for(var Qm=YS(_h),a_=Qm.length;a_--;){var b_=Qm[a_],N_=_h[b_];Qm[a_]=[b_,N_,P$(N_)]}return Qm}function aO(_h,Qm){var a_=E1(_h,Qm);return VP(a_)?a_:_t}function c2(_h){var Qm=q0.call(_h,HE),a_=_h[HE];try{_h[HE]=_t;var b_=!0}catch{}var N_=xR.call(_h);return b_&&(Qm?_h[HE]=a_:delete _h[HE]),N_}var _k=xP?function(_h){return _h==null?[]:(_h=Y0(_h),AT(xP(_h),function(Qm){return v_.call(_h,Qm)}))}:RD,k$=xP?function(_h){for(var Qm=[];_h;)dR(Qm,_k(_h)),_h=tI(_h);return Qm}:RD,bT=xT;(MP&&bT(new MP(new ArrayBuffer(1)))!=OR||PN&&bT(new PN)!=$E||O1&&bT(O1.resolve())!=N0||UO&&bT(new UO)!=VE||jN&&bT(new jN)!=EI)&&(bT=function(_h){var Qm=xT(_h),a_=Qm==zE?_h.constructor:_t,b_=a_?MR(a_):"";if(b_)switch(b_){case sY:return OR;case aY:return $E;case HU:return N0;case DP:return VE;case GU:return EI}return Qm});function WY(_h,Qm,a_){for(var b_=-1,N_=a_.length;++b_<N_;){var H_=a_[b_],Z_=H_.size;switch(H_.type){case"drop":_h+=Z_;break;case"dropRight":Qm-=Z_;break;case"take":Qm=nT(Qm,_h+Z_);break;case"takeRight":_h=qS(_h,Qm-Z_);break}}return{start:_h,end:Qm}}function x$(_h){var Qm=_h.match(IL);return Qm?Qm[1].split(iP):[]}function L$(_h,Qm,a_){Qm=AI(Qm,_h);for(var b_=-1,N_=Qm.length,H_=!1;++b_<N_;){var Z_=ST(Qm[b_]);if(!(H_=_h!=null&&a_(_h,Z_)))break;_h=_h[Z_]}return H_||++b_!=N_?H_:(N_=_h==null?0:_h.length,!!N_&&H1(N_)&&kI(Z_,N_)&&(uE(_h)||uO(_h)))}function zY(_h){var Qm=_h.length,a_=new _h.constructor(Qm);return Qm&&typeof _h[0]=="string"&&q0.call(_h,"index")&&(a_.index=_h.index,a_.input=_h.input),a_}function u2(_h){return typeof _h.constructor=="function"&&!j1(_h)?k1(tI(_h)):{}}function l2(_h,Qm,a_){var b_=_h.constructor;switch(Qm){case tR:return ZP(_h);case M0:case u0:return new b_(+_h);case OR:return FY(_h,a_);case pN:case bO:case y0:case fN:case mN:case t1:case _N:case gN:case nR:return _$(_h,a_);case $E:return new b_;case m0:case jS:return new b_(_h);case RE:return YY(_h);case VE:return new b_;case IT:return BY(_h)}}function M$(_h,Qm){var a_=Qm.length;if(!a_)return _h;var b_=a_-1;return Qm[b_]=(a_>1?"& ":"")+Qm[b_],Qm=Qm.join(a_>2?", ":" "),_h.replace(bN,`{
/* [wrapped with `+Qm+`] */
`)}function sR(_h){return uE(_h)||uO(_h)||!!(X_&&_h&&_h[X_])}function kI(_h,Qm){var a_=typeof _h;return Qm=Qm??B_,!!Qm&&(a_=="number"||a_!="symbol"&&tT.test(_h))&&_h>-1&&_h%1==0&&_h<Qm}function MT(_h,Qm,a_){if(!SS(a_))return!1;var b_=typeof Qm;return(b_=="number"?DT(a_)&&kI(Qm,a_.length):b_=="string"&&Qm in a_)?aR(a_[Qm],_h):!1}function jM(_h,Qm){if(uE(_h))return!1;var a_=typeof _h;return a_=="number"||a_=="symbol"||a_=="boolean"||_h==null||VT(_h)?!0:nP.test(_h)||!yN.test(_h)||Qm!=null&&_h in Y0(Qm)}function KY(_h){var Qm=typeof _h;return Qm=="string"||Qm=="number"||Qm=="symbol"||Qm=="boolean"?_h!=="__proto__":_h===null}function d2(_h){var Qm=PM(_h),a_=F_[Qm];if(typeof a_!="function"||!(Qm in U0.prototype))return!1;if(_h===a_)return!0;var b_=a2(a_);return!!b_&&_h===b_[0]}function D$(_h){return!!oR&&oR in _h}var JY=jO?cI:cL;function j1(_h){var Qm=_h&&_h.constructor,a_=typeof Qm=="function"&&Qm.prototype||JI;return _h===a_}function P$(_h){return _h===_h&&!SS(_h)}function j$(_h,Qm){return function(a_){return a_==null?!1:a_[_h]===Qm&&(Qm!==_t||_h in Y0(a_))}}function h2(_h){var Qm=JM(_h,function(b_){return a_.size===_d&&a_.clear(),b_}),a_=Qm.cache;return Qm}function p2(_h,Qm){var a_=_h[1],b_=Qm[1],N_=a_|b_,H_=N_<(y_|l_|C_),Z_=b_==C_&&a_==f_||b_==C_&&a_==j_&&_h[7].length<=Qm[8]||b_==(C_|j_)&&Qm[7].length<=Qm[8]&&a_==f_;if(!(H_||Z_))return _h;b_&y_&&(_h[2]=Qm[2],N_|=a_&y_?0:d_);var _v=Qm[3];if(_v){var nE=_h[3];_h[3]=nE?v$(nE,_v,Qm[4]):_v,_h[4]=nE?kR(_h[3],_m):Qm[4]}return _v=Qm[5],_v&&(nE=_h[5],_h[5]=nE?e2(nE,_v,Qm[6]):_v,_h[6]=nE?kR(_h[5],_m):Qm[6]),_v=Qm[7],_v&&(_h[7]=_v),b_&C_&&(_h[8]=_h[8]==null?Qm[8]:nT(_h[8],Qm[8])),_h[9]==null&&(_h[9]=Qm[9]),_h[0]=Qm[0],_h[1]=N_,_h}function QY(_h){var Qm=[];if(_h!=null)for(var a_ in Y0(_h))Qm.push(a_);return Qm}function f2(_h){return xR.call(_h)}function U$(_h,Qm,a_){return Qm=qS(Qm===_t?_h.length-1:Qm,0),function(){for(var b_=arguments,N_=-1,H_=qS(b_.length-Qm,0),Z_=cE(H_);++N_<H_;)Z_[N_]=b_[Qm+N_];N_=-1;for(var _v=cE(Qm+1);++N_<Qm;)_v[N_]=b_[N_];return _v[Qm]=a_(Z_),CT(_h,this,_v)}}function m2(_h,Qm){return Qm.length<2?_h:BO(_h,_R(Qm,0,-1))}function XY(_h,Qm){for(var a_=_h.length,b_=nT(Qm.length,a_),N_=LT(_h);b_--;){var H_=Qm[b_];_h[b_]=kI(H_,a_)?N_[H_]:_t}return _h}function _x(_h,Qm){if(!(Qm==="constructor"&&typeof _h[Qm]=="function")&&Qm!="__proto__")return _h[Qm]}var U1=_2(KP),eL=XI||function(_h,Qm){return HS.setTimeout(_h,Qm)},tL=_2(UY);function UM(_h,Qm,a_){var b_=Qm+"";return tL(_h,M$(b_,F1(x$(b_),a_)))}function _2(_h){var Qm=0,a_=0;return function(){var b_=rY(),N_=G_-(b_-a_);if(a_=b_,N_>0){if(++Qm>=q_)return arguments[0]}else Qm=0;return _h.apply(_t,arguments)}}function nL(_h,Qm){var a_=-1,b_=_h.length,N_=b_-1;for(Qm=Qm===_t?b_:Qm;++a_<Qm;){var H_=bM(a_,N_),Z_=_h[H_];_h[H_]=_h[a_],_h[a_]=Z_}return _h.length=Qm,_h}var $1=h2(function(_h){var Qm=[];return _h.charCodeAt(0)===46&&Qm.push(""),_h.replace(i1,function(a_,b_,N_,H_){Qm.push(N_?H_.replace(sP,"$1"):b_||a_)}),Qm});function ST(_h){if(typeof _h=="string"||VT(_h))return _h;var Qm=_h+"";return Qm=="0"&&1/_h==-z_?"-0":Qm}function MR(_h){if(_h!=null){try{return I1.call(_h)}catch{}try{return _h+""}catch{}}return""}function F1(_h,Qm){return YT(kE,function(a_){var b_="_."+a_[0];Qm&a_[1]&&!kO(_h,b_)&&_h.push(b_)}),_h.sort()}function $M(_h){if(_h instanceof U0)return _h.clone();var Qm=new hR(_h.__wrapped__,_h.__chain__);return Qm.__actions__=LT(_h.__actions__),Qm.__index__=_h.__index__,Qm.__values__=_h.__values__,Qm}function g2(_h,Qm,a_){(a_?MT(_h,Qm,a_):Qm===_t)?Qm=1:Qm=qS(b0(Qm),0);var b_=_h==null?0:_h.length;if(!b_||Qm<1)return[];for(var N_=0,H_=0,Z_=cE(ZI(b_/Qm));N_<b_;)Z_[H_++]=_R(_h,N_,N_+=Qm);return Z_}function v2(_h){for(var Qm=-1,a_=_h==null?0:_h.length,b_=0,N_=[];++Qm<a_;){var H_=_h[Qm];H_&&(N_[b_++]=H_)}return N_}function $$(){var _h=arguments.length;if(!_h)return[];for(var Qm=cE(_h-1),a_=arguments[0],b_=_h;b_--;)Qm[b_-1]=arguments[b_];return dR(uE(a_)?LT(a_):[a_],mT(Qm,1))}var F$=A0(function(_h,Qm){return LS(_h)?VN(_h,mT(Qm,1,LS,!0)):[]}),ZY=A0(function(_h,Qm){var a_=gR(Qm);return LS(a_)&&(a_=_t),LS(_h)?VN(_h,mT(Qm,1,LS,!0),ZE(a_,2)):[]}),_B=A0(function(_h,Qm){var a_=gR(Qm);return LS(a_)&&(a_=_t),LS(_h)?VN(_h,mT(Qm,1,LS,!0),_t,a_):[]});function eV(_h,Qm,a_){var b_=_h==null?0:_h.length;return b_?(Qm=a_||Qm===_t?1:b0(Qm),_R(_h,Qm<0?0:Qm,b_)):[]}function qO(_h,Qm,a_){var b_=_h==null?0:_h.length;return b_?(Qm=a_||Qm===_t?1:b0(Qm),Qm=b_-Qm,_R(_h,0,Qm<0?0:Qm)):[]}function Y$(_h,Qm){return _h&&_h.length?AM(_h,ZE(Qm,3),!0,!0):[]}function tV(_h,Qm){return _h&&_h.length?AM(_h,ZE(Qm,3),!0):[]}function y2(_h,Qm,a_,b_){var N_=_h==null?0:_h.length;return N_?(a_&&typeof a_!="number"&&MT(_h,Qm,a_)&&(a_=0,b_=N_),kY(_h,Qm,a_,b_)):[]}function B$(_h,Qm,a_){var b_=_h==null?0:_h.length;if(!b_)return-1;var N_=a_==null?0:b0(a_);return N_<0&&(N_=qS(b_+N_,0)),p1(_h,ZE(Qm,3),N_)}function V$(_h,Qm,a_){var b_=_h==null?0:_h.length;if(!b_)return-1;var N_=b_-1;return a_!==_t&&(N_=b0(a_),N_=a_<0?qS(b_+N_,0):nT(N_,b_-1)),p1(_h,ZE(Qm,3),N_,!0)}function H$(_h){var Qm=_h==null?0:_h.length;return Qm?mT(_h,1):[]}function E2(_h){var Qm=_h==null?0:_h.length;return Qm?mT(_h,z_):[]}function G$(_h,Qm){var a_=_h==null?0:_h.length;return a_?(Qm=Qm===_t?1:b0(Qm),mT(_h,Qm)):[]}function q$(_h){for(var Qm=-1,a_=_h==null?0:_h.length,b_={};++Qm<a_;){var N_=_h[Qm];b_[N_[0]]=N_[1]}return b_}function b2(_h){return _h&&_h.length?_h[0]:_t}function FM(_h,Qm,a_){var b_=_h==null?0:_h.length;if(!b_)return-1;var N_=a_==null?0:b0(a_);return N_<0&&(N_=qS(b_+N_,0)),WI(_h,Qm,N_)}function W$(_h){var Qm=_h==null?0:_h.length;return Qm?_R(_h,0,-1):[]}var z$=A0(function(_h){var Qm=v0(_h,QP);return Qm.length&&Qm[0]===_h[0]?WN(Qm):[]}),nV=A0(function(_h){var Qm=gR(_h),a_=v0(_h,QP);return Qm===gR(a_)?Qm=_t:a_.pop(),a_.length&&a_[0]===_h[0]?WN(a_,ZE(Qm,2)):[]}),Y1=A0(function(_h){var Qm=gR(_h),a_=v0(_h,QP);return Qm=typeof Qm=="function"?Qm:_t,Qm&&a_.pop(),a_.length&&a_[0]===_h[0]?WN(a_,_t,Qm):[]});function K$(_h,Qm){return _h==null?"":LP.call(_h,Qm)}function gR(_h){var Qm=_h==null?0:_h.length;return Qm?_h[Qm-1]:_t}function rV(_h,Qm,a_){var b_=_h==null?0:_h.length;if(!b_)return-1;var N_=b_;return a_!==_t&&(N_=b0(a_),N_=N_<0?qS(b_+N_,0):nT(N_,b_-1)),Qm===Qm?TP(_h,Qm,N_):p1(_h,iM,N_,!0)}function iV(_h,Qm){return _h&&_h.length?nO(_h,b0(Qm)):_t}var oV=A0(S2);function S2(_h,Qm){return _h&&_h.length&&Qm&&Qm.length?CI(_h,Qm):_h}function sV(_h,Qm,a_){return _h&&_h.length&&Qm&&Qm.length?CI(_h,Qm,ZE(a_,2)):_h}function YM(_h,Qm,a_){return _h&&_h.length&&Qm&&Qm.length?CI(_h,Qm,_t,a_):_h}var J$=NI(function(_h,Qm){var a_=_h==null?0:_h.length,b_=mM(_h,Qm);return zP(_h,v0(Qm,function(N_){return kI(N_,a_)?+N_:N_}).sort(g$)),b_});function w2(_h,Qm){var a_=[];if(!(_h&&_h.length))return a_;var b_=-1,N_=[],H_=_h.length;for(Qm=ZE(Qm,3);++b_<H_;){var Z_=_h[b_];Qm(Z_,b_,_h)&&(a_.push(Z_),N_.push(b_))}return zP(_h,N_),a_}function BM(_h){return _h==null?_h:oY.call(_h)}function T2(_h,Qm,a_){var b_=_h==null?0:_h.length;return b_?(a_&&typeof a_!="number"&&MT(_h,Qm,a_)?(Qm=0,a_=b_):(Qm=Qm==null?0:b0(Qm),a_=a_===_t?b_:b0(a_)),_R(_h,Qm,a_)):[]}function aV(_h,Qm){return TM(_h,Qm)}function VM(_h,Qm,a_){return RM(_h,Qm,ZE(a_,2))}function xI(_h,Qm){var a_=_h==null?0:_h.length;if(a_){var b_=TM(_h,Qm);if(b_<a_&&aR(_h[b_],Qm))return b_}return-1}function cV(_h,Qm){return TM(_h,Qm,!0)}function cO(_h,Qm,a_){return RM(_h,Qm,ZE(a_,2),!0)}function R2(_h,Qm){var a_=_h==null?0:_h.length;if(a_){var b_=TM(_h,Qm,!0)-1;if(aR(_h[b_],Qm))return b_}return-1}function uV(_h){return _h&&_h.length?l$(_h):[]}function lV(_h,Qm){return _h&&_h.length?l$(_h,ZE(Qm,2)):[]}function dV(_h){var Qm=_h==null?0:_h.length;return Qm?_R(_h,1,Qm):[]}function I2(_h,Qm,a_){return _h&&_h.length?(Qm=a_||Qm===_t?1:b0(Qm),_R(_h,0,Qm<0?0:Qm)):[]}function HM(_h,Qm,a_){var b_=_h==null?0:_h.length;return b_?(Qm=a_||Qm===_t?1:b0(Qm),Qm=b_-Qm,_R(_h,Qm<0?0:Qm,b_)):[]}function hV(_h,Qm){return _h&&_h.length?AM(_h,ZE(Qm,3),!1,!0):[]}function pV(_h,Qm){return _h&&_h.length?AM(_h,ZE(Qm,3)):[]}var fV=A0(function(_h){return rO(mT(_h,1,LS,!0))}),Q$=A0(function(_h){var Qm=gR(_h);return LS(Qm)&&(Qm=_t),rO(mT(_h,1,LS,!0),ZE(Qm,2))}),mV=A0(function(_h){var Qm=gR(_h);return Qm=typeof Qm=="function"?Qm:_t,rO(mT(_h,1,LS,!0),_t,Qm)});function _V(_h){return _h&&_h.length?rO(_h):[]}function X$(_h,Qm){return _h&&_h.length?rO(_h,ZE(Qm,2)):[]}function C2(_h,Qm){return Qm=typeof Qm=="function"?Qm:_t,_h&&_h.length?rO(_h,_t,Qm):[]}function A2(_h){if(!(_h&&_h.length))return[];var Qm=0;return _h=AT(_h,function(a_){if(LS(a_))return Qm=qS(a_.length,Qm),!0}),v1(Qm,function(a_){return v0(_h,f1(a_))})}function Z$(_h,Qm){if(!(_h&&_h.length))return[];var a_=A2(_h);return Qm==null?a_:v0(a_,function(b_){return CT(Qm,_t,b_)})}var e3=A0(function(_h,Qm){return LS(_h)?VN(_h,Qm):[]}),O2=A0(function(_h){return JP(AT(_h,LS))}),gV=A0(function(_h){var Qm=gR(_h);return LS(Qm)&&(Qm=_t),JP(AT(_h,LS),ZE(Qm,2))}),N2=A0(function(_h){var Qm=gR(_h);return Qm=typeof Qm=="function"?Qm:_t,JP(AT(_h,LS),_t,Qm)}),vV=A0(A2);function yV(_h,Qm){return p$(_h||[],Qm||[],L1)}function GM(_h,Qm){return p$(_h||[],Qm||[],HO)}var t3=A0(function(_h){var Qm=_h.length,a_=Qm>1?_h[Qm-1]:_t;return a_=typeof a_=="function"?(_h.pop(),a_):_t,Z$(_h,a_)});function n3(_h){var Qm=F_(_h);return Qm.__chain__=!0,Qm}function sI(_h,Qm){return Qm(_h),_h}function rL(_h,Qm){return Qm(_h)}var EV=NI(function(_h){var Qm=_h.length,a_=Qm?_h[0]:0,b_=this.__wrapped__,N_=function(H_){return mM(H_,_h)};return Qm>1||this.__actions__.length||!(b_ instanceof U0)||!kI(a_)?this.thru(N_):(b_=b_.slice(a_,+a_+(Qm?1:0)),b_.__actions__.push({func:rL,args:[N_],thisArg:_t}),new hR(b_,this.__chain__).thru(function(H_){return Qm&&!H_.length&&H_.push(_t),H_}))});function bV(){return n3(this)}function SV(){return new hR(this.value(),this.__chain__)}function aI(){this.__values__===_t&&(this.__values__=W2(this.value()));var _h=this.__index__>=this.__values__.length,Qm=_h?_t:this.__values__[this.__index__++];return{done:_h,value:Qm}}function qM(){return this}function r3(_h){for(var Qm,a_=this;a_ instanceof BN;){var b_=$M(a_);b_.__index__=0,b_.__values__=_t,Qm?N_.__wrapped__=b_:Qm=b_;var N_=b_;a_=a_.__wrapped__}return N_.__wrapped__=_h,Qm}function k2(){var _h=this.__wrapped__;if(_h instanceof U0){var Qm=_h;return this.__actions__.length&&(Qm=new U0(this)),Qm=Qm.reverse(),Qm.__actions__.push({func:rL,args:[BM],thisArg:_t}),new hR(Qm,this.__chain__)}return this.thru(BM)}function x2(){return h$(this.__wrapped__,this.__actions__)}var B1=XN(function(_h,Qm,a_){q0.call(_h,a_)?++_h[a_]:pR(_h,a_,1)});function wV(_h,Qm,a_){var b_=uE(_h)?nM:NY;return a_&&MT(_h,Qm,a_)&&(Qm=_t),b_(_h,ZE(Qm,3))}function TV(_h,Qm){var a_=uE(_h)?AT:HN;return a_(_h,ZE(Qm,3))}var i3=r2(B$),o3=r2(V$);function WM(_h,Qm){return mT(LI(_h,Qm),1)}function RV(_h,Qm){return mT(LI(_h,Qm),z_)}function s3(_h,Qm,a_){return a_=a_===_t?1:b0(a_),mT(LI(_h,Qm),a_)}function L2(_h,Qm){var a_=uE(_h)?YT:eO;return a_(_h,ZE(Qm,3))}function M2(_h,Qm){var a_=uE(_h)?qI:ZU;return a_(_h,ZE(Qm,3))}var a3=XN(function(_h,Qm,a_){q0.call(_h,a_)?_h[a_].push(Qm):pR(_h,a_,[Qm])});function IV(_h,Qm,a_,b_){_h=DT(_h)?_h:DR(_h),a_=a_&&!b_?b0(a_):0;var N_=_h.length;return a_<0&&(a_=qS(N_+a_,0)),oL(_h)?a_<=N_&&_h.indexOf(Qm,a_)>-1:!!N_&&WI(_h,Qm,a_)>-1}var c3=A0(function(_h,Qm,a_){var b_=-1,N_=typeof Qm=="function",H_=DT(_h)?cE(_h.length):[];return eO(_h,function(Z_){H_[++b_]=N_?CT(Qm,Z_,a_):VO(Z_,Qm,a_)}),H_}),CV=XN(function(_h,Qm,a_){pR(_h,a_,Qm)});function LI(_h,Qm){var a_=uE(_h)?v0:i$;return a_(_h,ZE(Qm,3))}function V1(_h,Qm,a_,b_){return _h==null?[]:(uE(Qm)||(Qm=Qm==null?[]:[Qm]),a_=b_?_t:a_,uE(a_)||(a_=a_==null?[]:[a_]),s$(_h,Qm,a_))}var D2=XN(function(_h,Qm,a_){_h[a_?0:1].push(Qm)},function(){return[[],[]]});function AV(_h,Qm,a_){var b_=uE(_h)?h1:m1,N_=arguments.length<3;return b_(_h,ZE(Qm,4),a_,N_,eO)}function OV(_h,Qm,a_){var b_=uE(_h)?QR:m1,N_=arguments.length<3;return b_(_h,ZE(Qm,4),a_,N_,ZU)}function NV(_h,Qm){var a_=uE(_h)?AT:HN;return a_(_h,iL(ZE(Qm,3)))}function kV(_h){var Qm=uE(_h)?QU:u$;return Qm(_h)}function xV(_h,Qm,a_){(a_?MT(_h,Qm,a_):Qm===_t)?Qm=1:Qm=b0(Qm);var b_=uE(_h)?RY:jY;return b_(_h,Qm)}function LV(_h){var Qm=uE(_h)?IY:wM;return Qm(_h)}function MV(_h){if(_h==null)return 0;if(DT(_h))return oL(_h)?TI(_h):_h.length;var Qm=bT(_h);return Qm==$E||Qm==VE?_h.size:GP(_h).length}function DV(_h,Qm,a_){var b_=uE(_h)?kN:$Y;return a_&&MT(_h,Qm,a_)&&(Qm=_t),b_(_h,ZE(Qm,3))}var PV=A0(function(_h,Qm){if(_h==null)return[];var a_=Qm.length;return a_>1&&MT(_h,Qm[0],Qm[1])?Qm=[]:a_>2&&MT(Qm[0],Qm[1],Qm[2])&&(Qm=[Qm[0]]),s$(_h,mT(Qm,1),[])}),zM=fT||function(){return HS.Date.now()};function jV(_h,Qm){if(typeof Qm!="function")throw new NT(_s);return _h=b0(_h),function(){if(--_h<1)return Qm.apply(this,arguments)}}function P2(_h,Qm,a_){return Qm=a_?_t:Qm,Qm=_h&&Qm==null?_h.length:Qm,iI(_h,C_,_t,_t,_t,_t,Qm)}function j2(_h,Qm){var a_;if(typeof Qm!="function")throw new NT(_s);return _h=b0(_h),function(){return--_h>0&&(a_=Qm.apply(this,arguments)),_h<=1&&(Qm=_t),a_}}var U2=A0(function(_h,Qm,a_){var b_=y_;if(a_.length){var N_=kR(a_,oI(U2));b_|=T_}return iI(_h,b_,Qm,a_,N_)}),u3=A0(function(_h,Qm,a_){var b_=y_|l_;if(a_.length){var N_=kR(a_,oI(u3));b_|=T_}return iI(Qm,b_,_h,a_,N_)});function l3(_h,Qm,a_){Qm=a_?_t:Qm;var b_=iI(_h,f_,_t,_t,_t,_t,_t,Qm);return b_.placeholder=l3.placeholder,b_}function $2(_h,Qm,a_){Qm=a_?_t:Qm;var b_=iI(_h,S_,_t,_t,_t,_t,_t,Qm);return b_.placeholder=$2.placeholder,b_}function KM(_h,Qm,a_){var b_,N_,H_,Z_,_v,nE,vE=0,yE=!1,wE=!1,DE=!0;if(typeof _h!="function")throw new NT(_s);Qm=HT(Qm)||0,SS(a_)&&(yE=!!a_.leading,wE="maxWait"in a_,H_=wE?qS(HT(a_.maxWait)||0,Qm):H_,DE="trailing"in a_?!!a_.trailing:DE);function qE(MS){var jR=b_,lI=N_;return b_=N_=_t,vE=MS,Z_=_h.apply(lI,jR),Z_}function _b(MS){return vE=MS,_v=eL(k0,Qm),yE?qE(MS):Z_}function e0(MS){var jR=MS-nE,lI=MS-vE,pU=Qm-jR;return wE?nT(pU,H_-lI):pU}function t0(MS){var jR=MS-nE,lI=MS-vE;return nE===_t||jR>=Qm||jR<0||wE&&lI>=H_}function k0(){var MS=zM();if(t0(MS))return B0(MS);_v=eL(k0,e0(MS))}function B0(MS){return _v=_t,DE&&b_?qE(MS):(b_=N_=_t,Z_)}function BS(){_v!==_t&&f$(_v),vE=0,b_=nE=N_=_v=_t}function _T(){return _v===_t?Z_:B0(zM())}function qT(){var MS=zM(),jR=t0(MS);if(b_=arguments,N_=this,nE=MS,jR){if(_v===_t)return _b(nE);if(wE)return f$(_v),_v=eL(k0,Qm),qE(nE)}return _v===_t&&(_v=eL(k0,Qm)),Z_}return qT.cancel=BS,qT.flush=_T,qT}var UV=A0(function(_h,Qm){return XU(_h,1,Qm)}),$V=A0(function(_h,Qm,a_){return XU(_h,HT(Qm)||0,a_)});function FV(_h){return iI(_h,W_)}function JM(_h,Qm){if(typeof _h!="function"||Qm!=null&&typeof Qm!="function")throw new NT(_s);var a_=function(){var b_=arguments,N_=Qm?Qm.apply(this,b_):b_[0],H_=a_.cache;if(H_.has(N_))return H_.get(N_);var Z_=_h.apply(this,b_);return a_.cache=H_.set(N_,Z_)||H_,Z_};return a_.cache=new(JM.Cache||II),a_}JM.Cache=II;function iL(_h){if(typeof _h!="function")throw new NT(_s);return function(){var Qm=arguments;switch(Qm.length){case 0:return!_h.call(this);case 1:return!_h.call(this,Qm[0]);case 2:return!_h.call(this,Qm[0],Qm[1]);case 3:return!_h.call(this,Qm[0],Qm[1],Qm[2])}return!_h.apply(this,Qm)}}function YV(_h){return j2(2,_h)}var d3=QN(function(_h,Qm){Qm=Qm.length==1&&uE(Qm[0])?v0(Qm[0],CS(ZE())):v0(mT(Qm,1),CS(ZE()));var a_=Qm.length;return A0(function(b_){for(var N_=-1,H_=nT(b_.length,a_);++N_<H_;)b_[N_]=Qm[N_].call(this,b_[N_]);return CT(_h,this,b_)})}),F2=A0(function(_h,Qm){var a_=kR(Qm,oI(F2));return iI(_h,T_,_t,Qm,a_)}),h3=A0(function(_h,Qm){var a_=kR(Qm,oI(h3));return iI(_h,R_,_t,Qm,a_)}),p3=NI(function(_h,Qm){return iI(_h,j_,_t,_t,_t,Qm)});function BV(_h,Qm){if(typeof _h!="function")throw new NT(_s);return Qm=Qm===_t?Qm:b0(Qm),A0(_h,Qm)}function f3(_h,Qm){if(typeof _h!="function")throw new NT(_s);return Qm=Qm==null?0:qS(b0(Qm),0),A0(function(a_){var b_=a_[Qm],N_=iO(a_,0,Qm);return b_&&dR(N_,b_),CT(_h,this,N_)})}function VV(_h,Qm,a_){var b_=!0,N_=!0;if(typeof _h!="function")throw new NT(_s);return SS(a_)&&(b_="leading"in a_?!!a_.leading:b_,N_="trailing"in a_?!!a_.trailing:N_),KM(_h,Qm,{leading:b_,maxWait:Qm,trailing:N_})}function HV(_h){return P2(_h,1)}function GV(_h,Qm){return F2(XP(Qm),_h)}function qV(){if(!arguments.length)return[];var _h=arguments[0];return uE(_h)?_h:[_h]}function WV(_h){return fR(_h,i_)}function zV(_h,Qm){return Qm=typeof Qm=="function"?Qm:_t,fR(_h,i_,Qm)}function KV(_h){return fR(_h,e_|i_)}function m3(_h,Qm){return Qm=typeof Qm=="function"?Qm:_t,fR(_h,e_|i_,Qm)}function _3(_h,Qm){return Qm==null||YO(_h,Qm,YS(Qm))}function aR(_h,Qm){return _h===Qm||_h!==_h&&Qm!==Qm}var g3=LM(FP),Y2=LM(function(_h,Qm){return _h>=Qm}),uO=t$(function(){return arguments}())?t$:function(_h){return AS(_h)&&q0.call(_h,"callee")&&!v_.call(_h,"callee")},uE=cE.isArray,v3=eM?CS(eM):EM;function DT(_h){return _h!=null&&H1(_h.length)&&!cI(_h)}function LS(_h){return AS(_h)&&DT(_h)}function y3(_h){return _h===!0||_h===!1||AS(_h)&&xT(_h)==M0}var MI=tY||cL,E3=tM?CS(tM):zN;function b3(_h){return AS(_h)&&_h.nodeType===1&&!G1(_h)}function S3(_h){if(_h==null)return!0;if(DT(_h)&&(uE(_h)||typeof _h=="string"||typeof _h.splice=="function"||MI(_h)||WO(_h)||uO(_h)))return!_h.length;var Qm=bT(_h);if(Qm==$E||Qm==VE)return!_h.size;if(j1(_h))return!GP(_h).length;for(var a_ in _h)if(q0.call(_h,a_))return!1;return!0}function w3(_h,Qm){return tO(_h,Qm)}function B2(_h,Qm,a_){a_=typeof a_=="function"?a_:_t;var b_=a_?a_(_h,Qm):_t;return b_===_t?tO(_h,Qm,_t,a_):!!b_}function QM(_h){if(!AS(_h))return!1;var Qm=xT(_h);return Qm==C0||Qm==D0||typeof _h.message=="string"&&typeof _h.name=="string"&&!G1(_h)}function T3(_h){return typeof _h=="number"&&BU(_h)}function cI(_h){if(!SS(_h))return!1;var Qm=xT(_h);return Qm==QE||Qm==f0||Qm==d0||Qm==K0}function V2(_h){return typeof _h=="number"&&_h==b0(_h)}function H1(_h){return typeof _h=="number"&&_h>-1&&_h%1==0&&_h<=B_}function SS(_h){var Qm=typeof _h;return _h!=null&&(Qm=="object"||Qm=="function")}function AS(_h){return _h!=null&&typeof _h=="object"}var H2=JR?CS(JR):MY;function R3(_h,Qm){return _h===Qm||BP(_h,Qm,sO(Qm))}function I3(_h,Qm,a_){return a_=typeof a_=="function"?a_:_t,BP(_h,Qm,sO(Qm),a_)}function C3(_h){return G2(_h)&&_h!=+_h}function A3(_h){if(JY(_h))throw new l0(_i);return VP(_h)}function O3(_h){return _h===null}function N3(_h){return _h==null}function G2(_h){return typeof _h=="number"||AS(_h)&&xT(_h)==m0}function G1(_h){if(!AS(_h)||xT(_h)!=zE)return!1;var Qm=tI(_h);if(Qm===null)return!0;var a_=q0.call(Qm,"constructor")&&Qm.constructor;return typeof a_=="function"&&a_ instanceof a_&&I1.call(a_)==dM}var XM=GI?CS(GI):DY;function k3(_h){return V2(_h)&&_h>=-B_&&_h<=B_}var q2=ON?CS(ON):n$;function oL(_h){return typeof _h=="string"||!uE(_h)&&AS(_h)&&xT(_h)==jS}function VT(_h){return typeof _h=="symbol"||AS(_h)&&xT(_h)==IT}var WO=d1?CS(d1):HP;function x3(_h){return _h===_t}function L3(_h){return AS(_h)&&bT(_h)==EI}function JV(_h){return AS(_h)&&xT(_h)==hN}var QV=LM(KN),XV=LM(function(_h,Qm){return _h<=Qm});function W2(_h){if(!_h)return[];if(DT(_h))return oL(_h)?ET(_h):LT(_h);if(lE&&_h[lE])return wP(_h[lE]());var Qm=bT(_h),a_=Qm==$E?b1:Qm==VE?zI:DR;return a_(_h)}function vR(_h){if(!_h)return _h===0?_h:0;if(_h=HT(_h),_h===z_||_h===-z_){var Qm=_h<0?-1:1;return Qm*Q_}return _h===_h?_h:0}function b0(_h){var Qm=vR(_h),a_=Qm%1;return Qm===Qm?a_?Qm-a_:Qm:0}function M3(_h){return _h?nI(b0(_h),0,rE):0}function HT(_h){if(typeof _h=="number")return _h;if(VT(_h))return K_;if(SS(_h)){var Qm=typeof _h.valueOf=="function"?_h.valueOf():_h;_h=SS(Qm)?Qm+"":Qm}if(typeof _h!="string")return _h===0?_h:+_h;_h=MN(_h);var a_=SO.test(_h);return a_||o1.test(_h)?QL(_h.slice(2),a_?2:8):SN.test(_h)?K_:+_h}function D3(_h){return rI(_h,mS(_h))}function ZV(_h){return _h?nI(b0(_h),-B_,B_):_h===0?_h:0}function Z0(_h){return _h==null?"":BT(_h)}var P3=OI(function(_h,Qm){if(j1(Qm)||DT(Qm)){rI(Qm,YS(Qm),_h);return}for(var a_ in Qm)q0.call(Qm,a_)&&L1(_h,a_,Qm[a_])}),j3=OI(function(_h,Qm){rI(Qm,mS(Qm),_h)}),ZM=OI(function(_h,Qm,a_,b_){rI(Qm,mS(Qm),_h,b_)}),e4=OI(function(_h,Qm,a_,b_){rI(Qm,YS(Qm),_h,b_)}),t4=NI(mM);function z2(_h,Qm){var a_=k1(_h);return Qm==null?a_:UP(a_,Qm)}var DI=A0(function(_h,Qm){_h=Y0(_h);var a_=-1,b_=Qm.length,N_=b_>2?Qm[2]:_t;for(N_&&MT(Qm[0],Qm[1],N_)&&(b_=1);++a_<b_;)for(var H_=Qm[a_],Z_=mS(H_),_v=-1,nE=Z_.length;++_v<nE;){var vE=Z_[_v],yE=_h[vE];(yE===_t||aR(yE,JI[vE])&&!q0.call(_h,vE))&&(_h[vE]=H_[vE])}return _h}),K2=A0(function(_h){return _h.push(_t,C$),CT(U3,_t,_h)});function q1(_h,Qm){return rM(_h,ZE(Qm,3),mR)}function n4(_h,Qm){return rM(_h,ZE(Qm,3),$P)}function tD(_h,Qm){return _h==null?_h:gM(_h,ZE(Qm,3),mS)}function J2(_h,Qm){return _h==null?_h:GN(_h,ZE(Qm,3),mS)}function sD(_h,Qm){return _h&&mR(_h,ZE(Qm,3))}function uD(_h,Qm){return _h&&$P(_h,ZE(Qm,3))}function Q2(_h){return _h==null?[]:vM(_h,YS(_h))}function X2(_h){return _h==null?[]:vM(_h,mS(_h))}function W1(_h,Qm,a_){var b_=_h==null?_t:BO(_h,Qm);return b_===_t?a_:b_}function _D(_h,Qm){return _h!=null&&L$(_h,Qm,yM)}function Z2(_h,Qm){return _h!=null&&L$(_h,Qm,xY)}var zS=i2(function(_h,Qm,a_){Qm!=null&&typeof Qm.toString!="function"&&(Qm=xR.call(Qm)),_h[Qm]=a_},JS(GT)),S0=i2(function(_h,Qm,a_){Qm!=null&&typeof Qm.toString!="function"&&(Qm=xR.call(Qm)),q0.call(_h,Qm)?_h[Qm].push(a_):_h[Qm]=[a_]},ZE),_j=A0(VO);function YS(_h){return DT(_h)?JU(_h):GP(_h)}function mS(_h){return DT(_h)?JU(_h,!0):qP(_h)}function PI(_h,Qm){var a_={};return Qm=ZE(Qm,3),mR(_h,function(b_,N_,H_){pR(a_,Qm(b_,N_,H_),b_)}),a_}function I0(_h,Qm){var a_={};return Qm=ZE(Qm,3),mR(_h,function(b_,N_,H_){pR(a_,N_,Qm(b_,N_,H_))}),a_}var r4=OI(function(_h,Qm,a_){M1(_h,Qm,a_)}),U3=OI(function(_h,Qm,a_,b_){M1(_h,Qm,a_,b_)}),i4=NI(function(_h,Qm){var a_={};if(_h==null)return a_;var b_=!1;Qm=v0(Qm,function(H_){return H_=AI(H_,_h),b_||(b_=H_.length>1),H_}),rI(_h,ZN(_h),a_),b_&&(a_=fR(a_,e_|t_|i_,A$));for(var N_=Qm.length;N_--;)CM(a_,Qm[N_]);return a_});function vD(_h,Qm){return $3(_h,iL(ZE(Qm)))}var o4=NI(function(_h,Qm){return _h==null?{}:a$(_h,Qm)});function $3(_h,Qm){if(_h==null)return{};var a_=v0(ZN(_h),function(b_){return[b_]});return Qm=ZE(Qm),c$(_h,a_,function(b_,N_){return Qm(b_,N_[0])})}function $j(_h,Qm,a_){Qm=AI(Qm,_h);var b_=-1,N_=Qm.length;for(N_||(N_=1,_h=_t);++b_<N_;){var H_=_h==null?_t:_h[ST(Qm[b_])];H_===_t&&(b_=N_,H_=a_),_h=cI(H_)?H_.call(_h):H_}return _h}function rT(_h,Qm,a_){return _h==null?_h:HO(_h,Qm,a_)}function tS(_h,Qm,a_,b_){return b_=typeof b_=="function"?b_:_t,_h==null?_h:HO(_h,Qm,a_,b_)}var KS=R$(YS),yD=R$(mS);function F3(_h,Qm,a_){var b_=uE(_h),N_=b_||MI(_h)||WO(_h);if(Qm=ZE(Qm,4),a_==null){var H_=_h&&_h.constructor;N_?a_=b_?new H_:[]:SS(_h)?a_=cI(H_)?k1(tI(_h)):{}:a_={}}return(N_?YT:mR)(_h,function(Z_,_v,nE){return Qm(a_,Z_,_v,nE)}),a_}function Y3(_h,Qm){return _h==null?!0:CM(_h,Qm)}function B3(_h,Qm,a_){return _h==null?_h:d$(_h,Qm,XP(a_))}function V3(_h,Qm,a_,b_){return b_=typeof b_=="function"?b_:_t,_h==null?_h:d$(_h,Qm,XP(a_),b_)}function DR(_h){return _h==null?[]:LO(_h,YS(_h))}function H3(_h){return _h==null?[]:LO(_h,mS(_h))}function G3(_h,Qm,a_){return a_===_t&&(a_=Qm,Qm=_t),a_!==_t&&(a_=HT(a_),a_=a_===a_?a_:0),Qm!==_t&&(Qm=HT(Qm),Qm=Qm===Qm?Qm:0),nI(HT(_h),Qm,a_)}function eU(_h,Qm,a_){return Qm=vR(Qm),a_===_t?(a_=Qm,Qm=0):a_=vR(a_),_h=HT(_h),qN(_h,Qm,a_)}function uI(_h,Qm,a_){if(a_&&typeof a_!="boolean"&&MT(_h,Qm,a_)&&(Qm=a_=_t),a_===_t&&(typeof Qm=="boolean"?(a_=Qm,Qm=_t):typeof _h=="boolean"&&(a_=_h,_h=_t)),_h===_t&&Qm===_t?(_h=0,Qm=1):(_h=vR(_h),Qm===_t?(Qm=_h,_h=0):Qm=vR(Qm)),_h>Qm){var b_=_h;_h=Qm,Qm=b_}if(a_||_h%1||Qm%1){var N_=VU();return nT(_h+N_*(Qm-_h+JL("1e-"+((N_+"").length-1))),Qm)}return bM(_h,Qm)}var q3=GO(function(_h,Qm,a_){return Qm=Qm.toLowerCase(),_h+(a_?tU(Qm):Qm)});function tU(_h){return cU(Z0(_h).toLowerCase())}function lO(_h){return _h=Z0(_h),_h&&_h.replace(cP,ZR).replace(WL,"")}function nU(_h,Qm,a_){_h=Z0(_h),Qm=BT(Qm);var b_=_h.length;a_=a_===_t?b_:nI(b0(a_),0,b_);var N_=a_;return a_-=Qm.length,a_>=0&&_h.slice(a_,N_)==Qm}function sL(_h){return _h=Z0(_h),_h&&tP.test(_h)?_h.replace(TL,sM):_h}function W3(_h){return _h=Z0(_h),_h&&rP.test(_h)?_h.replace(BI,"\\$&"):_h}var s4=GO(function(_h,Qm,a_){return _h+(a_?"-":"")+Qm.toLowerCase()}),a4=GO(function(_h,Qm,a_){return _h+(a_?" ":"")+Qm.toLowerCase()}),z3=b$("toLowerCase");function K3(_h,Qm,a_){_h=Z0(_h),Qm=b0(Qm);var b_=Qm?TI(_h):0;if(!Qm||b_>=Qm)return _h;var N_=(Qm-b_)/2;return xM(DN(N_),a_)+_h+xM(ZI(N_),a_)}function c4(_h,Qm,a_){_h=Z0(_h),Qm=b0(Qm);var b_=Qm?TI(_h):0;return Qm&&b_<Qm?_h+xM(Qm-b_,a_):_h}function J3(_h,Qm,a_){_h=Z0(_h),Qm=b0(Qm);var b_=Qm?TI(_h):0;return Qm&&b_<Qm?xM(Qm-b_,a_)+_h:_h}function p_(_h,Qm,a_){return a_||Qm==null?Qm=0:Qm&&(Qm=+Qm),iY(Z0(_h).replace(EN,""),Qm||0)}function rU(_h,Qm,a_){return(a_?MT(_h,Qm,a_):Qm===_t)?Qm=1:Qm=b0(Qm),JN(Z0(_h),Qm)}function iU(){var _h=arguments,Qm=Z0(_h[0]);return _h.length<3?Qm:Qm.replace(_h[1],_h[2])}var Q3=GO(function(_h,Qm,a_){return _h+(a_?"_":"")+Qm.toLowerCase()});function u4(_h,Qm,a_){return a_&&typeof a_!="number"&&MT(_h,Qm,a_)&&(Qm=a_=_t),a_=a_===_t?rE:a_>>>0,a_?(_h=Z0(_h),_h&&(typeof Qm=="string"||Qm!=null&&!XM(Qm))&&(Qm=BT(Qm),!Qm&&OT(_h))?iO(ET(_h),0,a_):_h.split(Qm,a_)):[]}var oU=GO(function(_h,Qm,a_){return _h+(a_?" ":"")+cU(Qm)});function sU(_h,Qm,a_){return _h=Z0(_h),a_=a_==null?0:nI(b0(a_),0,_h.length),Qm=BT(Qm),_h.slice(a_,a_+Qm.length)==Qm}function zO(_h,Qm,a_){var b_=F_.templateSettings;a_&&MT(_h,Qm,a_)&&(Qm=_t),_h=Z0(_h),Qm=ZM({},Qm,b_,I$);var N_=ZM({},Qm.imports,b_.imports,I$),H_=YS(N_),Z_=LO(N_,H_),_v,nE,vE=0,yE=Qm.interpolate||s1,wE="__p += '",DE=w1((Qm.escape||s1).source+"|"+yE.source+"|"+(yE===r1?aP:s1).source+"|"+(Qm.evaluate||s1).source+"|$","g"),qE="//# sourceURL="+(q0.call(Qm,"sourceURL")?(Qm.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++KL+"]")+`
`;_h.replace(DE,function(t0,k0,B0,BS,_T,qT){return B0||(B0=BS),wE+=_h.slice(vE,qT).replace(AL,aM),k0&&(_v=!0,wE+=`' +
__e(`+k0+`) +
'`),_T&&(nE=!0,wE+=`';
`+_T+`;
__p += '`),B0&&(wE+=`' +
((__t = (`+B0+`)) == null ? '' : __t) +
'`),vE=qT+t0.length,t0}),wE+=`';
`;var _b=q0.call(Qm,"variable")&&Qm.variable;if(!_b)wE=`with (obj) {
`+wE+`
}
`;else if(KR.test(_b))throw new l0(_c);wE=(nE?wE.replace(ZD,""):wE).replace(n1,"$1").replace(eP,"$1;"),wE="function("+(_b||"obj")+`) {
`+(_b?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(_v?", __e = _.escape":"")+(nE?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+wE+`return __p
}`;var e0=eF(function(){return G0(H_,qE+"return "+wE).apply(_t,Z_)});if(e0.source=wE,QM(e0))throw e0;return e0}function aU(_h){return Z0(_h).toLowerCase()}function ED(_h){return Z0(_h).toUpperCase()}function X3(_h,Qm,a_){if(_h=Z0(_h),_h&&(a_||Qm===_t))return MN(_h);if(!_h||!(Qm=BT(Qm)))return _h;var b_=ET(_h),N_=ET(Qm),H_=oM(b_,N_),Z_=y1(b_,N_)+1;return iO(b_,H_,Z_).join("")}function Z3(_h,Qm,a_){if(_h=Z0(_h),_h&&(a_||Qm===_t))return _h.slice(0,PO(_h)+1);if(!_h||!(Qm=BT(Qm)))return _h;var b_=ET(_h),N_=y1(b_,ET(Qm))+1;return iO(b_,0,N_).join("")}function SD(_h,Qm,a_){if(_h=Z0(_h),_h&&(a_||Qm===_t))return _h.replace(EN,"");if(!_h||!(Qm=BT(Qm)))return _h;var b_=ET(_h),N_=oM(b_,ET(Qm));return iO(b_,N_).join("")}function l4(_h,Qm){var a_=A_,b_=$_;if(SS(Qm)){var N_="separator"in Qm?Qm.separator:N_;a_="length"in Qm?b0(Qm.length):a_,b_="omission"in Qm?BT(Qm.omission):b_}_h=Z0(_h);var H_=_h.length;if(OT(_h)){var Z_=ET(_h);H_=Z_.length}if(a_>=H_)return _h;var _v=a_-TI(b_);if(_v<1)return b_;var nE=Z_?iO(Z_,0,_v).join(""):_h.slice(0,_v);if(N_===_t)return nE+b_;if(Z_&&(_v+=nE.length-_v),XM(N_)){if(_h.slice(_v).search(N_)){var vE,yE=nE;for(N_.global||(N_=w1(N_.source,Z0(eT.exec(N_))+"g")),N_.lastIndex=0;vE=N_.exec(yE);)var wE=vE.index;nE=nE.slice(0,wE===_t?_v:wE)}}else if(_h.indexOf(BT(N_),_v)!=_v){var DE=nE.lastIndexOf(N_);DE>-1&&(nE=nE.slice(0,DE))}return nE+b_}function d4(_h){return _h=Z0(_h),_h&&rR.test(_h)?_h.replace(wL,RP):_h}var h4=GO(function(_h,Qm,a_){return _h+(a_?" ":"")+Qm.toUpperCase()}),cU=b$("toUpperCase");function wD(_h,Qm,a_){return _h=Z0(_h),Qm=a_?_t:Qm,Qm===_t?SP(_h)?lM(_h):XR(_h):_h.match(Qm)||[]}var eF=A0(function(_h,Qm){try{return CT(_h,_t,Qm)}catch(a_){return QM(a_)?a_:new l0(a_)}}),uU=NI(function(_h,Qm){return YT(Qm,function(a_){a_=ST(a_),pR(_h,a_,U2(_h[a_],_h))}),_h});function lU(_h){var Qm=_h==null?0:_h.length,a_=ZE();return _h=Qm?v0(_h,function(b_){if(typeof b_[1]!="function")throw new NT(_s);return[a_(b_[0]),b_[1]]}):[],A0(function(b_){for(var N_=-1;++N_<Qm;){var H_=_h[N_];if(CT(H_[0],this,b_))return CT(H_[1],this,b_)}})}function p4(_h){return OY(fR(_h,e_))}function JS(_h){return function(){return _h}}function z1(_h,Qm){return _h==null||_h!==_h?Qm:_h}var tF=S$(),nF=S$(!0);function GT(_h){return _h}function K1(_h){return r$(typeof _h=="function"?_h:fR(_h,e_))}function f4(_h){return o$(fR(_h,e_))}function m4(_h,Qm){return WP(_h,fR(Qm,e_))}var rF=A0(function(_h,Qm){return function(a_){return VO(a_,_h,Qm)}}),J1=A0(function(_h,Qm){return function(a_){return VO(_h,a_,Qm)}});function TD(_h,Qm,a_){var b_=YS(Qm),N_=vM(Qm,b_);a_==null&&!(SS(Qm)&&(N_.length||!b_.length))&&(a_=Qm,Qm=_h,_h=this,N_=vM(Qm,YS(Qm)));var H_=!(SS(a_)&&"chain"in a_)||!!a_.chain,Z_=cI(_h);return YT(N_,function(_v){var nE=Qm[_v];_h[_v]=nE,Z_&&(_h.prototype[_v]=function(){var vE=this.__chain__;if(H_||vE){var yE=_h(this.__wrapped__),wE=yE.__actions__=LT(this.__actions__);return wE.push({func:nE,args:arguments,thisArg:_h}),yE.__chain__=vE,yE}return nE.apply(_h,dR([this.value()],arguments))})}),_h}function iF(){return HS._===this&&(HS._=kP),this}function dO(){}function oF(_h){return _h=b0(_h),A0(function(Qm){return nO(Qm,_h)})}var PR=o2(v0),sF=o2(nM),dU=o2(kN);function aL(_h){return jM(_h)?f1(ST(_h)):D1(_h)}function _4(_h){return function(Qm){return _h==null?_t:BO(_h,Qm)}}var g4=s2(),v4=s2(!0);function RD(){return[]}function cL(){return!1}function y4(){return{}}function aF(){return""}function E4(){return!0}function hU(_h,Qm){if(_h=b0(_h),_h<1||_h>B_)return[];var a_=rE,b_=nT(_h,rE);Qm=ZE(Qm),_h-=rE;for(var N_=v1(b_,Qm);++a_<_h;)Qm(a_);return N_}function cF(_h){return uE(_h)?v0(_h,ST):VT(_h)?[_h]:LT($1(Z0(_h)))}function ID(_h){var Qm=++NP;return Z0(_h)+Qm}var uL=kM(function(_h,Qm){return _h+Qm},0),b4=MM("ceil"),S4=kM(function(_h,Qm){return _h/Qm},1),w4=MM("floor");function T4(_h){return _h&&_h.length?_M(_h,GT,FP):_t}function R4(_h,Qm){return _h&&_h.length?_M(_h,ZE(Qm,2),FP):_t}function I4(_h){return xO(_h,GT)}function C4(_h,Qm){return xO(_h,ZE(Qm,2))}function jI(_h){return _h&&_h.length?_M(_h,GT,KN):_t}function A4(_h,Qm){return _h&&_h.length?_M(_h,ZE(Qm,2),KN):_t}var O4=kM(function(_h,Qm){return _h*Qm},1),N4=MM("round"),iT=kM(function(_h,Qm){return _h-Qm},0);function uF(_h){return _h&&_h.length?g1(_h,GT):0}function lF(_h,Qm){return _h&&_h.length?g1(_h,ZE(Qm,2)):0}return F_.after=jV,F_.ary=P2,F_.assign=P3,F_.assignIn=j3,F_.assignInWith=ZM,F_.assignWith=e4,F_.at=t4,F_.before=j2,F_.bind=U2,F_.bindAll=uU,F_.bindKey=u3,F_.castArray=qV,F_.chain=n3,F_.chunk=g2,F_.compact=v2,F_.concat=$$,F_.cond=lU,F_.conforms=p4,F_.constant=JS,F_.countBy=B1,F_.create=z2,F_.curry=l3,F_.curryRight=$2,F_.debounce=KM,F_.defaults=DI,F_.defaultsDeep=K2,F_.defer=UV,F_.delay=$V,F_.difference=F$,F_.differenceBy=ZY,F_.differenceWith=_B,F_.drop=eV,F_.dropRight=qO,F_.dropRightWhile=Y$,F_.dropWhile=tV,F_.fill=y2,F_.filter=TV,F_.flatMap=WM,F_.flatMapDeep=RV,F_.flatMapDepth=s3,F_.flatten=H$,F_.flattenDeep=E2,F_.flattenDepth=G$,F_.flip=FV,F_.flow=tF,F_.flowRight=nF,F_.fromPairs=q$,F_.functions=Q2,F_.functionsIn=X2,F_.groupBy=a3,F_.initial=W$,F_.intersection=z$,F_.intersectionBy=nV,F_.intersectionWith=Y1,F_.invert=zS,F_.invertBy=S0,F_.invokeMap=c3,F_.iteratee=K1,F_.keyBy=CV,F_.keys=YS,F_.keysIn=mS,F_.map=LI,F_.mapKeys=PI,F_.mapValues=I0,F_.matches=f4,F_.matchesProperty=m4,F_.memoize=JM,F_.merge=r4,F_.mergeWith=U3,F_.method=rF,F_.methodOf=J1,F_.mixin=TD,F_.negate=iL,F_.nthArg=oF,F_.omit=i4,F_.omitBy=vD,F_.once=YV,F_.orderBy=V1,F_.over=PR,F_.overArgs=d3,F_.overEvery=sF,F_.overSome=dU,F_.partial=F2,F_.partialRight=h3,F_.partition=D2,F_.pick=o4,F_.pickBy=$3,F_.property=aL,F_.propertyOf=_4,F_.pull=oV,F_.pullAll=S2,F_.pullAllBy=sV,F_.pullAllWith=YM,F_.pullAt=J$,F_.range=g4,F_.rangeRight=v4,F_.rearg=p3,F_.reject=NV,F_.remove=w2,F_.rest=BV,F_.reverse=BM,F_.sampleSize=xV,F_.set=rT,F_.setWith=tS,F_.shuffle=LV,F_.slice=T2,F_.sortBy=PV,F_.sortedUniq=uV,F_.sortedUniqBy=lV,F_.split=u4,F_.spread=f3,F_.tail=dV,F_.take=I2,F_.takeRight=HM,F_.takeRightWhile=hV,F_.takeWhile=pV,F_.tap=sI,F_.throttle=VV,F_.thru=rL,F_.toArray=W2,F_.toPairs=KS,F_.toPairsIn=yD,F_.toPath=cF,F_.toPlainObject=D3,F_.transform=F3,F_.unary=HV,F_.union=fV,F_.unionBy=Q$,F_.unionWith=mV,F_.uniq=_V,F_.uniqBy=X$,F_.uniqWith=C2,F_.unset=Y3,F_.unzip=A2,F_.unzipWith=Z$,F_.update=B3,F_.updateWith=V3,F_.values=DR,F_.valuesIn=H3,F_.without=e3,F_.words=wD,F_.wrap=GV,F_.xor=O2,F_.xorBy=gV,F_.xorWith=N2,F_.zip=vV,F_.zipObject=yV,F_.zipObjectDeep=GM,F_.zipWith=t3,F_.entries=KS,F_.entriesIn=yD,F_.extend=j3,F_.extendWith=ZM,TD(F_,F_),F_.add=uL,F_.attempt=eF,F_.camelCase=q3,F_.capitalize=tU,F_.ceil=b4,F_.clamp=G3,F_.clone=WV,F_.cloneDeep=KV,F_.cloneDeepWith=m3,F_.cloneWith=zV,F_.conformsTo=_3,F_.deburr=lO,F_.defaultTo=z1,F_.divide=S4,F_.endsWith=nU,F_.eq=aR,F_.escape=sL,F_.escapeRegExp=W3,F_.every=wV,F_.find=i3,F_.findIndex=B$,F_.findKey=q1,F_.findLast=o3,F_.findLastIndex=V$,F_.findLastKey=n4,F_.floor=w4,F_.forEach=L2,F_.forEachRight=M2,F_.forIn=tD,F_.forInRight=J2,F_.forOwn=sD,F_.forOwnRight=uD,F_.get=W1,F_.gt=g3,F_.gte=Y2,F_.has=_D,F_.hasIn=Z2,F_.head=b2,F_.identity=GT,F_.includes=IV,F_.indexOf=FM,F_.inRange=eU,F_.invoke=_j,F_.isArguments=uO,F_.isArray=uE,F_.isArrayBuffer=v3,F_.isArrayLike=DT,F_.isArrayLikeObject=LS,F_.isBoolean=y3,F_.isBuffer=MI,F_.isDate=E3,F_.isElement=b3,F_.isEmpty=S3,F_.isEqual=w3,F_.isEqualWith=B2,F_.isError=QM,F_.isFinite=T3,F_.isFunction=cI,F_.isInteger=V2,F_.isLength=H1,F_.isMap=H2,F_.isMatch=R3,F_.isMatchWith=I3,F_.isNaN=C3,F_.isNative=A3,F_.isNil=N3,F_.isNull=O3,F_.isNumber=G2,F_.isObject=SS,F_.isObjectLike=AS,F_.isPlainObject=G1,F_.isRegExp=XM,F_.isSafeInteger=k3,F_.isSet=q2,F_.isString=oL,F_.isSymbol=VT,F_.isTypedArray=WO,F_.isUndefined=x3,F_.isWeakMap=L3,F_.isWeakSet=JV,F_.join=K$,F_.kebabCase=s4,F_.last=gR,F_.lastIndexOf=rV,F_.lowerCase=a4,F_.lowerFirst=z3,F_.lt=QV,F_.lte=XV,F_.max=T4,F_.maxBy=R4,F_.mean=I4,F_.meanBy=C4,F_.min=jI,F_.minBy=A4,F_.stubArray=RD,F_.stubFalse=cL,F_.stubObject=y4,F_.stubString=aF,F_.stubTrue=E4,F_.multiply=O4,F_.nth=iV,F_.noConflict=iF,F_.noop=dO,F_.now=zM,F_.pad=K3,F_.padEnd=c4,F_.padStart=J3,F_.parseInt=p_,F_.random=uI,F_.reduce=AV,F_.reduceRight=OV,F_.repeat=rU,F_.replace=iU,F_.result=$j,F_.round=N4,F_.runInContext=eE,F_.sample=kV,F_.size=MV,F_.snakeCase=Q3,F_.some=DV,F_.sortedIndex=aV,F_.sortedIndexBy=VM,F_.sortedIndexOf=xI,F_.sortedLastIndex=cV,F_.sortedLastIndexBy=cO,F_.sortedLastIndexOf=R2,F_.startCase=oU,F_.startsWith=sU,F_.subtract=iT,F_.sum=uF,F_.sumBy=lF,F_.template=zO,F_.times=hU,F_.toFinite=vR,F_.toInteger=b0,F_.toLength=M3,F_.toLower=aU,F_.toNumber=HT,F_.toSafeInteger=ZV,F_.toString=Z0,F_.toUpper=ED,F_.trim=X3,F_.trimEnd=Z3,F_.trimStart=SD,F_.truncate=l4,F_.unescape=d4,F_.uniqueId=ID,F_.upperCase=h4,F_.upperFirst=cU,F_.each=L2,F_.eachRight=M2,F_.first=b2,TD(F_,function(){var _h={};return mR(F_,function(Qm,a_){q0.call(F_.prototype,a_)||(_h[a_]=Qm)}),_h}(),{chain:!1}),F_.VERSION=Vt,YT(["bind","bindKey","curry","curryRight","partial","partialRight"],function(_h){F_[_h].placeholder=F_}),YT(["drop","take"],function(_h,Qm){U0.prototype[_h]=function(a_){a_=a_===_t?1:qS(b0(a_),0);var b_=this.__filtered__&&!Qm?new U0(this):this.clone();return b_.__filtered__?b_.__takeCount__=nT(a_,b_.__takeCount__):b_.__views__.push({size:nT(a_,rE),type:_h+(b_.__dir__<0?"Right":"")}),b_},U0.prototype[_h+"Right"]=function(a_){return this.reverse()[_h](a_).reverse()}}),YT(["filter","map","takeWhile"],function(_h,Qm){var a_=Qm+1,b_=a_==I_||a_==Y_;U0.prototype[_h]=function(N_){var H_=this.clone();return H_.__iteratees__.push({iteratee:ZE(N_,3),type:a_}),H_.__filtered__=H_.__filtered__||b_,H_}}),YT(["head","last"],function(_h,Qm){var a_="take"+(Qm?"Right":"");U0.prototype[_h]=function(){return this[a_](1).value()[0]}}),YT(["initial","tail"],function(_h,Qm){var a_="drop"+(Qm?"":"Right");U0.prototype[_h]=function(){return this.__filtered__?new U0(this):this[a_](1)}}),U0.prototype.compact=function(){return this.filter(GT)},U0.prototype.find=function(_h){return this.filter(_h).head()},U0.prototype.findLast=function(_h){return this.reverse().find(_h)},U0.prototype.invokeMap=A0(function(_h,Qm){return typeof _h=="function"?new U0(this):this.map(function(a_){return VO(a_,_h,Qm)})}),U0.prototype.reject=function(_h){return this.filter(iL(ZE(_h)))},U0.prototype.slice=function(_h,Qm){_h=b0(_h);var a_=this;return a_.__filtered__&&(_h>0||Qm<0)?new U0(a_):(_h<0?a_=a_.takeRight(-_h):_h&&(a_=a_.drop(_h)),Qm!==_t&&(Qm=b0(Qm),a_=Qm<0?a_.dropRight(-Qm):a_.take(Qm-_h)),a_)},U0.prototype.takeRightWhile=function(_h){return this.reverse().takeWhile(_h).reverse()},U0.prototype.toArray=function(){return this.take(rE)},mR(U0.prototype,function(_h,Qm){var a_=/^(?:filter|find|map|reject)|While$/.test(Qm),b_=/^(?:head|last)$/.test(Qm),N_=F_[b_?"take"+(Qm=="last"?"Right":""):Qm],H_=b_||/^find/.test(Qm);N_&&(F_.prototype[Qm]=function(){var Z_=this.__wrapped__,_v=b_?[1]:arguments,nE=Z_ instanceof U0,vE=_v[0],yE=nE||uE(Z_),wE=function(k0){var B0=N_.apply(F_,dR([k0],_v));return b_&&DE?B0[0]:B0};yE&&a_&&typeof vE=="function"&&vE.length!=1&&(nE=yE=!1);var DE=this.__chain__,qE=!!this.__actions__.length,_b=H_&&!DE,e0=nE&&!qE;if(!H_&&yE){Z_=e0?Z_:new U0(this);var t0=_h.apply(Z_,_v);return t0.__actions__.push({func:rL,args:[wE],thisArg:_t}),new hR(t0,DE)}return _b&&e0?_h.apply(this,_v):(t0=this.thru(wE),_b?b_?t0.value()[0]:t0.value():t0)})}),YT(["pop","push","shift","sort","splice","unshift"],function(_h){var Qm=T1[_h],a_=/^(?:push|sort|unshift)$/.test(_h)?"tap":"thru",b_=/^(?:pop|shift)$/.test(_h);F_.prototype[_h]=function(){var N_=arguments;if(b_&&!this.__chain__){var H_=this.value();return Qm.apply(uE(H_)?H_:[],N_)}return this[a_](function(Z_){return Qm.apply(uE(Z_)?Z_:[],N_)})}}),mR(U0.prototype,function(_h,Qm){var a_=F_[Qm];if(a_){var b_=a_.name+"";q0.call(N1,b_)||(N1[b_]=[]),N1[b_].push({name:Qm,func:a_})}}),N1[NM(_t,l_).name]=[{name:"wrapper",func:_t}],U0.prototype.clone=cY,U0.prototype.reverse=x1,U0.prototype.value=uY,F_.prototype.at=EV,F_.prototype.chain=bV,F_.prototype.commit=SV,F_.prototype.next=aI,F_.prototype.plant=r3,F_.prototype.reverse=k2,F_.prototype.toJSON=F_.prototype.valueOf=F_.prototype.value=x2,F_.prototype.first=F_.prototype.head,lE&&(F_.prototype[lE]=qM),F_},KI=AP();wI?((wI.exports=KI)._=KI,NO._=KI):HS._=KI}).call(commonjsGlobal$1)})(lodash,lodashExports);const DocAppointmentsList=({appointments:$})=>{const[_e,_t]=useCreateSessionMutation(),Vt=new Date,Wt=Vt.getFullYear(),_i=String(Vt.getMonth()+1).padStart(2,"0"),_s=String(Vt.getDate()).padStart(2,"0"),_c=`${Wt}-${_i}-${_s}`,_l=useNavigate(),_d=lodashExports.groupBy($,"date"),_m=Object.keys(_d).sort();function e_(t_,i_){let c_={receiverId:t_,appointmentId:i_};_t.isLoading||_e(c_).then(()=>{_l("/doctor/startSession",{state:{appointmentId:i_,receiverId:t_}})})}return jsxs("div",{className:"bg-gray-100 p-4 rounded-lg w-full overflow-y-auto max-h-screen",children:[jsx("h2",{className:"text-lg font-semibold mb-4",children:"Appointments"}),_m==null?void 0:_m.map(t_=>jsxs("div",{children:[jsx("h2",{className:"text-lg text-center bg-blue-900 text-white font-bold mb-4 rounded-lg",children:t_===_c?"Today":t_}),_d[t_].map(i_=>jsxs("div",{children:[i_.active?jsx("div",{className:"bg-green-500 rounded-t-md",children:jsx("p",{className:"font-semibold text-white text-center",children:"Active Session"})}):"",jsxs("div",{className:"bg-white w-full rounded-lg shadow p-4 mb-4 flex justify-between items-center",children:[jsx("div",{className:"w-[7%]",children:jsx("img",{className:"rounded-xl",src:"https://w7.pngwing.com/pngs/81/570/png-transparent-profile-logo-computer-icons-user-user-blue-heroes-logo-thumbnail.png",alt:""})}),jsxs("div",{className:"w-[40%]",children:[jsxs("h3",{className:"text-xl font-semibold mb-2",children:["Patient Name: ",jsx("b",{className:"uppercase text-blue-800",children:i_.patientName})]}),jsxs("p",{className:"text-gray-600",children:["Appointment ID: ",i_._id]}),jsx("p",{className:"text-yellow-600 font-semibold",children:"Session Duration: 1 Hour"})]}),jsxs("div",{className:"w-[30%]",children:[jsxs("h5",{className:"text-red-600 font-semibold text-xl ",children:["Time: ",i_.time]}),jsxs("p",{className:"text-gray-600",children:["Date: ",i_.date]})]}),jsx("div",{className:"w-[15%]",children:i_.active?jsx("button",{type:"button",onClick:()=>e_(i_.userId,i_._id),className:"bg-orange-500 rounded-md p-1 font-semibold text-white",children:"Join Session"}):jsx("button",{type:"button",onClick:()=>e_(i_.userId,i_._id),className:"bg-green-500 rounded-md p-1 font-semibold text-white",children:"Start Session"})})]},i_._id)]}))]}))]})};function Appointments$1(){const{data:$}=useFetchDoctorAppointmentsQuery(),_e=$==null?void 0:$.appointments.filter(_t=>_t.completed===!1);return jsx("div",{children:jsx(DocNavbar,{children:jsx("div",{className:"flex",children:jsx("div",{className:"flex w-full justify-center m-5",children:jsx(DocAppointmentsList,{appointments:_e})})})})})}var lib$1={},format$1={},date={};Object.defineProperty(date,"__esModule",{value:!0});var SEC_ARRAY=[60,60,24,7,365/7/12,12];function toDate($){return $ instanceof Date?+$:!isNaN($)||/^\d+$/.test($)?+new Date(parseInt($)):($=($||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),+new Date($))}date.toDate=toDate;function formatDiff($,_e){var _t=$<0?1:0;$=Math.abs($);for(var Vt=$,Wt=0;$>=SEC_ARRAY[Wt]&&Wt<SEC_ARRAY.length;Wt++)$/=SEC_ARRAY[Wt];return $=~~$,Wt*=2,$>(Wt===0?9:1)&&(Wt+=1),_e($,Wt,Vt)[_t].replace("%s",$)}date.formatDiff=formatDiff;function diffSec($,_e){return _e=_e?toDate(_e):+new Date,(_e-toDate($))/1e3}date.diffSec=diffSec;function nextInterval($){for(var _e=1,_t=0,Vt=Math.abs($);$>=SEC_ARRAY[_t]&&_t<SEC_ARRAY.length;_t++)$/=SEC_ARRAY[_t],_e*=SEC_ARRAY[_t];return Vt=Vt%_e,Vt=Vt?_e-Vt:_e,~~Vt}date.nextInterval=nextInterval;var locales={},en_US={};Object.defineProperty(en_US,"__esModule",{value:!0});var EN_US=["second","minute","hour","day","week","month","year"];function default_1$1($,_e){if(_e===0)return["just now","right now"];var _t=EN_US[~~(_e/2)];return $>1&&(_t+="s"),[$+" "+_t+" ago","in "+$+" "+_t]}en_US.default=default_1$1;var zh_CN={};Object.defineProperty(zh_CN,"__esModule",{value:!0});var ZH_CN=["","","","","","",""];function default_1($,_e){if(_e===0)return["",""];var _t=ZH_CN[~~(_e/2)];return[$+" "+_t+"",$+" "+_t+""]}zh_CN.default=default_1;var __importDefault=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(locales,"__esModule",{value:!0});var en_US_1=__importDefault(en_US),zh_CN_1=__importDefault(zh_CN),Locales={en_US:en_US_1.default,zh_CN:zh_CN_1.default};locales.register=function($,_e){Locales[$]=_e};locales.getLocale=function($){return Locales[$]||en_US_1.default};Object.defineProperty(format$1,"__esModule",{value:!0});var date_1$1=date,locales_1$2=locales;format$1.format=function($,_e,_t){var Vt=date_1$1.diffSec($,_t&&_t.relativeDate);return date_1$1.formatDiff(Vt,locales_1$2.getLocale(_e))};var realtime={},dom={};Object.defineProperty(dom,"__esModule",{value:!0});var ATTR_TIMEAGO_TID="timeago-tid",ATTR_DATETIME="datetime";function getDateAttribute($){return $.getAttribute(ATTR_DATETIME)}dom.getDateAttribute=getDateAttribute;function setTimerId($,_e){$.setAttribute(ATTR_TIMEAGO_TID,_e)}dom.setTimerId=setTimerId;function getTimerId($){return~~$.getAttribute(ATTR_TIMEAGO_TID)}dom.getTimerId=getTimerId;Object.defineProperty(realtime,"__esModule",{value:!0});var dom_1=dom,date_1=date,locales_1$1=locales,TIMER_POOL={},clear=function($){clearTimeout($),delete TIMER_POOL[$]};function run($,_e,_t,Vt){clear(dom_1.getTimerId($));var Wt=Vt.relativeDate,_i=Vt.minInterval,_s=date_1.diffSec(_e,Wt);$.innerText=date_1.formatDiff(_s,_t);var _c=setTimeout(function(){run($,_e,_t,Vt)},Math.max(date_1.nextInterval(_s),_i||1)*1e3,2147483647);TIMER_POOL[_c]=0,dom_1.setTimerId($,_c)}function cancel($){$?clear(dom_1.getTimerId($)):Object.keys(TIMER_POOL).forEach(clear)}realtime.cancel=cancel;function render($,_e,_t){var Vt="length"in $?$:[$];return Vt.forEach(function(Wt){run(Wt,dom_1.getDateAttribute(Wt),locales_1$1.getLocale(_e),_t||{})}),Vt}realtime.render=render;Object.defineProperty(lib$1,"__esModule",{value:!0});var format_1=format$1,format=lib$1.format=format_1.format,realtime_1=realtime;lib$1.render=realtime_1.render;lib$1.cancel=realtime_1.cancel;var locales_1=locales;lib$1.register=locales_1.register;function Message({message:$,own:_e}){return jsx(Fragment,{children:_e?jsxs("div",{className:"col-start-6 col-end-13 p-3 rounded-lg",children:[jsxs("div",{className:"flex items-center justify-start flex-row-reverse",children:[jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-indigo-500 flex-shrink-0",children:"A"}),jsx("div",{className:"relative mr-3 text-sm bg-red-10 py-2 px-4 shadow rounded-xl",children:$.text})]}),jsx("div",{className:"float-right",children:format($.createdAt)})]}):jsxs("div",{className:"col-start-1 col-end-8 p-3 rounded-lg",children:[jsxs("div",{className:"flex flex-row items-center",children:[jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-indigo-500 flex-shrink-0",children:"A"}),jsx("div",{className:"relative ml-3 text-sm bg-white py-2 px-4 shadow rounded-xl",children:$.text})]}),format($.createdAt)]})})}function Chat({currentChat:$,socket:_e}){const{data:_t,isSuccess:Vt,refetch:Wt}=useFetchMessagesQuery($==null?void 0:$._id),_i=useSelector(i_=>i_.user.user),[_s,_c]=reactExports.useState(""),[_l,_d]=useSendMessageMutation(),_m=reactExports.useRef();reactExports.useEffect(()=>{_e.current.on("getMessage",()=>{Wt()})},[]);function e_(){var i_;return $?(i_=$.members)==null?void 0:i_.filter(c_=>c_!==(_i==null?void 0:_i._id))[0]:!1}async function t_(){const i_={Sender:_i._id,text:_s,conversationId:$};_e.current.emit("sendMessage",{receiverid:e_()}),_d.isLoading||await _l(i_),_c("")}if(reactExports.useEffect(()=>{var i_;(i_=_m.current)==null||i_.scrollIntoView({behavior:"smooth"})},[_t]),Vt)return jsx("div",{className:"flex flex-col flex-auto bg-blue-10 h-full p-6 w-full",children:jsxs("div",{className:"flex flex-col flex-auto flex-shrink-0 rounded-2xl bg-blue-100 h-full p-4",children:[jsx("div",{className:"flex flex-col h-full overflow-x-auto mb-4",children:jsx("div",{className:"flex flex-col h-full",children:_t==null?void 0:_t.messages.map(i_=>jsx("div",{className:"grid grid-cols-12 gap-y-2",ref:_m,children:jsx(Message,{message:i_,own:i_.Sender===_i._id})}))})}),jsxs("div",{className:"flex flex-row items-center h-16 rounded-xl bg-white w-full px-4",children:[jsx("div",{children:jsx("button",{type:"button",className:"flex items-center justify-center text-gray-400 hover:text-gray-600",children:jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})})}),jsx("div",{className:"flex-grow ml-4",children:jsxs("div",{className:"relative w-full",children:[$!=null&&$.active?jsx("input",{type:"text",onChange:i_=>_c(i_.target.value),value:_s,onKeyDown:i_=>{i_.key==="Enter"&&t_()},className:"flex w-full border rounded-xl focus:outline-none focus:border-indigo-300 pl-4 h-10"}):jsx("input",{type:"text",onChange:i_=>_c(i_.target.value),disabled:!0,value:"The session has ended",className:"flex w-full border rounded-xl focus:outline-none bg-gray-100 text-center text-gray-300 focus:border-indigo-300 pl-4 h-10"}),jsx("button",{type:"button",className:"absolute flex items-center justify-center h-full w-12 right-0 top-0 text-gray-400 hover:text-gray-600",children:jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),jsx("div",{className:"ml-4",children:jsxs("button",{type:"button",className:"flex items-center justify-center bg-indigo-500 hover:bg-indigo-600 rounded-xl text-white px-4 py-1 flex-shrink-0",onClick:t_,children:[jsx("span",{children:"Send"}),jsx("span",{className:"ml-2",children:jsx("svg",{className:"w-4 h-4 transform rotate-45 -mt-px",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]})]})})}function SessionLeft({setcurrentChat:$,convos:_e,active:_t}){var t_,i_,c_;const Vt=useSelector(h_=>h_.user.user),Wt=_t==null?void 0:_t.members.find(h_=>h_!==(Vt==null?void 0:Vt._id)),_i=useFetchSecondUserQuery(Wt),_s=(t_=_i==null?void 0:_i.data)==null?void 0:t_.data,[_c,_l]=reactExports.useState(Wt);_e.filter(h_=>h_.active===!1).length;const _m=useFetchSecondUserQuery(_c),e_=(i_=_m==null?void 0:_m.data)==null?void 0:i_.data;return reactExports.useEffect(()=>{$(_t)}),jsxs("div",{className:"flex flex-col py-8 pl-6  w-64 bg-blue-100 md:pr-10 flex-shrink-0",children:[jsx("div",{className:"flex flex-row items-center justify-center h-12 w-full",children:jsx("div",{className:"w-32 mr-2 bg-blue-200 rounded-lg mb-4",children:jsx("img",{src:"/logo.png",alt:"logo"})})}),e_?jsxs("div",{className:"flex flex-col items-center mt-4 w-full py-6 px-4 rounded-lg",children:[jsx("div",{className:"h-20 w-20 rounded-full border overflow-hidden",children:jsx("img",{src:e_.additionalDetails?e_.additionalDetails.profileImage:"https://www.pngall.com/wp-content/uploads/5/User-Profile-PNG-High-Quality-Image.png",alt:"Avatar",className:"h-full w-full"})}),jsx("div",{className:"text-lg font-semibold mt-2",children:e_==null?void 0:e_.name})]}):"",jsxs("div",{className:"flex flex-col mt-8",children:[jsx("div",{className:"flex flex-row items-center justify-between text-xs",children:jsx("span",{className:"font-bold",children:"Active Session"})}),jsx("div",{className:"flex flex-col space-y-1 mt-4 -mx-2 h-auto overflow-y-auto",children:jsxs("button",{type:"button",className:"flex flex-row items-center hover:bg-gray-100 rounded-xl p-2",onClick:()=>{$(_t),_l(Wt)},children:[jsx("div",{className:"flex items-center justify-center h-8 w-8 bg-blue-400 rounded-full",children:jsx("img",{src:_s!=null&&_s.additionalDetails?(c_=_s==null?void 0:_s.additionalDetails)==null?void 0:c_.profileImage:"https://www.pngall.com/wp-content/uploads/5/User-Profile-PNG-High-Quality-Image.png",className:"rounded-full",alt:""})}),jsx("div",{className:"ml-2 text-sm font-semibold",children:_s==null?void 0:_s.name})]})})]})]})}function ChatLayout({children:$}){return jsx("div",{className:"flex h-screen antialiased text-gray-800",children:jsx("div",{className:"flex flex-row h-full w-full overflow-x-hidden",children:$})})}var js={},Carousel$1={},lib={},reactSwipe={},propTypesExports={},propTypes={get exports(){return propTypesExports},set exports($){propTypesExports=$}},ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var $="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=$,ReactPropTypesSecret_1}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var $=requireReactPropTypesSecret();function _e(){}function _t(){}return _t.resetWarningCache=_e,factoryWithThrowingShims=function(){function Vt(_s,_c,_l,_d,_m,e_){if(e_!==$){var t_=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw t_.name="Invariant Violation",t_}}Vt.isRequired=Vt;function Wt(){return Vt}var _i={array:Vt,bigint:Vt,bool:Vt,func:Vt,number:Vt,object:Vt,string:Vt,symbol:Vt,any:Vt,arrayOf:Wt,element:Vt,elementType:Vt,instanceOf:Wt,node:Vt,objectOf:Wt,oneOf:Wt,oneOfType:Wt,shape:Wt,exact:Wt,checkPropTypes:_t,resetWarningCache:_e};return _i.PropTypes=_i,_i},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){return hasRequiredPropTypes||(hasRequiredPropTypes=1,propTypes.exports=requireFactoryWithThrowingShims()()),propTypesExports}var hasRequiredReactSwipe;function requireReactSwipe(){return hasRequiredReactSwipe||(hasRequiredReactSwipe=1,function($){(function(_e,_t){_t($,reactExports,requirePropTypes())})(commonjsGlobal$1,function(_e,_t,Vt){Object.defineProperty(_e,"__esModule",{value:!0}),_e.setHasSupportToCaptureOption=c_;var Wt=_s(_t),_i=_s(Vt);function _s(d_){return d_&&d_.__esModule?d_:{default:d_}}var _c=Object.assign||function(d_){for(var f_=1;f_<arguments.length;f_++){var S_=arguments[f_];for(var T_ in S_)Object.prototype.hasOwnProperty.call(S_,T_)&&(d_[T_]=S_[T_])}return d_};function _l(d_,f_){var S_={};for(var T_ in d_)f_.indexOf(T_)>=0||Object.prototype.hasOwnProperty.call(d_,T_)&&(S_[T_]=d_[T_]);return S_}function _d(d_,f_){if(!(d_ instanceof f_))throw new TypeError("Cannot call a class as a function")}var _m=function(){function d_(f_,S_){for(var T_=0;T_<S_.length;T_++){var R_=S_[T_];R_.enumerable=R_.enumerable||!1,R_.configurable=!0,"value"in R_&&(R_.writable=!0),Object.defineProperty(f_,R_.key,R_)}}return function(f_,S_,T_){return S_&&d_(f_.prototype,S_),T_&&d_(f_,T_),f_}}();function e_(d_,f_){if(!d_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f_&&(typeof f_=="object"||typeof f_=="function")?f_:d_}function t_(d_,f_){if(typeof f_!="function"&&f_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f_);d_.prototype=Object.create(f_&&f_.prototype,{constructor:{value:d_,enumerable:!1,writable:!0,configurable:!0}}),f_&&(Object.setPrototypeOf?Object.setPrototypeOf(d_,f_):d_.__proto__=f_)}var i_=!1;function c_(d_){i_=d_}try{addEventListener("test",null,Object.defineProperty({},"capture",{get:function(){c_(!0)}}))}catch{}function h_(){var d_=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{capture:!0};return i_?d_:d_.capture}function y_(d_){if("touches"in d_){var f_=d_.touches[0],S_=f_.pageX,T_=f_.pageY;return{x:S_,y:T_}}var R_=d_.screenX,C_=d_.screenY;return{x:R_,y:C_}}var l_=function(d_){t_(f_,d_);function f_(){var S_;_d(this,f_);for(var T_=arguments.length,R_=Array(T_),C_=0;C_<T_;C_++)R_[C_]=arguments[C_];var j_=e_(this,(S_=f_.__proto__||Object.getPrototypeOf(f_)).call.apply(S_,[this].concat(R_)));return j_._handleSwipeStart=j_._handleSwipeStart.bind(j_),j_._handleSwipeMove=j_._handleSwipeMove.bind(j_),j_._handleSwipeEnd=j_._handleSwipeEnd.bind(j_),j_._onMouseDown=j_._onMouseDown.bind(j_),j_._onMouseMove=j_._onMouseMove.bind(j_),j_._onMouseUp=j_._onMouseUp.bind(j_),j_._setSwiperRef=j_._setSwiperRef.bind(j_),j_}return _m(f_,[{key:"componentDidMount",value:function(){this.swiper&&this.swiper.addEventListener("touchmove",this._handleSwipeMove,h_({capture:!0,passive:!1}))}},{key:"componentWillUnmount",value:function(){this.swiper&&this.swiper.removeEventListener("touchmove",this._handleSwipeMove,h_({capture:!0,passive:!1}))}},{key:"_onMouseDown",value:function(T_){this.props.allowMouseEvents&&(this.mouseDown=!0,document.addEventListener("mouseup",this._onMouseUp),document.addEventListener("mousemove",this._onMouseMove),this._handleSwipeStart(T_))}},{key:"_onMouseMove",value:function(T_){this.mouseDown&&this._handleSwipeMove(T_)}},{key:"_onMouseUp",value:function(T_){this.mouseDown=!1,document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("mousemove",this._onMouseMove),this._handleSwipeEnd(T_)}},{key:"_handleSwipeStart",value:function(T_){var R_=y_(T_),C_=R_.x,j_=R_.y;this.moveStart={x:C_,y:j_},this.props.onSwipeStart(T_)}},{key:"_handleSwipeMove",value:function(T_){if(this.moveStart){var R_=y_(T_),C_=R_.x,j_=R_.y,W_=C_-this.moveStart.x,A_=j_-this.moveStart.y;this.moving=!0;var $_=this.props.onSwipeMove({x:W_,y:A_},T_);$_&&T_.cancelable&&T_.preventDefault(),this.movePosition={deltaX:W_,deltaY:A_}}}},{key:"_handleSwipeEnd",value:function(T_){this.props.onSwipeEnd(T_);var R_=this.props.tolerance;this.moving&&this.movePosition&&(this.movePosition.deltaX<-R_?this.props.onSwipeLeft(1,T_):this.movePosition.deltaX>R_&&this.props.onSwipeRight(1,T_),this.movePosition.deltaY<-R_?this.props.onSwipeUp(1,T_):this.movePosition.deltaY>R_&&this.props.onSwipeDown(1,T_)),this.moveStart=null,this.moving=!1,this.movePosition=null}},{key:"_setSwiperRef",value:function(T_){this.swiper=T_,this.props.innerRef(T_)}},{key:"render",value:function(){var T_=this.props;T_.tagName;var R_=T_.className,C_=T_.style,j_=T_.children;T_.allowMouseEvents,T_.onSwipeUp,T_.onSwipeDown,T_.onSwipeLeft,T_.onSwipeRight,T_.onSwipeStart,T_.onSwipeMove,T_.onSwipeEnd,T_.innerRef,T_.tolerance;var W_=_l(T_,["tagName","className","style","children","allowMouseEvents","onSwipeUp","onSwipeDown","onSwipeLeft","onSwipeRight","onSwipeStart","onSwipeMove","onSwipeEnd","innerRef","tolerance"]);return Wt.default.createElement(this.props.tagName,_c({ref:this._setSwiperRef,onMouseDown:this._onMouseDown,onTouchStart:this._handleSwipeStart,onTouchEnd:this._handleSwipeEnd,className:R_,style:C_},W_),j_)}}]),f_}(_t.Component);l_.displayName="ReactSwipe",l_.propTypes={tagName:_i.default.string,className:_i.default.string,style:_i.default.object,children:_i.default.node,allowMouseEvents:_i.default.bool,onSwipeUp:_i.default.func,onSwipeDown:_i.default.func,onSwipeLeft:_i.default.func,onSwipeRight:_i.default.func,onSwipeStart:_i.default.func,onSwipeMove:_i.default.func,onSwipeEnd:_i.default.func,innerRef:_i.default.func,tolerance:_i.default.number.isRequired},l_.defaultProps={tagName:"div",allowMouseEvents:!1,onSwipeUp:function(){},onSwipeDown:function(){},onSwipeLeft:function(){},onSwipeRight:function(){},onSwipeStart:function(){},onSwipeMove:function(){},onSwipeEnd:function(){},innerRef:function(){},tolerance:0},_e.default=l_})}(reactSwipe)),reactSwipe}(function($){(function(_e,_t){_t($,requireReactSwipe())})(commonjsGlobal$1,function(_e,_t){Object.defineProperty(_e,"__esModule",{value:!0});var Vt=Wt(_t);function Wt(_i){return _i&&_i.__esModule?_i:{default:_i}}_e.default=Vt.default})})(lib);var cssClasses={},classnamesExports={},classnames={get exports(){return classnamesExports},set exports($){classnamesExports=$}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function($){(function(){var _e={}.hasOwnProperty;function _t(){for(var Vt=[],Wt=0;Wt<arguments.length;Wt++){var _i=arguments[Wt];if(_i){var _s=typeof _i;if(_s==="string"||_s==="number")Vt.push(_i);else if(Array.isArray(_i)){if(_i.length){var _c=_t.apply(null,_i);_c&&Vt.push(_c)}}else if(_s==="object"){if(_i.toString!==Object.prototype.toString&&!_i.toString.toString().includes("[native code]")){Vt.push(_i.toString());continue}for(var _l in _i)_e.call(_i,_l)&&_i[_l]&&Vt.push(_l)}}}return Vt.join(" ")}$.exports?(_t.default=_t,$.exports=_t):window.classNames=_t})()})(classnames);Object.defineProperty(cssClasses,"__esModule",{value:!0});cssClasses.default=void 0;var _classnames=_interopRequireDefault$4(classnamesExports);function _interopRequireDefault$4($){return $&&$.__esModule?$:{default:$}}function _defineProperty$3($,_e,_t){return _e in $?Object.defineProperty($,_e,{value:_t,enumerable:!0,configurable:!0,writable:!0}):$[_e]=_t,$}var _default$3={ROOT:function(_e){return(0,_classnames.default)(_defineProperty$3({"carousel-root":!0},_e||"",!!_e))},CAROUSEL:function(_e){return(0,_classnames.default)({carousel:!0,"carousel-slider":_e})},WRAPPER:function(_e,_t){return(0,_classnames.default)({"thumbs-wrapper":!_e,"slider-wrapper":_e,"axis-horizontal":_t==="horizontal","axis-vertical":_t!=="horizontal"})},SLIDER:function(_e,_t){return(0,_classnames.default)({thumbs:!_e,slider:_e,animated:!_t})},ITEM:function(_e,_t,Vt){return(0,_classnames.default)({thumb:!_e,slide:_e,selected:_t,previous:Vt})},ARROW_PREV:function(_e){return(0,_classnames.default)({"control-arrow control-prev":!0,"control-disabled":_e})},ARROW_NEXT:function(_e){return(0,_classnames.default)({"control-arrow control-next":!0,"control-disabled":_e})},DOT:function(_e){return(0,_classnames.default)({dot:!0,selected:_e})}};cssClasses.default=_default$3;var Thumbs$1={},dimensions={};Object.defineProperty(dimensions,"__esModule",{value:!0});dimensions.outerWidth=void 0;var outerWidth=function(_e){var _t=_e.offsetWidth,Vt=getComputedStyle(_e);return _t+=parseInt(Vt.marginLeft)+parseInt(Vt.marginRight),_t};dimensions.outerWidth=outerWidth;var CSSTranslate={};Object.defineProperty(CSSTranslate,"__esModule",{value:!0});CSSTranslate.default=void 0;var _default$2=function(_e,_t,Vt){var Wt=_e===0?_e:_e+_t,_i=Vt==="horizontal"?[Wt,0,0]:[0,Wt,0],_s="translate3d",_c="("+_i.join(",")+")";return _s+_c};CSSTranslate.default=_default$2;var window$1={};Object.defineProperty(window$1,"__esModule",{value:!0});window$1.default=void 0;var _default$1=function(){return window};window$1.default=_default$1;Object.defineProperty(Thumbs$1,"__esModule",{value:!0});Thumbs$1.default=void 0;var _react$3=_interopRequireWildcard$1(reactExports),_cssClasses$1=_interopRequireDefault$3(cssClasses),_dimensions=dimensions,_CSSTranslate$2=_interopRequireDefault$3(CSSTranslate),_reactEasySwipe$1=_interopRequireDefault$3(lib),_window$1=_interopRequireDefault$3(window$1);function _interopRequireDefault$3($){return $&&$.__esModule?$:{default:$}}function _getRequireWildcardCache$1(){if(typeof WeakMap!="function")return null;var $=new WeakMap;return _getRequireWildcardCache$1=function(){return $},$}function _interopRequireWildcard$1($){if($&&$.__esModule)return $;if($===null||_typeof$1($)!=="object"&&typeof $!="function")return{default:$};var _e=_getRequireWildcardCache$1();if(_e&&_e.has($))return _e.get($);var _t={},Vt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Wt in $)if(Object.prototype.hasOwnProperty.call($,Wt)){var _i=Vt?Object.getOwnPropertyDescriptor($,Wt):null;_i&&(_i.get||_i.set)?Object.defineProperty(_t,Wt,_i):_t[Wt]=$[Wt]}return _t.default=$,_e&&_e.set($,_t),_t}function _typeof$1($){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(_t){return typeof _t}:_typeof$1=function(_t){return _t&&typeof Symbol=="function"&&_t.constructor===Symbol&&_t!==Symbol.prototype?"symbol":typeof _t},_typeof$1($)}function _extends$2(){return _extends$2=Object.assign||function($){for(var _e=1;_e<arguments.length;_e++){var _t=arguments[_e];for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&($[Vt]=_t[Vt])}return $},_extends$2.apply(this,arguments)}function _classCallCheck$1($,_e){if(!($ instanceof _e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1($,_e){for(var _t=0;_t<_e.length;_t++){var Vt=_e[_t];Vt.enumerable=Vt.enumerable||!1,Vt.configurable=!0,"value"in Vt&&(Vt.writable=!0),Object.defineProperty($,Vt.key,Vt)}}function _createClass$1($,_e,_t){return _e&&_defineProperties$1($.prototype,_e),_t&&_defineProperties$1($,_t),$}function _inherits$1($,_e){if(typeof _e!="function"&&_e!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(_e&&_e.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),_e&&_setPrototypeOf$1($,_e)}function _setPrototypeOf$1($,_e){return _setPrototypeOf$1=Object.setPrototypeOf||function(Vt,Wt){return Vt.__proto__=Wt,Vt},_setPrototypeOf$1($,_e)}function _createSuper$1($){var _e=_isNativeReflectConstruct$1();return function(){var Vt=_getPrototypeOf$1($),Wt;if(_e){var _i=_getPrototypeOf$1(this).constructor;Wt=Reflect.construct(Vt,arguments,_i)}else Wt=Vt.apply(this,arguments);return _possibleConstructorReturn$1(this,Wt)}}function _possibleConstructorReturn$1($,_e){return _e&&(_typeof$1(_e)==="object"||typeof _e=="function")?_e:_assertThisInitialized$1($)}function _assertThisInitialized$1($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function _isNativeReflectConstruct$1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$1($){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf:function(_t){return _t.__proto__||Object.getPrototypeOf(_t)},_getPrototypeOf$1($)}function _defineProperty$2($,_e,_t){return _e in $?Object.defineProperty($,_e,{value:_t,enumerable:!0,configurable:!0,writable:!0}):$[_e]=_t,$}var isKeyboardEvent$1=function(_e){return _e.hasOwnProperty("key")},Thumbs=function($){_inherits$1(_t,$);var _e=_createSuper$1(_t);function _t(Vt){var Wt;return _classCallCheck$1(this,_t),Wt=_e.call(this,Vt),_defineProperty$2(_assertThisInitialized$1(Wt),"itemsWrapperRef",void 0),_defineProperty$2(_assertThisInitialized$1(Wt),"itemsListRef",void 0),_defineProperty$2(_assertThisInitialized$1(Wt),"thumbsRef",void 0),_defineProperty$2(_assertThisInitialized$1(Wt),"setItemsWrapperRef",function(_i){Wt.itemsWrapperRef=_i}),_defineProperty$2(_assertThisInitialized$1(Wt),"setItemsListRef",function(_i){Wt.itemsListRef=_i}),_defineProperty$2(_assertThisInitialized$1(Wt),"setThumbsRef",function(_i,_s){Wt.thumbsRef||(Wt.thumbsRef=[]),Wt.thumbsRef[_s]=_i}),_defineProperty$2(_assertThisInitialized$1(Wt),"updateSizes",function(){if(!(!Wt.props.children||!Wt.itemsWrapperRef||!Wt.thumbsRef)){var _i=_react$3.Children.count(Wt.props.children),_s=Wt.itemsWrapperRef.clientWidth,_c=Wt.props.thumbWidth?Wt.props.thumbWidth:(0,_dimensions.outerWidth)(Wt.thumbsRef[0]),_l=Math.floor(_s/_c),_d=_l<_i,_m=_d?_i-_l:0;Wt.setState(function(e_,t_){return{itemSize:_c,visibleItems:_l,firstItem:_d?Wt.getFirstItem(t_.selectedItem):0,lastPosition:_m,showArrows:_d}})}}),_defineProperty$2(_assertThisInitialized$1(Wt),"handleClickItem",function(_i,_s,_c){if(!isKeyboardEvent$1(_c)||_c.key==="Enter"){var _l=Wt.props.onSelectItem;typeof _l=="function"&&_l(_i,_s)}}),_defineProperty$2(_assertThisInitialized$1(Wt),"onSwipeStart",function(){Wt.setState({swiping:!0})}),_defineProperty$2(_assertThisInitialized$1(Wt),"onSwipeEnd",function(){Wt.setState({swiping:!1})}),_defineProperty$2(_assertThisInitialized$1(Wt),"onSwipeMove",function(_i){var _s=_i.x;if(!Wt.state.itemSize||!Wt.itemsWrapperRef||!Wt.state.visibleItems)return!1;var _c=0,_l=_react$3.Children.count(Wt.props.children),_d=-(Wt.state.firstItem*100)/Wt.state.visibleItems,_m=Math.max(_l-Wt.state.visibleItems,0),e_=-_m*100/Wt.state.visibleItems;_d===_c&&_s>0&&(_s=0),_d===e_&&_s<0&&(_s=0);var t_=Wt.itemsWrapperRef.clientWidth,i_=_d+100/(t_/_s);return Wt.itemsListRef&&["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach(function(c_){Wt.itemsListRef.style[c_]=(0,_CSSTranslate$2.default)(i_,"%",Wt.props.axis)}),!0}),_defineProperty$2(_assertThisInitialized$1(Wt),"slideRight",function(_i){Wt.moveTo(Wt.state.firstItem-(typeof _i=="number"?_i:1))}),_defineProperty$2(_assertThisInitialized$1(Wt),"slideLeft",function(_i){Wt.moveTo(Wt.state.firstItem+(typeof _i=="number"?_i:1))}),_defineProperty$2(_assertThisInitialized$1(Wt),"moveTo",function(_i){_i=_i<0?0:_i,_i=_i>=Wt.state.lastPosition?Wt.state.lastPosition:_i,Wt.setState({firstItem:_i})}),Wt.state={selectedItem:Vt.selectedItem,swiping:!1,showArrows:!1,firstItem:0,visibleItems:0,lastPosition:0},Wt}return _createClass$1(_t,[{key:"componentDidMount",value:function(){this.setupThumbs()}},{key:"componentDidUpdate",value:function(Wt){this.props.selectedItem!==this.state.selectedItem&&this.setState({selectedItem:this.props.selectedItem,firstItem:this.getFirstItem(this.props.selectedItem)}),this.props.children!==Wt.children&&this.updateSizes()}},{key:"componentWillUnmount",value:function(){this.destroyThumbs()}},{key:"setupThumbs",value:function(){(0,_window$1.default)().addEventListener("resize",this.updateSizes),(0,_window$1.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.updateSizes()}},{key:"destroyThumbs",value:function(){(0,_window$1.default)().removeEventListener("resize",this.updateSizes),(0,_window$1.default)().removeEventListener("DOMContentLoaded",this.updateSizes)}},{key:"getFirstItem",value:function(Wt){var _i=Wt;return Wt>=this.state.lastPosition&&(_i=this.state.lastPosition),Wt<this.state.firstItem+this.state.visibleItems&&(_i=this.state.firstItem),Wt<this.state.firstItem&&(_i=Wt),_i}},{key:"renderItems",value:function(){var Wt=this;return this.props.children.map(function(_i,_s){var _c=_cssClasses$1.default.ITEM(!1,_s===Wt.state.selectedItem),_l={key:_s,ref:function(_m){return Wt.setThumbsRef(_m,_s)},className:_c,onClick:Wt.handleClickItem.bind(Wt,_s,Wt.props.children[_s]),onKeyDown:Wt.handleClickItem.bind(Wt,_s,Wt.props.children[_s]),"aria-label":"".concat(Wt.props.labels.item," ").concat(_s+1),style:{width:Wt.props.thumbWidth}};return _react$3.default.createElement("li",_extends$2({},_l,{role:"button",tabIndex:0}),_i)})}},{key:"render",value:function(){var Wt=this;if(!this.props.children)return null;var _i=_react$3.Children.count(this.props.children)>1,_s=this.state.showArrows&&this.state.firstItem>0,_c=this.state.showArrows&&this.state.firstItem<this.state.lastPosition,_l={},_d=-this.state.firstItem*(this.state.itemSize||0),_m=(0,_CSSTranslate$2.default)(_d,"px",this.props.axis),e_=this.props.transitionTime+"ms";return _l={WebkitTransform:_m,MozTransform:_m,MsTransform:_m,OTransform:_m,transform:_m,msTransform:_m,WebkitTransitionDuration:e_,MozTransitionDuration:e_,MsTransitionDuration:e_,OTransitionDuration:e_,transitionDuration:e_,msTransitionDuration:e_},_react$3.default.createElement("div",{className:_cssClasses$1.default.CAROUSEL(!1)},_react$3.default.createElement("div",{className:_cssClasses$1.default.WRAPPER(!1),ref:this.setItemsWrapperRef},_react$3.default.createElement("button",{type:"button",className:_cssClasses$1.default.ARROW_PREV(!_s),onClick:function(){return Wt.slideRight()},"aria-label":this.props.labels.leftArrow}),_i?_react$3.default.createElement(_reactEasySwipe$1.default,{tagName:"ul",className:_cssClasses$1.default.SLIDER(!1,this.state.swiping),onSwipeLeft:this.slideLeft,onSwipeRight:this.slideRight,onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:_l,innerRef:this.setItemsListRef,allowMouseEvents:this.props.emulateTouch},this.renderItems()):_react$3.default.createElement("ul",{className:_cssClasses$1.default.SLIDER(!1,this.state.swiping),ref:function(i_){return Wt.setItemsListRef(i_)},style:_l},this.renderItems()),_react$3.default.createElement("button",{type:"button",className:_cssClasses$1.default.ARROW_NEXT(!_c),onClick:function(){return Wt.slideLeft()},"aria-label":this.props.labels.rightArrow})))}}]),_t}(_react$3.Component);Thumbs$1.default=Thumbs;_defineProperty$2(Thumbs,"displayName","Thumbs");_defineProperty$2(Thumbs,"defaultProps",{axis:"horizontal",labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},selectedItem:0,thumbWidth:80,transitionTime:350});var document$1={};Object.defineProperty(document$1,"__esModule",{value:!0});document$1.default=void 0;var _default=function(){return document};document$1.default=_default;var utils={};Object.defineProperty(utils,"__esModule",{value:!0});utils.setPosition=utils.getPosition=utils.isKeyboardEvent=utils.defaultStatusFormatter=utils.noop=void 0;var _react$2=reactExports,_CSSTranslate$1=_interopRequireDefault$2(CSSTranslate);function _interopRequireDefault$2($){return $&&$.__esModule?$:{default:$}}var noop=function(){};utils.noop=noop;var defaultStatusFormatter=function(_e,_t){return"".concat(_e," of ").concat(_t)};utils.defaultStatusFormatter=defaultStatusFormatter;var isKeyboardEvent=function(_e){return _e?_e.hasOwnProperty("key"):!1};utils.isKeyboardEvent=isKeyboardEvent;var getPosition=function(_e,_t){if(_t.infiniteLoop&&++_e,_e===0)return 0;var Vt=_react$2.Children.count(_t.children);if(_t.centerMode&&_t.axis==="horizontal"){var Wt=-_e*_t.centerSlidePercentage,_i=Vt-1;return _e&&(_e!==_i||_t.infiniteLoop)?Wt+=(100-_t.centerSlidePercentage)/2:_e===_i&&(Wt+=100-_t.centerSlidePercentage),Wt}return-_e*100};utils.getPosition=getPosition;var setPosition=function(_e,_t){var Vt={};return["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach(function(Wt){Vt[Wt]=(0,_CSSTranslate$1.default)(_e,"%",_t)}),Vt};utils.setPosition=setPosition;var animations={};Object.defineProperty(animations,"__esModule",{value:!0});animations.fadeAnimationHandler=animations.slideStopSwipingHandler=animations.slideSwipeAnimationHandler=animations.slideAnimationHandler=void 0;var _react$1=reactExports,_CSSTranslate=_interopRequireDefault$1(CSSTranslate),_utils$1=utils;function _interopRequireDefault$1($){return $&&$.__esModule?$:{default:$}}function ownKeys$1($,_e){var _t=Object.keys($);if(Object.getOwnPropertySymbols){var Vt=Object.getOwnPropertySymbols($);_e&&(Vt=Vt.filter(function(Wt){return Object.getOwnPropertyDescriptor($,Wt).enumerable})),_t.push.apply(_t,Vt)}return _t}function _objectSpread$1($){for(var _e=1;_e<arguments.length;_e++){var _t=arguments[_e]!=null?arguments[_e]:{};_e%2?ownKeys$1(Object(_t),!0).forEach(function(Vt){_defineProperty$1($,Vt,_t[Vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(_t)):ownKeys$1(Object(_t)).forEach(function(Vt){Object.defineProperty($,Vt,Object.getOwnPropertyDescriptor(_t,Vt))})}return $}function _defineProperty$1($,_e,_t){return _e in $?Object.defineProperty($,_e,{value:_t,enumerable:!0,configurable:!0,writable:!0}):$[_e]=_t,$}var slideAnimationHandler=function(_e,_t){var Vt={},Wt=_t.selectedItem,_i=Wt,_s=_react$1.Children.count(_e.children)-1,_c=_e.infiniteLoop&&(Wt<0||Wt>_s);if(_c)return _i<0?_e.centerMode&&_e.centerSlidePercentage&&_e.axis==="horizontal"?Vt.itemListStyle=(0,_utils$1.setPosition)(-(_s+2)*_e.centerSlidePercentage-(100-_e.centerSlidePercentage)/2,_e.axis):Vt.itemListStyle=(0,_utils$1.setPosition)(-(_s+2)*100,_e.axis):_i>_s&&(Vt.itemListStyle=(0,_utils$1.setPosition)(0,_e.axis)),Vt;var _l=(0,_utils$1.getPosition)(Wt,_e),_d=(0,_CSSTranslate.default)(_l,"%",_e.axis),_m=_e.transitionTime+"ms";return Vt.itemListStyle={WebkitTransform:_d,msTransform:_d,OTransform:_d,transform:_d},_t.swiping||(Vt.itemListStyle=_objectSpread$1(_objectSpread$1({},Vt.itemListStyle),{},{WebkitTransitionDuration:_m,MozTransitionDuration:_m,OTransitionDuration:_m,transitionDuration:_m,msTransitionDuration:_m})),Vt};animations.slideAnimationHandler=slideAnimationHandler;var slideSwipeAnimationHandler=function(_e,_t,Vt,Wt){var _i={},_s=_t.axis==="horizontal",_c=_react$1.Children.count(_t.children),_l=0,_d=(0,_utils$1.getPosition)(Vt.selectedItem,_t),_m=_t.infiniteLoop?(0,_utils$1.getPosition)(_c-1,_t)-100:(0,_utils$1.getPosition)(_c-1,_t),e_=_s?_e.x:_e.y,t_=e_;_d===_l&&e_>0&&(t_=0),_d===_m&&e_<0&&(t_=0);var i_=_d+100/(Vt.itemSize/t_),c_=Math.abs(e_)>_t.swipeScrollTolerance;return _t.infiniteLoop&&c_&&(Vt.selectedItem===0&&i_>-100?i_-=_c*100:Vt.selectedItem===_c-1&&i_<-_c*100&&(i_+=_c*100)),(!_t.preventMovementUntilSwipeScrollTolerance||c_||Vt.swipeMovementStarted)&&(Vt.swipeMovementStarted||Wt({swipeMovementStarted:!0}),_i.itemListStyle=(0,_utils$1.setPosition)(i_,_t.axis)),c_&&!Vt.cancelClick&&Wt({cancelClick:!0}),_i};animations.slideSwipeAnimationHandler=slideSwipeAnimationHandler;var slideStopSwipingHandler=function(_e,_t){var Vt=(0,_utils$1.getPosition)(_t.selectedItem,_e),Wt=(0,_utils$1.setPosition)(Vt,_e.axis);return{itemListStyle:Wt}};animations.slideStopSwipingHandler=slideStopSwipingHandler;var fadeAnimationHandler=function(_e,_t){var Vt=_e.transitionTime+"ms",Wt="ease-in-out",_i={position:"absolute",display:"block",zIndex:-2,minHeight:"100%",opacity:0,top:0,right:0,left:0,bottom:0,transitionTimingFunction:Wt,msTransitionTimingFunction:Wt,MozTransitionTimingFunction:Wt,WebkitTransitionTimingFunction:Wt,OTransitionTimingFunction:Wt};return _t.swiping||(_i=_objectSpread$1(_objectSpread$1({},_i),{},{WebkitTransitionDuration:Vt,MozTransitionDuration:Vt,OTransitionDuration:Vt,transitionDuration:Vt,msTransitionDuration:Vt})),{slideStyle:_i,selectedStyle:_objectSpread$1(_objectSpread$1({},_i),{},{opacity:1,position:"relative"}),prevStyle:_objectSpread$1({},_i)}};animations.fadeAnimationHandler=fadeAnimationHandler;Object.defineProperty(Carousel$1,"__esModule",{value:!0});Carousel$1.default=void 0;var _react=_interopRequireWildcard(reactExports),_reactEasySwipe=_interopRequireDefault(lib),_cssClasses=_interopRequireDefault(cssClasses),_Thumbs=_interopRequireDefault(Thumbs$1),_document=_interopRequireDefault(document$1),_window=_interopRequireDefault(window$1),_utils=utils,_animations=animations;function _interopRequireDefault($){return $&&$.__esModule?$:{default:$}}function _getRequireWildcardCache(){if(typeof WeakMap!="function")return null;var $=new WeakMap;return _getRequireWildcardCache=function(){return $},$}function _interopRequireWildcard($){if($&&$.__esModule)return $;if($===null||_typeof($)!=="object"&&typeof $!="function")return{default:$};var _e=_getRequireWildcardCache();if(_e&&_e.has($))return _e.get($);var _t={},Vt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Wt in $)if(Object.prototype.hasOwnProperty.call($,Wt)){var _i=Vt?Object.getOwnPropertyDescriptor($,Wt):null;_i&&(_i.get||_i.set)?Object.defineProperty(_t,Wt,_i):_t[Wt]=$[Wt]}return _t.default=$,_e&&_e.set($,_t),_t}function _typeof($){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(_t){return typeof _t}:_typeof=function(_t){return _t&&typeof Symbol=="function"&&_t.constructor===Symbol&&_t!==Symbol.prototype?"symbol":typeof _t},_typeof($)}function _extends$1(){return _extends$1=Object.assign||function($){for(var _e=1;_e<arguments.length;_e++){var _t=arguments[_e];for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&($[Vt]=_t[Vt])}return $},_extends$1.apply(this,arguments)}function ownKeys($,_e){var _t=Object.keys($);if(Object.getOwnPropertySymbols){var Vt=Object.getOwnPropertySymbols($);_e&&(Vt=Vt.filter(function(Wt){return Object.getOwnPropertyDescriptor($,Wt).enumerable})),_t.push.apply(_t,Vt)}return _t}function _objectSpread($){for(var _e=1;_e<arguments.length;_e++){var _t=arguments[_e]!=null?arguments[_e]:{};_e%2?ownKeys(Object(_t),!0).forEach(function(Vt){_defineProperty($,Vt,_t[Vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(_t)):ownKeys(Object(_t)).forEach(function(Vt){Object.defineProperty($,Vt,Object.getOwnPropertyDescriptor(_t,Vt))})}return $}function _classCallCheck($,_e){if(!($ instanceof _e))throw new TypeError("Cannot call a class as a function")}function _defineProperties($,_e){for(var _t=0;_t<_e.length;_t++){var Vt=_e[_t];Vt.enumerable=Vt.enumerable||!1,Vt.configurable=!0,"value"in Vt&&(Vt.writable=!0),Object.defineProperty($,Vt.key,Vt)}}function _createClass($,_e,_t){return _e&&_defineProperties($.prototype,_e),_t&&_defineProperties($,_t),$}function _inherits($,_e){if(typeof _e!="function"&&_e!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(_e&&_e.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),_e&&_setPrototypeOf($,_e)}function _setPrototypeOf($,_e){return _setPrototypeOf=Object.setPrototypeOf||function(Vt,Wt){return Vt.__proto__=Wt,Vt},_setPrototypeOf($,_e)}function _createSuper($){var _e=_isNativeReflectConstruct();return function(){var Vt=_getPrototypeOf($),Wt;if(_e){var _i=_getPrototypeOf(this).constructor;Wt=Reflect.construct(Vt,arguments,_i)}else Wt=Vt.apply(this,arguments);return _possibleConstructorReturn(this,Wt)}}function _possibleConstructorReturn($,_e){return _e&&(_typeof(_e)==="object"||typeof _e=="function")?_e:_assertThisInitialized($)}function _assertThisInitialized($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function _getPrototypeOf($){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(_t){return _t.__proto__||Object.getPrototypeOf(_t)},_getPrototypeOf($)}function _defineProperty($,_e,_t){return _e in $?Object.defineProperty($,_e,{value:_t,enumerable:!0,configurable:!0,writable:!0}):$[_e]=_t,$}var Carousel=function($){_inherits(_t,$);var _e=_createSuper(_t);function _t(Vt){var Wt;_classCallCheck(this,_t),Wt=_e.call(this,Vt),_defineProperty(_assertThisInitialized(Wt),"thumbsRef",void 0),_defineProperty(_assertThisInitialized(Wt),"carouselWrapperRef",void 0),_defineProperty(_assertThisInitialized(Wt),"listRef",void 0),_defineProperty(_assertThisInitialized(Wt),"itemsRef",void 0),_defineProperty(_assertThisInitialized(Wt),"timer",void 0),_defineProperty(_assertThisInitialized(Wt),"animationHandler",void 0),_defineProperty(_assertThisInitialized(Wt),"setThumbsRef",function(_s){Wt.thumbsRef=_s}),_defineProperty(_assertThisInitialized(Wt),"setCarouselWrapperRef",function(_s){Wt.carouselWrapperRef=_s}),_defineProperty(_assertThisInitialized(Wt),"setListRef",function(_s){Wt.listRef=_s}),_defineProperty(_assertThisInitialized(Wt),"setItemsRef",function(_s,_c){Wt.itemsRef||(Wt.itemsRef=[]),Wt.itemsRef[_c]=_s}),_defineProperty(_assertThisInitialized(Wt),"autoPlay",function(){_react.Children.count(Wt.props.children)<=1||(Wt.clearAutoPlay(),Wt.props.autoPlay&&(Wt.timer=setTimeout(function(){Wt.increment()},Wt.props.interval)))}),_defineProperty(_assertThisInitialized(Wt),"clearAutoPlay",function(){Wt.timer&&clearTimeout(Wt.timer)}),_defineProperty(_assertThisInitialized(Wt),"resetAutoPlay",function(){Wt.clearAutoPlay(),Wt.autoPlay()}),_defineProperty(_assertThisInitialized(Wt),"stopOnHover",function(){Wt.setState({isMouseEntered:!0},Wt.clearAutoPlay)}),_defineProperty(_assertThisInitialized(Wt),"startOnLeave",function(){Wt.setState({isMouseEntered:!1},Wt.autoPlay)}),_defineProperty(_assertThisInitialized(Wt),"isFocusWithinTheCarousel",function(){return Wt.carouselWrapperRef?!!((0,_document.default)().activeElement===Wt.carouselWrapperRef||Wt.carouselWrapperRef.contains((0,_document.default)().activeElement)):!1}),_defineProperty(_assertThisInitialized(Wt),"navigateWithKeyboard",function(_s){if(Wt.isFocusWithinTheCarousel()){var _c=Wt.props.axis,_l=_c==="horizontal",_d={ArrowUp:38,ArrowRight:39,ArrowDown:40,ArrowLeft:37},_m=_l?_d.ArrowRight:_d.ArrowDown,e_=_l?_d.ArrowLeft:_d.ArrowUp;_m===_s.keyCode?Wt.increment():e_===_s.keyCode&&Wt.decrement()}}),_defineProperty(_assertThisInitialized(Wt),"updateSizes",function(){if(!(!Wt.state.initialized||!Wt.itemsRef||Wt.itemsRef.length===0)){var _s=Wt.props.axis==="horizontal",_c=Wt.itemsRef[0];if(_c){var _l=_s?_c.clientWidth:_c.clientHeight;Wt.setState({itemSize:_l}),Wt.thumbsRef&&Wt.thumbsRef.updateSizes()}}}),_defineProperty(_assertThisInitialized(Wt),"setMountState",function(){Wt.setState({hasMount:!0}),Wt.updateSizes()}),_defineProperty(_assertThisInitialized(Wt),"handleClickItem",function(_s,_c){if(_react.Children.count(Wt.props.children)!==0){if(Wt.state.cancelClick){Wt.setState({cancelClick:!1});return}Wt.props.onClickItem(_s,_c),_s!==Wt.state.selectedItem&&Wt.setState({selectedItem:_s})}}),_defineProperty(_assertThisInitialized(Wt),"handleOnChange",function(_s,_c){_react.Children.count(Wt.props.children)<=1||Wt.props.onChange(_s,_c)}),_defineProperty(_assertThisInitialized(Wt),"handleClickThumb",function(_s,_c){Wt.props.onClickThumb(_s,_c),Wt.moveTo(_s)}),_defineProperty(_assertThisInitialized(Wt),"onSwipeStart",function(_s){Wt.setState({swiping:!0}),Wt.props.onSwipeStart(_s)}),_defineProperty(_assertThisInitialized(Wt),"onSwipeEnd",function(_s){Wt.setState({swiping:!1,cancelClick:!1,swipeMovementStarted:!1}),Wt.props.onSwipeEnd(_s),Wt.clearAutoPlay(),Wt.state.autoPlay&&Wt.autoPlay()}),_defineProperty(_assertThisInitialized(Wt),"onSwipeMove",function(_s,_c){Wt.props.onSwipeMove(_c);var _l=Wt.props.swipeAnimationHandler(_s,Wt.props,Wt.state,Wt.setState.bind(_assertThisInitialized(Wt)));return Wt.setState(_objectSpread({},_l)),!!Object.keys(_l).length}),_defineProperty(_assertThisInitialized(Wt),"decrement",function(){var _s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;Wt.moveTo(Wt.state.selectedItem-(typeof _s=="number"?_s:1))}),_defineProperty(_assertThisInitialized(Wt),"increment",function(){var _s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;Wt.moveTo(Wt.state.selectedItem+(typeof _s=="number"?_s:1))}),_defineProperty(_assertThisInitialized(Wt),"moveTo",function(_s){if(typeof _s=="number"){var _c=_react.Children.count(Wt.props.children)-1;_s<0&&(_s=Wt.props.infiniteLoop?_c:0),_s>_c&&(_s=Wt.props.infiniteLoop?0:_c),Wt.selectItem({selectedItem:_s}),Wt.state.autoPlay&&Wt.state.isMouseEntered===!1&&Wt.resetAutoPlay()}}),_defineProperty(_assertThisInitialized(Wt),"onClickNext",function(){Wt.increment(1)}),_defineProperty(_assertThisInitialized(Wt),"onClickPrev",function(){Wt.decrement(1)}),_defineProperty(_assertThisInitialized(Wt),"onSwipeForward",function(){Wt.increment(1),Wt.props.emulateTouch&&Wt.setState({cancelClick:!0})}),_defineProperty(_assertThisInitialized(Wt),"onSwipeBackwards",function(){Wt.decrement(1),Wt.props.emulateTouch&&Wt.setState({cancelClick:!0})}),_defineProperty(_assertThisInitialized(Wt),"changeItem",function(_s){return function(_c){(!(0,_utils.isKeyboardEvent)(_c)||_c.key==="Enter")&&Wt.moveTo(_s)}}),_defineProperty(_assertThisInitialized(Wt),"selectItem",function(_s){Wt.setState(_objectSpread({previousItem:Wt.state.selectedItem},_s),function(){Wt.setState(Wt.animationHandler(Wt.props,Wt.state))}),Wt.handleOnChange(_s.selectedItem,_react.Children.toArray(Wt.props.children)[_s.selectedItem])}),_defineProperty(_assertThisInitialized(Wt),"getInitialImage",function(){var _s=Wt.props.selectedItem,_c=Wt.itemsRef&&Wt.itemsRef[_s],_l=_c&&_c.getElementsByTagName("img")||[];return _l[0]}),_defineProperty(_assertThisInitialized(Wt),"getVariableItemHeight",function(_s){var _c=Wt.itemsRef&&Wt.itemsRef[_s];if(Wt.state.hasMount&&_c&&_c.children.length){var _l=_c.children[0].getElementsByTagName("img")||[];if(_l.length>0){var _d=_l[0];if(!_d.complete){var _m=function i_(){Wt.forceUpdate(),_d.removeEventListener("load",i_)};_d.addEventListener("load",_m)}}var e_=_l[0]||_c.children[0],t_=e_.clientHeight;return t_>0?t_:null}return null});var _i={initialized:!1,previousItem:Vt.selectedItem,selectedItem:Vt.selectedItem,hasMount:!1,isMouseEntered:!1,autoPlay:Vt.autoPlay,swiping:!1,swipeMovementStarted:!1,cancelClick:!1,itemSize:1,itemListStyle:{},slideStyle:{},selectedStyle:{},prevStyle:{}};return Wt.animationHandler=typeof Vt.animationHandler=="function"&&Vt.animationHandler||Vt.animationHandler==="fade"&&_animations.fadeAnimationHandler||_animations.slideAnimationHandler,Wt.state=_objectSpread(_objectSpread({},_i),Wt.animationHandler(Vt,_i)),Wt}return _createClass(_t,[{key:"componentDidMount",value:function(){this.props.children&&this.setupCarousel()}},{key:"componentDidUpdate",value:function(Wt,_i){!Wt.children&&this.props.children&&!this.state.initialized&&this.setupCarousel(),!Wt.autoFocus&&this.props.autoFocus&&this.forceFocus(),_i.swiping&&!this.state.swiping&&this.setState(_objectSpread({},this.props.stopSwipingHandler(this.props,this.state))),(Wt.selectedItem!==this.props.selectedItem||Wt.centerMode!==this.props.centerMode)&&(this.updateSizes(),this.moveTo(this.props.selectedItem)),Wt.autoPlay!==this.props.autoPlay&&(this.props.autoPlay?this.setupAutoPlay():this.destroyAutoPlay(),this.setState({autoPlay:this.props.autoPlay}))}},{key:"componentWillUnmount",value:function(){this.destroyCarousel()}},{key:"setupCarousel",value:function(){var Wt=this;this.bindEvents(),this.state.autoPlay&&_react.Children.count(this.props.children)>1&&this.setupAutoPlay(),this.props.autoFocus&&this.forceFocus(),this.setState({initialized:!0},function(){var _i=Wt.getInitialImage();_i&&!_i.complete?_i.addEventListener("load",Wt.setMountState):Wt.setMountState()})}},{key:"destroyCarousel",value:function(){this.state.initialized&&(this.unbindEvents(),this.destroyAutoPlay())}},{key:"setupAutoPlay",value:function(){this.autoPlay();var Wt=this.carouselWrapperRef;this.props.stopOnHover&&Wt&&(Wt.addEventListener("mouseenter",this.stopOnHover),Wt.addEventListener("mouseleave",this.startOnLeave))}},{key:"destroyAutoPlay",value:function(){this.clearAutoPlay();var Wt=this.carouselWrapperRef;this.props.stopOnHover&&Wt&&(Wt.removeEventListener("mouseenter",this.stopOnHover),Wt.removeEventListener("mouseleave",this.startOnLeave))}},{key:"bindEvents",value:function(){(0,_window.default)().addEventListener("resize",this.updateSizes),(0,_window.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.props.useKeyboardArrows&&(0,_document.default)().addEventListener("keydown",this.navigateWithKeyboard)}},{key:"unbindEvents",value:function(){(0,_window.default)().removeEventListener("resize",this.updateSizes),(0,_window.default)().removeEventListener("DOMContentLoaded",this.updateSizes);var Wt=this.getInitialImage();Wt&&Wt.removeEventListener("load",this.setMountState),this.props.useKeyboardArrows&&(0,_document.default)().removeEventListener("keydown",this.navigateWithKeyboard)}},{key:"forceFocus",value:function(){var Wt;(Wt=this.carouselWrapperRef)===null||Wt===void 0||Wt.focus()}},{key:"renderItems",value:function(Wt){var _i=this;return this.props.children?_react.Children.map(this.props.children,function(_s,_c){var _l=_c===_i.state.selectedItem,_d=_c===_i.state.previousItem,_m=_l&&_i.state.selectedStyle||_d&&_i.state.prevStyle||_i.state.slideStyle||{};_i.props.centerMode&&_i.props.axis==="horizontal"&&(_m=_objectSpread(_objectSpread({},_m),{},{minWidth:_i.props.centerSlidePercentage+"%"})),_i.state.swiping&&_i.state.swipeMovementStarted&&(_m=_objectSpread(_objectSpread({},_m),{},{pointerEvents:"none"}));var e_={ref:function(i_){return _i.setItemsRef(i_,_c)},key:"itemKey"+_c+(Wt?"clone":""),className:_cssClasses.default.ITEM(!0,_c===_i.state.selectedItem,_c===_i.state.previousItem),onClick:_i.handleClickItem.bind(_i,_c,_s),style:_m};return _react.default.createElement("li",e_,_i.props.renderItem(_s,{isSelected:_c===_i.state.selectedItem,isPrevious:_c===_i.state.previousItem}))}):[]}},{key:"renderControls",value:function(){var Wt=this,_i=this.props,_s=_i.showIndicators,_c=_i.labels,_l=_i.renderIndicator,_d=_i.children;return _s?_react.default.createElement("ul",{className:"control-dots"},_react.Children.map(_d,function(_m,e_){return _l&&_l(Wt.changeItem(e_),e_===Wt.state.selectedItem,e_,_c.item)})):null}},{key:"renderStatus",value:function(){return this.props.showStatus?_react.default.createElement("p",{className:"carousel-status"},this.props.statusFormatter(this.state.selectedItem+1,_react.Children.count(this.props.children))):null}},{key:"renderThumbs",value:function(){return!this.props.showThumbs||!this.props.children||_react.Children.count(this.props.children)===0?null:_react.default.createElement(_Thumbs.default,{ref:this.setThumbsRef,onSelectItem:this.handleClickThumb,selectedItem:this.state.selectedItem,transitionTime:this.props.transitionTime,thumbWidth:this.props.thumbWidth,labels:this.props.labels,emulateTouch:this.props.emulateTouch},this.props.renderThumbs(this.props.children))}},{key:"render",value:function(){var Wt=this;if(!this.props.children||_react.Children.count(this.props.children)===0)return null;var _i=this.props.swipeable&&_react.Children.count(this.props.children)>1,_s=this.props.axis==="horizontal",_c=this.props.showArrows&&_react.Children.count(this.props.children)>1,_l=_c&&(this.state.selectedItem>0||this.props.infiniteLoop)||!1,_d=_c&&(this.state.selectedItem<_react.Children.count(this.props.children)-1||this.props.infiniteLoop)||!1,_m=this.renderItems(!0),e_=_m.shift(),t_=_m.pop(),i_={className:_cssClasses.default.SLIDER(!0,this.state.swiping),onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:this.state.itemListStyle,tolerance:this.props.swipeScrollTolerance},c_={};if(_s){if(i_.onSwipeLeft=this.onSwipeForward,i_.onSwipeRight=this.onSwipeBackwards,this.props.dynamicHeight){var h_=this.getVariableItemHeight(this.state.selectedItem);c_.height=h_||"auto"}}else i_.onSwipeUp=this.props.verticalSwipe==="natural"?this.onSwipeBackwards:this.onSwipeForward,i_.onSwipeDown=this.props.verticalSwipe==="natural"?this.onSwipeForward:this.onSwipeBackwards,i_.style=_objectSpread(_objectSpread({},i_.style),{},{height:this.state.itemSize}),c_.height=this.state.itemSize;return _react.default.createElement("div",{"aria-label":this.props.ariaLabel,className:_cssClasses.default.ROOT(this.props.className),ref:this.setCarouselWrapperRef,tabIndex:this.props.useKeyboardArrows?0:void 0},_react.default.createElement("div",{className:_cssClasses.default.CAROUSEL(!0),style:{width:this.props.width}},this.renderControls(),this.props.renderArrowPrev(this.onClickPrev,_l,this.props.labels.leftArrow),_react.default.createElement("div",{className:_cssClasses.default.WRAPPER(!0,this.props.axis),style:c_},_i?_react.default.createElement(_reactEasySwipe.default,_extends$1({tagName:"ul",innerRef:this.setListRef},i_,{allowMouseEvents:this.props.emulateTouch}),this.props.infiniteLoop&&t_,this.renderItems(),this.props.infiniteLoop&&e_):_react.default.createElement("ul",{className:_cssClasses.default.SLIDER(!0,this.state.swiping),ref:function(l_){return Wt.setListRef(l_)},style:this.state.itemListStyle||{}},this.props.infiniteLoop&&t_,this.renderItems(),this.props.infiniteLoop&&e_)),this.props.renderArrowNext(this.onClickNext,_d,this.props.labels.rightArrow),this.renderStatus()),this.renderThumbs())}}]),_t}(_react.default.Component);Carousel$1.default=Carousel;_defineProperty(Carousel,"displayName","Carousel");_defineProperty(Carousel,"defaultProps",{ariaLabel:void 0,axis:"horizontal",centerSlidePercentage:80,interval:3e3,labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},onClickItem:_utils.noop,onClickThumb:_utils.noop,onChange:_utils.noop,onSwipeStart:function(){},onSwipeEnd:function(){},onSwipeMove:function(){return!1},preventMovementUntilSwipeScrollTolerance:!1,renderArrowPrev:function(_e,_t,Vt){return _react.default.createElement("button",{type:"button","aria-label":Vt,className:_cssClasses.default.ARROW_PREV(!_t),onClick:_e})},renderArrowNext:function(_e,_t,Vt){return _react.default.createElement("button",{type:"button","aria-label":Vt,className:_cssClasses.default.ARROW_NEXT(!_t),onClick:_e})},renderIndicator:function(_e,_t,Vt,Wt){return _react.default.createElement("li",{className:_cssClasses.default.DOT(_t),onClick:_e,onKeyDown:_e,value:Vt,key:Vt,role:"button",tabIndex:0,"aria-label":"".concat(Wt," ").concat(Vt+1)})},renderItem:function(_e){return _e},renderThumbs:function(_e){var _t=_react.Children.map(_e,function(Vt){var Wt=Vt;if(Vt.type!=="img"&&(Wt=_react.Children.toArray(Vt.props.children).find(function(_i){return _i.type==="img"})),!!Wt)return Wt});return _t.filter(function(Vt){return Vt}).length===0?(console.warn("No images found! Can't build the thumb list without images. If you don't need thumbs, set showThumbs={false} in the Carousel. Note that it's not possible to get images rendered inside custom components. More info at https://github.com/leandrowd/react-responsive-carousel/blob/master/TROUBLESHOOTING.md"),[]):_t},statusFormatter:_utils.defaultStatusFormatter,selectedItem:0,showArrows:!0,showIndicators:!0,showStatus:!0,showThumbs:!0,stopOnHover:!0,swipeScrollTolerance:5,swipeable:!0,transitionTime:350,verticalSwipe:"standard",width:"100%",animationHandler:"slide",swipeAnimationHandler:_animations.slideSwipeAnimationHandler,stopSwipingHandler:_animations.slideStopSwipingHandler});var types={};(function($){Object.defineProperty($,"__esModule",{value:!0}),Object.defineProperty($,"Carousel",{enumerable:!0,get:function(){return _e.default}}),Object.defineProperty($,"CarouselProps",{enumerable:!0,get:function(){return _t.CarouselProps}}),Object.defineProperty($,"Thumbs",{enumerable:!0,get:function(){return Vt.default}});var _e=Wt(Carousel$1),_t=types,Vt=Wt(Thumbs$1);function Wt(_i){return _i&&_i.__esModule?_i:{default:_i}}})(js);const scrollBar="",bootstrap4_min="";function SessionRight({appointmentId:$,currentChat:_e,socket:_t,receiverId:Vt}){const[Wt,_i]=reactExports.useState(!1),[_s,_c]=reactExports.useState(3),_l=useNavigate(),[_d,_m]=useEndSessionMutation(),e_=useSelector(l_=>l_.user.user),t_=JSON.parse(localStorage.getItem("check")),i_=reactExports.useCallback(()=>{var l_;return _e?(l_=_e.members)==null?void 0:l_.filter(d_=>d_!==(e_==null?void 0:e_._id))[0]:!1},[_e,e_]);reactExports.useEffect(()=>{let l_=null;return Wt&&(l_=setInterval(()=>{_c(d_=>(d_===1&&(clearInterval(l_),c_()),d_-1))},1e3)),()=>{clearInterval(l_)}},[Wt]);function c_(){t_!=null&&t_.isDoctor?_l("/doctor/videoCall",{state:{appointmentId:$,receiverId:Vt}}):_l("/user/videoCall",{state:{appointmentId:$,receiverId:Vt}})}function h_(){const l_={appointmentId:$,conversationId:_e._id};Swal.fire({title:"Are you sure?",text:"Do you want to end the session?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, end it!",customClass:{popup:"my-custom-popup-class",container:"my-custom-container-class",content:"my-custom-content-class",confirmButton:"my-custom-confirm-button-class",cancelButton:"my-custom-cancel-button-class"}}).then(d_=>{d_.isConfirmed&&(_m.isLoading||_d(l_).then(()=>{_t.current.emit("endSession",{receiverid:i_()}),t_!=null&&t_.isDoctor?_l("/doctor/preparePrescription",{state:{appointmentId:$,receiverid:Vt}}):_l("/user/feedback")}))})}reactExports.useEffect(()=>{_t.current.on("getEndSession",()=>{Swal.fire({title:"Session Ended",text:"Your session has ended. You will be redirected.",icon:"warning",showCancelButton:!1,confirmButtonText:"OK"}).then(()=>{t_!=null&&t_.isDoctor?_l("/doctor/preparePrescription",{state:{appointmentId:$,receiverid:Vt}}):_l("/user/feedback")})})},[]),reactExports.useEffect(()=>{_t.current.on("getVideoCall",()=>{Swal.fire({title:"Video Call Request",text:"The patient is requesting a video call.",icon:"info",showCancelButton:!0,confirmButtonText:"Accept",cancelButtonText:"Decline"}).then(l_=>{l_.isConfirmed?(Q$1.success("The call will be initialized soon"),_i(!0),_t.current.emit("videoCallAccepted",{receiverid:i_()})):l_.dismiss===Swal.DismissReason.cancel&&(Q$1.warning("You rejected the request"),_t.current.emit("videoCallRejected",{receiverid:i_()}))})})},[_t,i_]);function y_(){_t.current.emit("requestVideoCall",{receiverid:i_()})}return reactExports.useEffect(()=>{const l_=()=>{Q$1.error("The video request was rejected")};return _t.current.on("getvideoCallRejected",l_),()=>{_t.current.off("getvideoCallRejected",l_)}},[]),reactExports.useEffect(()=>{_t.current.on("getvideoCallAccepted",()=>{_i(!0)})},[]),jsxs("div",{className:"w-3/12  h-screen items-center border-l-2 border-gray-300 rounded-md scroll-container ",children:[jsx("div",{className:"h-10 bg-blue-400 rounded-md flex justify-center mt-[1px] items-center",children:jsxs("h5",{className:"font-semibold text-base text-white",children:["Logged in as : ",e_==null?void 0:e_.name]})}),jsx("div",{className:"flex flex-col h-2/4 bg-white mx-2 items-center mb-4 justify-center",children:jsx("div",{className:"justify-center items-center h- hidden md:flex",children:jsxs(js.Carousel,{showThumbs:!1,showArrows:!1,showIndicators:!1,showStatus:!1,autoPlay:!0,infiniteLoop:!0,className:"w-40",children:[jsxs("div",{children:[jsx("img",{src:"https://www.practo.com/consult/bundles/cwipage/images/ic-chats-v1.png",alt:" 1"}),jsx("span",{className:"font-semibold",children:"Free Follow-up"})]}),jsxs("div",{children:[jsx("img",{src:"https://www.practo.com/consult/bundles/cwipage/images/qualified_doctors.png",alt:" 2"}),jsx("span",{className:"font-semibold",children:"Verified Doctors"})]}),jsxs("div",{children:[jsx("img",{src:"https://www.practo.com/consult/bundles/cwipage/images/ic-security-v1.png",alt:" 3"}),jsx("span",{className:"font-semibold",children:"Secure Chats"})]})]})})}),jsxs("div",{className:"justify-center flex flex-col items-center h-1/4",children:[jsxs("div",{className:"m-5 justify-center flex flex-col",children:[jsx("h5",{className:"font-semibold mb-1",children:"Request Video Call"}),Wt?jsxs("p",{className:"font-semibold text-red-500",children:["You will be redirected in ",_s]}):null,jsxs("button",{type:"button",onClick:y_,className:"bg-blue-900 p-2 font-bold text-2xl text-white rounded-lg hover:bg-indigo-500 duration-700",children:[" ",jsx("ion-icon",{name:"videocam"})]})]}),jsx("div",{className:"justify-center flex flex-col",children:jsxs("button",{type:"button",onClick:h_,className:"bg-red-500 p-2 flex font-semibold text-white rounded-lg hover:bg-orange-500 duration-700",children:[jsx("span",{className:"flex items-center mt-1 mr-2",children:jsx("ion-icon",{name:"close-circle-outline"})})," End Session"]})})]})]})}function SessionScreen({socket:$}){var _d;const _e=useLocation(),{appointmentId:_t,receiverId:Vt}=_e.state,[Wt,_i]=reactExports.useState(null),_s=useFetchConversationQuery(),_c=(_d=_s.data)==null?void 0:_d.conversation,_l=_c==null?void 0:_c.filter(_m=>_m.active===!0)[0];if(_s.isSuccess)return jsxs(ChatLayout,{children:[jsx(SessionLeft,{setcurrentChat:_i,convos:_c,active:_l}),jsx(Chat,{currentChat:Wt,socket:$}),jsx(SessionRight,{appointmentId:_t,receiverId:Vt,currentChat:Wt,socket:$})]})}var FileSaver_minExports={},FileSaver_min={get exports(){return FileSaver_minExports},set exports($){FileSaver_minExports=$}};(function($,_e){(function(_t,Vt){Vt()})(commonjsGlobal$1,function(){function _t(_d,_m){return typeof _m>"u"?_m={autoBom:!1}:typeof _m!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),_m={autoBom:!_m}),_m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(_d.type)?new Blob(["\uFEFF",_d],{type:_d.type}):_d}function Vt(_d,_m,e_){var t_=new XMLHttpRequest;t_.open("GET",_d),t_.responseType="blob",t_.onload=function(){_l(t_.response,_m,e_)},t_.onerror=function(){console.error("could not download file")},t_.send()}function Wt(_d){var _m=new XMLHttpRequest;_m.open("HEAD",_d,!1);try{_m.send()}catch{}return 200<=_m.status&&299>=_m.status}function _i(_d){try{_d.dispatchEvent(new MouseEvent("click"))}catch{var _m=document.createEvent("MouseEvents");_m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),_d.dispatchEvent(_m)}}var _s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal$1=="object"&&commonjsGlobal$1.global===commonjsGlobal$1?commonjsGlobal$1:void 0,_c=_s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),_l=_s.saveAs||(typeof window!="object"||window!==_s?function(){}:"download"in HTMLAnchorElement.prototype&&!_c?function(_d,_m,e_){var t_=_s.URL||_s.webkitURL,i_=document.createElement("a");_m=_m||_d.name||"download",i_.download=_m,i_.rel="noopener",typeof _d=="string"?(i_.href=_d,i_.origin===location.origin?_i(i_):Wt(i_.href)?Vt(_d,_m,e_):_i(i_,i_.target="_blank")):(i_.href=t_.createObjectURL(_d),setTimeout(function(){t_.revokeObjectURL(i_.href)},4e4),setTimeout(function(){_i(i_)},0))}:"msSaveOrOpenBlob"in navigator?function(_d,_m,e_){if(_m=_m||_d.name||"download",typeof _d!="string")navigator.msSaveOrOpenBlob(_t(_d,e_),_m);else if(Wt(_d))Vt(_d,_m,e_);else{var t_=document.createElement("a");t_.href=_d,t_.target="_blank",setTimeout(function(){_i(t_)})}}:function(_d,_m,e_,t_){if(t_=t_||open("","_blank"),t_&&(t_.document.title=t_.document.body.innerText="downloading..."),typeof _d=="string")return Vt(_d,_m,e_);var i_=_d.type==="application/octet-stream",c_=/constructor/i.test(_s.HTMLElement)||_s.safari,h_=/CriOS\/[\d]+/.test(navigator.userAgent);if((h_||i_&&c_||_c)&&typeof FileReader<"u"){var y_=new FileReader;y_.onloadend=function(){var f_=y_.result;f_=h_?f_:f_.replace(/^data:[^;]*;/,"data:attachment/file;"),t_?t_.location.href=f_:location=f_,t_=null},y_.readAsDataURL(_d)}else{var l_=_s.URL||_s.webkitURL,d_=l_.createObjectURL(_d);t_?t_.location=d_:location.href=d_,t_=null,setTimeout(function(){l_.revokeObjectURL(d_)},4e4)}});_s.saveAs=_l.saveAs=_l,$.exports=_l})})(FileSaver_min);const DocAppointmentsHistory=({appointments:$})=>{const _e=new Date,_t=_e.getFullYear(),Vt=String(_e.getMonth()+1).padStart(2,"0"),Wt=String(_e.getDate()).padStart(2,"0"),_i=`${_t}-${Vt}-${Wt}`,_s=lodashExports.groupBy($,"date"),_c=Object.keys(_s).sort(),_l=useNavigate();function _d(e_,t_){_l("/doctor/preparePrescription",{state:{appointmentId:e_,receiverid:t_}})}function _m(e_,t_){getrequest(`/downloadPrescription/${e_}`).then(i_=>{const c_=new Blob([i_.data],{type:"application/pdf"});FileSaver_minExports.saveAs(c_,`${t_} Prescription.pdf`)}).catch(()=>{})}return jsxs("div",{className:"bg-gray-100 p-4 rounded-lg w-full overflow-y-auto max-h-screen",children:[jsx("h2",{className:"text-lg font-semibold mb-4",children:"Appointment History"}),_c==null?void 0:_c.map(e_=>jsxs("div",{children:[jsx("h2",{className:"text-lg text-center bg-blue-900 text-white font-bold mb-4 rounded-lg",children:e_===_i?"Today":e_}),_s[e_].map(t_=>jsxs("div",{className:"bg-gray-300 w-full rounded-lg shadow p-4 mb-4 flex justify-between items-center",children:[jsx("div",{className:"w-[7%]",children:jsx("img",{className:"rounded-xl",src:"https://w7.pngwing.com/pngs/81/570/png-transparent-profile-logo-computer-icons-user-user-blue-heroes-logo-thumbnail.png",alt:""})}),jsxs("div",{className:"w-[40%]",children:[jsxs("h3",{className:"text-xl font-semibold mb-2",children:["Patient Name: ",jsx("b",{className:"uppercase text-blue-800",children:t_.patientName})]}),jsxs("p",{className:"text-gray-600",children:["Appointment ID: ",t_._id]}),jsx("p",{className:"text-yellow-600 font-semibold",children:"Session Duration: 1 Hour"})]}),jsxs("div",{className:"w-[30%]",children:[jsxs("h5",{className:"text-red-600 font-semibold text-xl ",children:["Time: ",t_.time]}),jsxs("p",{className:"text-gray-600",children:["Date: ",t_.date]})]}),jsx("div",{className:"w-[15%]",children:t_.prescriptionDone?jsx("button",{onClick:()=>_m(t_._id,t_.prescription.patientName),type:"button",className:"bg-violet-900 rounded-md p-1 font-semibold text-white px-2",children:"View Prescription"}):jsx("button",{type:"button",onClick:()=>_d(t_._id,t_.userId),className:"bg-yellow-500 rounded-md p-1 font-semibold px-2",children:"Add Prescription"})})]},t_._id))]}))]})};function AppointmentsHistory(){const{data:$}=useFetchDoctorAppointmentsQuery(),_e=$==null?void 0:$.appointments.filter(_t=>_t.completed===!0);return jsx("div",{children:jsx(DocNavbar,{children:jsx("div",{className:"flex",children:jsx("div",{className:"flex w-full justify-center m-5",children:jsx(DocAppointmentsHistory,{appointments:_e})})})})})}function PreparePrescription({socket:$}){const _e=useNavigate(),_t=useLocation(),{appointmentId:Vt,receiverid:Wt}=_t.state,[_i,_s]=useSubmitPrescriptionMutation(),[_c,_l]=reactExports.useState(""),[_d,_m]=reactExports.useState(""),[e_,t_]=reactExports.useState(""),[i_,c_]=reactExports.useState(""),[h_,y_]=reactExports.useState([{medicine:"",dosage:""}]),l_=(T_,R_,C_)=>{const j_=[...h_];j_[T_][R_]=C_,y_(j_)},d_=()=>{y_([...h_,{medicine:"",dosage:""}])},f_=T_=>{const R_=[...h_];R_.splice(T_,1),y_(R_)};return jsx("div",{children:jsx(DocNavbar,{children:jsx("div",{className:"justify-center flex w-full mt-5",children:jsxs("div",{className:"bg-blue-200 py-4 px-6 rounded-lg max-w-4xl mx-auto",children:[jsx("h1",{className:"text-2xl text-center font-bold mb-6",children:"Prescription Form"}),jsxs("form",{onSubmit:T_=>{T_.preventDefault();const R_={patientName:_c,age:_d,gender:e_,diagnosedCondition:i_,medicines:h_,appointmentId:Vt};_s.isLoading||_i(R_).then(C_=>{C_!=null&&C_.data.success&&($.current.emit("prescription-done",{receiverid:Wt}),Q$1.success("succesfully submitted prescription"),_e("/doctor/appointmentHistory"))}),_l(""),_m(""),t_(""),c_(""),y_([{medicine:"",dosage:""}])},children:[jsx("div",{className:"mb-4",children:jsxs("label",{className:"block mb-2 text-gray-700",children:["Patient Name:",jsx("input",{type:"text",value:_c,onChange:T_=>_l(T_.target.value),className:"border border-gray-400 rounded-lg px-3 py-2 mt-1 w-full"})]})}),jsxs("div",{className:"flex w-full justify-between",children:[jsx("div",{className:"mb-4 w-1/6 flex",children:jsxs("label",{className:"block mb-2 text-gray-700",children:["Age:",jsx("input",{type:"text",value:_d,onChange:T_=>_m(T_.target.value),className:"border border-gray-400 rounded-lg px-3 py-2 mt-1 w-full"})]})}),jsxs("div",{className:"mb-4 w-1/4",children:[jsx("label",{className:"block mb-2 text-gray-700",children:"Gender:"}),jsxs("div",{className:"flex items-center",children:[jsx("input",{type:"checkbox",checked:e_==="male",onChange:T_=>t_(T_.target.checked?"male":""),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),jsx("span",{className:"ml-2 text-gray-700",children:"Male"})]}),jsxs("div",{className:"flex items-center mt-2",children:[jsx("input",{type:"checkbox",checked:e_==="female",onChange:T_=>t_(T_.target.checked?"female":""),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),jsx("span",{className:"ml-2 text-gray-700",children:"Female"})]}),jsxs("div",{className:"flex items-center mt-2",children:[jsx("input",{type:"checkbox",checked:e_==="other",onChange:T_=>t_(T_.target.checked?"other":""),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),jsx("span",{className:"ml-2 text-gray-700",children:"Other"})]})]})]}),jsx("div",{className:"mb-4",children:jsxs("label",{className:"block mb-2 text-gray-700",children:["Diagnosed Condition:",jsx("input",{type:"text",value:i_,onChange:T_=>c_(T_.target.value),className:"border border-gray-400 rounded-lg px-3 py-2 mt-1 w-full"})]})}),jsxs("div",{className:"mb-4",children:[jsx("h3",{className:"text-lg font-semibold mb-2",children:"Medicine & Dosage:"}),h_.map((T_,R_)=>jsx("div",{className:"mb-4",children:jsxs("div",{className:"flex",children:[jsxs("label",{className:"block flex-1 mr-4",children:["Medicine:",jsx("input",{type:"text",value:T_.medicine,onChange:C_=>l_(R_,"medicine",C_.target.value),className:"border border-gray-400 rounded-lg px-3 py-2 mt-1 w-full"})]}),jsxs("label",{className:"block flex-1",children:["Dosage:",jsx("input",{type:"text",value:T_.dosage,onChange:C_=>l_(R_,"dosage",C_.target.value),className:"border border-gray-400 rounded-lg px-3 py-2 mt-1 w-full"})]}),R_>0&&jsx("button",{type:"button",onClick:()=>f_(R_),className:"flex-none text-red-500 pt-5 text-xl rounded-lg px-3 mt-1 ml-2 hover:text-red-700",children:jsx("ion-icon",{name:"trash"})})]})},R_)),jsxs("button",{type:"button",onClick:d_,className:"flex items-center text-blue-600 hover:text-blue-800",children:[jsx("span",{className:"mt-2 text-3xl",children:jsx("ion-icon",{name:"add-circle"})}),"Add Medicine"]})]}),jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-600 text-white rounded-lg px-4 py-2",children:"Submit"})]})]})})})})}var AgoraRTC_NProductionExports={},AgoraRTC_NProduction={get exports(){return AgoraRTC_NProductionExports},set exports($){AgoraRTC_NProductionExports=$}};(function($,_e){(function(_t,Vt){$.exports=Vt()})(commonjsGlobal$1,function(){function _t(_n,_r){return _r.forEach(function(_o){_o&&typeof _o!="string"&&!Array.isArray(_o)&&Object.keys(_o).forEach(function(_a){if(_a!=="default"&&!(_a in _n)){var _u=Object.getOwnPropertyDescriptor(_o,_a);Object.defineProperty(_n,_a,_u.get?_u:{enumerable:!0,get:function(){return _o[_a]}})}})}),Object.freeze(_n)}var Vt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:{},Wt=function(_n){try{return!!_n()}catch{return!0}},_i=!Wt(function(){var _n=function(){}.bind();return typeof _n!="function"||_n.hasOwnProperty("prototype")}),_s=_i,_c=Function.prototype,_l=_c.bind,_d=_c.call,_m=_s&&_l.bind(_d,_d),e_=_s?function(_n){return _n&&_m(_n)}:function(_n){return _n&&function(){return _d.apply(_n,arguments)}},t_=e_({}.isPrototypeOf),i_=function(_n){return _n&&_n.Math==Math&&_n},c_=i_(typeof globalThis=="object"&&globalThis)||i_(typeof window=="object"&&window)||i_(typeof self=="object"&&self)||i_(typeof Vt=="object"&&Vt)||function(){return this}()||Function("return this")(),h_=_i,y_=Function.prototype,l_=y_.apply,d_=y_.call,f_=typeof Reflect=="object"&&Reflect.apply||(h_?d_.bind(l_):function(){return d_.apply(l_,arguments)}),S_=function(_n){return typeof _n=="function"},T_={},R_=!Wt(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),C_=_i,j_=Function.prototype.call,W_=C_?j_.bind(j_):function(){return j_.apply(j_,arguments)},A_={},$_={}.propertyIsEnumerable,q_=Object.getOwnPropertyDescriptor,G_=q_&&!$_.call({1:2},1);A_.f=G_?function(_n){var _r=q_(this,_n);return!!_r&&_r.enumerable}:$_;var I_,x_,Y_=function(_n,_r){return{enumerable:!(1&_n),configurable:!(2&_n),writable:!(4&_n),value:_r}},z_=e_,B_=z_({}.toString),Q_=z_("".slice),K_=function(_n){return Q_(B_(_n),8,-1)},rE=e_,aE=Wt,gE=K_,kE=c_.Object,xE=rE("".split),YE=aE(function(){return!kE("z").propertyIsEnumerable(0)})?function(_n){return gE(_n)=="String"?xE(_n,""):kE(_n)}:kE,d0=c_.TypeError,M0=function(_n){if(_n==null)throw d0("Can't call method on "+_n);return _n},u0=YE,D0=M0,C0=function(_n){return u0(D0(_n))},QE=S_,f0=function(_n){return typeof _n=="object"?_n!==null:QE(_n)},$E={},m0=$E,SE=c_,zE=S_,N0=function(_n){return zE(_n)?_n:void 0},K0=function(_n,_r){return arguments.length<2?N0(m0[_n])||N0(SE[_n]):m0[_n]&&m0[_n][_r]||SE[_n]&&SE[_n][_r]},RE=K0("navigator","userAgent")||"",VE=c_,jS=RE,IT=VE.process,_w=VE.Deno,EI=IT&&IT.versions||_w&&_w.version,hN=EI&&EI.v8;hN&&(x_=(I_=hN.split("."))[0]>0&&I_[0]<4?1:+(I_[0]+I_[1])),!x_&&jS&&(!(I_=jS.match(/Edge\/(\d+)/))||I_[1]>=74)&&(I_=jS.match(/Chrome\/(\d+)/))&&(x_=+I_[1]);var tR=x_,OR=tR,pN=Wt,bO=!!Object.getOwnPropertySymbols&&!pN(function(){var _n=Symbol();return!String(_n)||!(Object(_n)instanceof Symbol)||!Symbol.sham&&OR&&OR<41}),y0=bO&&!Symbol.sham&&typeof Symbol.iterator=="symbol",fN=K0,mN=S_,t1=t_,_N=y0,gN=c_.Object,nR=_N?function(_n){return typeof _n=="symbol"}:function(_n){var _r=fN("Symbol");return mN(_r)&&t1(_r.prototype,gN(_n))},ZD=c_.String,n1=function(_n){try{return ZD(_n)}catch{return"Object"}},eP=S_,wL=n1,TL=c_.TypeError,rR=function(_n){if(eP(_n))return _n;throw TL(wL(_n)+" is not a function")},tP=rR,vN=function(_n,_r){var _o=_n[_r];return _o==null?void 0:tP(_o)},bI=W_,r1=S_,yN=f0,nP=c_.TypeError,i1={exports:{}},BI=c_,rP=Object.defineProperty,EN=function(_n,_r){try{rP(BI,_n,{value:_r,configurable:!0,writable:!0})}catch{BI[_n]=_r}return _r},RL="__core-js_shared__",bN=c_[RL]||EN(RL,{}),IL=bN;(i1.exports=function(_n,_r){return IL[_n]||(IL[_n]=_r!==void 0?_r:{})})("versions",[]).push({version:"3.20.3",mode:"pure",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var iP=M0,oP=c_.Object,KR=function(_n){return oP(iP(_n))},sP=KR,aP=e_({}.hasOwnProperty),eT=Object.hasOwn||function(_n,_r){return aP(sP(_n),_r)},SN=e_,SO=0,CL=Math.random(),o1=SN(1 .toString),tT=function(_n){return"Symbol("+(_n===void 0?"":_n)+")_"+o1(++SO+CL,36)},cP=c_,s1=i1.exports,AL=eT,wO=tT,OL=bO,NL=y0,TO=s1("wks"),NR=cP.Symbol,wN=NR&&NR.for,TN=NL?NR:NR&&NR.withoutSetter||wO,xS=function(_n){if(!AL(TO,_n)||!OL&&typeof TO[_n]!="string"){var _r="Symbol."+_n;OL&&AL(NR,_n)?TO[_n]=NR[_n]:TO[_n]=NL&&wN?wN(_r):TN(_r)}return TO[_n]},uP=W_,kL=f0,xL=nR,LL=vN,ML=function(_n,_r){var _o,_a;if(_r==="string"&&r1(_o=_n.toString)&&!yN(_a=bI(_o,_n))||r1(_o=_n.valueOf)&&!yN(_a=bI(_o,_n))||_r!=="string"&&r1(_o=_n.toString)&&!yN(_a=bI(_o,_n)))return _a;throw nP("Can't convert object to primitive value")},DL=xS,a1=c_.TypeError,PL=DL("toPrimitive"),jL=function(_n,_r){if(!kL(_n)||xL(_n))return _n;var _o,_a=LL(_n,PL);if(_a){if(_r===void 0&&(_r="default"),_o=uP(_a,_n,_r),!kL(_o)||xL(_o))return _o;throw a1("Can't convert object to primitive value")}return _r===void 0&&(_r="number"),ML(_n,_r)},c1=nR,RO=function(_n){var _r=jL(_n,"string");return c1(_r)?_r:_r+""},RN=f0,u1=c_.document,UL=RN(u1)&&RN(u1.createElement),lR=function(_n){return UL?u1.createElement(_n):{}},$L=lR,IN=!R_&&!Wt(function(){return Object.defineProperty($L("div"),"a",{get:function(){return 7}}).a!=7}),IO=R_,l1=W_,VI=A_,FL=Y_,YL=C0,lP=RO,BL=eT,VL=IN,SI=Object.getOwnPropertyDescriptor;T_.f=IO?SI:function(_n,_r){if(_n=YL(_n),_r=lP(_r),VL)try{return SI(_n,_r)}catch{}if(BL(_n,_r))return FL(!l1(VI.f,_n,_r),_n[_r])};var HL=Wt,GL=S_,dP=/#|\.prototype\./,CO=function(_n,_r){var _o=hP[qL(_n)];return _o==fP||_o!=pP&&(GL(_r)?HL(_r):!!_r)},qL=CO.normalize=function(_n){return String(_n).replace(dP,".").toLowerCase()},hP=CO.data={},pP=CO.NATIVE="N",fP=CO.POLYFILL="P",WL=CO,CN=rR,mP=_i,zL=e_(e_.bind),AO=function(_n,_r){return CN(_n),_r===void 0?_n:mP?zL(_n,_r):function(){return _n.apply(_r,arguments)}},yT={},KL=R_&&Wt(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),rS=c_,iS=f0,OO=rS.String,_P=rS.TypeError,iR=function(_n){if(iS(_n))return _n;throw _P(OO(_n)+" is not an object")},gP=R_,JL=IN,QL=KL,HI=iR,XL=RO,HS=c_.TypeError,NO=Object.defineProperty,wI=Object.getOwnPropertyDescriptor,ZL="enumerable",AN="configurable",GS="writable";yT.f=gP?QL?function(_n,_r,_o){if(HI(_n),_r=XL(_r),HI(_o),typeof _n=="function"&&_r==="prototype"&&"value"in _o&&GS in _o&&!_o.writable){var _a=wI(_n,_r);_a&&_a.writable&&(_n[_r]=_o.value,_o={configurable:AN in _o?_o.configurable:_a.configurable,enumerable:ZL in _o?_o.enumerable:_a.enumerable,writable:!1})}return NO(_n,_r,_o)}:NO:function(_n,_r,_o){if(HI(_n),_r=XL(_r),HI(_o),JL)try{return NO(_n,_r,_o)}catch{}if("get"in _o||"set"in _o)throw HS("Accessors not supported");return"value"in _o&&(_n[_r]=_o.value),_n};var eM=yT,tM=Y_,JR=R_?function(_n,_r,_o){return eM.f(_n,_r,tM(1,_o))}:function(_n,_r,_o){return _n[_r]=_o,_n},GI=c_,ON=f_,d1=e_,CT=S_,vP=T_.f,YT=WL,qI=$E,nM=AO,AT=JR,kO=eT,NN=function(_n){var _r=function(_o,_a,_u){if(this instanceof _r){switch(arguments.length){case 0:return new _n;case 1:return new _n(_o);case 2:return new _n(_o,_a)}return new _n(_o,_a,_u)}return ON(_n,this,arguments)};return _r.prototype=_n.prototype,_r},v0=function(_n,_r){var _o,_a,_u,_p,_f,n_,r_,o_,s_=_n.target,u_=_n.global,g_=_n.stat,w_=_n.proto,D_=u_?GI:g_?GI[s_]:(GI[s_]||{}).prototype,M_=u_?qI:qI[s_]||AT(qI,s_,{})[s_],P_=M_.prototype;for(_u in _r)_o=!YT(u_?_u:s_+(g_?".":"#")+_u,_n.forced)&&D_&&kO(D_,_u),_f=M_[_u],_o&&(n_=_n.noTargetGet?(o_=vP(D_,_u))&&o_.value:D_[_u]),_p=_o&&n_?n_:_r[_u],_o&&typeof _f==typeof _p||(r_=_n.bind&&_o?nM(_p,GI):_n.wrap&&_o?NN(_p):w_&&CT(_p)?d1(_p):_p,(_n.sham||_p&&_p.sham||_f&&_f.sham)&&AT(r_,"sham",!0),AT(M_,_u,r_),w_&&(kO(qI,_a=s_+"Prototype")||AT(qI,_a,{}),AT(qI[_a],_u,_p),_n.real&&P_&&!P_[_u]&&AT(P_,_u,_p)))},dR=Math.ceil,h1=Math.floor,QR=function(_n){var _r=+_n;return _r!=_r||_r===0?0:(_r>0?h1:dR)(_r)},kN=QR,yP=Math.min,EP=function(_n){return _n>0?yP(kN(_n),9007199254740991):0},XR=function(_n){return EP(_n.length)},rM=rR,p1=KR,WI=YE,bP=XR,iM=c_.TypeError,xO=function(_n){return function(_r,_o,_a,_u){rM(_o);var _p=p1(_r),_f=WI(_p),n_=bP(_p),r_=_n?n_-1:0,o_=_n?-1:1;if(_a<2)for(;;){if(r_ in _f){_u=_f[r_],r_+=o_;break}if(r_+=o_,_n?r_<0:n_<=r_)throw iM("Reduce of empty array with no initial value")}for(;_n?r_>=0:n_>r_;r_+=o_)r_ in _f&&(_u=_o(_u,_f[r_],r_,_p));return _u}},f1={left:xO(!1),right:xO(!0)},xN=Wt,m1=function(_n,_r){var _o=[][_n];return!!_o&&xN(function(){_o.call(null,_r||function(){throw 1},1)})},_1=K_(c_.process)=="process",g1=f1.left,v1=tR,LN=_1;v0({target:"Array",proto:!0,forced:!m1("reduce")||!LN&&v1>79&&v1<83},{reduce:function(_n){var _r=arguments.length;return g1(this,_n,_r,_r>1?arguments[1]:void 0)}});var MN=$E,CS=function(_n){return MN[_n+"Prototype"]},LO=CS("Array").reduce,MO=t_,oM=LO,y1=Array.prototype,DO=function(_n){var _r=_n.reduce;return _n===y1||MO(y1,_n)&&_r===y1.reduce?oM:_r},ZR=DO;let sM=!0,aM=!0;function E1(_n,_r,_o){const _a=_n.match(_r);return _a&&_a.length>=_o&&parseInt(_a[_o],10)}function OT(_n,_r,_o){if(!_n.RTCPeerConnection)return;const _a=_n.RTCPeerConnection.prototype,_u=_a.addEventListener;_a.addEventListener=function(_f,n_){if(_f!==_r)return _u.apply(this,arguments);const r_=o_=>{const s_=_o(o_);s_&&(n_.handleEvent?n_.handleEvent(s_):n_(s_))};return this._eventMap=this._eventMap||{},this._eventMap[_r]||(this._eventMap[_r]=new Map),this._eventMap[_r].set(n_,r_),_u.apply(this,[_f,r_])};const _p=_a.removeEventListener;_a.removeEventListener=function(_f,n_){if(_f!==_r||!this._eventMap||!this._eventMap[_r])return _p.apply(this,arguments);if(!this._eventMap[_r].has(n_))return _p.apply(this,arguments);const r_=this._eventMap[_r].get(n_);return this._eventMap[_r].delete(n_),this._eventMap[_r].size===0&&delete this._eventMap[_r],Object.keys(this._eventMap).length===0&&delete this._eventMap,_p.apply(this,[_f,r_])},Object.defineProperty(_a,"on"+_r,{get(){return this["_on"+_r]},set(_f){this["_on"+_r]&&(this.removeEventListener(_r,this["_on"+_r]),delete this["_on"+_r]),_f&&this.addEventListener(_r,this["_on"+_r]=_f)},enumerable:!0,configurable:!0})}function SP(_n){return typeof _n!="boolean"?new Error("Argument type: "+typeof _n+". Please use a boolean."):(sM=_n,_n?"adapter.js logging disabled":"adapter.js logging enabled")}function wP(_n){return typeof _n!="boolean"?new Error("Argument type: "+typeof _n+". Please use a boolean."):(aM=!_n,"adapter.js deprecation warnings "+(_n?"disabled":"enabled"))}function b1(){if(typeof window=="object"){if(sM)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function S1(_n,_r){aM&&console.warn(_n+" is deprecated, please use "+_r+" instead.")}function kR(_n){const _r={browser:null,version:null};if(_n===void 0||!_n.navigator)return _r.browser="Not a browser.",_r;const{navigator:_o}=_n;if(_o.mozGetUserMedia)_r.browser="firefox",_r.version=E1(_o.userAgent,/Firefox\/(\d+)\./,1);else if(_o.webkitGetUserMedia||_n.isSecureContext===!1&&_n.webkitRTCPeerConnection)_r.browser="chrome",_r.version=E1(_o.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!_n.RTCPeerConnection||!_o.userAgent.match(/AppleWebKit\/(\d+)\./))return _r.browser="Not a supported browser.",_r;_r.browser="safari",_r.version=E1(_o.userAgent,/AppleWebKit\/(\d+)\./,1),_r.supportsUnifiedPlan=_n.RTCRtpTransceiver&&"currentDirection"in _n.RTCRtpTransceiver.prototype}return _r}function zI(_n){return Object.prototype.toString.call(_n)==="[object Object]"}function cM(_n){var _r;return zI(_n)?ZR(_r=Object.keys(_n)).call(_r,function(_o,_a){const _u=zI(_n[_a]),_p=_u?cM(_n[_a]):_n[_a],_f=_u&&!Object.keys(_p).length;return _p===void 0||_f?_o:Object.assign(_o,{[_a]:_p})},{}):_n}function uM(_n,_r,_o){const _a=_o?"outbound-rtp":"inbound-rtp",_u=new Map;if(_r===null)return _u;const _p=[];return _n.forEach(_f=>{_f.type==="track"&&_f.trackIdentifier===_r.id&&_p.push(_f)}),_p.forEach(_f=>{_n.forEach(n_=>{n_.type===_a&&n_.trackId===_f.id&&function r_(o_,s_,u_){s_&&!u_.has(s_.id)&&(u_.set(s_.id,s_),Object.keys(s_).forEach(g_=>{g_.endsWith("Id")?r_(o_,o_.get(s_[g_]),u_):g_.endsWith("Ids")&&s_[g_].forEach(w_=>{r_(o_,o_.get(w_),u_)})}))}(_n,n_,_u)})}),_u}var TP=i1.exports,TI=tT,ET=TP("keys"),PO=function(_n){return ET[_n]||(ET[_n]=TI(_n))},RP=!Wt(function(){function _n(){}return _n.prototype.constructor=null,Object.getPrototypeOf(new _n)!==_n.prototype}),IP=c_,CP=eT,lM=S_,AP=KR,KI=RP,eE=PO("IE_PROTO"),fE=IP.Object,cE=fE.prototype,jE=KI?fE.getPrototypeOf:function(_n){var _r=AP(_n);if(CP(_r,eE))return _r[eE];var _o=_r.constructor;return lM(_o)&&_r instanceof _o?_o.prototype:_r instanceof fE?cE:null},l0=c_,G0=S_,US=l0.String,Y0=l0.TypeError,w1=e_,OP=iR,NT=function(_n){if(typeof _n=="object"||G0(_n))return _n;throw Y0("Can't set "+US(_n)+" as a prototype")},T1=Object.setPrototypeOf||("__proto__"in{}?function(){var _n,_r=!1,_o={};try{(_n=w1(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(_o,[]),_r=_o instanceof Array}catch{}return function(_a,_u){return OP(_a),NT(_u),_r?_n(_a,_u):_a.__proto__=_u,_a}}():void 0),R1={},JI=QR,jO=Math.max,I1=Math.min,q0=function(_n,_r){var _o=JI(_n);return _o<0?jO(_o+_r,0):I1(_o,_r)},NP=C0,oR=q0,xR=XR,dM=function(_n){return function(_r,_o,_a){var _u,_p=NP(_r),_f=xR(_p),n_=oR(_a,_f);if(_n&&_o!=_o){for(;_f>n_;)if((_u=_p[n_++])!=_u)return!0}else for(;_f>n_;n_++)if((_n||n_ in _p)&&_p[n_]===_o)return _n||n_||0;return!_n&&-1}},kP={includes:dM(!0),indexOf:dM(!1)},C1={},QI=eT,eI=C0,A1=kP.indexOf,hM=C1,tI=e_([].push),__=function(_n,_r){var _o,_a=eI(_n),_u=0,_p=[];for(_o in _a)!QI(hM,_o)&&QI(_a,_o)&&tI(_p,_o);for(;_r.length>_u;)QI(_a,_o=_r[_u++])&&(~A1(_p,_o)||tI(_p,_o));return _p},v_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],O_=__,X_=v_.concat("length","prototype");R1.f=Object.getOwnPropertyNames||function(_n){return O_(_n,X_)};var lE={};lE.f=Object.getOwnPropertySymbols;var HE=K0,J0=R1,kT=lE,fT=iR,XI=e_([].concat),ZI=HE("Reflect","ownKeys")||function(_n){var _r=J0.f(fT(_n)),_o=kT.f;return _o?XI(_r,_o(_n)):_r},DN=eT,xP=ZI,tY=T_,BU=yT,LP={},nY=__,qS=v_,nT=Object.keys||function(_n){return nY(_n,qS)},rY=R_,iY=KL,VU=yT,oY=iR,MP=C0,PN=nT;LP.f=rY&&!iY?Object.defineProperties:function(_n,_r){oY(_n);for(var _o,_a=MP(_r),_u=PN(_r),_p=_u.length,_f=0;_p>_f;)VU.f(_n,_o=_u[_f++],_a[_o]);return _n};var O1,UO=K0("document","documentElement"),jN=iR,UN=LP,$N=v_,N1=C1,sY=UO,aY=lR,HU=PO("IE_PROTO"),DP=function(){},GU=function(_n){return"<script>"+_n+"<\/script>"},FN=function(_n){_n.write(GU("")),_n.close();var _r=_n.parentWindow.Object;return _n=null,_r},_C=function(){try{O1=new ActiveXObject("htmlfile")}catch{}var _n,_r;_C=typeof document<"u"?document.domain&&O1?FN(O1):((_r=aY("iframe")).style.display="none",sY.appendChild(_r),_r.src="javascript:",(_n=_r.contentWindow.document).open(),_n.write(GU("document.F=Object")),_n.close(),_n.F):FN(O1);for(var _o=$N.length;_o--;)delete _C.prototype[$N[_o]];return _C()};N1[HU]=!0;var YN=Object.create||function(_n,_r){var _o;return _n!==null?(DP.prototype=jN(_n),_o=new DP,DP.prototype=null,_o[HU]=_n):_o=_C(),_r===void 0?_o:UN.f(_o,_r)},F_=e_("".replace),k1=String(Error("zxcasd").stack),BN=/\n\s*at [^:]*:[^\n]*/,hR=BN.test(k1),U0=f0,cY=JR,x1={},uY=x1,$O=xS("iterator"),lY=Array.prototype,qU={};qU[xS("toStringTag")]="z";var PP=String(qU)==="[object z]",dY=c_,hY=PP,RI=S_,pM=K_,pY=xS("toStringTag"),fY=dY.Object,mY=pM(function(){return arguments}())=="Arguments",_A=hY?pM:function(_n){var _r,_o,_a;return _n===void 0?"Undefined":_n===null?"Null":typeof(_o=function(_u,_p){try{return _u[_p]}catch{}}(_r=fY(_n),pY))=="string"?_o:mY?pM(_r):(_a=pM(_r))=="Object"&&RI(_r.callee)?"Arguments":_a},II=_A,WU=vN,_Y=x1,gY=xS("iterator"),zU=function(_n){if(_n!=null)return WU(_n,gY)||WU(_n,"@@iterator")||_Y[II(_n)]},vY=W_,FO=rR,yY=iR,EY=n1,LR=zU,bY=c_.TypeError,SY=W_,KU=iR,wY=vN,TY=AO,JU=W_,QU=iR,RY=n1,IY=function(_n){return _n!==void 0&&(uY.Array===_n||lY[$O]===_n)},jP=XR,L1=t_,fM=function(_n,_r){var _o=arguments.length<2?LR(_n):_r;if(FO(_o))return yY(vY(_o,_n));throw bY(EY(_n)+" is not iterable")},CY=zU,UP=function(_n,_r,_o){var _a,_u;KU(_n);try{if(!(_a=wY(_n,"return"))){if(_r==="throw")throw _o;return _o}_a=SY(_a,_n)}catch(_p){_u=!0,_a=_p}if(_r==="throw")throw _o;if(_u)throw _a;return KU(_a),_o},AY=c_.TypeError,pR=function(_n,_r){this.stopped=_n,this.result=_r},mM=pR.prototype,nI=function(_n,_r,_o){var _a,_u,_p,_f,n_,r_,o_,s_=_o&&_o.that,u_=!(!_o||!_o.AS_ENTRIES),g_=!(!_o||!_o.IS_ITERATOR),w_=!(!_o||!_o.INTERRUPTED),D_=TY(_r,s_),M_=function(_g){return _a&&UP(_a,"normal",_g),new pR(!0,_g)},P_=function(_g){return u_?(QU(_g),w_?D_(_g[0],_g[1],M_):D_(_g[0],_g[1])):w_?D_(_g,M_):D_(_g)};if(g_)_a=_n;else{if(!(_u=CY(_n)))throw AY(RY(_n)+" is not iterable");if(IY(_u)){for(_p=0,_f=jP(_n);_f>_p;_p++)if((n_=P_(_n[_p]))&&L1(mM,n_))return n_;return new pR(!1)}_a=fM(_n,_u)}for(r_=_a.next;!(o_=JU(r_,_a)).done;){try{n_=P_(o_.value)}catch(_g){UP(_a,"throw",_g)}if(typeof n_=="object"&&n_&&L1(mM,n_))return n_}return new pR(!1)},fR=_A,OY=c_.String,YO=function(_n){if(fR(_n)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return OY(_n)},XU=YO,VN=Y_,eO=!Wt(function(){var _n=Error("a");return!("stack"in _n)||(Object.defineProperty(_n,"stack",VN(1,7)),_n.stack!==7)}),ZU=v0,NY=c_,_M=t_,kY=jE,HN=T1,mT=function(_n,_r,_o){for(var _a=xP(_r),_u=BU.f,_p=tY.f,_f=0;_f<_a.length;_f++){var n_=_a[_f];DN(_n,n_)||_o&&DN(_o,n_)||_u(_n,n_,_p(_r,n_))}},gM=YN,GN=JR,mR=Y_,$P=function(_n,_r){if(hR&&typeof _n=="string")for(;_r--;)_n=F_(_n,BN,"");return _n},vM=function(_n,_r){U0(_r)&&"cause"in _r&&cY(_n,"cause",_r.cause)},BO=nI,e$=function(_n,_r){return _n===void 0?arguments.length<2?"":_r:XU(_n)},xT=eO,FP=xS("toStringTag"),yM=NY.Error,xY=[].push,qN=function(_n,_r){var _o,_a=arguments.length>2?arguments[2]:void 0,_u=_M(WN,this);HN?_o=HN(new yM,_u?kY(this):WN):(_o=_u?this:gM(WN),GN(_o,FP,"Error")),_r!==void 0&&GN(_o,"message",e$(_r)),xT&&GN(_o,"stack",$P(_o.stack,1)),vM(_o,_a);var _p=[];return BO(_n,xY,{that:_p}),GN(_o,"errors",_p),_o};HN?HN(qN,yM):mT(qN,yM,{name:!0});var WN=qN.prototype=gM(yM.prototype,{constructor:mR(1,qN),message:mR(1,""),name:mR(1,"AggregateError")});ZU({global:!0},{AggregateError:qN});var LY=S_,VO=bN,t$=e_(Function.toString);LY(VO.inspectSource)||(VO.inspectSource=function(_n){return t$(_n)});var EM,zN,tO,YP=VO.inspectSource,MY=S_,BP=YP,VP=c_.WeakMap,DY=MY(VP)&&/native code/.test(BP(VP)),n$=c_,HP=e_,r$=f0,GP=JR,qP=eT,KN=bN,i$=PO,o$=C1,WP="Object already initialized",M1=n$.TypeError,PY=n$.WeakMap;if(DY||KN.state){var nO=KN.state||(KN.state=new PY),s$=HP(nO.get),a$=HP(nO.has),c$=HP(nO.set);EM=function(_n,_r){if(a$(nO,_n))throw new M1(WP);return _r.facade=_n,c$(nO,_n,_r),_r},zN=function(_n){return s$(nO,_n)||{}},tO=function(_n){return a$(nO,_n)}}else{var D1=i$("state");o$[D1]=!0,EM=function(_n,_r){if(qP(_n,D1))throw new M1(WP);return _r.facade=_n,GP(_n,D1,_r),_r},zN=function(_n){return qP(_n,D1)?_n[D1]:{}},tO=function(_n){return qP(_n,D1)}}var CI,zP,bM,SM={set:EM,get:zN,has:tO,enforce:function(_n){return tO(_n)?zN(_n):EM(_n,{})},getterFor:function(_n){return function(_r){var _o;if(!r$(_r)||(_o=zN(_r)).type!==_n)throw M1("Incompatible receiver, "+_n+" required");return _o}}},JN=R_,A0=eT,u$=Function.prototype,jY=JN&&Object.getOwnPropertyDescriptor,HO=A0(u$,"name"),KP={EXISTS:HO,PROPER:HO&&function(){}.name==="something",CONFIGURABLE:HO&&(!JN||JN&&jY(u$,"name").configurable)},UY=JR,wM=function(_n,_r,_o,_a){_a&&_a.enumerable?_n[_r]=_o:UY(_n,_r,_o)},_R=Wt,$Y=S_,TM=YN,RM=jE,l$=wM,IM=xS("iterator"),BT=!1;[].keys&&("next"in(bM=[].keys())?(zP=RM(RM(bM)))!==Object.prototype&&(CI=zP):BT=!0);var rO=CI==null||_R(function(){var _n={};return CI[IM].call(_n)!==_n});$Y((CI=rO?{}:TM(CI))[IM])||l$(CI,IM,function(){return this});var CM={IteratorPrototype:CI,BUGGY_SAFARI_ITERATORS:BT},d$=_A,AM=PP?{}.toString:function(){return"[object "+d$(this)+"]"},h$=PP,JP=yT.f,p$=JR,QP=eT,XP=AM,AI=xS("toStringTag"),QN=function(_n,_r,_o,_a){if(_n){var _u=_o?_n:_n.prototype;QP(_u,AI)||JP(_u,AI,{configurable:!0,value:_r}),_a&&!h$&&p$(_u,"toString",XP)}},iO=CM.IteratorPrototype,f$=YN,m$=Y_,ZP=QN,FY=x1,YY=function(){return this},BY=v0,_$=W_,g$=function(_n,_r,_o,_a){var _u=_r+" Iterator";return _n.prototype=f$(iO,{next:m$(+!_a,_o)}),ZP(_n,_u,!1,!0),FY[_u]=YY,_n},VY=jE,v$=QN,e2=wM,LT=x1,rI=KP.PROPER,OM=CM.BUGGY_SAFARI_ITERATORS,t2=xS("iterator"),XN="keys",OI="values",n2="entries",y$=function(){return this},E$=function(_n,_r,_o,_a,_u,_p,_f){g$(_o,_r,_a);var n_,r_,o_,s_=function(_g){if(_g===_u&&M_)return M_;if(!OM&&_g in w_)return w_[_g];switch(_g){case XN:case OI:case n2:return function(){return new _o(this,_g)}}return function(){return new _o(this)}},u_=_r+" Iterator",g_=!1,w_=_n.prototype,D_=w_[t2]||w_["@@iterator"]||_u&&w_[_u],M_=!OM&&D_||s_(_u),P_=_r=="Array"&&w_.entries||D_;if(P_&&(n_=VY(P_.call(new _n)))!==Object.prototype&&n_.next&&(v$(n_,u_,!0,!0),LT[u_]=y$),rI&&_u==OI&&D_&&D_.name!==OI&&(g_=!0,M_=function(){return _$(D_,this)}),_u)if(r_={values:s_(OI),keys:_p?M_:s_(XN),entries:s_(n2)},_f)for(o_ in r_)(OM||g_||!(o_ in w_))&&e2(w_,o_,r_[o_]);else BY({target:_r,proto:!0,forced:OM||g_},r_);return _f&&w_[t2]!==M_&&e2(w_,t2,M_,{name:_u}),LT[_r]=M_,r_},b$=C0,GO=x1,P1=SM;yT.f;var HY=E$,r2="Array Iterator",S$=P1.set,NM=P1.getterFor(r2);HY(Array,"Array",function(_n,_r){S$(this,{type:r2,target:b$(_n),index:0,kind:_r})},function(){var _n=NM(this),_r=_n.target,_o=_n.kind,_a=_n.index++;return!_r||_a>=_r.length?(_n.target=void 0,{value:void 0,done:!0}):_o=="keys"?{value:_a,done:!1}:_o=="values"?{value:_r[_a],done:!1}:{value:[_a,_r[_a]],done:!1}},"values"),GO.Arguments=GO.Array;var i2=c_.Promise,kM=wM,o2=K0,xM=yT,GY=R_,s2=xS("species"),LM=t_,w$=c_.TypeError,MM=xS("iterator"),T$=!1;try{var R$=0,iI={next:function(){return{done:!!R$++}},return:function(){T$=!0}};iI[MM]=function(){return this},Array.from(iI,function(){throw 2})}catch{}var I$=e_,C$=Wt,A$=S_,O$=_A,qY=YP,N$=function(){},NI=[],DM=K0("Reflect","construct"),ZN=/^\s*(?:class|function)\b/,a2=I$(ZN.exec),PM=!ZN.exec(N$),oI=function(_n){if(!A$(_n))return!1;try{return DM(N$,NI,_n),!0}catch{return!1}},ZE=function(_n){if(!A$(_n))return!1;switch(O$(_n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return PM||!!a2(ZN,qY(_n))}catch{return!0}};ZE.sham=!0;var oO,sO,aO,c2,_k=!DM||C$(function(){var _n;return oI(oI.call)||!oI(Object)||!oI(function(){_n=!0})||_n})?ZE:oI,k$=_k,bT=n1,WY=c_.TypeError,x$=iR,L$=function(_n){if(k$(_n))return _n;throw WY(bT(_n)+" is not a constructor")},zY=xS("species"),u2=function(_n,_r){var _o,_a=x$(_n).constructor;return _a===void 0||(_o=x$(_a)[zY])==null?_r:L$(_o)},l2=e_([].slice),M$=/(?:ipad|iphone|ipod).*applewebkit/i.test(RE),sR=c_,kI=f_,MT=AO,jM=S_,KY=eT,d2=Wt,D$=UO,JY=l2,j1=lR,P$=M$,j$=_1,h2=sR.setImmediate,p2=sR.clearImmediate,QY=sR.process,f2=sR.Dispatch,U$=sR.Function,m2=sR.MessageChannel,XY=sR.String,_x=0,U1={},eL="onreadystatechange";try{oO=sR.location}catch{}var tL=function(_n){if(KY(U1,_n)){var _r=U1[_n];delete U1[_n],_r()}},UM=function(_n){return function(){tL(_n)}},_2=function(_n){tL(_n.data)},nL=function(_n){sR.postMessage(XY(_n),oO.protocol+"//"+oO.host)};h2&&p2||(h2=function(_n){var _r=JY(arguments,1);return U1[++_x]=function(){kI(jM(_n)?_n:U$(_n),void 0,_r)},sO(_x),_x},p2=function(_n){delete U1[_n]},j$?sO=function(_n){QY.nextTick(UM(_n))}:f2&&f2.now?sO=function(_n){f2.now(UM(_n))}:m2&&!P$?(c2=(aO=new m2).port2,aO.port1.onmessage=_2,sO=MT(c2.postMessage,c2)):sR.addEventListener&&jM(sR.postMessage)&&!sR.importScripts&&oO&&oO.protocol!=="file:"&&!d2(nL)?(sO=nL,sR.addEventListener("message",_2,!1)):sO=eL in j1("script")?function(_n){D$.appendChild(j1("script")).onreadystatechange=function(){D$.removeChild(this),tL(_n)}}:function(_n){setTimeout(UM(_n),0)});var $1,ST,MR,F1,$M,g2,v2,$$,F$={set:h2,clear:p2},ZY=c_,_B=/ipad|iphone|ipod/i.test(RE)&&ZY.Pebble!==void 0,eV=/web0s(?!.*chrome)/i.test(RE),qO=c_,Y$=AO,tV=T_.f,y2=F$.set,B$=M$,V$=_B,H$=eV,E2=_1,G$=qO.MutationObserver||qO.WebKitMutationObserver,q$=qO.document,b2=qO.process,FM=qO.Promise,W$=tV(qO,"queueMicrotask"),z$=W$&&W$.value;z$||($1=function(){var _n,_r;for(E2&&(_n=b2.domain)&&_n.exit();ST;){_r=ST.fn,ST=ST.next;try{_r()}catch(_o){throw ST?F1():MR=void 0,_o}}MR=void 0,_n&&_n.enter()},B$||E2||H$||!G$||!q$?!V$&&FM&&FM.resolve?((v2=FM.resolve(void 0)).constructor=FM,$$=Y$(v2.then,v2),F1=function(){$$($1)}):E2?F1=function(){b2.nextTick($1)}:(y2=Y$(y2,qO),F1=function(){y2($1)}):($M=!0,g2=q$.createTextNode(""),new G$($1).observe(g2,{characterData:!0}),F1=function(){g2.data=$M=!$M}));var nV=z$||function(_n){var _r={fn:_n,next:void 0};MR&&(MR.next=_r),ST||(ST=_r,F1()),MR=_r},Y1={},K$=rR,gR=function(_n){var _r,_o;this.promise=new _n(function(_a,_u){if(_r!==void 0||_o!==void 0)throw TypeError("Bad Promise constructor");_r=_a,_o=_u}),this.resolve=K$(_r),this.reject=K$(_o)};Y1.f=function(_n){return new gR(_n)};var rV=iR,iV=f0,oV=Y1,S2=function(_n,_r){if(rV(_n),iV(_r)&&_r.constructor===_n)return _r;var _o=oV.f(_n);return(0,_o.resolve)(_r),_o.promise},sV=c_,YM=function(_n){try{return{error:!1,value:_n()}}catch(_r){return{error:!0,value:_r}}},J$=function(){this.head=null,this.tail=null};J$.prototype={add:function(_n){var _r={item:_n,next:null};this.head?this.tail.next=_r:this.head=_r,this.tail=_r},get:function(){var _n=this.head;if(_n)return this.head=_n.next,this.tail===_n&&(this.tail=null),_n.item}};var w2,BM,T2,aV=typeof window=="object",VM=v0,xI=c_,cV=K0,cO=W_,R2=i2,uV=function(_n,_r,_o){for(var _a in _r)_o&&_o.unsafe&&_n[_a]?_n[_a]=_r[_a]:kM(_n,_a,_r[_a],_o);return _n},lV=QN,dV=function(_n){var _r=o2(_n),_o=xM.f;GY&&_r&&!_r[s2]&&_o(_r,s2,{configurable:!0,get:function(){return this}})},I2=rR,HM=S_,hV=f0,pV=function(_n,_r){if(LM(_r,_n))return _n;throw w$("Incorrect invocation")},fV=YP,Q$=nI,mV=function(_n,_r){if(!_r&&!T$)return!1;var _o=!1;try{var _a={};_a[MM]=function(){return{next:function(){return{done:_o=!0}}}},_n(_a)}catch{}return _o},_V=u2,X$=F$.set,C2=nV,A2=S2,Z$=function(_n,_r){var _o=sV.console;_o&&_o.error&&(arguments.length==1?_o.error(_n):_o.error(_n,_r))},e3=Y1,O2=YM,gV=J$,N2=SM,vV=WL,yV=aV,GM=_1,t3=tR,n3=xS("species"),sI="Promise",rL=N2.getterFor(sI),EV=N2.set,bV=N2.getterFor(sI),SV=R2&&R2.prototype,aI=R2,qM=SV,r3=xI.TypeError,k2=xI.document,x2=xI.process,B1=e3.f,wV=B1,TV=!!(k2&&k2.createEvent&&xI.dispatchEvent),i3=HM(xI.PromiseRejectionEvent),o3="unhandledrejection",WM=vV(sI,function(){var _n=fV(aI),_r=_n!==String(aI);if(!_r&&t3===66||!qM.finally)return!0;if(t3>=51&&/native code/.test(_n))return!1;var _o=new aI(function(_u){_u(1)}),_a=function(_u){_u(function(){},function(){})};return(_o.constructor={})[n3]=_a,!(_o.then(function(){})instanceof _a)||!_r&&yV&&!i3}),RV=WM||!mV(function(_n){aI.all(_n).catch(function(){})}),s3=function(_n){var _r;return!(!hV(_n)||!HM(_r=_n.then))&&_r},L2=function(_n,_r){var _o,_a,_u,_p=_r.value,_f=_r.state==1,n_=_f?_n.ok:_n.fail,r_=_n.resolve,o_=_n.reject,s_=_n.domain;try{n_?(_f||(_r.rejection===2&&CV(_r),_r.rejection=1),n_===!0?_o=_p:(s_&&s_.enter(),_o=n_(_p),s_&&(s_.exit(),_u=!0)),_o===_n.promise?o_(r3("Promise-chain cycle")):(_a=s3(_o))?cO(_a,_o,r_,o_):r_(_o)):o_(_p)}catch(u_){s_&&!_u&&s_.exit(),o_(u_)}},M2=function(_n,_r){_n.notified||(_n.notified=!0,C2(function(){for(var _o,_a=_n.reactions;_o=_a.get();)L2(_o,_n);_n.notified=!1,_r&&!_n.rejection&&IV(_n)}))},a3=function(_n,_r,_o){var _a,_u;TV?((_a=k2.createEvent("Event")).promise=_r,_a.reason=_o,_a.initEvent(_n,!1,!0),xI.dispatchEvent(_a)):_a={promise:_r,reason:_o},!i3&&(_u=xI["on"+_n])?_u(_a):_n===o3&&Z$("Unhandled promise rejection",_o)},IV=function(_n){cO(X$,xI,function(){var _r,_o=_n.facade,_a=_n.value;if(c3(_n)&&(_r=O2(function(){GM?x2.emit("unhandledRejection",_a,_o):a3(o3,_o,_a)}),_n.rejection=GM||c3(_n)?2:1,_r.error))throw _r.value})},c3=function(_n){return _n.rejection!==1&&!_n.parent},CV=function(_n){cO(X$,xI,function(){var _r=_n.facade;GM?x2.emit("rejectionHandled",_r):a3("rejectionhandled",_r,_n.value)})},LI=function(_n,_r,_o){return function(_a){_n(_r,_a,_o)}},V1=function(_n,_r,_o){_n.done||(_n.done=!0,_o&&(_n=_o),_n.value=_r,_n.state=2,M2(_n,!0))},D2=function(_n,_r,_o){if(!_n.done){_n.done=!0,_o&&(_n=_o);try{if(_n.facade===_r)throw r3("Promise can't be resolved itself");var _a=s3(_r);_a?C2(function(){var _u={done:!1};try{cO(_a,_r,LI(D2,_u,_n),LI(V1,_u,_n))}catch(_p){V1(_u,_p,_n)}}):(_n.value=_r,_n.state=1,M2(_n,!1))}catch(_u){V1({done:!1},_u,_n)}}};WM&&(qM=(aI=function(_n){pV(this,qM),I2(_n),cO(w2,this);var _r=rL(this);try{_n(LI(D2,_r),LI(V1,_r))}catch(_o){V1(_r,_o)}}).prototype,(w2=function(_n){EV(this,{type:sI,done:!1,notified:!1,parent:!1,reactions:new gV,rejection:!1,state:0,value:void 0})}).prototype=uV(qM,{then:function(_n,_r){var _o=bV(this),_a=B1(_V(this,aI));return _o.parent=!0,_a.ok=!HM(_n)||_n,_a.fail=HM(_r)&&_r,_a.domain=GM?x2.domain:void 0,_o.state==0?_o.reactions.add(_a):C2(function(){L2(_a,_o)}),_a.promise},catch:function(_n){return this.then(void 0,_n)}}),BM=function(){var _n=new w2,_r=rL(_n);this.promise=_n,this.resolve=LI(D2,_r),this.reject=LI(V1,_r)},e3.f=B1=function(_n){return _n===aI||_n===T2?new BM(_n):wV(_n)}),VM({global:!0,wrap:!0,forced:WM},{Promise:aI}),lV(aI,sI,!1,!0),dV(sI),T2=cV(sI),VM({target:sI,stat:!0,forced:WM},{reject:function(_n){var _r=B1(this);return cO(_r.reject,void 0,_n),_r.promise}}),VM({target:sI,stat:!0,forced:!0},{resolve:function(_n){return A2(this===T2?aI:this,_n)}}),VM({target:sI,stat:!0,forced:RV},{all:function(_n){var _r=this,_o=B1(_r),_a=_o.resolve,_u=_o.reject,_p=O2(function(){var _f=I2(_r.resolve),n_=[],r_=0,o_=1;Q$(_n,function(s_){var u_=r_++,g_=!1;o_++,cO(_f,_r,s_).then(function(w_){g_||(g_=!0,n_[u_]=w_,--o_||_a(n_))},_u)}),--o_||_a(n_)});return _p.error&&_u(_p.value),_o.promise},race:function(_n){var _r=this,_o=B1(_r),_a=_o.reject,_u=O2(function(){var _p=I2(_r.resolve);Q$(_n,function(_f){cO(_p,_r,_f).then(_o.resolve,_a)})});return _u.error&&_a(_u.value),_o.promise}});var AV=W_,OV=rR,NV=Y1,kV=YM,xV=nI;v0({target:"Promise",stat:!0},{allSettled:function(_n){var _r=this,_o=NV.f(_r),_a=_o.resolve,_u=_o.reject,_p=kV(function(){var _f=OV(_r.resolve),n_=[],r_=0,o_=1;xV(_n,function(s_){var u_=r_++,g_=!1;o_++,AV(_f,_r,s_).then(function(w_){g_||(g_=!0,n_[u_]={status:"fulfilled",value:w_},--o_||_a(n_))},function(w_){g_||(g_=!0,n_[u_]={status:"rejected",reason:w_},--o_||_a(n_))})}),--o_||_a(n_)});return _p.error&&_u(_p.value),_o.promise}});var LV=rR,MV=K0,DV=W_,PV=Y1,zM=YM,jV=nI,P2="No one promise resolved";v0({target:"Promise",stat:!0},{any:function(_n){var _r=this,_o=MV("AggregateError"),_a=PV.f(_r),_u=_a.resolve,_p=_a.reject,_f=zM(function(){var n_=LV(_r.resolve),r_=[],o_=0,s_=1,u_=!1;jV(_n,function(g_){var w_=o_++,D_=!1;s_++,DV(n_,_r,g_).then(function(M_){D_||u_||(u_=!0,_u(M_))},function(M_){D_||u_||(D_=!0,r_[w_]=M_,--s_||_p(new _o(r_,P2)))})}),--s_||_p(new _o(r_,P2))});return _f.error&&_p(_f.value),_a.promise}});var j2=i2,U2=K0,u3=S_,l3=u2,$2=S2;v0({target:"Promise",proto:!0,real:!0,forced:!!j2&&Wt(function(){j2.prototype.finally.call({then:function(){}},function(){})})},{finally:function(_n){var _r=l3(this,U2("Promise")),_o=u3(_n);return this.then(_o?function(_a){return $2(_r,_n()).then(function(){return _a})}:_n,_o?function(_a){return $2(_r,_n()).then(function(){throw _a})}:_n)}});var KM=e_,UV=QR,$V=YO,FV=M0,JM=KM("".charAt),iL=KM("".charCodeAt),YV=KM("".slice),d3=function(_n){return function(_r,_o){var _a,_u,_p=$V(FV(_r)),_f=UV(_o),n_=_p.length;return _f<0||_f>=n_?_n?"":void 0:(_a=iL(_p,_f))<55296||_a>56319||_f+1===n_||(_u=iL(_p,_f+1))<56320||_u>57343?_n?JM(_p,_f):_a:_n?YV(_p,_f,_f+2):_u-56320+(_a-55296<<10)+65536}},F2={codeAt:d3(!1),charAt:d3(!0)}.charAt,h3=YO,p3=SM,BV=E$,f3="String Iterator",VV=p3.set,HV=p3.getterFor(f3);BV(String,"String",function(_n){VV(this,{type:f3,string:h3(_n),index:0})},function(){var _n,_r=HV(this),_o=_r.string,_a=_r.index;return _a>=_o.length?{value:void 0,done:!0}:(_n=F2(_o,_a),_r.index+=_n.length,{value:_n,done:!1})});var GV=$E.Promise,qV={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},WV=c_,zV=_A,KV=JR,m3=x1,_3=xS("toStringTag");for(var aR in qV){var g3=WV[aR],Y2=g3&&g3.prototype;Y2&&zV(Y2)!==_3&&KV(Y2,_3,aR),m3[aR]=m3.Array}var uO=GV,uE=uO;const v3=b1;function DT(_n,_r){const _o=_n&&_n.navigator;if(!_o.mediaDevices)return;const _a=function(_f){if(typeof _f!="object"||_f.mandatory||_f.optional)return _f;const n_={};return Object.keys(_f).forEach(r_=>{if(r_==="require"||r_==="advanced"||r_==="mediaSource")return;const o_=typeof _f[r_]=="object"?_f[r_]:{ideal:_f[r_]};o_.exact!==void 0&&typeof o_.exact=="number"&&(o_.min=o_.max=o_.exact);const s_=function(u_,g_){return u_?u_+g_.charAt(0).toUpperCase()+g_.slice(1):g_==="deviceId"?"sourceId":g_};if(o_.ideal!==void 0){n_.optional=n_.optional||[];let u_={};typeof o_.ideal=="number"?(u_[s_("min",r_)]=o_.ideal,n_.optional.push(u_),u_={},u_[s_("max",r_)]=o_.ideal,n_.optional.push(u_)):(u_[s_("",r_)]=o_.ideal,n_.optional.push(u_))}o_.exact!==void 0&&typeof o_.exact!="number"?(n_.mandatory=n_.mandatory||{},n_.mandatory[s_("",r_)]=o_.exact):["min","max"].forEach(u_=>{o_[u_]!==void 0&&(n_.mandatory=n_.mandatory||{},n_.mandatory[s_(u_,r_)]=o_[u_])})}),_f.advanced&&(n_.optional=(n_.optional||[]).concat(_f.advanced)),n_},_u=function(_f,n_){if(_r.version>=61)return n_(_f);if((_f=JSON.parse(JSON.stringify(_f)))&&typeof _f.audio=="object"){const r_=function(o_,s_,u_){s_ in o_&&!(u_ in o_)&&(o_[u_]=o_[s_],delete o_[s_])};r_((_f=JSON.parse(JSON.stringify(_f))).audio,"autoGainControl","googAutoGainControl"),r_(_f.audio,"noiseSuppression","googNoiseSuppression"),_f.audio=_a(_f.audio)}if(_f&&typeof _f.video=="object"){let r_=_f.video.facingMode;r_=r_&&(typeof r_=="object"?r_:{ideal:r_});const o_=_r.version<66;if(r_&&(r_.exact==="user"||r_.exact==="environment"||r_.ideal==="user"||r_.ideal==="environment")&&(!_o.mediaDevices.getSupportedConstraints||!_o.mediaDevices.getSupportedConstraints().facingMode||o_)){let s_;if(delete _f.video.facingMode,r_.exact==="environment"||r_.ideal==="environment"?s_=["back","rear"]:r_.exact!=="user"&&r_.ideal!=="user"||(s_=["front"]),s_)return _o.mediaDevices.enumerateDevices().then(u_=>{let g_=(u_=u_.filter(w_=>w_.kind==="videoinput")).find(w_=>s_.some(D_=>w_.label.toLowerCase().includes(D_)));return!g_&&u_.length&&s_.includes("back")&&(g_=u_[u_.length-1]),g_&&(_f.video.deviceId=r_.exact?{exact:g_.deviceId}:{ideal:g_.deviceId}),_f.video=_a(_f.video),v3("chrome: "+JSON.stringify(_f)),n_(_f)})}_f.video=_a(_f.video)}return v3("chrome: "+JSON.stringify(_f)),n_(_f)},_p=function(_f){return _r.version>=64?_f:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[_f.name]||_f.name,message:_f.message,constraint:_f.constraint||_f.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(_o.getUserMedia=function(_f,n_,r_){_u(_f,o_=>{_o.webkitGetUserMedia(o_,n_,s_=>{r_&&r_(_p(s_))})})}.bind(_o),_o.mediaDevices.getUserMedia){const _f=_o.mediaDevices.getUserMedia.bind(_o.mediaDevices);_o.mediaDevices.getUserMedia=function(n_){return _u(n_,r_=>_f(r_).then(o_=>{if(r_.audio&&!o_.getAudioTracks().length||r_.video&&!o_.getVideoTracks().length)throw o_.getTracks().forEach(s_=>{s_.stop()}),new DOMException("","NotFoundError");return o_},o_=>uE.reject(_p(o_))))}}}function LS(_n){_n.MediaStream=_n.MediaStream||_n.webkitMediaStream}function y3(_n){if(typeof _n=="object"&&_n.RTCPeerConnection&&!("ontrack"in _n.RTCPeerConnection.prototype)){Object.defineProperty(_n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(_o){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=_o)},enumerable:!0,configurable:!0});const _r=_n.RTCPeerConnection.prototype.setRemoteDescription;_n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=_o=>{_o.stream.addEventListener("addtrack",_a=>{let _u;_u=_n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(_f=>_f.track&&_f.track.id===_a.track.id):{track:_a.track};const _p=new Event("track");_p.track=_a.track,_p.receiver=_u,_p.transceiver={receiver:_u},_p.streams=[_o.stream],this.dispatchEvent(_p)}),_o.stream.getTracks().forEach(_a=>{let _u;_u=_n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(_f=>_f.track&&_f.track.id===_a.id):{track:_a};const _p=new Event("track");_p.track=_a,_p.receiver=_u,_p.transceiver={receiver:_u},_p.streams=[_o.stream],this.dispatchEvent(_p)})},this.addEventListener("addstream",this._ontrackpoly)),_r.apply(this,arguments)}}else OT(_n,"track",_r=>(_r.transceiver||Object.defineProperty(_r,"transceiver",{value:{receiver:_r.receiver}}),_r))}function MI(_n){if(typeof _n=="object"&&_n.RTCPeerConnection&&!("getSenders"in _n.RTCPeerConnection.prototype)&&"createDTMFSender"in _n.RTCPeerConnection.prototype){const _r=function(_u,_p){return{track:_p,get dtmf(){return this._dtmf===void 0&&(_p.kind==="audio"?this._dtmf=_u.createDTMFSender(_p):this._dtmf=null),this._dtmf},_pc:_u}};if(!_n.RTCPeerConnection.prototype.getSenders){_n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const _u=_n.RTCPeerConnection.prototype.addTrack;_n.RTCPeerConnection.prototype.addTrack=function(_f,n_){let r_=_u.apply(this,arguments);return r_||(r_=_r(this,_f),this._senders.push(r_)),r_};const _p=_n.RTCPeerConnection.prototype.removeTrack;_n.RTCPeerConnection.prototype.removeTrack=function(_f){_p.apply(this,arguments);const n_=this._senders.indexOf(_f);n_!==-1&&this._senders.splice(n_,1)}}const _o=_n.RTCPeerConnection.prototype.addStream;_n.RTCPeerConnection.prototype.addStream=function(_u){this._senders=this._senders||[],_o.apply(this,[_u]),_u.getTracks().forEach(_p=>{this._senders.push(_r(this,_p))})};const _a=_n.RTCPeerConnection.prototype.removeStream;_n.RTCPeerConnection.prototype.removeStream=function(_u){this._senders=this._senders||[],_a.apply(this,[_u]),_u.getTracks().forEach(_p=>{const _f=this._senders.find(n_=>n_.track===_p);_f&&this._senders.splice(this._senders.indexOf(_f),1)})}}else if(typeof _n=="object"&&_n.RTCPeerConnection&&"getSenders"in _n.RTCPeerConnection.prototype&&"createDTMFSender"in _n.RTCPeerConnection.prototype&&_n.RTCRtpSender&&!("dtmf"in _n.RTCRtpSender.prototype)){const _r=_n.RTCPeerConnection.prototype.getSenders;_n.RTCPeerConnection.prototype.getSenders=function(){const _o=_r.apply(this,[]);return _o.forEach(_a=>_a._pc=this),_o},Object.defineProperty(_n.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function E3(_n){if(!_n.RTCPeerConnection)return;const _r=_n.RTCPeerConnection.prototype.getStats;_n.RTCPeerConnection.prototype.getStats=function(){const[_o,_a,_u]=arguments;if(arguments.length>0&&typeof _o=="function")return _r.apply(this,arguments);if(_r.length===0&&(arguments.length===0||typeof _o!="function"))return _r.apply(this,[]);const _p=function(n_){const r_={};return n_.result().forEach(o_=>{const s_={id:o_.id,timestamp:o_.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[o_.type]||o_.type};o_.names().forEach(u_=>{s_[u_]=o_.stat(u_)}),r_[s_.id]=s_}),r_},_f=function(n_){return new Map(Object.keys(n_).map(r_=>[r_,n_[r_]]))};if(arguments.length>=2){const n_=function(r_){_a(_f(_p(r_)))};return _r.apply(this,[n_,_o])}return new uE((n_,r_)=>{_r.apply(this,[function(o_){n_(_f(_p(o_)))},r_])}).then(_a,_u)}}function b3(_n){if(!(typeof _n=="object"&&_n.RTCPeerConnection&&_n.RTCRtpSender&&_n.RTCRtpReceiver))return;if(!("getStats"in _n.RTCRtpSender.prototype)){const _o=_n.RTCPeerConnection.prototype.getSenders;_o&&(_n.RTCPeerConnection.prototype.getSenders=function(){const _u=_o.apply(this,[]);return _u.forEach(_p=>_p._pc=this),_u});const _a=_n.RTCPeerConnection.prototype.addTrack;_a&&(_n.RTCPeerConnection.prototype.addTrack=function(){const _u=_a.apply(this,arguments);return _u._pc=this,_u}),_n.RTCRtpSender.prototype.getStats=function(){const _u=this;return this._pc.getStats().then(_p=>uM(_p,_u.track,!0))}}if(!("getStats"in _n.RTCRtpReceiver.prototype)){const _o=_n.RTCPeerConnection.prototype.getReceivers;_o&&(_n.RTCPeerConnection.prototype.getReceivers=function(){const _a=_o.apply(this,[]);return _a.forEach(_u=>_u._pc=this),_a}),OT(_n,"track",_a=>(_a.receiver._pc=_a.srcElement,_a)),_n.RTCRtpReceiver.prototype.getStats=function(){const _a=this;return this._pc.getStats().then(_u=>uM(_u,_a.track,!1))}}if(!("getStats"in _n.RTCRtpSender.prototype)||!("getStats"in _n.RTCRtpReceiver.prototype))return;const _r=_n.RTCPeerConnection.prototype.getStats;_n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof _n.MediaStreamTrack){const _o=arguments[0];let _a,_u,_p;return this.getSenders().forEach(_f=>{_f.track===_o&&(_a?_p=!0:_a=_f)}),this.getReceivers().forEach(_f=>(_f.track===_o&&(_u?_p=!0:_u=_f),_f.track===_o)),_p||_a&&_u?uE.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):_a?_a.getStats():_u?_u.getStats():uE.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return _r.apply(this,arguments)}}function S3(_n){_n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(_p=>this._shimmedLocalStreams[_p][0])};const _r=_n.RTCPeerConnection.prototype.addTrack;_n.RTCPeerConnection.prototype.addTrack=function(_p,_f){if(!_f)return _r.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const n_=_r.apply(this,arguments);return this._shimmedLocalStreams[_f.id]?this._shimmedLocalStreams[_f.id].indexOf(n_)===-1&&this._shimmedLocalStreams[_f.id].push(n_):this._shimmedLocalStreams[_f.id]=[_f,n_],n_};const _o=_n.RTCPeerConnection.prototype.addStream;_n.RTCPeerConnection.prototype.addStream=function(_p){this._shimmedLocalStreams=this._shimmedLocalStreams||{},_p.getTracks().forEach(r_=>{if(this.getSenders().find(o_=>o_.track===r_))throw new DOMException("Track already exists.","InvalidAccessError")});const _f=this.getSenders();_o.apply(this,arguments);const n_=this.getSenders().filter(r_=>_f.indexOf(r_)===-1);this._shimmedLocalStreams[_p.id]=[_p].concat(n_)};const _a=_n.RTCPeerConnection.prototype.removeStream;_n.RTCPeerConnection.prototype.removeStream=function(_p){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[_p.id],_a.apply(this,arguments)};const _u=_n.RTCPeerConnection.prototype.removeTrack;_n.RTCPeerConnection.prototype.removeTrack=function(_p){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},_p&&Object.keys(this._shimmedLocalStreams).forEach(_f=>{const n_=this._shimmedLocalStreams[_f].indexOf(_p);n_!==-1&&this._shimmedLocalStreams[_f].splice(n_,1),this._shimmedLocalStreams[_f].length===1&&delete this._shimmedLocalStreams[_f]}),_u.apply(this,arguments)}}function w3(_n,_r){if(!_n.RTCPeerConnection)return;if(_n.RTCPeerConnection.prototype.addTrack&&_r.version>=65)return S3(_n);const _o=_n.RTCPeerConnection.prototype.getLocalStreams;_n.RTCPeerConnection.prototype.getLocalStreams=function(){const o_=_o.apply(this);return this._reverseStreams=this._reverseStreams||{},o_.map(s_=>this._reverseStreams[s_.id])};const _a=_n.RTCPeerConnection.prototype.addStream;_n.RTCPeerConnection.prototype.addStream=function(o_){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o_.getTracks().forEach(s_=>{if(this.getSenders().find(u_=>u_.track===s_))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[o_.id]){const s_=new _n.MediaStream(o_.getTracks());this._streams[o_.id]=s_,this._reverseStreams[s_.id]=o_,o_=s_}_a.apply(this,[o_])};const _u=_n.RTCPeerConnection.prototype.removeStream;function _p(o_,s_){let u_=s_.sdp;return Object.keys(o_._reverseStreams||[]).forEach(g_=>{const w_=o_._reverseStreams[g_],D_=o_._streams[w_.id];u_=u_.replace(new RegExp(D_.id,"g"),w_.id)}),new RTCSessionDescription({type:s_.type,sdp:u_})}function _f(o_,s_){let u_=s_.sdp;return Object.keys(o_._reverseStreams||[]).forEach(g_=>{const w_=o_._reverseStreams[g_],D_=o_._streams[w_.id];u_=u_.replace(new RegExp(w_.id,"g"),D_.id)}),new RTCSessionDescription({type:s_.type,sdp:u_})}_n.RTCPeerConnection.prototype.removeStream=function(o_){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},_u.apply(this,[this._streams[o_.id]||o_]),delete this._reverseStreams[this._streams[o_.id]?this._streams[o_.id].id:o_.id],delete this._streams[o_.id]},_n.RTCPeerConnection.prototype.addTrack=function(o_,s_){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const u_=[].slice.call(arguments,1);if(u_.length!==1||!u_[0].getTracks().find(D_=>D_===o_))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(D_=>D_.track===o_))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const w_=this._streams[s_.id];if(w_)w_.addTrack(o_),uE.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const D_=new _n.MediaStream([o_]);this._streams[s_.id]=D_,this._reverseStreams[D_.id]=s_,this.addStream(D_)}return this.getSenders().find(D_=>D_.track===o_)},["createOffer","createAnswer"].forEach(function(o_){const s_=_n.RTCPeerConnection.prototype[o_],u_={[o_](){const g_=arguments;return arguments.length&&typeof arguments[0]=="function"?s_.apply(this,[w_=>{const D_=_p(this,w_);g_[0].apply(null,[D_])},w_=>{g_[1]&&g_[1].apply(null,w_)},arguments[2]]):s_.apply(this,arguments).then(w_=>_p(this,w_))}};_n.RTCPeerConnection.prototype[o_]=u_[o_]});const n_=_n.RTCPeerConnection.prototype.setLocalDescription;_n.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=_f(this,arguments[0]),n_.apply(this,arguments)):n_.apply(this,arguments)};const r_=Object.getOwnPropertyDescriptor(_n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(_n.RTCPeerConnection.prototype,"localDescription",{get(){const o_=r_.get.apply(this);return o_.type===""?o_:_p(this,o_)}}),_n.RTCPeerConnection.prototype.removeTrack=function(o_){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!o_._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(o_._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let s_;this._streams=this._streams||{},Object.keys(this._streams).forEach(u_=>{this._streams[u_].getTracks().find(g_=>o_.track===g_)&&(s_=this._streams[u_])}),s_&&(s_.getTracks().length===1?this.removeStream(this._reverseStreams[s_.id]):s_.removeTrack(o_.track),this.dispatchEvent(new Event("negotiationneeded")))}}function B2(_n,_r){!_n.RTCPeerConnection&&_n.webkitRTCPeerConnection&&(_n.RTCPeerConnection=_n.webkitRTCPeerConnection),_n.RTCPeerConnection&&_r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(_o){const _a=_n.RTCPeerConnection.prototype[_o],_u={[_o](){return arguments[0]=new(_o==="addIceCandidate"?_n.RTCIceCandidate:_n.RTCSessionDescription)(arguments[0]),_a.apply(this,arguments)}};_n.RTCPeerConnection.prototype[_o]=_u[_o]})}function QM(_n,_r){OT(_n,"negotiationneeded",_o=>{const _a=_o.target;if(!(_r.version<72||_a.getConfiguration&&_a.getConfiguration().sdpSemantics==="plan-b")||_a.signalingState==="stable")return _o})}var T3=Object.freeze({__proto__:null,shimMediaStream:LS,shimOnTrack:y3,shimGetSendersWithDtmf:MI,shimGetStats:E3,shimSenderReceiverGetStats:b3,shimAddTrackRemoveTrackWithNative:S3,shimAddTrackRemoveTrack:w3,shimPeerConnection:B2,fixNegotiationNeeded:QM,shimGetUserMedia:DT,shimGetDisplayMedia:function(_n,_r){_n.navigator.mediaDevices&&"getDisplayMedia"in _n.navigator.mediaDevices||_n.navigator.mediaDevices&&(typeof _r=="function"?_n.navigator.mediaDevices.getDisplayMedia=function(_o){return _r(_o).then(_a=>{const _u=_o.video&&_o.video.width,_p=_o.video&&_o.video.height,_f=_o.video&&_o.video.frameRate;return _o.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:_a,maxFrameRate:_f||3}},_u&&(_o.video.mandatory.maxWidth=_u),_p&&(_o.video.mandatory.maxHeight=_p),_n.navigator.mediaDevices.getUserMedia(_o)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}});function cI(_n,_r){const _o=_n&&_n.navigator,_a=_n&&_n.MediaStreamTrack;if(_o.getUserMedia=function(_u,_p,_f){S1("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),_o.mediaDevices.getUserMedia(_u).then(_p,_f)},!(_r.version>55&&"autoGainControl"in _o.mediaDevices.getSupportedConstraints())){const _u=function(_f,n_,r_){n_ in _f&&!(r_ in _f)&&(_f[r_]=_f[n_],delete _f[n_])},_p=_o.mediaDevices.getUserMedia.bind(_o.mediaDevices);if(_o.mediaDevices.getUserMedia=function(_f){return typeof _f=="object"&&typeof _f.audio=="object"&&(_f=JSON.parse(JSON.stringify(_f)),_u(_f.audio,"autoGainControl","mozAutoGainControl"),_u(_f.audio,"noiseSuppression","mozNoiseSuppression")),_p(_f)},_a&&_a.prototype.getSettings){const _f=_a.prototype.getSettings;_a.prototype.getSettings=function(){const n_=_f.apply(this,arguments);return _u(n_,"mozAutoGainControl","autoGainControl"),_u(n_,"mozNoiseSuppression","noiseSuppression"),n_}}if(_a&&_a.prototype.applyConstraints){const _f=_a.prototype.applyConstraints;_a.prototype.applyConstraints=function(n_){return this.kind==="audio"&&typeof n_=="object"&&(n_=JSON.parse(JSON.stringify(n_)),_u(n_,"autoGainControl","mozAutoGainControl"),_u(n_,"noiseSuppression","mozNoiseSuppression")),_f.apply(this,[n_])}}}}function V2(_n){typeof _n=="object"&&_n.RTCTrackEvent&&"receiver"in _n.RTCTrackEvent.prototype&&!("transceiver"in _n.RTCTrackEvent.prototype)&&Object.defineProperty(_n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function H1(_n,_r){if(typeof _n!="object"||!_n.RTCPeerConnection&&!_n.mozRTCPeerConnection)return;!_n.RTCPeerConnection&&_n.mozRTCPeerConnection&&(_n.RTCPeerConnection=_n.mozRTCPeerConnection),_r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(_u){const _p=_n.RTCPeerConnection.prototype[_u],_f={[_u](){return arguments[0]=new(_u==="addIceCandidate"?_n.RTCIceCandidate:_n.RTCSessionDescription)(arguments[0]),_p.apply(this,arguments)}};_n.RTCPeerConnection.prototype[_u]=_f[_u]});const _o={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},_a=_n.RTCPeerConnection.prototype.getStats;_n.RTCPeerConnection.prototype.getStats=function(){const[_u,_p,_f]=arguments;return _a.apply(this,[_u||null]).then(n_=>{if(_r.version<53&&!_p)try{n_.forEach(r_=>{r_.type=_o[r_.type]||r_.type})}catch(r_){if(r_.name!=="TypeError")throw r_;n_.forEach((o_,s_)=>{n_.set(s_,Object.assign({},o_,{type:_o[o_.type]||o_.type}))})}return n_}).then(_p,_f)}}function SS(_n){if(typeof _n!="object"||!_n.RTCPeerConnection||!_n.RTCRtpSender||_n.RTCRtpSender&&"getStats"in _n.RTCRtpSender.prototype)return;const _r=_n.RTCPeerConnection.prototype.getSenders;_r&&(_n.RTCPeerConnection.prototype.getSenders=function(){const _a=_r.apply(this,[]);return _a.forEach(_u=>_u._pc=this),_a});const _o=_n.RTCPeerConnection.prototype.addTrack;_o&&(_n.RTCPeerConnection.prototype.addTrack=function(){const _a=_o.apply(this,arguments);return _a._pc=this,_a}),_n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):uE.resolve(new Map)}}function AS(_n){if(typeof _n!="object"||!_n.RTCPeerConnection||!_n.RTCRtpSender||_n.RTCRtpSender&&"getStats"in _n.RTCRtpReceiver.prototype)return;const _r=_n.RTCPeerConnection.prototype.getReceivers;_r&&(_n.RTCPeerConnection.prototype.getReceivers=function(){const _o=_r.apply(this,[]);return _o.forEach(_a=>_a._pc=this),_o}),OT(_n,"track",_o=>(_o.receiver._pc=_o.srcElement,_o)),_n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function H2(_n){_n.RTCPeerConnection&&!("removeStream"in _n.RTCPeerConnection.prototype)&&(_n.RTCPeerConnection.prototype.removeStream=function(_r){S1("removeStream","removeTrack"),this.getSenders().forEach(_o=>{_o.track&&_r.getTracks().includes(_o.track)&&this.removeTrack(_o)})})}function R3(_n){_n.DataChannel&&!_n.RTCDataChannel&&(_n.RTCDataChannel=_n.DataChannel)}function I3(_n){if(typeof _n!="object"||!_n.RTCPeerConnection)return;const _r=_n.RTCPeerConnection.prototype.addTransceiver;_r&&(_n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let _o=arguments[1]&&arguments[1].sendEncodings;_o===void 0&&(_o=[]),_o=[..._o];const _a=_o.length>0;_a&&_o.forEach(_p=>{if("rid"in _p&&!/^[a-z0-9]{0,16}$/i.test(_p.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in _p&&!(parseFloat(_p.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in _p&&!(parseFloat(_p.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const _u=_r.apply(this,arguments);if(_a){const{sender:_p}=_u,_f=_p.getParameters();(!("encodings"in _f)||_f.encodings.length===1&&Object.keys(_f.encodings[0]).length===0)&&(_f.encodings=_o,_p.sendEncodings=_o,this.setParametersPromises.push(_p.setParameters(_f).then(()=>{delete _p.sendEncodings}).catch(()=>{delete _p.sendEncodings})))}return _u})}function C3(_n){if(typeof _n!="object"||!_n.RTCRtpSender)return;const _r=_n.RTCRtpSender.prototype.getParameters;_r&&(_n.RTCRtpSender.prototype.getParameters=function(){const _o=_r.apply(this,arguments);return"encodings"in _o||(_o.encodings=[].concat(this.sendEncodings||[{}])),_o})}function A3(_n){if(typeof _n!="object"||!_n.RTCPeerConnection)return;const _r=_n.RTCPeerConnection.prototype.createOffer;_n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?uE.all(this.setParametersPromises).then(()=>_r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):_r.apply(this,arguments)}}function O3(_n){if(typeof _n!="object"||!_n.RTCPeerConnection)return;const _r=_n.RTCPeerConnection.prototype.createAnswer;_n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?uE.all(this.setParametersPromises).then(()=>_r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):_r.apply(this,arguments)}}var N3=Object.freeze({__proto__:null,shimOnTrack:V2,shimPeerConnection:H1,shimSenderGetStats:SS,shimReceiverGetStats:AS,shimRemoveStream:H2,shimRTCDataChannel:R3,shimAddTransceiver:I3,shimGetParameters:C3,shimCreateOffer:A3,shimCreateAnswer:O3,shimGetUserMedia:cI,shimGetDisplayMedia:function(_n,_r){_n.navigator.mediaDevices&&"getDisplayMedia"in _n.navigator.mediaDevices||_n.navigator.mediaDevices&&(_n.navigator.mediaDevices.getDisplayMedia=function(_o){if(!_o||!_o.video){const _a=new DOMException("getDisplayMedia without video constraints is undefined");return _a.name="NotFoundError",_a.code=8,uE.reject(_a)}return _o.video===!0?_o.video={mediaSource:_r}:_o.video.mediaSource=_r,_n.navigator.mediaDevices.getUserMedia(_o)})}});function G2(_n){if(typeof _n=="object"&&_n.RTCPeerConnection){if("getLocalStreams"in _n.RTCPeerConnection.prototype||(_n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in _n.RTCPeerConnection.prototype)){const _r=_n.RTCPeerConnection.prototype.addTrack;_n.RTCPeerConnection.prototype.addStream=function(_o){this._localStreams||(this._localStreams=[]),this._localStreams.includes(_o)||this._localStreams.push(_o),_o.getAudioTracks().forEach(_a=>_r.call(this,_a,_o)),_o.getVideoTracks().forEach(_a=>_r.call(this,_a,_o))},_n.RTCPeerConnection.prototype.addTrack=function(_o){for(var _a=arguments.length,_u=new Array(_a>1?_a-1:0),_p=1;_p<_a;_p++)_u[_p-1]=arguments[_p];return _u&&_u.forEach(_f=>{this._localStreams?this._localStreams.includes(_f)||this._localStreams.push(_f):this._localStreams=[_f]}),_r.apply(this,arguments)}}"removeStream"in _n.RTCPeerConnection.prototype||(_n.RTCPeerConnection.prototype.removeStream=function(_r){this._localStreams||(this._localStreams=[]);const _o=this._localStreams.indexOf(_r);if(_o===-1)return;this._localStreams.splice(_o,1);const _a=_r.getTracks();this.getSenders().forEach(_u=>{_a.includes(_u.track)&&this.removeTrack(_u)})})}}function G1(_n){if(typeof _n=="object"&&_n.RTCPeerConnection&&("getRemoteStreams"in _n.RTCPeerConnection.prototype||(_n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in _n.RTCPeerConnection.prototype))){Object.defineProperty(_n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(_o){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=_o),this.addEventListener("track",this._onaddstreampoly=_a=>{_a.streams.forEach(_u=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(_u))return;this._remoteStreams.push(_u);const _p=new Event("addstream");_p.stream=_u,this.dispatchEvent(_p)})})}});const _r=_n.RTCPeerConnection.prototype.setRemoteDescription;_n.RTCPeerConnection.prototype.setRemoteDescription=function(){const _o=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(_a){_a.streams.forEach(_u=>{if(_o._remoteStreams||(_o._remoteStreams=[]),_o._remoteStreams.indexOf(_u)>=0)return;_o._remoteStreams.push(_u);const _p=new Event("addstream");_p.stream=_u,_o.dispatchEvent(_p)})}),_r.apply(_o,arguments)}}}function XM(_n){if(typeof _n!="object"||!_n.RTCPeerConnection)return;const _r=_n.RTCPeerConnection.prototype,_o=_r.createOffer,_a=_r.createAnswer,_u=_r.setLocalDescription,_p=_r.setRemoteDescription,_f=_r.addIceCandidate;_r.createOffer=function(r_,o_){const s_=arguments.length>=2?arguments[2]:arguments[0],u_=_o.apply(this,[s_]);return o_?(u_.then(r_,o_),uE.resolve()):u_},_r.createAnswer=function(r_,o_){const s_=arguments.length>=2?arguments[2]:arguments[0],u_=_a.apply(this,[s_]);return o_?(u_.then(r_,o_),uE.resolve()):u_};let n_=function(r_,o_,s_){const u_=_u.apply(this,[r_]);return s_?(u_.then(o_,s_),uE.resolve()):u_};_r.setLocalDescription=n_,n_=function(r_,o_,s_){const u_=_p.apply(this,[r_]);return s_?(u_.then(o_,s_),uE.resolve()):u_},_r.setRemoteDescription=n_,n_=function(r_,o_,s_){const u_=_f.apply(this,[r_]);return s_?(u_.then(o_,s_),uE.resolve()):u_},_r.addIceCandidate=n_}function k3(_n){const _r=_n&&_n.navigator;if(_r.mediaDevices&&_r.mediaDevices.getUserMedia){const _o=_r.mediaDevices,_a=_o.getUserMedia.bind(_o);_r.mediaDevices.getUserMedia=_u=>_a(q2(_u))}!_r.getUserMedia&&_r.mediaDevices&&_r.mediaDevices.getUserMedia&&(_r.getUserMedia=function(_o,_a,_u){_r.mediaDevices.getUserMedia(_o).then(_a,_u)}.bind(_r))}function q2(_n){return _n&&_n.video!==void 0?Object.assign({},_n,{video:cM(_n.video)}):_n}function oL(_n){if(!_n.RTCPeerConnection)return;const _r=_n.RTCPeerConnection;_n.RTCPeerConnection=function(_o,_a){if(_o&&_o.iceServers){const _u=[];for(let _p=0;_p<_o.iceServers.length;_p++){let _f=_o.iceServers[_p];!_f.hasOwnProperty("urls")&&_f.hasOwnProperty("url")?(S1("RTCIceServer.url","RTCIceServer.urls"),_f=JSON.parse(JSON.stringify(_f)),_f.urls=_f.url,delete _f.url,_u.push(_f)):_u.push(_o.iceServers[_p])}_o.iceServers=_u}return new _r(_o,_a)},_n.RTCPeerConnection.prototype=_r.prototype,"generateCertificate"in _r&&Object.defineProperty(_n.RTCPeerConnection,"generateCertificate",{get:()=>_r.generateCertificate})}function VT(_n){typeof _n=="object"&&_n.RTCTrackEvent&&"receiver"in _n.RTCTrackEvent.prototype&&!("transceiver"in _n.RTCTrackEvent.prototype)&&Object.defineProperty(_n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function WO(_n){const _r=_n.RTCPeerConnection.prototype.createOffer;_n.RTCPeerConnection.prototype.createOffer=function(_o){if(_o){_o.offerToReceiveAudio!==void 0&&(_o.offerToReceiveAudio=!!_o.offerToReceiveAudio);const _a=this.getTransceivers().find(_p=>_p.receiver.track.kind==="audio");_o.offerToReceiveAudio===!1&&_a?_a.direction==="sendrecv"?_a.setDirection?_a.setDirection("sendonly"):_a.direction="sendonly":_a.direction==="recvonly"&&(_a.setDirection?_a.setDirection("inactive"):_a.direction="inactive"):_o.offerToReceiveAudio!==!0||_a||this.addTransceiver("audio",{direction:"recvonly"}),_o.offerToReceiveVideo!==void 0&&(_o.offerToReceiveVideo=!!_o.offerToReceiveVideo);const _u=this.getTransceivers().find(_p=>_p.receiver.track.kind==="video");_o.offerToReceiveVideo===!1&&_u?_u.direction==="sendrecv"?_u.setDirection?_u.setDirection("sendonly"):_u.direction="sendonly":_u.direction==="recvonly"&&(_u.setDirection?_u.setDirection("inactive"):_u.direction="inactive"):_o.offerToReceiveVideo!==!0||_u||this.addTransceiver("video",{direction:"recvonly"})}return _r.apply(this,arguments)}}function x3(_n){typeof _n!="object"||_n.AudioContext||(_n.AudioContext=_n.webkitAudioContext)}var L3=Object.freeze({__proto__:null,shimLocalStreamsAPI:G2,shimRemoteStreamsAPI:G1,shimCallbacksAPI:XM,shimGetUserMedia:k3,shimConstraints:q2,shimRTCIceServerUrls:oL,shimTrackEventTransceiver:VT,shimCreateOfferLegacy:WO,shimAudioContext:x3}),JV=`	
\v\f\r \u2028\u2029\uFEFF`,QV=M0,XV=YO,W2=e_("".replace),vR=`[	
\v\f\r \u2028\u2029\uFEFF]`,b0=RegExp("^"+vR+vR+"*"),M3=RegExp(vR+vR+"*$"),HT=function(_n){return function(_r){var _o=XV(QV(_r));return 1&_n&&(_o=W2(_o,b0,"")),2&_n&&(_o=W2(_o,M3,"")),_o}},D3={start:HT(1),end:HT(2),trim:HT(3)},ZV=KP.PROPER,Z0=Wt,P3=JV,j3=D3.trim;v0({target:"String",proto:!0,forced:function(_n){return Z0(function(){return!!P3[_n]()||""[_n]()!==""||ZV&&P3[_n].name!==_n})}("trim")},{trim:function(){return j3(this)}});var ZM=CS("String").trim,e4=t_,t4=ZM,z2=String.prototype,DI=function(_n){var _r=_n.trim;return typeof _n=="string"||_n===z2||e4(z2,_n)&&_r===z2.trim?t4:_r},K2={exports:{}};(function(_n){const _r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};_r.localCName=_r.generateIdentifier(),_r.splitLines=function(_o){return DI(_o).call(_o).split(`
`).map(_a=>DI(_a).call(_a))},_r.splitSections=function(_o){return _o.split(`
m=`).map((_a,_u)=>{var _p;return DI(_p=_u>0?"m="+_a:_a).call(_p)+`\r
`})},_r.getDescription=function(_o){const _a=_r.splitSections(_o);return _a&&_a[0]},_r.getMediaSections=function(_o){const _a=_r.splitSections(_o);return _a.shift(),_a},_r.matchPrefix=function(_o,_a){return _r.splitLines(_o).filter(_u=>_u.indexOf(_a)===0)},_r.parseCandidate=function(_o){let _a;_a=_o.indexOf("a=candidate:")===0?_o.substring(12).split(" "):_o.substring(10).split(" ");const _u={foundation:_a[0],component:{1:"rtp",2:"rtcp"}[_a[1]]||_a[1],protocol:_a[2].toLowerCase(),priority:parseInt(_a[3],10),ip:_a[4],address:_a[4],port:parseInt(_a[5],10),type:_a[7]};for(let _p=8;_p<_a.length;_p+=2)switch(_a[_p]){case"raddr":_u.relatedAddress=_a[_p+1];break;case"rport":_u.relatedPort=parseInt(_a[_p+1],10);break;case"tcptype":_u.tcpType=_a[_p+1];break;case"ufrag":_u.ufrag=_a[_p+1],_u.usernameFragment=_a[_p+1];break;default:_u[_a[_p]]===void 0&&(_u[_a[_p]]=_a[_p+1])}return _u},_r.writeCandidate=function(_o){const _a=[];_a.push(_o.foundation);const _u=_o.component;_u==="rtp"?_a.push(1):_u==="rtcp"?_a.push(2):_a.push(_u),_a.push(_o.protocol.toUpperCase()),_a.push(_o.priority),_a.push(_o.address||_o.ip),_a.push(_o.port);const _p=_o.type;return _a.push("typ"),_a.push(_p),_p!=="host"&&_o.relatedAddress&&_o.relatedPort&&(_a.push("raddr"),_a.push(_o.relatedAddress),_a.push("rport"),_a.push(_o.relatedPort)),_o.tcpType&&_o.protocol.toLowerCase()==="tcp"&&(_a.push("tcptype"),_a.push(_o.tcpType)),(_o.usernameFragment||_o.ufrag)&&(_a.push("ufrag"),_a.push(_o.usernameFragment||_o.ufrag)),"candidate:"+_a.join(" ")},_r.parseIceOptions=function(_o){return _o.substr(14).split(" ")},_r.parseRtpMap=function(_o){let _a=_o.substr(9).split(" ");const _u={payloadType:parseInt(_a.shift(),10)};return _a=_a[0].split("/"),_u.name=_a[0],_u.clockRate=parseInt(_a[1],10),_u.channels=_a.length===3?parseInt(_a[2],10):1,_u.numChannels=_u.channels,_u},_r.writeRtpMap=function(_o){let _a=_o.payloadType;_o.preferredPayloadType!==void 0&&(_a=_o.preferredPayloadType);const _u=_o.channels||_o.numChannels||1;return"a=rtpmap:"+_a+" "+_o.name+"/"+_o.clockRate+(_u!==1?"/"+_u:"")+`\r
`},_r.parseExtmap=function(_o){const _a=_o.substr(9).split(" ");return{id:parseInt(_a[0],10),direction:_a[0].indexOf("/")>0?_a[0].split("/")[1]:"sendrecv",uri:_a[1]}},_r.writeExtmap=function(_o){return"a=extmap:"+(_o.id||_o.preferredId)+(_o.direction&&_o.direction!=="sendrecv"?"/"+_o.direction:"")+" "+_o.uri+`\r
`},_r.parseFmtp=function(_o){const _a={};let _u;const _p=_o.substr(_o.indexOf(" ")+1).split(";");for(let r_=0;r_<_p.length;r_++){var _f,n_;_u=DI(_f=_p[r_]).call(_f).split("="),_a[DI(n_=_u[0]).call(n_)]=_u[1]}return _a},_r.writeFmtp=function(_o){let _a="",_u=_o.payloadType;if(_o.preferredPayloadType!==void 0&&(_u=_o.preferredPayloadType),_o.parameters&&Object.keys(_o.parameters).length){const _p=[];Object.keys(_o.parameters).forEach(_f=>{_o.parameters[_f]!==void 0?_p.push(_f+"="+_o.parameters[_f]):_p.push(_f)}),_a+="a=fmtp:"+_u+" "+_p.join(";")+`\r
`}return _a},_r.parseRtcpFb=function(_o){const _a=_o.substr(_o.indexOf(" ")+1).split(" ");return{type:_a.shift(),parameter:_a.join(" ")}},_r.writeRtcpFb=function(_o){let _a="",_u=_o.payloadType;return _o.preferredPayloadType!==void 0&&(_u=_o.preferredPayloadType),_o.rtcpFeedback&&_o.rtcpFeedback.length&&_o.rtcpFeedback.forEach(_p=>{_a+="a=rtcp-fb:"+_u+" "+_p.type+(_p.parameter&&_p.parameter.length?" "+_p.parameter:"")+`\r
`}),_a},_r.parseSsrcMedia=function(_o){const _a=_o.indexOf(" "),_u={ssrc:parseInt(_o.substr(7,_a-7),10)},_p=_o.indexOf(":",_a);return _p>-1?(_u.attribute=_o.substr(_a+1,_p-_a-1),_u.value=_o.substr(_p+1)):_u.attribute=_o.substr(_a+1),_u},_r.parseSsrcGroup=function(_o){const _a=_o.substr(13).split(" ");return{semantics:_a.shift(),ssrcs:_a.map(_u=>parseInt(_u,10))}},_r.getMid=function(_o){const _a=_r.matchPrefix(_o,"a=mid:")[0];if(_a)return _a.substr(6)},_r.parseFingerprint=function(_o){const _a=_o.substr(14).split(" ");return{algorithm:_a[0].toLowerCase(),value:_a[1].toUpperCase()}},_r.getDtlsParameters=function(_o,_a){return{role:"auto",fingerprints:_r.matchPrefix(_o+_a,"a=fingerprint:").map(_r.parseFingerprint)}},_r.writeDtlsParameters=function(_o,_a){let _u="a=setup:"+_a+`\r
`;return _o.fingerprints.forEach(_p=>{_u+="a=fingerprint:"+_p.algorithm+" "+_p.value+`\r
`}),_u},_r.parseCryptoLine=function(_o){const _a=_o.substr(9).split(" ");return{tag:parseInt(_a[0],10),cryptoSuite:_a[1],keyParams:_a[2],sessionParams:_a.slice(3)}},_r.writeCryptoLine=function(_o){return"a=crypto:"+_o.tag+" "+_o.cryptoSuite+" "+(typeof _o.keyParams=="object"?_r.writeCryptoKeyParams(_o.keyParams):_o.keyParams)+(_o.sessionParams?" "+_o.sessionParams.join(" "):"")+`\r
`},_r.parseCryptoKeyParams=function(_o){if(_o.indexOf("inline:")!==0)return null;const _a=_o.substr(7).split("|");return{keyMethod:"inline",keySalt:_a[0],lifeTime:_a[1],mkiValue:_a[2]?_a[2].split(":")[0]:void 0,mkiLength:_a[2]?_a[2].split(":")[1]:void 0}},_r.writeCryptoKeyParams=function(_o){return _o.keyMethod+":"+_o.keySalt+(_o.lifeTime?"|"+_o.lifeTime:"")+(_o.mkiValue&&_o.mkiLength?"|"+_o.mkiValue+":"+_o.mkiLength:"")},_r.getCryptoParameters=function(_o,_a){return _r.matchPrefix(_o+_a,"a=crypto:").map(_r.parseCryptoLine)},_r.getIceParameters=function(_o,_a){const _u=_r.matchPrefix(_o+_a,"a=ice-ufrag:")[0],_p=_r.matchPrefix(_o+_a,"a=ice-pwd:")[0];return _u&&_p?{usernameFragment:_u.substr(12),password:_p.substr(10)}:null},_r.writeIceParameters=function(_o){let _a="a=ice-ufrag:"+_o.usernameFragment+`\r
a=ice-pwd:`+_o.password+`\r
`;return _o.iceLite&&(_a+=`a=ice-lite\r
`),_a},_r.parseRtpParameters=function(_o){const _a={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},_u=_r.splitLines(_o)[0].split(" ");for(let _p=3;_p<_u.length;_p++){const _f=_u[_p],n_=_r.matchPrefix(_o,"a=rtpmap:"+_f+" ")[0];if(n_){const r_=_r.parseRtpMap(n_),o_=_r.matchPrefix(_o,"a=fmtp:"+_f+" ");switch(r_.parameters=o_.length?_r.parseFmtp(o_[0]):{},r_.rtcpFeedback=_r.matchPrefix(_o,"a=rtcp-fb:"+_f+" ").map(_r.parseRtcpFb),_a.codecs.push(r_),r_.name.toUpperCase()){case"RED":case"ULPFEC":_a.fecMechanisms.push(r_.name.toUpperCase())}}}return _r.matchPrefix(_o,"a=extmap:").forEach(_p=>{_a.headerExtensions.push(_r.parseExtmap(_p))}),_a},_r.writeRtpDescription=function(_o,_a){let _u="";_u+="m="+_o+" ",_u+=_a.codecs.length>0?"9":"0",_u+=" UDP/TLS/RTP/SAVPF ",_u+=_a.codecs.map(_f=>_f.preferredPayloadType!==void 0?_f.preferredPayloadType:_f.payloadType).join(" ")+`\r
`,_u+=`c=IN IP4 0.0.0.0\r
`,_u+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,_a.codecs.forEach(_f=>{_u+=_r.writeRtpMap(_f),_u+=_r.writeFmtp(_f),_u+=_r.writeRtcpFb(_f)});let _p=0;return _a.codecs.forEach(_f=>{_f.maxptime>_p&&(_p=_f.maxptime)}),_p>0&&(_u+="a=maxptime:"+_p+`\r
`),_a.headerExtensions&&_a.headerExtensions.forEach(_f=>{_u+=_r.writeExtmap(_f)}),_u},_r.parseRtpEncodingParameters=function(_o){const _a=[],_u=_r.parseRtpParameters(_o),_p=_u.fecMechanisms.indexOf("RED")!==-1,_f=_u.fecMechanisms.indexOf("ULPFEC")!==-1,n_=_r.matchPrefix(_o,"a=ssrc:").map(g_=>_r.parseSsrcMedia(g_)).filter(g_=>g_.attribute==="cname"),r_=n_.length>0&&n_[0].ssrc;let o_;const s_=_r.matchPrefix(_o,"a=ssrc-group:FID").map(g_=>g_.substr(17).split(" ").map(w_=>parseInt(w_,10)));s_.length>0&&s_[0].length>1&&s_[0][0]===r_&&(o_=s_[0][1]),_u.codecs.forEach(g_=>{if(g_.name.toUpperCase()==="RTX"&&g_.parameters.apt){let w_={ssrc:r_,codecPayloadType:parseInt(g_.parameters.apt,10)};r_&&o_&&(w_.rtx={ssrc:o_}),_a.push(w_),_p&&(w_=JSON.parse(JSON.stringify(w_)),w_.fec={ssrc:r_,mechanism:_f?"red+ulpfec":"red"},_a.push(w_))}}),_a.length===0&&r_&&_a.push({ssrc:r_});let u_=_r.matchPrefix(_o,"b=");return u_.length&&(u_=u_[0].indexOf("b=TIAS:")===0?parseInt(u_[0].substr(7),10):u_[0].indexOf("b=AS:")===0?1e3*parseInt(u_[0].substr(5),10)*.95-16e3:void 0,_a.forEach(g_=>{g_.maxBitrate=u_})),_a},_r.parseRtcpParameters=function(_o){const _a={},_u=_r.matchPrefix(_o,"a=ssrc:").map(n_=>_r.parseSsrcMedia(n_)).filter(n_=>n_.attribute==="cname")[0];_u&&(_a.cname=_u.value,_a.ssrc=_u.ssrc);const _p=_r.matchPrefix(_o,"a=rtcp-rsize");_a.reducedSize=_p.length>0,_a.compound=_p.length===0;const _f=_r.matchPrefix(_o,"a=rtcp-mux");return _a.mux=_f.length>0,_a},_r.writeRtcpParameters=function(_o){let _a="";return _o.reducedSize&&(_a+=`a=rtcp-rsize\r
`),_o.mux&&(_a+=`a=rtcp-mux\r
`),_o.ssrc!==void 0&&_o.cname&&(_a+="a=ssrc:"+_o.ssrc+" cname:"+_o.cname+`\r
`),_a},_r.parseMsid=function(_o){let _a;const _u=_r.matchPrefix(_o,"a=msid:");if(_u.length===1)return _a=_u[0].substr(7).split(" "),{stream:_a[0],track:_a[1]};const _p=_r.matchPrefix(_o,"a=ssrc:").map(_f=>_r.parseSsrcMedia(_f)).filter(_f=>_f.attribute==="msid");return _p.length>0?(_a=_p[0].value.split(" "),{stream:_a[0],track:_a[1]}):void 0},_r.parseSctpDescription=function(_o){const _a=_r.parseMLine(_o),_u=_r.matchPrefix(_o,"a=max-message-size:");let _p;_u.length>0&&(_p=parseInt(_u[0].substr(19),10)),isNaN(_p)&&(_p=65536);const _f=_r.matchPrefix(_o,"a=sctp-port:");if(_f.length>0)return{port:parseInt(_f[0].substr(12),10),protocol:_a.fmt,maxMessageSize:_p};const n_=_r.matchPrefix(_o,"a=sctpmap:");if(n_.length>0){const r_=n_[0].substr(10).split(" ");return{port:parseInt(r_[0],10),protocol:r_[1],maxMessageSize:_p}}},_r.writeSctpDescription=function(_o,_a){let _u=[];return _u=_o.protocol!=="DTLS/SCTP"?["m="+_o.kind+" 9 "+_o.protocol+" "+_a.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+_a.port+`\r
`]:["m="+_o.kind+" 9 "+_o.protocol+" "+_a.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+_a.port+" "+_a.protocol+` 65535\r
`],_a.maxMessageSize!==void 0&&_u.push("a=max-message-size:"+_a.maxMessageSize+`\r
`),_u.join("")},_r.generateSessionId=function(){return Math.random().toString().substr(2,21)},_r.writeSessionBoilerplate=function(_o,_a,_u){let _p;const _f=_a!==void 0?_a:2;return _p=_o||_r.generateSessionId(),`v=0\r
o=`+(_u||"thisisadapterortc")+" "+_p+" "+_f+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},_r.getDirection=function(_o,_a){const _u=_r.splitLines(_o);for(let _p=0;_p<_u.length;_p++)switch(_u[_p]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return _u[_p].substr(2)}return _a?_r.getDirection(_a):"sendrecv"},_r.getKind=function(_o){return _r.splitLines(_o)[0].split(" ")[0].substr(2)},_r.isRejected=function(_o){return _o.split(" ",2)[1]==="0"},_r.parseMLine=function(_o){const _a=_r.splitLines(_o)[0].substr(2).split(" ");return{kind:_a[0],port:parseInt(_a[1],10),protocol:_a[2],fmt:_a.slice(3).join(" ")}},_r.parseOLine=function(_o){const _a=_r.matchPrefix(_o,"o=")[0].substr(2).split(" ");return{username:_a[0],sessionId:_a[1],sessionVersion:parseInt(_a[2],10),netType:_a[3],addressType:_a[4],address:_a[5]}},_r.isValidSDP=function(_o){if(typeof _o!="string"||_o.length===0)return!1;const _a=_r.splitLines(_o);for(let _u=0;_u<_a.length;_u++)if(_a[_u].length<2||_a[_u].charAt(1)!=="=")return!1;return!0},_n.exports=_r})(K2);var q1=K2.exports,n4=Object.freeze(_t({__proto__:null,default:q1},[K2.exports]));function tD(_n){if(!_n.RTCIceCandidate||_n.RTCIceCandidate&&"foundation"in _n.RTCIceCandidate.prototype)return;const _r=_n.RTCIceCandidate;_n.RTCIceCandidate=function(_o){if(typeof _o=="object"&&_o.candidate&&_o.candidate.indexOf("a=")===0&&((_o=JSON.parse(JSON.stringify(_o))).candidate=_o.candidate.substr(2)),_o.candidate&&_o.candidate.length){const _a=new _r(_o),_u=q1.parseCandidate(_o.candidate),_p=Object.assign(_a,_u);return _p.toJSON=function(){return{candidate:_p.candidate,sdpMid:_p.sdpMid,sdpMLineIndex:_p.sdpMLineIndex,usernameFragment:_p.usernameFragment}},_p}return new _r(_o)},_n.RTCIceCandidate.prototype=_r.prototype,OT(_n,"icecandidate",_o=>(_o.candidate&&Object.defineProperty(_o,"candidate",{value:new _n.RTCIceCandidate(_o.candidate),writable:"false"}),_o))}function J2(_n){!_n.RTCIceCandidate||_n.RTCIceCandidate&&"relayProtocol"in _n.RTCIceCandidate.prototype||OT(_n,"icecandidate",_r=>{if(_r.candidate){const _o=q1.parseCandidate(_r.candidate.candidate);_o.type==="relay"&&(_r.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[_o.priority>>24])}return _r})}function sD(_n,_r){if(!_n.RTCPeerConnection)return;"sctp"in _n.RTCPeerConnection.prototype||Object.defineProperty(_n.RTCPeerConnection.prototype,"sctp",{get(){return this._sctp===void 0?null:this._sctp}});const _o=function(n_){if(!n_||!n_.sdp)return!1;const r_=q1.splitSections(n_.sdp);return r_.shift(),r_.some(o_=>{const s_=q1.parseMLine(o_);return s_&&s_.kind==="application"&&s_.protocol.indexOf("SCTP")!==-1})},_a=function(n_){const r_=n_.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(r_===null||r_.length<2)return-1;const o_=parseInt(r_[1],10);return o_!=o_?-1:o_},_u=function(n_){let r_=65536;return _r.browser==="firefox"&&(r_=_r.version<57?n_===-1?16384:2147483637:_r.version<60?_r.version===57?65535:65536:2147483637),r_},_p=function(n_,r_){let o_=65536;_r.browser==="firefox"&&_r.version===57&&(o_=65535);const s_=q1.matchPrefix(n_.sdp,"a=max-message-size:");return s_.length>0?o_=parseInt(s_[0].substr(19),10):_r.browser==="firefox"&&r_!==-1&&(o_=2147483637),o_},_f=_n.RTCPeerConnection.prototype.setRemoteDescription;_n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,_r.browser==="chrome"&&_r.version>=76){const{sdpSemantics:n_}=this.getConfiguration();n_==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return this._sctp===void 0?null:this._sctp},enumerable:!0,configurable:!0})}if(_o(arguments[0])){const n_=_a(arguments[0]),r_=_u(n_),o_=_p(arguments[0],n_);let s_;s_=r_===0&&o_===0?Number.POSITIVE_INFINITY:r_===0||o_===0?Math.max(r_,o_):Math.min(r_,o_);const u_={};Object.defineProperty(u_,"maxMessageSize",{get:()=>s_}),this._sctp=u_}return _f.apply(this,arguments)}}function uD(_n){if(!_n.RTCPeerConnection||!("createDataChannel"in _n.RTCPeerConnection.prototype))return;function _r(_a,_u){const _p=_a.send;_a.send=function(){const _f=arguments[0],n_=_f.length||_f.size||_f.byteLength;if(_a.readyState==="open"&&_u.sctp&&n_>_u.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+_u.sctp.maxMessageSize+" bytes)");return _p.apply(_a,arguments)}}const _o=_n.RTCPeerConnection.prototype.createDataChannel;_n.RTCPeerConnection.prototype.createDataChannel=function(){const _a=_o.apply(this,arguments);return _r(_a,this),_a},OT(_n,"datachannel",_a=>(_r(_a.channel,_a.target),_a))}function Q2(_n){if(!_n.RTCPeerConnection||"connectionState"in _n.RTCPeerConnection.prototype)return;const _r=_n.RTCPeerConnection.prototype;Object.defineProperty(_r,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(_r,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(_o){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),_o&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=_o)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(_o=>{const _a=_r[_o];_r[_o]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=_u=>{const _p=_u.target;if(_p._lastConnectionState!==_p.connectionState){_p._lastConnectionState=_p.connectionState;const _f=new Event("connectionstatechange",_u);_p.dispatchEvent(_f)}return _u},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),_a.apply(this,arguments)}})}function X2(_n,_r){if(!_n.RTCPeerConnection||_r.browser==="chrome"&&_r.version>=71||_r.browser==="safari"&&_r.version>=605)return;const _o=_n.RTCPeerConnection.prototype.setRemoteDescription;_n.RTCPeerConnection.prototype.setRemoteDescription=function(_a){if(_a&&_a.sdp&&_a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const _u=_a.sdp.split(`
`).filter(_p=>DI(_p).call(_p)!=="a=extmap-allow-mixed").join(`
`);_n.RTCSessionDescription&&_a instanceof _n.RTCSessionDescription?arguments[0]=new _n.RTCSessionDescription({type:_a.type,sdp:_u}):_a.sdp=_u}return _o.apply(this,arguments)}}function W1(_n,_r){if(!_n.RTCPeerConnection||!_n.RTCPeerConnection.prototype)return;const _o=_n.RTCPeerConnection.prototype.addIceCandidate;_o&&_o.length!==0&&(_n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(_r.browser==="chrome"&&_r.version<78||_r.browser==="firefox"&&_r.version<68||_r.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?uE.resolve():_o.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),uE.resolve())})}function _D(_n,_r){if(!_n.RTCPeerConnection||!_n.RTCPeerConnection.prototype)return;const _o=_n.RTCPeerConnection.prototype.setLocalDescription;_o&&_o.length!==0&&(_n.RTCPeerConnection.prototype.setLocalDescription=function(){let _a=arguments[0]||{};if(typeof _a!="object"||_a.type&&_a.sdp)return _o.apply(this,arguments);if(_a={type:_a.type,sdp:_a.sdp},!_a.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":_a.type="offer";break;default:_a.type="answer"}return _a.sdp||_a.type!=="offer"&&_a.type!=="answer"?_o.apply(this,[_a]):(_a.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(_p=>_o.apply(this,[_p]))})}var Z2=Object.freeze({__proto__:null,shimRTCIceCandidate:tD,shimRTCIceCandidateRelayProtocol:J2,shimMaxMessageSize:sD,shimSendThrowTypeError:uD,shimConnectionState:Q2,removeExtmapAllowMixed:X2,shimAddIceCandidateNullOrEmpty:W1,shimParameterlessSetLocalDescription:_D});let zS,S0;(function(){let{window:_n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const _o=b1,_a=kR(_n),_u={browserDetails:_a,commonShim:Z2,extractVersion:E1,disableLog:SP,disableWarnings:wP,sdp:n4};switch(_a.browser){case"chrome":if(!T3||!B2||!_r.shimChrome)return _o("Chrome shim is not included in this adapter release."),_u;if(_a.version===null)return _o("Chrome shim can not determine version, not shimming."),_u;_o("adapter.js shimming chrome."),_u.browserShim=T3,W1(_n,_a),_D(_n),DT(_n,_a),LS(_n),B2(_n,_a),y3(_n),w3(_n,_a),MI(_n),E3(_n),b3(_n),QM(_n,_a),tD(_n),J2(_n),Q2(_n),sD(_n,_a),uD(_n),X2(_n,_a);break;case"firefox":if(!N3||!H1||!_r.shimFirefox)return _o("Firefox shim is not included in this adapter release."),_u;_o("adapter.js shimming firefox."),_u.browserShim=N3,W1(_n,_a),_D(_n),cI(_n,_a),H1(_n,_a),V2(_n),H2(_n),SS(_n),AS(_n),R3(_n),I3(_n),C3(_n),A3(_n),O3(_n),tD(_n),Q2(_n),sD(_n,_a),uD(_n);break;case"safari":if(!L3||!_r.shimSafari)return _o("Safari shim is not included in this adapter release."),_u;_o("adapter.js shimming safari."),_u.browserShim=L3,W1(_n,_a),_D(_n),oL(_n),WO(_n),XM(_n),G2(_n),G1(_n),VT(_n),k3(_n),x3(_n),tD(_n),J2(_n),sD(_n,_a),uD(_n),X2(_n,_a);break;default:_o("Unsupported browser!")}})({window:typeof window>"u"?void 0:window}),function(_n){_n.WIN_10="Windows 10",_n.WIN_81="Windows 8.1",_n.WIN_8="Windows 8",_n.WIN_7="Windows 7",_n.WIN_VISTA="Windows Vista",_n.WIN_SERVER_2003="Windows Server 2003",_n.WIN_XP="Windows XP",_n.WIN_2000="Windows 2000",_n.ANDROID="Android",_n.OPEN_BSD="Open BSD",_n.SUN_OS="Sun OS",_n.LINUX="Linux",_n.IOS="iOS",_n.MAC_OS="Mac OS",_n.QNX="QNX",_n.UNIX="UNIX",_n.BEOS="BeOS",_n.OS_2="OS/2",_n.SEARCH_BOT="Search Bot"}(zS||(zS={})),function(_n){_n.CHROME="Chrome",_n.SAFARI="Safari",_n.EDGE="Edge",_n.FIREFOX="Firefox",_n.OPERA="OPR",_n.QQ="QQBrowser",_n.WECHAT="MicroMessenger"}(S0||(S0={}));var _j={exports:{}};(function(_n,_r){(function(_o,_a){var _u="function",_p="undefined",_f="object",n_="string",r_="major",o_="model",s_="name",u_="type",g_="vendor",w_="version",D_="architecture",M_="console",P_="mobile",_g="tablet",_y="smarttv",hE="wearable",NE="embedded",mE="Amazon",_E="Apple",dE="ASUS",IE="BlackBerry",j0="Firefox",GE="Google",z0="Huawei",$0="LG",fS="Microsoft",XS="Motorola",pS="Opera",ZT="Samsung",tE="Sharp",sE="Sony",bE="Xiaomi",FE="Zebra",p0="Facebook",pE="Chromium OS",m_="Mac OS",L_=function(cS){for(var bS={},F0=0;F0<cS.length;F0++)bS[cS[F0].toUpperCase()]=cS[F0];return bS},V_=function(cS,bS){return typeof cS===n_&&iE(bS).indexOf(iE(cS))!==-1},iE=function(cS){return cS.toLowerCase()},BE=function(cS,bS){if(typeof cS===n_)return cS=cS.replace(/^\s\s*/,""),typeof bS===_p?cS:cS.substring(0,350)},H0=function(cS,bS){for(var F0,FT,EO,uS,h0,eR,dN=0;dN<bS.length&&!h0;){var YI=bS[dN],KK=bS[dN+1];for(F0=FT=0;F0<YI.length&&!h0&&YI[F0];)if(h0=YI[F0++].exec(cS))for(EO=0;EO<KK.length;EO++)eR=h0[++FT],typeof(uS=KK[EO])===_f&&uS.length>0?uS.length===2?typeof uS[1]==_u?this[uS[0]]=uS[1].call(this,eR):this[uS[0]]=uS[1]:uS.length===3?typeof uS[1]!==_u||uS[1].exec&&uS[1].test?this[uS[0]]=eR?eR.replace(uS[1],uS[2]):_a:this[uS[0]]=eR?uS[1].call(this,eR,uS[2]):_a:uS.length===4&&(this[uS[0]]=eR?uS[3].call(this,eR.replace(uS[1],uS[2])):_a):this[uS]=eR||_a;dN+=2}},ZS=function(cS,bS){for(var F0 in bS)if(typeof bS[F0]===_f&&bS[F0].length>0){for(var FT=0;FT<bS[F0].length;FT++)if(V_(bS[F0][FT],cS))return F0==="?"?_a:F0}else if(V_(bS[F0],cS))return F0==="?"?_a:F0;return cS},yI={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},uN={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[w_,[s_,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[w_,[s_,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[s_,w_],[/opios[\/ ]+([\w\.]+)/i],[w_,[s_,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[w_,[s_,pS]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[s_,w_],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[w_,[s_,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[w_,[s_,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[w_,[s_,"WeChat"]],[/konqueror\/([\w\.]+)/i],[w_,[s_,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[w_,[s_,"IE"]],[/yabrowser\/([\w\.]+)/i],[w_,[s_,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[s_,/(.+)/,"$1 Secure Browser"],w_],[/\bfocus\/([\w\.]+)/i],[w_,[s_,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[w_,[s_,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[w_,[s_,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[w_,[s_,"Dolphin"]],[/coast\/([\w\.]+)/i],[w_,[s_,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[w_,[s_,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[w_,[s_,j0]],[/\bqihu|(qi?ho?o?|360)browser/i],[[s_,"360 Browser"]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[s_,/(.+)/,"$1 Browser"],w_],[/(comodo_dragon)\/([\w\.]+)/i],[[s_,/_/g," "],w_],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[s_,w_],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[s_],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[s_,p0],w_],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[s_,w_],[/\bgsa\/([\w\.]+) .*safari\//i],[w_,[s_,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[w_,[s_,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[s_,"Chrome WebView"],w_],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[w_,[s_,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[s_,w_],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[w_,[s_,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[w_,s_],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[s_,[w_,ZS,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[s_,w_],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[s_,"Netscape"],w_],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[w_,[s_,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[s_,w_],[/(cobalt)\/([\w\.]+)/i],[s_,[w_,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[D_,"amd64"]],[/(ia32(?=;))/i],[[D_,iE]],[/((?:i[346]|x)86)[;\)]/i],[[D_,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[D_,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[D_,"armhf"]],[/windows (ce|mobile); ppc;/i],[[D_,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[D_,/ower/,"",iE]],[/(sun4\w)[;\)]/i],[[D_,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[D_,iE]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[o_,[g_,ZT],[u_,_g]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[o_,[g_,ZT],[u_,P_]],[/\((ip(?:hone|od)[\w ]*);/i],[o_,[g_,_E],[u_,P_]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[o_,[g_,_E],[u_,_g]],[/(macintosh);/i],[o_,[g_,_E]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[o_,[g_,tE],[u_,P_]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[o_,[g_,z0],[u_,_g]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[o_,[g_,z0],[u_,P_]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[o_,/_/g," "],[g_,bE],[u_,P_]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[o_,/_/g," "],[g_,bE],[u_,_g]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[o_,[g_,"OPPO"],[u_,P_]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[o_,[g_,"Vivo"],[u_,P_]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[o_,[g_,"Realme"],[u_,P_]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[o_,[g_,XS],[u_,P_]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[o_,[g_,XS],[u_,_g]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[o_,[g_,$0],[u_,_g]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[o_,[g_,$0],[u_,P_]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[o_,[g_,"Lenovo"],[u_,_g]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[o_,/_/g," "],[g_,"Nokia"],[u_,P_]],[/(pixel c)\b/i],[o_,[g_,GE],[u_,_g]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[o_,[g_,GE],[u_,P_]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[o_,[g_,sE],[u_,P_]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[o_,"Xperia Tablet"],[g_,sE],[u_,_g]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[o_,[g_,"OnePlus"],[u_,P_]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[o_,[g_,mE],[u_,_g]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[o_,/(.+)/g,"Fire Phone $1"],[g_,mE],[u_,P_]],[/(playbook);[-\w\),; ]+(rim)/i],[o_,g_,[u_,_g]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[o_,[g_,IE],[u_,P_]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[o_,[g_,dE],[u_,_g]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[o_,[g_,dE],[u_,P_]],[/(nexus 9)/i],[o_,[g_,"HTC"],[u_,_g]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[g_,[o_,/_/g," "],[u_,P_]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[o_,[g_,"Acer"],[u_,_g]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[o_,[g_,"Meizu"],[u_,P_]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[g_,o_,[u_,P_]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[g_,o_,[u_,_g]],[/(surface duo)/i],[o_,[g_,fS],[u_,_g]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[o_,[g_,"Fairphone"],[u_,P_]],[/(u304aa)/i],[o_,[g_,"AT&T"],[u_,P_]],[/\bsie-(\w*)/i],[o_,[g_,"Siemens"],[u_,P_]],[/\b(rct\w+) b/i],[o_,[g_,"RCA"],[u_,_g]],[/\b(venue[\d ]{2,7}) b/i],[o_,[g_,"Dell"],[u_,_g]],[/\b(q(?:mv|ta)\w+) b/i],[o_,[g_,"Verizon"],[u_,_g]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[o_,[g_,"Barnes & Noble"],[u_,_g]],[/\b(tm\d{3}\w+) b/i],[o_,[g_,"NuVision"],[u_,_g]],[/\b(k88) b/i],[o_,[g_,"ZTE"],[u_,_g]],[/\b(nx\d{3}j) b/i],[o_,[g_,"ZTE"],[u_,P_]],[/\b(gen\d{3}) b.+49h/i],[o_,[g_,"Swiss"],[u_,P_]],[/\b(zur\d{3}) b/i],[o_,[g_,"Swiss"],[u_,_g]],[/\b((zeki)?tb.*\b) b/i],[o_,[g_,"Zeki"],[u_,_g]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[g_,"Dragon Touch"],o_,[u_,_g]],[/\b(ns-?\w{0,9}) b/i],[o_,[g_,"Insignia"],[u_,_g]],[/\b((nxa|next)-?\w{0,9}) b/i],[o_,[g_,"NextBook"],[u_,_g]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[g_,"Voice"],o_,[u_,P_]],[/\b(lvtel\-)?(v1[12]) b/i],[[g_,"LvTel"],o_,[u_,P_]],[/\b(ph-1) /i],[o_,[g_,"Essential"],[u_,P_]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[o_,[g_,"Envizen"],[u_,_g]],[/\b(trio[-\w\. ]+) b/i],[o_,[g_,"MachSpeed"],[u_,_g]],[/\btu_(1491) b/i],[o_,[g_,"Rotor"],[u_,_g]],[/(shield[\w ]+) b/i],[o_,[g_,"Nvidia"],[u_,_g]],[/(sprint) (\w+)/i],[g_,o_,[u_,P_]],[/(kin\.[onetw]{3})/i],[[o_,/\./g," "],[g_,fS],[u_,P_]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[o_,[g_,FE],[u_,_g]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[o_,[g_,FE],[u_,P_]],[/smart-tv.+(samsung)/i],[g_,[u_,_y]],[/hbbtv.+maple;(\d+)/i],[[o_,/^/,"SmartTV"],[g_,ZT],[u_,_y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[g_,$0],[u_,_y]],[/(apple) ?tv/i],[g_,[o_,"Apple TV"],[u_,_y]],[/crkey/i],[[o_,"Chromecast"],[g_,GE],[u_,_y]],[/droid.+aft(\w)( bui|\))/i],[o_,[g_,mE],[u_,_y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[o_,[g_,tE],[u_,_y]],[/(bravia[\w ]+)( bui|\))/i],[o_,[g_,sE],[u_,_y]],[/(mitv-\w{5}) bui/i],[o_,[g_,bE],[u_,_y]],[/Hbbtv.*(technisat) (.*);/i],[g_,o_,[u_,_y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[g_,BE],[o_,BE],[u_,_y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[u_,_y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[g_,o_,[u_,M_]],[/droid.+; (shield) bui/i],[o_,[g_,"Nvidia"],[u_,M_]],[/(playstation [345portablevi]+)/i],[o_,[g_,sE],[u_,M_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[o_,[g_,fS],[u_,M_]],[/((pebble))app/i],[g_,o_,[u_,hE]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[o_,[g_,_E],[u_,hE]],[/droid.+; (glass) \d/i],[o_,[g_,GE],[u_,hE]],[/droid.+; (wt63?0{2,3})\)/i],[o_,[g_,FE],[u_,hE]],[/(quest( 2| pro)?)/i],[o_,[g_,p0],[u_,hE]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[g_,[u_,NE]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[o_,[u_,P_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[o_,[u_,_g]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[u_,_g]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[u_,P_]],[/(android[-\w\. ]{0,9});.+buil/i],[o_,[g_,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[w_,[s_,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[w_,[s_,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[s_,w_],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[w_,s_]],os:[[/microsoft (windows) (vista|xp)/i],[s_,w_],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[s_,[w_,ZS,yI]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[s_,"Windows"],[w_,ZS,yI]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[w_,/_/g,"."],[s_,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[s_,m_],[w_,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[w_,s_],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[s_,w_],[/\(bb(10);/i],[w_,[s_,IE]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[w_,[s_,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[w_,[s_,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[w_,[s_,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[w_,[s_,"watchOS"]],[/crkey\/([\d\.]+)/i],[w_,[s_,"Chromecast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[s_,pE],w_],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[s_,w_],[/(sunos) ?([\w\.\d]*)/i],[[s_,"Solaris"],w_],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[s_,w_]]},zR=function(cS,bS){if(typeof cS===_f&&(bS=cS,cS=_a),!(this instanceof zR))return new zR(cS,bS).getResult();var F0=typeof _o!==_p&&_o.navigator?_o.navigator:_a,FT=cS||(F0&&F0.userAgent?F0.userAgent:""),EO=F0&&F0.userAgentData?F0.userAgentData:_a,uS=bS?function(h0,eR){var dN={};for(var YI in h0)eR[YI]&&eR[YI].length%2==0?dN[YI]=eR[YI].concat(h0[YI]):dN[YI]=h0[YI];return dN}(uN,bS):uN;return this.getBrowser=function(){var h0={};return h0.name=_a,h0.version=_a,H0.call(h0,FT,uS.browser),h0.major=function(eR){return typeof eR===n_?eR.replace(/[^\d\.]/g,"").split(".")[0]:_a}(h0.version),F0&&F0.brave&&typeof F0.brave.isBrave==_u&&(h0.name="Brave"),h0},this.getCPU=function(){var h0={};return h0.architecture=_a,H0.call(h0,FT,uS.cpu),h0},this.getDevice=function(){var h0={};return h0.vendor=_a,h0.model=_a,h0.type=_a,H0.call(h0,FT,uS.device),!h0.type&&EO&&EO.mobile&&(h0.type=P_),h0.model=="Macintosh"&&F0&&typeof F0.standalone!==_p&&F0.maxTouchPoints&&F0.maxTouchPoints>2&&(h0.model="iPad",h0.type=_g),h0},this.getEngine=function(){var h0={};return h0.name=_a,h0.version=_a,H0.call(h0,FT,uS.engine),h0},this.getOS=function(){var h0={};return h0.name=_a,h0.version=_a,H0.call(h0,FT,uS.os),!h0.name&&EO&&EO.platform!="Unknown"&&(h0.name=EO.platform.replace(/chrome os/i,pE).replace(/macos/i,m_)),h0},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return FT},this.setUA=function(h0){return FT=typeof h0===n_&&h0.length>350?BE(h0,350):h0,this},this.setUA(FT),this};zR.VERSION="0.7.34",zR.BROWSER=L_([s_,w_,r_]),zR.CPU=L_([D_]),zR.DEVICE=L_([o_,g_,u_,M_,P_,_y,_g,hE,NE]),zR.ENGINE=zR.OS=L_([s_,w_]),_n.exports&&(_r=_n.exports=zR),_r.UAParser=zR;var lN=typeof _o!==_p&&(_o.jQuery||_o.Zepto);if(lN&&!lN.ua){var QD=new zR;lN.ua=QD.getResult(),lN.ua.get=function(){return QD.getUA()},lN.ua.set=function(cS){QD.setUA(cS);var bS=QD.getResult();for(var F0 in bS)lN.ua[F0]=bS[F0]}}})(typeof window=="object"?window:Vt)})(_j,_j.exports);const YS=new _j.exports;let mS,PI=YS.getResult();function I0(_n){return _n&&YS.setUA(_n),PI=YS.getResult(),{name:r4(PI),version:U3(PI),os:i4(PI),osVersion:PI.os.version}}function r4(_n){if(_n.engine.name==="Blink"&&_n.browser.name!=="WeChat")return S0.CHROME;switch(_n.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return S0.CHROME;case"Safari":case"Mobile Safari":return S0.SAFARI;case"Edge":return S0.EDGE;case"Firefox":return S0.FIREFOX;case"QQBrowser":return S0.QQ;case"Opera":return S0.OPERA;case"WeChat":return S0.WECHAT;default:return _n.browser.name||""}}function U3(_n){let _r;return _r=_n.engine.name==="Blink"?_n.engine.version||"":_n.browser.version||"",_r.split(".")[0]}function i4(_n){switch(_n.os.name){case"Windows":return _n.os.version?_n.os.name+" "+_n.os.version:_n.os.name;default:return _n.os.name||""}}function vD(){const _n=I0();return!!(PI.engine.name==="WebKit"&&_n.os===zS.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&_n.name!==S0.SAFARI||KS()&&_n.name!==S0.SAFARI)}function o4(){const _n=I0();if(vD()){if(_n.os===zS.MAC_OS)return!0;if(_n.os===zS.IOS){const _r=PI.os.version&&PI.os.version.split(".");if(_r&&Number(_r[0])===14&&_r[1]&&Number(_r[1])>=3||_r&&Number(_r[0])>14)return!0}}return!1}function $3(){return PI.engine.name==="WebKit"}function $j(){return I0().name===S0.CHROME}function rT(){return I0().name===S0.SAFARI}function tS(){return I0().name===S0.FIREFOX}function KS(){return I0().os===zS.IOS}function yD(_n){const _r=I0();return!(_r.name!==S0.CHROME||!_r.osVersion)&&Number(_r.version)>=_n}function F3(_n){const _r=I0();return!(_r.name!==S0.EDGE||!_r.osVersion)&&Number(_r.version)>=_n}function Y3(_n){const _r=I0();return!(_r.name!==S0.OPERA||!_r.osVersion)&&Number(_r.version)>=_n}function B3(){const _n=I0();return!(_n.name!==S0.CHROME||!_n.osVersion)&&Number(_n.version)<=90}function V3(){const _n=I0();if(_n.os!==zS.IOS||!_n.osVersion)return!1;const _r=_n.osVersion.split(".");return Number(_r[0])<14||Number(_r[0])===14&&Number(_r[1])<=6}function DR(){const _n=I0();if(_n.os!==zS.IOS||!_n.osVersion)return!1;const _r=_n.osVersion.split(".");return Number(_r[0])===15}function H3(){const _n=I0();if(_n.os!==zS.IOS||!_n.osVersion)return!1;const _r=_n.osVersion.split(".");return Number(_r[0])===15&&Number(_r[1])===0}function G3(){const _n=I0();if(_n.os!==zS.IOS||!_n.osVersion)return!1;const _r=_n.osVersion.split(".");return Number(_r[0])===15&&Number(_r[1])>=1}function eU(){const _n=I0();if(_n.os!==zS.IOS||!_n.osVersion)return!1;const _r=_n.osVersion.split(".");return Number(_r[0])===15&&Number(_r[1])>=2}function uI(){return rT()&&navigator.maxTouchPoints>0}function q3(){return I0().name===S0.WECHAT}function tU(){return window.navigator.appVersion&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)!==null&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function lO(){const _n=I0();return _n.name===S0.EDGE||_n.name===S0.SAFARI?!1:!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function nU(){return I0().os===zS.ANDROID}function sL(){const _n=I0();return _n.os==="Android"&&(_n.name==="Chrome"||_n.name===S0.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}(function(_n){_n.CERTIFICATE="certificate",_n.CODEC="codec",_n.CANDIDATE_PAIR="candidate-pair",_n.LOCAL_CANDIDATE="local-candidate",_n.REMOTE_CANDIDATE="remote-candidate",_n.INBOUND="inbound-rtp",_n.TRACK="track",_n.OUTBOUND="outbound-rtp",_n.PC="peer-connection",_n.REMOTE_INBOUND="remote-inbound-rtp",_n.REMOTE_OUTBOUND="remote-outbound-rtp",_n.TRANSPORT="transport",_n.CSRC="csrc",_n.DATA_CHANNEL="data-channel",_n.STREAM="stream",_n.SENDER="sender",_n.RECEIVER="receiver"})(mS||(mS={}));var W3={exports:{}},s4=v0,a4=R_,z3=yT.f;s4({target:"Object",stat:!0,forced:Object.defineProperty!==z3,sham:!a4},{defineProperty:z3});var K3=$E.Object,c4=W3.exports=function(_n,_r,_o){return K3.defineProperty(_n,_r,_o)};K3.defineProperty.sham&&(c4.sham=!0);var J3=W3.exports;function p_(_n,_r,_o){return _r in _n?J3(_n,_r,{value:_o,enumerable:!0,configurable:!0,writable:!0}):_n[_r]=_o,_n}var rU,iU={exports:{}},Q3=function(_n,_r){return function(){for(var _o=new Array(arguments.length),_a=0;_a<_o.length;_a++)_o[_a]=arguments[_a];return _n.apply(_r,_o)}},u4=Q3,oU=Object.prototype.toString,sU=(rU=Object.create(null),function(_n){var _r=oU.call(_n);return rU[_r]||(rU[_r]=_r.slice(8,-1).toLowerCase())});function zO(_n){return _n=_n.toLowerCase(),function(_r){return sU(_r)===_n}}function aU(_n){return Array.isArray(_n)}function ED(_n){return _n===void 0}var X3=zO("ArrayBuffer");function Z3(_n){return _n!==null&&typeof _n=="object"}function SD(_n){if(sU(_n)!=="object")return!1;var _r=Object.getPrototypeOf(_n);return _r===null||_r===Object.prototype}var l4=zO("Date"),d4=zO("File"),h4=zO("Blob"),cU=zO("FileList");function wD(_n){return oU.call(_n)==="[object Function]"}var eF=zO("URLSearchParams");function uU(_n,_r){if(_n!=null)if(typeof _n!="object"&&(_n=[_n]),aU(_n))for(var _o=0,_a=_n.length;_o<_a;_o++)_r.call(null,_n[_o],_o,_n);else for(var _u in _n)Object.prototype.hasOwnProperty.call(_n,_u)&&_r.call(null,_n[_u],_u,_n)}var lU,p4=(lU=typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array),function(_n){return lU&&_n instanceof lU}),JS={isArray:aU,isArrayBuffer:X3,isBuffer:function(_n){return _n!==null&&!ED(_n)&&_n.constructor!==null&&!ED(_n.constructor)&&typeof _n.constructor.isBuffer=="function"&&_n.constructor.isBuffer(_n)},isFormData:function(_n){var _r="[object FormData]";return _n&&(typeof FormData=="function"&&_n instanceof FormData||oU.call(_n)===_r||wD(_n.toString)&&_n.toString()===_r)},isArrayBufferView:function(_n){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(_n):_n&&_n.buffer&&X3(_n.buffer)},isString:function(_n){return typeof _n=="string"},isNumber:function(_n){return typeof _n=="number"},isObject:Z3,isPlainObject:SD,isUndefined:ED,isDate:l4,isFile:d4,isBlob:h4,isFunction:wD,isStream:function(_n){return Z3(_n)&&wD(_n.pipe)},isURLSearchParams:eF,isStandardBrowserEnv:function(){return(typeof navigator>"u"||navigator.product!=="ReactNative"&&navigator.product!=="NativeScript"&&navigator.product!=="NS")&&typeof window<"u"&&typeof document<"u"},forEach:uU,merge:function _n(){var _r={};function _o(_p,_f){SD(_r[_f])&&SD(_p)?_r[_f]=_n(_r[_f],_p):SD(_p)?_r[_f]=_n({},_p):aU(_p)?_r[_f]=_p.slice():_r[_f]=_p}for(var _a=0,_u=arguments.length;_a<_u;_a++)uU(arguments[_a],_o);return _r},extend:function(_n,_r,_o){return uU(_r,function(_a,_u){_n[_u]=_o&&typeof _a=="function"?u4(_a,_o):_a}),_n},trim:function(_n){return _n.trim?_n.trim():_n.replace(/^\s+|\s+$/g,"")},stripBOM:function(_n){return _n.charCodeAt(0)===65279&&(_n=_n.slice(1)),_n},inherits:function(_n,_r,_o,_a){_n.prototype=Object.create(_r.prototype,_a),_n.prototype.constructor=_n,_o&&Object.assign(_n.prototype,_o)},toFlatObject:function(_n,_r,_o){var _a,_u,_p,_f={};_r=_r||{};do{for(_u=(_a=Object.getOwnPropertyNames(_n)).length;_u-- >0;)_f[_p=_a[_u]]||(_r[_p]=_n[_p],_f[_p]=!0);_n=Object.getPrototypeOf(_n)}while(_n&&(!_o||_o(_n,_r))&&_n!==Object.prototype);return _r},kindOf:sU,kindOfTest:zO,endsWith:function(_n,_r,_o){_n=String(_n),(_o===void 0||_o>_n.length)&&(_o=_n.length),_o-=_r.length;var _a=_n.indexOf(_r,_o);return _a!==-1&&_a===_o},toArray:function(_n){if(!_n)return null;var _r=_n.length;if(ED(_r))return null;for(var _o=new Array(_r);_r-- >0;)_o[_r]=_n[_r];return _o},isTypedArray:p4,isFileList:cU},z1=JS;function tF(_n){return encodeURIComponent(_n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var nF=function(_n,_r,_o){if(!_r)return _n;var _a;if(_o)_a=_o(_r);else if(z1.isURLSearchParams(_r))_a=_r.toString();else{var _u=[];z1.forEach(_r,function(_f,n_){_f!=null&&(z1.isArray(_f)?n_+="[]":_f=[_f],z1.forEach(_f,function(r_){z1.isDate(r_)?r_=r_.toISOString():z1.isObject(r_)&&(r_=JSON.stringify(r_)),_u.push(tF(n_)+"="+tF(r_))}))}),_a=_u.join("&")}if(_a){var _p=_n.indexOf("#");_p!==-1&&(_n=_n.slice(0,_p)),_n+=(_n.indexOf("?")===-1?"?":"&")+_a}return _n},GT=JS;function K1(){this.handlers=[]}K1.prototype.use=function(_n,_r,_o){return this.handlers.push({fulfilled:_n,rejected:_r,synchronous:!!_o&&_o.synchronous,runWhen:_o?_o.runWhen:null}),this.handlers.length-1},K1.prototype.eject=function(_n){this.handlers[_n]&&(this.handlers[_n]=null)},K1.prototype.forEach=function(_n){GT.forEach(this.handlers,function(_r){_r!==null&&_n(_r)})};var f4=K1,m4=JS,rF=JS;function J1(_n,_r,_o,_a,_u){Error.call(this),this.message=_n,this.name="AxiosError",_r&&(this.code=_r),_o&&(this.config=_o),_a&&(this.request=_a),_u&&(this.response=_u)}rF.inherits(J1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var TD=J1.prototype,iF={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(_n){iF[_n]={value:_n}}),Object.defineProperties(J1,iF),Object.defineProperty(TD,"isAxiosError",{value:!0}),J1.from=function(_n,_r,_o,_a,_u,_p){var _f=Object.create(TD);return rF.toFlatObject(_n,_f,function(n_){return n_!==Error.prototype}),J1.call(_f,_n.message,_r,_o,_a,_u),_f.name=_n.name,_p&&Object.assign(_f,_p),_f};var dO=J1,oF={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},PR=JS,sF=function(_n,_r){_r=_r||new FormData;var _o=[];function _a(_u){return _u===null?"":PR.isDate(_u)?_u.toISOString():PR.isArrayBuffer(_u)||PR.isTypedArray(_u)?typeof Blob=="function"?new Blob([_u]):Buffer.from(_u):_u}return function _u(_p,_f){if(PR.isPlainObject(_p)||PR.isArray(_p)){if(_o.indexOf(_p)!==-1)throw Error("Circular reference detected in "+_f);_o.push(_p),PR.forEach(_p,function(n_,r_){if(!PR.isUndefined(n_)){var o_,s_=_f?_f+"."+r_:r_;if(n_&&!_f&&typeof n_=="object"){if(PR.endsWith(r_,"{}"))n_=JSON.stringify(n_);else if(PR.endsWith(r_,"[]")&&(o_=PR.toArray(n_)))return void o_.forEach(function(u_){!PR.isUndefined(u_)&&_r.append(s_,_a(u_))})}_u(n_,s_)}}),_o.pop()}else _r.append(_f,_a(_p))}(_n),_r},dU=dO,aL=JS,_4=aL.isStandardBrowserEnv()?{write:function(_n,_r,_o,_a,_u,_p){var _f=[];_f.push(_n+"="+encodeURIComponent(_r)),aL.isNumber(_o)&&_f.push("expires="+new Date(_o).toGMTString()),aL.isString(_a)&&_f.push("path="+_a),aL.isString(_u)&&_f.push("domain="+_u),_p===!0&&_f.push("secure"),document.cookie=_f.join("; ")},read:function(_n){var _r=document.cookie.match(new RegExp("(^|;\\s*)("+_n+")=([^;]*)"));return _r?decodeURIComponent(_r[3]):null},remove:function(_n){this.write(_n,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},g4=function(_n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(_n)},v4=function(_n,_r){return _r?_n.replace(/\/+$/,"")+"/"+_r.replace(/^\/+/,""):_n},RD=function(_n,_r){return _n&&!g4(_r)?v4(_n,_r):_r},cL=JS,y4=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],aF=JS,E4=aF.isStandardBrowserEnv()?function(){var _n,_r=/(msie|trident)/i.test(navigator.userAgent),_o=document.createElement("a");function _a(_u){var _p=_u;return _r&&(_o.setAttribute("href",_p),_p=_o.href),_o.setAttribute("href",_p),{href:_o.href,protocol:_o.protocol?_o.protocol.replace(/:$/,""):"",host:_o.host,search:_o.search?_o.search.replace(/^\?/,""):"",hash:_o.hash?_o.hash.replace(/^#/,""):"",hostname:_o.hostname,port:_o.port,pathname:_o.pathname.charAt(0)==="/"?_o.pathname:"/"+_o.pathname}}return _n=_a(window.location.href),function(_u){var _p=aF.isString(_u)?_a(_u):_u;return _p.protocol===_n.protocol&&_p.host===_n.host}}():function(){return!0},hU=dO;function cF(_n){hU.call(this,_n??"canceled",hU.ERR_CANCELED),this.name="CanceledError"}JS.inherits(cF,hU,{__CANCEL__:!0});var ID=cF,uL=JS,b4=function(_n,_r,_o){var _a=_o.config.validateStatus;_o.status&&_a&&!_a(_o.status)?_r(new dU("Request failed with status code "+_o.status,[dU.ERR_BAD_REQUEST,dU.ERR_BAD_RESPONSE][Math.floor(_o.status/100)-4],_o.config,_o.request,_o)):_n(_o)},S4=_4,w4=nF,T4=RD,R4=function(_n){var _r,_o,_a,_u={};return _n&&cL.forEach(_n.split(`
`),function(_p){if(_a=_p.indexOf(":"),_r=cL.trim(_p.substr(0,_a)).toLowerCase(),_o=cL.trim(_p.substr(_a+1)),_r){if(_u[_r]&&y4.indexOf(_r)>=0)return;_u[_r]=_r==="set-cookie"?(_u[_r]?_u[_r]:[]).concat([_o]):_u[_r]?_u[_r]+", "+_o:_o}}),_u},I4=E4,C4=oF,jI=dO,A4=ID,O4=function(_n){var _r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(_n);return _r&&_r[1]||""},N4=function(_n){return new Promise(function(_r,_o){var _a,_u=_n.data,_p=_n.headers,_f=_n.responseType;function n_(){_n.cancelToken&&_n.cancelToken.unsubscribe(_a),_n.signal&&_n.signal.removeEventListener("abort",_a)}uL.isFormData(_u)&&uL.isStandardBrowserEnv()&&delete _p["Content-Type"];var r_=new XMLHttpRequest;if(_n.auth){var o_=_n.auth.username||"",s_=_n.auth.password?unescape(encodeURIComponent(_n.auth.password)):"";_p.Authorization="Basic "+btoa(o_+":"+s_)}var u_=T4(_n.baseURL,_n.url);function g_(){if(r_){var M_="getAllResponseHeaders"in r_?R4(r_.getAllResponseHeaders()):null,P_={data:_f&&_f!=="text"&&_f!=="json"?r_.response:r_.responseText,status:r_.status,statusText:r_.statusText,headers:M_,config:_n,request:r_};b4(function(_g){_r(_g),n_()},function(_g){_o(_g),n_()},P_),r_=null}}if(r_.open(_n.method.toUpperCase(),w4(u_,_n.params,_n.paramsSerializer),!0),r_.timeout=_n.timeout,"onloadend"in r_?r_.onloadend=g_:r_.onreadystatechange=function(){r_&&r_.readyState===4&&(r_.status!==0||r_.responseURL&&r_.responseURL.indexOf("file:")===0)&&setTimeout(g_)},r_.onabort=function(){r_&&(_o(new jI("Request aborted",jI.ECONNABORTED,_n,r_)),r_=null)},r_.onerror=function(){_o(new jI("Network Error",jI.ERR_NETWORK,_n,r_,r_)),r_=null},r_.ontimeout=function(){var M_=_n.timeout?"timeout of "+_n.timeout+"ms exceeded":"timeout exceeded",P_=_n.transitional||C4;_n.timeoutErrorMessage&&(M_=_n.timeoutErrorMessage),_o(new jI(M_,P_.clarifyTimeoutError?jI.ETIMEDOUT:jI.ECONNABORTED,_n,r_)),r_=null},uL.isStandardBrowserEnv()){var w_=(_n.withCredentials||I4(u_))&&_n.xsrfCookieName?S4.read(_n.xsrfCookieName):void 0;w_&&(_p[_n.xsrfHeaderName]=w_)}"setRequestHeader"in r_&&uL.forEach(_p,function(M_,P_){_u===void 0&&P_.toLowerCase()==="content-type"?delete _p[P_]:r_.setRequestHeader(P_,M_)}),uL.isUndefined(_n.withCredentials)||(r_.withCredentials=!!_n.withCredentials),_f&&_f!=="json"&&(r_.responseType=_n.responseType),typeof _n.onDownloadProgress=="function"&&r_.addEventListener("progress",_n.onDownloadProgress),typeof _n.onUploadProgress=="function"&&r_.upload&&r_.upload.addEventListener("progress",_n.onUploadProgress),(_n.cancelToken||_n.signal)&&(_a=function(M_){r_&&(_o(!M_||M_&&M_.type?new A4:M_),r_.abort(),r_=null)},_n.cancelToken&&_n.cancelToken.subscribe(_a),_n.signal&&(_n.signal.aborted?_a():_n.signal.addEventListener("abort",_a))),_u||(_u=null);var D_=O4(u_);D_&&["http","https","file"].indexOf(D_)===-1?_o(new jI("Unsupported protocol "+D_+":",jI.ERR_BAD_REQUEST,_n)):r_.send(_u)})},iT=JS,uF=function(_n,_r){m4.forEach(_n,function(_o,_a){_a!==_r&&_a.toUpperCase()===_r.toUpperCase()&&(_n[_r]=_o,delete _n[_a])})},lF=dO,_h=sF,Qm={"Content-Type":"application/x-www-form-urlencoded"};function a_(_n,_r){!iT.isUndefined(_n)&&iT.isUndefined(_n["Content-Type"])&&(_n["Content-Type"]=_r)}var b_,N_={transitional:oF,adapter:((typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(b_=N4),b_),transformRequest:[function(_n,_r){if(uF(_r,"Accept"),uF(_r,"Content-Type"),iT.isFormData(_n)||iT.isArrayBuffer(_n)||iT.isBuffer(_n)||iT.isStream(_n)||iT.isFile(_n)||iT.isBlob(_n))return _n;if(iT.isArrayBufferView(_n))return _n.buffer;if(iT.isURLSearchParams(_n))return a_(_r,"application/x-www-form-urlencoded;charset=utf-8"),_n.toString();var _o,_a=iT.isObject(_n),_u=_r&&_r["Content-Type"];if((_o=iT.isFileList(_n))||_a&&_u==="multipart/form-data"){var _p=this.env&&this.env.FormData;return _h(_o?{"files[]":_n}:_n,_p&&new _p)}return _a||_u==="application/json"?(a_(_r,"application/json"),function(_f,n_,r_){if(iT.isString(_f))try{return(n_||JSON.parse)(_f),iT.trim(_f)}catch(o_){if(o_.name!=="SyntaxError")throw o_}return(r_||JSON.stringify)(_f)}(_n)):_n}],transformResponse:[function(_n){var _r=this.transitional||N_.transitional,_o=_r&&_r.silentJSONParsing,_a=_r&&_r.forcedJSONParsing,_u=!_o&&this.responseType==="json";if(_u||_a&&iT.isString(_n)&&_n.length)try{return JSON.parse(_n)}catch(_p){if(_u)throw _p.name==="SyntaxError"?lF.from(_p,lF.ERR_BAD_RESPONSE,this,null,this.response):_p}return _n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:null},validateStatus:function(_n){return _n>=200&&_n<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};iT.forEach(["delete","get","head"],function(_n){N_.headers[_n]={}}),iT.forEach(["post","put","patch"],function(_n){N_.headers[_n]=iT.merge(Qm)});var H_=N_,Z_=JS,_v=H_,nE=function(_n){return!(!_n||!_n.__CANCEL__)},vE=JS,yE=function(_n,_r,_o){var _a=this||_v;return Z_.forEach(_o,function(_u){_n=_u.call(_a,_n,_r)}),_n},wE=nE,DE=H_,qE=ID;function _b(_n){if(_n.cancelToken&&_n.cancelToken.throwIfRequested(),_n.signal&&_n.signal.aborted)throw new qE}var e0=JS,t0=function(_n,_r){_r=_r||{};var _o={};function _a(o_,s_){return e0.isPlainObject(o_)&&e0.isPlainObject(s_)?e0.merge(o_,s_):e0.isPlainObject(s_)?e0.merge({},s_):e0.isArray(s_)?s_.slice():s_}function _u(o_){return e0.isUndefined(_r[o_])?e0.isUndefined(_n[o_])?void 0:_a(void 0,_n[o_]):_a(_n[o_],_r[o_])}function _p(o_){if(!e0.isUndefined(_r[o_]))return _a(void 0,_r[o_])}function _f(o_){return e0.isUndefined(_r[o_])?e0.isUndefined(_n[o_])?void 0:_a(void 0,_n[o_]):_a(void 0,_r[o_])}function n_(o_){return o_ in _r?_a(_n[o_],_r[o_]):o_ in _n?_a(void 0,_n[o_]):void 0}var r_={url:_p,method:_p,data:_p,baseURL:_f,transformRequest:_f,transformResponse:_f,paramsSerializer:_f,timeout:_f,timeoutMessage:_f,withCredentials:_f,adapter:_f,responseType:_f,xsrfCookieName:_f,xsrfHeaderName:_f,onUploadProgress:_f,onDownloadProgress:_f,decompress:_f,maxContentLength:_f,maxBodyLength:_f,beforeRedirect:_f,transport:_f,httpAgent:_f,httpsAgent:_f,cancelToken:_f,socketPath:_f,responseEncoding:_f,validateStatus:n_};return e0.forEach(Object.keys(_n).concat(Object.keys(_r)),function(o_){var s_=r_[o_]||_u,u_=s_(o_);e0.isUndefined(u_)&&s_!==n_||(_o[o_]=u_)}),_o},k0="0.27.2",B0=k0,BS=dO,_T={};["object","boolean","number","function","string","symbol"].forEach(function(_n,_r){_T[_n]=function(_o){return typeof _o===_n||"a"+(_r<1?"n ":" ")+_n}});var qT={};_T.transitional=function(_n,_r,_o){function _a(_u,_p){return"[Axios v"+B0+"] Transitional option '"+_u+"'"+_p+(_o?". "+_o:"")}return function(_u,_p,_f){if(_n===!1)throw new BS(_a(_p," has been removed"+(_r?" in "+_r:"")),BS.ERR_DEPRECATED);return _r&&!qT[_p]&&(qT[_p]=!0,console.warn(_a(_p," has been deprecated since v"+_r+" and will be removed in the near future"))),!_n||_n(_u,_p,_f)}};var MS=JS,jR=nF,lI=f4,pU=function(_n){return _b(_n),_n.headers=_n.headers||{},_n.data=yE.call(_n,_n.data,_n.headers,_n.transformRequest),_n.headers=vE.merge(_n.headers.common||{},_n.headers[_n.method]||{},_n.headers),vE.forEach(["delete","get","head","post","put","patch","common"],function(_r){delete _n.headers[_r]}),(_n.adapter||DE.adapter)(_n).then(function(_r){return _b(_n),_r.data=yE.call(_n,_r.data,_r.headers,_n.transformResponse),_r},function(_r){return wE(_r)||(_b(_n),_r&&_r.response&&(_r.response.data=yE.call(_n,_r.response.data,_r.response.headers,_n.transformResponse))),Promise.reject(_r)})},dF=t0,QK=RD,h5={assertOptions:function(_n,_r,_o){if(typeof _n!="object")throw new BS("options must be an object",BS.ERR_BAD_OPTION_VALUE);for(var _a=Object.keys(_n),_u=_a.length;_u-- >0;){var _p=_a[_u],_f=_r[_p];if(_f){var n_=_n[_p],r_=n_===void 0||_f(n_,_p,_n);if(r_!==!0)throw new BS("option "+_p+" must be "+r_,BS.ERR_BAD_OPTION_VALUE)}else if(_o!==!0)throw new BS("Unknown option "+_p,BS.ERR_BAD_OPTION)}},validators:_T},CD=h5.validators;function AD(_n){this.defaults=_n,this.interceptors={request:new lI,response:new lI}}AD.prototype.request=function(_n,_r){typeof _n=="string"?(_r=_r||{}).url=_n:_r=_n||{},(_r=dF(this.defaults,_r)).method?_r.method=_r.method.toLowerCase():this.defaults.method?_r.method=this.defaults.method.toLowerCase():_r.method="get";var _o=_r.transitional;_o!==void 0&&h5.assertOptions(_o,{silentJSONParsing:CD.transitional(CD.boolean),forcedJSONParsing:CD.transitional(CD.boolean),clarifyTimeoutError:CD.transitional(CD.boolean)},!1);var _a=[],_u=!0;this.interceptors.request.forEach(function(u_){typeof u_.runWhen=="function"&&u_.runWhen(_r)===!1||(_u=_u&&u_.synchronous,_a.unshift(u_.fulfilled,u_.rejected))});var _p,_f=[];if(this.interceptors.response.forEach(function(u_){_f.push(u_.fulfilled,u_.rejected)}),!_u){var n_=[pU,void 0];for(Array.prototype.unshift.apply(n_,_a),n_=n_.concat(_f),_p=Promise.resolve(_r);n_.length;)_p=_p.then(n_.shift(),n_.shift());return _p}for(var r_=_r;_a.length;){var o_=_a.shift(),s_=_a.shift();try{r_=o_(r_)}catch(u_){s_(u_);break}}try{_p=pU(r_)}catch(u_){return Promise.reject(u_)}for(;_f.length;)_p=_p.then(_f.shift(),_f.shift());return _p},AD.prototype.getUri=function(_n){_n=dF(this.defaults,_n);var _r=QK(_n.baseURL,_n.url);return jR(_r,_n.params,_n.paramsSerializer)},MS.forEach(["delete","get","head","options"],function(_n){AD.prototype[_n]=function(_r,_o){return this.request(dF(_o||{},{method:_n,url:_r,data:(_o||{}).data}))}}),MS.forEach(["post","put","patch"],function(_n){function _r(_o){return function(_a,_u,_p){return this.request(dF(_p||{},{method:_n,headers:_o?{"Content-Type":"multipart/form-data"}:{},url:_a,data:_u}))}}AD.prototype[_n]=_r(),AD.prototype[_n+"Form"]=_r(!0)});var XK=AD,ZK=ID;function OD(_n){if(typeof _n!="function")throw new TypeError("executor must be a function.");var _r;this.promise=new Promise(function(_a){_r=_a});var _o=this;this.promise.then(function(_a){if(_o._listeners){var _u,_p=_o._listeners.length;for(_u=0;_u<_p;_u++)_o._listeners[_u](_a);_o._listeners=null}}),this.promise.then=function(_a){var _u,_p=new Promise(function(_f){_o.subscribe(_f),_u=_f}).then(_a);return _p.cancel=function(){_o.unsubscribe(_u)},_p},_n(function(_a){_o.reason||(_o.reason=new ZK(_a),_r(_o.reason))})}OD.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},OD.prototype.subscribe=function(_n){this.reason?_n(this.reason):this._listeners?this._listeners.push(_n):this._listeners=[_n]},OD.prototype.unsubscribe=function(_n){if(this._listeners){var _r=this._listeners.indexOf(_n);_r!==-1&&this._listeners.splice(_r,1)}},OD.source=function(){var _n;return{token:new OD(function(_r){_n=_r}),cancel:_n}};var e7=OD,t7=JS,p5=JS,n7=Q3,hF=XK,r7=t0,yR=function _n(_r){var _o=new hF(_r),_a=n7(hF.prototype.request,_o);return p5.extend(_a,hF.prototype,_o),p5.extend(_a,_o),_a.create=function(_u){return _n(r7(_r,_u))},_a}(H_);yR.Axios=hF,yR.CanceledError=ID,yR.CancelToken=e7,yR.isCancel=nE,yR.VERSION=k0,yR.toFormData=sF,yR.AxiosError=dO,yR.Cancel=yR.CanceledError,yR.all=function(_n){return Promise.all(_n)},yR.spread=function(_n){return function(_r){return _n.apply(null,_r)}},yR.isAxiosError=function(_n){return t7.isObject(_n)&&_n.isAxiosError===!0},iU.exports=yR,iU.exports.default=yR;var dI=iU.exports;class i7{constructor(_r){p_(this,"logger",void 0),p_(this,"prefixLists",[]),this.logger=_r}debug(){for(var _r=arguments.length,_o=new Array(_r),_a=0;_a<_r;_a++)_o[_a]=arguments[_a];this.logger.debug(...this.prefixLists,..._o)}info(){for(var _r=arguments.length,_o=new Array(_r),_a=0;_a<_r;_a++)_o[_a]=arguments[_a];this.logger.info(...this.prefixLists,..._o)}warning(){for(var _r=arguments.length,_o=new Array(_r),_a=0;_a<_r;_a++)_o[_a]=arguments[_a];this.logger.warning(...this.prefixLists,..._o)}error(){for(var _r=arguments.length,_o=new Array(_r),_a=0;_a<_r;_a++)_o[_a]=arguments[_a];this.logger.error(...this.prefixLists,..._o)}prefix(_r){return this.prefixLists.push(_r),this}popPrefix(){return this.prefixLists.pop(),this}}class lS{constructor(){p_(this,"_events",{}),p_(this,"addListener",this.on)}getListeners(_r){return this._events[_r]?this._events[_r].map(_o=>_o.listener):[]}on(_r,_o){this._events[_r]||(this._events[_r]=[]);const _a=this._events[_r];this._indexOfListener(_a,_o)===-1&&_a.push({listener:_o,once:!1})}once(_r,_o){this._events[_r]||(this._events[_r]=[]);const _a=this._events[_r];this._indexOfListener(_a,_o)===-1&&_a.push({listener:_o,once:!0})}off(_r,_o){if(!this._events[_r])return;const _a=this._events[_r],_u=this._indexOfListener(_a,_o);_u!==-1&&_a.splice(_u,1),this._events[_r].length===0&&delete this._events[_r]}removeAllListeners(_r){_r?delete this._events[_r]:this._events={}}emit(_r){this._events[_r]||(this._events[_r]=[]);const _o=this._events[_r].map(_f=>_f);for(var _a=arguments.length,_u=new Array(_a>1?_a-1:0),_p=1;_p<_a;_p++)_u[_p-1]=arguments[_p];for(let _f=0;_f<_o.length;_f+=1){const n_=_o[_f];n_.once&&this.off(_r,n_.listener),n_.listener.apply(this,_u||[])}}_indexOfListener(_r,_o){let _a=_r.length;for(;_a--;)if(_r[_a].listener===_o)return _a;return-1}}const pF=new class extends lS{reportLogUploadError(_n){this.emit("REPORT_LOG_UPLOAD",_n)}};let k_;(function(_n){_n.UNEXPECTED_ERROR="UNEXPECTED_ERROR",_n.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",_n.TIMEOUT="TIMEOUT",_n.INVALID_PARAMS="INVALID_PARAMS",_n.NOT_READABLE="NOT_READABLE",_n.NOT_SUPPORTED="NOT_SUPPORTED",_n.INVALID_OPERATION="INVALID_OPERATION",_n.OPERATION_ABORTED="OPERATION_ABORTED",_n.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",_n.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",_n.NETWORK_ERROR="NETWORK_ERROR",_n.NETWORK_TIMEOUT="NETWORK_TIMEOUT",_n.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",_n.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",_n.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",_n.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",_n.ELECTRON_IS_NULL="ELECTRON_IS_NULL",_n.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",_n.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",_n.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",_n.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",_n.PERMISSION_DENIED="PERMISSION_DENIED",_n.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",_n.TRACK_IS_DISABLED="TRACK_IS_DISABLED",_n.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",_n.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",_n.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",_n.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",_n.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",_n.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",_n.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",_n.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",_n.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",_n.UID_CONFLICT="UID_CONFLICT",_n.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",_n.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",_n.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",_n.INVALID_TRACK="INVALID_TRACK",_n.SENDER_NOT_FOUND="SENDER_NOT_FOUND",_n.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",_n.SET_ANSWER_FAILED="SET_ANSWER_FAILED",_n.ICE_FAILED="ICE_FAILED",_n.PC_CLOSED="PC_CLOSED",_n.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",_n.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",_n.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",_n.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",_n.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",_n.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",_n.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",_n.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",_n.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",_n.INVALID_REMOTE_USER="INVALID_REMOTE_USER",_n.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",_n.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",_n.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",_n.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",_n.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",_n.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",_n.WS_ABORT="WS_ABORT",_n.WS_DISCONNECT="WS_DISCONNECT",_n.WS_ERR="WS_ERR",_n.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",_n.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",_n.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",_n.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",_n.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",_n.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",_n.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",_n.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",_n.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",_n.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",_n.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",_n.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",_n.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",_n.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",_n.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",_n.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",_n.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",_n.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",_n.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",_n.INVALID_PLUGIN="INVALID_PLUGIN",_n.DISCONNECT_P2P="DISCONNECT_P2P",_n.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT",_n.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",_n.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",_n.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",_n.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",_n.PROHIBITED_OPERATION="PROHIBITED_OPERATION"})(k_||(k_={}));class U_ extends Error{constructor(_r){let _o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",_a=arguments.length>2?arguments[2]:void 0;super(_o),p_(this,"code",void 0),p_(this,"message",void 0),p_(this,"data",void 0),p_(this,"name","AgoraRTCException"),this.code=_r,this.message="AgoraRTCError ".concat(this.code,": ").concat(_o),this.data=_a}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),`
`).concat(this.stack):"".concat(this.stack)}print(){let _r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error";return _r==="error"&&E_.error(this.toString()),_r==="warning"&&E_.warning(this.toString()),this}throw(){throw this.print(),this}}const OS={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function k4(_n,_r){const _o=Math.floor(_r.timeout*Math.pow(_r.timeoutFactor,_n));return Math.min(_r.maxRetryTimeout,_o)}function hO(_n,_r,_o,_a){const _u=Object.assign({},OS,_a);let _p=_u.timeout;const _f=async()=>{await function(o_){return new uE(s_=>{window.setTimeout(s_,o_)})}(_p),_p*=_u.timeoutFactor,_p=Math.min(_u.maxRetryTimeout,_p)};let n_=!1;const r_=new uE(async(o_,s_)=>{_r=_r||(()=>!1),_o=_o||(()=>!0);for(let u_=0;u_<_u.maxRetryCount;u_+=1){if(n_)return s_(new U_(k_.OPERATION_ABORTED));try{const g_=await _n();if(!_r(g_,u_)||u_+1===_u.maxRetryCount)return o_(g_);await _f()}catch(g_){if(!_o(g_,u_)||u_+1===_u.maxRetryCount)return s_(g_);await _f()}}});return r_.cancel=()=>n_=!0,r_}function x4(){const _n=new Date;return _n.toTimeString().split(" ")[0]+":"+_n.getMilliseconds()}function f5(){const _n=new Date,_r=/((\d+:){2}\d+)/.exec(new Date().toUTCString());return _r?(_r==null?void 0:_r[0])+":"+_n.getUTCMilliseconds():_n.toTimeString().split(" ")[0]+":"+_n.getMilliseconds()}const UR={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},fF=Date.now(),fU=_n=>{for(const _r in UR)if(Object.prototype.hasOwnProperty.call(UR,_r)&&UR[_r]===_n)return _r;return"DEFAULT"},E_=new class{constructor(){p_(this,"proxyServerURL",void 0),p_(this,"logLevel",UR.DEBUG),p_(this,"uploadState","collecting"),p_(this,"uploadLogWaitingList",[]),p_(this,"uploadLogUploadingList",[]),p_(this,"uploadErrorCount",0),p_(this,"currentLogID",0),p_(this,"url",void 0),p_(this,"extLog",(_n,_r)=>{this.appendLogToWaitingList(_n,..._r)})}debug(){for(var _n=arguments.length,_r=new Array(_n),_o=0;_o<_n;_o++)_r[_o]=arguments[_o];const _a=[UR.DEBUG].concat(_r);this.log.apply(this,_a)}info(){for(var _n=arguments.length,_r=new Array(_n),_o=0;_o<_n;_o++)_r[_o]=arguments[_o];const _a=[UR.INFO].concat(_r);this.log.apply(this,_a)}warning(){for(var _n=arguments.length,_r=new Array(_n),_o=0;_o<_n;_o++)_r[_o]=arguments[_o];const _a=[UR.WARNING].concat(_r);this.log.apply(this,_a)}error(){for(var _n=arguments.length,_r=new Array(_n),_o=0;_o<_n;_o++)_r[_o]=arguments[_o];const _a=[UR.ERROR].concat(_r);this.log.apply(this,_a)}upload(){for(var _n=arguments.length,_r=new Array(_n),_o=0;_o<_n;_o++)_r[_o]=arguments[_o];const _a=[UR.DEBUG].concat(_r);this.uploadLog.apply(this,_a)}setLogLevel(_n){_n=Math.min(Math.max(0,_n),4),this.logLevel=_n}enableLogUpload(){P0("UPLOAD_LOG",!0)}disableLogUpload(){P0("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(_n){this.proxyServerURL=_n}prefix(_n){return new i7(this).prefix(_n)}log(){for(var _n=arguments.length,_r=new Array(_n),_o=0;_o<_n;_o++)_r[_o]=arguments[_o];if(Date.now()-fF<100)return void setTimeout(()=>{this.log(..._r)},Date.now()-fF);const _a=Math.max(0,Math.min(4,_r[0]));if(_r[0]=x4()+" Agora-SDK [".concat(fU(_a),"]:"),this.appendLogToWaitingList(_a,..._r),_a<this.logLevel)return;const _u=x4()+" %cAgora-SDK [".concat(fU(_a),"]:");let _p=[];if(!J_("USE_NEW_LOG"))switch(_a){case UR.DEBUG:_p=[_u,"color: #64B5F6;"].concat(_r.slice(1)),console.log.apply(console,_p);break;case UR.INFO:_p=[_u,"color: #1E88E5; font-weight: bold;"].concat(_r.slice(1)),console.log.apply(console,_p);break;case UR.WARNING:_p=[_u,"color: #FB8C00; font-weight: bold;"].concat(_r.slice(1)),console.warn.apply(console,_p);break;case UR.ERROR:_p=[_u,"color: #B00020; font-weight: bold;"].concat(_r.slice(1)),console.error.apply(console,_p)}}uploadLog(){for(var _n=arguments.length,_r=new Array(_n),_o=0;_o<_n;_o++)_r[_o]=arguments[_o];if(Date.now()-fF<100)return void setTimeout(()=>{this.uploadLog(..._r)},Date.now()-fF);const _a=Math.max(0,Math.min(4,_r[0]));_r[0]=x4()+" Agora-SDK [".concat(fU(_a),"]:"),this.appendLogToWaitingList(_a,..._r)}appendLogToWaitingList(_n){if(!J_("UPLOAD_LOG"))return;for(var _r=arguments.length,_o=new Array(_r>1?_r-1:0),_a=1;_a<_r;_a++)_o[_a-1]=arguments[_a];Array.isArray(_o[0])?_o[0][0]=f5()+" Agora-SDK [".concat(fU(_n),"]:"):_o[0]=f5()+" Agora-SDK [".concat(fU(_n),"]:");let _u="";_o.forEach(_p=>{typeof _p=="object"&&(_p=JSON.stringify(_p)),_u+="".concat(_p," ")}),this.uploadLogWaitingList.push({payload_str:_u,log_level:_n,log_item_id:this.currentLogID++}),this.uploadState==="uploading"&&this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}async uploadLogs(){const _n=this.uploadLogUploadingList,_r={sdk_version:$R,process_id:J_("PROCESS_ID"),payload:JSON.stringify(_n)};return hO(async()=>{const _o=await dI.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(J_("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(J_("LOG_UPLOAD_SERVER"),"/upload/v1")),_r,{responseType:"text"});if(_o.data!=="OK"){const _a=new Error("unexpected upload log response");throw _a.response=_o,_a}},()=>(this.uploadLogUploadingList=[],!1),_o=>(_o.response?pF.reportLogUploadError({status:_o.response.status,data:_o.response.data,headers:_o.response.headers,message:_o.message}):_o.request?pF.reportLogUploadError({status:_o.request.status,message:_o.message}):pF.reportLogUploadError({status:-1,message:_o.message}),!0),{timeout:J_("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:J_("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){this.uploadLogUploadingList.length===0&&this.uploadLogWaitingList.length===0||(this.uploadLogUploadingList.length===0&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,J_("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),J_("UPLOAD_LOG_INTERVAL"))}).catch(_n=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),J_("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout(()=>this.uploadLogInterval(),J_("UPLOAD_LOG_RETRY_INTERVAL_V1"))}))}},L4="v4.17.2-0-gb960eec4-dirty(4/20/2023, 10:39:51 AM)",$R=function(_n){if(_n.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return _n;const _r=_n.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(_r&&_r[1]&&_r[2]){const _a=_r[1],_u=_r[2];return"".concat(_a,".").concat(_u)}const _o=_n.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(_o&&_o[1]&&_o[2]){const _a=_o[1],_u=_o[2];return"".concat(_a,".").concat(100*(Number(_u)+1))}return"4.0.0.999"}("4.17.2"),M4=function(){try{return JSON.parse("true")===!0}catch{return!0}}(),m5=["CHINA","GLOBAL"],ER=function(){const _n="us".concat("erna","me"),_r="pa".concat("sswo","rd"),_o=["t","s","t"];_o.splice(1,0,"e");const _a=_o.join(""),_u=[];for(let n_=0;n_<6;n_++)_u.push("1");const _p=_u.join(""),_f={};return _f[_n]=_a,_f[_r]=_p,Object.assign(_f,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=ER;const o7={"90p":s0(160,90),"90p_1":s0(160,90),"120p":s0(160,120,15,30,65),"120p_1":s0(160,120,15,30,65),"120p_3":s0(120,120,15,30,50),"120p_4":s0(212,120),"180p":s0(320,180,15,30,140),"180p_1":s0(320,180,15,30,140),"180p_3":s0(180,180,15,30,100),"180p_4":s0(240,180,15,30,120),"240p":s0(320,240,15,40,200),"240p_1":s0(320,240,15,40,200),"240p_3":s0(240,240,15,40,140),"240p_4":s0(424,240,15,40,220),"360p":s0(640,360,15,80,400),"360p_1":s0(640,360,15,80,400),"360p_3":s0(360,360,15,80,260),"360p_4":s0(640,360,30,80,600),"360p_6":s0(360,360,30,80,400),"360p_7":s0(480,360,15,80,320),"360p_8":s0(480,360,30,80,490),"360p_9":s0(640,360,15,80,800),"360p_10":s0(640,360,24,80,800),"360p_11":s0(640,360,24,80,1e3),"480p":s0(640,480,15,100,500),"480p_1":s0(640,480,15,100,500),"480p_2":s0(640,480,30,100,1e3),"480p_3":s0(480,480,15,100,400),"480p_4":s0(640,480,30,100,750),"480p_6":s0(480,480,30,100,600),"480p_8":s0(848,480,15,100,610),"480p_9":s0(848,480,30,100,930),"480p_10":s0(640,480,10,100,400),"720p":s0(1280,720,15,120,1130),"720p_1":s0(1280,720,15,120,1130),"720p_2":s0(1280,720,30,120,2e3),"720p_3":s0(1280,720,30,120,1710),"720p_5":s0(960,720,15,120,910),"720p_6":s0(960,720,30,120,1380),"1080p":s0(1920,1080,15,120,2080),"1080p_1":s0(1920,1080,15,120,2080),"1080p_2":s0(1920,1080,30,120,3e3),"1080p_3":s0(1920,1080,30,120,3150),"1080p_5":s0(1920,1080,60,120,4780),"1440p":s0(2560,1440,30,120,4850),"1440p_1":s0(2560,1440,30,120,4850),"1440p_2":s0(2560,1440,60,120,7350),"4k":s0(3840,2160,30,120,8910),"4k_1":s0(3840,2160,30,120,8910),"4k_3":s0(3840,2160,60,120,13500)},s7={"480p":hI(640,480,5),"480p_1":hI(640,480,5),"480p_2":hI(640,480,30),"480p_3":hI(640,480,15),"720p":hI(1280,720,5),"720p_1":hI(1280,720,5),"720p_2":hI(1280,720,30),"720p_3":hI(1280,720,15),"1080p":hI(1920,1080,5),"1080p_1":hI(1920,1080,5),"1080p_2":hI(1920,1080,30),"1080p_3":hI(1920,1080,15)},a7={"1SL1TL":P4(1,1),"3SL3TL":P4(3,3),"2SL3TL":P4(2,3)};function lL(_n){return _n||(_n="480p_1"),typeof _n=="string"?Object.assign({},o7[_n]):_n}function D4(_n){return typeof _n=="string"?Object.assign({},s7[_n]):_n}function mF(_n){return typeof _n=="string"?Object.assign({},a7[_n]):_n}const c7={speech_low_quality:ND(16e3,!1),speech_standard:ND(32e3,!1,18),music_standard:ND(48e3,!1),standard_stereo:ND(48e3,!0,56),high_quality:ND(48e3,!1,128),high_quality_stereo:ND(48e3,!0,192)};function _F(_n){return typeof _n=="string"?Object.assign({},c7[_n]):_n}function P0(_n,_r,_o){Object.keys(WT).includes(_n)&&(!_o&&Object.keys(dL).includes(_n)||(WT[_n]=_r))}function J_(_n){return WT[_n]}const WT={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:m5,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TWCC:!1,PUBLISH_TWCC:!1,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION:2e3,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!0,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ENABLE_USER_LICENSE_CHECK:!0,SIGNAL_CHANNEL:0,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0}},dL={};function ND(_n,_r,_o){return{sampleRate:_n,stereo:_r,bitrate:_o}}function s0(_n,_r,_o,_a,_u){return{width:_n,height:_r,frameRate:_o,bitrateMin:_a,bitrateMax:_u}}function hI(_n,_r,_o,_a,_u){return{width:{max:_n},height:{max:_r},frameRate:_o,bitrateMin:_a,bitrateMax:_u}}function P4(_n,_r){return{numSpatialLayers:_n,numTemporalLayers:_r}}M4||(WT.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],WT.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],WT.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],WT.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],WT.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],WT.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],WT.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",WT.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",WT.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",WT.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",WT.AREAS=["NORTH_AMERICA","OVERSEA"]);const u7=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],hL=[],mU=[];function pL(_n,_r){return!!_r&&hL.some(_o=>_o.uid===_n&&_o.channelName===_r)}var l7=RO,d7=yT,h7=Y_,j4=function(_n,_r,_o){var _a=l7(_r);_a in _n?d7.f(_n,_a,h7(0,_o)):_n[_a]=_o},_5=q0,p7=XR,f7=j4,m7=c_.Array,_7=Math.max,g5=function(_n,_r,_o){for(var _a=p7(_n),_u=_5(_r,_a),_p=_5(_o===void 0?_a:_o,_a),_f=m7(_7(_p-_u,0)),n_=0;_u<_p;_u++,n_++)f7(_f,n_,_n[_u]);return _f.length=n_,_f},v5=g5,g7=Math.floor,U4=function(_n,_r){var _o=_n.length,_a=g7(_o/2);return _o<8?v7(_n,_r):y7(_n,U4(v5(_n,0,_a),_r),U4(v5(_n,_a),_r),_r)},v7=function(_n,_r){for(var _o,_a,_u=_n.length,_p=1;_p<_u;){for(_a=_p,_o=_n[_p];_a&&_r(_n[_a-1],_o)>0;)_n[_a]=_n[--_a];_a!==_p++&&(_n[_a]=_o)}return _n},y7=function(_n,_r,_o,_a){for(var _u=_r.length,_p=_o.length,_f=0,n_=0;_f<_u||n_<_p;)_n[_f+n_]=_f<_u&&n_<_p?_a(_r[_f],_o[n_])<=0?_r[_f++]:_o[n_++]:_f<_u?_r[_f++]:_o[n_++];return _n},E7=U4,y5=RE.match(/firefox\/(\d+)/i),b7=!!y5&&+y5[1],S7=/MSIE|Trident/.test(RE),E5=RE.match(/AppleWebKit\/(\d+)\./),w7=!!E5&&+E5[1],T7=v0,b5=e_,R7=rR,I7=KR,C7=XR,S5=YO,$4=Wt,A7=E7,O7=m1,w5=b7,N7=S7,T5=tR,R5=w7,Q1=[],I5=b5(Q1.sort),k7=b5(Q1.push),x7=$4(function(){Q1.sort(void 0)}),L7=$4(function(){Q1.sort(null)}),M7=O7("sort"),C5=!$4(function(){if(T5)return T5<70;if(!(w5&&w5>3)){if(N7)return!0;if(R5)return R5<603;var _n,_r,_o,_a,_u="";for(_n=65;_n<76;_n++){switch(_r=String.fromCharCode(_n),_n){case 66:case 69:case 70:case 72:_o=3;break;case 68:case 71:_o=4;break;default:_o=2}for(_a=0;_a<47;_a++)Q1.push({k:_r+_a,v:_o})}for(Q1.sort(function(_p,_f){return _f.v-_p.v}),_a=0;_a<Q1.length;_a++)_r=Q1[_a].k.charAt(0),_u.charAt(_u.length-1)!==_r&&(_u+=_r);return _u!=="DGBEFHACIJK"}});T7({target:"Array",proto:!0,forced:x7||!L7||!M7||!C5},{sort:function(_n){_n!==void 0&&R7(_n);var _r=I7(this);if(C5)return _n===void 0?I5(_r):I5(_r,_n);var _o,_a,_u=[],_p=C7(_r);for(_a=0;_a<_p;_a++)_a in _r&&k7(_u,_r[_a]);for(A7(_u,function(_f){return function(n_,r_){return r_===void 0?-1:n_===void 0?1:_f!==void 0?+_f(n_,r_)||0:S5(n_)>S5(r_)?1:-1}}(_n)),_o=_u.length,_a=0;_a<_o;)_r[_a]=_u[_a++];for(;_a<_p;)delete _r[_a++];return _r}});var D7=CS("Array").sort,P7=t_,j7=D7,F4=Array.prototype,Y4=function(_n){var _r=_n.sort;return _n===F4||P7(F4,_n)&&_r===F4.sort?j7:_r};function _U(_n,_r){if(typeof _n!="boolean")throw new U_(k_.INVALID_PARAMS,"Invalid ".concat(_r,": The value is of the boolean type."))}function $S(_n,_r,_o){if(!_o.includes(_n))throw new U_(k_.INVALID_PARAMS,"".concat(_r," can only be set as ").concat(JSON.stringify(_o)))}function W0(_n,_r){let _o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,_a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e4,_u=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(_n<_o||_n>_a||_u&&!U7(_n))throw new U_(k_.INVALID_PARAMS,"invalid ".concat(_r,": the value range is [").concat(_o,", ").concat(_a,"]. integer only"))}function B4(_n,_r){if(typeof _n!="number"){if(!(_n.min||_n.max||_n.ideal||_n.exact))throw new U_(k_.INVALID_PARAMS,"".concat(_r," is not a valid ConstrainLong"));_n.min!==void 0&&W0(_n.min,"".concat(_r,".min"),0,1/0),_n.max!==void 0&&W0(_n.max,"".concat(_r,".max"),1,1/0),_n.exact!==void 0&&W0(_n.exact,"".concat(_r,".exact"),1,1/0),_n.ideal!==void 0&&W0(_n.ideal,"".concat(_r,".ideal"),1,1/0)}else W0(_n,_r,1,1/0)}function oT(_n,_r){let _o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,_a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:255,_u=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(_n==null)throw new U_(k_.INVALID_PARAMS,"".concat(_r||"param"," cannot be empty"));if(!A5(_n,_o,_a,_u))throw new U_(k_.INVALID_PARAMS,"Invalid ".concat(_r||"string param",": Length of the string: [").concat(_o,",").concat(_a,"].").concat(_u?" ASCII characters only.":""))}function KO(_n,_r){if(!Array.isArray(_n))throw new U_(k_.INVALID_PARAMS,"".concat(_r," should be an array"))}function V4(_n){if(typeof _n!="string"||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(_n))throw E_.error("Invalid Channel Name ".concat(_n)),new U_(k_.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function H4(_n){if(_r=_n,!(typeof _r=="number"&&Math.floor(_r)===_r&&0<=_r&&_r<=4294967295||A5(_n,1,255)))throw E_.error("Invalid UID ".concat(_n," ").concat(typeof _n)),new U_(k_.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var _r;typeof _n=="string"&&E_.warning("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}function Q0(_n){return _n==null}function A5(_n){let _r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,_o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:255,_a=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return typeof _n=="string"&&_n.length<=_o&&_n.length>=_r&&(!_a||$7(_n))}function U7(_n){return typeof _n=="number"&&_n%1==0}function $7(_n){if(typeof _n!="string")return!1;for(let _r=0;_r<_n.length;_r+=1){const _o=_n.charCodeAt(_r);if(_o<0||_o>255)return!1}return!0}let O5,N5,sT;(function(_n){_n.FREE="free",_n.UPLOADING="uploading"})(O5||(O5={})),function(_n){_n[_n.MISC=0]="MISC",_n[_n.INTERNAL_EVENT=1]="INTERNAL_EVENT",_n[_n.PUBLIC_EVENT=2]="PUBLIC_EVENT",_n[_n.WEB_EVENT=3]="WEB_EVENT",_n[_n.INTERNAL_API=4]="INTERNAL_API",_n[_n.WEB_API=5]="WEB_API",_n[_n.PUBLIC_API=6]="PUBLIC_API"}(N5||(N5={})),function(_n){_n.NONE="none",_n.INIT="init",_n.CANPLAY="canplay",_n.PLAYING="playing",_n.PAUSED="paused",_n.SUSPEND="suspend",_n.STALLED="stalled",_n.WAITING="waiting",_n.ERROR="error",_n.DESTROYED="destroyed",_n.ABORT="abort",_n.ENDED="ended",_n.EMPTIED="emptied",_n.LOADEDDATA="loadeddata"}(sT||(sT={}));const G4={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};function F7(_n){return oT(_n.reportId,"params.reportId",0,100,!1),oT(_n.category,"params.category",0,100,!1),oT(_n.event,"params.event",0,100,!1),oT(_n.label,"params.label",0,100,!1),W0(_n.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}const Y7={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let aT,oS,k5,q4,wS,nS,fL,JO,xD,gU,bR,cT,LE,W4,w0,r0,PT,O0,CE,PE,zT,XE,x5,KT;function L5(_n){return W0(_n.timeout,"config.timeout",0,1e5),W0(_n.timeoutFactor,"config.timeoutFactor",0,100,!1),W0(_n.maxRetryCount,"config.maxRetryConfig",0,1/0),W0(_n.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function B7(_n){return $S(_n.codec,"config.codec",["vp8","vp9","av1","h264"]),$S(_n.mode,"config.mode",["rtc","live"]),_n.audioCodec!==void 0&&$S(_n.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),_n.proxyServer!==void 0&&oT(_n.proxyServer,"config.proxyServer",1,1e4),_n.turnServer!==void 0&&M5(_n.turnServer),_n.httpRetryConfig!==void 0&&L5(_n.httpRetryConfig),_n.websocketRetryConfig!==void 0&&L5(_n.websocketRetryConfig),!0}function vU(_n){if(!Array.isArray(_n)||_n.length<1)return!1;try{_n.forEach(_r=>{if(!_r.urls)throw Error()})}catch{return!1}return!0}function M5(_n){return oT(_n.turnServerURL,"turnServerURL"),oT(_n.username,"username"),oT(_n.password,"password"),_n.udpport&&W0(_n.udpport,"udpport",1,99999,!0),_n.forceturn&&_U(_n.forceturn,"forceturn"),_n.security&&_U(_n.security,"security"),_n.tcpport&&W0(_n.tcpport,"tcpport",1,99999,!0),!0}function D5(_n){return _n.level!==void 0&&$S(_n.level,"level",[1,2,3]),!0}(function(_n){_n.PUBLISH="publish",_n.SUBSCRIBE="subscribe",_n.WS_COMPRESSOR_INIT="ws_compressor_init",_n.SESSION_INIT="session_init",_n.JOIN_CHOOSE_SERVER="join_choose_server",_n.REQ_USER_ACCOUNT="req_user_account",_n.JOIN_GATEWAY="join_gateway",_n.REJOIN_GATEWAY="rejoin_gateway",_n.STREAM_SWITCH="stream_switch",_n.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",_n.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",_n.FIRST_VIDEO_RECEIVED="first_video_received",_n.FIRST_AUDIO_RECEIVED="first_audio_received",_n.FIRST_VIDEO_DECODE="first_video_decode",_n.FIRST_AUDIO_DECODE="first_audio_decode",_n.ON_ADD_AUDIO_STREAM="on_add_audio_stream",_n.ON_ADD_VIDEO_STREAM="on_add_video_stream",_n.ON_UPDATE_STREAM="on_update_stream",_n.ON_REMOVE_STREAM="on_remove_stream",_n.USER_ANALYTICS="req_user_analytics"})(aT||(aT={})),function(_n){_n.SESSION="io.agora.pb.Wrtc.Session",_n.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",_n.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",_n.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",_n.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",_n.PUBLISH="io.agora.pb.Wrtc.Publish",_n.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",_n.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",_n.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",_n.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",_n.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",_n.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",_n.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",_n.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",_n.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",_n.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",_n.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",_n.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",_n.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",_n.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",_n.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",_n.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",_n.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",_n.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",_n.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",_n.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",_n.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",_n.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",_n.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",_n.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed"}(oS||(oS={})),function(_n){_n[_n.WORKER_EVENT=156]="WORKER_EVENT",_n[_n.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(k5||(k5={})),function(_n){_n[_n.SESSION=26]="SESSION",_n[_n.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",_n[_n.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",_n[_n.JOIN_GATEWAY=28]="JOIN_GATEWAY",_n[_n.PUBLISH=30]="PUBLISH",_n[_n.SUBSCRIBE=29]="SUBSCRIBE",_n[_n.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",_n[_n.STREAM_SWITCH=32]="STREAM_SWITCH",_n[_n.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",_n[_n.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",_n[_n.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",_n[_n.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",_n[_n.API_INVOKE=41]="API_INVOKE",_n[_n.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",_n[_n.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",_n[_n.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",_n[_n.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",_n[_n.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",_n[_n.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",_n[_n.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",_n[_n.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",_n[_n.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",_n[_n.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",_n[_n.WORKER_EVENT=156]="WORKER_EVENT",_n[_n.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",_n[_n.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",_n[_n.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",_n[_n.USER_ANALYTICS=1e4]="USER_ANALYTICS",_n[_n.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED"}(q4||(q4={})),function(_n){_n.CREATE_CLIENT="createClient",_n.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",_n.SET_AREA="setArea",_n.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",_n.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",_n.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",_n.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",_n.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",_n.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",_n.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",_n.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",_n.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",_n.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",_n.START_PROXY_SERVER="Client.startProxyServer",_n.STOP_PROXY_SERVER="Client.stopProxyServer",_n.SET_PROXY_SERVER="Client.setProxyServer",_n.SET_TURN_SERVER="Client.setTurnServer",_n.SET_CLIENT_ROLE="Client.setClientRole",_n.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",_n.ENABLE_DUAL_STREAM="Client.enableDualStream",_n.DISABLE_DUAL_STREAM="Client.disableDualStream",_n.JOIN="Client.join",_n.LEAVE="Client.leave",_n.PUBLISH="Client.publish",_n.UNPUBLISH="Client.unpublish",_n.SUBSCRIBE="Client.subscribe",_n.MASS_SUBSCRIBE="Client.massSubscribe",_n.MASS_UNSUBSCRIBE="Client.massUnsubscribe",_n.UNSUBSCRIBE="Client.unsubscribe",_n.RENEW_TOKEN="Client.renewToken",_n.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",_n.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",_n.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",_n.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",_n.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",_n.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",_n.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",_n.DATACHANNEL_FAILBACK="Client._datachannelFailback",_n.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",_n.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",_n.START_LIVE_STREAMING="Client.startLiveStreaming",_n.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",_n.STOP_LIVE_STREAMING="Client.stopLiveStreaming",_n.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",_n.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",_n.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",_n.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",_n.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",_n.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",_n.SET_CONFIG_DISTRIBUTE="_configDistribute",_n.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",_n.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",_n.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",_n.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",_n.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",_n.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",_n.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",_n.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",_n.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",_n.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",_n.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",_n.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",_n.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",_n.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",_n.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",_n.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",_n.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",_n.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",_n.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",_n.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",_n.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",_n.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",_n.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",_n.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",_n.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",_n.STREAM_TYPE_CHANGE="streamTypeChange",_n.CONNECTION_STATE_CHANGE="connectionStateChange",_n.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage"}(wS||(wS={})),function(_n){_n.TRACER="tracer"}(nS||(nS={})),function(_n){_n.IDLE="IDLE",_n.INITING="INITING",_n.INITEND="INITEND"}(fL||(fL={})),function(_n){_n.STATE_CHANGE="state_change",_n.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",_n.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",_n.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(JO||(JO={})),function(_n){_n[_n.ACCESS_POINT=101]="ACCESS_POINT",_n[_n.UNILBS=201]="UNILBS",_n[_n.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(xD||(xD={})),function(_n){_n[_n.IIIEGAL_APPID=1]="IIIEGAL_APPID",_n[_n.IIIEGAL_UID=2]="IIIEGAL_UID",_n[_n.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(gU||(gU={})),function(_n){_n[_n.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",_n[_n.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",_n[_n.INTERNAL_ERROR=8]="INTERNAL_ERROR",_n[_n.NO_AUTHORIZED=9]="NO_AUTHORIZED",_n[_n.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",_n[_n.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",_n[_n.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",_n[_n.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",_n[_n.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",_n[_n.USER_OVERLOAD=16]="USER_OVERLOAD",_n[_n.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",_n[_n.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(bR||(bR={})),function(_n){_n[_n.NO_FLAG_SET=100]="NO_FLAG_SET",_n[_n.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",_n[_n.INVALID_FALG_SET=102]="INVALID_FALG_SET",_n[_n.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",_n[_n.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",_n[_n.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",_n[_n.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",_n[_n.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",_n[_n.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",_n[_n.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",_n[_n.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",_n[_n.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",_n[_n.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",_n[_n.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",_n[_n.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",_n[_n.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",_n[_n.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",_n[_n.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",_n[_n.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(cT||(cT={})),function(_n){_n[_n.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",_n[_n.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",_n[_n.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",_n[_n.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",_n[_n.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",_n[_n.K_TICKET_INVALID=7]="K_TICKET_INVALID",_n[_n.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",_n[_n.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",_n[_n.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",_n[_n.K_UID_BANNED=14]="K_UID_BANNED",_n[_n.K_IP_BANNED=15]="K_IP_BANNED",_n[_n.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",_n[_n.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",_n[_n.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",_n[_n.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",_n[_n.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",_n[_n.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",_n[_n.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",_n[_n.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",_n[_n.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",_n[_n.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",_n[_n.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",_n[_n.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",_n[_n.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",_n[_n.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",_n[_n.ERR_INVALID_UID=117]="ERR_INVALID_UID",_n[_n.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",_n[_n.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",_n[_n.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",_n[_n.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",_n[_n.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",_n[_n.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",_n[_n.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",_n[_n.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",_n[_n.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",_n[_n.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",_n[_n.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",_n[_n.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",_n[_n.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",_n[_n.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",_n[_n.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",_n[_n.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",_n[_n.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",_n[_n.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",_n[_n.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",_n[_n.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",_n[_n.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",_n[_n.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",_n[_n.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",_n[_n.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",_n[_n.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",_n[_n.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",_n[_n.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",_n[_n.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",_n[_n.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",_n[_n.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",_n[_n.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",_n[_n.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",_n[_n.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",_n[_n.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",_n[_n.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",_n[_n.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",_n[_n.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(LE||(LE={})),function(_n){_n[_n.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",_n[_n.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",_n[_n.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY"}(W4||(W4={})),function(_n){_n.LEAVE="LEAVE",_n.NETWORK_ERROR="NETWORK_ERROR",_n.SERVER_ERROR="SERVER_ERROR",_n.UID_BANNED="UID_BANNED",_n.IP_BANNED="IP_BANNED",_n.CHANNEL_BANNED="CHANNEL_BANNED",_n.FALLBACK="FALLBACK",_n.LICENSE_MISSING="LICENSE_MISSING",_n.LICENSE_EXPIRED="LICENSE_EXPIRED",_n.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",_n.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",_n.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",_n.LICENSE_ILLEGAL="LICENSE_ILLEGAL"}(w0||(w0={})),function(_n){_n.CONNECTION_STATE_CHANGE="connection-state-change",_n.MEDIA_RECONNECT_START="media-reconnect-start",_n.MEDIA_RECONNECT_END="media-reconnect-end",_n.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",_n.USER_JOINED="user-joined",_n.USER_LEAVED="user-left",_n.USER_PUBLISHED="user-published",_n.USER_UNPUBLISHED="user-unpublished",_n.USER_INFO_UPDATED="user-info-updated",_n.CLIENT_BANNED="client-banned",_n.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",_n.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",_n.VOLUME_INDICATOR="volume-indicator",_n.CRYPT_ERROR="crypt-error",_n.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",_n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",_n.NETWORK_QUALITY="network-quality",_n.STREAM_TYPE_CHANGED="stream-type-changed",_n.STREAM_FALLBACK="stream-fallback",_n.RECEIVE_METADATA="receive-metadata",_n.STREAM_MESSAGE="stream-message",_n.LIVE_STREAMING_ERROR="live-streaming-error",_n.LIVE_STREAMING_WARNING="live-streaming-warning",_n.INJECT_STREAM_STATUS="stream-inject-status",_n.EXCEPTION="exception",_n.ERROR="error",_n.P2P_LOST="p2p_lost",_n.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",_n.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",_n.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",_n.PUBLISHED_USER_LIST="published-user-list",_n.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",_n.CONTENT_INSPECT_ERROR="content-inspect-error",_n.CONTENT_INSPECT_RESULT="content-inspect-result"}(r0||(r0={})),function(_n){_n.NETWORK_ERROR="NETWORK_ERROR",_n.SERVER_ERROR="SERVER_ERROR",_n.MULTI_IP="MULTI_IP",_n.TIMEOUT="TIMEOUT",_n.OFFLINE="OFFLINE",_n.LEAVE="LEAVE",_n.P2P_FAILED="P2P_FAILED",_n.FALLBACK="FALLBACK"}(PT||(PT={})),function(_n){_n.CONNECTING="connecting",_n.CONNECTED="connected",_n.RECONNECTING="reconnecting",_n.CLOSED="closed"}(O0||(O0={})),function(_n){_n.WS_CONNECTED="ws_connected",_n.WS_RECONNECTING="ws_reconnecting",_n.WS_CLOSED="ws_closed",_n.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",_n.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",_n.ON_BINARY_DATA="on_binary_data",_n.REQUEST_RECOVER="request_recover",_n.REQUEST_JOIN_INFO="request_join_info",_n.REQUEST_REJOIN_INFO="req_rejoin_info",_n.IS_P2P_DISCONNECTED="is_p2p_dis",_n.DISCONNECT_P2P="dis_p2p",_n.ABORT_P2P_EXECUTION="abort_p2p_execution",_n.NEED_RENEW_SESSION="need-sid",_n.REPORT_JOIN_GATEWAY="report_join_gateway",_n.REQUEST_TIMEOUT="request_timeout",_n.REQUEST_SUCCESS="request_success",_n.JOIN_RESPONSE="join_response",_n.DATACHANNEL_PRECONNECT="datachannel_preconnect",_n.DATACHANNEL_CONNECTING="datachannel_connecting",_n.DATACHANNEL_FAILBACK="datachannel_failback"}(CE||(CE={})),function(_n){_n.PING="ping",_n.PING_BACK="ping_back",_n.JOIN="join_v3",_n.REJOIN="rejoin_v3",_n.LEAVE="leave",_n.SET_CLIENT_ROLE="set_client_role",_n.PUBLISH="publish",_n.UNPUBLISH="unpublish",_n.SUBSCRIBE="subscribe",_n.SUBSCRIBE_STREAMS="subscribe_streams",_n.UNSUBSCRIBE="unsubscribe",_n.UNSUBSCRIBE_STREAMS="unsubscribe_streams",_n.SUBSCRIBE_CHANGE="subscribe_change",_n.TRAFFIC_STATS="traffic_stats",_n.RENEW_TOKEN="renew_token",_n.SWITCH_VIDEO_STREAM="switch_video_stream",_n.DEFAULT_VIDEO_STREAM="default_video_stream",_n.SET_FALLBACK_OPTION="set_fallback_option",_n.GATEWAY_INFO="gateway_info",_n.CONTROL="control",_n.SEND_METADATA="send_metadata",_n.DATA_STREAM="data_stream",_n.PICK_SVC_LAYER="pick_svc_layer",_n.RESTART_ICE="restart_ice",_n.CONNECT_PC="connect_pc",_n.SET_VIDEO_PROFILE="set_video_profile",_n.SET_PARAMETER="set_parameter"}(PE||(PE={})),function(_n){_n.PUBLISH_STATS="publish_stats",_n.PUBLISH_RELATED_STATS="publish_related_stats",_n.SUBSCRIBE_STATS="subscribe_stats",_n.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",_n.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",_n.DENOISER_STATS="denoiser_stats",_n.TRANSPORT_STATS="transport_stats",_n.EXTENSION_USAGE_STATS="extension_usage_stats"}(zT||(zT={})),function(_n){_n.ON_USER_ONLINE="on_user_online",_n.ON_USER_OFFLINE="on_user_offline",_n.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",_n.ON_PUBLISH_STREAM="on_publish_stream",_n.ON_UPLINK_STATS="on_uplink_stats",_n.ON_P2P_LOST="on_p2p_lost",_n.ON_REMOVE_STREAM="on_remove_stream",_n.ON_ADD_AUDIO_STREAM="on_add_audio_stream",_n.ON_ADD_VIDEO_STREAM="on_add_video_stream",_n.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",_n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",_n.ON_USER_BANNED="on_user_banned",_n.ON_USER_LICENSE_BANNED="on_user_license_banned",_n.ON_NOTIFICATION="on_notification",_n.ON_CRYPT_ERROR="on_crypt_error",_n.MUTE_AUDIO="mute_audio",_n.MUTE_VIDEO="mute_video",_n.UNMUTE_AUDIO="unmute_audio",_n.UNMUTE_VIDEO="unmute_video",_n.ON_P2P_OK="on_p2p_ok",_n.RECEIVE_METADATA="receive_metadata",_n.ON_DATA_STREAM="on_data_stream",_n.ENABLE_LOCAL_VIDEO="enable_local_video",_n.DISABLE_LOCAL_VIDEO="disable_local_video",_n.ENABLE_LOCAL_AUDIO="enable_local_audio",_n.DISABLE_LOCAL_AUDIO="disable_local_audio",_n.ON_PUBLISHED_USER_LIST="on_published_user_list"}(XE||(XE={})),function(_n){_n.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",_n.NEED_ANSWER="NEED_ANSWER",_n.NEED_RENEGOTIATE="NEED_RENEGOTIATE",_n.P2P_LOST="P2P_LOST",_n.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",_n.NEED_UNPUB="NEED_UNPUB",_n.NEED_UNSUB="NEED_UNSUB",_n.NEED_UPLOAD="NEED_UPLOAD",_n.NEED_CONTROL="NEED_CONTROL",_n.START_RECONNECT="START_RECONNECT",_n.END_RECONNECT="END_RECONNECT",_n.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(x5||(x5={})),function(_n){_n.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",_n.RECEIVE_TRACK_BUFFER="receive_track_buffer",_n.ON_AUDIO_BUFFER="on_audio_buffer",_n.UPDATE_SOURCE="update_source"}(KT||(KT={}));const z4={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0},K4={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},P5={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},V7={uplinkNetworkQuality:0,downlinkNetworkQuality:0},j5={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let KE,TS,X1;(function(_n){_n.CONNECTED="websocket:connected",_n.RECONNECTING="websocket:reconnecting",_n.WILL_RECONNECT="websocket:will_reconnect",_n.CLOSED="websocket:closed",_n.FAILED="websocket:failed",_n.ON_MESSAGE="websocket:on_message",_n.REQUEST_NEW_URLS="websocket:request_new_urls",_n.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",_n.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",_n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire"})(KE||(KE={})),function(_n){_n.TRANSCODE="mix_streaming",_n.RAW="raw_streaming",_n.INJECT="inject_streaming"}(TS||(TS={})),function(_n){_n[_n.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",_n[_n.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",_n[_n.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",_n[_n.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",_n[_n.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",_n[_n.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",_n[_n.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",_n[_n.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",_n[_n.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",_n[_n.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",_n[_n.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN"}(X1||(X1={}));const H7={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},J4={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function Q4(_n,_r){oT(_n.url,"".concat(_r,".url"),1,1e3,!1),Q0(_n.x)||W0(_n.x,"".concat(_r,".x"),0,1e4),Q0(_n.y)||W0(_n.y,"".concat(_r,".y"),0,1e4),Q0(_n.width)||W0(_n.width,"".concat(_r,".width"),0,1e4),Q0(_n.height)||W0(_n.height,"".concat(_r,".height"),0,1e4),Q0(_n.zOrder)||W0(_n.zOrder,"".concat(_r,".zOrder"),0,255),Q0(_n.alpha)||W0(_n.alpha,"".concat(_r,".alpha"),0,1,!1)}const G7={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},q7={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};let pI,LD,dS,U5,wT,UI,jT,Z1,RS,eS,_S,gF,UE,NS,X4,Z4,eN,MD,a0;function $5(_n){if(!_n.channelName)throw new U_(k_.INVALID_PARAMS,"invalid channelName in info");if(typeof _n.uid!="number")throw new U_(k_.INVALID_PARAMS,"invalid uid in info, uid must be a number");return _n.token&&oT(_n.token,"info.token",1,2047),H4(_n.uid),V4(_n.channelName),!0}function F5(_n){return $S(_n,"mediaSource",["screen","window","application"]),!0}(function(_n){_n.WARNING="@live_uap-warning",_n.ERROR="@line_uap-error",_n.PUBLISH_STREAM_STATUS="@live_uap-publish-status",_n.INJECT_STREAM_STATUS="@live_uap-inject-status",_n.WORKER_STATUS="@live_uap-worker-status",_n.REQUEST_NEW_ADDRESS="@live_uap-request-address"})(pI||(pI={})),function(_n){_n.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(LD||(LD={})),function(_n){_n[_n.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",_n[_n.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",_n[_n.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",_n[_n.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",_n[_n.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",_n[_n.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",_n[_n.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",_n[_n.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",_n[_n.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",_n[_n.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",_n[_n.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",_n[_n.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",_n[_n.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",_n[_n.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",_n[_n.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",_n[_n.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",_n[_n.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",_n[_n.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",_n[_n.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",_n[_n.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",_n[_n.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(dS||(dS={})),function(_n){_n.CONNECT_FAILED="connect failed",_n.CONNECT_TIMEOUT="connect timeout",_n.WS_DISCONNECTED="websocket disconnected",_n.REQUEST_TIMEOUT="request timeout",_n.REQUEST_FAILED="request failed",_n.WAIT_STATUS_TIMEOUT="wait status timeout",_n.WAIT_STATUS_ERROR="wait status error",_n.BAD_STATE="bad state",_n.WS_ABORT="ws abort",_n.AP_REQUEST_TIMEOUT="AP request timeout",_n.AP_JSON_PARSE_ERROR="AP json parse error",_n.AP_REQUEST_ERROR="AP request error",_n.AP_REQUEST_ABORT="AP request abort"}(U5||(U5={})),function(_n){_n[_n.SetSdkProfile=0]="SetSdkProfile",_n[_n.SetSourceChannel=1]="SetSourceChannel",_n[_n.SetSourceUserId=2]="SetSourceUserId",_n[_n.SetDestChannel=3]="SetDestChannel",_n[_n.StartPacketTransfer=4]="StartPacketTransfer",_n[_n.StopPacketTransfer=5]="StopPacketTransfer",_n[_n.UpdateDestChannel=6]="UpdateDestChannel",_n[_n.Reconnect=7]="Reconnect",_n[_n.SetVideoProfile=8]="SetVideoProfile"}(wT||(wT={})),function(_n){_n.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",_n.NETWORK_CONNECTED="NETWORK_CONNECTED",_n.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",_n.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",_n.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",_n.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",_n.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",_n.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",_n.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",_n.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(UI||(UI={})),function(_n){_n.RELAY_STATE_IDLE="RELAY_STATE_IDLE",_n.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",_n.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",_n.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE"}(jT||(jT={})),function(_n){_n.RELAY_OK="RELAY_OK",_n.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",_n.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",_n.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED"}(Z1||(Z1={})),function(_n){_n.High="high",_n.Low="low",_n.Audio="audio",_n.Screen="screen",_n.ScreenLow="screen_low"}(RS||(RS={})),function(_n){_n.DISCONNECT="disconnect",_n.CONNECTION_STATE_CHANGE="connection-state-change",_n.NETWORK_QUALITY="network-quality",_n.STREAM_TYPE_CHANGE="stream-type-change",_n.IS_P2P_DISCONNECTED="is-p2p-dis",_n.DISCONNECT_P2P="dis-p2p",_n.REQUEST_NEW_GATEWAY_LIST="req-gate-url",_n.NEED_RENEW_SESSION="need-sid",_n.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",_n.JOIN_RESPONSE="join-response",_n.REQUEST_DC_CONNECTION_PARAMS="request-dc-connection-params",_n.RESET_CONNECTION_EVENTS="reset-connection-events",_n.DATACHANNEL_PRECONNECT="datachannel_preconnect",_n.DATACHANNEL_FAILBACK="datachannel_failback",_n.RESET_SIGNAL="reset-signal"}(eS||(eS={})),function(_n){_n[_n.Nothing=0]="Nothing",_n[_n.Audio=1]="Audio",_n[_n.LwoVideo=2]="LwoVideo",_n[_n.Video=4]="Video",_n[_n.Data=8]="Data"}(_S||(_S={})),function(_n){_n[_n.websocket=0]="websocket",_n[_n.datachannel=1]="datachannel"}(gF||(gF={})),function(_n){_n.NEED_RENEGOTIATE="@need_renegotiate",_n.NEED_REPLACE_TRACK="@need_replace_track",_n.NEED_CLOSE="@need_close",_n.NEED_ENABLE_TRACK="@need_enable_track",_n.NEED_DISABLE_TRACK="@need_disable_track",_n.NEED_SESSION_ID="@need_sid",_n.SET_OPTIMIZATION_MODE="@set_optimization_mode",_n.GET_STATS="@get_stats",_n.GET_LOW_VIDEO_TRACK="@get_low_video_track",_n.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",_n.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",_n.NEED_MUTE_TRACK="@need_mute_track",_n.NEED_UNMUTE_TRACK="@need_unmute_track"}(UE||(UE={})),function(_n){_n.SCREEN_TRACK="screen_track",_n.CUSTOM_TRACK="custome_track",_n.LOW_STREAM="low_stream"}(NS||(NS={})),function(_n){_n[_n.HIGH_STREAM=0]="HIGH_STREAM",_n[_n.LOW_STREAM=1]="LOW_STREAM"}(X4||(X4={})),function(_n){_n[_n.DISABLE=0]="DISABLE",_n[_n.LOW_STREAM=1]="LOW_STREAM",_n[_n.AUDIO_ONLY=2]="AUDIO_ONLY"}(Z4||(Z4={})),function(_n){_n.SOURCE_STATE_CHANGE="source-state-change",_n.TRACK_ENDED="track-ended",_n.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",_n.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",_n.CLOSED="closed"}(eN||(eN={})),function(_n){_n.FIRST_FRAME_DECODED="first-frame-decoded",_n.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status"}(MD||(MD={})),function(_n){_n.CHINA="CHINA",_n.ASIA="ASIA",_n.NORTH_AMERICA="NORTH_AMERICA",_n.EUROPE="EUROPE",_n.JAPAN="JAPAN",_n.INDIA="INDIA",_n.KOREA="KOREA",_n.HKMC="HKMC",_n.US="US",_n.OCEANIA="OCEANIA",_n.SOUTH_AMERICA="SOUTH_AMERICA",_n.AFRICA="AFRICA",_n.OVERSEA="OVERSEA",_n.GLOBAL="GLOBAL",_n.EXTENSIONS="EXTENSIONS"}(a0||(a0={}));const W7=[a0.AFRICA,a0.ASIA,a0.CHINA,a0.EUROPE,a0.GLOBAL,a0.INDIA,a0.JAPAN,a0.NORTH_AMERICA,a0.OCEANIA,a0.OVERSEA,a0.SOUTH_AMERICA];let FS;(function(_n){_n.CHINA="CN",_n.ASIA="AS",_n.NORTH_AMERICA="NA",_n.EUROPE="EU",_n.JAPAN="JP",_n.INDIA="IN",_n.KOREA="KR",_n.HKMC="HK",_n.US="US",_n.OCEANIA="OC",_n.SOUTH_AMERICA="SA",_n.AFRICA="AF",_n.OVERSEA="OVERSEA",_n.GLOBAL="GLOBAL",_n.EXTENSIONS="GLOBAL"})(FS||(FS={}));const vF={CHINA:{},ASIA:{CODE:FS.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:FS.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:FS.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:FS.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","	uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:FS.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:FS.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:FS.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:FS.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:FS.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:FS.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:FS.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:FS.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:FS.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};let yU,Y5,WE,TE,kS,_0,gT,tN,uT,JT,SR,wR,IS,pO,sS;M4&&(vF.CHINA={CODE:FS.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(_n){_n.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(yU||(yU={}));class yF extends lS{constructor(_r,_o){super(),p_(this,"onICEConnectionStateChange",void 0),p_(this,"onConnectionStateChange",void 0),p_(this,"onDTLSTransportStateChange",void 0),p_(this,"onDTLSTransportError",void 0),p_(this,"onICETransportStateChange",void 0),p_(this,"onFirstAudioReceived",void 0),p_(this,"onFirstVideoReceived",void 0),p_(this,"onFirstAudioDecoded",void 0),p_(this,"onFirstVideoDecoded",void 0),p_(this,"onFirstVideoDecodedTimeout",void 0),p_(this,"onSelectedLocalCandidateChanged",void 0),p_(this,"onSelectedRemoteCandidateChanged",void 0),p_(this,"establishPromise",void 0)}}(function(_n){_n.SEND="sendonly",_n.RECV="recvonly",_n.SENDRECV="sendrecv",_n.INACTIVE="inactive"})(Y5||(Y5={})),function(_n){_n.VIDEO="video",_n.AUDIO="audio"}(WE||(WE={})),function(_n){_n.LocalVideoTrack="videoTrack",_n.LocalAudioTrack="audioTrack",_n.LocalVideoLowTrack="videoLowTrack"}(TE||(TE={})),function(_n){_n.New="new",_n.Connected="connected",_n.Reconnecting="reconnecting",_n.Disconnected="disconnected"}(kS||(kS={})),function(_n){_n.StateChange="stateChange",_n.IceConnectionStateChange="iceConnectionStateChange",_n.RequestMuteLocal="requestMuteLocal",_n.RequestUnmuteLocal="requestUnmuteLocal",_n.RequestRePublish="requestRePublish",_n.RequestReSubscribe="requestReSubscribe",_n.RequestUploadStats="requestUploadStats",_n.MediaReconnectStart="MediaReconnectStart",_n.MediaReconnectEnd="MediaReconnectEnd",_n.NeedSignalRTT="NeedSignalRTT",_n.RequestRestartICE="RequestRestartIce",_n.PeerConnectionStateChange="PeerConnectionStateChange",_n.RequestReconnect="RequestReconnect",_n.RequestReconnectPC="RequestReconnectPC",_n.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",_n.P2PLost="P2PLost",_n.UpdateVideoEncoder="UpdateVideoEncoder",_n.ConnectionTypeChange="ConnectionTypeChange",_n.RequestLowStreamParameter="RequestLowStreamParameter",_n.QueryClientConnectionState="QueryClientConnectionState"}(_0||(_0={})),function(_n){_n.ONLINE="ONLINE",_n.OFFLINE="OFFLINE"}(gT||(gT={})),function(_n){_n.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",_n.ONLINE="ONLINE",_n.OFFLINE="OFFLINE"}(tN||(tN={})),function(_n){_n.ON_TRACK="on_track",_n.ON_NODE="on_node"}(uT||(uT={})),function(_n){_n.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",_n.REQUEST_CONSTRAINTS="request_constraints"}(JT||(JT={})),function(_n){_n.CONNECTING="CONNECTING",_n.RECONNECTING="RECONNECTING",_n.CONNECTED="CONNECTED",_n.CLOSED="CLOSED"}(SR||(SR={})),function(_n){_n[_n.CONNECT_AP=0]="CONNECT_AP",_n[_n.AP_CONNECTED=1]="AP_CONNECTED",_n[_n.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",_n[_n.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",_n[_n.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",_n[_n.CONNECT_WORKER=5]="CONNECT_WORKER",_n[_n.WORKER_CONNECTED=6]="WORKER_CONNECTED",_n[_n.CLOSED=7]="CLOSED"}(wR||(wR={})),function(_n){_n.CONNECTION_STATE_CHANGE="connection-state-change",_n.STATE_CHANGE="state-change",_n.INSPECT_RESULT="inspect-result",_n.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",_n.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(IS||(IS={})),function(_n){_n.NETWORK_ERROR="NETWORK_ERROR",_n.SERVER_ERROR="SERVER_ERROR",_n.MULTI_IP="MULTI_IP",_n.TIMEOUT="TIMEOUT",_n.OFFLINE="OFFLINE",_n.LEAVE="LEAVE",_n.P2P_FAILED="P2P_FAILED",_n.FALLBACK="FALLBACK"}(pO||(pO={})),function(_n){_n.CONNECTED="transmitter:connected",_n.RECONNECTING="transmitter:reconnecting",_n.WILL_RECONNECT="transmitter:will_reconnect",_n.CLOSED="transmitter:closed",_n.FAILED="transmitter:failed",_n.ON_MESSAGE="transmitter:on_message",_n.REQUEST_NEW_URLS="transmitter:request_new_urls",_n.RECONNECT_WAITTING_FINISH="transmitter:reconnect_waitting_finish",_n.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",_n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",_n.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",_n.FAILBACK="transmitter:failback"}(sS||(sS={}));const TT={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1};function VS(){return TT}let DS;(function(_n){_n[_n.CHOOSE_SERVER=11]="CHOOSE_SERVER",_n[_n.CLOUD_PROXY=18]="CLOUD_PROXY",_n[_n.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",_n[_n.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK"})(DS||(DS={}));var z7=K_,EU=Array.isArray||function(_n){return z7(_n)=="Array"},K7=c_,B5=EU,J7=_k,Q7=f0,X7=xS("species"),V5=K7.Array,Z7=function(_n){var _r;return B5(_n)&&(_r=_n.constructor,(J7(_r)&&(_r===V5||B5(_r.prototype))||Q7(_r)&&(_r=_r[X7])===null)&&(_r=void 0)),_r===void 0?V5:_r},H5=function(_n,_r){return new(Z7(_n))(_r===0?0:_r)},eJ=AO,tJ=YE,nJ=KR,rJ=XR,iJ=H5,G5=e_([].push),nN=function(_n){var _r=_n==1,_o=_n==2,_a=_n==3,_u=_n==4,_p=_n==6,_f=_n==7,n_=_n==5||_p;return function(r_,o_,s_,u_){for(var g_,w_,D_=nJ(r_),M_=tJ(D_),P_=eJ(o_,s_),_g=rJ(M_),_y=0,hE=u_||iJ,NE=_r?hE(r_,_g):_o||_f?hE(r_,0):void 0;_g>_y;_y++)if((n_||_y in M_)&&(w_=P_(g_=M_[_y],_y,D_),_n))if(_r)NE[_y]=w_;else if(w_)switch(_n){case 3:return!0;case 5:return g_;case 6:return _y;case 2:G5(NE,g_)}else switch(_n){case 4:return!1;case 7:G5(NE,g_)}return _p?-1:_a||_u?_u:NE}},q5={forEach:nN(0),map:nN(1),filter:nN(2),some:nN(3),every:nN(4),find:nN(5),findIndex:nN(6),filterReject:nN(7)},oJ=q5.forEach,W5=m1("forEach")?[].forEach:function(_n){return oJ(this,_n,arguments.length>1?arguments[1]:void 0)};v0({target:"Array",proto:!0,forced:[].forEach!=W5},{forEach:W5});var sJ=CS("Array").forEach,aJ=_A,cJ=eT,uJ=t_,lJ=sJ,eH=Array.prototype,dJ={DOMTokenList:!0,NodeList:!0},hJ=function(_n){var _r=_n.forEach;return _n===eH||uJ(eH,_n)&&_r===eH.forEach||cJ(dJ,aJ(_n))?lJ:_r},pJ=KR,z5=nT;v0({target:"Object",stat:!0,forced:Wt(function(){z5(1)})},{keys:function(_n){return z5(pJ(_n))}});var fJ=$E.Object.keys,mJ=DO,_J=v0,gJ=EU,vJ=e_([].reverse),K5=[1,2];_J({target:"Array",proto:!0,forced:String(K5)===String(K5.reverse())},{reverse:function(){return gJ(this)&&(this.length=this.length),vJ(this)}});var yJ=CS("Array").reverse,EJ=t_,bJ=yJ,tH=Array.prototype,SJ=function(_n){var _r=_n.reverse;return _n===tH||EJ(tH,_n)&&_r===tH.reverse?bJ:_r},wJ=Wt,TJ=tR,RJ=xS("species"),J5=function(_n){return TJ>=51||!wJ(function(){var _r=[];return(_r.constructor={})[RJ]=function(){return{foo:1}},_r[_n](Boolean).foo!==1})},IJ=v0,CJ=c_,Q5=EU,AJ=_k,OJ=f0,X5=q0,NJ=XR,kJ=C0,xJ=j4,LJ=xS,MJ=l2,DJ=J5("slice"),PJ=LJ("species"),nH=CJ.Array,jJ=Math.max;IJ({target:"Array",proto:!0,forced:!DJ},{slice:function(_n,_r){var _o,_a,_u,_p=kJ(this),_f=NJ(_p),n_=X5(_n,_f),r_=X5(_r===void 0?_f:_r,_f);if(Q5(_p)&&(_o=_p.constructor,(AJ(_o)&&(_o===nH||Q5(_o.prototype))||OJ(_o)&&(_o=_o[PJ])===null)&&(_o=void 0),_o===nH||_o===void 0))return MJ(_p,n_,r_);for(_a=new(_o===void 0?nH:_o)(jJ(r_-n_,0)),_u=0;n_<r_;n_++,_u++)n_ in _p&&xJ(_a,_u,_p[n_]);return _a.length=_u,_a}});var UJ=CS("Array").slice,$J=t_,FJ=UJ,rH=Array.prototype,YJ=function(_n){var _r=_n.slice;return _n===rH||$J(rH,_n)&&_r===rH.slice?FJ:_r};function oE(_n,_r,_o,_a,_u){var _p,_f,n_,r_={};return hJ(_p=fJ(_a)).call(_p,function(o_){r_[o_]=_a[o_]}),r_.enumerable=!!r_.enumerable,r_.configurable=!!r_.configurable,("value"in r_||r_.initializer)&&(r_.writable=!0),r_=mJ(_f=SJ(n_=YJ(_o).call(_o)).call(n_)).call(_f,function(o_,s_){return s_(_n,_r,o_)||o_},r_),_u&&r_.initializer!==void 0&&(r_.value=r_.initializer?r_.initializer.call(_u):void 0,r_.initializer=void 0),r_.initializer===void 0&&(J3(_n,_r,r_),r_=null),r_}var BJ=CS("Array").keys,VJ=_A,HJ=eT,GJ=t_,qJ=BJ,iH=Array.prototype,WJ={DOMTokenList:!0,NodeList:!0},mL=function(_n){var _r=_n.keys;return _n===iH||GJ(iH,_n)&&_r===iH.keys||HJ(WJ,VJ(_n))?qJ:_r};function Z5(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function eG(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?Z5(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):Z5(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}let EF=0,oH=0;function $I(_n,_r,_o,_a){return new uE((_u,_p)=>{_r.timeout=_r.timeout||J_("HTTP_CONNECT_TIMEOUT"),_r.responseType=_r.responseType||"json",_r.data&&!_o?(_r.data=JSON.stringify(_r.data),EF+=YD(_r.data)):_o&&(_r.data.size?EF+=_r.data.size:_r.data instanceof FormData?EF+=function(_f){let n_=0;return/DingTalk/i.test(navigator.userAgent)&&_f.realFormData&&(_f=_f.realFormData),_f.forEach(r_=>{n_+=typeof r_=="string"?YD(r_):r_.size}),n_+138}(_r.data):EF+=YD(JSON.stringify(_r.data))),_r.headers=_r.headers||{},_r.headers["Content-Type"]=_r.headers["Content-Type"]||"application/json",_r.method="POST",_r.url=_n,dI.request(_r).then(_f=>{typeof _f.data=="string"?oH+=YD(_f.data):_f.data instanceof ArrayBuffer||_f.data instanceof Uint8Array?oH+=_f.data.byteLength:oH+=YD(JSON.stringify(_f.data)),_a&&_u({data:_f.data,headers:_f.headers}),_u(_f.data)}).catch(_f=>{dI.isCancel(_f)?_p(new U_(k_.OPERATION_ABORTED,"cancel token canceled")):_f.code==="ECONNABORTED"?_p(new U_(k_.NETWORK_TIMEOUT,_f.message)):_f.response?_p(new U_(k_.NETWORK_RESPONSE_ERROR,_f.response.status)):_p(new U_(k_.NETWORK_ERROR,_f.message))})})}async function zJ(_n,_r){const _o=new Blob([_r.data],{type:"buffer"});return await $I(_n,eG(eG({},_r),{},{data:_o,headers:{"Content-Type":"application/octet-stream"}}),!0)}const gS=new class extends lS{set networkState(_n){E_.info("[".concat(this._moduleName,"]")+"network state changed, "+this._networkState+" -> "+_n),this.emit(tN.NETWORK_STATE_CHANGE,_n,this._networkState),_n===gT.ONLINE?this.emit(tN.ONLINE):_n===gT.OFFLINE&&(this.onlineWaiter=new uE(_r=>{this.once(tN.ONLINE,()=>{this.onlineWaiter=void 0,_r(gT.ONLINE)})}),this.emit(tN.OFFLINE)),this._networkState=_n}get networkState(){return this._networkState}constructor(){super(),p_(this,"_moduleName","network-indicator"),p_(this,"_networkState",gT.ONLINE),p_(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=gT.ONLINE}),window.addEventListener("offline",()=>{this.networkState=gT.OFFLINE})}};let sH=!1;const TR=new class extends lS{constructor(){super(...arguments),p_(this,"onAutoplayFailed",void 0),p_(this,"onAudioAutoplayFailed",void 0)}};function tG(){if(I0(),!sH){const _n=_r=>{_r.preventDefault(),sH=!1,sL()?document.body.removeEventListener("click",_n,!0):(document.body.removeEventListener("touchstart",_n,!0),document.body.removeEventListener("mousedown",_n,!0))};sH=!0,sL()?document.body.addEventListener("click",_n,!0):(document.body.addEventListener("touchstart",_n,!0),document.body.addEventListener("mousedown",_n,!0)),E_.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),TR.onAutoplayFailed?TR.onAutoplayFailed():TR.onAudioAutoplayFailed?E_.warning(`AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.

  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`):E_.warning(`We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.

  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.

  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`),TR.emit("autoplay-failed")}}function aH(_n){return new TextEncoder().encode(_n)}const nG=function(_n,_r){const _o=new Uint8Array(_n.byteLength+_r.byteLength);return _o.set(new Uint8Array(_n),0),_o.set(new Uint8Array(_r),_n.byteLength),_o},KJ=async _n=>function(_r,_o){let _a="";return new Uint8Array(_r).forEach(_u=>{_a+=_u.toString(_o).padStart(2,"0")}),_a}(await crypto.subtle.digest("SHA-256",aH(_n)),16);function rG(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function JE(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?rG(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):rG(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}function ME(){let _n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(_r,_o,_a){const _u=_a.value;if(typeof _u=="function"){const _p=_n.className||_r.__className__||(_r.constructor.name==="AgoraRTCClient"?"Client":_r.constructor.name);_a.value=function(){for(var _f=arguments.length,n_=new Array(_f),r_=0;r_<_f;r_++)n_[r_]=arguments[r_];let o_=n_;if(_n.argsMap)try{o_=_n.argsMap(this,...n_)}catch(u_){E_.warning(u_),o_=[]}try{JSON.stringify(o_)}catch{E_.warning("arguments for method ".concat(_p,".").concat(_o," not serializable for apiInvoke.")),o_=[]}const s_=(_n.report||AE).reportApiInvoke(this._sessionId||null,{name:"".concat(_p,".").concat(_o),options:o_,tag:nS.TRACER,reportResult:_n.reportResult},_n.throttleTime);try{const u_=_u.apply(this,n_);return u_ instanceof uE?u_.then(g_=>(s_.onSuccess(_n.reportResult&&g_),g_)).catch(g_=>{throw s_.onError(g_),g_}):(s_.onSuccess(_n.reportResult&&u_),u_)}catch(u_){throw s_.onError(u_),u_}}}return _a}}const AE=new class{constructor(){p_(this,"baseInfoMap",new Map),p_(this,"proxyServer",void 0),p_(this,"clientList",hL),p_(this,"eventUploadTimer",void 0),p_(this,"setSessionIdTimer",void 0),p_(this,"url",void 0),p_(this,"backupUrl",void 0),p_(this,"_appId",void 0),p_(this,"keyEventUploadPendingItems",[]),p_(this,"normalEventUploadPendingItems",[]),p_(this,"apiInvokeUploadPendingItems",[]),p_(this,"apiInvokeCount",0),p_(this,"ltsList",[]),p_(this,"lastSendNormalEventTime",Date.now()),p_(this,"customReportCounterTimer",void 0),p_(this,"customReportCount",0),p_(this,"extApiInvoke",async _n=>{for(const _r of _n){const _o=JE(JE({},_r),{},{sid:null,invokeId:++this.apiInvokeCount,tag:nS.TRACER});this.sendApiInvoke(_o)}}),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),J_("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),J_("EVENT_REPORT_SEND_INTERVAL"))}adjustSessionStartTime(_n){if(!this.baseInfoMap.has(_n)&&!this.baseInfoMap.get(_n))return void E_.error("adjust session ".concat(_n," start time, sid is not exist or info is undefined"));const _r=this.baseInfoMap.get(_n),_o=Date.now(),_a=_r.startTime;_r.startTime=_o,E_.debug("rewrite session ".concat(_n," startTime: ").concat(_o," , ").concat(_o-_a,"ms")),this.baseInfoMap.set(_n,_r)}setAppId(_n){this._appId=_n}reportApiInvoke(_n,_r,_o){_r.timeout=_r.timeout||6e4,_r.reportResult=_r.reportResult===void 0||_r.reportResult;const _a=Date.now();this.apiInvokeCount+=1;const _u=this.apiInvokeCount,_p=()=>({tag:_r.tag,invokeId:_u,sid:_n,name:_r.name,apiInvokeTime:_a,options:_r.options,states:_r.states||null}),_f=!!J_("SHOW_REPORT_INVOKER_LOG");_f&&E_.info("".concat(_r.name," start"),_r.options);let n_=!1;dT(_r.timeout).then(()=>{n_||(this.sendApiInvoke(JE(JE({},_p()),{},{error:k_.API_INVOKE_TIMEOUT,success:!1})),E_.debug("".concat(_r.name," timeout")))});const r_=new U_(k_.UNEXPECTED_ERROR,"".concat(_r.name,": this api invoke is end"));return{onSuccess:o_=>{const s_=()=>{if(n_)throw r_;return n_=!0,this.sendApiInvoke(JE(JE({},_p()),{},{success:!0},_r.reportResult&&{result:o_})),_f&&E_.info("".concat(_r.name," onSuccess")),o_};return _o?g6(s_,_r.name+"Success",_o,()=>n_=!0):s_()},onError:o_=>{const s_=()=>{if(n_)throw o_;n_=!0,this.sendApiInvoke(JE(JE({},_p()),{},{success:!1,error:o_})),_f&&E_.info("".concat(_r.name," onFailure"),o_.toString())};return _o?g6(s_,_r.name+"Error",_o,()=>n_=!0):s_()}}}sessionInit(_n,_r){if(this.baseInfoMap.has(_n))return;const _o=Date.now(),_a=this.createBaseInfo(_n,_o);_a.cname=_r.cname;const _u=Object.assign({},{willUploadConsoleLog:J_("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:M4?"global":"oversea",areas:J_("AREAS")&&J_("AREAS").join(",")},_r.extend),_p=Date.now(),_f=JE(JE({},_a),{},{eventType:aT.SESSION_INIT,appid:_r.appid,browser:navigator.userAgent,build:L4,lts:_p,elapse:_p-_o,extend:JSON.stringify(_u),mode:_r.mode,process:J_("PROCESS_ID"),appType:J_("APP_TYPE"),success:!0,version:$R});this.send({type:oS.SESSION,data:_f},!0)}joinChooseServer(_n,_r){const _o=this.baseInfoMap.get(_n);if(!_o)return;const _a=_o.info,_u=Date.now(),_p=JE(JE({},_a),{},{eventType:aT.JOIN_CHOOSE_SERVER,lts:_u,eventElapse:_u-_r.lts,chooseServerAddr:_r.csAddr,errorCode:_r.ec,elapse:_u-_o.startTime,success:_r.succ,chooseServerAddrList:JSON.stringify(_r.serverList),uid:_r.uid?parseInt(_r.uid):null,cid:_r.cid?parseInt(_r.cid):null,chooseServerIp:_r.csIp||"",opid:_r.opid,unilbsServerIds:_r.unilbsServerIds,extend:_r.extend||void 0,isHttp3:_r.isHttp3});this.send({type:oS.JOIN_CHOOSE_SERVER,data:_p},!0)}reqUserAccount(_n,_r){const _o=this.baseInfoMap.get(_n);if(!_o)return;const _a=_o.info,_u=Date.now(),_p=JE(JE({},_a),{},{eventType:aT.REQ_USER_ACCOUNT,lts:_u,success:_r.success,serverAddress:_r.serverAddr,stringUid:_r.stringUid,uid:_r.uid,errorCode:_r.errorCode,elapse:_u-_o.startTime,eventElapse:_u-_r.lts,extend:JSON.stringify(_r.extend)});this.send({type:oS.REQ_USER_ACCOUNT,data:_p},!0)}joinGateway(_n,_r){const _o=this.baseInfoMap.get(_n);if(!_o)return;const _a=_o.info;_r.vid&&(_a.vid=_r.vid),_a.uid=_r.uid,_a.cid=_r.cid;const _u=Date.now(),{firstSuccess:_p,avoidJoinStartTime:_f,isProxy:n_,addr:r_}=_r,o_=_u-(_p&&_f?_f:_o.startTime),s_=JE(JE({},_a),{},{eventType:aT.JOIN_GATEWAY,lts:_u,gatewayAddr:_r.addr,success:_r.succ,errorCode:_r.ec,elapse:o_,eventElapse:_u-_r.lts,firstSuccess:_p,signalChannel:_r.signalChannel}),u_=s_.success?1:0;if(_r.succ&&(_o.lastJoinSuccessTime=_u),_p)this.send({type:oS.JOIN_GATEWAY,data:s_},!0);else{let g_;if(r_)if(n_){const D_=r_.match(/h=(\d{1,3}-){3}\d{1,3}/g),M_=r_.match(/p=[0-9]{1,6}/g);g_={isSuccess:u_,gatewayIp:D_&&D_.length?D_[0].split("=")[1].replace(/-/g,"."):"",port:M_&&M_.length?M_[0].split("=")[1]:"",isProxy:n_?1:0}}else{const D_=r_.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),M_=r_.match(/:[0-9]{1,6}/g);g_={isSuccess:u_,gatewayIp:D_&&D_.length?D_[0].split("//")[1].replace(/-/g,"."):"",port:M_&&M_.length?M_[0].split(":")[1]:"",isProxy:n_?1:0}}else g_={isSuccess:u_,gatewayIp:"",port:"",isProxy:n_?1:0};delete s_.success,delete s_.eventType,delete s_.firstSuccess,s_.vid=Number(s_.vid);const w_=Object.assign({},s_,g_,{eventType:aT.REJOIN_GATEWAY});this.send({type:oS.RE_JOIN_GATEWAY,data:w_},!0)}}joinChannelTimeout(_n,_r){const _o=this.baseInfoMap.get(_n);if(!_o)return;const _a=Date.now(),_u=JE(JE({},_o.info),{},{lts:_a,timeout:_r,elapse:_a-_o.startTime});this.send({type:oS.JOIN_CHANNEL_TIMEOUT,data:_u},!0)}publish(_n,_r){const _o=this.baseInfoMap.get(_n);if(!_o)return;const _a=_o.info,_u=Date.now(),_p=JE(JE({},_a),{},{eventType:aT.PUBLISH,lts:_u,eventElapse:_r.eventElapse,elapse:_u-_o.startTime,success:_r.succ,errorCode:_r.ec,videoName:_r.videoName,audioName:_r.audioName,screenName:_r.screenName,screenshare:_r.screenshare,audio:_r.audio,video:_r.video,p2pid:_r.p2pid,publishRequestid:_r.publishRequestid});this.send({type:oS.PUBLISH,data:_p},!0)}subscribe(_n,_r,_o){const _a=this.baseInfoMap.get(_n);if(!_a)return;const _u=_a.info,_p=Date.now(),_f=JE(JE({},_u),{},{eventType:aT.SUBSCRIBE,lts:_p,eventElapse:_r.eventElapse,elapse:_p-_a.startTime,success:_r.succ,errorCode:_r.ec,video:_r.video,audio:_r.audio,subscribeRequestid:_r.subscribeRequestid,p2pid:_r.p2pid},_o&&{extend:JSON.stringify({isMassSubscribe:!0})});typeof _r.peerid=="string"?_f.peerSuid=_r.peerid:_f.peer=_r.peerid,this.send({type:oS.SUBSCRIBE,data:_f},!0)}wsCompressorInit(_n){var _r;const _o=[...mL(_r=this.baseInfoMap).call(_r)],_a=_o.length?_o[0]:"UnableToGetSid",_u=this.baseInfoMap.get(_a);if(!_u)return;const _p=_u.info,_f=Date.now(),n_=JE(JE({},_p),{},{eventType:aT.WS_COMPRESSOR_INIT,lts:_f,eventElapse:_n.eventElapse,elapse:_f-_u.startTime,status:_n.status?1:2});this.send({type:oS.WS_COMPRESSOR_INIT,data:n_},!0)}firstRemoteVideoDecode(_n,_r,_o,_a){const _u=this.baseInfoMap.get(_n);if(!_u)return;const _p=_u.info,_f=Date.now(),n_=JE(JE(JE({},_p),_a),{},{elapse:_f-_u.startTime,eventType:_r,lts:_f,firstDecodeFrame:Math.max(_f-_u.startTime,0),apEnd:Math.max(_a.apEnd-_u.startTime,0),apStart:Math.max(_a.apStart-_u.startTime,0),joinGwEnd:Math.max(_a.joinGwEnd-_u.startTime,0),joinGwStart:Math.max(_a.joinGwStart-_u.startTime,0),pcEnd:Math.max(_a.pcEnd-_u.startTime,0),pcStart:Math.max(_a.pcStart-_u.startTime,0),subscriberEnd:Math.max(_a.subscriberEnd-_u.startTime,0),subscriberStart:Math.max(_a.subscriberStart-_u.startTime,0),videoAddNotify:Math.max(_a.videoAddNotify-_u.startTime,0)});this.send({type:_o,data:n_},!0)}firstRemoteFrame(_n,_r,_o,_a){const _u=this.baseInfoMap.get(_n);if(!_u)return;const _p=_u.info,_f=Date.now(),n_=JE(JE(JE({},_p),_a),{},{elapse:_f-_u.startTime,eventType:_r,lts:_f});this.send({type:_o,data:n_},!0)}onGatewayStream(_n,_r,_o,_a){const _u=this.baseInfoMap.get(_n);if(!_u)return;const _p=_u.info,_f=Date.now(),n_=JE(JE(JE({},_p),_a),{},{eventType:_r,lts:_f});this.send({type:_o,data:n_},!0)}streamSwitch(_n,_r){const _o=this.baseInfoMap.get(_n);if(!_o)return;const _a=_o.info,_u=Date.now(),_p=JE(JE({},_a),{},{eventType:aT.STREAM_SWITCH,lts:_u,isDual:_r.isdual,elapse:_u-_o.startTime,success:_r.succ});this.send({type:oS.STREAM_SWITCH,data:_p},!0)}requestProxyAppCenter(_n,_r){const _o=this.baseInfoMap.get(_n);if(!_o)return;const _a=_o.info,_u=Date.now(),_p=JE(JE({},_a),{},{eventType:aT.REQUEST_PROXY_APPCENTER,lts:_u,eventElapse:_u-_r.lts,elapse:_u-_o.startTime,APAddr:_r.APAddr,workerManagerList:_r.workerManagerList,response:_r.response,errorCode:_r.ec,success:_r.succ});this.send({type:oS.REQUEST_PROXY_APPCENTER,data:_p},!0)}requestProxyWorkerManager(_n,_r){const _o=this.baseInfoMap.get(_n);if(!_o)return;const _a=_o.info,_u=Date.now(),_p=JE(JE({},_a),{},{eventType:aT.REQUEST_PROXY_WORKER_MANAGER,lts:_u,eventElapse:_u-_r.lts,elapse:_u-_o.startTime,workerManagerAddr:_r.workerManagerAddr,response:_r.response,errorCode:_r.ec,success:_r.succ});this.send({type:oS.REQUEST_PROXY_WORKER_MANAGER,data:_p},!0)}setProxyServer(_n){this.proxyServer=_n,_n?E_.debug("reportProxyServerurl: ".concat(_n)):E_.debug("disable reportProxyServerurl: ".concat(_n))}peerPublishStatus(_n,_r){const _o=this.baseInfoMap.get(_n);if(!_o)return;const _a=_o.info,_u=Date.now(),_p=JE(JE({},_a),{},{subscribeElapse:_r.subscribeElapse,peer:_r.peer,peerPublishDuration:Math.max(_r.audioPublishDuration,_r.videoPublishDuration),audiotag:_r.audioPublishDuration>0?1:-1,videotag:_r.videoPublishDuration>0?1:-1,lts:_u,elapse:_u-_o.startTime,joinChannelSuccessElapse:_u-(_o.lastJoinSuccessTime||_u),peerPublishDurationVideo:_r.videoPublishDuration,peerPublishDurationAudio:_r.audioPublishDuration});this.send({type:oS.PEER_PUBLISH_STATUS,data:_p},!0)}workerEvent(_n,_r){const _o=this.baseInfoMap.get(_n);if(!_o)return;const _a=_o.info,_u=Date.now();(function(_p,_f,n_){const r_=_p[_f];if(!r_||typeof r_!="string")return[_p];_p[_f]="";const o_=YD(JSON.stringify(_p));let s_=0;const u_=[];let g_=0;for(let w_=0;w_<r_.length;w_++)g_+=r_.charCodeAt(w_)<=127?1:3,g_<=n_-o_||(u_[u_.length]=vL(vL({},_p),{},{[_f]:r_.substring(s_,w_)}),s_=w_,g_=r_.charCodeAt(w_)<=127?1:3);return s_!==r_.length-1&&(u_[u_.length]=vL(vL({},_p),{},{[_f]:r_.substring(s_)})),u_})(JE(JE(JE({},_a),_r),{},{elapse:_u-_o.startTime,lts:_u,productType:"WebRTC"}),"payload",1300).forEach(_p=>this.send({type:oS.WORKER_EVENT,data:_p},!0))}apworkerEvent(_n,_r){const _o=this.baseInfoMap.get(_n);if(!_o)return;const _a=_o.info,_u=Date.now(),_p=JE(JE(JE({},_a),_r),{},{elapse:_u-_o.startTime,lts:_u});this.send({type:oS.AP_WORKER_EVENT,data:_p},!0)}joinWebProxyAP(_n,_r){const _o=this.baseInfoMap.get(_n);if(!_o)return;const _a=_o.info,_u=Date.now(),_p=JE(JE(JE({},_a),_r),{},{elapse:_u-_o.startTime,lts:_u,extend:_r.extend||void 0});this.send({type:oS.JOIN_WEB_PROXY_AP,data:_p},!0)}WebSocketQuit(_n,_r){const _o=this.baseInfoMap.get(_n);if(!_o)return;const _a=_o.info,_u=Date.now(),_p=JE(JE(JE({},_a),_r),{},{elapse:_u-_o.startTime,lts:_u});this.send({type:oS.WEBSOCKET_QUIT,data:_p},!0)}async sendCustomReportMessage(_n,_r){if(this.customReportCount+=_r.length,this.customReportCount>J_("CUSTOM_REPORT_LIMIT"))throw new U_(k_.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval(()=>{this.customReportCount=0},5e3));const _o=Date.now(),_a=_r.map(_u=>({type:oS.USER_ANALYTICS,data:JE(JE({sid:_n},_u),{},{lts:_o})}));try{J_("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(_a):await this.postDataToStatsCollector(_a)}catch(_u){throw E_.error("send custom report message failed",_u.toString()),new U_(k_.CUSTOM_REPORT_SEND_FAILED,_u.message)}}autoplayFailed(_n,_r,_o,_a){if(!_n)return;const _u=this.baseInfoMap.get(_n);if(!_u)return;const _p=_u.info,_f=Date.now(),n_=JE(JE({},_p),{},{vid:_p.vid===void 0?0:Number(_p.vid),lts:_f,elapse:_f-_u.startTime,cbRegistered:TR.onAutoplayFailed||TR.onAudioAutoplayFailed?1:-1,errorMsg:_o,mediaType:_r,trackId:_a,extend:void 0});this.send({type:oS.AUTOPLAY_FAILED,data:n_},!0)}sendApiInvoke(_n){const _r=J_("NOT_REPORT_EVENT");if(_n.tag&&_r.includes&&_r.includes(_n.tag))return!1;if(_n.sid===null)return this.apiInvokeUploadPendingItems.push(_n),!1;const _o=this.baseInfoMap.get(_n.sid);if(!_o)return this.apiInvokeUploadPendingItems.push(_n),!1;const{cname:_a,uid:_u,cid:_p}=_o.info;_n.lts=_n.lts||Date.now();let _f;if(_n.error)if(_n.error instanceof U_){const{code:r_,message:o_}=_n.error;_f=r_||o_||_n.error.toString()}else _f=_n.error.toString();const n_={invokeId:_n.invokeId,sid:_n.sid,cname:_a,cid:_p,uid:_u,lts:_n.lts,success:_n.success,elapse:_n.lts-_o.startTime,execElapse:_n.lts-_n.apiInvokeTime,apiName:_n.name,options:_n.options?JSON.stringify(_n.options):void 0,execStates:_n.states?JSON.stringify(_n.states):void 0,execResult:_n.result?JSON.stringify(_n.result):void 0,errorCode:_n.error?_f:void 0,errorMsg:_n.error?JSON.stringify(_n.error):void 0};return this.send({type:oS.API_INVOKE,data:n_},!1),!0}appendSessionId(){this.clientList.forEach(_n=>{if(_n._sessionId){const _r=this.apiInvokeUploadPendingItems.length;for(let _o=0;_o<_r;_o++){const _a=this.apiInvokeUploadPendingItems.shift();_a&&(_a.sid=_n._sessionId,this.sendApiInvoke(Object.assign({},_a)))}}})}send(_n,_r){if(_r)return this.keyEventUploadPendingItems.push(_n),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(_n),this.normalEventUploadPendingItems.length>J_("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(_n,_r){const _o=[],_a=[];for(;_n.length;){const _p=_n.shift();_o.length<20?_o.push(_p):_a.push(_p)}_n.push(..._a);for(const _p of[..._o]){var _u;this.ltsList.indexOf(_p.data.lts)!==-1?(_p.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(_p.data.lts)):(this.ltsList.push(_p.data.lts),Y4(_u=this.ltsList).call(_u,(_f,n_)=>_f-n_))}return _r||(this.lastSendNormalEventTime=Date.now()),J_("ENABLE_EVENT_REPORT")&&_o.length&&(J_("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(_o):this.postDataToStatsCollector(_o)).catch((_p=>_f=>{J_("EVENT_REPORT_RETRY")&&(_r?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(_p):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(_p),this.normalEventUploadPendingItems.length>J_("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-J_("NORMAL_EVENT_QUEUE_CAPACITY")),E_.warning("report: drop normal events"))))})(_o)),_n}async postDataToStatsCollector2(_n){gS.networkState===gT.OFFLINE&&await uE.race([gS.onlineWaiter,dT(2*OS.maxRetryTimeout)]);const _r=_u=>{let _p=new Uint8Array;return _u.forEach(_f=>{const n_=aH(JSON.stringify(_f.data)),r_=new ArrayBuffer(5),o_=(u_=>{let g_=0;return Object.entries(oS).forEach(w_=>{let[D_,M_]=w_;M_===u_.type&&(g_=q4[D_])}),g_})(_f),s_=new DataView(r_);s_.setUint16(0,n_.byteLength,!0),s_.setUint8(2,255&o_),s_.setUint8(3,o_>>>8&255),s_.setUint8(4,o_>>>16&255),_p=nG(_p,new Uint8Array(r_)),_p=nG(_p,n_)}),_p},_o="event";let _a=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(J_("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(_o):"https://".concat(J_("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(_o);for(let _u=0;_u<2;_u+=1){_u===1&&(_a=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(J_("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(_o):"https://".concat(J_("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(_o));try{await $I(_a,{timeout:1e4,data:_r(_n),headers:JE(JE({token:"32f24ab2ddb74f508aa9286c356cec84",biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(_p){if(_u===1)throw _p;continue}return}}async postDataToStatsCollector(_n){let _r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const _o={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:_n.map(_p=>JSON.stringify(_p)),vid:(_p=>{const _f=_p&&_p.data.sid&&this.baseInfoMap.get(_p.data.sid);return _f&&_f.info.vid&&+_f.info.vid||0})(_n[0])};gS.networkState===gT.OFFLINE&&await uE.race([gS.onlineWaiter,dT(2*OS.maxRetryTimeout)]);const _a=_r?"/events/proto-raws":"/events/messages";let _u=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(J_("EVENT_REPORT_DOMAIN"),"&p=").concat(J_("STATS_COLLECTOR_PORT"),"&d=").concat(_a):"https://".concat(J_("EVENT_REPORT_DOMAIN"),":").concat(J_("STATS_COLLECTOR_PORT")).concat(_a));for(let _p=0;_p<2;_p+=1){_p===1&&(_u=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(J_("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(J_("STATS_COLLECTOR_PORT"),"&d=").concat(_a):"https://".concat(J_("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(J_("STATS_COLLECTOR_PORT")).concat(_a)));try{_r?await zJ(_u,{timeout:1e4,data:_o}):await $I(_u,{timeout:1e4,data:_o})}catch(_f){if(_p===1)throw _f;continue}return}}createBaseInfo(_n,_r){const _o=Object.assign({},Y7);return _o.sid=_n,this.baseInfoMap.set(_n,{info:_o,startTime:_r}),_o}reportResourceTiming(_n,_r){const _o=performance.getEntriesByName(_n),_a=_o[_o.length-1];_a&&this.reportApiInvoke(_r,{name:"Client.resourceTiming",options:_a,tag:nS.TRACER}).onSuccess()}};pF.on("REPORT_LOG_UPLOAD",_n=>{_n.networkState=gS.networkState,AE.reportApiInvoke(null,{name:"logUploadError",options:_n,tag:nS.TRACER})});class iG extends lS{constructor(_r,_o){super(),p_(this,"trackMediaType",void 0),p_(this,"_ID",void 0),p_(this,"_hints",[]),p_(this,"_isClosed",!1),p_(this,"_originMediaStreamTrack",void 0),p_(this,"_mediaStreamTrack",void 0),p_(this,"_external",{}),this._ID=_o||X0(8,"track-"),this._originMediaStreamTrack=_r,this._mediaStreamTrack=_r,function(_a){mU.includes(_a)||mU.push(_a)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(_r){if(!_r){const _o=AE.reportApiInvoke(null,{name:wS.GET_MEDIA_STREAM_TRACK,options:[],tag:nS.TRACER});this._mediaStreamTrack&&typeof this._mediaStreamTrack.label=="string"?_o.onSuccess(this._mediaStreamTrack.label):_o.onSuccess("")}return this._mediaStreamTrack}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,function(_r){const _o=mU.indexOf(_r);_o!==-1&&mU.splice(_o,1)}(this),this.emit(eN.CLOSED)}}let PS,JJ=1;class RT{constructor(_r){p_(this,"lockingPromise",uE.resolve()),p_(this,"locks",0),p_(this,"name",""),p_(this,"lockId",void 0),this.lockId=JJ++,_r&&(this.name=_r),E_.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(_r){let _o;this.locks+=1,E_.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat(typeof _r=="string"?_r:""));const _a=new uE(_p=>{_o=()=>{this.locks-=1,E_.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat(typeof _r=="string"?_r:"")),_p()}}),_u=this.lockingPromise.then(()=>_o);return this.lockingPromise=this.lockingPromise.then(()=>_a),_u}}function DD(_n,_r){return function(_o,_a,_u){const _p=_u.value;if(typeof _p!="function")throw new Error("Cannot use mutex on object property.");return _u.value=async function(){const _f=this[_r];if(!_f)throw new Error("mutex property key ".concat(_r," doesn't exist on ").concat(_n));const n_=await _f.lock("From ".concat(_n,".").concat(_a));try{for(var r_=arguments.length,o_=new Array(r_),s_=0;s_<r_;s_++)o_[s_]=arguments[s_];return await _p.apply(this,o_)}finally{n_()}},_u}}class cH extends iG{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}set processorContext(_r){this._processorContext=_r}constructor(_r,_o){super(_r,_o),p_(this,"_enabled",!0),p_(this,"_muted",!1),p_(this,"_isExternalTrack",!1),p_(this,"_isClosed",!1),p_(this,"_enabledMutex",void 0),p_(this,"processor",void 0),p_(this,"_processorContext",void 0),p_(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new RT("".concat(this.getTrackId())),_r.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var _r,_o;return(_r=(_o=this._originMediaStreamTrack)===null||_o===void 0?void 0:_o.label)!==null&&_r!==void 0?_r:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,E_.debug("[".concat(this.getTrackId(),"] close")),this.emit(UE.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(_r,_o){let _a=arguments.length>2&&arguments[2]!==void 0&&arguments[2];this._isExternalTrack=_a,_r!==this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),_o&&this._originMediaStreamTrack.stop(),_r.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=_r,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await aS(this,UE.NEED_REPLACE_TRACK,this),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){E_.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(eN.TRACK_ENDED)}stateCheck(_r,_o){if(E_.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(_r,": ").concat(_o,"]")),_U(_o,_r),this._enabled&&this._muted&&_r==="enabled"&&_o===!1)throw new U_(k_.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print();if(!this._enabled&&!this._muted&&_r==="muted"&&_o===!0)throw new U_(k_.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}function oG(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}(function(_n){_n.IOS_15_INTERRUPTION_START="ios15-interruption-start",_n.IOS_15_INTERRUPTION_END="ios15-interruption-end",_n.IOS_INTERRUPTION_START="ios-interruption-start",_n.IOS_INTERRUPTION_END="ios-interruption-end",_n.STATE_CHANGE="state-change"})(PS||(PS={}));const sG=window.AudioContext||window.webkitAudioContext;let RR=null;const c0=new class extends lS{constructor(){super(...arguments),p_(this,"prevState",void 0),p_(this,"curState",void 0),p_(this,"currentTime",void 0),p_(this,"currentTimeStuckAt",void 0),p_(this,"interruptDetectorTrack",void 0),p_(this,"onLocalAudioTrackMute",()=>{E_.info("ios15-interruption-start"),this.emit(PS.IOS_15_INTERRUPTION_START)}),p_(this,"onLocalAudioTrackUnmute",async()=>{E_.info("ios15-interruption-end"),this.curState!=="running"||this.duringInterruption?E_.info("ios15-interruption-end-canceled"):(RR&&await RR.suspend(),this.emit(PS.IOS_15_INTERRUPTION_END))})}get duringInterruption(){return this.prevState==="running"&&this.curState==="interrupted"}bindInterruptDetectorTrack(_n){E_.debug("webaudio bindInterruptDetectorTrack ".concat(_n.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=_n,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(_n){E_.debug("webaudio unbindInterruptDetectorTrack ".concat(_n.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===_n&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function QJ(){if(!sG)return void E_.error("your browser is not support web audio");E_.info("create audio context");const _n=function(_r){for(var _o=1;_o<arguments.length;_o++){var _a=arguments[_o]!=null?arguments[_o]:{};_o%2?oG(Object(_a),!0).forEach(function(_u){p_(_r,_u,_a[_u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_r,Object.getOwnPropertyDescriptors(_a)):oG(Object(_a)).forEach(function(_u){Object.defineProperty(_r,_u,Object.getOwnPropertyDescriptor(_a,_u))})}return _r}({},J_("WEBAUDIO_INIT_OPTIONS"));E_.debug("audio context init option:",JSON.stringify(_n)),RR=new sG(_n),c0.curState=RR.state,RR.onstatechange=()=>{c0.prevState=c0.curState,c0.curState=RR?RR.state:void 0,(KS()||uI())&&c0.prevState==="running"&&c0.curState==="interrupted"&&(E_.info("ios-interruption-start"),c0.emit(PS.IOS_INTERRUPTION_START)),(KS()||uI())&&c0.prevState==="interrupted"&&c0.curState==="running"&&(E_.info("ios-interruption-end"),c0.emit(PS.IOS_INTERRUPTION_END)),c0.prevState!==c0.curState&&(E_.debug("AudioContext State Change","".concat(c0.prevState,"=>").concat(c0.curState)),c0.emit(PS.STATE_CHANGE))},setInterval(()=>{var _r;const _o=(_r=RR)===null||_r===void 0?void 0:_r.currentTime;c0.currentTime!==_o?(c0.currentTimeStuckAt&&(E_.debug("AudioContext current time resume at ".concat(_o)),c0.currentTimeStuckAt=void 0),c0.currentTime=_o):(_o!==c0.currentTimeStuckAt&&(AE.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:_o},tag:nS.TRACER}).onSuccess(),E_.warning("AudioContext current time stuck at ".concat(_o))),c0.currentTimeStuckAt=_o)},5e3),async function(_r){const _o=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let _a,_u=!1,_p=!1,_f=!1;function n_(P_){_r.state==="running"?r_(!1):KS()||uI()?_r.state==="suspended"&&(r_(!0),P_&&_r.resume().then(s_,s_)):_r.state!=="closed"&&(r_(!0),P_&&_r.resume().then(s_,s_))}function r_(P_){if(_u!==P_){_u=P_;for(let _g=0,_y=_o;_g<_y.length;_g+=1){const hE=_y[_g];P_?window.addEventListener(hE,u_,{capture:!0,passive:!0}):window.removeEventListener(hE,u_,{capture:!0,passive:!0})}}}function o_(){n_(!0)}function s_(){n_(!1)}function u_(){n_(!0)}function g_(P_){if(!_f)if(_a.paused)if(P_){w_(!1),_f=!0;let _g;try{_g=_a.play(),_g?_g.then(D_,D_):(_a.addEventListener("playing",D_),_a.addEventListener("abort",D_),_a.addEventListener("error",D_))}catch{D_()}}else w_(!0);else w_(!1)}function w_(P_){if(_p!==P_){_p=P_;for(let _g=0,_y=_o;_g<_y.length;_g++){const hE=_y[_g];P_?window.addEventListener(hE,M_,{capture:!0,passive:!0}):window.removeEventListener(hE,M_,{capture:!0,passive:!0})}}}function D_(){_a.removeEventListener("playing",D_),_a.removeEventListener("abort",D_),_a.removeEventListener("error",D_),_f=!1,g_(!1)}function M_(){g_(!0)}if(KS()){const P_=_r.createMediaStreamDestination(),_g=document.createElement("div");_g.innerHTML="<audio x-webkit-airplay='deny'></audio>",_a=_g.children.item(0),_a.controls=!1,_a.disableRemotePlayback=!0,_a.preload="auto",_a.srcObject=P_.stream,g_(!0)}c0.on(PS.STATE_CHANGE,o_),n_(!1)}(RR)}function PD(){if(!RR){if(QJ(),!RR)throw new U_(k_.NOT_SUPPORTED,"can not create audio context");return RR}return RR}function aG(){return!!RR}function _L(_n){if(function(){if(uH!==null)return uH;const _a=PD(),_u=_a.createBufferSource(),_p=_a.createGain(),_f=_a.createGain();_u.connect(_p),_u.connect(_f),_u.disconnect(_p);let n_=!1;try{_u.disconnect(_p)}catch{n_=!0}return _u.disconnect(),uH=n_,n_}())return;const _r=_n.connect,_o=_n.disconnect;_n.connect=(_a,_u,_p)=>(_n._inputNodes||(_n._inputNodes=[]),_n._inputNodes.includes(_a)||(_a instanceof AudioNode?(_n._inputNodes.push(_a),_r.call(_n,_a,_u,_p)):_r.call(_n,_a,_u)),_n),_n.disconnect=(_a,_u,_p)=>{_o.call(_n),_a?vH(_n._inputNodes,_a):_n._inputNodes=[];for(const _f of _n._inputNodes)_r.call(_n,_f)}}let uH=null;function cG(_n,_r){let _o=!1;const _a=1/_r;if(J_("DISABLE_WEBAUDIO")){const _u=window.setInterval(()=>{_o?window.clearInterval(_u):_n(performance.now()/1e3)},1e3*_a)}else{const _u=PD();let _p=_u.createGain();_p.gain.value=0,_p.connect(_u.destination);const _f=()=>{if(_o)return void(_p=null);const n_=_u.createOscillator();n_.onended=_f,n_.connect(_p),n_.start(0),n_.stop(_u.currentTime+_a),_n(_u.currentTime)};_f()}return()=>{_o=!0}}class uG{constructor(){p_(this,"context",void 0),p_(this,"analyserNode",void 0),p_(this,"sourceNode",void 0),this.context=PD(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(_r){if(_r!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch{}this.sourceNode=_r,_r==null||_r.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode||(!this.context||KS()||uI()||this.context.state!=="running"&&this.context.resume(),!this.analyserNode))return 0;const _r=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(_r);else{const _a=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(_a);for(let _u=0;_u<_r.length;++_u)_r[_u]=_a[_u]/128-1}const _o=ZR(_r).call(_r,(_a,_u)=>_a+_u*_u,0)/_r.length;return Math.max(10*Math.log10(_o)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var _r,_o;(_r=this.sourceNode)===null||_r===void 0||_r.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,(_o=this.sourceNode)===null||_o===void 0||_o.connect(this.analyserNode)}catch{E_.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}}class lG extends lS{get processSourceNode(){return this.sourceNode}set processedNode(_r){var _o;if(!this.isDestroyed&&this._processedNode!==_r){try{var _a;(_a=this.sourceNode)===null||_a===void 0||_a.disconnect(this.outputNode)}catch{}(_o=this._processedNode)===null||_o===void 0||_o.disconnect(),this._processedNode=_r,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),p_(this,"outputNode",void 0),p_(this,"outputTrack",void 0),p_(this,"isPlayed",!1),p_(this,"sourceNode",void 0),p_(this,"context",void 0),p_(this,"audioBufferNode",void 0),p_(this,"destNode",void 0),p_(this,"audioOutputLevel",0),p_(this,"volumeLevelAnalyser",void 0),p_(this,"_processedNode",void 0),p_(this,"playNode",void 0),p_(this,"isDestroyed",!1),p_(this,"onNoAudioInput",void 0),p_(this,"isNoAudioInput",!1),p_(this,"_noAudioInputCount",0),this.context=PD(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),_L(this.outputNode),this.volumeLevelAnalyser=new uG}startGetAudioBuffer(_r){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(_r),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=_o=>{this.emit(KT.ON_AUDIO_BUFFER,function(_a){for(let _u=0;_u<_a.outputBuffer.numberOfChannels;_u+=1){const _p=_a.outputBuffer.getChannelData(_u);for(let _f=0;_f<_p.length;_f+=1)_p[_f]=0}return _a.inputBuffer}(_o))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!VS().webAudioMediaStreamDest)throw new U_(k_.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(_r){this.context.state!=="running"&&mI(()=>{c0.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=_r||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch{}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let _r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(_r>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;KS()||uI()?this.context.state==="suspended"&&this.context.resume():this.context.state!=="running"&&this.context.resume();const _o=this.volumeLevelAnalyser.getAnalyserNode();let _a;_o.getFloatTimeDomainData?(_a=new Float32Array(_o.fftSize),_o.getFloatTimeDomainData(_a)):(_a=new Uint8Array(_o.fftSize),_o.getByteTimeDomainData(_a));let _u=!1;for(let _p=0;_p<_a.length;_p++)_a[_p]!==0&&(_u=!0);return _u?(this.isNoAudioInput=!1,!0):(await dT(200),await this.checkHasAudioInput(_r?_r+1:1)&&_u)}getAudioVolume(){return this.outputNode.gain.value}setVolume(_r){this.outputNode.gain.setValueAtTime(_r,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var _r,_o;(_r=this.processedNode)===null||_r===void 0||_r.disconnect(),(_o=this.sourceNode)===null||_o===void 0||_o.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var _r;this.processedNode?(_r=this.processedNode)===null||_r===void 0||_r.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}}class lH extends lG{get isFreeze(){return!1}constructor(_r,_o,_a){var _u;if(super(),p_(this,"sourceNode",void 0),p_(this,"track",void 0),p_(this,"clonedTrack",void 0),p_(this,"audioElement",void 0),p_(this,"isCurrentTrackCloned",!1),p_(this,"isRemoteTrack",!1),p_(this,"originVolumeLevelAnalyser",void 0),p_(this,"rebuildWebAudio",async()=>{if(E_.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void E_.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then(()=>E_.info("resume success")),E_.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();const n_=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?n_.stop():this.isCurrentTrackCloned=!0;const r_=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(r_),_L(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();const o_=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(o_,this.context.currentTime),_L(this.outputNode),this.emit(KT.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=r_,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()}),_r.kind!=="audio")throw new U_(k_.UNEXPECTED_ERROR);this.track=_r;const _p=new MediaStream([this.track]);if(this.isRemoteTrack=!!_o,this.sourceNode=this.context.createMediaStreamSource(_p),_L(this.sourceNode),_a){const n_=_a.clone();n_.enabled=!0,this.clonedTrack=n_,E_.debug("create an unmuted track ".concat(n_.id," from the original track ").concat(_a.id," to get the volume"));const r_=this.context.createMediaStreamSource(new MediaStream([n_]));_L(r_),this.originVolumeLevelAnalyser=new uG,this.originVolumeLevelAnalyser.updateSource(r_)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=_p;const _f=I0();_o&&_f.os===zS.IOS&&Number((_u=_f.osVersion)===null||_u===void 0?void 0:_u.split(".")[0])<15&&(c0.on(PS.STATE_CHANGE,()=>{this.context.state==="suspended"?document.body.addEventListener("click",this.rebuildWebAudio,!0):this.context.state==="running"&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(n_=>{n_||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(_r){this.sourceNode.disconnect(),this.track=_r,this.isCurrentTrackCloned=!1;const _o=new MediaStream([_r]);this.sourceNode=this.context.createMediaStreamSource(_o),_L(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(KT.UPDATE_SOURCE),this.audioElement.srcObject=_o}destroy(){var _r;this.audioElement.srcObject=null,this.audioElement.remove(),c0.off("state-change",this.rebuildWebAudio),(_r=this.originVolumeLevelAnalyser)===null||_r===void 0||_r.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(_r){return this.context.createMediaStreamSource(new MediaStream([_r]))}updateOriginTrack(_r){const _o=_r.clone();_o.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=_o),E_.debug("create an unmuted track ".concat(_o.id," from the original track ").concat(_r.id," to get the volume"));const _a=this.context.createMediaStreamSource(new MediaStream([_o]));_L(_a),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(_a)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}async function dG(_n,_r){const _o=(_u,_p)=>_u?typeof _u!="number"?_u.max||_u.exact||_u.ideal||_u.min||_p:_u:_p,_a={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:_n,maxHeight:_o(_r.height,1080),maxWidth:_o(_r.width,1920)}}};return _r.frameRate&&typeof _r.frameRate!="number"?(_a.video.mandatory.maxFrameRate=_r.frameRate.max,_a.video.mandatory.minFrameRate=_r.frameRate.min):typeof _r.frameRate=="number"&&(_a.video.mandatory.maxFrameRate=_r.frameRate),await navigator.mediaDevices.getUserMedia(_a)}async function XJ(_n){const _r=await hG(_n.mediaSource),_o=await function(_a){return new uE((_u,_p)=>{const _f=document.createElement("div");_f.innerText="share screen",_f.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const n_=document.createElement("div");n_.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const r_=document.createElement("div");r_.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",r_.setAttribute("style","height: 12%;");const o_=document.createElement("div");o_.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const s_=document.createElement("div");s_.setAttribute("style","text-align: right; padding: 16px 0;");const u_=document.createElement("button");u_.innerHTML="cancel",u_.setAttribute("style","width: 85px;"),u_.onclick=()=>{document.body.removeChild(g_);const w_=new Error("NotAllowedError");w_.name="NotAllowedError",_p(w_)},s_.appendChild(u_),n_.appendChild(r_),n_.appendChild(o_),n_.appendChild(s_);const g_=document.createElement("div");g_.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),g_.appendChild(_f),g_.appendChild(n_),document.body.appendChild(g_),_a.map(w_=>{if(w_.id){const D_=document.createElement("div");D_.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let M_=w_.thumbnail;const{width:P_}=M_.getSize();P_>1920&&(M_=M_.resize({width:1920})),D_.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+M_.toDataURL()+' /></div><span style="	height: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+(w_.name.replace(/[\u00A0-\u9999<>\&]/g,function(_g){return"&#"+_g.charCodeAt(0)+";"})+"</span>"),D_.onclick=()=>{document.body.removeChild(g_),_u(w_.id)},o_.appendChild(D_)}})})}(_r);return await dG(_o,_n)}async function hG(_n){let _r=["window","screen"];_n!=="application"&&_n!=="window"||(_r=["window"]),_n==="screen"&&(_r=["screen"]);const _o=pG();if(!_o)throw new U_(k_.ELECTRON_IS_NULL);let _a=null;try{var _u;_a=((_u=_o.desktopCapturer)===null||_u===void 0?void 0:_u.getSources({types:_r}))||_o.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:_r})}catch{_a=null}_a&&_a.then||(_a=new uE((_p,_f)=>{_o.desktopCapturer.getSources({types:_r},(n_,r_)=>{n_?_f(n_):_p(r_)})}));try{return await _a}catch(_p){throw new U_(k_.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,_p.toString())}}let bF=null;function pG(){if(bF)return bF;try{return bF=window.require("electron"),bF}catch{return null}}function fG(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}const dH=new RT("safari");let mG=!1,_G=!1;async function fI(_n,_r){let _o=0,_a=null;for(;_o<2;)try{_a=await ZJ(_n,_r,_o>0);break}catch(_u){if(_u instanceof U_)throw E_.error("[".concat(_r,"] ").concat(_u.toString())),_u;const _p=SF(_u.name||_u.code||_u,_u.message);if(_p.code===k_.MEDIA_OPTION_INVALID){E_.debug("[".concat(_r,"] detect media option invalid, retry")),_o+=1,await dT(500);continue}throw E_.error("[".concat(_r,"] ").concat(_p.toString())),_p}if(!_a)throw new U_(k_.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return _a}async function ZJ(_n,_r,_o){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new U_(k_.NOT_SUPPORTED,"can not find getUserMedia");_o&&(_n.video&&(delete _n.video.width,delete _n.video.height),_n.screen&&(delete _n.screen.width,delete _n.screen.height));const _a=VS(),_u=new MediaStream;if(_n.audioSource&&_u.addTrack(_n.audioSource),_n.videoSource&&_u.addTrack(_n.videoSource),!_n.audio&&!_n.video&&!_n.screen)return E_.debug("Using Video Source/ Audio Source"),_u;if(_n.screen)if(pG())_n.screen.sourceId?UD(_u,await dG(_n.screen.sourceId,_n.screen)):UD(_u,await XJ(_n.screen));else if($j()&&_n.screen.extensionId&&_n.screen.mandatory){if(!_a.getStreamFromExtension)throw new U_(k_.NOT_SUPPORTED,"This browser does not support screen sharing");E_.debug("[".concat(_r,'] Screen access on chrome stable, looking for extension"'));const g_=await(_f=_n.screen.extensionId,n_=_r,new uE((w_,D_)=>{try{chrome.runtime.sendMessage(_f,{getStream:!0},M_=>{if(!M_||!M_.streamId)return E_.error("[".concat(n_,"] No response from Chrome Plugin. Plugin not installed properly"),M_),void D_(new U_(k_.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));w_(M_.streamId)})}catch(M_){E_.error("[".concat(n_,"] AgoraRTC screensharing plugin is not accessible(").concat(_f,")"),M_.toString()),D_(new U_(k_.CHROME_PLUGIN_NOT_INSTALL))}}));_n.screen.mandatory.chromeMediaSourceId=g_,UD(_u,await navigator.mediaDevices.getUserMedia({video:{mandatory:_n.screen.mandatory}}))}else if(_a.getDisplayMedia){var _p;_n.screen.mediaSource&&F5(_n.screen.mediaSource);const g_={width:_n.screen.width,height:_n.screen.height,frameRate:_n.screen.frameRate,displaySurface:(_p=_n.screen.displaySurface)!==null&&_p!==void 0?_p:_n.screen.mediaSource==="screen"?"monitor":_n.screen.mediaSource},{selfBrowserSurface:w_,surfaceSwitching:D_,systemAudio:M_}=_n.screen,P_={selfBrowserSurface:w_,surfaceSwitching:D_,systemAudio:M_};!w_&&delete P_.selfBrowserSurface,!D_&&delete P_.surfaceSwitching,!M_&&delete P_.systemAudio,E_.debug("[".concat(_r,"] getDisplayMedia:"),JSON.stringify({video:g_,audio:!!_n.screenAudio,controls:P_})),UD(_u,await navigator.mediaDevices.getDisplayMedia(function(_g){for(var _y=1;_y<arguments.length;_y++){var hE=arguments[_y]!=null?arguments[_y]:{};_y%2?fG(Object(hE),!0).forEach(function(NE){p_(_g,NE,hE[NE])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_g,Object.getOwnPropertyDescriptors(hE)):fG(Object(hE)).forEach(function(NE){Object.defineProperty(_g,NE,Object.getOwnPropertyDescriptor(hE,NE))})}return _g}({video:g_,audio:!!_n.screenAudio},P_)))}else{if(!tS())throw E_.error("[".concat(_r,"] This browser does not support screenSharing")),new U_(k_.NOT_SUPPORTED,"This browser does not support screen sharing");{_n.screen.mediaSource&&F5(_n.screen.mediaSource);const g_={video:{mediaSource:_n.screen.mediaSource,width:_n.screen.width,height:_n.screen.height,frameRate:_n.screen.frameRate}};E_.debug("[".concat(_r,"] getUserMedia: ").concat(JSON.stringify(g_))),UD(_u,await navigator.mediaDevices.getUserMedia(g_))}}var _f,n_;if(!_n.video&&!_n.audio)return _u;let r_={video:_n.video,audio:_n.audio},o_=J_("MEDIA_DEVICE_CONSTRAINTS");if(o_)try{typeof o_=="string"&&(o_=JSON.parse(o_)),r_=function g_(w_,D_){if(!v6(w_)||!v6(D_)||Array.isArray(w_)&&!Array.isArray(D_)||!Array.isArray(w_)&&Array.isArray(D_))return D_;if(Array.isArray(D_)&&Array.isArray(w_)){const M_=[...w_];for(let P_=0;P_<D_.length;P_++)M_[P_]=g_(w_[P_],D_[P_]);return M_}{const M_=vL({},w_);for(const P_ in D_)Object.prototype.hasOwnProperty.call(D_,P_)&&(Object.prototype.hasOwnProperty.call(w_,P_)?M_[P_]=g_(w_[P_],D_[P_]):M_[P_]=D_[P_]);return M_}}(r_,o_)}catch{}E_.debug("[".concat(_r,"] GetUserMedia"),JSON.stringify(r_)),I0();let s_,u_=null;(rT()||KS()||vD())&&(u_=await dH.lock());try{s_=await navigator.mediaDevices.getUserMedia(r_)}catch(g_){throw u_&&u_(),g_}return r_.audio&&(mG=!0),r_.video&&(_G=!0),UD(_u,s_),u_&&u_(),_u}function SF(_n,_r){switch(_n){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new U_(k_.MEDIA_OPTION_INVALID,"".concat(_n,": ").concat(_r));case"NotFoundError":case"DevicesNotFoundError":return new U_(k_.DEVICE_NOT_FOUND,"".concat(_n,": ").concat(_r));case"NotSupportedError":return new U_(k_.NOT_SUPPORTED,"".concat(_n,": ").concat(_r));case"NotReadableError":return new U_(k_.NOT_READABLE,"".concat(_n,": ").concat(_r));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new U_(k_.PERMISSION_DENIED,"".concat(_n,": ").concat(_r));case"ConstraintNotSatisfiedError":return new U_(k_.CONSTRAINT_NOT_SATISFIED,"".concat(_n,": ").concat(_r));default:return E_.error("getUserMedia unexpected error",_n),new U_(k_.UNEXPECTED_ERROR,"".concat(_n,": ").concat(_r))}}function UD(_n,_r){const _o=_n.getVideoTracks()[0],_a=_n.getAudioTracks()[0],_u=_r.getVideoTracks()[0],_p=_r.getAudioTracks()[0];_p&&(_a&&_n.removeTrack(_a),_n.addTrack(_p)),_u&&(_o&&_n.removeTrack(_o),_n.addTrack(_u))}const IR=new class extends lS{get state(){return this._state}set state(_n){_n!==this._state&&(this.emit(JO.STATE_CHANGE,_n),this._state=_n)}constructor(){super(),p_(this,"_state",fL.IDLE),p_(this,"isAccessMicrophonePermission",!1),p_(this,"isAccessCameraPermission",!1),p_(this,"lastAccessMicrophonePermission",!1),p_(this,"lastAccessCameraPermission",!1),p_(this,"checkdeviceMatched",!1),p_(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(J_("ENUMERATE_DEVICES_INTERVAL")||nU()&&lO())&&this.updateDevicesInfo()},J_("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(_n=>E_.error(_n.toString()))}async enumerateDevices(_n,_r){let _o=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new U_(k_.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const _a=await navigator.mediaDevices.enumerateDevices(),_u=this.checkMediaDeviceInfoIsOk(_a);let _p=!this.isAccessMicrophonePermission&&_n,_f=!this.isAccessCameraPermission&&_r;_u.audio&&(_p=!1),_u.video&&(_f=!1);let n_=null,r_=null,o_=null;if(!_o&&(_p||_f)){if(dH.isLocked&&(E_.debug("[device manager] wait GUM lock"),(await dH.lock())(),E_.debug("[device manager] GUM unlock")),mG&&(_p=!1,this.isAccessMicrophonePermission=!0),_G&&(_f=!1,this.isAccessCameraPermission=!0),E_.debug("[device manager] check media device permissions",_n,_r,_p,_f),_p&&_f){try{o_=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(s_){const u_=SF(s_.name||s_.code||s_,s_.message);if(u_.code===k_.PERMISSION_DENIED)throw u_;E_.warning("getUserMedia failed in getDevices",u_)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(_p){try{n_=await navigator.mediaDevices.getUserMedia({audio:_n})}catch(s_){const u_=SF(s_.name||s_.code||s_,s_.message);if(u_.code===k_.PERMISSION_DENIED)throw u_;E_.warning("getUserMedia failed in getDevices",u_)}this.isAccessMicrophonePermission=!0}else if(_f){try{r_=await navigator.mediaDevices.getUserMedia({video:_r})}catch(s_){const u_=SF(s_.name||s_.code||s_,s_.message);if(u_.code===k_.PERMISSION_DENIED)throw u_;E_.warning("getUserMedia failed in getDevices",u_)}this.isAccessCameraPermission=!0}E_.debug("[device manager] mic permission",_n,"cam permission",_r)}try{const s_=await navigator.mediaDevices.enumerateDevices();return n_&&n_.getTracks().forEach(u_=>u_.stop()),r_&&r_.getTracks().forEach(u_=>u_.stop()),o_&&o_.getTracks().forEach(u_=>u_.stop()),n_=null,r_=null,o_=null,s_}catch(s_){return n_&&n_.getTracks().forEach(u_=>u_.stop()),r_&&r_.getTracks().forEach(u_=>u_.stop()),o_&&o_.getTracks().forEach(u_=>u_.stop()),n_=null,r_=null,o_=null,new U_(k_.ENUMERATE_DEVICES_FAILED,s_.toString()).throw()}}async getRecordingDevices(){let _n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,_n)).filter(_r=>_r.kind==="audioinput")}async getCamerasDevices(){let _n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!1,!0,_n)).filter(_r=>_r.kind==="videoinput")}async getSpeakers(){let _n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,_n)).filter(_r=>_r.kind==="audiooutput")}searchDeviceIdByName(_n){let _r=null;return this.deviceInfoMap.forEach(_o=>{_o.device.label===_n&&(_r=_o.device.deviceId)}),_r}async getDeviceById(_n){const _r=(await this.enumerateDevices(!0,!0,!0)).find(_o=>_o.deviceId===_n);if(!_r)throw new U_(k_.DEVICE_NOT_FOUND,"deviceId: ".concat(_n));return _r}async init(){this.state=fL.INITING;try{await this.updateDevicesInfo(),this.state=fL.INITEND}catch(_n){throw E_.warning("Device Detection functionality cannot start properly.",_n.toString()),this.state=fL.IDLE,!function(){return typeof isSecureContext=="boolean"?isSecureContext:location.protocol==="https:"||location.protocol==="file:"||location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.hostname==="::1"}()&&new U_(k_.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),_n}}async updateDevicesInfo(){const _n=await this.enumerateDevices(!0,!0,!0),_r=Date.now(),_o=[];if(_n[0]&&_n[0].label&&this.checkdeviceMatched===!1){this.checkdeviceMatched=!0;const _u=_n.find(_f=>_f.kind==="audioinput"&&_f.deviceId==="default"),_p=_n.find(_f=>_f.kind==="audiooutput"&&_f.deviceId==="default");_u&&_p?_p.groupId===_u.groupId?E_.debug("[device-check] default input ".concat(_u.label," and output ").concat(_p.label," is the same group")):E_.warning("[device-check] default input ".concat(_u.label," and output ").concat(_p.label," is not the same group")):E_.debug("[device-check] default input or output not found")}const _a=this.checkMediaDeviceInfoIsOk(_n);if(_n.forEach(_u=>{if(!_u.deviceId)return;const _p=this.deviceInfoMap.get("".concat(_u.kind,"_").concat(_u.deviceId));if((_p?_p.state:"INACTIVE")!=="ACTIVE"){const _f={initAt:_r,updateAt:_r,device:_u,state:"ACTIVE"};this.deviceInfoMap.set("".concat(_u.kind,"_").concat(_u.deviceId),_f),_o.push(_f)}_p&&(_p.updateAt=_r)}),this.deviceInfoMap.forEach((_u,_p)=>{_u.state==="ACTIVE"&&_u.updateAt!==_r&&(_u.state="INACTIVE",_o.push(_u))}),this.state!==fL.INITEND)return _a.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(_a.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));_o.forEach(_u=>{switch(_u.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(JO.RECORDING_DEVICE_CHANGED,_u);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(JO.CAMERA_DEVICE_CHANGED,_u);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(JO.PLAYOUT_DEVICE_CHANGED,_u)}}),_a.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),_a.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(_n){const _r=_n.filter(_u=>_u.kind==="audioinput"),_o=_n.filter(_u=>_u.kind==="videoinput"),_a={audio:!1,video:!1};for(const _u of _r)if(_u.label&&_u.deviceId){_a.audio=!0;break}for(const _u of _o)if(_u.label&&_u.deviceId){_a.video=!0;break}return _a}},e9=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],cR=new class{constructor(){p_(this,"onAutoplayFailed",void 0),p_(this,"elementMap",new Map),p_(this,"elementStateMap",new Map),p_(this,"elementsNeedToResume",[]),p_(this,"sinkIdMap",new Map),p_(this,"autoResumeAfterInterruption",()=>{Array.from(this.elementMap.entries()).forEach(_n=>{let[_r,_o]=_n;const _a=this.elementStateMap.get(_r),_u=_o.srcObject.getAudioTracks()[0];DR()?_u&&_u.readyState==="live"&&c0.curState==="running"&&(E_.debug("auto resume after interruption for iOS 15"),_o.pause(),_o.play()):_a&&_a==="paused"&&_u&&_u.readyState==="live"&&c0.curState==="running"&&(E_.debug("auto resume after interruption for iOS"),_o.play())})}),p_(this,"autoResumeAfterInterruptionOnIOS15",()=>{Array.from(this.elementMap.entries()).forEach(_n=>{let[_r,_o]=_n;const _a=_o.srcObject.getAudioTracks()[0];_a&&_a.readyState==="live"&&(E_.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),_o.pause(),_o.play())})}),this.autoResumeAudioElement(),c0.on(PS.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),c0.on(PS.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),c0.on(PS.STATE_CHANGE,()=>{KS()&&c0.prevState==="suspended"&&c0.curState==="running"&&this.autoResumeAfterInterruption()})}async setSinkID(_n,_r){const _o=this.elementMap.get(_n);if(this.sinkIdMap.set(_n,_r),_o)try{await _o.setSinkId(_r)}catch(_a){throw new U_(k_.PERMISSION_DENIED,"can not set sink id: "+_a.toString())}}play(_n,_r,_o,_a){if(this.elementMap.has(_r))return;const _u=document.createElement("audio");_u.autoplay=!0,_u.srcObject=new MediaStream([_n]),this.bindAudioElementEvents(_r,_u),this.elementMap.set(_r,_u),this.elementStateMap.set(_r,sT.INIT),this.setVolume(_r,_o);const _p=this.sinkIdMap.get(_r);if(_p)try{_u.setSinkId(_p).catch(n_=>{E_.warning("[".concat(_r,"] set sink id failed"),n_.toString())})}catch(n_){E_.warning("[".concat(_r,"] set sink id failed"),n_.toString())}const _f=_u.play();_f&&_f.then&&_f.catch(n_=>{_a&&AE.autoplayFailed(_a,"audio",n_.message,_r),E_.warning("audio element play warning",n_.toString()),this.elementMap.has(_r)&&n_.name==="NotAllowedError"&&(E_.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(_u),mI(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),tG()}))})}updateTrack(_n,_r){const _o=this.elementMap.get(_n);_o&&(_o.srcObject=new MediaStream([_r]))}isPlaying(_n){return this.elementMap.has(_n)}setVolume(_n,_r){const _o=this.elementMap.get(_n);_o&&(_r=Math.max(0,Math.min(100,_r)),_o.volume=_r/100)}stop(_n){const _r=this.elementMap.get(_n);if(this.sinkIdMap.delete(_n),!_r)return;const _o=this.elementsNeedToResume.indexOf(_r);this.elementsNeedToResume.splice(_o,1),_r.srcObject=null,_r.remove(),this.elementMap.delete(_n),this.elementStateMap.delete(_n)}bindAudioElementEvents(_n,_r){e9.forEach(_o=>{_r.addEventListener(_o,_a=>{const _u=this.elementStateMap.get(_n),_p=_a.type==="pause"?"paused":_a.type;if(E_.debug("[".concat(_n,"] audio-element-status change ").concat(_u," => ").concat(_p)),_a.type==="error"){const _f=_r==null?void 0:_r.error;_f&&E_.error("[".concat(_n,"] media error, code: ").concat(_f.code,", message: ").concat(_f.message))}this.elementStateMap.set(_n,_p)})})}getPlayerState(_n){return this.elementStateMap.get(_n)||"uninit"}autoResumeAudioElement(){const _n=()=>{this.elementsNeedToResume.forEach(_r=>{_r.play().then(_o=>{E_.debug("Auto resume audio element success")}).catch(_o=>{E_.warning("Auto resume audio element failed!",_o)})}),this.elementsNeedToResume=[]};new uE(_r=>{document.body?_r():window.addEventListener("load",()=>_r())}).then(()=>{sL()?document.body.addEventListener("click",_n,!0):(document.body.addEventListener("touchstart",_n,!0),document.body.addEventListener("mousedown",_n,!0))})}};function hS(){return function(_n,_r,_o){const _a=_o.value;return typeof _a=="function"&&(_o.value=function(){this._isClosed&&new U_(k_.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning");for(var _u=arguments.length,_p=new Array(_u),_f=0;_f<_u;_f++)_p[_f]=arguments[_f];const n_=_a.apply(this,_p);return n_ instanceof uE?new uE((r_,o_)=>{n_.then(r_).catch(o_)}):n_}),_o}}var t9=CS("Array").values,n9=_A,r9=eT,i9=t_,o9=t9,hH=Array.prototype,s9={DOMTokenList:!0,NodeList:!0},fO=function(_n){var _r=_n.values;return _n===hH||i9(hH,_n)&&_r===hH.values||r9(s9,n9(_n))?o9:_r};function gG(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function wF(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?gG(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):gG(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}class vG extends lS{constructor(_r){super(),p_(this,"name","VideoProcessorDestination"),p_(this,"ID","0"),p_(this,"_source",void 0),p_(this,"videoContext",void 0),p_(this,"inputTrack",void 0),this.videoContext=_r}get kind(){return"video"}get enabled(){return!0}pipe(){throw new U_(k_.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new U_(k_.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(_r){if(_r.context!==this.videoContext)throw new Error(`ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.
Probably you are making pipeline like this:
videoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).`);_r.track&&_r.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=_r.track,this.emit(uT.ON_TRACK,_r.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(uT.ON_TRACK,void 0)}}class yG extends lS{set chained(_r){this._chained=_r}get chained(){return this._chained}constructor(_r,_o){super(),p_(this,"constraintsMap",new Map),p_(this,"statsRegistry",[]),p_(this,"usageRegistry",[]),p_(this,"trackId",void 0),p_(this,"direction",void 0),p_(this,"_chained",!1),this.trackId=_r,this.direction=_o}async getConstraints(){return await hT(this,JT.REQUEST_CONSTRAINTS)}async requestApplyConstraints(_r,_o){var _a;return E_.info("processor ".concat(_o.name," requestApplyConstraints for ").concat(this.trackId)),_r&&this.constraintsMap.set(_o,_r),aS(this,JT.REQUEST_UPDATE_CONSTRAINTS,Array.from(fO(_a=this.constraintsMap).call(_a)))}async requestRevertConstraints(_r){var _o;if(this.constraintsMap.has(_r))return E_.info("processor ".concat(_r.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(_r),aS(this,JT.REQUEST_UPDATE_CONSTRAINTS,Array.from(fO(_o=this.constraintsMap).call(_o)))}registerStats(_r,_o,_a){this.statsRegistry.find(_u=>_u.processorID===_r.ID&&_u.processorName===_r.name&&_u.type===_o)||this.statsRegistry.push({processorName:_r.name,processorID:_r.ID,type:_o,cb:_a})}unregisterStats(_r,_o){const _a=this.statsRegistry.findIndex(_u=>_u.processorID===_r.ID&&_u.processorName===_r.name&&_u.type===_o);_a!==-1&&this.statsRegistry.splice(_a,1)}gatherStats(){const _r=[];for(const{processorID:_o,processorName:_a,type:_u,cb:_p}of this.statsRegistry)try{const _f=_p();_r.push({processorID:_o,processorName:_a,type:_u,stats:_f})}catch(_f){E_.error(new U_(k_.UNEXPECTED_ERROR,_f.message))}return _r}registerUsage(_r,_o){this.usageRegistry.find(_a=>_a.processorID===_r.ID&&_a.processorName===_r.name)||this.usageRegistry.push({processorID:_r.ID,processorName:_r.name,cb:_o})}unregisterUsage(_r){const _o=this.usageRegistry.findIndex(_a=>_a.processorID===_r.ID&&_a.processorName===_r.name);_o!==-1&&this.usageRegistry.splice(_o,1)}async gatherUsage(){const _r=[];if(!this.chained)return[];for(const{cb:_o}of this.usageRegistry)try{let _a=_o();_a instanceof uE&&(_a=await _a),_r.push(wF(wF({},_a),{},{direction:this.direction}))}catch(_a){E_.error("gather extension usage error",_a)}return _r}getDirection(){return this.direction}}class EG extends lS{constructor(_r){super(),p_(this,"name","AudioProcessorDestination"),p_(this,"ID","0"),p_(this,"inputTrack",void 0),p_(this,"inputNode",void 0),p_(this,"audioProcessorContext",void 0),p_(this,"_source",void 0),this.audioProcessorContext=_r}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new U_(k_.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new U_(k_.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(uT.ON_TRACK,void 0),this.emit(uT.ON_NODE,void 0)}updateInput(_r){if(_r.context!==this.audioProcessorContext)throw new Error(`ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.
        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).`);_r.track&&this.inputTrack!==_r.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=_r.track,this.emit(uT.ON_TRACK,this.inputTrack)),_r.node&&this.inputNode!==_r.node&&(this.audioProcessorContext.chained=!0,this.inputNode=_r.node,this.emit(uT.ON_NODE,this.inputNode))}}class bG extends lS{set chained(_r){this._chained=_r}get chained(){return this._chained}constructor(_r,_o,_a){super(),p_(this,"constraintsMap",new Map),p_(this,"statsRegistry",[]),p_(this,"audioContext",void 0),p_(this,"trackId",void 0),p_(this,"direction",void 0),p_(this,"usageRegistry",[]),p_(this,"_chained",!1),this.audioContext=_r,this.trackId=_o,this.direction=_a}async getConstraints(){return hT(this,JT.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(_r,_o){var _a;return E_.info("processor ".concat(_o.name," requestApplyConstraints for ").concat(this.trackId)),_r&&this.constraintsMap.set(_o,_r),aS(this,JT.REQUEST_UPDATE_CONSTRAINTS,Array.from(fO(_a=this.constraintsMap).call(_a)))}async requestRevertConstraints(_r){var _o;if(this.constraintsMap.has(_r))return this.constraintsMap.delete(_r),aS(this,JT.REQUEST_UPDATE_CONSTRAINTS,Array.from(fO(_o=this.constraintsMap).call(_o)))}registerStats(_r,_o,_a){this.statsRegistry.find(_u=>_u.processorID===_r.ID&&_u.processorName===_r.name&&_u.type===_o)||this.statsRegistry.push({processorName:_r.name,processorID:_r.ID,type:_o,cb:_a})}unregisterStats(_r,_o){const _a=this.statsRegistry.findIndex(_u=>_u.processorID===_r.ID&&_u.processorName===_r.name&&_u.type===_o);_a!==-1&&this.statsRegistry.splice(_a,1)}gatherStats(){const _r=[];for(const{processorID:_o,processorName:_a,type:_u,cb:_p}of this.statsRegistry)try{const _f=_p();_r.push({processorID:_o,processorName:_a,type:_u,stats:_f})}catch(_f){E_.error(new U_(k_.UNEXPECTED_ERROR,_f.message))}return _r}registerUsage(_r,_o){this.usageRegistry.find(_a=>_a.processorID===_r.ID&&_a.processorName===_r.name)||this.usageRegistry.push({processorID:_r.ID,processorName:_r.name,cb:_o})}unregisterUsage(_r){const _o=this.usageRegistry.findIndex(_a=>_a.processorID===_r.ID&&_a.processorName===_r.name);_o!==-1&&this.usageRegistry.splice(_o,1)}async gatherUsage(){const _r=[];if(!this.chained)return[];for(const{cb:_o}of this.usageRegistry)try{let _a=_o();_a instanceof uE&&(_a=await _a),_r.push(wF(wF({},_a),{},{direction:this.direction}))}catch(_a){E_.error("gather extension usage error",_a)}return _r}getDirection(){return this.direction}}class pH extends lS{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),p_(this,"context",void 0),p_(this,"processSourceNode",void 0),p_(this,"outputTrack",void 0),p_(this,"processedNode",void 0),p_(this,"clonedTrack",void 0),p_(this,"outputNode",void 0),this.outputNode=new a9}setVolume(){}createOutputTrack(){throw new U_(k_.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}}class a9{disconnect(){}connect(){}}let TF,$D=null;class c9{constructor(){p_(this,"state","open"),p_(this,"trigger",void 0),p_(this,"tasks",[]),E_.debug("[macro-task-queue] is created."),this.trigger=setTimeout(()=>{this.state="closed",E_.debug("[macro-task-queue] will be closed, all remaining tasks will execute. [".concat(this.tasks.map(_r=>_r.key),"]")),this.trigger=void 0,this.tasks.forEach(_r=>{let{func:_o}=_r;return _o()}),this.tasks.length=0,E_.debug("[macro-task-queue] is closed.")})}enqueue(_r,_o){this.state!=="closed"&&(this.tasks.push({key:_r,func:_o}),E_.debug("[macro-task-queue] is queued, current queue ".concat(this.tasks.length,". ").concat(typeof _r=="string"?_r:"")))}runTask(_r){if(this.state==="closed")return;const _o=this.tasks.findIndex(_a=>_a.key===_r);if(_o!==-1){const _a=this.tasks.splice(_o,1);E_.debug("[macro-task-queue] is unqueued, current queue ".concat(this.tasks.length,". ").concat(typeof _r=="string"?_r:"")),_a[0].func()}}release(){this.trigger&&(this.state="closed",clearTimeout(this.trigger),this.trigger=void 0,this.tasks.length=0,E_.debug("[macro-task-queue] is closed."))}}function fH(_n){return function(_r,_o,_a){var _u;const _p=(_u=_a.value)!==null&&_u!==void 0?_u:_a.get,_f=function(){$D&&$D.state==="open"&&$D.runTask(_n);for(var n_=arguments.length,r_=new Array(n_),o_=0;o_<n_;o_++)r_[o_]=arguments[o_];return _p==null?void 0:_p.apply(this,...r_)};return _a.value?_a.value=_f:_a.get=_f,_a}}var SG,wG,TG,RG,IG,CG,AG,OG,NG,kG,xG,LG,MG,DG,PG,jG,UG,$G,FG,YG,BG,T0,VG,HG,GG,qG,WG,zG,mO,KG,JG,QG,XG,ZG,_q,e6,t6,n6,r6,QT;function i6(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function mH(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?i6(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):i6(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}(function(_n){_n.UPDATE_TRACK_SOURCE="update-track-source"})(TF||(TF={}));let lT=(SG=fH("INIT_WEBAUDIO"),wG=fH("INIT_WEBAUDIO"),TG=fH("INIT_WEBAUDIO"),RG=ME({argsMap:(_n,_r)=>[_n.getTrackId(),_r],throttleTime:300}),IG=ME({argsMap:(_n,_r)=>[_n.getTrackId(),_r]}),CG=hS(),AG=DD("LocalAudioTrack","_enabledMutex"),OG=ME({argsMap:(_n,_r)=>[_n.getTrackId(),_r]}),NG=hS(),kG=DD("LocalAudioTrack","_enabledMutex"),xG=ME({argsMap:(_n,_r)=>[_n.getTrackId(),_r]}),LG=hS(),MG=hS(),DG=hS(),PG=ME({argsMap:_n=>[_n.getTrackId()]}),jG=hS(),UG=ME({argsMap:_n=>[_n.getTrackId()]}),$G=hS(),FG=ME({argsMap:_n=>[_n.getTrackId()]}),YG=ME({argsMap:(_n,_r)=>[_n.getTrackId(),_r.name]}),BG=ME({argsMap:_n=>[_n.getTrackId()]}),oE((T0=class extends cH{get _source(){return this._trackSource}set _source(_n){this._trackSource=_n}get processorContext(){return this._processorContext}set processorContext(_n){this._processorContext=_n}get processorDestination(){return this._processorDestination}set processorDestination(_n){this._processorDestination=_n}get isPlaying(){return this._useAudioElement?cR.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(_n,_r,_o,_a,_u){super(_n,_o),p_(this,"trackMediaType","audio"),p_(this,"_encoderConfig",void 0),p_(this,"_trackSource",void 0),p_(this,"_enabled",!0),p_(this,"_volume",100),p_(this,"_useAudioElement",!1),p_(this,"_bypassWebAudio",!1),p_(this,"processor",void 0),p_(this,"_processorContext",void 0),p_(this,"_processorDestination",void 0),p_(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=_r,this._getOriginVolumeLevel=!!_a;const _p=()=>{this.processorContext=new bG(this._source.context,this.getTrackId(),"local"),this.processorDestination=new EG(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(KT.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})},_f=_u&&rT()&&!aG();J_("DISABLE_WEBAUDIO")?(this._source=new pH,this._useAudioElement=!0,this._bypassWebAudio=!0):_f?this._source=new pH:(this._source=new lH(_n,!1,this._getOriginVolumeLevel?_n:void 0),J_("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0)),_p(),!J_("DISABLE_WEBAUDIO")&&_f&&($D||($D=new c9),$D).enqueue("INIT_WEBAUDIO",()=>{this._source=new lH(_n,!1,this._getOriginVolumeLevel?_n:void 0),J_("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0),_p(),this.emit(TF.UPDATE_TRACK_SOURCE)})}setVolume(_n){W0(_n,"volume",0,1e3),this._volume=_n,this._source.setVolume(_n/100),this._useAudioElement&&cR.setVolume(this.getTrackId(),_n);try{if(this._bypassWebAudio)return void E_.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));const _r=this._source.createOutputTrack();this._mediaStreamTrack!==_r&&(this._mediaStreamTrack=_r,aS(this,UE.NEED_REPLACE_TRACK,this).then(()=>{E_.debug("[".concat(this.getTrackId(),"] replace web audio track success"))}).catch(_o=>{E_.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),_o)}))}catch{}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(_n){if(!this._useAudioElement)throw new U_(k_.NOT_SUPPORTED,"your browser does not support setting the audio output device");await cR.setSinkID(this.getTrackId(),_n)}async setEnabled(_n,_r,_o){return this._setEnabled(_n,_r,_o)}async _setEnabled(_n,_r,_o){if(!_o){if(_n===this._enabled)return;this.stateCheck("enabled",_n)}if(E_.info("[".concat(this.getTrackId(),"] start setEnabled"),_n),_n){this._originMediaStreamTrack.enabled=!0;try{_o||(this._enabled=!0),await aS(this,UE.NEED_ENABLE_TRACK,this),E_.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(_n," success"))}catch(_a){throw _o||(this._enabled=!1),E_.error("[".concat(this.getTrackId(),"] setEnabled to true error"),_a.toString()),_a}}else{this._originMediaStreamTrack.enabled=!1,_o||(this._enabled=!1);try{await aS(this,UE.NEED_DISABLE_TRACK,this)}catch(_a){throw _o||(this._enabled=!0),E_.error("[".concat(this.getTrackId(),"] setEnabled to false error"),_a.toString()),_a}}}async setMuted(_n){_n!==this._muted&&(this.stateCheck("muted",_n),this._muted=_n,this._originMediaStreamTrack.enabled=!_n,E_.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(_n)),_n?await aS(this,UE.NEED_MUTE_TRACK,this):await aS(this,UE.NEED_UNMUTE_TRACK,this))}getStats(){return bU(()=>{E_.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),_O(this,UE.GET_STATS)||mH({},z4)}setAudioFrameCallback(_n){let _r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!_n)return this._source.removeAllListeners(KT.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(_r),this._source.removeAllListeners(KT.ON_AUDIO_BUFFER),this._source.on(KT.ON_AUDIO_BUFFER,_o=>_n(_o))}play(){E_.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(E_.debug("[".concat(this.getTrackId(),"] start audio playback in element")),cR.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){E_.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?cR.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let _n=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];E_.debug("[".concat(this.getTrackId(),"] update player source track")),_n&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&cR.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(_n,_r){this._originMediaStreamTrack!==_n&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),_n.addEventListener("ended",this._handleTrackEnded),_r&&this._originMediaStreamTrack.stop(),this._originMediaStreamTrack=_n,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this.processor.updateInput({track:_n,context:this.processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await aS(this,UE.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(_n))}renewMediaStreamTrack(_n){return uE.resolve(void 0)}pipe(_n){if(this._bypassWebAudio)throw new U_(k_.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===_n)return _n;if(_n._source)throw new U_(k_.INVALID_OPERATION,"Processor ".concat(_n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=_n,this.processor._source=this,_n.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),_n}unpipe(){var _n;if(!this.processor)return;const _r=this.processor;(_n=this._source.processSourceNode)===null||_n===void 0||_n.disconnect(),this.processor._source=!1,this.processor=void 0,_r.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(uT.ON_TRACK,async _n=>{_n?_n!==this._mediaStreamTrack&&(this._mediaStreamTrack=_n,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(_n),await aS(this,UE.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await aS(this,UE.NEED_REPLACE_TRACK,this))}),this.processorDestination.on(uT.ON_NODE,_n=>{this._source.processedNode=_n})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(uT.ON_TRACK),this.processorDestination.removeAllListeners(uT.ON_NODE)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(JT.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(JT.REQUEST_CONSTRAINTS)}}).prototype,"_source",[SG],Object.getOwnPropertyDescriptor(T0.prototype,"_source"),T0.prototype),oE(T0.prototype,"processorContext",[wG],Object.getOwnPropertyDescriptor(T0.prototype,"processorContext"),T0.prototype),oE(T0.prototype,"processorDestination",[TG],Object.getOwnPropertyDescriptor(T0.prototype,"processorDestination"),T0.prototype),oE(T0.prototype,"setVolume",[RG],Object.getOwnPropertyDescriptor(T0.prototype,"setVolume"),T0.prototype),oE(T0.prototype,"setPlaybackDevice",[IG,CG],Object.getOwnPropertyDescriptor(T0.prototype,"setPlaybackDevice"),T0.prototype),oE(T0.prototype,"setEnabled",[AG,OG,NG],Object.getOwnPropertyDescriptor(T0.prototype,"setEnabled"),T0.prototype),oE(T0.prototype,"setMuted",[kG,xG,LG],Object.getOwnPropertyDescriptor(T0.prototype,"setMuted"),T0.prototype),oE(T0.prototype,"getStats",[MG],Object.getOwnPropertyDescriptor(T0.prototype,"getStats"),T0.prototype),oE(T0.prototype,"setAudioFrameCallback",[DG],Object.getOwnPropertyDescriptor(T0.prototype,"setAudioFrameCallback"),T0.prototype),oE(T0.prototype,"play",[PG,jG],Object.getOwnPropertyDescriptor(T0.prototype,"play"),T0.prototype),oE(T0.prototype,"stop",[UG,$G],Object.getOwnPropertyDescriptor(T0.prototype,"stop"),T0.prototype),oE(T0.prototype,"close",[FG],Object.getOwnPropertyDescriptor(T0.prototype,"close"),T0.prototype),oE(T0.prototype,"pipe",[YG],Object.getOwnPropertyDescriptor(T0.prototype,"pipe"),T0.prototype),oE(T0.prototype,"unpipe",[BG],Object.getOwnPropertyDescriptor(T0.prototype,"unpipe"),T0.prototype),T0),RF=(VG=ME({argsMap:(_n,_r)=>[_n.getTrackId(),_r]}),HG=hS(),GG=DD("MicrophoneAudioTrack","_enabledMutex"),qG=ME({argsMap:(_n,_r,_o)=>[_n.getTrackId(),_r,_o]}),WG=hS(),zG=ME({argsMap:_n=>[_n.getTrackId()]}),oE((mO=class extends lT{get __className__(){return"MicrophoneAudioTrack"}constructor(_n,_r,_o,_a){super(_n,_r.encoderConfig?_F(_r.encoderConfig):{},_a,J_("GET_VOLUME_OF_MUTED_AUDIO_TRACK"),!0),p_(this,"_config",void 0),p_(this,"_deviceName","default"),p_(this,"_constraints",void 0),p_(this,"_originalConstraints",void 0),p_(this,"_enabled",!0),this._config=_r,this._constraints=_o,this._originalConstraints=_o,this._deviceName=_n.label,typeof _r.bypassWebAudio=="boolean"&&(this._bypassWebAudio=_r.bypassWebAudio),DR()&&c0.bindInterruptDetectorTrack(this),this.on(TF.UPDATE_TRACK_SOURCE,()=>{this.bindProcessorContextEvents()}),aG()&&this.bindProcessorContextEvents()}async setDevice(_n){if(E_.info("[".concat(this.getTrackId(),"] start set device to ").concat(_n)),this._enabled)try{const _r=await IR.getDeviceById(_n),_o={};_o.audio=mH({},this._constraints),_o.audio.deviceId={exact:_n},this._originMediaStreamTrack.stop();let _a=null;try{_a=await fI(_o,this.getTrackId())}catch(_u){throw E_.error("[".concat(this.getTrackId(),"] setDevice failed"),_u.toString()),_a=await fI({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(_a.getAudioTracks()[0],!1),_u}await this._updateOriginMediaStreamTrack(_a.getAudioTracks()[0],!1),this._deviceName=_r.label,this._config.microphoneId=_n,this._constraints.deviceId={exact:_n}}catch(_r){throw E_.error("[".concat(this.getTrackId(),"] setDevice error"),_r.toString()),_r}else try{const _r=await IR.getDeviceById(_n);this._deviceName=_r.label,this._config.microphoneId=_n,this._constraints.deviceId={exact:_n}}catch(_r){throw E_.error("[".concat(this.getTrackId(),"] setDevice error"),_r.toString()),_r}E_.info("[".concat(this.getTrackId(),"] set device to ").concat(_n," success"))}async setEnabled(_n,_r,_o){if(_r)return E_.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(_n);if(!_o){if(_n===this._enabled)return;this.stateCheck("enabled",_n)}if(E_.info("[".concat(this.getTrackId(),"] start setEnabled"),_n),!_n){var _a;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),(_a=this._source.clonedTrack)===null||_a===void 0||_a.stop(),_o||(this._enabled=!1);try{await aS(this,UE.NEED_DISABLE_TRACK,this)}catch(_f){throw E_.error("[".concat(this.getTrackId(),"] setEnabled false failed"),_f.toString()),_f}return}const _u=mH({},this._constraints),_p=IR.searchDeviceIdByName(this._deviceName);_p&&!_u.deviceId&&(_u.deviceId=_p);try{_o||(this._enabled=!0);const _f=await fI({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(_f.getAudioTracks()[0],!1),await aS(this,UE.NEED_ENABLE_TRACK,this)}catch(_f){throw _o||(this._enabled=!1),E_.error("[".concat(this.getTrackId(),"] setEnabled true failed"),_f.toString()),_f}E_.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),DR()&&c0.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((KS()||uI())&&this._enabled&&!this._isClosed&&c0.duringInterruption){const _n=async()=>{c0.off(PS.IOS_INTERRUPTION_END,_n),this._enabled&&!this._isClosed&&(E_.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};c0.on(PS.IOS_INTERRUPTION_END,_n)}else E_.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(eN.TRACK_ENDED)}async renewMediaStreamTrack(_n){const _r=_n||this._constraints,_o=IR.searchDeviceIdByName(this._deviceName);if(_o&&!_r.deviceId&&(_r.deviceId=_o),this._constraints=_r,this._enabled){this._originMediaStreamTrack.stop();const _a=await fI({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(_a.getAudioTracks()[0],!0)}}bindProcessorContextEvents(){this.processorContext.on(JT.REQUEST_UPDATE_CONSTRAINTS,async(_n,_r,_o)=>{try{const _a=Object.assign({},this._originalConstraints,..._n);await this.renewMediaStreamTrack(_a),_r()}catch(_a){_o(_a)}}),this.processorContext.on(JT.REQUEST_CONSTRAINTS,async _n=>{_n(this._originMediaStreamTrack.getSettings())})}}).prototype,"setDevice",[VG,HG],Object.getOwnPropertyDescriptor(mO.prototype,"setDevice"),mO.prototype),oE(mO.prototype,"setEnabled",[GG,qG,WG],Object.getOwnPropertyDescriptor(mO.prototype,"setEnabled"),mO.prototype),oE(mO.prototype,"close",[zG],Object.getOwnPropertyDescriptor(mO.prototype,"close"),mO.prototype),mO),u9=(KG=ME({argsMap:(_n,_r)=>[_n.getTrackId(),_r,_n.duration]}),JG=hS(),QG=ME({argsMap:_n=>[_n.getTrackId()]}),XG=hS(),ZG=ME({argsMap:_n=>[_n.getTrackId()]}),_q=hS(),e6=ME({argsMap:_n=>[_n.getTrackId()]}),t6=hS(),n6=ME({argsMap:_n=>[_n.getTrackId()]}),r6=hS(),oE((QT=class extends lT{get __className__(){return"BufferSourceAudioTrack"}constructor(_n,_r,_o,_a){super(_r.createOutputTrack(),_o,_a),p_(this,"source",void 0),p_(this,"_bufferSource",void 0),this.source=_n,this._bufferSource=_r,this._bufferSource.on(KT.AUDIO_SOURCE_STATE_CHANGE,_u=>{this.emit(eN.SOURCE_STATE_CHANGE,_u)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(_n){_n&&this._bufferSource.updateOptions(_n),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(_n){this._bufferSource.seekAudioBuffer(_n)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}}).prototype,"startProcessAudioBuffer",[KG,JG],Object.getOwnPropertyDescriptor(QT.prototype,"startProcessAudioBuffer"),QT.prototype),oE(QT.prototype,"pauseProcessAudioBuffer",[QG,XG],Object.getOwnPropertyDescriptor(QT.prototype,"pauseProcessAudioBuffer"),QT.prototype),oE(QT.prototype,"seekAudioBuffer",[ZG,_q],Object.getOwnPropertyDescriptor(QT.prototype,"seekAudioBuffer"),QT.prototype),oE(QT.prototype,"resumeProcessAudioBuffer",[e6,t6],Object.getOwnPropertyDescriptor(QT.prototype,"resumeProcessAudioBuffer"),QT.prototype),oE(QT.prototype,"stopProcessAudioBuffer",[n6,r6],Object.getOwnPropertyDescriptor(QT.prototype,"stopProcessAudioBuffer"),QT.prototype),QT);class FR extends lT{get __className__(){return"MixingAudioTrack"}get isActive(){for(const _r of this.trackList)if(_r._enabled&&!_r._isClosed&&!_r.muted)return!0;return!1}constructor(){const _r=PD().createMediaStreamDestination();super(_r.stream.getAudioTracks()[0],void 0,X0(8,"track-mix-")),p_(this,"trackList",void 0),p_(this,"destNode",void 0);try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}this.destNode=_r,this.trackList=[]}hasAudioTrack(_r){return this.trackList.indexOf(_r)!==-1}addAudioTrack(_r){this.trackList.indexOf(_r)===-1?(E_.debug("add ".concat(_r.getTrackId()," to mixing track")),_r._source.outputNode.connect(this.destNode),this.trackList.push(_r),this.updateEncoderConfig()):E_.debug("track ".concat(_r.getTrackId()," is already added"))}removeAudioTrack(_r){if(this.trackList.indexOf(_r)!==-1){E_.debug("remove ".concat(_r.getTrackId()," from mixing track"));try{_r._source.outputNode.disconnect(this.destNode)}catch{}vH(this.trackList,_r),this.updateEncoderConfig()}}updateEncoderConfig(){const _r={};this.trackList.forEach(_o=>{_o._encoderConfig&&((_o._encoderConfig.bitrate||0)>(_r.bitrate||0)&&(_r.bitrate=_o._encoderConfig.bitrate),(_o._encoderConfig.sampleRate||0)>(_r.sampleRate||0)&&(_r.sampleRate=_o._encoderConfig.sampleRate),(_o._encoderConfig.sampleSize||0)>(_r.sampleSize||0)&&(_r.sampleSize=_o._encoderConfig.sampleSize),_o._encoderConfig.stereo&&(_r.stereo=!0))}),this._encoderConfig=_r}}class l9 extends lS{constructor(){super(...arguments),p_(this,"resultStorage",new Map)}setLocalAudioStats(_r,_o,_a){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",_r,this.checkAudioInputLevel(_a,_o)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",_r,this.checkSendAudioBitrate(_a,_o))}setLocalVideoStats(_r,_o,_a){this.record("SEND_VIDEO_BITRATE_TOO_LOW",_r,this.checkSendVideoBitrate(_a,_o)),this.record("FRAMERATE_INPUT_TOO_LOW",_r,this.checkFramerateInput(_a,_o)),this.record("FRAMERATE_SENT_TOO_LOW",_r,this.checkFramerateSent(_a))}setRemoteAudioStats(_r,_o){const _a=_r.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",_a,this.checkAudioOutputLevel(_o))}setRemoteVideoStats(_r,_o){const _a=_r.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",_a,this.checkVideoDecode(_o))}record(_r,_o,_a){this.resultStorage.has(_r)||this.resultStorage.set(_r,{result:[],isPrevNormal:!0});const _u=this.resultStorage.get(_r);if(_u&&(_u.result.push(_a),_u.result.length>=5)){const _p=_u.result.includes(!0);_u.isPrevNormal&&!_p&&this.emit("exception",o6[_r],_r,_o),!_u.isPrevNormal&&_p&&this.emit("exception",o6[_r]+2e3,_r+"_RECOVER",_o),_u.isPrevNormal=_p,_u.result=[]}}checkAudioOutputLevel(_r){return!(_r.receiveBitrate>0&&_r.receiveLevel===0)}checkAudioInputLevel(_r,_o){return _o instanceof FR&&!_o.isActive||!!_o.muted||_r.sendVolumeLevel!==0}checkFramerateInput(_r,_o){let _a=null;_o._encoderConfig&&_o._encoderConfig.frameRate&&(_a=XO(_o._encoderConfig.frameRate));const _u=_r.captureFrameRate;return!_a||!_u||!(_a>10&&_u<5||_a<10&&_a>=5&&_u<=1)}checkFramerateSent(_r){return!(_r.captureFrameRate&&_r.sendFrameRate&&_r.captureFrameRate>5&&_r.sendFrameRate<=1)}checkSendVideoBitrate(_r,_o){return!!_o.muted||_r.sendBitrate!==0}checkSendAudioBitrate(_r,_o){return _o instanceof FR&&!_o.isActive||!!_o.muted||_r.sendBitrate!==0}checkVideoDecode(_r){return _r.receiveBitrate===0||_r.decodeFrameRate!==0}}const o6={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},YR=new class{markSubscribeStart(_n,_r){performance.mark("agora-web-sdk/".concat(_n,"/subscribe-").concat(_r))}markPublishStart(_n,_r){performance.mark("agora-web-sdk/".concat(_n,"/publish-").concat(_r))}measureFromSubscribeStart(_n,_r){const _o=performance.getEntriesByName("agora-web-sdk/".concat(_n,"/subscribe-").concat(_r));if(_o.length>0){const _a=_o[_o.length-1];return Math.round(performance.now()-_a.startTime)}return 0}measureFromPublishStart(_n,_r){const _o=performance.getEntriesByName("agora-web-sdk/".concat(_n,"/publish-").concat(_r));if(_o.length>0){const _a=_o[_o.length-1];return Math.round(performance.now()-_a.startTime)}return 0}};function s6(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function gL(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?s6(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):s6(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}class FD{constructor(_r){p_(this,"store",void 0),p_(this,"onStatsException",void 0),p_(this,"onUploadPublishDuration",void 0),p_(this,"localStats",new Map),p_(this,"remoteStats",new Map),p_(this,"updateStatsInterval",void 0),p_(this,"trafficStats",void 0),p_(this,"trafficStatsPeerList",[]),p_(this,"uplinkStats",void 0),p_(this,"exceptionMonitor",void 0),p_(this,"p2pChannel",void 0),p_(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=_r,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new l9,this.exceptionMonitor.on("exception",(_o,_a,_u)=>{this.onStatsException&&this.onStatsException(_o,_a,_u)})}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(TE.LocalAudioTrack)||gL({},z4)}getLocalVideoTrackStats(){return this.localStats.get(TE.LocalVideoTrack)||gL({},K4)}getRemoteAudioTrackStats(_r){const _o=(_p,_f)=>{if(!this.trafficStats)return _f;const n_=this.trafficStats.peer_delay.find(r_=>r_.peer_uid===_p);return n_&&(_f.publishDuration=n_.B_ppad+(Date.now()-this.trafficStats.timestamp)),_f},_a={};if(_r){var _u;const _p=(_u=this.remoteStats.get(_r))===null||_u===void 0?void 0:_u.audioStats;_p&&(_a[_r]=_o(_r,_p))}else Array.from(this.remoteStats.entries()).forEach(_p=>{let[_f,{audioStats:n_}]=_p;n_&&(_a[_f]=_o(_f,n_))});return _a}getRemoteNetworkQualityStats(_r){const _o={};if(_r){var _a;const _u=(_a=this.remoteStats.get(_r))===null||_a===void 0?void 0:_a.networkStats;_u&&(_o[_r]=_u)}else Array.from(this.remoteStats.entries()).forEach(_u=>{let[_p,{networkStats:_f}]=_u;_f&&(_o[_p]=_f)});return _o}getRemoteVideoTrackStats(_r){const _o=(_p,_f)=>{if(!this.trafficStats)return _f;const n_=this.trafficStats.peer_delay.find(r_=>r_.peer_uid===_p);return n_&&(_f.publishDuration=n_.B_ppvd+(Date.now()-this.trafficStats.timestamp)),_f},_a={};if(_r){var _u;const _p=(_u=this.remoteStats.get(_r))===null||_u===void 0?void 0:_u.videoStats;_p&&(_a[_r]=_o(_r,_p))}else Array.from(this.remoteStats.entries()).forEach(_p=>{let[_f,{videoStats:n_}]=_p;n_&&(_a[_f]=_o(_f,n_))});return _a}getRTCStats(){let _r=0,_o=0,_a=0,_u=0;const _p=this.localStats.get(TE.LocalAudioTrack);_p&&(_r+=_p.sendBytes,_o+=_p.sendBitrate);const _f=this.localStats.get(TE.LocalVideoTrack);_f&&(_r+=_f.sendBytes,_o+=_f.sendBitrate);const n_=this.localStats.get(TE.LocalVideoLowTrack);n_&&(_r+=n_.sendBytes,_o+=n_.sendBitrate),this.remoteStats.forEach(o_=>{let{audioStats:s_,videoStats:u_}=o_;s_&&(_a+=s_.receiveBytes,_u+=s_.receiveBitrate),u_&&(_a+=u_.receiveBytes,_u+=u_.receiveBitrate)});let r_=1;return this.trafficStats&&(r_+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:r_,SendBitrate:_o,SendBytes:_r,RecvBytes:_a,RecvBitrate:_u,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(_r){this.localStats.set(_r,void 0)}removeLocalStats(_r){_r?this.localStats.delete(_r):this.localStats.clear()}addRemoteStats(_r){this.remoteStats.set(_r,{})}removeRemoteStats(_r){_r?this.remoteStats.delete(_r):this.remoteStats.clear()}addP2PChannel(_r){this.p2pChannel=_r}updateTrafficStats(_r){_r.peer_delay=_r.peer_delay.filter(_o=>_o.B_ppad!==void 0||_o.B_ppvd!==void 0),_r.peer_delay.filter(_o=>this.trafficStatsPeerList.indexOf(_o.peer_uid)===-1).forEach(_o=>{var _a;const _u=(_a=this.p2pChannel)===null||_a===void 0?void 0:_a.getRemoteMedia(_o.peer_uid),_p=_u!=null&&_u.videoSSRC?YR.measureFromSubscribeStart(this.store.clientId,_u.videoSSRC):0,_f=_u!=null&&_u.audioSSRC?YR.measureFromSubscribeStart(this.store.clientId,_u.audioSSRC):0;_o.B_ppad!==void 0&&_o.B_ppvd!==void 0&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(_o.peer_uid,_o.B_ppad,_o.B_ppvd,_p>_f?_p:_f),this.trafficStatsPeerList.push(_o.peer_uid))}),this.trafficStats=_r}updateUplinkStats(_r){this.uplinkStats&&this.uplinkStats.B_fir!==_r.B_fir&&E_.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(_r.B_fir)),this.uplinkStats=_r}static isRemoteVideoFreeze(_r,_o,_a){if(!_r)return!1;const _u=!!_a&&_o.framesDecodeFreezeTime>_a.framesDecodeFreezeTime,_p=!_a||_o.framesDecodeCount>_a.framesDecodeCount;return _u||!_p}static isRemoteAudioFreeze(_r){return!!_r&&_r._isFreeze()}isLocalVideoFreeze(_r){return!(!_r.inputFrame||!_r.sentFrame)&&_r.inputFrame.frameRate>5&&_r.sentFrame.frameRate<3}updateLocalStats(_r){Array.from(this.localStats.entries()).forEach(_o=>{let[_a,_u]=_o;switch(_a){case TE.LocalVideoTrack:case TE.LocalVideoLowTrack:{const _p=_u,_f=gL({},K4),n_=_r.getStats(),r_=_r.getLocalMedia(_a);if(n_){const o_=n_.videoSend.find(s_=>s_.ssrc===(r_==null?void 0:r_.ssrcs[0].ssrcId));if(o_){const s_=_r.getLocalVideoSize(),u_=_r.getEncoderConfig(TE.LocalVideoTrack);o_.codec!=="H264"&&o_.codec!=="VP8"&&o_.codec!=="VP9"&&o_.codec!=="AV1X"&&o_.codec!=="AV1"||(_f.codecType=o_.codec),_f.sendBytes=o_.bytes,_f.sendBitrate=_p?8*Math.max(0,_f.sendBytes-_p.sendBytes):0,o_.inputFrame?(_f.captureFrameRate=o_.inputFrame.frameRate,_f.captureResolutionHeight=o_.inputFrame.height,_f.captureResolutionWidth=o_.inputFrame.width):s_&&(_f.captureResolutionWidth=s_.width,_f.captureResolutionHeight=s_.height),o_.sentFrame?(_f.sendFrameRate=o_.sentFrame.frameRate,_f.sendResolutionHeight=o_.sentFrame.height,_f.sendResolutionWidth=o_.sentFrame.width):s_&&(_f.sendResolutionWidth=s_.width,_f.sendResolutionHeight=s_.height),o_.avgEncodeMs&&(_f.encodeDelay=o_.avgEncodeMs),u_&&u_.bitrateMax&&(_f.targetSendBitrate=1e3*u_.bitrateMax),_f.sendPackets=o_.packets,_f.sendPacketsLost=o_.packetsLost,_f.totalDuration=_p?_p.totalDuration+1:1,_f.totalFreezeTime=_p?_p.totalFreezeTime:0,this.isLocalVideoFreeze(o_)&&(_f.totalFreezeTime+=1)}this.trafficStats&&(_f.sendPacketsLost=this.trafficStats.B_pvlr4/100)}this.localStats.set(_a,_f),_f&&r_&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,r_.track,_f);break}case TE.LocalAudioTrack:{const _p=_u,_f=gL({},z4),n_=_r.getStats(),r_=_r.getLocalMedia(_a);if(n_){const o_=n_.audioSend.find(s_=>s_.ssrc===(r_==null?void 0:r_.ssrcs[0].ssrcId));if(o_){if(o_.codec!=="opus"&&o_.codec!=="aac"&&o_.codec!=="PCMU"&&o_.codec!=="PCMA"&&o_.codec!=="G722"||(_f.codecType=o_.codec),o_.inputLevel)_f.sendVolumeLevel=Math.round(32767*o_.inputLevel);else{const s_=_r.getLocalAudioVolume();s_&&(_f.sendVolumeLevel=Math.round(32767*s_))}_f.sendBytes=o_.bytes,_f.sendPackets=o_.packets,_f.sendPacketsLost=o_.packetsLost,_f.sendBitrate=_p?8*Math.max(0,_f.sendBytes-_p.sendBytes):0}}this.trafficStats&&(_f.sendPacketsLost=this.trafficStats.B_pvlr4/100),this.localStats.set(TE.LocalAudioTrack,_f),_f&&r_&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,r_.track,_f);break}}})}updateRemoteStats(_r){Array.from(this.remoteStats.entries()).forEach(_o=>{let[_a,{videoStats:_u,audioStats:_p,videoPcStats:_f}]=_o;const n_=_p,r_=_u,o_=_f,s_=gL({},P5),u_=gL({},j5),g_=gL({},V7),{audioTrack:w_,videoTrack:D_,audioSSRC:M_,videoSSRC:P_}=_r.getRemoteMedia(_a),_g=_r.getStats(),_y=_g==null?void 0:_g.audioRecv.find(mE=>mE.ssrc===M_),hE=_g==null?void 0:_g.videoRecv.find(mE=>mE.ssrc===P_),NE=this.trafficStats&&this.trafficStats.peer_delay.find(mE=>mE.peer_uid===_a);if(_y&&(_y.codec!=="opus"&&_y.codec!=="aac"&&_y.codec!=="PCMU"&&_y.codec!=="PCMA"&&_y.codec!=="G722"||(s_.codecType=_y.codec),_y.outputLevel?s_.receiveLevel=Math.round(32767*_y.outputLevel):w_&&(s_.receiveLevel=Math.round(32767*w_.getVolumeLevel())),s_.receiveBytes=_y.bytes,s_.receivePackets=_y.packets,s_.receivePacketsLost=_y.packetsLost,s_.packetLossRate=s_.receivePacketsLost/(s_.receivePackets+s_.receivePacketsLost),s_.receiveBitrate=n_?8*Math.max(0,s_.receiveBytes-n_.receiveBytes):0,s_.totalDuration=n_?n_.totalDuration+1:1,s_.totalFreezeTime=n_?n_.totalFreezeTime:0,s_.freezeRate=s_.totalFreezeTime/s_.totalDuration,s_.receiveDelay=_y.jitterBufferMs,s_.totalDuration>10&&FD.isRemoteAudioFreeze(w_)&&(s_.totalFreezeTime+=1)),hE){hE.codec!=="H264"&&hE.codec!=="VP8"&&hE.codec!=="VP9"&&hE.codec!=="AV1X"&&hE.codec!=="AV1"||(u_.codecType=hE.codec),u_.receiveBytes=hE.bytes,u_.receiveBitrate=r_?8*Math.max(0,u_.receiveBytes-r_.receiveBytes):0,u_.decodeFrameRate=hE.decodeFrameRate<0?0:hE.decodeFrameRate,u_.renderFrameRate=hE.decodeFrameRate<0?0:hE.decodeFrameRate,hE.outputFrame&&(u_.renderFrameRate=hE.outputFrame.frameRate),hE.receivedFrame?(u_.receiveFrameRate=hE.receivedFrame.frameRate,u_.receiveResolutionHeight=hE.receivedFrame.height,u_.receiveResolutionWidth=hE.receivedFrame.width):D_&&(u_.receiveResolutionHeight=D_._videoHeight||0,u_.receiveResolutionWidth=D_._videoWidth||0),hE.framesRateFirefox!==void 0&&(u_.receiveFrameRate=Math.round(hE.framesRateFirefox)),u_.receivePackets=hE.packets,u_.receivePacketsLost=hE.packetsLost,u_.packetLossRate=u_.receivePacketsLost/(u_.receivePackets+u_.receivePacketsLost),u_.totalDuration=r_?r_.totalDuration+1:1,u_.totalFreezeTime=r_?r_.totalFreezeTime:0,u_.receiveDelay=hE.jitterBufferMs||0;const mE=!!P_&&_r.getRemoteVideoIsReady(P_);D_&&mE&&FD.isRemoteVideoFreeze(D_,hE,o_)&&(u_.totalFreezeTime+=1),u_.freezeRate=u_.totalFreezeTime/u_.totalDuration}NE&&(s_.end2EndDelay=NE.B_ad,u_.end2EndDelay=NE.B_vd,s_.transportDelay=NE.B_ed,u_.transportDelay=NE.B_ed,s_.currentPacketLossRate=NE.B_ealr4/100,u_.currentPacketLossRate=NE.B_evlr4/100,g_.uplinkNetworkQuality=NE.B_punq?NE.B_punq:0,g_.downlinkNetworkQuality=NE.B_pdnq?NE.B_pdnq:0),this.remoteStats.set(_a,{audioStats:s_,videoStats:u_,videoPcStats:hE,networkStats:g_}),w_&&this.exceptionMonitor.setRemoteAudioStats(w_,s_),D_&&this.exceptionMonitor.setRemoteVideoStats(D_,u_)})}}const QO=new class extends lS{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),p_(this,"_lastHiddenTime",0),p_(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),E_.debug("document visibility went ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)})}};function a6(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function IF(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?a6(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):a6(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}function CF(_n){return _n.match(/^[\.\:\d]+$/)?"".concat(_n.replace(/[^\d]/g,"-"),".").concat(J_("TURN_DOMAIN")):(E_.info("Cannot recognized as IP address ".concat(_n,". Used As Host instead")),_n)}function c6(_n,_r){var _o,_a;const _u=J_("GATEWAY_DOMAINS");let _p=_u[1]&&_r.indexOf(_u[1])!==-1?1:0;_n.addresses=_n.addresses||[];const _f=_n.addresses.map(r_=>r_.domain_prefix?{address:"".concat(r_.domain_prefix,".").concat(_u[_p++%_u.length],":").concat(r_.port)}:r_.ip.match(/^[\.\:\d]+$/)?{ip:r_.ip,port:r_.port,address:"".concat(r_.ip.replace(/[^\d]/g,"-"),".").concat(_u[_p++%_u.length],":").concat(r_.port)}:(E_.info("Cannot recognized as IP address ".concat(r_.ip,". Used As Host instead")),{ip:r_.ip,port:r_.port,address:"".concat(r_.ip,":").concat(r_.port)}));if((_o=_n.detail)!==null&&_o!==void 0&&_o[18]&&typeof((_a=_n.detail)===null||_a===void 0?void 0:_a[18])=="string"){const r_=_n.detail[18],o_=r_==null?void 0:r_.split(";");for(let s_=0;s_<o_.length;s_++){var n_;const u_=DI(n_=o_[s_]).call(n_);_f[s_]&&u_&&(_f[s_].ip6=u_)}}return{gatewayAddrs:_f,uid:_n.uid,cid:_n.cid,cert:_n.cert,vid:_n.detail&&_n.detail[8],uni_lbs_ip:_n.detail&&_n.detail[1],res:_n,csIp:_n.detail&&_n.detail[502]}}function XO(_n){return typeof _n=="number"?_n:_n.exact||_n.ideal||_n.max||_n.min||0}function u6(_n){const _r=_n._encoderConfig;if(!_r)return{};const _o={resolution:_r.width&&_r.height?"".concat(XO(_r.width),"x").concat(XO(_r.height)):void 0,maxVideoBW:_r.bitrateMax,minVideoBW:_r.bitrateMin};return typeof _r.frameRate=="number"?(_o.maxFrameRate=_r.frameRate,_o.minFrameRate=_r.frameRate):_r.frameRate&&(_o.maxFrameRate=_r.frameRate.max||_r.frameRate.ideal||_r.frameRate.exact||_r.frameRate.min,_o.minFrameRate=_r.frameRate.min||_r.frameRate.ideal||_r.frameRate.exact||_r.frameRate.max),_o}function l6(_n,_r,_o){var _a,_u,_p,_f,n_,r_,o_,s_;const u_=_r.videoSend.find(P_=>P_.ssrc===_n);if(!u_)return null;const g_={id:X0(10,""),timestamp:new Date(_r.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:u_.ssrc.toString()},w_=(_a=(_u=(_p=u_.inputFrame)===null||_p===void 0?void 0:_p.height)!==null&&_u!==void 0?_u:_o==null?void 0:_o._videoHeight)!==null&&_a!==void 0?_a:0,D_=(_f=(n_=(r_=u_.inputFrame)===null||r_===void 0?void 0:r_.width)!==null&&n_!==void 0?n_:_o==null?void 0:_o._videoWidth)!==null&&_f!==void 0?_f:0,M_=(o_=(s_=u_.inputFrame)===null||s_===void 0?void 0:s_.frameRate)!==null&&o_!==void 0?o_:0;return w_&&(g_.A_fhi=w_+""),D_&&(g_.A_fwi=D_+""),M_&&(g_.A_fri=M_+""),g_}function d6(_n){return _n>=0&&_n<.17?1:_n>=.17&&_n<.36?2:_n>=.36&&_n<.59?3:_n>=.59&&_n<=1?4:_n>1?5:0}function _H(_n,_r){let _o,_a,_u;switch(_r){case DS.CHOOSE_SERVER:_o=4096,_a="choose server";break;case DS.CLOUD_PROXY:_o=1048576,_a="proxy";break;case DS.CLOUD_PROXY_5:_o=4194304,_a="proxy5";break;case DS.CLOUD_PROXY_FALLBACK:_o=4194310,_a="proxy fallback";break;default:throw new U_(k_.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:_n.detail&&_n.detail[502],retry:!1})}if(_n.response_body.forEach(_p=>{_p.buffer&&_p.buffer.flag===_o&&(_u={code:_p.buffer.code,addresses:(_p.buffer.edges_services||[]).map(_f=>IF(IF({},_f),{},{ticket:_p.buffer.cert})),server_ts:_n.enter_ts,uid:_p.buffer.uid,cid:_p.buffer.cid,cname:_p.buffer.cname,detail:IF(IF({},_p.buffer.detail),_n.detail),flag:_p.buffer.flag,opid:_n.opid,cert:_p.buffer.cert})}),!_u)throw new U_(k_.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(_a," from multi unilbs response"),{csIp:_n.detail&&_n.detail[502]});return _u}async function d9(_n,_r){return await uE.all(_n.addresses.map(async _o=>({address:CF(_o.ip),tcpport:_o.port,udpport:_o.port,username:_r&&J_("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?_r.toString():ER.username,password:_r&&J_("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await KJ(_r.toString()):ER.password})))}function h9(_n,_r){const _o=_r._videoWidth||_r.getMediaStreamTrack(!0).getSettings().width;return _o||E_.warning("cannot get original video track's width, default scale down 4 times for low stream"),_o?_o/XO(_n.width):4}function AF(_n){let{candidateType:_r,relayProtocol:_o,type:_a,address:_u,port:_p,protocol:_f}=_n;return _a==="local-candidate"?{candidateType:_r,relayProtocol:_o,protocol:_f}:{candidateType:_r,relayProtocol:_o,address:_u,port:_p,protocol:_f}}function h6(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function vL(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?h6(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):h6(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}function YD(_n){return window.TextEncoder?new TextEncoder().encode(_n).length:_n.length}function dT(_n){return new uE(_r=>{window.setTimeout(_r,_n)})}function p9(_n){const _r=new U_(k_.TIMEOUT,"timeout");return new uE((_o,_a)=>{window.setTimeout(()=>_a(_r),_n)})}function X0(){let _n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:7,_r=arguments.length>1?arguments[1]:void 0;const _o=Math.random().toString(16).substr(2,_n).toLowerCase();return _o.length===_n?"".concat(_r).concat(_o):"".concat(_r).concat(_o)+X0(_n-_o.length,"")}function gH(){return X0(32,"").toUpperCase()}const OF=()=>{};function p6(_n){return new uE((_r,_o)=>{let _a=!1;const _u=document.createElement("video");_u.setAttribute("autoplay",""),_u.setAttribute("muted",""),_u.muted=!0,_u.autoplay=!0,_u.setAttribute("playsinline",""),_u.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(_u);const _p=KS()?"canplay":"playing";_u.addEventListener(_p,()=>{const _f=_u.videoWidth,n_=_u.videoHeight;!_f&&tS()||(_a=!0,_u.srcObject=null,_u.remove(),_r([_f,n_]))}),_u.srcObject=new MediaStream([_n]),_u.play().catch(OF),setTimeout(()=>{_a||(_u.srcObject=null,_u.remove(),_r([_u.videoWidth,_u.videoHeight]))},4e3)})}function BD(_n){return uE.all(_n.map(_r=>_r.then(_o=>{throw _o},_o=>_o))).then(_r=>{throw _r},_r=>_r)}function hT(_n,_r){for(var _o=arguments.length,_a=new Array(_o>2?_o-2:0),_u=2;_u<_o;_u++)_a[_u-2]=arguments[_u];return _n.getListeners(_r).length===0?uE.reject(new U_(k_.UNEXPECTED_ERROR,"can not emit promise")):new uE((_p,_f)=>{_n.emit(_r,..._a,_p,_f)})}function aS(_n,_r){if(_n.getListeners(_r).length===0)return uE.resolve();for(var _o=arguments.length,_a=new Array(_o>2?_o-2:0),_u=2;_u<_o;_u++)_a[_u-2]=arguments[_u];return hT(_n,_r,..._a)}function _O(_n,_r){if(_n.getListeners(_r).length===0)return null;for(var _o=arguments.length,_a=new Array(_o>2?_o-2:0),_u=2;_u<_o;_u++)_a[_u-2]=arguments[_u];return yL(_n,_r,..._a)}function yL(_n,_r){let _o=null,_a=null;for(var _u=arguments.length,_p=new Array(_u>2?_u-2:0),_f=2;_f<_u;_f++)_p[_f-2]=arguments[_f];if(_n.emit(_r,..._p,n_=>{_o=n_},n_=>{_a=n_}),_a!==null)throw _a;if(_o===null)throw new U_(k_.UNEXPECTED_ERROR,"handler is not sync");return _o}function vH(_n,_r){const _o=_n.indexOf(_r);_o!==-1&&_n.splice(_o,1)}function f6(_n){const _r=[];return _n.forEach(_o=>{_r.indexOf(_o)===-1&&_r.push(_o)}),_r}function mI(_n){uE.resolve().then(_n)}function vS(_n){return JSON.parse(JSON.stringify(_n))}const m6={};function bU(_n,_r){m6[_r]||(m6[_r]=!0,_n())}function yH(_n){const _r=window.atob(_n),_o=new Uint8Array(new ArrayBuffer(_r.length));for(let _a=0;_a<_r.length;_a+=1)_o[_a]=_r.charCodeAt(_a);return _o}function NF(_n){let _r="";for(let _o=0;_o<_n.length;_o+=1)_r+=String.fromCharCode(_n[_o]);return window.btoa(_r)}const _6=new class{constructor(){p_(this,"fnMap",new Map)}throttleByKey(_n,_r,_o,_a){for(var _u=arguments.length,_p=new Array(_u>4?_u-4:0),_f=4;_f<_u;_f++)_p[_f-4]=arguments[_f];if(this.fnMap.has(_r)){const n_=this.fnMap.get(_r);if(n_.threshold!==_o){n_.fn(...n_.args),clearTimeout(n_.timer);const r_=window.setTimeout(()=>{const o_=this.fnMap.get(_r);o_&&o_.fn(...o_.args),this.fnMap.delete(_r)},_o);this.fnMap.set(_r,{fn:_n,threshold:_o,timer:r_,args:_p,skipFn:_a})}else n_.skipFn&&n_.skipFn(...n_.args),this.fnMap.set(_r,vL(vL({},n_),{},{fn:_n,args:_p,skipFn:_a}))}else{const n_=window.setTimeout(()=>{const r_=this.fnMap.get(_r);r_&&r_.fn(...r_.args),this.fnMap.delete(_r)},_o);this.fnMap.set(_r,{fn:_n,threshold:_o,timer:n_,args:_p,skipFn:_a})}}},g6=_6.throttleByKey.bind(_6),SU=async _n=>{let{fragementLength:_r,referenceList:_o,asyncMapHandler:_a,allFailedhandler:_u,promisesCollector:_p}=_n,_f=0;const n_=_r;let r_,o_=0;const s_=async()=>{const u_=(()=>{const g_=_f*n_,w_=g_+n_;return _o.slice(g_,w_).map(_a)})();_p&&_p.push(...u_);try{r_=await BD(u_)}catch(g_){if(o_+=n_,_f++,!(o_>=_o.length))return void await s_();_u(g_)}u_.forEach(g_=>g_.cancel())};return await s_(),r_};function v6(_n){return typeof _n=="object"&&_n!==null&&!(_n instanceof RegExp)}const f9={[xD.ACCESS_POINT]:{[cT.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[cT.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[cT.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[cT.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[cT.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[cT.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[cT.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[cT.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voice service available",retry:!0},[cT.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[cT.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[cT.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[cT.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[cT.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[cT.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[cT.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[cT.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[cT.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[cT.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[xD.UNILBS]:{[bR.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[bR.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[bR.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[bR.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[bR.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[bR.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[bR.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[bR.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[bR.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[bR.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[bR.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[bR.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[xD.STRING_UID_ALLOCATOR]:{[gU.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[gU.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[gU.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function kF(_n){const _r=f9[Math.floor(_n/1e4)];if(!_r)return{desc:"unkonw error",retry:!1};const _o=_r[_n%1e4];if(!_o){if(Math.floor(_n/1e4)===xD.ACCESS_POINT){const _a=_n%1e4;if(_a.toString()[0]==="1")return{desc:_n.toString(),retry:!1};if(_a.toString()[0]==="2")return{desc:_n.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return _o}const m9={[LE.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[LE.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[LE.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[LE.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[LE.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[LE.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[LE.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[LE.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[LE.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[LE.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[LE.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[LE.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[LE.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[LE.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[LE.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[LE.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[LE.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[LE.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[LE.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[LE.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[LE.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[LE.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[LE.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[LE.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[LE.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[LE.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[LE.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[LE.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[LE.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[LE.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[LE.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[LE.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[LE.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[LE.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[LE.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[LE.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[LE.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[LE.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[LE.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[LE.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[LE.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[LE.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[LE.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[LE.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[LE.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[LE.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[LE.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[LE.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[LE.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[LE.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[LE.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[LE.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[LE.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[LE.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[LE.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[LE.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[LE.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[LE.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[LE.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[LE.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[LE.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[LE.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[LE.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[LE.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function wU(_n){return m9[_n]||{desc:"UNKNOW_ERROR_".concat(_n),action:"failed"}}function y6(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}class VD extends lS{get url(){return this.websocket?this.websocket.url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(_r){["tryNext","recover"].includes(_r)&&this.resetReconnectCount(_r),this._reconnectMode=_r}get state(){return this._state}set state(_r){_r!==this._state&&(this._state=_r,this._state==="reconnecting"?this.emit(KE.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(KE.CONNECTED):this._state==="closed"?this.emit(KE.CLOSED):this._state==="failed"&&this.emit(KE.FAILED))}resetReconnectCount(_r){E_.debug("websocket reset reconnect count, reason: "+_r),this.reconnectCount=0}constructor(_r,_o){let _a=arguments.length>2&&arguments[2]!==void 0&&arguments[2],_u=arguments.length>3&&arguments[3]!==void 0&&arguments[3],_p=arguments.length>4?arguments[4]:void 0;super(),p_(this,"connectionID",0),p_(this,"currentURLIndex",0),p_(this,"urls",void 0),p_(this,"_reconnectMode","tryNext"),p_(this,"reconnectReason",void 0),p_(this,"_initMutex",new RT("websocket")),p_(this,"name",void 0),p_(this,"_state","closed"),p_(this,"reconnectInterrupter",void 0),p_(this,"websocket",void 0),p_(this,"retryConfig",void 0),p_(this,"reconnectCount",0),p_(this,"forceCloseTimeout",5e3),p_(this,"onlineReconnectListener",void 0),p_(this,"useCompress",void 0),p_(this,"tryDoubleDomain",!1),p_(this,"wsInflateLength",0),p_(this,"wsDeflateLength",0),p_(this,"closeEstablishingWs",()=>{}),p_(this,"store",void 0),p_(this,"joinChannelServiceRecordIndex",void 0),this.store=_p,this.name=_r,this.retryConfig=function(s_){for(var u_=1;u_<arguments.length;u_++){var g_=arguments[u_]!=null?arguments[u_]:{};u_%2?y6(Object(g_),!0).forEach(function(w_){p_(s_,w_,g_[w_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s_,Object.getOwnPropertyDescriptors(g_)):y6(Object(g_)).forEach(function(w_){Object.defineProperty(s_,w_,Object.getOwnPropertyDescriptor(g_,w_))})}return s_}({},_o),this.useCompress=_a,this.tryDoubleDomain=_u;const{timeout:_f,timeoutFactor:n_}=_o,r_=Math.max(300,Math.floor(3*_f/5)),o_=Math.max(1.2,Math.floor(8*n_)/10);gT.ONLINE&&(this.retryConfig.timeout=r_,this.retryConfig.timeoutFactor=o_),gS.on(tN.NETWORK_STATE_CHANGE,(s_,u_)=>{s_!==u_&&(this.resetReconnectCount("network state change: ".concat(u_," -> ").concat(s_)),s_===gT.ONLINE?(this.retryConfig.timeout=r_,this.retryConfig.timeoutFactor=o_):(this.retryConfig.timeout=_f,this.retryConfig.timeoutFactor=n_))})}getConnection(){return this.websocket||void 0}init(_r){let _o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;this.forceCloseTimeout=_o;const _a=(_u,_p)=>{this.urls=_r;const _f=this.urls[this.currentURLIndex];this.state="connecting",this.createWebSocketConnection(_f).then(_u).catch(_p),this.once(KE.CLOSED,()=>_p(new U_(k_.WS_DISCONNECT))),this.once(KE.CONNECTED,()=>_u())};return this._initMutex.lock().then(_u=>new uE((_p,_f)=>{_a(_p,_f)}).then(()=>{_u()}).catch(()=>{_u()}))}close(_r,_o){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const _a=this.websocket;_o?setTimeout(()=>_a.close(),500):_a.close(),this.websocket=void 0}this.state=_r?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(_r,_o){if(!this.websocket)return void E_.warning("[".concat(this.name,"] can not reconnect, no websocket"));var _a;_r!==void 0&&(this.reconnectMode=_r),E_.debug("[".concat(this.name,"] reconnect is triggered initiative")),typeof this.joinChannelServiceRecordIndex=="number"&&((_a=this.store)===null||_a===void 0||_a.recordJoinChannelService({status:"error",errors:[new Error(_o)]},this.joinChannelServiceRecordIndex));const _u=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),_u&&_u.bind(this.websocket)({code:9999,reason:_o})}sendMessage(_r){let _o=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new U_(k_.WS_ABORT,"websocket is not ready");try{_o||(_r=JSON.stringify(_r)),this.websocket.send(_r)}catch(_a){throw new U_(k_.WS_ERR,"send websocket message error"+_a.toString())}}setWsInflateData(_r){this.wsDeflateLength=this.wsDeflateLength+_r.originLength,this.wsInflateLength=this.wsInflateLength+_r.compressedLength}getWsInflateData(){const _r=this.wsInflateLength,_o=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:_r,wsDeflateLength:_o}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(_r,_o){return this.connectionID+=1,this.connectionID,this.joinChannelServiceRecordIndex=void 0,new uE((_a,_u)=>{var _p;const _f=s_=>{var u_;(u_=this.store)===null||u_===void 0||u_.signalChannelOpen(),E_.debug("[".concat(this.name,"] websocket opened:"),s_),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),_a()},n_=async s_=>{if(E_.debug("[".concat(this.name,"] websocket close ").concat(this.websocket&&this.websocket.url,", code: ").concat(s_.code,", reason: ").concat(s_.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount<this.retryConfig.maxRetryCount){this.state==="connected"&&(this.reconnectReason=s_.reason,this.state="reconnecting");const u_=_O(this,KE.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,g_=await this.reconnectWithAction(u_);if(this.state==="closed")return void E_.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!g_)return _u(new U_(k_.WS_DISCONNECT,"websocket reconnect failed: ".concat(s_.code))),void this.close(!0);_a()}else _u(new U_(k_.WS_DISCONNECT,"websocket close: ".concat(s_.code))),this.close()},r_=s_=>{this.emit(KE.ON_MESSAGE,s_)};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),J_("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(_r=J_("GATEWAY_WSS_ADDRESS")),E_.debug("[".concat(this.name,"] start connect, url: ").concat(_r));const o_=(_p=this.store)===null||_p===void 0?void 0:_p.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});this.chooseBestWebsocketConnection(_r,!!_o,o_).then(s_=>{var u_;this.websocket=s_,_f&&_f(s_.url),s_.onclose=n_,s_.onmessage=r_,(u_=this.store)===null||u_===void 0||u_.recordJoinChannelService({endTs:Date.now(),status:"success"},o_),this.joinChannelServiceRecordIndex=o_}).catch(s_=>{var u_;if((u_=this.store)===null||u_===void 0||u_.recordJoinChannelService({endTs:Date.now(),status:s_ instanceof U_&&s_.code===k_.WS_ABORT?"aborted":"error",errors:[s_]},o_),this.state!=="closed"){if(s_ instanceof U_&&s_.code===k_.WS_ERR){const g_=new U_(k_.WS_ERR,"init websocket failed! Error: ".concat(s_.toString()));return E_.error("[".concat(this.name,"]").concat(g_)),void _u(g_)}n_&&n_(s_)}else _u(new U_(k_.WS_DISCONNECT,"websocket is closed: ".concat(s_.toString())))})})}async reconnectWithAction(_r){let _o=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount||!this.urls||this.state==="closed")return!1;this.onlineReconnectListener||gS.networkState!==gT.OFFLINE||(this.onlineReconnectListener=gS.onlineWaiter&&gS.onlineWaiter.then(()=>{this.onlineReconnectListener=void 0}));let _a=!0;if(this.reconnectInterrupter=()=>{_a=!1},_o){const _f=k4(this.reconnectCount,this.retryConfig);E_.debug("[".concat(this.name,"] wait ").concat(_f,"ms to reconnect websocket, mode: ").concat(_r)),await uE.race([dT(_f),this.onlineReconnectListener||new uE(()=>{})])}if(this.state==="closed"||!_a)return!1;this.reconnectCount+=1;const _u=async(_f,n_)=>{this.emit(KE.RECONNECT_CREATE_CONNECTION,n_),await this.createWebSocketConnection(_f)};try{if(_r==="retry"){const _f=this.urls[this.currentURLIndex];this.emit(KE.RECONNECT_WAITTING_FINISH,_r),await _u(_f,_r)}else if(_r==="tryNext"){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return await this.reconnectWithAction("recover",!1);E_.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex));const _f=this.urls[this.currentURLIndex];this.emit(KE.RECONNECT_WAITTING_FINISH,_r),await _u(_f,_r)}else if(_r==="recover"){E_.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.emit(KE.RECONNECT_WAITTING_FINISH,_r),this.urls=await hT(this,KE.REQUEST_NEW_URLS),this.currentURLIndex=0;const _f=this.urls[this.currentURLIndex];await _u(_f,_r)}return!0}catch(_f){var _p;return E_.error("[".concat(this.name,"] reconnect failed"),_f.toString()),_f!=null&&(_p=_f.data)!==null&&_p!==void 0&&_p.desc&&Array.isArray(_f.data.desc)&&_f.data.desc.length&&_f.data.desc.includes("dynamic key expired")?(this.emit(KE.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):await this.reconnectWithAction(_r,_o)}}async chooseBestWebsocketConnection(_r,_o,_a){return new uE((_u,_p)=>{let _f=!1;const n_=[];this.closeEstablishingWs=()=>{E_.debug("[choose-best-ws] close establishing websockets"),n_.forEach(M_=>{M_.onclose=null,M_.onopen=null,M_.onmessage=null,M_.close()}),_p(new U_(k_.WS_ABORT,"choose best websocket aborted"))};const r_=J_("GATEWAY_DOMAINS");let o_;const s_=_r.indexOf("?h="),u_=r_.find(M_=>s_!==-1?_r.includes(M_,s_):_r.includes(M_));E_.debug("[choose-best-ws] currentDomain: ",u_,", domains: ",r_);let g_=!this.tryDoubleDomain||_o||!u_;if(!g_&&u_){var w_;const M_=Date.now();try{r_.forEach(P_=>{const _g=s_===-1?_r.replace(u_,P_):_r.substr(0,s_)+_r.substr(s_).replace(u_,P_),_y=new WebSocket(_g);_y.binaryType="arraybuffer",n_.push(_y),E_.debug("[choose-best-ws] ws is connecting:",_y.url)})}catch{for(E_.debug("[choose-best-ws] ws create failed, fallback to single url"),n_.forEach(_g=>_g.close());n_.length;)n_.pop();g_=!0}(w_=this.store)===null||w_===void 0||w_.recordJoinChannelService({urls:n_.map(P_=>P_.url),service:"gateway"},_a),n_.forEach(P_=>{P_.onopen=()=>{if(_f)return;const _g=Date.now()-M_;E_.debug("[choose-best-ws] ws open cost ".concat(_g,"ms")),n_.filter(_y=>_y!==P_).forEach(_y=>{E_.debug("[choose-best-ws]close backup websocket: ".concat(_y.url)),_y.close()}),_f=!0,_u(P_)},P_.onclose=_g=>{o_=_g,!_f&&(n_.find(_y=>!(_y.readyState===WebSocket.CLOSED||_y.readyState===WebSocket.CLOSING))||(E_.debug("[choose-best-ws] all websocket is closed"),_f=!0,_p(o_)))},P_.onmessage=_g=>{E_.debug("[choose-best-ws]".concat(P_.url," onmessage: ").concat(_g.data))}}),dT(this.forceCloseTimeout).then(()=>{n_.forEach(P_=>{P_.readyState!==WebSocket.OPEN&&P_.close()})})}if(g_){var D_;let M_;E_.debug("[choose-best-ws] use single url: ",_r),(D_=this.store)===null||D_===void 0||D_.recordJoinChannelService({urls:[_r],service:"gateway"},_a);try{M_=new WebSocket(_r),n_.push(M_),M_.binaryType="arraybuffer"}catch(P_){const _g=new U_(k_.WS_ERR,"init websocket failed! Error: ".concat(P_.toString()));return E_.error("[".concat(this.name,"]").concat(_g)),void _p(_g)}M_.onopen=()=>{_u(M_)},M_.onclose=P_=>{_p(P_)},M_.onmessage=P_=>{E_.debug("[choose-best-ws]".concat(M_.url," onmessage: ").concat(P_.data))},dT(this.forceCloseTimeout).then(()=>{M_&&M_.readyState!==WebSocket.OPEN&&M_.close()})}}).then(_u=>(this.closeEstablishingWs=void 0,_u)).catch(_u=>{throw this.closeEstablishingWs=void 0,_u})}}class E6{constructor(_r){p_(this,"input",[]),p_(this,"size",void 0),this.size=_r}add(_r){this.input.push(_r),this.input.length>this.size&&this.input.splice(0,1)}mean(){var _r;return this.input.length===0?0:ZR(_r=this.input).call(_r,(_o,_a)=>_o+_a)/this.input.length}}class b6 extends lS{get connectionState(){return this._connectionState}set connectionState(_r){_r!==this._connectionState&&(this._connectionState=_r,_r===O0.CONNECTED?this.emit(CE.WS_CONNECTED):_r===O0.RECONNECTING?this.emit(CE.WS_RECONNECTING,this._websocketReconnectReason):_r===O0.CLOSED&&this.emit(CE.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(_r,_o){super(),p_(this,"_disconnectedReason",void 0),p_(this,"_websocketReconnectReason",void 0),p_(this,"_connectionState",O0.CLOSED),p_(this,"reconnectToken",void 0),p_(this,"websocket",void 0),p_(this,"openConnectionTime",void 0),p_(this,"clientId",void 0),p_(this,"lastMsgTime",Date.now()),p_(this,"uploadCache",[]),p_(this,"uploadCacheInterval",void 0),p_(this,"rttRolling",new E6(5)),p_(this,"pingpongTimer",void 0),p_(this,"wsInflateDataTimer",void 0),p_(this,"pingpongTimeoutCount",0),p_(this,"joinResponse",void 0),p_(this,"multiIpOption",void 0),p_(this,"initError",void 0),p_(this,"spec",void 0),p_(this,"store",void 0),p_(this,"onWebsocketMessage",_a=>{if(_a.data instanceof ArrayBuffer)return void this.emit(CE.ON_BINARY_DATA,_a.data);const _u=JSON.parse(_a.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(_u,"_id")){const _p="res-@".concat(_u._id);this.emit(_p,_u._result,_u._message)}else if(Object.prototype.hasOwnProperty.call(_u,"_type")){if(this.emit(_u._type,_u._message),_u._type===XE.ON_NOTIFICATION&&this.handleNotification(_u._message),_u._type===XE.ON_USER_BANNED)switch(_u._message.error_code){case 14:this.close(w0.UID_BANNED);break;case 15:this.close(w0.IP_BANNED);break;case 16:this.close(w0.CHANNEL_BANNED)}if(_u._type===XE.ON_USER_LICENSE_BANNED)switch(_u._message.error_code){case LE.ERR_LICENSE_MISSING:this.close(w0.LICENSE_MISSING);break;case LE.ERR_LICENSE_EXPIRED:this.close(w0.LICENSE_EXPIRED);break;case LE.ERR_LICENSE_MINUTES_EXCEEDED:this.close(w0.LICENSE_MINUTES_EXCEEDED);break;case LE.ERR_LICENSE_PERIOD_INVALID:this.close(w0.LICENSE_PERIOD_INVALID);break;case LE.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(w0.LICENSE_MULTIPLE_SDK_SERVICE);break;case LE.ERR_LICENSE_ILLEGAL:this.close(w0.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=_r.clientId,this.spec=_r,this.store=_o,this.websocket=new VD("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,_o),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===O0.CONNECTED&&this.reconnect("retry",PT.OFFLINE)})}async request(_r,_o,_a,_u){const _p=X0(6,""),_f={_id:_p,_type:_r,_message:_o},n_=this.websocket.connectionID,r_=()=>new uE((D_,M_)=>{if(this.connectionState===O0.CONNECTED)return D_();const P_=()=>{this.off(CE.WS_CLOSED,_g),D_()},_g=()=>{this.off(CE.WS_CONNECTED,P_),M_(new U_(k_.WS_ABORT))};this.once(CE.WS_CONNECTED,P_),this.once(CE.WS_CLOSED,_g),_r!==PE.PUBLISH&&_r!==PE.SUBSCRIBE&&_r!==PE.UNSUBSCRIBE&&_r!==PE.UNPUBLISH&&_r!==PE.CONTROL&&_r!==PE.RESTART_ICE||this.once(CE.DISCONNECT_P2P,()=>{M_(new U_(k_.DISCONNECT_P2P))}),_r!==PE.PUBLISH&&_r!==PE.RESTART_ICE||this.once(CE.ABORT_P2P_EXECUTION,()=>{M_(new U_(k_.DISCONNECT_P2P))})});if(this.connectionState!==O0.CONNECTING&&this.connectionState!==O0.RECONNECTING||_r===PE.JOIN||_r===PE.REJOIN||await r_(),this.websocket.sendMessage(_f,!0),_u)return;const o_=new uE((D_,M_)=>{let P_=!1;const _g=(hE,NE)=>{P_=!0,D_({isSuccess:hE==="success",message:NE||{}}),this.off(CE.WS_CLOSED,_y),this.off(CE.WS_RECONNECTING,_y),this.emit(CE.REQUEST_SUCCESS,_r,_o)};this.once("res-@".concat(_p),_g);const _y=()=>{M_(new U_(k_.WS_ABORT,"type: ".concat(_r))),this.off(CE.WS_CLOSED,_y),this.off(CE.WS_RECONNECTING,_y),this.off("res-@".concat(_p),_g)};this.once(CE.WS_CLOSED,_y),this.once(CE.WS_RECONNECTING,_y),dT(J_("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==n_||P_||(E_.warning("ws request timeout, type: ".concat(_r)),this.emit(CE.REQUEST_TIMEOUT,_r,_o))})});let s_=null;try{s_=await o_}catch(D_){if(this.connectionState===O0.CLOSED||_r===PE.LEAVE)throw new U_(k_.WS_ABORT);return!this.spec.forceWaitGatewayResponse||_a?D_.throw():_r===PE.JOIN||_r===PE.REJOIN?null:(await r_(),await this.request(_r,_o))}if(s_.isSuccess)return s_.message;const u_=Number(s_.message.error_code||s_.message.code),g_=wU(u_),w_=new U_(k_.UNEXPECTED_RESPONSE,"".concat(g_.desc,": ").concat(s_.message.error_str),{code:u_,data:s_.message});return g_.action==="success"?s_.message:(E_.warning("[".concat(this.websocket.connectionID,"] unexpected response from type ").concat(_r,", error_code: ").concat(u_,", message: ").concat(g_.desc,", action: ").concat(g_.action)),u_===LE.ERR_TOO_MANY_BROADCASTERS?((_r===PE.JOIN||_r===PE.REJOIN)&&(this.initError=w_,this.close()),w_.throw()):g_.action==="failed"?w_.throw():g_.action==="quit"?(this.initError=w_,this.close(),w_.throw()):(u_===LE.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=s_.message.option,E_.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",PT.MULTI_IP)):this.reconnect(g_.action,PT.SERVER_ERROR),_r===PE.JOIN||_r===PE.REJOIN?null:await this.request(_r,_o)))}waitMessage(_r,_o){return new uE(_a=>{const _u=_p=>{(!_o||_o(_p))&&(this.off(_r,_u),_a(_p))};this.on(_r,_u)})}upload(_r,_o){const _a={_type:_r,_message:_o};try{this.websocket.sendMessage(_a)}catch{const _p=J_("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(_a),this.uploadCache.length>_p&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==O0.CONNECTED)return;const _f=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(_f._type,_f._message)},J_("UPLOAD_CACHE_INTERVAL")||2e3))}}send(_r,_o){const _a={_type:_r,_message:_o};this.websocket.sendMessage(_a)}init(_r,_o){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new uE((_a,_u)=>{this.once(CE.WS_CONNECTED,()=>_a(this.joinResponse)),this.once(CE.WS_CLOSED,()=>_u(this.initError||new U_(k_.WS_ABORT))),this.connectionState=O0.CONNECTING,this.websocket.init(_r).catch(_u),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4),setTimeout(()=>{_o&&this.openConnectionTime===void 0&&(E_.debug("[".concat(this.clientId,"] init websocket timeout while join with fallback to proxy")),_u(new U_(k_.INIT_WEBSOCKET_TIMEOUT)))},J_("JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION"))})}close(_r){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=_r||w0.LEAVE,this.connectionState=O0.CLOSED,E_.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),_r===w0.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new VD("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(CE.ABORT_P2P_EXECUTION);const _r=await hT(this,CE.REQUEST_JOIN_INFO),_o=await this.request(PE.JOIN,_r);if(!_o)return this.emit(CE.REPORT_JOIN_GATEWAY,k_.TIMEOUT,this.url||""),!1;this.joinResponse=_o,this.emit(CE.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=O0.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new U_(k_.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const _r=yL(this,CE.REQUEST_REJOIN_INFO);_r.token=this.reconnectToken;const _o=await this.request(PE.REJOIN,_r);return!!_o&&(this.connectionState=O0.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),_o.peers&&_o.peers.forEach(_a=>{this.emit(XE.ON_USER_ONLINE,{uid:_a.uid}),_a.audio&&this.emit(XE.ON_ADD_AUDIO_STREAM,{uid:_a.uid,uint_id:_a.uint_id,audio:!0,ssrcId:_a.audio_ssrc}),_a.video&&this.emit(XE.ON_ADD_VIDEO_STREAM,{uid:_a.uid,uint_id:_a.uint_id,video:!0,ssrcId:_a.video_ssrc}),_a.audio_mute?this.emit(XE.MUTE_AUDIO,{uid:_a.uid}):this.emit(XE.UNMUTE_AUDIO,{uid:_a.uid}),_a.video_mute?this.emit(XE.MUTE_VIDEO,{uid:_a.uid}):this.emit(XE.UNMUTE_VIDEO,{uid:_a.uid}),_a.audio_enable_local?this.emit(XE.ENABLE_LOCAL_AUDIO,{uid:_a.uid}):this.emit(XE.DISABLE_LOCAL_AUDIO,{uid:_a.uid}),_a.video_enable_local?this.emit(XE.ENABLE_LOCAL_VIDEO,{uid:_a.uid}):this.emit(XE.DISABLE_LOCAL_VIDEO,{uid:_a.uid}),_a.audio||_a.video||this.emit(XE.ON_REMOVE_STREAM,{uid:_a.uid,uint_id:_a.uint_id})}),!0)}reconnect(_r,_o){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(_r,_o)}handleNotification(_r){E_.debug("[".concat(this.clientId,"] receive notification: "),_r);const _o=wU(_r.code);if(_o.action!=="success"){if(_o.action!=="failed")return _o.action==="quit"?(_o.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(w0.UID_BANNED),void this.close()):void this.reconnect(_o.action,PT.SERVER_ERROR);E_.error("[".concat(this.clientId,"] ignore error: "),_o.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const _r=J_("PING_PONG_TIME_OUT"),_o=Date.now();this.pingpongTimeoutCount>=_r&&(E_.warning("PINGPONG Timeout. Last Socket Message: ".concat(_o-this.lastMsgTime,"ms")),_o-this.lastMsgTime>J_("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",PT.TIMEOUT):this.request(PE.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const _a=Date.now()-_o;this.rttRolling.add(_a),J_("REPORT_STATS")&&this.send(PE.PING_BACK,{pingpongElapse:_a})}).catch(_a=>{})}handleWsInflateData(){const{wsInflateLength:_r,wsDeflateLength:_o}=this.websocket.getWsInflateData();_r!==0&&_o!==0&&this.upload(zT.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:_o,ws_inflate_length:_r})}handleWebsocketEvents(){this.websocket.on(KE.RECONNECT_WAITTING_FINISH,_r=>{this.emit(CE.WS_RECONNECT_WAITTING_FINISH,_r)}),this.websocket.on(KE.RECONNECT_CREATE_CONNECTION,_r=>{this.emit(CE.WS_RECONNECT_CREATE_CONNECTION,_r)}),this.websocket.on(KE.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(KE.CLOSED,()=>{this.connectionState=O0.CLOSED}),this.websocket.on(KE.FAILED,()=>{this._disconnectedReason=w0.NETWORK_ERROR,this.connectionState=O0.CLOSED}),this.websocket.on(KE.RECONNECTING,_r=>{this._websocketReconnectReason=_r,this.joinResponse=void 0,this.connectionState===O0.CONNECTED?this.connectionState=O0.RECONNECTING:this.connectionState=O0.CONNECTING}),this.websocket.on(KE.WILL_RECONNECT,(_r,_o)=>{if(yL(this,CE.IS_P2P_DISCONNECTED)&&_r==="retry")return E_.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(CE.NEED_RENEW_SESSION),this.emit(CE.DISCONNECT_P2P),_o("tryNext");_r!=="retry"&&(E_.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(_r)),this.reconnectToken=void 0,this.emit(CE.NEED_RENEW_SESSION),this.emit(CE.DISCONNECT_P2P)),_o(_r)}),this.websocket.on(KE.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(_r=>{E_.warning("[".concat(this.clientId,"] rejoin failed ").concat(_r)),this.reconnect("tryNext",PT.SERVER_ERROR)}):this.join().catch(_r=>{if(this.emit(CE.REPORT_JOIN_GATEWAY,_r.message||_r.code,this.url||""),_r instanceof U_&&_r.code===k_.UNEXPECTED_RESPONSE&&_r.data.code===LE.ERR_NO_AUTHORIZED)return E_.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",PT.SERVER_ERROR);E_.error("[".concat(this.clientId,"] join gateway request failed"),_r.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",PT.SERVER_ERROR):(this.initError=_r,this.close())})}),this.websocket.on(KE.REQUEST_NEW_URLS,(_r,_o)=>{hT(this,CE.REQUEST_RECOVER,this.multiIpOption).then(_r).catch(_o)}),this.websocket.on(KE.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(XE.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})}}function S6(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}class _9 extends lS{get url(){return this._url?this._url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(_r){["tryNext","recover"].includes(_r)&&this.resetReconnectCount(_r),this._reconnectMode=_r}get state(){return this._state}set state(_r){_r!==this._state&&(this._state=_r,this._state==="reconnecting"?this.emit(sS.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(sS.CONNECTED):this._state==="closed"?this.emit(sS.CLOSED):this._state==="failed"&&this.emit(sS.FAILED))}constructor(_r,_o,_a,_u){super(),p_(this,"connectionID",0),p_(this,"currentURLIndex",0),p_(this,"reconnectReason",void 0),p_(this,"_reconnectMode","tryNext"),p_(this,"_initMutex",void 0),p_(this,"_name",void 0),p_(this,"_state","closed"),p_(this,"_reconnectInterrupter",void 0),p_(this,"_url",void 0),p_(this,"_retryConfig",void 0),p_(this,"_reconnectCount",0),p_(this,"_forceCloseTimeout",5e3),p_(this,"_onlineReconnectListener",void 0),p_(this,"_closeEstablishingTransmitter",()=>{}),p_(this,"_store",void 0),p_(this,"_joinChannelServiceRecordIndex",void 0),p_(this,"_transmitter",void 0),p_(this,"_useCompress",void 0),p_(this,"_inflateLength",0),p_(this,"_deflateLength",0),this._store=_u,this._name=_r,this._retryConfig=function(_p){for(var _f=1;_f<arguments.length;_f++){var n_=arguments[_f]!=null?arguments[_f]:{};_f%2?S6(Object(n_),!0).forEach(function(r_){p_(_p,r_,n_[r_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_p,Object.getOwnPropertyDescriptors(n_)):S6(Object(n_)).forEach(function(r_){Object.defineProperty(_p,r_,Object.getOwnPropertyDescriptor(n_,r_))})}return _p}({},_o),this._useCompress=_a}resetReconnectCount(_r){E_.debug("".concat(this._name," reset reconnect count, reason: ").concat(_r)),this._reconnectCount=0}close(_r,_o){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this._reconnectInterrupter&&this._reconnectInterrupter(),this._transmitter){this._transmitter.onclose=null,this._transmitter.onopen=null,this._transmitter.onmessage=null;const _a=this._transmitter;_o?setTimeout(()=>_a.close(),500):_a.close(),this._transmitter=void 0}this.state=_r?"failed":"closed",this._closeEstablishingTransmitter&&this._closeEstablishingTransmitter()}reconnect(_r,_o){if(!this._transmitter)return void E_.warning("[".concat(this._name,"] can not reconnect, no websocket"));var _a;_r!==void 0&&(this.reconnectMode=_r),E_.debug("[".concat(this._name,"] reconnect is triggered initiative")),typeof this._joinChannelServiceRecordIndex=="number"&&((_a=this._store)===null||_a===void 0||_a.recordJoinChannelService({status:"error",errors:[new Error(_o)]},this._joinChannelServiceRecordIndex));const _u=this._transmitter.onclose;this._transmitter.onclose=null,this._transmitter.close(),_u&&_u.bind(this._transmitter)({code:9999,reason:_o})}getInflateData(){const _r=this._inflateLength,_o=this._deflateLength;return this.clearInflateData(),{inflateLength:_r,deflateLength:_o}}setInflateData(_r){this._deflateLength=this._deflateLength+_r.originLength,this._inflateLength=this._inflateLength+_r.compressedLength}clearInflateData(){this._inflateLength=0,this._deflateLength=0}}function w6(_n,_r,_o){if("getBigUint64"in DataView.prototype)return _n.getBigUint64(_r,_o);const _a=_n.getUint32(_r,_o),_u=_n.getUint32(_r+4,_o),_p=+!!_o,_f=+!_o;return BigInt(_a*_f+_u*_p)<<BigInt(32)|BigInt(_a*_p+_u*_f)}function T6(_n,_r,_o,_a){if("setBigUint64"in DataView.prototype)return _n.setBigUint64(_r,_o,_a);const _u=Number(_o>>BigInt(32)),_p=Number(_o&BigInt(4294967295));_a?(_n.setUint32(_r+4,_u,_a),_n.setUint32(_r,_p,_a)):(_n.setUint32(_r,_u,_a),_n.setUint32(_r+4,_p,_a))}let BR;(function(_n){_n[_n.Default=0]="Default",_n[_n.Ack=1]="Ack"})(BR||(BR={}));class g9{constructor(_r,_o,_a){p_(this,"version",1),p_(this,"initialRTO",void 0),p_(this,"maxBatchAckCount",void 0),p_(this,"maxRTO",void 0),p_(this,"initialRTT",void 0),p_(this,"ID",void 0),p_(this,"rtt",void 0),p_(this,"packetNumber",1),p_(this,"rtoRatioMap",new Map),p_(this,"timeoutMap",new Map),p_(this,"unorderedPacketQueue",[]),p_(this,"batchAckPacketQueue",[]),p_(this,"lastOrderedPacketNumber",0),p_(this,"batchAckTimer",void 0),p_(this,"sendImpl",void 0),p_(this,"receiveImpl",void 0),this.sendImpl=_r,this.receiveImpl=_o,this.ID=X0(7,"transmitter-"),this.initialRTO=(_a==null?void 0:_a.initialRTO)!==void 0?_a.initialRTO:J_("TRANSMITTER_INITIAL_RTO"),this.initialRTT=(_a==null?void 0:_a.initialRTT)!==void 0?_a.initialRTT:J_("TRANSMITTER_INITIAL_RTT"),this.rtt=(_a==null?void 0:_a.initialRTT)!==void 0?_a.initialRTT:J_("TRANSMITTER_INITIAL_RTT"),this.maxBatchAckCount=(_a==null?void 0:_a.maxBatchAckCount)!==void 0?_a.maxBatchAckCount:J_("TRANSMITTER_MAX_BATCH_ACK_COUNT"),this.maxRTO=(_a==null?void 0:_a.maxRTO)!==void 0?_a.maxRTO:J_("TRANSMITTER_MAX_RTO")}packetize(_r,_o){return{type:BR.Default,version:this.version,packetNumber:_o,payload:_r}}serialize(_r){switch(_r.type){case BR.Default:{let _o;typeof _r.payload=="string"?_o=new TextEncoder().encode(_r.payload):_o=_r.payload;const _a=new ArrayBuffer(_o.length+15),_u=new DataView(_a);return _u.setUint16(0,_r.version),_u.setUint8(2,_r.type),_u.setUint32(3,_r.packetNumber),T6(_u,7,BigInt(_r.sendTs)),new Uint8Array(_u.buffer).set(_o,15),_a}case BR.Ack:{const _o=new ArrayBuffer(16),_a=new DataView(_o);return _a.setUint16(0,_r.version),_a.setUint8(2,_r.type),_a.setUint32(3,_r.maxAckPacketNumber),_a.setUint8(7,_r.shift),T6(_a,8,BigInt(_r.ackSendTs)),_o}}}deserialize(_r){const _o=new DataView(_r),_a=_o.getUint16(0),_u=_o.getUint8(2);switch(_u){case BR.Default:{const _p=_o.getUint32(3),_f=w6(_o,7),n_=_r.slice(15),r_=new TextDecoder().decode(n_);return{version:_a,type:_u,packetNumber:_p,sendTs:Number(_f),payload:r_}}case BR.Ack:{const _p=_o.getUint32(3),_f=_o.getUint8(7),n_=w6(_o,8);return{version:_a,type:_u,maxAckPacketNumber:_p,shift:_f,ackSendTs:Number(n_)}}default:throw E_.error("[".concat(this.ID,"] Unrecognized packet type ").concat(_u)),new Error("Unrecognized packet type ".concat(_u))}}sendMessage(_r){const _o=this.packetize(_r,this.packetNumber);this.packetNumber=this.packetNumber===4294967295?1:this.packetNumber+1;const _a=this.calculateRTO(_o),_u=window.setTimeout(()=>{this.resendMessage(_o)},_a);this.timeoutMap.set(_o.packetNumber,_u),this.sendPacket(_o)}onData(_r){const _o=this.deserialize(_r);_o.type===BR.Default?this.ack(_o):_o.type===BR.Ack&&(this.updateRTT(_o,Math.round(performance.now())),this.clearRTO(_o))}close(){this.rtt=this.initialRTT,this.packetNumber=1,Array.from(this.timeoutMap.entries()).forEach(_r=>{let[_o,_a]=_r;window.clearTimeout(_a)}),this.timeoutMap=new Map,this.rtoRatioMap=new Map,this.unorderedPacketQueue=[],this.batchAckPacketQueue=[],this.lastOrderedPacketNumber=0,this.batchAckTimer!==void 0&&window.clearTimeout(this.batchAckTimer)}resendMessage(_r){const _o=this.calculateRTO(_r),_a=window.setTimeout(()=>{this.resendMessage(_r)},_o);this.timeoutMap.set(_r.packetNumber,_a),this.sendPacket(_r)}calculateRTO(_r){const _o=this.rtoRatioMap.get(_r.packetNumber);if(_o===void 0)return this.rtoRatioMap.set(_r.packetNumber,1),this.initialRTO;{const _a=9*this.rtt/8*_o;return this.rtoRatioMap.set(_r.packetNumber,_o+1),_a>this.maxRTO?this.maxRTO:_a}}updateRTT(_r,_o){const _a=_r.ackSendTs;this.rtt=this.rtt*(7/8)+(_o-_a-this.rtt)/8}ack(_r){if(_r.packetNumber===this.lastOrderedPacketNumber+1)for(this.batchAckPacketQueue.length>=this.maxBatchAckCount&&this.batchAck(),this.batchAckTimer?this.batchAckPacketQueue.push(_r):(this.batchAckPacketQueue.push(_r),this.batchAckTimer=window.setTimeout(()=>{this.batchAck()},this.rtt/8)),this.lastOrderedPacketNumber+=1,this.receiveImpl(_r.payload);;){const _o=this.unorderedPacketQueue[0];if(!_o){this.unorderedPacketQueue.shift();break}this.batchAckTimer&&this.batchAck(),this.receiveImpl(_o.payload),this.unorderedPacketQueue.shift(),this.lastOrderedPacketNumber+=1}else if(_r.packetNumber<=this.lastOrderedPacketNumber){const _o={ackSendTs:_r.sendTs,maxAckPacketNumber:_r.packetNumber,shift:0,type:BR.Ack,version:this.version};this.sendPacket(_o)}else if(_r.packetNumber>this.lastOrderedPacketNumber){this.unorderedPacketQueue[_r.packetNumber-this.lastOrderedPacketNumber-2]=_r;const _o={ackSendTs:_r.sendTs,maxAckPacketNumber:_r.packetNumber,shift:0,type:BR.Ack,version:this.version};this.sendPacket(_o)}}batchAck(){window.clearTimeout(this.batchAckTimer),this.batchAckTimer=void 0;const _r={ackSendTs:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].sendTs,maxAckPacketNumber:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].packetNumber,shift:this.batchAckPacketQueue.length-1,type:BR.Ack,version:this.version};this.sendPacket(_r),this.batchAckPacketQueue=[]}sendPacket(_r){_r.type===BR.Default&&(_r.sendTs=Math.round(performance.now()));const _o=this.serialize(_r);this.sendImpl(_o)}clearRTO(_r){for(let _o=_r.maxAckPacketNumber-_r.shift;_o<=_r.maxAckPacketNumber;_o++){const _a=this.timeoutMap.get(_o);_a!==void 0&&window.clearTimeout(_a),this.timeoutMap.delete(_o),this.rtoRatioMap.delete(_o)}}}class R6 extends _9{constructor(_r,_o){super(_r,_o,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3?arguments[3]:void 0),p_(this,"_initMutex",void 0),p_(this,"_reconnectInterrupter",void 0),p_(this,"_url",void 0),p_(this,"_transmitter",void 0),p_(this,"_addresses",void 0),p_(this,"_reliableTransmission",void 0),this._initMutex=new RT("datachannel");const{timeout:_a,timeoutFactor:_u}=_o,_p=Math.max(300,Math.floor(3*_a/5)),_f=Math.max(1.2,Math.floor(8*_u)/10);gT.ONLINE&&(this._retryConfig.timeout=_p,this._retryConfig.timeoutFactor=_f),gS.on(tN.NETWORK_STATE_CHANGE,(n_,r_)=>{n_!==r_&&(this.resetReconnectCount("network state change: ".concat(r_," -> ").concat(n_)),n_===gT.ONLINE?(this._retryConfig.timeout=_p,this._retryConfig.timeoutFactor=_f):(this._retryConfig.timeout=_a,this._retryConfig.timeoutFactor=_u))})}getConnection(){if(this._reliableTransmission)return this._reliableTransmission}async init(_r){let _o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;this._forceCloseTimeout=_o;const _a=(_u,_p)=>{this._addresses=_r,this.currentURLIndex=this._addresses.findIndex(n_=>n_.fingerprint||J_("FINGERPRINT"));const _f=this._addresses[this.currentURLIndex];this.state="connecting",this.createTransmitterConnection(_f).then(_u).catch(_p),this.once(sS.CLOSED,()=>_p(new U_(k_.WS_DISCONNECT))),this.once(sS.CONNECTED,()=>_u())};return this._initMutex.lock().then(_u=>new uE((_p,_f)=>{_a(_p,_f)}).then(()=>{_u()}).catch(()=>{_u()}))}sendMessage(_r){let _o=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this._transmitter||!this._reliableTransmission)throw new U_(k_.WS_ABORT,"datachannel is not ready");try{_o||(_r=JSON.stringify(_r)),this._reliableTransmission.sendMessage(_r)}catch(_a){throw new U_(k_.WS_ERR,"send datachannel signal message error"+_a.toString())}}unbindDcCloseEventListener(){this._transmitter&&(this._transmitter.onclose=null)}sendMessageWithJSON(_r){const _o=JSON.stringify(_r);return{compressed:_o,compressedLength:_o.length,origin:_r}}sendMessageWithUint8Array(_r){return{compressed:_r,compressedLength:_r.byteLength,origin:_r}}createTransmitterConnection(_r){return this.connectionID+=1,this._joinChannelServiceRecordIndex=void 0,this._url="dc://".concat(_r.ip,":").concat(_r.port),new uE((_o,_a)=>{var _u;const _p=()=>{E_.debug("[".concat(this._name,"] datachannel opened:"),this._url),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),_o()},_f=async s_=>{var u_;if((u_=this._closeEstablishingTransmitter)===null||u_===void 0||u_.call(this),E_.debug("[".concat(this._name,"] datachannel close ").concat(this._url,", code: ").concat(s_.code,", reason: ").concat(s_.reason,", current mode: ").concat(this.reconnectMode)),this._reconnectCount<this._retryConfig.maxRetryCount){this.state==="connected"&&(this.reconnectReason=s_.reason,this.state="reconnecting");const g_=_O(this,sS.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,w_=await this.reconnectWithAction(g_);if(this.state==="closed")return void E_.debug("[".concat(this.connectionID,"] dc is closed, no need to reconnect"));if(!w_)return _a(new U_(k_.WS_DISCONNECT,"datachannel reconnect failed: ".concat(s_.code))),void this.close(!0);_o()}else _a(new U_(k_.WS_DISCONNECT,"datachannel close: ".concat(s_.code))),this.close()},n_=s_=>{var u_;(u_=this._reliableTransmission)===null||u_===void 0||u_.onData(s_.data)};this._transmitter&&(this._transmitter.onclose=null,this._transmitter.close()),this._reliableTransmission&&(this._reliableTransmission.close(),this._reliableTransmission=void 0),E_.debug("[".concat(this._name,"] start connect, address: ").concat(JSON.stringify(_r)));const r_=(_u=this._store)===null||_u===void 0?void 0:_u.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"}),o_=Date.now();hT(this,sS.TO_CONNECT_DATACHANNEL,_r).then(s_=>{var u_,g_;if(!s_)throw new Error("transmissonInfo not exist yet");const{transmitter:w_,close:D_}=s_;this._transmitter=w_,(u_=this._store)===null||u_===void 0||u_.signalChannelOpen();const M_=Date.now()-o_;E_.debug("[choose dc] dc open cost ".concat(M_,"ms")),this._reliableTransmission=new g9(P_=>{var _g;this._transmitter&&this._transmitter.readyState==="open"&&((_g=this._transmitter)===null||_g===void 0||_g.send(P_))},P_=>{typeof P_=="string"&&this.emit(sS.ON_MESSAGE,P_)}),this._closeEstablishingTransmitter=()=>{var P_;(P_=this._reliableTransmission)===null||P_===void 0||P_.close(),this._reliableTransmission=void 0,D_()},_p&&_p(),w_.onclose=_f,w_.onmessage=n_,(g_=this._store)===null||g_===void 0||g_.recordJoinChannelService({endTs:Date.now(),status:"success"},r_),this._joinChannelServiceRecordIndex=r_}).catch(s_=>{var u_;if((u_=this._store)===null||u_===void 0||u_.recordJoinChannelService({endTs:Date.now(),status:s_ instanceof U_&&s_.code===k_.WS_ABORT?"aborted":"error",errors:[s_]},r_),this.state!=="closed"){if(s_ instanceof U_&&s_.code===k_.WS_ERR){const g_=new U_(k_.WS_ERR,"init datachannel failed! Error: ".concat(s_.toString()));return E_.error("[".concat(this._name,"]").concat(g_)),void _a(g_)}_f&&_f(s_)}else _a(new U_(k_.WS_DISCONNECT,"datachannel is closed: ".concat(s_.toString())))})})}async reconnectWithAction(_r){let _o=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this._reconnectCount>=this._retryConfig.maxRetryCount||!this._addresses||this.state==="closed")return!1;this._onlineReconnectListener||gS.networkState!==gT.OFFLINE||(this._onlineReconnectListener=gS.onlineWaiter&&gS.onlineWaiter.then(()=>{this._onlineReconnectListener=void 0}));let _a=!0;if(this._reconnectInterrupter=()=>{_a=!1},_o){const _f=k4(this._reconnectCount,this._retryConfig);E_.debug("[".concat(this._name,"] wait ").concat(_f,"ms to reconnect datachannel, mode: ").concat(_r)),await uE.race([dT(_f),this._onlineReconnectListener||new uE(()=>{})])}if(this.state==="closed"||!_a)return!1;this._reconnectCount+=1;const _u=async(_f,n_)=>{this.emit(sS.RECONNECT_CREATE_CONNECTION,n_),await this.createTransmitterConnection(_f)};try{if(_r==="retry"){const _f=this._addresses[this.currentURLIndex];this.emit(sS.RECONNECT_WAITTING_FINISH,_r),await _u(_f,_r)}else if(_r==="tryNext"){this.currentURLIndex+=1;for(let n_=this.currentURLIndex;n_<this._addresses.length;n_++){if(this._addresses[n_].fingerprint||J_("FINGERPRINT")){this.currentURLIndex=n_;break}this.currentURLIndex+=1}if(this.currentURLIndex>=this._addresses.length)return E_.debug("[".concat(this._name,"] the available addresses are exhausted, change to recover")),await this.reconnectWithAction("recover",!1);E_.debug("[".concat(this._name,"] datachannel url length: ").concat(this._addresses.length," current index: ").concat(this.currentURLIndex));const _f=this._addresses[this.currentURLIndex];this.emit(sS.RECONNECT_WAITTING_FINISH,_r),await _u(_f,_r)}else _r==="recover"&&(E_.debug("[".concat(this._name,"] start to failback to websocket")),this.resetReconnectCount("recover mode"),this.emit(sS.RECONNECT_WAITTING_FINISH,_r),this.emit(sS.FAILBACK));return!0}catch(_f){var _p;return E_.error("[".concat(this._name,"] reconnect failed"),_f.toString()),_f!=null&&(_p=_f.data)!==null&&_p!==void 0&&_p.desc&&Array.isArray(_f.data.desc)&&_f.data.desc.length&&_f.data.desc.includes("dynamic key expired")?(this.emit(sS.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):await this.reconnectWithAction(_r,_o)}}}class ZO extends lS{get connectionState(){return this._connectionState}set connectionState(_r){_r!==this._connectionState&&(this._connectionState=_r,_r===O0.CONNECTED?this.emit(CE.WS_CONNECTED):_r===O0.RECONNECTING?this.emit(CE.WS_RECONNECTING,this._websocketReconnectReason):_r===O0.CLOSED&&this.emit(CE.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(_r,_o){super(),p_(this,"_disconnectedReason",void 0),p_(this,"_websocketReconnectReason",void 0),p_(this,"_connectionState",O0.CLOSED),p_(this,"reconnectToken",void 0),p_(this,"websocket",void 0),p_(this,"openConnectionTime",void 0),p_(this,"clientId",void 0),p_(this,"lastMsgTime",Date.now()),p_(this,"uploadCache",[]),p_(this,"uploadCacheInterval",void 0),p_(this,"rttRolling",new E6(5)),p_(this,"pingpongTimer",void 0),p_(this,"inflateDataTimer",void 0),p_(this,"pingpongTimeoutCount",0),p_(this,"joinResponse",void 0),p_(this,"multiIpOption",void 0),p_(this,"initError",void 0),p_(this,"spec",void 0),p_(this,"store",void 0),p_(this,"onWebsocketMessage",_a=>{if(_a instanceof ArrayBuffer)return void this.emit(CE.ON_BINARY_DATA,_a);const _u=JSON.parse(_a);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(_u,"_id")){const _p="res-@".concat(_u._id);this.emit(_p,_u._result,_u._message)}else if(Object.prototype.hasOwnProperty.call(_u,"_type")&&(this.emit(_u._type,_u._message),_u._type===XE.ON_NOTIFICATION&&this.handleNotification(_u._message),_u._type===XE.ON_USER_BANNED))switch(_u._message.error_code){case 14:this.close(w0.UID_BANNED);break;case 15:this.close(w0.IP_BANNED);break;case 16:this.close(w0.CHANNEL_BANNED)}}),this.clientId=_r.clientId,this.spec=_r,this.store=_o,this.websocket=new R6("gateway-".concat(this.clientId),this.spec.retryConfig,!0,_o),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===O0.CONNECTED&&this.reconnect("retry",pO.OFFLINE)})}async request(_r,_o,_a,_u){const _p=X0(6,""),_f={_id:_p,_type:_r,_message:_o},n_=this.websocket.connectionID,r_=()=>new uE((D_,M_)=>{if(this.connectionState===O0.CONNECTED)return D_();const P_=()=>{this.off(CE.WS_CLOSED,_g),D_()},_g=()=>{this.off(CE.WS_CONNECTED,P_),M_(new U_(k_.WS_ABORT))};this.once(CE.WS_CONNECTED,P_),this.once(CE.WS_CLOSED,_g),_r!==PE.PUBLISH&&_r!==PE.SUBSCRIBE&&_r!==PE.UNSUBSCRIBE&&_r!==PE.UNPUBLISH&&_r!==PE.CONTROL&&_r!==PE.RESTART_ICE||this.once(CE.DISCONNECT_P2P,()=>{M_(new U_(k_.DISCONNECT_P2P))}),_r!==PE.PUBLISH&&_r!==PE.RESTART_ICE||this.once(CE.ABORT_P2P_EXECUTION,()=>{M_(new U_(k_.DISCONNECT_P2P))})});if(this.connectionState!==O0.CONNECTING&&this.connectionState!==O0.RECONNECTING||_r===PE.JOIN||_r===PE.REJOIN||await r_(),_r===PE.LEAVE&&(this.websocket.unbindDcCloseEventListener(),_u=!0),this.websocket.sendMessage(_f,!0,!1),_u)return;const o_=new uE((D_,M_)=>{let P_=!1;const _g=(hE,NE)=>{P_=!0,D_({isSuccess:hE==="success",message:NE||{}}),this.off(CE.WS_CLOSED,_y),this.off(CE.WS_RECONNECTING,_y),this.emit(CE.REQUEST_SUCCESS,_r,_o)};this.once("res-@".concat(_p),_g);const _y=()=>{M_(new U_(k_.WS_ABORT,"type: ".concat(_r))),this.off(CE.WS_CLOSED,_y),this.off(CE.WS_RECONNECTING,_y),this.off("res-@".concat(_p),_g)};this.once(CE.WS_CLOSED,_y),this.once(CE.WS_RECONNECTING,_y),dT(J_("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==n_||P_||(E_.warning("dc request timeout, type: ".concat(_r)),this.emit(CE.REQUEST_TIMEOUT,_r,_o))})});let s_=null;try{s_=await o_}catch(D_){if(this.connectionState===O0.CLOSED||_r===PE.LEAVE)throw new U_(k_.WS_ABORT);return!this.spec.forceWaitGatewayResponse||_a?D_.throw():_r===PE.JOIN||_r===PE.REJOIN?null:(await r_(),await this.request(_r,_o))}if(s_.isSuccess)return s_.message;const u_=Number(s_.message.error_code||s_.message.code),g_=wU(u_),w_=new U_(k_.UNEXPECTED_RESPONSE,"".concat(g_.desc,": ").concat(s_.message.error_str),{code:u_,data:s_.message});return g_.action==="success"?s_.message:(E_.warning("[".concat(this.websocket.connectionID,"] unexpected response from type ").concat(_r,", error_code: ").concat(u_,", message: ").concat(g_.desc,", action: ").concat(g_.action)),u_===LE.ERR_TOO_MANY_BROADCASTERS?((_r===PE.JOIN||_r===PE.REJOIN)&&(this.initError=w_,this.close()),w_.throw()):g_.action==="failed"?w_.throw():g_.action==="quit"?(this.initError=w_,this.close(),w_.throw()):(u_===LE.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=s_.message.option,E_.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",pO.MULTI_IP)):this.reconnect(g_.action,pO.SERVER_ERROR),_r===PE.JOIN||_r===PE.REJOIN?null:await this.request(_r,_o)))}waitMessage(_r,_o){return new uE(_a=>{const _u=_p=>{(!_o||_o(_p))&&(this.off(_r,_u),_a(_p))};this.on(_r,_u)})}upload(_r,_o){const _a={_type:_r,_message:_o};try{this.websocket.sendMessage(_a)}catch{const _p=J_("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(_a),this.uploadCache.length>_p&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==O0.CONNECTED)return;const _f=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(_f._type,_f._message)},J_("UPLOAD_CACHE_INTERVAL")||2e3))}}send(_r,_o){const _a={_type:_r,_message:_o};this.websocket.sendMessage(_a)}init(_r,_o){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new uE((_a,_u)=>{this.once(CE.WS_CONNECTED,()=>_a(this.joinResponse)),this.once(CE.WS_CLOSED,()=>_u(this.initError||new U_(k_.WS_ABORT))),this.connectionState=O0.CONNECTING,this.websocket.init(_r).catch(_u),this.websocket.once(sS.FAILBACK,()=>{this.openConnectionTime===void 0&&_u(new U_(k_.INIT_DATACHANNEL_TIMEOUT))}),this.inflateDataTimer&&window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=window.setInterval(()=>{this.handleInflateData()},2e4),setTimeout(()=>{_o&&this.openConnectionTime===void 0&&(E_.debug("[".concat(this.clientId,"] init datachannel timeout while join with failback to websocket")),_u(new U_(k_.INIT_DATACHANNEL_TIMEOUT)))},J_("DC_JOIN_WITH_FAILBACK"))})}close(_r){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.inflateDataTimer&&(this.handleInflateData(),window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=_r||w0.LEAVE,this.connectionState=O0.CLOSED,E_.debug("[".concat(this.clientId,"] ")+"will close datachannel in signal"),this.websocket.close(),_r===w0.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new R6("gateway-".concat(this.clientId),this.spec.retryConfig,!0,this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(CE.ABORT_P2P_EXECUTION);const _r=await hT(this,CE.DATACHANNEL_CONNECTING),_o=await this.request(PE.JOIN,_r);if(!_o)return this.emit(CE.REPORT_JOIN_GATEWAY,k_.TIMEOUT,this.url||""),!1;this.joinResponse=_o,this.emit(CE.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=O0.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new U_(k_.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const _r=yL(this,CE.REQUEST_REJOIN_INFO);_r.token=this.reconnectToken;const _o=await this.request(PE.REJOIN,_r);return!!_o&&(this.connectionState=O0.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),_o.peers&&_o.peers.forEach(_a=>{this.emit(XE.ON_USER_ONLINE,{uid:_a.uid}),_a.audio&&this.emit(XE.ON_ADD_AUDIO_STREAM,{uid:_a.uid,uint_id:_a.uint_id,audio:!0,ssrcId:_a.audio_ssrc}),_a.video&&this.emit(XE.ON_ADD_VIDEO_STREAM,{uid:_a.uid,uint_id:_a.uint_id,video:!0,ssrcId:_a.video_ssrc}),_a.audio_mute?this.emit(XE.MUTE_AUDIO,{uid:_a.uid}):this.emit(XE.UNMUTE_AUDIO,{uid:_a.uid}),_a.video_mute?this.emit(XE.MUTE_VIDEO,{uid:_a.uid}):this.emit(XE.UNMUTE_VIDEO,{uid:_a.uid}),_a.audio_enable_local?this.emit(XE.ENABLE_LOCAL_AUDIO,{uid:_a.uid}):this.emit(XE.DISABLE_LOCAL_AUDIO,{uid:_a.uid}),_a.video_enable_local?this.emit(XE.ENABLE_LOCAL_VIDEO,{uid:_a.uid}):this.emit(XE.DISABLE_LOCAL_VIDEO,{uid:_a.uid}),_a.audio||_a.video||this.emit(XE.ON_REMOVE_STREAM,{uid:_a.uid,uint_id:_a.uint_id})}),!0)}reconnect(_r,_o){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(_r,_o)}handleNotification(_r){E_.debug("[".concat(this.clientId,"] receive notification: "),_r);const _o=wU(_r.code);if(_o.action!=="success"){if(_o.action!=="failed")return _o.action==="quit"?(_o.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(w0.UID_BANNED),void this.close()):void this.reconnect(_o.action,pO.SERVER_ERROR);E_.error("[".concat(this.clientId,"] ignore error: "),_o.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const _r=J_("PING_PONG_TIME_OUT"),_o=Date.now();this.pingpongTimeoutCount>=_r&&(E_.warning("PINGPONG Timeout. Last Socket Message: ".concat(_o-this.lastMsgTime,"ms")),_o-this.lastMsgTime>J_("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",pO.TIMEOUT):this.request(PE.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const _a=Date.now()-_o;this.rttRolling.add(_a),J_("REPORT_STATS")&&this.send(PE.PING_BACK,{pingpongElapse:_a})}).catch(_a=>{})}handleInflateData(){const{inflateLength:_r,deflateLength:_o}=this.websocket.getInflateData();_r!==0&&_o!==0&&this.upload(zT.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:_o,ws_inflate_length:_r})}handleWebsocketEvents(){this.websocket.on(sS.RECONNECT_WAITTING_FINISH,_r=>{this.emit(CE.WS_RECONNECT_WAITTING_FINISH,_r)}),this.websocket.on(sS.RECONNECT_CREATE_CONNECTION,_r=>{this.emit(CE.WS_RECONNECT_CREATE_CONNECTION,_r)}),this.websocket.on(sS.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(sS.CLOSED,()=>{this.connectionState=O0.CLOSED}),this.websocket.on(sS.FAILED,()=>{this._disconnectedReason=w0.NETWORK_ERROR,this.connectionState=O0.CLOSED}),this.websocket.on(sS.RECONNECTING,_r=>{this._websocketReconnectReason=_r,this.joinResponse=void 0,this.connectionState===O0.CONNECTED?this.connectionState=O0.RECONNECTING:this.connectionState=O0.CONNECTING}),this.websocket.on(sS.WILL_RECONNECT,(_r,_o)=>{if(yL(this,CE.IS_P2P_DISCONNECTED)&&_r==="retry")return E_.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(CE.NEED_RENEW_SESSION),this.emit(CE.DISCONNECT_P2P),_o("tryNext");_r!=="retry"&&(E_.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(_r)),this.reconnectToken=void 0,this.emit(CE.NEED_RENEW_SESSION),this.emit(CE.DISCONNECT_P2P)),_o(_r)}),this.websocket.on(sS.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(_r=>{E_.warning("[".concat(this.clientId,"] rejoin failed ").concat(_r)),this.reconnect("tryNext",pO.SERVER_ERROR)}):this.join().catch(_r=>{if(this.emit(CE.REPORT_JOIN_GATEWAY,_r.message||_r.code,this.url||""),_r instanceof U_&&_r.code===k_.UNEXPECTED_RESPONSE&&_r.data.code===LE.ERR_NO_AUTHORIZED)return E_.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",pO.SERVER_ERROR);E_.error("[".concat(this.clientId,"] join gateway request failed"),_r.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",pO.SERVER_ERROR):(this.initError=_r,this.close())})}),this.websocket.on(sS.REQUEST_NEW_URLS,(_r,_o)=>{hT(this,CE.REQUEST_RECOVER,this.multiIpOption).then(_r).catch(_o)}),this.websocket.on(sS.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(XE.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}),this.websocket.on(sS.TO_CONNECT_DATACHANNEL,async(_r,_o,_a)=>hT(this,CE.DATACHANNEL_PRECONNECT,_r).then(_o).catch(_a)),this.websocket.on(sS.FAILBACK,()=>{this.openConnectionTime!==void 0&&this.emit(CE.DATACHANNEL_FAILBACK)})}}function I6(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function gO(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?I6(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):I6(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}const EH=new Map;class v9 extends lS{get state(){return this._state}set state(_r){if(_r===this._state)return;const _o=this._state;this._state=_r,_r==="DISCONNECTED"&&this._disconnectedReason?this.emit(eS.CONNECTION_STATE_CHANGE,_r,_o,this._disconnectedReason):this.emit(eS.CONNECTION_STATE_CHANGE,_r,_o)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(_r){E_.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(_r)),this._joinGatewayStartTime=_r}constructor(_r,_o){super(),p_(this,"store",void 0),p_(this,"joinInfo",void 0),p_(this,"key",void 0),p_(this,"signal",void 0),p_(this,"role",void 0),p_(this,"inChannelInfo",{joinAt:null,duration:0}),p_(this,"spec",void 0),p_(this,"_state","DISCONNECTED"),p_(this,"_statsCollector",void 0),p_(this,"_disconnectedReason",void 0),p_(this,"isSignalRecover",!1),p_(this,"hasChangeBGPAddress",!1),p_(this,"trafficStatsInterval",void 0),p_(this,"networkQualityInterval",void 0),p_(this,"_joinGatewayStartTime",0),p_(this,"_signalTimeout",!1),p_(this,"_clientRoleOptions",void 0),p_(this,"_isProactiveJoin",!1),this.store=_r,this.spec=_o,this.signal=this.store.useDataChannel?new ZO(gO(gO({},_o),{},{retryConfig:_o.websocketRetryConfig}),_r):new b6(gO(gO({},_o),{},{retryConfig:_o.websocketRetryConfig}),_r),this._statsCollector=_o.statsCollector,this.role=_o.role||"audience",this._clientRoleOptions=_o.clientRoleOptions,this.handleSignalEvents()}async join(_r,_o,_a){if(this.signal instanceof ZO){let r_=!1;_r.cloudProxyServer!=="disabled"?(E_.debug("[".concat(this.store.clientId,"] Dc is not supported, because cloudProxyServer are not supported (").concat(_r.cloudProxyServer,")")),r_=!0):"".concat(_r.apResponse.cid,"_").concat(_r.apResponse.cert).length>255||"".concat(_r.apResponse.cid,"_").concat(_r.apResponse.cert).length<22?(E_.debug("[".concat(this.store.clientId,"] Dc is not supported, because ticket length is incorrect, it has to be between 22 and 255")),r_=!0):_r.apResponse.addresses.some(o_=>o_.fingerprint)||J_("FINGERPRINT")||(E_.debug("[".concat(this.store.clientId,"] Dc is not supported, because fingerprint does not exist")),r_=!0),r_&&this.resetSignal()}this.store.joinGatewayStart(),_r.cloudProxyServer!=="disabled"&&(this.hasChangeBGPAddress=!0);const _u=Date.now();let _p=EH.get(_r.cname);if(_p||(_p=new Map,EH.set(_r.cname,_p)),this._isProactiveJoin=!0,_p.has(_r.uid)){const r_=new U_(k_.UID_CONFLICT);throw AE.joinGateway(_r.sid,{lts:_u,succ:!1,ec:r_.message,addr:null,uid:_r.uid,cid:_r.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!_r.proxyServer,signalChannel:this.signal instanceof ZO?"1":"0"}),this._isProactiveJoin=!1,r_}_p.set(_r.uid,!0),this.joinInfo=_r,this.key=_o;let _f=0;this.joinGatewayStartTime=_u;const n_=_r.proxyServer;try{let r_;if(E_.debug("[".concat(this.store.clientId,"] use ").concat(this.signal instanceof ZO?"datachannel":"websocket"," join uid ").concat(_f)),this.signal instanceof ZO)r_=await this.signal.init(_r.apResponse.addresses,_a);else{const o_=_r.proxyServer,s_=o_?_r.gatewayAddrs.map(u_=>{const g_=u_.address.split(":");return"wss://".concat(o_,"/ws/?h=").concat(g_[0],"&p=").concat(g_[1])}):_r.gatewayAddrs.map(u_=>"wss://".concat(u_.address));r_=await this.signal.init(s_,_a)}_f=r_.uid,E_.debug("[".concat(this.store.clientId,"] ").concat(this.signal instanceof ZO?"datachannel":"websocket"," join uid ").concat(_f," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(r_){throw r_&&r_.code===k_.INIT_WEBSOCKET_TIMEOUT?(E_.warning("[".concat(this.store.clientId,"] User join failed"),r_.toString()),r_):r_&&r_.code===k_.INIT_DATACHANNEL_TIMEOUT?(E_.warning("[".concat(this.store.clientId,"] User join datachannel failed"),r_.toString()),this.resetSignal(),r_):(E_.error("[".concat(this.store.clientId,"] User join failed"),r_.toString()),AE.joinGateway(_r.sid,{lts:_u,succ:!1,ec:r_.message,addr:this.signal.url,uid:_r.uid,cid:_r.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!n_,signalChannel:this.signal instanceof ZO?"1":"0"}),this._isProactiveJoin=!1,_p.delete(_r.uid),this.signal.close(),r_)}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),E_.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval(()=>{this.updateTrafficStats().catch(r_=>{E_.warning("[".concat(this.store.clientId,"] get traffic stats error"),r_.toString())})},3e3),this.networkQualityInterval=window.setInterval(()=>{navigator&&navigator.onLine!==void 0&&!navigator.onLine?this.emit(eS.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(eS.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):this.state==="CONNECTED"&&this._statsCollector.trafficStats?this.emit(eS.NETWORK_QUALITY,{uplinkNetworkQuality:d6(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:d6(this._statsCollector.trafficStats.B_dnq)}):this.emit(eS.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),this.store.joinGatewayEnd(),_f}async leave(){let _r=arguments.length>0&&arguments[0]!==void 0&&arguments[0],_o=arguments.length>1?arguments[1]:void 0;if(this.state!=="DISCONNECTED"){_o!==w0.FALLBACK&&(this.state="DISCONNECTING");try{_r||this.signal.connectionState!==O0.CONNECTED||await function(_a,_u){return _u===1/0?_a:uE.race([_a,p9(_u)])}(this.signal.request(PE.LEAVE,void 0,!0),3e3)}catch(_a){E_.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),_a)}this.signal.close(_o),_o!==w0.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(_r,_o,_a){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new U_(k_.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const _u={state:"offer",p2p_id:this.store.p2pId,ortc:_o,mode:this.spec.mode,extend:J_("PUB_EXTEND"),twcc:!!J_("PUBLISH_TWCC")};try{return(await this.signal.request(PE.PUBLISH,_u,!0))._message}catch(_p){if(_a&&_p.data&&_p.data.code===LE.ERR_PUBLISH_REQUEST_INVALID)return E_.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),_p.toString()),await this.tryUnpubBeforeRepub(_r,_o),this.publish(_r,_o,!1);throw _p}}async unpublish(_r,_o){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new U_(k_.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(PE.UNPUBLISH,{stream_id:_o,ortc:_r},!0)}catch(_a){E_.warning("unpublish warning: ",_a)}}async subscribe(_r,_o,_a){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new U_(k_.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));const _u={stream_id:_r,stream_type:_o.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!J_("SUBSCRIBE_TWCC"),extend:J_("SUB_EXTEND"),ssrcId:_o.ssrcId};try{return(await this.signal.request(PE.SUBSCRIBE,_u,!0))._message}catch(_p){if(_a&&_p.data&&_p.data.code===LE.ERR_SUBSCRIBE_REQUEST_INVALID)return E_.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),_p.toString()),await this.tryUnsubBeforeResub(_r,_o),await this.subscribe(_r,_o,!1);throw _p}}async subscribeAll(_r,_o){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new U_(k_.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));const _a={p2p_id:this.store.p2pId,users:_r,dtx:!1};try{return await this.signal.request(PE.SUBSCRIBE_STREAMS,_a,!0)}catch(_u){if(_o&&_u.data&&_u.data.code===LE.ERR_SUBSCRIBE_REQUEST_INVALID)return E_.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),_u.toString()),await this.tryMassUnsubBeforeResub(_r),await this.subscribeAll(_r,!1);throw _u}}async setVideoProfile(_r){const _o=function(_a){if(!(_a.bitrateMax&&_a.bitrateMin&&_a.frameRate&&_a.height&&_a.width))return;let _u=_a.frameRate,_p=_a.width,_f=_a.height,n_=!0;return typeof _u!="number"&&(_u=_u.exact||_u.ideal||_u.max||_u.min||0,_u||(n_=!1)),typeof _p!="number"&&(_p=_p.exact||_p.ideal||_p.max||_p.min||0,_p||(n_=!1)),typeof _f!="number"&&(_f=_f.exact||_f.ideal||_f.max||_f.min||0,_u||(n_=!1)),n_?{stream_type:0,width:_p,height:_f,fps:_u,start_bps:1e3*_a.bitrateMax,min_bps:1e3*_a.bitrateMin,target_bps:1e3*_a.bitrateMax}:void 0}(_r);if(_o)return this.signal.request(PE.SET_VIDEO_PROFILE,_o);E_.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(_r,_o){try{await this.signal.request(PE.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:_r,stream_id:_o},!0)}catch(_a){E_.warning("unsubscribe warning: ",_a)}}async massUnsubscribe(_r){try{await this.signal.request(PE.UNSUBSCRIBE_STREAMS,_r,!0)}catch(_o){E_.warning("unsubscribeAll warning: ",_o)}}async reconnectPC(_r){const{iceParameters:_o,dtlsParameters:_a,rtpCapabilities:_u}=_r;return{gatewayEstablishParams:await this.signal.request(PE.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:_o,dtlsParameters:_a,rtpCapabilities:_u}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(PE.GATEWAY_INFO)}renewToken(_r){return this.signal.request(PE.RENEW_TOKEN,_r)}async setClientRole(_r,_o){if(_o&&(this._clientRoleOptions=Object.assign({},_o)),this.state!=="CONNECTED")return void(this.role=_r);let _a;_a=_r==="audience"?this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:0,await this.signal.request(PE.SET_CLIENT_ROLE,{role:_r,level:_a,client_ts:Date.now()}),this.role=_r}async setRemoteVideoStreamType(_r,_o){await this.signal.request(PE.SWITCH_VIDEO_STREAM,{stream_id:_r,stream_type:_o})}async setDefaultRemoteVideoStreamType(_r){await this.signal.request(PE.DEFAULT_VIDEO_STREAM,{stream_type:_r})}async setStreamFallbackOption(_r,_o){await this.signal.request(PE.SET_FALLBACK_OPTION,{stream_id:_r,fallback_type:_o})}async pickSVCLayer(_r,_o){await this.signal.request(PE.PICK_SVC_LAYER,{stream_id:_r,spatial_layer:_o.spatialLayer,temporal_layer:_o.temporalLayer})}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),gO({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(PE.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const _r=EH.get(this.joinInfo.cname);_r&&_r.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const _r=function(_o){let _a;return _a=_o.startsWith("dc")?_o.match(/(dc\:\/\/)?([^:]+):(\d+)/):_o.match(/(wss\:\/\/)?([^:]+):(\d+)/),_a?{username:ER.username,password:ER.password,turnServerURL:_a[2],tcpport:parseInt(_a[3])+30,udpport:parseInt(_a[3])+30,forceturn:!1}:null}((this.joinInfo.cloudProxyServer==="disabled"?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],_r&&this.joinInfo.turnServer.mode!=="off"&&this.joinInfo.cloudProxyServer==="disabled"&&this.joinInfo.turnServer.serversFromGateway.push(gO(gO({},ER),{},{turnServerURL:_r.turnServerURL,tcpport:_r.tcpport,udpport:_r.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if(this.state!=="CONNECTED")return;const _r=await this.signal.request(PE.TRAFFIC_STATS,void 0,!0);_r.timestamp=Date.now(),_r.peer_delay.forEach(_o=>{const _a=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find(_u=>_u.peer_uid===_o.peer_uid);_a&&_a.B_st!==_o.B_st&&mI(()=>{this.emit(eS.STREAM_TYPE_CHANGE,_o.peer_uid,_o.B_st)})}),this._statsCollector.updateTrafficStats(_r)}getJoinMessage(_r){if(!this.joinInfo||!this.key)throw new U_(k_.UNEXPECTED_ERROR,"can not generate join message, no join info");const _o=Object.assign({},this.joinInfo.apResponse);let _a=J_("REPORT_APP_SCENARIO");if(typeof _a!="string")try{_a=JSON.stringify(_a)}catch{_a=void 0}_a&&_a.length>128&&(_a=void 0);const _u=gO({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:$R,browser:navigator.userAgent,process_id:J_("PROCESS_ID"),mode:this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:_o,extend:J_("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:this.joinInfo.cloudProxyServer==="proxy3"?"1":this.joinInfo.cloudProxyServer==="proxy5"?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:_a,attributes:{userAttributes:{enablePublishedUserList:J_("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:J_("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:typeof J_("SUBSCRIBE_AUDIO_FILTER_TOPN")=="number"?J_("SUBSCRIBE_AUDIO_FILTER_TOPN"):void 0,enablePublishAudioFilter:typeof J_("ENABLE_PUBLISH_AUDIO_FILTER")=="boolean"?J_("ENABLE_PUBLISH_AUDIO_FILTER"):void 0,enableUserLicenseCheck:typeof J_("ENABLE_USER_LICENSE_CHECK")=="boolean"?J_("ENABLE_USER_LICENSE_CHECK"):void 0}},join_ts:this.joinGatewayStartTime},_r);return this.joinInfo.stringUid&&(_u.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(_u.aes_mode=this.joinInfo.aesmode,J_("ENCRYPT_AES")?(_u.aes_secret=this.joinInfo.aespassword,_u.aes_encrypt=!0):_u.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(_u.aes_salt=this.joinInfo.aessalt)),_o.addresses[this.signal.websocket.currentURLIndex]&&(_u.ap_response.ticket=_o.addresses[this.signal.websocket.currentURLIndex].ticket,delete _o.addresses),this.joinInfo.defaultVideoStream!==void 0&&(_u.default_video_stream=this.joinInfo.defaultVideoStream),_u}getRejoinMessage(){if(!this.joinInfo)throw new U_(k_.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(CE.WS_RECONNECT_WAITTING_FINISH,_r=>{["tryNext","recover"].includes(_r)&&this.joinInfo&&AE.adjustSessionStartTime(this.joinInfo.sid)}),this.signal.on(CE.WS_RECONNECT_CREATE_CONNECTION,_r=>{this.joinGatewayStartTime=Date.now()}),this.signal.on(CE.WS_RECONNECTING,_r=>{this.joinInfo&&AE.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:_r||PT.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",AE.sessionInit(this.joinInfo.sid,{lts:new Date().getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on(CE.WS_CLOSED,_r=>{let _o;switch(_r){case w0.LEAVE:_o=PT.LEAVE;break;case w0.UID_BANNED:case w0.IP_BANNED:case w0.CHANNEL_BANNED:case w0.SERVER_ERROR:_o=PT.SERVER_ERROR;break;case w0.FALLBACK:_o=PT.FALLBACK;break;case w0.LICENSE_MISSING:case w0.LICENSE_EXPIRED:case w0.LICENSE_MINUTES_EXCEEDED:case w0.LICENSE_PERIOD_INVALID:case w0.LICENSE_MULTIPLE_SDK_SERVICE:case w0.LICENSE_ILLEGAL:_o=_r;break;default:_o=PT.NETWORK_ERROR}E_.debug("[signal] websocket closed, reason: ".concat(_o||"undefined -> "+PT.NETWORK_ERROR)),this.joinInfo&&AE.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:_r===w0.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:_o}),this._disconnectedReason=_r,_r!==w0.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on(CE.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&(this.role==="audience"&&this._clientRoleOptions&&this._clientRoleOptions.level&&(E_.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),this.setClientRole(this.role,this._clientRoleOptions)),AE.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof ZO?"1":"0"}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&this.joinInfo.setLocalAPVersion===1)){const _r=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!_r)return void E_.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(_r));P0("EVENT_REPORT_DOMAIN",_r[1]),P0("EVENT_REPORT_BACKUP_DOMAIN",_r[1]),P0("LOG_UPLOAD_SERVER","".concat(_r[1],":6444"))}}),this.signal.on(XE.ON_UPLINK_STATS,_r=>{this._statsCollector.updateUplinkStats(_r)}),this.signal.on(CE.REQUEST_RECOVER,(_r,_o,_a)=>{if(!this.joinInfo)return _a(new U_(k_.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));_r&&(this.joinInfo.multiIP=_r,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,hT(this,eS.REQUEST_NEW_GATEWAY_LIST).then(_o).catch(_a)}),this.signal.on(CE.REQUEST_JOIN_INFO,async _r=>{var _o;this.updateTurnConfigFromSignal();const{iceParameters:_a,dtlsParameters:_u,rtpCapabilities:_p}=await hT(this,eS.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:(_o=this.joinInfo)===null||_o===void 0?void 0:_o.turnServer});_r(this.getJoinMessage({ortc:{iceParameters:_a,dtlsParameters:_u,rtpCapabilities:_p,version:"2"}}))}),this.signal.on(CE.REQUEST_REJOIN_INFO,_r=>{_r(this.getRejoinMessage())}),this.signal.on(CE.REPORT_JOIN_GATEWAY,(_r,_o)=>{this.joinInfo&&(AE.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:_r,addr:_o,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof ZO?"1":"0"}),this._isProactiveJoin=!1)}),this.signal.on(CE.IS_P2P_DISCONNECTED,_r=>{_r(yL(this,eS.IS_P2P_DISCONNECTED))}),this.signal.on(CE.DISCONNECT_P2P,()=>{this.emit(eS.DISCONNECT_P2P)}),this.signal.on(CE.NEED_RENEW_SESSION,()=>{this.emit(eS.NEED_RENEW_SESSION)}),this.signal.on(CE.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(CE.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(CE.JOIN_RESPONSE,_r=>{const _o=this.getCurrentGatewayAddress();this.emit(eS.JOIN_RESPONSE,_r,_o)}),this.signal.on(CE.DATACHANNEL_PRECONNECT,async(_r,_o,_a)=>{this.updateTurnConfigFromSignal();const _u=this.getCurrentGatewayAddress();return hT(this,eS.DATACHANNEL_PRECONNECT,_r,_u).then(_o).catch(_a)}),this.signal.on(CE.DATACHANNEL_CONNECTING,async _r=>{const{iceParameters:_o,dtlsParameters:_a,rtpCapabilities:_u}=await hT(this,eS.REQUEST_DC_CONNECTION_PARAMS);_r(this.getJoinMessage({ortc:{iceParameters:_o,dtlsParameters:_a,rtpCapabilities:_u,version:"2"}}))}),this.signal.on(CE.DATACHANNEL_FAILBACK,()=>{E_.warning("[".concat(this.store.clientId,"] User join datachannel failed")),this.reset(),this.resetSignal(),this.emit(eS.DATACHANNEL_FAILBACK)})}async tryUnsubBeforeResub(_r,_o){try{await this.signal.request(PE.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:_r,ortc:[_o]},!0)}catch(_a){throw E_.warning("unsubscribe warning",_a),_a}}async tryUnpubBeforeRepub(_r,_o){try{await this.signal.request(PE.UNPUBLISH,{stream_id:_r,ortc:_o},!0)}catch(_a){throw E_.warning("unpublish warning: ",_a),_a}}async tryMassUnsubBeforeResub(_r){const _o={users:_r.map(_a=>({stream_id:_a.stream_id,stream_type:_a.stream_type}))};try{await this.signal.request(PE.UNSUBSCRIBE_STREAMS,_o,!0)}catch(_a){throw E_.warning("massUnsubscribe warning",_a),_a}}async muteLocal(_r,_o){const _a={action:_r.find(_u=>_u.stream_type===RS.Audio)?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:_r,stream_id:_o};try{await this.signal.request(PE.CONTROL,_a,!0,!0)}catch(_u){throw E_.warning("gateway unmuteLocal warning: ",_u),_u}}async unmuteLocal(_r,_o){const _a={action:_r.find(_u=>_u.stream_type===RS.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:_r,stream_id:_o};try{await this.signal.request(PE.CONTROL,_a,!0,!0)}catch(_u){throw E_.warning("gateway muteLocal warning: ",_u),_u}}uploadStats(_r,_o){this.signal.upload(_r,_o)}getSignalRTT(){return this.signal.rtt}async restartICE(_r){const _o={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:_r};try{return await this.signal.request(PE.RESTART_ICE,_o,!0)}catch(_a){throw E_.warning("P2PChannel.restartICE warning: ",_a),_a}}reconnect(){this.state==="CONNECTED"&&this.signal.reconnect(void 0,PT.P2P_FAILED)}getCurrentGatewayAddress(){var _r;if(!J_("GATEWAY_WSS_ADDRESS"))return(_r=this.joinInfo)!==null&&_r!==void 0&&_r.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(_r){await this.signal.request(PE.SET_PARAMETER,{enablePublishAudioFilter:_r})}resetSignal(){this.signal&&(this.signal.removeAllListeners(),this.signal.close(w0.FALLBACK)),this.store.useDataChannel=!1,this.signal=new b6(gO(gO({},this.spec),{},{retryConfig:this.spec.websocketRetryConfig}),this.store),this.handleSignalEvents(),this.emit(eS.RESET_SIGNAL,gF.websocket)}}/*! formdata-polyfill. MIT License. Jimmy W?rting <https://jimmy.warting.se/opensource> */(function(){var _n;function _r(tE){var sE=0;return function(){return sE<tE.length?{done:!1,value:tE[sE++]}:{done:!0}}}var _o=typeof Object.defineProperties=="function"?Object.defineProperty:function(tE,sE,bE){return tE==Array.prototype||tE==Object.prototype||(tE[sE]=bE.value),tE},_a,_u=function(tE){tE=[typeof globalThis=="object"&&globalThis,tE,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vt=="object"&&Vt];for(var sE=0;sE<tE.length;++sE){var bE=tE[sE];if(bE&&bE.Math==Math)return bE}throw Error("Cannot find global object")}(this);function _p(tE,sE){if(sE)e:{var bE=_u;tE=tE.split(".");for(var FE=0;FE<tE.length-1;FE++){var p0=tE[FE];if(!(p0 in bE))break e;bE=bE[p0]}(sE=sE(FE=bE[tE=tE[tE.length-1]]))!=FE&&sE!=null&&_o(bE,tE,{configurable:!0,writable:!0,value:sE})}}function _f(tE){return(tE={next:tE})[Symbol.iterator]=function(){return this},tE}function n_(tE){var sE=typeof Symbol<"u"&&Symbol.iterator&&tE[Symbol.iterator];return sE?sE.call(tE):{next:_r(tE)}}if(_p("Symbol",function(tE){function sE(p0,pE){this.A=p0,_o(this,"description",{configurable:!0,writable:!0,value:pE})}if(tE)return tE;sE.prototype.toString=function(){return this.A};var bE="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",FE=0;return function p0(pE){if(this instanceof p0)throw new TypeError("Symbol is not a constructor");return new sE(bE+(pE||"")+"_"+FE++,pE)}}),_p("Symbol.iterator",function(tE){if(tE)return tE;tE=Symbol("Symbol.iterator");for(var sE="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),bE=0;bE<sE.length;bE++){var FE=_u[sE[bE]];typeof FE=="function"&&typeof FE.prototype[tE]!="function"&&_o(FE.prototype,tE,{configurable:!0,writable:!0,value:function(){return _f(_r(this))}})}return tE}),typeof Object.setPrototypeOf=="function")_a=Object.setPrototypeOf;else{var r_;e:{var o_={};try{o_.__proto__={a:!0},r_=o_.a;break e}catch{}r_=!1}_a=r_?function(tE,sE){if(tE.__proto__=sE,tE.__proto__!==sE)throw new TypeError(tE+" is not extensible");return tE}:null}var s_=_a;function u_(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function g_(tE){if(tE.m)throw new TypeError("Generator is already running");tE.m=!0}function w_(tE,sE){return tE.h=3,{value:sE}}function D_(tE){this.g=new u_,this.G=tE}function M_(tE,sE,bE,FE){try{var p0=sE.call(tE.g.j,bE);if(!(p0 instanceof Object))throw new TypeError("Iterator result "+p0+" is not an object");if(!p0.done)return tE.g.m=!1,p0;var pE=p0.value}catch(m_){return tE.g.j=null,tE.g.s(m_),P_(tE)}return tE.g.j=null,FE.call(tE.g,pE),P_(tE)}function P_(tE){for(;tE.g.h;)try{var sE=tE.G(tE.g);if(sE)return tE.g.m=!1,{value:sE.value,done:!1}}catch(bE){tE.g.v=void 0,tE.g.s(bE)}if(tE.g.m=!1,tE.g.l){if(sE=tE.g.l,tE.g.l=null,sE.F)throw sE.D;return{value:sE.return,done:!0}}return{value:void 0,done:!0}}function _g(tE){this.next=function(sE){return tE.o(sE)},this.throw=function(sE){return tE.s(sE)},this.return=function(sE){return function(bE,FE){g_(bE.g);var p0=bE.g.j;return p0?M_(bE,"return"in p0?p0.return:function(pE){return{value:pE,done:!0}},FE,bE.g.return):(bE.g.return(FE),P_(bE))}(tE,sE)},this[Symbol.iterator]=function(){return this}}function _y(tE,sE){return sE=new _g(new D_(sE)),s_&&tE.prototype&&s_(sE,tE.prototype),sE}if(u_.prototype.o=function(tE){this.v=tE},u_.prototype.s=function(tE){this.l={D:tE,F:!0},this.h=this.C||this.u},u_.prototype.return=function(tE){this.l={return:tE},this.h=this.u},D_.prototype.o=function(tE){return g_(this.g),this.g.j?M_(this,this.g.j.next,tE,this.g.o):(this.g.o(tE),P_(this))},D_.prototype.s=function(tE){return g_(this.g),this.g.j?M_(this,this.g.j.throw,tE,this.g.o):(this.g.s(tE),P_(this))},_p("Array.prototype.entries",function(tE){return tE||function(){return function(sE,bE){sE instanceof String&&(sE+="");var FE=0,p0=!1,pE={next:function(){if(!p0&&FE<sE.length){var m_=FE++;return{value:bE(m_,sE[m_]),done:!1}}return p0=!0,{done:!0,value:void 0}}};return pE[Symbol.iterator]=function(){return pE},pE}(this,function(sE,bE){return[sE,bE]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var hE=function(tE,sE){for(var bE=0;bE<tE.length;bE++)sE(tE[bE])},NE=function(tE){return tE.replace(/\r?\n|\r/g,`\r
`)},mE=function(tE,sE,bE){return sE instanceof Blob?(bE=bE!==void 0?bE+"":typeof sE.name=="string"?sE.name:"blob",sE.name===bE&&Object.prototype.toString.call(sE)!=="[object Blob]"||(sE=new File([sE],bE)),[String(tE),sE]):[String(tE),String(sE)]},_E=function(tE,sE){if(tE.length<sE)throw new TypeError(sE+" argument required, but only "+tE.length+" present.")},dE=typeof globalThis=="object"?globalThis:typeof window=="object"?window:typeof self=="object"?self:this,IE=dE.FormData,j0=dE.XMLHttpRequest&&dE.XMLHttpRequest.prototype.send,GE=dE.Request&&dE.fetch,z0=dE.navigator&&dE.navigator.sendBeacon,$0=dE.Element&&dE.Element.prototype,fS=dE.Symbol&&Symbol.toStringTag;fS&&(Blob.prototype[fS]||(Blob.prototype[fS]="Blob"),"File"in dE&&!File.prototype[fS]&&(File.prototype[fS]="File"));try{new File([],"")}catch{dE.File=function(sE,bE,FE){return sE=new Blob(sE,FE||{}),Object.defineProperties(sE,{name:{value:bE},lastModified:{value:+(FE&&FE.lastModified!==void 0?new Date(FE.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),fS&&Object.defineProperty(sE,fS,{value:"File"}),sE}}var XS=function(tE){return tE.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},pS=function(tE){this.i=[];var sE=this;tE&&hE(tE.elements,function(bE){if(bE.name&&!bE.disabled&&bE.type!=="submit"&&bE.type!=="button"&&!bE.matches("form fieldset[disabled] *"))if(bE.type==="file"){var FE=bE.files&&bE.files.length?bE.files:[new File([],"",{type:"application/octet-stream"})];hE(FE,function(p0){sE.append(bE.name,p0)})}else bE.type==="select-multiple"||bE.type==="select-one"?hE(bE.options,function(p0){!p0.disabled&&p0.selected&&sE.append(bE.name,p0.value)}):bE.type==="checkbox"||bE.type==="radio"?bE.checked&&sE.append(bE.name,bE.value):(FE=bE.type==="textarea"?NE(bE.value):bE.value,sE.append(bE.name,FE))})};if((_n=pS.prototype).append=function(tE,sE,bE){_E(arguments,2),this.i.push(mE(tE,sE,bE))},_n.delete=function(tE){_E(arguments,1);var sE=[];tE=String(tE),hE(this.i,function(bE){bE[0]!==tE&&sE.push(bE)}),this.i=sE},_n.entries=function tE(){var sE,bE=this;return _y(tE,function(FE){if(FE.h==1&&(sE=0),FE.h!=3)return sE<bE.i.length?FE=w_(FE,bE.i[sE]):(FE.h=0,FE=void 0),FE;sE++,FE.h=2})},_n.forEach=function(tE,sE){_E(arguments,1);for(var bE=n_(this),FE=bE.next();!FE.done;FE=bE.next()){var p0=n_(FE.value);FE=p0.next().value,p0=p0.next().value,tE.call(sE,p0,FE,this)}},_n.get=function(tE){_E(arguments,1);var sE=this.i;tE=String(tE);for(var bE=0;bE<sE.length;bE++)if(sE[bE][0]===tE)return sE[bE][1];return null},_n.getAll=function(tE){_E(arguments,1);var sE=[];return tE=String(tE),hE(this.i,function(bE){bE[0]===tE&&sE.push(bE[1])}),sE},_n.has=function(tE){_E(arguments,1),tE=String(tE);for(var sE=0;sE<this.i.length;sE++)if(this.i[sE][0]===tE)return!0;return!1},_n.keys=function tE(){var sE,bE,FE,p0,pE=this;return _y(tE,function(m_){if(m_.h==1&&(sE=n_(pE),bE=sE.next()),m_.h!=3)return bE.done?void(m_.h=0):(FE=bE.value,p0=n_(FE),w_(m_,p0.next().value));bE=sE.next(),m_.h=2})},_n.set=function(tE,sE,bE){_E(arguments,2),tE=String(tE);var FE=[],p0=mE(tE,sE,bE),pE=!0;hE(this.i,function(m_){m_[0]===tE?pE&&(pE=!FE.push(p0)):FE.push(m_)}),pE&&FE.push(p0),this.i=FE},_n.values=function tE(){var sE,bE,FE,p0,pE=this;return _y(tE,function(m_){if(m_.h==1&&(sE=n_(pE),bE=sE.next()),m_.h!=3)return bE.done?void(m_.h=0):(FE=bE.value,(p0=n_(FE)).next(),w_(m_,p0.next().value));bE=sE.next(),m_.h=2})},pS.prototype._asNative=function(){for(var tE=new IE,sE=n_(this),bE=sE.next();!bE.done;bE=sE.next()){var FE=n_(bE.value);bE=FE.next().value,FE=FE.next().value,tE.append(bE,FE)}return tE},pS.prototype._blob=function(){var tE="----formdata-polyfill-"+Math.random(),sE=[],bE="--"+tE+`\r
Content-Disposition: form-data; name="`;return this.forEach(function(FE,p0){return typeof FE=="string"?sE.push(bE+XS(NE(p0))+`"\r
\r
`+NE(FE)+`\r
`):sE.push(bE+XS(NE(p0))+'"; filename="'+XS(FE.name)+`"\r
Content-Type: `+(FE.type||"application/octet-stream")+`\r
\r
`,FE,`\r
`)}),sE.push("--"+tE+"--"),new Blob(sE,{type:"multipart/form-data; boundary="+tE})},pS.prototype[Symbol.iterator]=function(){return this.entries()},pS.prototype.toString=function(){return"[object FormData]"},$0&&!$0.matches&&($0.matches=$0.matchesSelector||$0.mozMatchesSelector||$0.msMatchesSelector||$0.oMatchesSelector||$0.webkitMatchesSelector||function(tE){for(var sE=(tE=(this.document||this.ownerDocument).querySelectorAll(tE)).length;0<=--sE&&tE.item(sE)!==this;);return-1<sE}),fS&&(pS.prototype[fS]="FormData"),j0){var ZT=dE.XMLHttpRequest.prototype.setRequestHeader;dE.XMLHttpRequest.prototype.setRequestHeader=function(tE,sE){ZT.call(this,tE,sE),tE.toLowerCase()==="content-type"&&(this.B=!0)},dE.XMLHttpRequest.prototype.send=function(tE){tE instanceof pS?(tE=tE._blob(),this.B||this.setRequestHeader("Content-Type",tE.type),j0.call(this,tE)):j0.call(this,tE)}}GE&&(dE.fetch=function(tE,sE){return sE&&sE.body&&sE.body instanceof pS&&(sE.body=sE.body._blob()),GE.call(this,tE,sE)}),z0&&(dE.navigator.sendBeacon=function(tE,sE){return sE instanceof pS&&(sE=sE._asNative()),z0.call(this,tE,sE)}),dE.FormData=pS}})();const xF=()=>{const _n=J_("AREAS");return _n.length===0&&_n.push(a0.GLOBAL),ZR(_n).call(_n,(_r,_o,_a)=>{const _u=C6(_o);return _u?_a===0?_u:"".concat(_r,",").concat(_u):_r},"")},C6=_n=>_n===a0.OVERSEA?"".concat(FS.ASIA,",").concat(FS.EUROPE,",").concat(FS.AFRICA,",").concat(FS.NORTH_AMERICA,",").concat(FS.SOUTH_AMERICA,",").concat(FS.OCEANIA):FS[_n],y9=_n=>{const _r={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return _n.map(_o=>{const _a=vF[_o],_u=Object.keys(_a);_u&&_u.map(_p=>{_p!=="CODE"&&(_r[_p]=_r[_p].concat(_a[_p]))})}),_r},LF={GLOBAL:{ASIA:[a0.CHINA,a0.JAPAN,a0.INDIA,a0.KOREA,a0.HKMC],EUROPE:[],NORTH_AMERICA:[a0.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},bH=Object.keys(LF[a0.GLOBAL]),A6=[a0.CHINA,a0.NORTH_AMERICA,a0.EUROPE,a0.ASIA,a0.JAPAN,a0.INDIA,a0.OCEANIA,a0.SOUTH_AMERICA,a0.AFRICA,a0.KOREA,a0.HKMC,a0.US],E9=function(_n,_r){let _o=[];if(_n.includes(a0.GLOBAL)){const _p=[a0.GLOBAL,a0.OVERSEA],_f=Object.keys(vF);if(_r===a0.GLOBAL)throw new U_(k_.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(_r===a0.CHINA)_o=[a0.OVERSEA];else if(_u=_r,bH.includes(_u)){const n_=(_a=_r,LF[a0.GLOBAL][_a]||[]),r_=[..._p,_r,...n_];_o=_f.filter(o_=>!r_.includes(o_))}else if(function(n_){let r_=!1;return bH.forEach(o_=>{LF[a0.GLOBAL][o_].includes(n_)&&(r_=!0)}),r_}(_r)){const n_=function(o_){let s_;return bH.forEach(u_=>{LF[a0.GLOBAL][u_].includes(o_)&&(s_=u_)}),s_}(_r),r_=[..._p,n_,_r];_o=_f.filter(o_=>!r_.includes(o_))}else _o=_n;_o=function(n_){const r_=[];return A6.forEach(o_=>{n_.includes(o_)&&r_.push(o_)}),r_.concat(n_.filter(o_=>!A6.includes(o_)))}(_o)}else _o=_n;var _a,_u;return _o};function O6(_n){if(!_n&&J_("AREAS").includes(a0.EXTENSIONS))return E_.debug("update area from ap : reset"),void SH(m5,!0);if(!J_("AREAS").includes(a0.GLOBAL)||!_n)return;let _r=vF.EXTENSIONS;_r&&(_r={CODE:C6(a0.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(_n,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(_n,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(_n,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(_n,".agora.io"),"cds-ap-web-2-".concat(_n,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(_n,".agora.io"),"sua-ap-web-2-".concat(_n,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(_n,".agora.io"),"uap-ap-web-2-".concat(_n,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(_n,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(_n,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(_n,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(_n,".agora.io")]},E_.debug("update area from ap success: ".concat(_n,",config is "),_r),P0("AREAS",[a0.EXTENSIONS],!0),Object.keys(_r).map(_o=>{_o==="LOG_UPLOAD_SERVER"||_o==="EVENT_REPORT_DOMAIN"||_o==="EVENT_REPORT_BACKUP_DOMAIN"||_o==="PROXY_SERVER_TYPE3"?P0(_o,_r[_o][0]):P0(_o,_r[_o])}))}function SH(_n){let _r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const _o=AE.reportApiInvoke(null,{name:wS.SET_AREA,options:_n,tag:nS.TRACER});try{let _a=[];if(typeof _n=="string"&&(_a=[_n]),Array.isArray(_n)&&(_n.forEach(_p=>{if(!W7.includes(_p))throw new U_(k_.INVALID_PARAMS,"invalid area code")}),_a=_n),Object.prototype.toString.call(_n)==="[object Object]"){const{areaCode:_p,excludedArea:_f}=_n;if(!_p)throw new U_(k_.INVALID_PARAMS,"area code is needed");let n_=_p;typeof _p=="string"&&(n_=[_p]),_a=_f?E9(n_,_f):n_}if(!_r){if(dL.AREAS){const _p=new U_(k_.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return _o.onError(_p),void E_.warning("setArea is prohibited because of config-distribute")}if(_a.includes(a0.GLOBAL)&&J_("AREAS")===a0.EXTENSIONS){const _p=new U_(k_.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return _o.onError(_p),void E_.warning("setArea is prohibited because of ap extensions")}}P0("AREAS",_a,_r);const _u=y9(_a);Object.keys(_u).map(_p=>{_p==="LOG_UPLOAD_SERVER"||_p==="EVENT_REPORT_DOMAIN"||_p==="EVENT_REPORT_BACKUP_DOMAIN"||_p==="PROXY_SERVER_TYPE3"?P0(_p,_u[_p][0]):P0(_p,_u[_p])}),E_.debug("set area success:",_a.join(","))}catch(_a){throw _o.onError(_a),_a}_o.onSuccess()}function N6(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function k6(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?N6(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):N6(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}let wH=1;function b9(_n,_r,_o,_a,_u){wH+=1;const _p={sid:_o.sid,command:"convergeAllocateEdge",uid:"666",appId:_o.appId,ts:Math.floor(Date.now()/1e3),seq:wH,requestId:wH,version:$R,cname:_o.cname},_f={service_name:_r,json_body:JSON.stringify(_p)};let n_,r_,o_=_n[0];return hO(async()=>{n_=Date.now();const s_=await $I(o_,{data:_f,cancelToken:_a,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(r_=Date.now()-n_,s_.code!==0){const w_=new U_(k_.UNEXPECTED_RESPONSE,"live streaming ap error, code"+s_.code,{retry:!0,responseTime:r_});throw E_.error(w_.toString()),w_}const u_=JSON.parse(s_.json_body);if(u_.code!==200){const w_=new U_(k_.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(u_.code,", reason: ").concat(u_.reason),{code:u_.code,responseTime:r_});throw E_.error(w_.toString()),w_}if(!u_.servers||u_.servers.length===0){const w_=new U_(k_.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:u_.code,responseTime:r_});throw E_.error(w_.toString()),w_}const g_=function(w_,D_){return{addressList:w_.servers.map(M_=>"wss://".concat(M_.address.replace(/\./g,"-"),".").concat(J_("WORKER_DOMAIN"),":").concat(M_.wss,"?serviceName=").concat(encodeURIComponent(D_))),workerToken:w_.workerToken,vid:w_.vid}}(u_,_r);return J_("LIVE_STREAMING_ADDRESS")&&(g_.addressList=J_("LIVE_STREAMING_ADDRESS")instanceof Array?J_("LIVE_STREAMING_ADDRESS"):[J_("LIVE_STREAMING_ADDRESS")]),k6(k6({},g_),{},{responseTime:r_})},(s_,u_)=>(AE.apworkerEvent(_o.sid,{success:!0,sc:200,serviceName:_r,responseDetail:JSON.stringify(s_.addressList),firstSuccess:u_===0,responseTime:r_,serverIp:_n[u_%_n.length]}),!1),(s_,u_)=>(AE.apworkerEvent(_o.sid,{success:!1,sc:s_.data&&s_.data.code||200,serviceName:_r,responseTime:r_,serverIp:_n[u_%_n.length]}),!!(s_.code!==k_.OPERATION_ABORTED&&s_.code!==k_.UNEXPECTED_RESPONSE||s_.data&&s_.data.retry)&&(o_=_n[(u_+1)%_n.length],!0)),_u)}let TH=1;function x6(_n,_r,_o,_a){let{url:_u,areaCode:_p}=_n;const _f=Date.now();let n_;const[r_,o_]=P6(_r,_p,[DS.CHOOSE_SERVER]);let s_=gS.networkState;return hO(async()=>{s_&&gS.networkState===gT.OFFLINE&&gS.onlineWaiter&&await uE.race([gS.onlineWaiter,dT(_a&&_a.maxRetryTimeout||OS.maxRetryTimeout)]),s_=gS.networkState;const{data:u_,headers:g_}=await $I(_u,{data:r_,cancelToken:_o,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);n_=g_.http3==="1"?1:-1,AE.reportResourceTiming(_u,_r.sid),M6(u_,_u,_r,_f,[DS.CHOOSE_SERVER],n_);const w_=_H(u_,DS.CHOOSE_SERVER);return D6(w_),c6(w_,_u)},u_=>(u_&&AE.joinChooseServer(_r.sid,{lts:_f,succ:!0,csAddr:_u,opid:o_,serverList:u_.gatewayAddrs.map(g_=>g_.address),ec:null,cid:u_.cid.toString(),uid:u_.uid.toString(),csIp:u_.csIp,unilbsServerIds:[DS.CHOOSE_SERVER].toString(),isHttp3:n_}),!1),u_=>u_.code!==k_.OPERATION_ABORTED&&(u_.code===k_.CAN_NOT_GET_GATEWAY_SERVER?u_.data.retry:(AE.joinChooseServer(_r.sid,{lts:_f,succ:!1,csAddr:_u,serverList:null,opid:o_,ec:u_.code,csIp:u_.data&&u_.data.csIp,unilbsServerIds:[DS.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:s_}),isHttp3:n_}),E_.warning("[".concat(_r.clientId,"] Choose server network error, retry"),u_),!0)),_a)}function L6(_n,_r,_o,_a){let _u,{url:_p,areaCode:_f,serviceIds:n_}=_n;const r_=Date.now(),[o_,s_]=P6(_r,_f,n_);let u_;return hO(async()=>{u_&&gS.networkState===gT.OFFLINE&&gS.onlineWaiter&&await uE.race([gS.onlineWaiter,dT(_a&&_a.maxRetryTimeout||OS.maxRetryTimeout)]),u_=gS.networkState;const{data:g_,headers:w_}=await $I(_p,{data:o_,cancelToken:_o,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);_u=w_.http3==="1"?1:-1,AE.reportResourceTiming(_p,_r.sid),M6(g_,_p,_r,r_,n_,_u);const D_=_H(g_,DS.CHOOSE_SERVER),M_=_H(g_,_r.cloudProxyServer==="proxy5"?DS.CLOUD_PROXY_5:_r.cloudProxyServer==="proxy3"||_r.cloudProxyServer==="proxy4"?DS.CLOUD_PROXY:DS.CLOUD_PROXY_FALLBACK);return D6(D_),{gatewayInfo:c6(D_,_p),proxyInfo:M_,url:_p}},g_=>(g_.gatewayInfo&&AE.joinChooseServer(_r.sid,{lts:r_,succ:!0,csAddr:_p,serverList:g_.gatewayInfo.gatewayAddrs.map(w_=>w_.address),ec:null,opid:s_,cid:g_.gatewayInfo.cid.toString(),uid:g_.gatewayInfo.uid.toString(),csIp:g_.gatewayInfo.csIp,unilbsServerIds:n_.toString(),isHttp3:_u}),g_.proxyInfo&&AE.joinWebProxyAP(_r.sid,{lts:r_,sucess:1,apServerAddr:_p,turnServerAddrList:g_.proxyInfo.addresses.map(w_=>w_.ip).join(","),errorCode:null,eventType:_r.cloudProxyServer,unilbsServerIds:n_.toString()}),!1),g_=>g_.code!==k_.OPERATION_ABORTED&&(g_.code===k_.CAN_NOT_GET_GATEWAY_SERVER?g_.data.retry:(AE.joinWebProxyAP(_r.sid,{lts:r_,sucess:0,apServerAddr:_p,turnServerAddrList:null,errorCode:g_.code,eventType:_r.cloudProxyServer,unilbsServerIds:n_.toString(),extend:JSON.stringify({networkState:u_})}),E_.warning("[".concat(_r.clientId,"] multi unilbs network error, retry"),g_),!0)),_a)}const M6=(_n,_r,_o,_a,_u,_p)=>{const _f=[],n_=r_=>{r_.flag===4096?AE.joinChooseServer(_o.sid,{lts:_a,succ:!1,csAddr:_r,opid:_n.opid,serverList:null,ec:r_.error.message,csIp:r_.error.data&&r_.error.data.csIp,unilbsServerIds:_u.toString(),isHttp3:_p}):r_.flag!==1048576&&r_.flag!==4194304&&r_.flag!==4194310||AE.joinWebProxyAP(_o.sid,{lts:_a,sucess:0,apServerAddr:_r,turnServerAddrList:null,errorCode:r_.error.code,eventType:_o.cloudProxyServer,unilbsServerIds:_u.toString()})};if(_n.response_body.forEach(r_=>{const o_=r_.buffer.code;if(r_.uri===23&&o_===0&&!r_.buffer.edges_services)if(r_.buffer.flag===4194310)E_.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),r_.buffer.edges_services=[];else{const s_={error:new U_(k_.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:_n.detail[502]}),flag:r_.buffer.flag};_f.push(s_),n_(s_)}if(o_!==0){const s_=kF(o_),u_={error:new U_(k_.CAN_NOT_GET_GATEWAY_SERVER,s_.desc,{desc:s_.desc,retry:s_.retry,csIp:_n.detail[502]}),flag:r_.buffer.flag};r_.buffer.flag===4194310?E_.warning(u_.error.toString()):_f.push(u_),n_(u_)}}),_f.length)throw E_.warning("[".concat(_o.clientId,"] multi unilbs ").concat(_r," failed, ").concat(_f.map(r_=>"flag: ".concat(r_.flag,", message: ").concat(r_.error.message,", retry: ").concat(r_.error.data.retry)).join(" | "))),new U_(k_.CAN_NOT_GET_GATEWAY_SERVER,_f.map(r_=>"flag: ".concat(r_.flag,", message: ").concat(r_.error.message)).join(" | "),{retry:!!_f.find(r_=>r_.error.data.retry),csIp:_n.detail[502],desc:[...new Set(_f.map(r_=>{var o_,s_;return r_==null||(o_=r_.error)===null||o_===void 0||(s_=o_.data)===null||s_===void 0?void 0:s_.desc}).filter(r_=>!!r_))]})},D6=_n=>{var _r,_o,_a,_u;if(_n.addresses&&_n.addresses.length===0&&_n.code===0)throw new U_(k_.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:_n.detail&&_n.detail[502]});if((_r=_n.detail)!==null&&_r!==void 0&&_r[23]&&typeof((_o=_n.detail)===null||_o===void 0?void 0:_o[23])=="string"?O6(_n.detail[23].toLowerCase()):O6(),(_a=_n.detail)!==null&&_a!==void 0&&_a[19]&&typeof((_u=_n.detail)===null||_u===void 0?void 0:_u[19])=="string"){const _f=_n.detail[19],n_=_f==null?void 0:_f.split(";");for(let r_=0;r_<n_.length;r_++){var _p;const o_=DI(_p=n_[r_]).call(_p);_n.addresses[r_]&&n_&&(_n.addresses[r_].fingerprint=o_)}}if(J_("GATEWAY_ADDRESS")&&J_("GATEWAY_ADDRESS").length>0){E_.debug("assign gateway address to",J_("GATEWAY_ADDRESS"));const _f=J_("GATEWAY_ADDRESS").map(n_=>{var r_,o_;const s_=(r_=(o_=_n.addresses.find(u_=>u_.ip===n_.ip&&u_.port===n_.port))===null||o_===void 0?void 0:o_.fingerprint)!==null&&r_!==void 0?r_:"";return{ip:n_.ip,port:n_.port,ticket:_n.addresses[0]&&_n.addresses[0].ticket,fingerprint:s_}});_n.addresses=_f}},S9=(_n,_r)=>{if(_n.response_body&&_n.response_body.length){const _o=_n.response_body[0];if(_o.buffer.code!==0){const _a=kF(_o.buffer.code);throw new U_(k_.UPDATE_TICKET_FAILED,"[".concat(_o.buffer.code,"]: ").concat(_a.desc),{retry:_a.retry})}return _o.buffer.ticket}throw E_.debug("update ticket request received ap response without response body:",_r),new U_(k_.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},P6=(_n,_r,_o)=>{const _a=Math.floor(Math.random()*1e12),_u={appid:_n.appId,client_ts:Date.now(),opid:_a,sid:_n.sid,request_bodies:[{uri:22,buffer:{cname:_n.cname,detail:{6:_n.stringUid,11:_r,12:J_("USE_NEW_TOKEN")?"1":void 0,22:_r},key:_n.token,service_ids:_o,uid:_n.uid||0}}]};_u.request_bodies.forEach(_f=>{_n.multiIP&&_n.multiIP.gateway_ip&&(_f.buffer.detail[5]=JSON.stringify({vocs_ip:[_n.multiIP.uni_lbs_ip],vos_ip:[_n.multiIP.gateway_ip]}))});const _p=new FormData;return _p.append("request",JSON.stringify(_u)),[_p,_a]},w9=(_n,_r)=>{const _o=Math.floor(Math.random()*1e12),_a={appid:_n.appId,client_ts:Date.now(),opid:_o,sid:_n.sid,request_bodies:[{uri:28,buffer:{cname:_n.cname,detail:{1:"",6:_n.stringUid,12:"1"},token:_n.token,service_ids:_r,uid:_n.uid||0,edges_services:_n.apResponse.addresses.map(_p=>({ip:_p.ip,port:_p.port}))}}]},_u=new FormData;return _u.append("request",JSON.stringify(_a)),[_u,_o]};let RH=0;async function IH(_n,_r,_o,_a){return{gatewayInfo:await async function(_p,_f,n_,r_){let o_=null;const s_=[],u_=async()=>{const w_=J_("WEBCS_DOMAIN").slice(0,J_("AJAX_REQUEST_CONCURRENT")).map(P_=>({url:_p.proxyServer?"https://".concat(_p.proxyServer,"/ap/?url=").concat(P_+"/api/v2/transpond/webrtc?v=2"):"https://".concat(P_,"/api/v2/transpond/webrtc?v=2"),areaCode:xF()})),D_=r_.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:w_.map(P_=>P_.url)}),M_=await SU({fragementLength:J_("FRAGEMENT_LENGTH"),referenceList:w_,asyncMapHandler:P_=>(E_.debug("[".concat(_p.clientId,"] Connect to choose_server:"),P_.url),x6(P_,_p,_f,n_)),allFailedhandler:P_=>{throw r_.recordJoinChannelService({endTs:Date.now(),status:"error",errors:P_},D_),P_[0]},promisesCollector:s_});return r_.recordJoinChannelService({endTs:Date.now(),status:"success"},D_),M_},g_=async()=>{if(await dT(1e3),o_!==null)return o_;const w_=J_("WEBCS_DOMAIN_BACKUP_LIST").map(P_=>({url:_p.proxyServer?"https://".concat(_p.proxyServer,"/ap/?url=").concat(P_+"/api/v2/transpond/webrtc?v=2"):"https://".concat(P_,"/api/v2/transpond/webrtc?v=2"),areaCode:xF()})),D_=r_.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:w_.map(P_=>P_.url)}),M_=await SU({fragementLength:J_("FRAGEMENT_LENGTH"),referenceList:w_,asyncMapHandler:P_=>(E_.debug("[".concat(_p.clientId,"] Connect to backup choose_server:"),P_.url),x6(P_,_p,_f,n_)),allFailedhandler:P_=>{throw r_.recordJoinChannelService({endTs:Date.now(),status:"error",errors:P_},D_),P_[0]},promisesCollector:s_});return r_.recordJoinChannelService({endTs:Date.now(),status:"success"},D_),M_};try{return o_=await BD([u_(),g_()]),s_.length&&s_.forEach(w_=>w_.cancel&&typeof w_.cancel=="function"&&w_.cancel()),o_}catch(w_){throw w_[0]}}(_n,_r,_o,_a)}}async function j6(_n,_r,_o,_a,_u){const _p=_n.cloudProxyServer;if(_p==="disabled"){if(!_a)return;if(_n.useLocalAccessPoint)return await IH(_n,_r,_o,_u);if(J_("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:o_,proxyInfo:s_}=await $6(_n,_r,_o,_u);return _n.turnServer&&_n.turnServer.mode!=="auto"||(_n.turnServer={mode:"manual",servers:s_.map(u_=>({turnServerURL:u_.address,tcpport:u_.tcpport||ER.tcpport,udpport:u_.udpport||ER.udpport,username:u_.username||ER.username,password:u_.password||ER.password,forceturn:!1,security:!0}))}),{gatewayInfo:o_}}return await IH(_n,_r,_o,_u)}const{proxyInfo:_f,gatewayInfo:n_}=await $6(_n,_r,_o,_u),r_={gatewayInfo:n_};return _n.turnServer={mode:"manual",servers:_f.map(o_=>({turnServerURL:o_.address,tcpport:_p==="proxy3"?void 0:o_.tcpport?o_.tcpport:ER.tcpport,udpport:_p==="proxy4"?void 0:o_.udpport?o_.udpport:ER.udpport,username:o_.username||ER.username,password:o_.password||ER.password,forceturn:_p!=="proxy4",security:_p==="proxy5"}))},E_.debug("[".concat(_n.clientId,"] set proxy server: ").concat(_n.proxyServer,", mode: ").concat(_p)),r_}async function U6(_n,_r,_o,_a,_u){const _p=J_("ACCOUNT_REGISTER").slice(0,J_("AJAX_REQUEST_CONCURRENT"));let _f=[];_f=_r.proxyServer?_p.map(r_=>"https://".concat(_r.proxyServer,"/ap/?url=").concat(r_+"/api/v1")):_p.map(r_=>"https://".concat(r_,"/api/v1"));const n_=_u==null?void 0:_u.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:_f});try{const r_=await async function(o_,s_,u_,g_,w_){const D_=Date.now(),M_={sid:u_.sid,opid:10,appid:u_.appId,string_uid:s_};let P_=o_[0];const _g=await hO(()=>$I(P_+"".concat(P_.indexOf("?")===-1?"?":"&","action=stringuid"),{data:M_,cancelToken:g_,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(_y,hE)=>{if(_y.code===0){if(_y.uid<=0||_y.uid>=Math.pow(2,32))throw E_.error("Invalid Uint Uid ".concat(s_," => ").concat(_y.uid),_y),AE.reqUserAccount(M_.sid,{lts:D_,success:!1,serverAddr:P_,stringUid:M_.string_uid,uid:_y.uid,errorCode:k_.INVALID_UINT_UID_FROM_STRING_UID,extend:M_}),new U_(k_.INVALID_UINT_UID_FROM_STRING_UID);return AE.reqUserAccount(M_.sid,{lts:D_,success:!0,serverAddr:P_,stringUid:M_.string_uid,uid:_y.uid,errorCode:null,extend:M_}),!1}const NE=kF(_y.code);return NE.retry&&(P_=o_[(hE+1)%o_.length]),AE.reqUserAccount(M_.sid,{lts:D_,success:!1,serverAddr:P_,stringUid:M_.string_uid,uid:_y.uid,errorCode:NE.desc,extend:M_}),NE.retry},(_y,hE)=>_y.code!==k_.OPERATION_ABORTED&&(AE.reqUserAccount(M_.sid,{lts:D_,success:!1,serverAddr:P_,stringUid:M_.string_uid,uid:null,errorCode:_y.code,extend:M_}),P_=o_[(hE+1)%o_.length],!0),w_);if(_g.code!==0){const _y=kF(_g.code);throw new U_(k_.UNEXPECTED_RESPONSE,_y.desc)}return _g}(_f,_n,_r,_o,_a);return _u==null||_u.recordJoinChannelService({status:"success",endTs:Date.now()},n_),r_.uid}catch(r_){throw _u==null||_u.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[r_]},n_),r_}}async function T9(_n,_r,_o){const _a=J_("CDS_AP").slice(0,J_("AJAX_REQUEST_CONCURRENT")).map(n_=>_n.proxyServer?"https://".concat(_n.proxyServer,"/ap/?url=").concat(n_+"/api/v1"):"https://".concat(n_,"/api/v1?action=config")).map(n_=>function(r_,o_,s_,u_){const g_=I0(),w_={flag:64,cipher_method:0,features:{device:g_.name,system:g_.os,system_general:navigator.userAgent,vendor:o_.appId,version:$R,cname:o_.cname,sid:o_.sid,session_id:o_.sid,detail:"",proxyServer:o_.proxyServer}};return hO(()=>$I(r_,{data:w_,timeout:1e3,cancelToken:s_,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,D_=>D_.code!==k_.OPERATION_ABORTED,u_)}(n_,_n,_r,_o));let _u=null,_p=null,_f={};try{_u=await BD(_a)}catch(n_){if(n_.code===k_.OPERATION_ABORTED)throw n_;_p=n_}if(_a.forEach(n_=>n_.cancel()),AE.reportApiInvoke(_n.sid,{name:wS.REQUEST_CONFIG_DISTRIBUTE,options:{error:_p,res:_u}}).onSuccess(),_u&&_u.test_tags)try{_f=function(n_){if(!n_.test_tags)return{};const r_=n_.test_tags,o_=Object.keys(r_),s_={};return o_.forEach(u_=>{var g_;const w_=DI(g_=u_.slice(4)).call(g_),D_=JSON.parse(r_[u_])[1];s_[w_]=D_}),s_}(_u)}catch{}return _f}async function $6(_n,_r,_o,_a){const _u=J_("PROXY_SERVER_TYPE3"),_p=(w_,D_,M_)=>{let P_=M_||_u;return Array.isArray(P_)&&(P_=D_%2==0?_u[1]:_u[0]),"https://".concat(P_,"/ap/?url=").concat(w_)};let _f=null;const n_=[],r_=async()=>{const w_=J_("WEBCS_DOMAIN").slice(0,J_("AJAX_REQUEST_CONCURRENT")).map((P_,_g)=>{let _y;return _y=_n.cloudProxyServer==="disabled"&&_n.proxyServer?_p("".concat(P_,"/api/v2/transpond/webrtc?v=2"),_g,_n.proxyServer):_n.cloudProxyServer==="disabled"||_n.cloudProxyServer==="fallback"?"https://".concat(P_,"/api/v2/transpond/webrtc?v=2"):_p("".concat(P_,"/api/v2/transpond/webrtc?v=2"),_g),{url:_y,areaCode:xF(),serviceIds:[DS.CHOOSE_SERVER,_n.cloudProxyServer==="proxy5"?DS.CLOUD_PROXY_5:_n.cloudProxyServer==="proxy3"||_n.cloudProxyServer==="proxy4"?DS.CLOUD_PROXY:DS.CLOUD_PROXY_FALLBACK]}}),D_=_a.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:w_.map(P_=>P_.url)}),M_=await SU({fragementLength:J_("FRAGEMENT_LENGTH"),referenceList:w_,asyncMapHandler:P_=>(E_.debug("[".concat(_n.clientId,"] Connect to choose_server:"),P_.url),L6(P_,_n,_r,_o)),allFailedhandler:P_=>{throw _a.recordJoinChannelService({endTs:Date.now(),status:"error",errors:P_},D_),P_[0]},promisesCollector:n_});return _a.recordJoinChannelService({endTs:Date.now(),status:"success"},D_),M_},o_=async()=>{if(await dT(1e3),_f!==null)return _f;const w_=J_("WEBCS_DOMAIN_BACKUP_LIST").map((P_,_g)=>{let _y;return _y=_n.cloudProxyServer==="disabled"&&_n.proxyServer?_p("".concat(P_,"/api/v2/transpond/webrtc?v=2"),_g,_n.proxyServer):_n.cloudProxyServer==="disabled"||_n.cloudProxyServer==="fallback"?"https://".concat(P_,"/api/v2/transpond/webrtc?v=2"):_p("".concat(P_,"/api/v2/transpond/webrtc?v=2"),_g),{url:_y,areaCode:xF(),serviceIds:[DS.CHOOSE_SERVER,_n.cloudProxyServer==="proxy5"?DS.CLOUD_PROXY_5:_n.cloudProxyServer==="proxy3"||_n.cloudProxyServer==="proxy4"?DS.CLOUD_PROXY:DS.CLOUD_PROXY_FALLBACK]}}),D_=_a.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:w_.map(P_=>P_.url)}),M_=await SU({fragementLength:J_("FRAGEMENT_LENGTH"),referenceList:w_,asyncMapHandler:P_=>(E_.debug("[".concat(_n.clientId,"] Connect to backup choose_server:"),P_.url),L6(P_,_n,_r,_o)),allFailedhandler:P_=>{throw _a.recordJoinChannelService({endTs:Date.now(),status:"error",errors:P_},D_),P_[0]},promisesCollector:n_});return _a.recordJoinChannelService({endTs:Date.now(),status:"success"},D_),M_};let s_,u_,g_;try{({gatewayInfo:s_,proxyInfo:u_,url:g_}=await BD([r_(),o_()]))}catch(w_){throw w_[0]}if(n_.length&&n_.forEach(w_=>w_.cancel&&typeof w_.cancel=="function"&&w_.cancel()),!s_||!u_)throw new U_(k_.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(_n.apUrl=g_,_n.cloudProxyServer!=="disabled"&&Array.isArray(_u)&&g_){const w_=/^https?:\/\/(.+?)(\/.*)?$/.exec(g_)[1];_u.includes(w_)&&(_n.proxyServer=w_,E_.setProxyServer(w_),AE.setProxyServer(w_))}return _f={gatewayInfo:s_,proxyInfo:await d9(u_,s_.uid)},_f}async function F6(_n,_r,_o,_a){const _u=J_("UAP_AP").slice(0,J_("AJAX_REQUEST_CONCURRENT")).map(_p=>_r.proxyServer?"https://".concat(_r.proxyServer,"/ap/?url=").concat(_p+"/api/v1?action=uap"):"https://".concat(_p,"/api/v1?action=uap"));return await b9(_u,_n,_r,_o,_a)}async function R9(_n,_r,_o){const _a=J_("UAP_AP").slice(0,J_("AJAX_REQUEST_CONCURRENT")).map(_u=>_n.proxyServer?"https://".concat(_n.proxyServer,"/ap/?url=").concat(_u+"/api/v1?action=uap"):"https://".concat(_u,"/api/v1?action=uap")).map(_u=>function(_p,_f,n_,r_){const o_={command:"convergeAllocateEdge",sid:_f.sid,appId:_f.appId,token:_f.token,ts:Date.now(),version:$R,cname:_f.cname,uid:_f.uid.toString(),requestId:TH,seq:TH};TH+=1;const s_={service_name:"tele_channel",json_body:JSON.stringify(o_)};return hO(async()=>{const u_=await $I(_p,{data:s_,cancelToken:n_,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(u_.code!==0){const w_=new U_(k_.UNEXPECTED_RESPONSE,"cross channel ap error, code"+u_.code,{retry:!0});throw E_.error(w_.toString()),w_}const g_=JSON.parse(u_.json_body);if(g_.code!==200){const w_=new U_(k_.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(g_.code,", reason: ").concat(g_.reason));throw E_.error(w_.toString()),w_}if(!g_.servers||g_.servers.length===0){const w_=new U_(k_.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw E_.error(w_.toString()),w_}return{vid:g_.vid,workerToken:g_.workerToken,addressList:(J_("CHANNEL_MEDIA_RELAY_SERVERS")||g_.servers).map(w_=>"wss://".concat(w_.address.replace(/\./g,"-"),".").concat(J_("WORKER_DOMAIN"),":").concat(w_.wss))}},void 0,u_=>!!(u_.code!==k_.OPERATION_ABORTED&&u_.code!==k_.UNEXPECTED_RESPONSE||u_.data&&u_.data.retry),r_)}(_u,_n,_r,_o));try{const _u=await BD(_a);return _a.forEach(_p=>_p.cancel()),_u}catch(_u){throw _u[0]}}async function I9(_n,_r,_o){let _a=null;const _u=[],_p=async _f=>{const n_=J_(_f?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(r_=>_n.proxyServer?"https://".concat(_n.proxyServer,"/ap/?url=").concat(r_+"/api/v2/transpond/webrtc?v=2"):"https://".concat(r_,"/api/v2/transpond/webrtc?v=2"));return _f&&(await dT(1e3),_a!==null)?_a:await SU({fragementLength:J_("FRAGEMENT_LENGTH"),referenceList:n_,asyncMapHandler:r_=>(E_.debug("[".concat(_n.clientId,"] update ticket, Connect to ").concat(_f?"backup":""," choose_server:"),r_),function(o_,s_,u_,g_){const[w_]=w9(s_,[DS.CHOOSE_SERVER]);let D_=gS.networkState;return hO(async()=>{D_&&gS.networkState===gT.OFFLINE&&gS.onlineWaiter&&await uE.race([gS.onlineWaiter,dT(g_&&g_.maxRetryTimeout||OS.maxRetryTimeout)]),D_=gS.networkState;const M_=await $I(o_,{data:w_,cancelToken:u_,headers:{"Content-Type":"multipart/form-data;"}},!0);return S9(M_,o_)},()=>!1,M_=>M_.code!==k_.OPERATION_ABORTED&&(M_.code===k_.UPDATE_TICKET_FAILED?M_.data.retry:(E_.warning("[".concat(s_.clientId,"] update ticket network error, retry"),M_),!0)),g_)}(r_,_n,_r,_o)),allFailedhandler:r_=>{throw r_[0]},promisesCollector:_u})};try{return _a=await BD([_p(!1),_p(!0)]),_u.length&&_u.forEach(_f=>_f.cancel&&typeof _f.cancel=="function"&&_f.cancel()),_a}catch(_f){throw _f[0]}}function Y6(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function B6(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?Y6(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):Y6(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}class C9 extends lS{constructor(){super(),p_(this,"configs",void 0),p_(this,"joinInfo",void 0),p_(this,"cancelToken",void 0),p_(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),p_(this,"interval",void 0),p_(this,"mutex",new RT("config-distribute")),p_(this,"mutableParamsRead",!1)}startGetConfigDistribute(_r,_o){this.joinInfo=_r,this.cancelToken=_o,this.interval&&this.stopGetConfigDistribute(),J_("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},J_("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,AE.reportApiInvoke(null,{options:void 0,name:wS.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:nS.TRACER}).onSuccess(JSON.stringify(dL))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void E_.debug("[config-distribute] get config distribute interrupted have no joininfo");let _r;const _o=await this.mutex.lock();try{_r=await T9(this.joinInfo,this.cancelToken,this.retryConfig),E_.debug("[config-distribute] get config distribute",JSON.stringify(_r)),_r.limit_bitrate&&this.handleBitrateLimit(_r.limit_bitrate),this.cacheGlobalParameterConfig(_r),this.configs=_r}catch(_a){const _u=new U_(k_.NETWORK_RESPONSE_ERROR,_a);E_.warning("[config-distribute] ".concat(_u.toString()))}finally{_o()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(_r){var _o;(_o=_r)&&_o.uplink&&_o.id&&_o.uplink.max_bitrate!==void 0&&_o.uplink.min_bitrate!==void 0&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==_r.id&&this.emit(yU.UPDATE_BITRATE_LIMIT,_r):this.emit(yU.UPDATE_BITRATE_LIMIT,_r))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&B6({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(_r){var _o;const _a=Y4(_o=Object.keys(_r).filter(_p=>/^webrtc_ng_global_parameter/.test(_p))).call(_o);for(let _p=0;_p<_a.length;_p++)for(let _f=_a.length-1;_f>_p;_f--){const n_=_a[_f];if(typeof _r[n_].__priority=="number"){const r_=_r[n_].__priority,o_=_a[_f-1];if(typeof _r[o_].__priority=="number"){if(!(r_>_r[o_].__priority))continue;{const s_=n_;_a[_f]=_a[_f-1],_a[_f-1]=s_}}else{const s_=n_;_a[_f]=_a[_f-1],_a[_f-1]=s_}}}const _u={};_a.forEach(_p=>{const _f=_r[_p],n_=_f.__expires;Object.keys(_f).forEach(r_=>{r_==="__priority"||r_==="__expires"||Object.prototype.hasOwnProperty.call(_u,r_)||(_u[r_]=B6({value:_f[r_]},n_&&{expires:n_}))})});try{const _p=JSON.stringify(_u),_f=window.btoa(_p);window.localStorage.setItem("websdk_ng_global_parameter",_f),E_.debug("Caching global parameters ".concat(_p))}catch(_p){E_.error("Error caching global parameters:",_p.message)}}}function V6(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function TU(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?V6(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):V6(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}class A9 extends lS{constructor(_r,_o,_a,_u){super(),p_(this,"spec",void 0),p_(this,"token",void 0),p_(this,"websocket",void 0),p_(this,"pingpongTimer",void 0),p_(this,"reconnectMode","retry"),p_(this,"serviceMode",void 0),p_(this,"reqId",0),p_(this,"commandReqId",0),p_(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),p_(this,"handleWebSocketMessage",_p=>{if(!_p.data)return;const _f=JSON.parse(_p.data);_f.requestId?this.emit("@".concat(_f.requestId,"-").concat(_f.sid),_f):this.serviceMode===TS.INJECT?this.emit(pI.INJECT_STREAM_STATUS,_f):(AE.workerEvent(this.spec.sid,{actionType:"status",serverCode:_f.code,workerType:this.serviceMode===TS.TRANSCODE?1:2}),this.emit(pI.PUBLISH_STREAM_STATUS,_f))}),this.spec=_o,this.token=_r,this.serviceMode=_u,this.websocket=new VD("live-streaming",_a),this.websocket.on(KE.CONNECTED,this.handleWebSocketOpen),this.websocket.on(KE.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(KE.REQUEST_NEW_URLS,(_p,_f)=>{hT(this,pI.REQUEST_NEW_ADDRESS).then(_p).catch(_f)}),this.websocket.on(KE.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(_r){return this.websocket.init(_r)}async request(_r,_o,_a,_u){this.reqId+=1,_r==="request"&&(this.commandReqId+=1);const _p=this.commandReqId,_f=this.reqId;if(!_f||!this.websocket)throw new U_(k_.UNEXPECTED_ERROR);const n_=TU({command:_r,sdkVersion:$R==="4.17.2"?"0.0.1":$R,seq:_f,requestId:_f,allocate:_a,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},_o);if(this.websocket.state==="closed")throw new U_(k_.WS_DISCONNECT);const r_=()=>new uE((g_,w_)=>{this.websocket.once(KE.CLOSED,()=>w_(new U_(k_.WS_ABORT))),this.websocket.once(KE.CONNECTED,g_)});this.websocket.state!=="connected"&&await r_(),n_.clientRequest&&(n_.clientRequest.workerToken=this.token);const o_=new uE((g_,w_)=>{const D_=()=>{w_(new U_(k_.WS_ABORT))};this.websocket.once(KE.RECONNECTING,D_),this.websocket.once(KE.CLOSED,D_),this.once("@".concat(_f,"-").concat(this.spec.sid),M_=>{g_(M_)})});_u&&AE.workerEvent(this.spec.sid,TU(TU({},_u),{},{requestId:_p,actionType:"request",payload:JSON.stringify(_o.clientRequest),serverCode:0,code:0}));const s_=Date.now();this.websocket.sendMessage(n_);let u_=null;try{u_=await o_}catch(g_){if(this.websocket.state==="closed")throw g_;return await r_(),await this.request(_r,_o,_a)}return _u&&AE.workerEvent(this.spec.sid,TU(TU({},_u),{},{requestId:_p,actionType:"response",payload:JSON.stringify(u_.serverResponse),serverCode:u_.code,success:u_.code===200,responseTime:Date.now()-s_})),u_.code!==200&&this.handleResponseError(u_),u_}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const _r=$R==="4.17.2"?"0.0.1":$R;this.reqId+=1,this.websocket.state==="connected"?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:_r,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(_r){switch(_r.code){case dS.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void E_.warning("live stream response already exists stream");case dS.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case dS.LIVE_STREAM_RESPONSE_BAD_STREAM:case dS.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new U_(k_.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:_r.code}).throw();case dS.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if(_r.serverResponse.command==="UnpublishStream"||_r.serverResponse.command==="UninjectStream")return;throw new U_(k_.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case dS.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new U_(k_.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:_r.code}).throw();case dS.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const _o=new U_(k_.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(pI.WARNING,_o,_r.serverResponse.url)}case dS.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const _o=new U_(k_.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(pI.WARNING,_o,_r.serverResponse.url)}case dS.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new U_(k_.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case dS.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new U_(k_.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:_r.code}).throw();case dS.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const _o=new U_(k_.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(pI.WARNING,_o,_r.serverResponse.url)}case dS.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new U_(k_.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:_r.code}).throw();case dS.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new U_(k_.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case dS.LIVE_STREAM_RESPONSE_WORKER_LOST:case dS.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(_r.serverResponse.command==="UnpublishStream"||_r.serverResponse.command==="UninjectStream")return;throw new U_(k_.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case dS.ERROR_FAIL_SEND_MESSAGE:if(_r.serverResponse.command==="UnpublishStream"||_r.serverResponse.command==="UninjectStream")return;if(_r.serverResponse.command==="UpdateTranscoding"||_r.serverResponse.command==="ControlStream")return new U_(k_.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:_r.code}).throw();throw new U_(k_.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case dS.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case dS.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case dS.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case dS.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new U_(k_.LIVE_STREAMING_CDN_ERROR,"",{code:_r.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{this.websocket.state==="connected"&&this.request("ping",{}).catch(OF)},6e3)}}function H6(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function UT(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?H6(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):H6(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}class O9 extends lS{constructor(_r){let _o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:OS,_a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:OS;super(),p_(this,"onLiveStreamWarning",void 0),p_(this,"onLiveStreamError",void 0),p_(this,"onInjectStatusChange",void 0),p_(this,"spec",void 0),p_(this,"retryTimeout",1e4),p_(this,"connection",void 0),p_(this,"httpRetryConfig",void 0),p_(this,"wsRetryConfig",void 0),p_(this,"streamingTasks",new Map),p_(this,"isStartingStreamingTask",!1),p_(this,"taskMutex",new RT("live-streaming")),p_(this,"cancelToken",dI.CancelToken.source()),p_(this,"transcodingConfig",void 0),p_(this,"injectConfig",UT({},q7)),p_(this,"injectLoopTimes",0),p_(this,"uapResponse",void 0),p_(this,"lastTaskId",1),p_(this,"statusError",new Map),this.spec=_r,this.httpRetryConfig=_a,this.wsRetryConfig=_o}async setTranscodingConfig(_r){const _o=UT(UT({},G7),_r);_o.videoCodecProfile!==66&&_o.videoCodecProfile!==77&&_o.videoCodecProfile!==100&&(E_.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(_o.videoCodecProfile," -> 100")),_o.videoCodecProfile=100),_o.transcodingUsers||(_o.transcodingUsers=_o.userConfigs),_o.transcodingUsers&&(_o.transcodingUsers=_o.transcodingUsers.map(_f=>UT(UT(UT({},H7),_f),{},{zOrder:_f.zOrder?_f.zOrder+1:1}))),function(_f){Q0(_f.width)||W0(_f.width,"config.width",0,1e4),Q0(_f.height)||W0(_f.height,"config.height",0,1e4),Q0(_f.videoBitrate)||W0(_f.videoBitrate,"config.videoBitrate",1,1e6),Q0(_f.videoFrameRate)||W0(_f.videoFrameRate,"config.videoFrameRate"),Q0(_f.lowLatency)||_U(_f.lowLatency,"config.lowLatency"),Q0(_f.audioSampleRate)||$S(_f.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),Q0(_f.audioBitrate)||W0(_f.audioBitrate,"config.audioBitrate",1,128),Q0(_f.audioChannels)||$S(_f.audioChannels,"config.audioChannels",[1,2,3,4,5]),Q0(_f.videoGop)||W0(_f.videoGop,"config.videoGop"),Q0(_f.videoCodecProfile)||$S(_f.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),Q0(_f.userCount)||W0(_f.userCount,"config.userCount",0,17),Q0(_f.backgroundColor)||W0(_f.backgroundColor,"config.backgroundColor",0,16777215),Q0(_f.userConfigExtraInfo)||oT(_f.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),_f.transcodingUsers&&!Q0(_f.transcodingUsers)&&(KO(_f.transcodingUsers,"config.transcodingUsers"),_f.transcodingUsers.forEach((n_,r_)=>{H4(n_.uid),Q0(n_.x)||W0(n_.x,"transcodingUser[".concat(r_,"].x"),0,1e4),Q0(n_.y)||W0(n_.y,"transcodingUser[".concat(r_,"].y"),0,1e4),Q0(n_.width)||W0(n_.width,"transcodingUser[".concat(r_,"].width"),0,1e4),Q0(n_.height)||W0(n_.height,"transcodingUser[".concat(r_,"].height"),0,1e4),Q0(n_.zOrder)||W0(n_.zOrder-1,"transcodingUser[".concat(r_,"].zOrder"),0,100),Q0(n_.alpha)||W0(n_.alpha,"transcodingUser[".concat(r_,"].alpha"),0,1,!1)})),Q0(_f.watermark)||Q4(_f.watermark,"watermark"),Q0(_f.backgroundImage)||Q4(_f.backgroundImage,"backgroundImage"),_f.images&&!Q0(_f.images)&&(KO(_f.images,"config.images"),_f.images.forEach((n_,r_)=>{Q4(n_,"images[".concat(r_,"]"))}))}(_o);const _a=[];_o.images&&_a.push(..._o.images.map(_f=>UT(UT(UT({},J4),_f),{},{zOrder:255}))),_o.backgroundImage&&(_a.push(UT(UT(UT({},J4),_o.backgroundImage),{},{zOrder:0})),delete _o.backgroundImage),_o.watermark&&(_a.push(UT(UT(UT({},J4),_o.watermark),{},{zOrder:255})),delete _o.watermark),_o.images=_a,_o.transcodingUsers&&(_o.userConfigs=_o.transcodingUsers.map(_f=>UT({},_f)),_o.userCount=_o.transcodingUsers.length,delete _o.transcodingUsers);const _u=(_o.userConfigs||[]).map(_f=>typeof _f.uid=="number"?uE.resolve(_f.uid):U6(_f.uid,this.spec,this.cancelToken.token,this.httpRetryConfig));if((await uE.all(_u)).forEach((_f,n_)=>{_o.userConfigs&&_o.userConfigs[n_]&&(_o.userConfigs[n_].uid=_f)}),this.transcodingConfig=_o,this.connection)try{var _p;const _f=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(fO(_p=this.streamingTasks).call(_p)).map(n_=>n_.taskId).join("#")});E_.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(_f.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(_f){if(!_f.data||!_f.data.retry)throw _f;_f.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach(n_=>{E_.warning("[".concat(this.spec.clientId,"] live streaming receive error"),_f.toString(),"try to republish",n_.url),this.startLiveStreamingTask(n_.url,n_.mode,_f).then(()=>{E_.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(n_.url," success"))}).catch(r_=>{E_.error("[".concat(this.spec.clientId,"] live streaming republish failed"),n_.url,r_.toString()),this.onLiveStreamError&&this.onLiveStreamError(n_.url,r_)})})}}setInjectStreamConfig(_r,_o){this.injectConfig=Object.assign({},this.injectConfig,_r),this.injectLoopTimes=_o}async startLiveStreamingTask(_r,_o,_a){var _u;if(Array.from(fO(_u=this.streamingTasks).call(_u)).find(r_=>r_.mode===TS.INJECT)&&_o===TS.INJECT)return new U_(k_.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!this.transcodingConfig&&_o===TS.TRANSCODE)throw new U_(k_.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let _p={command:"PublishStream",ts:Date.now(),url:_r,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};E_.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(_r,", mode: ").concat(_o));const _f=await this.taskMutex.lock();if(!this.connection&&_a)return void _f();if(this.streamingTasks.get(_r)&&!_a)return _f(),new U_(k_.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(_o))}catch(r_){throw _f(),r_}switch(_o){case TS.TRANSCODE:_p.transcodingConfig=UT({},this.transcodingConfig);break;case TS.RAW:break;case TS.INJECT:_p={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:_r,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(_p.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const n_=this.lastTaskId++;try{const r_=new uE((s_,u_)=>{dT(this.retryTimeout).then(()=>{if(_a)return u_(_a);const g_=this.statusError.get(_r);return g_?(this.statusError.delete(_r),u_(g_)):void 0})}),o_=await uE.race([this.connection.request("request",{clientRequest:_p},!0,{url:_r,command:"PublishStream",workerType:_o===TS.TRANSCODE?1:2,requestByUser:!_a,tid:n_.toString()}),r_]);this.isStartingStreamingTask=!1,E_.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(o_.code)),this.streamingTasks.set(_r,{clientRequest:_p,mode:_o,url:_r,taskId:n_}),_f()}catch(r_){if(_f(),this.isStartingStreamingTask=!1,!r_.data||!r_.data.retry||_a)throw r_;return r_.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(_r,_o,r_)):await this.startLiveStreamingTask(_r,_o,r_)}}stopLiveStreamingTask(_r){return new uE((_o,_a)=>{const _u=this.streamingTasks.get(_r);if(!_u||!this.connection)return new U_(k_.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const _p=_u.mode;_u.abortTask=()=>{E_.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(_r),_o()},this.connection.request("request",{clientRequest:{command:_p===TS.INJECT?"UninjectStream":"UnpublishStream",url:_u.url}},!1,{url:_r,command:"UnPublishStream",workerType:_p===TS.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(_f=>{E_.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(_f.code)),this.streamingTasks.delete(_r),this.streamingTasks.size===0&&_p!==TS.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),_o(),_p===TS.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(X1.INJECT_STREAM_STATUS_STOP_SUCCESS,this.spec.uid,_r)}).catch(_a)})}async controlInjectStream(_r,_o,_a,_u){const _p=this.streamingTasks.get(_r);if(!_p||!this.connection||_p.mode!==TS.INJECT)throw new U_(k_.INVALID_OPERATION,"can not find inject stream task to control");return(await this.connection.request("request",{clientRequest:{command:"ControlStream",url:_r,control:_o,audioVolume:_a,position:_u}})).serverResponse}resetAllTask(){var _r;const _o=Array.from(fO(_r=this.streamingTasks).call(_r));this.terminate();for(const _a of _o)this.startLiveStreamingTask(_a.url,_a.mode).catch(_u=>{this.onLiveStreamError&&this.onLiveStreamError(_a.url,_u)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=dI.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(_r){if(this.connection)throw new U_(k_.UNEXPECTED_ERROR,"live streaming connection has already connected");const _o=await hT(this,LD.REQUEST_WORKER_MANAGER_LIST,_r);return this.uapResponse=_o,this.connection=new A9(_o.workerToken,this.spec,this.wsRetryConfig,_r),this.connection.on(pI.WARNING,(_a,_u)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(_u,_a)),this.connection.on(pI.PUBLISH_STREAM_STATUS,_a=>this.handlePublishStreamServer(_a)),this.connection.on(pI.INJECT_STREAM_STATUS,_a=>this.handleInjectStreamServerStatus(_a)),this.connection.on(pI.REQUEST_NEW_ADDRESS,(_a,_u)=>{if(!this.connection)return _u(new U_(k_.UNEXPECTED_ERROR,"can not get new live streaming address list"));hT(this,LD.REQUEST_WORKER_MANAGER_LIST,_r).then(_p=>{this.uapResponse=_p,_a(_p.addressList)}).catch(_u)}),await this.connection.init(_o.addressList),this.connection}handlePublishStreamServer(_r){const _o=_r.serverStatus&&_r.serverStatus.url||"empty_url",_a=this.streamingTasks.get(_o),_u=_r.reason;switch(_r.code){case dS.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case dS.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case dS.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case dS.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const _f=new U_(k_.LIVE_STREAMING_CDN_ERROR,"",{code:_r.code});if(_a)return E_.error(_f.toString()),this.onLiveStreamError&&this.onLiveStreamError(_o,_f);if(!this.isStartingStreamingTask)return;this.statusError.set(_o,_f)}case dS.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const _f=new U_(k_.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,_u);return this.onLiveStreamWarning&&this.onLiveStreamWarning(_o,_f)}case dS.LIVE_STREAM_RESPONSE_WORKER_LOST:case dS.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var _p;if(!this.connection)return;this.connection.tryNextAddress();const _f=Array.from(fO(_p=this.streamingTasks).call(_p));for(const n_ of _f)n_.abortTask?n_.abortTask():(E_.warning("[".concat(this.spec.clientId,"] publish stream status code"),_r.code,"try to republish",n_.url),this.startLiveStreamingTask(n_.url,n_.mode,new U_(k_.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:_r.code})).then(()=>{E_.debug("[".concat(this.spec.clientId,"] republish live stream success"),n_.url)}).catch(r_=>{E_.error(r_.toString()),this.onLiveStreamError&&this.onLiveStreamError(n_.url,r_)}));return}}}handleInjectStreamServerStatus(_r){const _o=Number(_r.uid),_a=_r.serverStatus&&_r.serverStatus.url;switch(_r.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(X1.INJECT_STREAM_STATUS_START_SUCCESS,_o,_a));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(X1.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,_o,_a),void this.streamingTasks.delete(_a);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(X1.INJECT_STREAM_STATUS_START_UNAUTHORIZED,_o,_a),void this.streamingTasks.delete(_a);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(X1.INJECT_STREAM_STATUS_BROKEN,_o,_a),void this.streamingTasks.delete(_a);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(X1.INJECT_STREAM_STATUS_START_TIMEOUT,_o,_a),void this.streamingTasks.delete(_a);default:return void E_.debug("inject stream server status",_r)}}hasUrl(_r){return this.streamingTasks.has(_r)}}class G6{constructor(){p_(this,"destChannelMediaInfos",new Map),p_(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(_r){$5(_r),this.srcChannelMediaInfo=_r}addDestChannelInfo(_r){$5(_r),this.destChannelMediaInfos.set(_r.channelName,_r)}removeDestChannelInfo(_r){V4(_r),this.destChannelMediaInfos.delete(_r)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function q6(_n){if(!(_n instanceof G6))return new U_(k_.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const _r=_n.getSrcChannelMediaInfo(),_o=_n.getDestChannelMediaInfo();if(!_r)return new U_(k_.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw();if(_o.size===0)return new U_(k_.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw()}class N9 extends lS{constructor(_r,_o,_a){super(),p_(this,"ws",void 0),p_(this,"requestId",1),p_(this,"heartBeatTimer",void 0),p_(this,"joinInfo",void 0),p_(this,"clientId",void 0),p_(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),p_(this,"onClose",_u=>{this.emit("close"),this.dispose()}),p_(this,"onMessage",_u=>{const _p=JSON.parse(_u.data);if(!_p||_p.command!=="serverResponse"||!_p.requestId)return _p&&_p.command==="serverStatus"&&_p.serverStatus&&_p.serverStatus.command?(this.emit("status",_p.serverStatus),void this.emit(_p.serverStatus.command,_p.serverStatus)):void 0;this.emit("req_".concat(_p.requestId),_p)}),this.joinInfo=_r,this.clientId=_o,this.ws=new VD("cross-channel-".concat(this.clientId),_a),this.ws.on(KE.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(KE.CONNECTED,this.onOpen),this.ws.on(KE.ON_MESSAGE,this.onMessage),this.ws.on(KE.CLOSED,this.onClose)}isConnect(){return this.ws.state==="connected"}sendMessage(_r){const _o=this.requestId++;return _r.requestId=_o,_r.seq=_o,this.ws.sendMessage(_r),_o}waitStatus(_r){return new uE((_o,_a)=>{const _u=window.setTimeout(()=>{_a(new U_(k_.TIMEOUT,"wait status timeout, status: ".concat(_r)))},5e3);this.once(_r,_p=>{window.clearTimeout(_u),_p.state&&_p.state!==0?_a(new U_(k_.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(_r))):_o(void 0)}),this.once("dispose",()=>{window.clearTimeout(_u),_a(new U_(k_.WS_ABORT))})})}async request(_r){if(this.ws.state==="closed")throw new U_(k_.WS_DISCONNECT);const _o=()=>new uE((_f,n_)=>{this.ws.once(KE.CLOSED,()=>n_(new U_(k_.WS_ABORT))),this.ws.once(KE.CONNECTED,_f)});this.ws.state!=="connected"&&await _o();const _a=this.sendMessage(_r),_u=new uE((_f,n_)=>{const r_=()=>{n_(new U_(k_.WS_ABORT))};this.ws.once(KE.RECONNECTING,r_),this.ws.once(KE.CLOSED,r_),this.once("req_".concat(_a),_f),dT(3e3).then(()=>{this.removeAllListeners("req_".concat(_a)),this.ws.off(KE.RECONNECTING,r_),this.ws.off(KE.CLOSED,r_),n_(new U_(k_.TIMEOUT,"cross channel ws request timeout"))})}),_p=await _u;if(!_p||_p.code!==200)throw new U_(k_.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(_p)));return _p}async connect(_r){this.ws.removeAllListeners(KE.REQUEST_NEW_URLS),this.ws.on(KE.REQUEST_NEW_URLS,_o=>{_o(_r)}),await this.ws.init(_r)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(_r){const _o=this.requestId++;return _r.requestId=_o,this.ws.sendMessage(_r),_o}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class k9 extends lS{set state(_r){_r!==this._state&&(_r!==jT.RELAY_STATE_FAILURE&&(this.errorCode=Z1.RELAY_OK),this.emit("state",_r,this.errorCode),this._state=_r)}get state(){return this._state}constructor(_r,_o,_a,_u){super(),p_(this,"joinInfo",void 0),p_(this,"sid",void 0),p_(this,"clientId",void 0),p_(this,"cancelToken",dI.CancelToken.source()),p_(this,"workerToken",void 0),p_(this,"requestId",0),p_(this,"signal",void 0),p_(this,"prevChannelMediaConfig",void 0),p_(this,"httpRetryConfig",void 0),p_(this,"_state",jT.RELAY_STATE_IDLE),p_(this,"errorCode",Z1.RELAY_OK),p_(this,"onStatus",_p=>{E_.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(_p))),_p&&_p.command&&(_p.command==="onAudioPacketReceived"&&this.emit("event",UI.PACKET_RECEIVED_AUDIO_FROM_SRC),_p.command==="onVideoPacketReceived"&&this.emit("event",UI.PACKET_RECEIVED_VIDEO_FROM_SRC),_p.command==="onSrcTokenPrivilegeDidExpire"&&(this.errorCode=Z1.SRC_TOKEN_EXPIRED,this.state=jT.RELAY_STATE_FAILURE),_p.command==="onDestTokenPrivilegeDidExpire"&&(this.errorCode=Z1.DEST_TOKEN_EXPIRED,this.state=jT.RELAY_STATE_FAILURE))}),p_(this,"onReconnect",async()=>{E_.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",UI.NETWORK_DISCONNECTED),this.state=jT.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch(_p=>{this.state!==jT.RELAY_STATE_IDLE&&(E_.error("auto restart channel media relay failed",_p.toString()),this.errorCode=Z1.SERVER_CONNECTION_LOST,this.state=jT.RELAY_STATE_FAILURE)})}),this.joinInfo=_r,this.clientId=_o,this.sid=gH(),this.signal=new N9(this.joinInfo,this.clientId,_a),this.httpRetryConfig=_u}async startChannelMediaRelay(_r){if(this.state!==jT.RELAY_STATE_IDLE)throw new U_(k_.INVALID_OPERATION);this.state=jT.RELAY_STATE_CONNECTING,await this.connect(),E_.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(_r)}catch(_o){throw _o.data&&_o.data.serverResponse&&_o.data.serverResponse.command==="SetSourceChannel"?new U_(k_.CROSS_CHANNEL_FAILED_JOIN_SRC):_o.data&&_o.data.serverResponse&&_o.serverResponse.command==="SetDestChannelStatus"?new U_(k_.CROSS_CHANNEL_FAILED_JOIN_DEST):_o.data&&_o.data.serverResponse&&_o.serverResponse.command==="StartPacketTransfer"?new U_(k_.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):_o}this.prevChannelMediaConfig=_r}async updateChannelMediaRelay(_r){if(this.state!==jT.RELAY_STATE_RUNNING)throw new U_(k_.INVALID_OPERATION);await this.sendUpdateMessage(_r),this.prevChannelMediaConfig=_r}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),E_.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=jT.RELAY_STATE_IDLE,this.dispose()}dispose(){E_.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=dI.CancelToken.source(),this.state=jT.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const _r=await R9(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=_r.workerToken,await this.signal.connect(_r.addressList),this.emit("event",UI.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(_r){const _o=this.genMessage(wT.StopPacketTransfer);await this.signal.request(_o),await this.signal.waitStatus("Normal Quit"),E_.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const _a=this.genMessage(wT.SetSdkProfile,_r);await this.signal.request(_a),E_.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const _u=this.genMessage(wT.SetSourceChannel,_r);await this.signal.request(_u),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",UI.PACKET_JOINED_SRC_CHANNEL),E_.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const _p=this.genMessage(wT.SetSourceUserId,_r);await this.signal.request(_p),E_.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const _f=this.genMessage(wT.SetDestChannel,_r);await this.signal.request(_f),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",UI.PACKET_JOINED_DEST_CHANNEL),E_.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));const n_=this.genMessage(wT.StartPacketTransfer,_r);await this.signal.request(n_),this.emit("event",UI.PACKET_SENT_TO_DEST_CHANNEL),this.state=jT.RELAY_STATE_RUNNING,E_.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success"))}async sendUpdateMessage(_r){const _o=this.genMessage(wT.UpdateDestChannel,_r);await this.signal.request(_o),this.emit("event",UI.PACKET_UPDATE_DEST_CHANNEL),E_.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){const _r=this.genMessage(wT.StopPacketTransfer);await this.signal.request(_r),E_.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(_r,_o){const _a=[],_u=[],_p=[];this.requestId+=1;const _f={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:$R,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};_f.sdkVersion==="4.17.2"&&(_f.sdkVersion="0.0.1");let n_=null,r_=null;switch(_r){case wT.SetSdkProfile:return _f.clientRequest={command:"SetSdkProfile",type:"multi_channel"},_f;case wT.SetSourceChannel:if(r_=_o&&_o.getSrcChannelMediaInfo(),!r_)throw new U_(k_.UNEXPECTED_ERROR,"can not find source config");return _f.clientRequest={command:"SetSourceChannel",uid:"0",channelName:r_.channelName,token:r_.token||this.joinInfo.appId},_f;case wT.SetSourceUserId:if(r_=_o&&_o.getSrcChannelMediaInfo(),!r_)throw new U_(k_.UNEXPECTED_ERROR,"can not find source config");return _f.clientRequest={command:"SetSourceUserId",uid:r_.uid+""},_f;case wT.SetDestChannel:if(n_=_o&&_o.getDestChannelMediaInfo(),!n_)throw new U_(k_.UNEXPECTED_ERROR,"can not find dest config");return n_.forEach(o_=>{_a.push(o_.channelName),_u.push(o_.uid+""),_p.push(o_.token||this.joinInfo.appId)}),_f.clientRequest={command:"SetDestChannel",channelName:_a,uid:_u,token:_p},_f;case wT.StartPacketTransfer:return _f.clientRequest={command:"StartPacketTransfer"},_f;case wT.Reconnect:return _f.clientRequest={command:"Reconnect"},_f;case wT.StopPacketTransfer:return _f.clientRequest={command:"StopPacketTransfer"},_f;case wT.UpdateDestChannel:if(n_=_o&&_o.getDestChannelMediaInfo(),!n_)throw new U_(k_.UNEXPECTED_ERROR,"can not find dest config");return n_.forEach(o_=>{_a.push(o_.channelName),_u.push(o_.uid+""),_p.push(o_.token||this.joinInfo.appId)}),_f.clientRequest={command:"UpdateDestChannel",channelName:_a,uid:_u,token:_p},_f}return _f}}const CH=_n=>{const _r=document.createElement("canvas");return _r.width=2,_r.height=2,new uE((_o,_a)=>{_r.toBlob(async _u=>{if(_r.remove(),_u){const _p=await W6(_u);_o({buffer:_p,width:_r.width,height:_r.height})}else _a(new U_(k_.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},_n,1)})},W6=async _n=>{const _r=await _n.arrayBuffer();return new Uint8Array(_r)};function z6(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function K6(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?z6(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):z6(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}class AH{get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(_r){_r!==this._videoElementStatus&&(E_.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(_r)),this._videoElementStatus=_r)}constructor(_r){p_(this,"trackId",void 0),p_(this,"config",void 0),p_(this,"onFirstVideoFrameDecoded",void 0),p_(this,"freezeTimeCounterList",[]),p_(this,"renderFreezeAccTime",0),p_(this,"timeUpdatedCount",0),p_(this,"freezeTime",0),p_(this,"playbackTime",0),p_(this,"lastTimeUpdatedTime",0),p_(this,"autoplayFailed",!1),p_(this,"videoTrack",void 0),p_(this,"videoElement",void 0),p_(this,"cacheVideoElement",void 0),p_(this,"videoElementCheckInterval",void 0),p_(this,"_videoElementStatus",sT.NONE),p_(this,"isGettingVideoDimensions",!1),p_(this,"startGetVideoDimensions",()=>{const _o=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return E_.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(_o,500)};!this.isGettingVideoDimensions&&_o()}),p_(this,"autoResumeAfterInterruption",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&c0.curState==="running"&&(eU()?(E_.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.2")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):G3()?(E_.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):H3()&&(E_.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()))}),p_(this,"handleVideoEvents",_o=>{switch(_o.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=sT.PLAYING;break;case"loadeddata":if(this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.remove()}catch{}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=sT.CANPLAY;break;case"stalled":this.videoElementStatus=sT.STALLED;break;case"suspend":this.videoElementStatus=sT.SUSPEND;break;case"pause":this.videoElementStatus=sT.PAUSED,KS()||uI()||rT()&&this.autoplayFailed||!this.videoTrack||this.videoTrack.readyState!=="live"||(E_.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=sT.WAITING;break;case"abort":this.videoElementStatus=sT.ABORT;break;case"ended":this.videoElementStatus=sT.ENDED;break;case"emptied":this.videoElementStatus=sT.EMPTIED;break;case"error":{this.videoElementStatus=sT.ERROR;const _a=this.videoElement.error;_a&&E_.error("[".concat(this.trackId,"] media error, code: ").concat(_a.code,", message: ").concat(_a.message));break}case"timeupdate":{const _a=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=_a);const _u=_a-this.lastTimeUpdatedTime,_p=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=_a,QO.lastVisibleTime<QO.lastHiddenTime||_p<QO.lastHiddenTime||_p<QO.lastVisibleTime)return;for(_u>J_("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=_u),this.playbackTime+=_u;this.playbackTime>=6e3;){this.playbackTime-=6e3;const _f=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(_f),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}}),p_(this,"autoResumeAfterInterruptionOnIOS15",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&(eU()?(E_.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.2")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):G3()?(E_.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):H3()&&(E_.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()))}),this.trackId=_r.trackId,this.config=_r,_r.element instanceof HTMLVideoElement?this.videoElement=_r.element:this.videoElement=document.createElement("video"),c0.on(PS.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),c0.on(PS.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15)}getVideoElement(){return this.videoElement}getContainerElement(){var _r;return(_r=this.videoElement.parentElement)!==null&&_r!==void 0?_r:void 0}updateConfig(_r){this.config=_r,this.trackId=_r.trackId,_r.element!==this.videoElement&&(this.destroy(),this.videoElement=_r.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(_r){this.videoTrack!==_r&&(this.videoTrack=_r,this.initVideoElement())}play(_r){const _o=this.videoElement.play();_o&&_o.catch&&_o.catch(_u=>{_r&&AE.autoplayFailed(_r,"video",_u.message,this.trackId),_u.name==="NotAllowedError"?(E_.warning("detected video element autoplay failed",_u),this.autoplayFailed=!0,this.handleAutoPlayFailed()):E_.warning("[".concat(this.trackId,"] play warning: "),_u)});const _a=I0();if((_a.name==="Safari"&&Number(_a.version)===15||DR())&&_o&&_o.then&&_o.catch){const _u=()=>{this.config.mirror&&(this.videoElement.style.transform="rotateY(180deg)")};_o.then(_u).catch(_u)}}getCurrentFrame(){const _r=document.createElement("canvas");_r.width=this.videoElement.videoWidth,_r.height=this.videoElement.videoHeight;const _o=_r.getContext("2d");if(!_o)return E_.error("create canvas context failed!"),new ImageData(2,2);_o.drawImage(this.videoElement,0,0,_r.width,_r.height);const _a=_o.getImageData(0,0,_r.width,_r.height);return _r.remove(),_a}async getCurrentFrameToUint8Array(_r){let _o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const _a=document.createElement("canvas");_a.width=this.videoElement.videoWidth,_a.height=this.videoElement.videoHeight;const _u=_a.getContext("2d");return _u?(_u.drawImage(this.videoElement,0,0,_a.width,_a.height),new uE((_p,_f)=>{_a.toBlob(async n_=>{if(_a.remove(),n_){const r_=await W6(n_);_p({buffer:r_,width:_a.width,height:_a.height})}else _f(new U_(k_.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},_r,_o<0?.1:_o>1?1:_o)})):await CH(_r)}destroy(){c0.off(PS.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),c0.off(PS.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[]}initVideoElement(){if(this.videoElementStatus=sT.INIT,!this.videoElementCheckInterval&&(J6.forEach(_p=>{this.videoElement.addEventListener(_p,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{(function(_p){return _p!==document.body&&document.body.contains(_p)})(this.videoElement)||(this.videoElementStatus=sT.DESTROYED)},1e3),J_("ENABLE_VIDEO_FRAME_CALLBACK"))){var _r,_o;let _p;const _f=(n_,r_)=>{if(this.videoElementStatus===sT.PLAYING){if(_p){const u_=r_.presentationTime-_p.presentationTime;u_>J_("VIDEO_FREEZE_DURATION")&&QO.lastVisibleTime>=QO.lastHiddenTime&&_p.timestamp>QO.lastVisibleTime&&_p.timestamp>QO.lastHiddenTime&&(this.renderFreezeAccTime+=u_)}_p=K6(K6({},r_),{},{timestamp:n_})}var o_,s_;J_("ENABLE_VIDEO_FRAME_CALLBACK")&&((o_=(s_=this.videoElement).requestVideoFrameCallback)===null||o_===void 0||o_.call(s_,_f))};(_r=(_o=this.videoElement).requestVideoFrameCallback)===null||_r===void 0||_r.call(_o,_f)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),nU()&&(this.videoElement.poster="noposter");const _a=I0();_a.name==="Safari"&&Number(_a.version)===15||DR()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,tS()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,tS()&&this.videoElement.load());const _u=this.videoElement.play();_u!==void 0&&_u.catch(_p=>{E_.debug("[".concat(this.trackId,"] playback interrupted"),_p.toString())})}resetVideoElement(){J6.forEach(_r=>{this.videoElement&&this.videoElement.removeEventListener(_r,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=sT.NONE}handleAutoPlayFailed(){const _r=_o=>{_o.preventDefault(),this.videoElement.play().then(()=>{E_.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))}).catch(_a=>{E_.error(_a)}),this.autoplayFailed=!1,sL()?document.body.removeEventListener("click",_r,!0):(document.body.removeEventListener("touchstart",_r,!0),document.body.removeEventListener("mousedown",_r,!0))};sL()?document.body.addEventListener("click",_r,!0):(document.body.addEventListener("touchstart",_r,!0),document.body.addEventListener("mousedown",_r,!0)),tG()}}const J6=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"];class Q6 extends AH{constructor(_r){super(_r),p_(this,"container",void 0),p_(this,"slot",void 0),this.slot=_r.element,this.updateConfig(_r)}updateConfig(_r){this.config=_r,this.trackId=_r.trackId;const _o=_r.element;_o!==this.slot&&(this.destroy(),this.slot=_o),this.createElements()}updateVideoTrack(_r){this.videoTrack!==_r&&(this.videoTrack=_r,this.createElements())}play(_r){var _o;(_o=this.container)!==null&&_o!==void 0&&_o.contains(this.videoElement)&&super.play(_r)}getCurrentFrame(){var _r;return(_r=this.container)!==null&&_r!==void 0&&_r.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(_r){var _o;let _a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return(_o=this.container)!==null&&_o!==void 0&&_o.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(_r,_a):await CH(_r)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch{}this.container=void 0}}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",J_("KEEP_LAST_FRAME")&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}mountedVideoElement(){var _r;!this.container||(_r=this.container)!==null&&_r!==void 0&&_r.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}unmountedVideoElement(){var _r;if((_r=this.container)!==null&&_r!==void 0&&_r.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch{}this.videoElement=document.createElement("video")}}resetVideoElement(){var _r;(_r=this.container)!==null&&_r!==void 0&&_r.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}getContainerElement(){return this.container}}function MF(_n){const _r={};_n.facingMode&&(_r.facingMode=_n.facingMode),_n.cameraId&&(_r.deviceId={exact:_n.cameraId});const _o=lL(_n.encoderConfig);return _r.width=_o.width,_r.height=_o.height,!tU()&&_o.frameRate&&(_r.frameRate=_o.frameRate),I0().name===S0.EDGE&&typeof _r.frameRate=="object"&&(_r.frameRate.max=60),tS()&&(_r.frameRate={ideal:30,max:30}),_r}function x9(_n){const _r={};_n.screenSourceType&&(_r.mediaSource=_n.screenSourceType),_n.extensionId&&$j()&&(_r.extensionId=_n.extensionId);const{displaySurface:_o,selfBrowserSurface:_a,surfaceSwitching:_u,systemAudio:_p}=_n;(yD(107)||F3(107)||Y3(93))&&(_o&&($S(_o,"displaySurface",["browser","window","monitor"]),_r.displaySurface=_o),_a?($S(_a,"selfBrowserSurface",["exclude","include"]),_r.selfBrowserSurface=_a):_r.selfBrowserSurface="include",_u&&($S(_u,"surfaceSwitching",["exclude","include"]),_r.surfaceSwitching=_u)),(yD(105)||F3(105)||Y3(91))&&_p&&($S(_p,"systemAudio",["exclude","include"]),_r.systemAudio=_p),_n.electronScreenSourceId&&(_r.sourceId=_n.electronScreenSourceId);const _f=_n.encoderConfig?D4(_n.encoderConfig):null;return _r.mandatory={chromeMediaSource:"desktop",maxWidth:_f?_f.width:void 0,maxHeight:_f?_f.height:void 0},_f&&(_f.frameRate&&(typeof _f.frameRate=="number"?(_r.mandatory.maxFrameRate=_f.frameRate,_r.mandatory.minFrameRate=_f.frameRate):(_r.mandatory.maxFrameRate=_f.frameRate.max||_f.frameRate.ideal||_f.frameRate.exact||void 0,_r.mandatory.minFrameRate=_f.frameRate.min||_f.frameRate.ideal||_f.frameRate.exact||void 0),_r.frameRate=_f.frameRate),_f.width&&(_r.width=_f.width),_f.height&&(_r.height=_f.height)),_r}function X6(_n){const _r={};if(tU()||(_n.AGC!==void 0&&(_r.autoGainControl=_n.AGC),_n.AEC!==void 0&&(_r.echoCancellation=_n.AEC),_n.ANS!==void 0&&(_r.noiseSuppression=_n.ANS,$j()&&_n.ANS&&(_r.googHighpassFilter=_n.ANS))),_n.encoderConfig){const _o=_F(_n.encoderConfig);_r.channelCount=_o.stereo?2:1,_r.sampleRate=_o.sampleRate,_r.sampleSize=_o.sampleSize}return _n.microphoneId&&(_r.deviceId={exact:_n.microphoneId}),nU()&&(_r.sampleRate=void 0),_r}var HD,DF;(function(_n){_n.COVERED="COVERED",_n.POSITION="POSITION",_n.SIZE="SIZE",_n.STYLE="STYLE"})(HD||(HD={})),function(_n){_n.UNMOUNTED="UNMOUNTED",_n.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(DF||(DF={}));var Z6,eW,tW,nW,rW,iW,oW,sW,aW,cW,uW,lW,dW,hW,pW,fW,mW,_W,gW,vW,yW,EW,bW,SW,n0,wW,TW,RW,IW,CW,AW,OW,NW,VR,kW=new class{constructor(){p_(this,"_clientSize",null),p_(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),p_(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),p_(this,"getStyle",_n=>window.getComputedStyle(_n,null)),p_(this,"checkCssVisibleProperty",_n=>{let _r=!0;const _o=this.getStyle(_n),{display:_a,visibility:_u,opacity:_p,filter:_f}=_o;return(_a==="none"||["hidden","collapse"].includes(_u)||Number(_p)<.1)&&(_r=!1),_r?(_f&&_f.split(" ").filter(n_=>{const r_=n_.split("(")[0];return["brightness","blur","opacity"].includes(r_)}).map(n_=>{const[r_,o_]=n_.split(/\(|\)/);return[r_,Number(o_.match(/^[0-9\.]+/))]}).forEach(n_=>{const[r_,o_]=n_;switch(r_){case"brightness":(o_<.1||o_>3)&&(_r=!1);break;case"blur":o_>3&&(_r=!1);break;case"opacity":o_<.1&&(_r=!1)}}),_r):!1}),p_(this,"checkPropertyUpToAllParentNodes",(_n,_r)=>{let _o=!0,_a=!0;const _u=_f=>_r(_f);let _p=_n;for(;_p&&_a;)_u(_p)||(_o=!1,_a=!1),_p=_p.parentElement,_p||(_a=!1);return _o}),p_(this,"checkActualCssVisibleIncludeInherit",_n=>this.checkPropertyUpToAllParentNodes(_n,this.checkCssVisibleProperty)),p_(this,"getSizeAboutClient",_n=>{const{width:_r,height:_o,left:_a,right:_u,top:_p,bottom:_f}=_n.getBoundingClientRect(),n_=this.getClientWidth(),r_=this.getClientHeight();return{width:_r,height:_o,left:_a,right:_u,top:_p,bottom:_f,clientWidth:n_,clientHeight:r_,clientMin:Math.min(n_,r_)}}),p_(this,"checkActualSize",()=>{const{width:_n,height:_r,clientMin:_o}=this._clientSize;return this.checkSizeIsVisible(_n,_r,_o)}),p_(this,"elementFromPoint",(_n,_r)=>document.elementFromPoint?document.elementFromPoint(_n,_r):null),p_(this,"checkCoverForAPoint",(_n,_r,_o)=>{const _a=this.elementFromPoint(_n,_r);return _a!==null&&_a!==_o}),p_(this,"getPointPositionList",()=>{const{width:_n,height:_r,left:_o,top:_a}=this._clientSize,_u=_n/6,_p=_r/6,_f=[],n_=10**6;for(let r_=0;r_<5;r_++)for(let o_=0;o_<5;o_++){const s_=(_o*n_+(r_===0?.1:r_===4?(_u*r_*n_-1e5)/n_:_u*r_)*n_)/n_,u_=(_a*n_+(o_===0?.1:o_===4?(_p*o_*n_-1e5)/n_:_p*o_)*n_)/n_;_f.push({x:s_,y:u_})}return[..._f]}),p_(this,"checkElementCover",_n=>this.getPointPositionList().map(_r=>this.checkCoverForAPoint(_r.x,_r.y,_n)).filter(_r=>!!_r).length>6),p_(this,"checkSizeIsVisible",(_n,_r,_o)=>(_n>50||_o/_n<=10)&&(_r>50||_o/_r<=10)),p_(this,"checkSizeOfPartInClient",()=>{const{left:_n,right:_r,top:_o,bottom:_a,clientHeight:_u,clientWidth:_p,clientMin:_f}=this._clientSize;let n_,r_,o_,s_;if(_n<0)n_=0;else{if(!(_n<_p))return!1;n_=_n}if(_r<0)return!1;if(r_=_r<_p?_r:_p,_o<0)o_=0;else{if(!(_o<_u))return!1;o_=_o}if(_a<0)return!1;s_=_a<_u?_a:_u;const u_=r_-n_,g_=s_-o_;return this.checkSizeIsVisible(u_,g_,_f)}),p_(this,"returnHiddenResult",_n=>(this._clientSize=null,{visible:!1,reason:_n})),p_(this,"checkOneElementVisible",_n=>{if(_n instanceof HTMLElement){if(this.checkElementIsMountedOnDom(_n)){if(this.checkActualCssVisibleIncludeInherit(_n)){if(this._clientSize=this.getSizeAboutClient(_n),this.checkElementCover(_n))return this.returnHiddenResult(HD.COVERED);{const _r=this.checkActualSize(),_o=this.checkSizeOfPartInClient();return _r&&!_o?this.returnHiddenResult(HD.POSITION):_r?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(HD.SIZE)}}return this.returnHiddenResult(HD.STYLE)}return this.returnHiddenResult(DF.UNMOUNTED)}return this.returnHiddenResult(DF.INVALID_HTML_ELEMENT)}),p_(this,"checkElementIsMountedOnDom",_n=>this.checkPropertyUpToAllParentNodes(_n,_r=>_r.nodeName.toUpperCase()!=="HTML"?_r.parentElement!==null:!!document.documentElement))}};function xW(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function RU(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?xW(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):xW(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}let yS=(Z6=ME({argsMap:(_n,_r,_o)=>[_n.getTrackId(),typeof _r=="string"?_r:_r instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",_o]}),eW=hS(),tW=ME({argsMap:_n=>[_n.getTrackId()]}),nW=DD("LocalVideoTrack","_enabledMutex"),rW=ME({argsMap:(_n,_r)=>[_n.getTrackId(),_r]}),iW=hS(),oW=DD("LocalVideoTrack","_enabledMutex"),sW=ME({argsMap:(_n,_r)=>[_n.getTrackId(),_r]}),aW=hS(),cW=ME({argsMap:(_n,_r)=>[_n.getTrackId(),_r]}),uW=hS(),lW=hS(),dW=ME({argsMap:(_n,_r,_o)=>[_n.getTrackId(),_r,_o]}),hW=hS(),pW=hS(),fW=hS(),mW=hS(),_W=hS(),gW=hS(),vW=hS(),yW=ME({argsMap:(_n,_r)=>[_n.getTrackId(),_r.name]}),EW=ME({argsMap:_n=>[_n.getTrackId()]}),bW=ME({argsMap:_n=>[_n.getTrackId()]}),SW=ME({argsMap:(_n,_r,_o)=>[_n.getTrackId(),_r.label,_o]}),oE((n0=class JK extends cH{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==sT.PLAYING)}get processorContext(){return this._processorContext}set processorContext(_r){this._processorContext=_r}get __className__(){return"LocalVideoTrack"}constructor(_r,_o,_a,_u,_p,_f){if(super(_r,_p),p_(this,"trackMediaType","video"),p_(this,"_player",void 0),p_(this,"_videoVisibleTimer",null),p_(this,"_previousVideoVisibleStatus",void 0),p_(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),p_(this,"_encoderConfig",void 0),p_(this,"_scalabiltyMode",{numSpatialLayers:1,numTemporalLayers:1}),p_(this,"_optimizationMode",void 0),p_(this,"_videoHeight",void 0),p_(this,"_videoWidth",void 0),p_(this,"_forceBitrateLimit",void 0),p_(this,"_enabled",!0),p_(this,"processorDestination",void 0),p_(this,"_processorContext",void 0),rT()){const{width:n_,height:r_}=_r.getSettings();this._videoWidth=n_,this._videoHeight=r_}else this.updateMediaStreamTrackResolution();this._encoderConfig=_o,this._scalabiltyMode=_a,this._optimizationMode=_u,this._hints=_f||[],this._hints.indexOf(NS.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile(),_o&&this._hints.indexOf(NS.CUSTOM_TRACK)!==-1&&this.setEncoderConfiguration(_o),this.processorContext=new yG(this.getTrackId(),"local"),this.processorDestination=new vG(this.processorContext),this.bindProcessorDestinationEvents()}play(_r){let _o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof _r=="string"){const _u=document.getElementById(_r);_u?_r=_u:(E_.warning("[".concat(this.getTrackId(),'] can not find "#').concat(_r,'" element, use document.body')),_r=document.body)}E_.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(_r instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(_o));const _a=RU(RU(RU({},this._getDefaultPlayerConfig()),_o),{},{trackId:this.getTrackId(),element:_r});this._player?this._player.updateConfig(_a):(_r instanceof HTMLVideoElement?this._player=new AH(_a):this._player=new Q6(_a),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const _u=this.getVideoElementVisibleStatus();this.emit(eN.VIDEO_ELEMENT_VISIBLE_STATUS,_u)}catch{}},J_("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,E_.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(_r,_o){if(!_o){if(_r===this._enabled)return;this.stateCheck("enabled",_r)}if(E_.info("[".concat(this.getTrackId(),"] start setEnabled"),_r),!_r){this._originMediaStreamTrack.enabled=!1;try{await aS(this,UE.NEED_DISABLE_TRACK,this)}catch(_a){throw E_.error("[".concat(this.getTrackId(),"] setEnabled to false error"),_a.toString()),_a}return _o||(this._enabled=!1),void E_.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await aS(this,UE.NEED_ENABLE_TRACK,this)}catch(_a){throw E_.error("[".concat(this.getTrackId(),"] setEnabled to true error"),_a.toString()),_a}E_.info("[".concat(this.getTrackId(),"] setEnabled to true success")),_o||(this._enabled=!0)}async setMuted(_r){_r!==this._muted&&(this.stateCheck("muted",_r),this._muted=_r,this._originMediaStreamTrack.enabled=!_r,E_.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(_r)),_r?await aS(this,UE.NEED_MUTE_TRACK,this):await aS(this,UE.NEED_UNMUTE_TRACK,this))}async setEncoderConfiguration(_r,_o){if(!this._enabled)throw new U_(k_.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");if(_r=lL(_r),this._forceBitrateLimit&&(_r.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:_r.bitrateMax,_r.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:_r.bitrateMin),_r.width||_r.height||_r.frameRate){const _a=MF({encoderConfig:_r});(rT()||KS()||uI())&&(_a.deviceId=void 0),E_.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(_r),JSON.stringify(_a));try{await this._originMediaStreamTrack.applyConstraints(_a),this.updateMediaStreamTrackResolution()}catch(_u){const _p=new U_(k_.UNEXPECTED_ERROR,_u.toString());throw E_.error("[".concat(this.getTrackId(),"] applyConstraints error"),_p.toString()),_p}}this._encoderConfig=_r,this._hints.indexOf(NS.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await aS(this,UE.NEED_UPDATE_VIDEO_ENCODER,this)}catch(_a){return _a.throw()}}getStats(){return bU(()=>{E_.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),_O(this,UE.GET_STATS)||RU({},K4)}async setBeautyEffect(_r){E_.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(_r){let _o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(_r,_o):await CH(_r)}clone(_r,_o,_a,_u){const _p=this._mediaStreamTrack.clone();return new JK(_p,_r,_o,_a,_u)}async setBitrateLimit(_r){if(E_.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(_r))),_r){this._forceBitrateLimit=_r,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<_r.max_bitrate?this._encoderConfig.bitrateMax:_r.max_bitrate:this._encoderConfig.bitrateMax=_r.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=_r.min_bitrate);try{await aS(this,UE.NEED_UPDATE_VIDEO_ENCODER,this)}catch(_o){return _o.throw()}}}async setOptimizationMode(_r){if(_r!=="motion"&&_r!=="detail"&&_r!=="balanced")return void E_.error(k_.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");const _o=this._optimizationMode;try{this._optimizationMode=_r,await aS(this,UE.SET_OPTIMIZATION_MODE,this)}catch(_a){throw this._optimizationMode=_o,E_.error("[".concat(this.getTrackId(),"] set optimization mode failed"),_a.toString()),_a}E_.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(_r,")"))}setScalabiltyMode(_r){if(_r.numSpatialLayers===1&&_r.numTemporalLayers!==1)return E_.error(k_.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabiltyMode=_r,E_.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(_r,")"))}updateMediaStreamTrackResolution(){p6(this._originMediaStreamTrack).then(_r=>{let[_o,_a]=_r;this._videoHeight=_a,this._videoWidth=_o}).catch(OF)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:_r,height:_o,frameRate:_a}=this.getMediaStreamTrackSettings();if(!_r||!_o||!_a)return;const[_u,_p]=function(_f,n_,r_){const o_=J_("BITRATE_ADAPTER_TYPE");let s_;const u_=200*Math.pow(r_/15,.6)*Math.pow(_f*n_/640/360,.75),g_=u_;if(o_==="STANDARD_BITRATE")s_=4*u_;else{if(o_!=="COMPATIABLE_BITRATE")return;s_=2*u_}return[Math.floor(s_),Math.floor(g_)]}(_r,_o,_a)||[void 0,void 0];this._encoderConfig.bitrateMin||this._encoderConfig.bitrateMax||(this._encoderConfig.bitrateMin=_p,this._encoderConfig.bitrateMax=_u,E_.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(_r,", h: ").concat(_o,", fps: ").concat(_a,"] => [brMax: ").concat(_u,", brMin: ").concat(_p,"]")))}getVideoElementVisibleStatus(){try{var _r,_o;const _a=this==null||(_r=this._player)===null||_r===void 0?void 0:_r.getContainerElement(),_u={track:this,element:this==null||(_o=this._player)===null||_o===void 0?void 0:_o.getVideoElement(),slot:_a==null?void 0:_a.parentElement},{element:_p,slot:_f}=_u;if(this.isPlaying&&_p instanceof HTMLVideoElement&&_f instanceof HTMLElement){const n_=kW.checkOneElementVisible(_p),r_=Object.assign({},n_);if(r_.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=r_.visible;const o_=AE.reportApiInvoke(null,{tag:nS.TRACER,name:wS.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});r_.visible?o_.onSuccess("Video is visible"):o_.onSuccess("Invisible because of ".concat(r_.reason))}return r_}return}catch(_a){throw new U_(k_.GET_VIDEO_ELEMENT_VISIBLE_ERROR,_a.message)}}async renewMediaStreamTrack(_r){}pipe(_r){if(this.processor===_r)return _r;if(_r._source)throw new U_(k_.INVALID_OPERATION,"Processor ".concat(_r.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=_r,this.processor._source=this,_r.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),_r}unpipe(){if(!this.processor)return;const _r=this.processor;this.processor._source=void 0,this.processor=void 0,_r.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}async replaceTrack(_r,_o){if(!(_r instanceof MediaStreamTrack))throw new U_(k_.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if(_r.kind!=="video")throw new U_(k_.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(_r,_o,!0),this.updateMediaStreamTrackResolution()}bindProcessorDestinationEvents(){this.processorDestination.on(uT.ON_TRACK,async _r=>{_r?_r!==this._mediaStreamTrack&&(this._mediaStreamTrack=_r,this._updatePlayerSource(),await aS(this,UE.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await aS(this,UE.NEED_REPLACE_TRACK,this))})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(uT.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(JT.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(JT.REQUEST_CONSTRAINTS)}}).prototype,"play",[Z6,eW],Object.getOwnPropertyDescriptor(n0.prototype,"play"),n0.prototype),oE(n0.prototype,"stop",[tW],Object.getOwnPropertyDescriptor(n0.prototype,"stop"),n0.prototype),oE(n0.prototype,"setEnabled",[nW,rW,iW],Object.getOwnPropertyDescriptor(n0.prototype,"setEnabled"),n0.prototype),oE(n0.prototype,"setMuted",[oW,sW,aW],Object.getOwnPropertyDescriptor(n0.prototype,"setMuted"),n0.prototype),oE(n0.prototype,"setEncoderConfiguration",[cW,uW],Object.getOwnPropertyDescriptor(n0.prototype,"setEncoderConfiguration"),n0.prototype),oE(n0.prototype,"getStats",[lW],Object.getOwnPropertyDescriptor(n0.prototype,"getStats"),n0.prototype),oE(n0.prototype,"setBeautyEffect",[dW,hW],Object.getOwnPropertyDescriptor(n0.prototype,"setBeautyEffect"),n0.prototype),oE(n0.prototype,"getCurrentFrameData",[pW],Object.getOwnPropertyDescriptor(n0.prototype,"getCurrentFrameData"),n0.prototype),oE(n0.prototype,"getCurrentFrameImage",[fW],Object.getOwnPropertyDescriptor(n0.prototype,"getCurrentFrameImage"),n0.prototype),oE(n0.prototype,"setBitrateLimit",[mW],Object.getOwnPropertyDescriptor(n0.prototype,"setBitrateLimit"),n0.prototype),oE(n0.prototype,"setOptimizationMode",[_W],Object.getOwnPropertyDescriptor(n0.prototype,"setOptimizationMode"),n0.prototype),oE(n0.prototype,"setScalabiltyMode",[gW],Object.getOwnPropertyDescriptor(n0.prototype,"setScalabiltyMode"),n0.prototype),oE(n0.prototype,"updateMediaStreamTrackResolution",[vW],Object.getOwnPropertyDescriptor(n0.prototype,"updateMediaStreamTrackResolution"),n0.prototype),oE(n0.prototype,"pipe",[yW],Object.getOwnPropertyDescriptor(n0.prototype,"pipe"),n0.prototype),oE(n0.prototype,"unpipe",[EW],Object.getOwnPropertyDescriptor(n0.prototype,"unpipe"),n0.prototype),oE(n0.prototype,"close",[bW],Object.getOwnPropertyDescriptor(n0.prototype,"close"),n0.prototype),oE(n0.prototype,"replaceTrack",[SW],Object.getOwnPropertyDescriptor(n0.prototype,"replaceTrack"),n0.prototype),n0),LW=(wW=ME({argsMap:(_n,_r)=>[_n.getTrackId(),_r]}),TW=hS(),RW=DD("CameraVideoTrack","_enabledMutex"),IW=ME({argsMap:(_n,_r)=>[_n.getTrackId(),_r]}),CW=hS(),AW=ME({argsMap:(_n,_r)=>[_n.getTrackId(),_r]}),OW=hS(),NW=ME({argsMap:_n=>[_n.getTrackId()]}),oE((VR=class extends yS{get __className__(){return"CameraVideoTrack"}constructor(_n,_r,_o,_a,_u,_p){super(_n,lL(_r.encoderConfig),_a,_u,_p),p_(this,"_config",void 0),p_(this,"_originalConstraints",void 0),p_(this,"_constraints",void 0),p_(this,"_enabled",!0),p_(this,"_deviceName","default"),p_(this,"tryResumeVideoForIOS15WeChat",async()=>{DR()&&!eU()&&q3()&&this._enabled&&!this._isClosed&&(E_.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())}),this._config=_r,this._originalConstraints=_o,this._constraints=_o,this._deviceName=_n.label,this._encoderConfig=lL(this._config.encoderConfig),c0.on(PS.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),c0.on(PS.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),this.bindProcessorContextEvents()}async setDevice(_n){if(E_.info("[".concat(this.getTrackId(),"] set device to ").concat(_n)),this._enabled)try{const _r=await IR.getDeviceById(_n),_o={};_o.video=RU({},this._constraints),_o.video.deviceId={exact:_n},_o.video.facingMode=void 0,this._originMediaStreamTrack.stop();let _a=null;try{_a=await fI(_o,this.getTrackId())}catch(_u){throw E_.error("[".concat(this.getTrackId(),"] setDevice failed"),_u.toString()),_a=await fI({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(_a.getVideoTracks()[0],!1),_u}await this._updateOriginMediaStreamTrack(_a.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=_r.label,this._config.cameraId=_n,this._constraints.deviceId={exact:_n}}catch(_r){throw E_.error("[".concat(this.getTrackId(),"] setDevice error"),_r.toString()),_r}else try{const _r=await IR.getDeviceById(_n);this._deviceName=_r.label,this._config.cameraId=_n,this._constraints.deviceId={exact:_n}}catch(_r){throw E_.error("[".concat(this.getTrackId(),"] setDevice error"),_r.toString()),_r}E_.info("[".concat(this.getTrackId(),"] setDevice success"))}async setEnabled(_n,_r){if(!_r){if(_n===this._enabled)return;this.stateCheck("enabled",_n)}if(E_.info("[".concat(this.getTrackId(),"] start setEnabled"),_n),_n){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{const _o=await fI({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(_o.getVideoTracks()[0],!1)}await aS(this,UE.NEED_ENABLE_TRACK,this)}catch(_o){throw E_.error("[".concat(this.getTrackId(),"] setEnabled true error"),_o.toString()),_o}this.updateMediaStreamTrackResolution(),E_.info("[".concat(this.getTrackId(),"] setEnabled to true success")),_r||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),_r||(this._enabled=!1);try{await aS(this,UE.NEED_DISABLE_TRACK,this)}catch(_o){throw E_.error("[".concat(this.getTrackId(),"] setEnabled to false error"),_o.toString()),_o}E_.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(_n,_r){if(!this._enabled)throw new U_(k_.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");_n=lL(_n),this._forceBitrateLimit&&(_n.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:_n.bitrateMax,_n.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:_n.bitrateMin);const _o=vS(this._config);_o.encoderConfig=_n;const _a=MF(_o);(rT()||KS()||uI())&&(_a.deviceId=void 0),E_.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(_n),JSON.stringify(_a));try{await this._originMediaStreamTrack.applyConstraints(_a),this.updateMediaStreamTrackResolution()}catch(_u){const _p=new U_(k_.UNEXPECTED_ERROR,_u.toString());throw E_.error("[".concat(this.getTrackId(),"] applyConstraints error"),_p.toString()),_p}this._config=_o,this._constraints=_a,this._originalConstraints=_a,this._encoderConfig=_n,this._hints.indexOf(NS.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await aS(this,UE.NEED_UPDATE_VIDEO_ENCODER,this)}catch(_u){return _u.throw()}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((KS()||uI())&&this._enabled&&!this._isClosed&&c0.duringInterruption){const _n=async()=>{c0.off(PS.IOS_INTERRUPTION_END,_n),this._enabled&&!this._isClosed&&(E_.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};c0.on(PS.IOS_INTERRUPTION_END,_n)}else E_.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(eN.TRACK_ENDED)}async renewMediaStreamTrack(_n){const _r=_n||this._constraints,_o=IR.searchDeviceIdByName(this._deviceName);if(_o&&!_r.deviceId&&(_r.deviceId={exact:_o}),this._enabled){const _a=await fI({video:_r},this.getTrackId());this._constraints=_r,await this._updateOriginMediaStreamTrack(_a.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),c0.off(PS.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),c0.off(PS.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat)}bindProcessorContextEvents(){this.processorContext.on(JT.REQUEST_UPDATE_CONSTRAINTS,async(_n,_r,_o)=>{try{const _a=Object.assign({},this._originalConstraints,..._n);await this.renewMediaStreamTrack(_a),_r()}catch(_a){_o(_a)}}),this.processorContext.on(JT.REQUEST_CONSTRAINTS,async _n=>{_n(this._originMediaStreamTrack.getSettings())})}}).prototype,"setDevice",[wW,TW],Object.getOwnPropertyDescriptor(VR.prototype,"setDevice"),VR.prototype),oE(VR.prototype,"setEnabled",[RW,IW,CW],Object.getOwnPropertyDescriptor(VR.prototype,"setEnabled"),VR.prototype),oE(VR.prototype,"setEncoderConfiguration",[AW,OW],Object.getOwnPropertyDescriptor(VR.prototype,"setEncoderConfiguration"),VR.prototype),oE(VR.prototype,"close",[NW],Object.getOwnPropertyDescriptor(VR.prototype,"close"),VR.prototype),VR);class OH{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio)return this._audioTrack}get videoTrack(){if(this.hasVideo)return this._videoTrack}constructor(_r,_o){p_(this,"uid",void 0),p_(this,"_uintid",void 0),p_(this,"_trust_in_room_",!0),p_(this,"_trust_audio_enabled_state_",!0),p_(this,"_trust_video_enabled_state_",!0),p_(this,"_trust_audio_mute_state_",!0),p_(this,"_trust_video_mute_state_",!0),p_(this,"_audio_muted_",!1),p_(this,"_video_muted_",!1),p_(this,"_audio_enabled_",!0),p_(this,"_video_enabled_",!0),p_(this,"_audio_added_",!1),p_(this,"_video_added_",!1),p_(this,"_trust_video_stream_added_state_",!0),p_(this,"_trust_audio_stream_added_state_",!0),p_(this,"_audioTrack",void 0),p_(this,"_videoTrack",void 0),p_(this,"_audioSSRC",void 0),p_(this,"_videoSSRC",void 0),p_(this,"_audioOrtc",void 0),p_(this,"_videoOrtc",void 0),p_(this,"_cname",void 0),p_(this,"_rtxSsrcId",void 0),this.uid=_r,this._uintid=_o}}var L9=uO,M9=Y1,D9=YM;v0({target:"Promise",stat:!0},{try:function(_n){var _r=M9.f(this),_o=D9(_n);return(_o.error?_r.reject:_r.resolve)(_o.value),_r.promise}});var NH=L9,P9=v0,j9=c_,U9=Wt,$9=EU,F9=f0,Y9=KR,B9=XR,MW=j4,V9=H5,H9=J5,G9=tR,DW=xS("isConcatSpreadable"),PW=9007199254740991,jW="Maximum allowed index exceeded",UW=j9.TypeError,q9=G9>=51||!U9(function(){var _n=[];return _n[DW]=!1,_n.concat()[0]!==_n}),W9=H9("concat"),z9=function(_n){if(!F9(_n))return!1;var _r=_n[DW];return _r!==void 0?!!_r:$9(_n)};P9({target:"Array",proto:!0,forced:!q9||!W9},{concat:function(_n){var _r,_o,_a,_u,_p,_f=Y9(this),n_=V9(_f,0),r_=0;for(_r=-1,_a=arguments.length;_r<_a;_r++)if(z9(_p=_r===-1?_f:arguments[_r])){if(r_+(_u=B9(_p))>PW)throw UW(jW);for(_o=0;_o<_u;_o++,r_++)_o in _p&&MW(n_,r_,_p[_o])}else{if(r_>=PW)throw UW(jW);MW(n_,r_++,_p)}return n_.length=r_,n_}});var $W={},K9=K_,J9=C0,FW=R1.f,Q9=g5,YW=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];$W.f=function(_n){return YW&&K9(_n)=="Window"?function(_r){try{return FW(_r)}catch{return Q9(YW)}}(_n):FW(J9(_n))};var IU={},X9=xS;IU.f=X9;var BW=$E,Z9=eT,eQ=IU,tQ=yT.f,QS=function(_n){var _r=BW.Symbol||(BW.Symbol={});Z9(_r,_n)||tQ(_r,_n,{value:eQ.f(_n)})},GD=v0,kH=c_,nQ=K0,rQ=f_,CU=W_,iQ=e_,WD=R_,EL=bO,xH=Wt,pT=eT,oQ=EU,sQ=S_,aQ=f0,cQ=t_,LH=nR,MH=iR,uQ=KR,PF=C0,DH=RO,VW=YO,PH=Y_,AU=YN,HW=nT,lQ=R1,GW=$W,jH=lE,qW=T_,WW=yT,dQ=LP,zW=A_,hQ=l2,UH=wM,OU=i1.exports,KW=C1,JW=tT,QW=xS,pQ=IU,fQ=QS,mQ=QN,XW=SM,jF=q5.forEach,CR=PO("hidden"),UF="Symbol",ZW=QW("toPrimitive"),_Q=XW.set,_z=XW.getterFor(UF),FI=Object.prototype,rN=kH.Symbol,bL=rN&&rN.prototype,e8=kH.TypeError,$H=kH.QObject,NU=nQ("JSON","stringify"),t8=qW.f,iN=WW.f,n8=GW.f,gQ=zW.f,r8=iQ([].push),e1=OU("symbols"),kU=OU("op-symbols"),FH=OU("string-to-symbol-registry"),YH=OU("symbol-to-string-registry"),vQ=OU("wks"),BH=!$H||!$H.prototype||!$H.prototype.findChild,VH=WD&&xH(function(){return AU(iN({},"a",{get:function(){return iN(this,"a",{value:7}).a}})).a!=7})?function(_n,_r,_o){var _a=t8(FI,_r);_a&&delete FI[_r],iN(_n,_r,_o),_a&&_n!==FI&&iN(FI,_r,_a)}:iN,HH=function(_n,_r){var _o=e1[_n]=AU(bL);return _Q(_o,{type:UF,tag:_n,description:_r}),WD||(_o.description=_r),_o},$F=function(_n,_r,_o){_n===FI&&$F(kU,_r,_o),MH(_n);var _a=DH(_r);return MH(_o),pT(e1,_a)?(_o.enumerable?(pT(_n,CR)&&_n[CR][_a]&&(_n[CR][_a]=!1),_o=AU(_o,{enumerable:PH(0,!1)})):(pT(_n,CR)||iN(_n,CR,PH(1,{})),_n[CR][_a]=!0),VH(_n,_a,_o)):iN(_n,_a,_o)},GH=function(_n,_r){MH(_n);var _o=PF(_r),_a=HW(_o).concat(qH(_o));return jF(_a,function(_u){WD&&!CU(i8,_o,_u)||$F(_n,_u,_o[_u])}),_n},i8=function(_n){var _r=DH(_n),_o=CU(gQ,this,_r);return!(this===FI&&pT(e1,_r)&&!pT(kU,_r))&&(!(_o||!pT(this,_r)||!pT(e1,_r)||pT(this,CR)&&this[CR][_r])||_o)},o8=function(_n,_r){var _o=PF(_n),_a=DH(_r);if(_o!==FI||!pT(e1,_a)||pT(kU,_a)){var _u=t8(_o,_a);return!_u||!pT(e1,_a)||pT(_o,CR)&&_o[CR][_a]||(_u.enumerable=!0),_u}},s8=function(_n){var _r=n8(PF(_n)),_o=[];return jF(_r,function(_a){pT(e1,_a)||pT(KW,_a)||r8(_o,_a)}),_o},qH=function(_n){var _r=_n===FI,_o=n8(_r?kU:PF(_n)),_a=[];return jF(_o,function(_u){!pT(e1,_u)||_r&&!pT(FI,_u)||r8(_a,e1[_u])}),_a};if(EL||(UH(bL=(rN=function(){if(cQ(bL,this))throw e8("Symbol is not a constructor");var _n=arguments.length&&arguments[0]!==void 0?VW(arguments[0]):void 0,_r=JW(_n),_o=function(_a){this===FI&&CU(_o,kU,_a),pT(this,CR)&&pT(this[CR],_r)&&(this[CR][_r]=!1),VH(this,_r,PH(1,_a))};return WD&&BH&&VH(FI,_r,{configurable:!0,set:_o}),HH(_r,_n)}).prototype,"toString",function(){return _z(this).tag}),UH(rN,"withoutSetter",function(_n){return HH(JW(_n),_n)}),zW.f=i8,WW.f=$F,dQ.f=GH,qW.f=o8,lQ.f=GW.f=s8,jH.f=qH,pQ.f=function(_n){return HH(QW(_n),_n)},WD&&iN(bL,"description",{configurable:!0,get:function(){return _z(this).description}})),GD({global:!0,wrap:!0,forced:!EL,sham:!EL},{Symbol:rN}),jF(HW(vQ),function(_n){fQ(_n)}),GD({target:UF,stat:!0,forced:!EL},{for:function(_n){var _r=VW(_n);if(pT(FH,_r))return FH[_r];var _o=rN(_r);return FH[_r]=_o,YH[_o]=_r,_o},keyFor:function(_n){if(!LH(_n))throw e8(_n+" is not a symbol");if(pT(YH,_n))return YH[_n]},useSetter:function(){BH=!0},useSimple:function(){BH=!1}}),GD({target:"Object",stat:!0,forced:!EL,sham:!WD},{create:function(_n,_r){return _r===void 0?AU(_n):GH(AU(_n),_r)},defineProperty:$F,defineProperties:GH,getOwnPropertyDescriptor:o8}),GD({target:"Object",stat:!0,forced:!EL},{getOwnPropertyNames:s8,getOwnPropertySymbols:qH}),GD({target:"Object",stat:!0,forced:xH(function(){jH.f(1)})},{getOwnPropertySymbols:function(_n){return jH.f(uQ(_n))}}),NU&&GD({target:"JSON",stat:!0,forced:!EL||xH(function(){var _n=rN();return NU([_n])!="[null]"||NU({a:_n})!="{}"||NU(Object(_n))!="{}"})},{stringify:function(_n,_r,_o){var _a=hQ(arguments),_u=_r;if((aQ(_r)||_n!==void 0)&&!LH(_n))return oQ(_r)||(_r=function(_p,_f){if(sQ(_u)&&(_f=CU(_u,this,_p,_f)),!LH(_f))return _f}),_a[1]=_r,rQ(NU,null,_a)}}),!bL[ZW]){var yQ=bL.valueOf;UH(bL,ZW,function(_n){return CU(yQ,this)})}mQ(rN,UF),KW[CR]=!0,QS("asyncIterator"),QS("hasInstance"),QS("isConcatSpreadable"),QS("iterator"),QS("match"),QS("matchAll"),QS("replace"),QS("search"),QS("species"),QS("split"),QS("toPrimitive"),QS("toStringTag"),QS("unscopables"),QN(c_.JSON,"JSON",!0);var EQ=$E.Symbol;QS("asyncDispose"),QS("dispose"),QS("matcher"),QS("metadata"),QS("observable"),QS("patternMatch"),QS("replaceAll");var a8=EQ,c8=IU.f("asyncIterator"),bQ=c8;function u8(_n){this.wrapped=_n}function xU(_n){var _r,_o;function _a(_p,_f){try{var n_=_n[_p](_f),r_=n_.value,o_=r_ instanceof u8;NH.resolve(o_?r_.wrapped:r_).then(function(s_){o_?_a(_p==="return"?"return":"next",s_):_u(n_.done?"return":"normal",s_)},function(s_){_a("throw",s_)})}catch(s_){_u("throw",s_)}}function _u(_p,_f){switch(_p){case"return":_r.resolve({value:_f,done:!0});break;case"throw":_r.reject(_f);break;default:_r.resolve({value:_f,done:!1})}(_r=_r.next)?_a(_r.key,_r.arg):_o=null}this._invoke=function(_p,_f){return new NH(function(n_,r_){var o_={key:_p,arg:_f,resolve:n_,reject:r_,next:null};_o?_o=_o.next=o_:(_r=_o=o_,_a(_p,_f))})},typeof _n.return!="function"&&(this.return=void 0)}function _I(_n){return function(){return new xU(_n.apply(this,arguments))}}function i0(_n){return new u8(_n)}xU.prototype[typeof a8=="function"&&bQ||"@@asyncIterator"]=function(){return this},xU.prototype.next=function(_n){return this._invoke("next",_n)},xU.prototype.throw=function(_n){return this._invoke("throw",_n)},xU.prototype.return=function(_n){return this._invoke("return",_n)};var SQ=IU.f("iterator");function LU(_n,_r){var _o={},_a=!1;function _u(_p,_f){return _a=!0,_f=new NH(function(n_){n_(_n[_p](_f))}),{done:!1,value:_r(_f)}}return _o[a8!==void 0&&SQ||"@@iterator"]=function(){return this},_o.next=function(_p){return _a?(_a=!1,_p):_u("next",_p)},typeof _n.throw=="function"&&(_o.throw=function(_p){if(_a)throw _a=!1,_p;return _u("throw",_p)}),typeof _n.return=="function"&&(_o.return=function(_p){return _a?(_a=!1,_p):_u("return",_p)}),_o}var l8=c8,ES={exports:{}};function d8(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function h8(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?d8(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):d8(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}function WH(_n,_r,_o,_a,_u,_p,_f){let n_=[],r_=[],o_=[],s_=[],u_=!1,g_=!1;if(ES.exports.parse(_n).mediaDescriptions.forEach(w_=>{_f&&_f!==w_.attributes.direction||(w_.media.mediaType!=="video"||u_||(r_=w_.attributes.payloads,s_=w_.attributes.extmaps,u_=!0),w_.media.mediaType!=="audio"||g_||(n_=w_.attributes.payloads,o_=w_.attributes.extmaps,g_=!0))}),!s_||r_.length===0)throw new Error("Cannot get video capabilities from SDP.");if(!o_||n_.length===0)throw new Error("Cannot get audio capabilities from SDP.");return r_.forEach(w_=>{var D_;(D_=w_.rtpMap)!==null&&D_!==void 0&&D_.clockRate&&(w_.rtpMap.clockRate=parseInt(w_.rtpMap.clockRate))}),n_.forEach(w_=>{var D_;(D_=w_.rtpMap)!==null&&D_!==void 0&&D_.clockRate&&(w_.rtpMap.clockRate=parseInt(w_.rtpMap.clockRate))}),_r&&(n_=n_.filter(w_=>{var D_;return((D_=w_.rtpMap)===null||D_===void 0?void 0:D_.encodingName.toLowerCase())!=="rtx"}),r_=r_.filter(w_=>{var D_;return((D_=w_.rtpMap)===null||D_===void 0?void 0:D_.encodingName.toLowerCase())!=="rtx"})),_o&&(r_=r_.filter(w_=>{var D_;return!/(red)|(ulpfec)|(flexfec)/i.test(((D_=w_.rtpMap)===null||D_===void 0?void 0:D_.encodingName)||"")})),_a&&(n_=n_.filter(w_=>{var D_;return!/(red)|(ulpfec)|(flexfec)/i.test(((D_=w_.rtpMap)===null||D_===void 0?void 0:D_.encodingName)||"")})),_u&&(_u==null?void 0:_u.length)>0&&(n_=n_.filter(w_=>{var D_;return _u.includes(((D_=w_.rtpMap)===null||D_===void 0?void 0:D_.encodingName.toLowerCase())||"")})),_p&&(_p==null?void 0:_p.length)>0&&(r_=r_.filter(w_=>{var D_;return _p.includes(((D_=w_.rtpMap)===null||D_===void 0?void 0:D_.encodingName.toLowerCase())||"")})),{audioCodecs:n_,videoCodecs:r_,audioExtensions:o_,videoExtensions:s_}}function SL(_n){const _r=ES.exports.parse(_n);let _o,_a;for(const _u of _r.mediaDescriptions){if(!_o){const _p=_u.attributes.iceUfrag,_f=_u.attributes.icePwd;if(!_p||!_f)throw new Error("Cannot get iceUfrag or icePwd from SDP.");_o={iceUfrag:_p,icePwd:_f}}if(!_a){const _p=_u.attributes.fingerprints;_p.length>0&&(_a={fingerprints:_p})}}if(!_a&&_r.attributes.fingerprints.length>0&&(_a={fingerprints:_r.attributes.fingerprints}),!_a||!_o)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:_o,dtlsParameters:_a}}function p8(_n,_r){const _o=[],_a=_n.attributes.ssrcGroups.filter(_f=>_f.semantic==="FID"),_u=_n.attributes.ssrcGroups.find(_f=>_f.semantic==="SIM"),_p=_n.attributes.ssrcs;if(_u)_u.ssrcIds.forEach(_f=>{var n_;const r_=(n_=_a.find(o_=>o_.ssrcIds[0]===_f))===null||n_===void 0?void 0:n_.ssrcIds[1];_o.push({ssrcId:_f,rtx:_r?r_:void 0})});else if(_a.length>0){const _f=_a[0].ssrcIds[0],n_=_a[0].ssrcIds[1];_o.push({ssrcId:_f,rtx:_r?n_:void 0})}else{if(_p.length===0)throw new Error("No ssrcs found on local media description.");_o.push({ssrcId:_p[0].ssrcId})}return _o}function f8(_n,_r){const{cname:_o}=_n;let _a;_r&&_r.ip&&typeof _r.port=="number"?(_a=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:_r.ip,port:_r.port.toString(),type:"host",extension:{}}],E_.debug("Using remote candidate from AP ".concat(_r.ip,":").concat(_r.port)),_r.ip6&&(_a.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:_r.ip6,port:_r.port.toString(),type:"host",extension:{}}),E_.debug("Using IPV6 remote candidate from AP ".concat(_r.ip6,":").concat(_r.port)))):_a=_n.iceParameters.candidates.map(n_=>({foundation:n_.foundation,componentId:"1",transport:n_.protocol,priority:n_.priority.toString(),connectionAddress:n_.ip,port:n_.port.toString(),type:n_.type,extension:{}}));const _u={fingerprints:_n.dtlsParameters.fingerprints.map(n_=>({hashFunction:n_.algorithm,fingerprint:n_.fingerprint}))},_p={iceUfrag:_n.iceParameters.iceUfrag,icePwd:_n.iceParameters.icePwd};let _f;switch(_n.dtlsParameters.role){case"server":_f="passive";break;case"client":_f="active";break;case"auto":_f="actpass"}return{dtlsParameters:_u,iceParameters:_p,candidates:_a,rtpCapabilities:JH(_n.rtpCapabilities),setup:_f,cname:_o}}function HR(_n,_r,_o){const _a=[],_u=[];return _n.forEach(_p=>{let{ssrcId:_f,rtx:n_}=_p;const r_=X0(8,"track-"),o_={ssrcId:_f,attributes:h8({label:r_,mslabel:_o=_o||X0(10,""),msid:"".concat(_o," ").concat(r_)},_r&&{cname:_r})};if(_a.push(o_),n_!==void 0){const s_={ssrcId:n_,attributes:h8({label:r_,mslabel:_o,msid:"".concat(_o," ").concat(r_)},_r&&{cname:_r})};_a.push(s_),_u.push({semantic:"FID",ssrcIds:[_f,n_]})}}),_n.length>1&&_u.push({semantic:"SIM",ssrcIds:_n.map(_p=>{let{ssrcId:_f}=_p;return _f})}),{ssrcs:_a,ssrcGroups:_u}}function zD(_n,_r){_r instanceof lT&&_n.attributes.payloads.forEach(_o=>{var _a;const _u=(_a=_o.rtpMap)===null||_a===void 0?void 0:_a.encodingName.toLowerCase();if(!_u||["opus","pcmu","pcma","g722"].indexOf(_u)===-1)return;_o.fmtp||(_o.fmtp={parameters:{}}),_o.fmtp.parameters.minptime="10",_o.fmtp.parameters.useinbandfec="1";const _p=_r._encoderConfig;_p&&_u!=="pcmu"&&_u!=="pcma"&&_u!=="g722"&&(_p.bitrate&&!tS()&&(_o.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*_p.bitrate))),_p.sampleRate&&(_o.fmtp.parameters.maxplaybackrate="".concat(_p.sampleRate),_o.fmtp.parameters["sprop-maxcapturerate"]="".concat(_p.sampleRate)),_p.stereo&&(_o.fmtp.parameters.stereo="1",_o.fmtp.parameters["sprop-stereo"]="1"))})}function zH(_n){const _r=_n.attributes.unrecognized.findIndex(_o=>_o.attField==="x-google-flag"&&_o.attValue==="conference");_r!==-1&&_n.attributes.unrecognized.splice(_r,1)}function KH(_n,_r){if(!(_r instanceof yS&&_r._encoderConfig&&_r._hints.indexOf(NS.SCREEN_TRACK)===-1))return;const _o=_r._encoderConfig;VS().supportMinBitrate&&_o.bitrateMin&&_n.attributes.payloads.forEach(_a=>{var _u;["h264","vp8","vp9","av1"].includes(((_u=_a.rtpMap)===null||_u===void 0?void 0:_u.encodingName.toLowerCase())||"")&&(_a.fmtp||(_a.fmtp={parameters:{}}),_a.fmtp.parameters["x-google-min-bitrate"]="".concat(_o.bitrateMin))}),VS().supportMinBitrate&&!_r._hints.includes(NS.LOW_STREAM)&&_o.bitrateMax&&_n.attributes.payloads.forEach(_a=>{var _u;["h264","vp8","vp9","av1"].includes(((_u=_a.rtpMap)===null||_u===void 0?void 0:_u.encodingName.toLowerCase())||"")&&(_a.fmtp||(_a.fmtp={parameters:{}}),_a.fmtp.parameters["x-google-start-bitrate"]="".concat(J_("X_GOOGLE_START_BITRATE")||Math.floor(_o.bitrateMax)))})}function m8(_n){if(_n.media.mediaType!=="video")return;const _r=I0();if(_r.name!==S0.SAFARI&&_r.os!==zS.IOS)return;const _o=_n.attributes.extmaps.findIndex(_a=>/video-orientation/g.test(_a.extensionName));_o!==-1&&_n.attributes.extmaps.splice(_o,1)}function FF(_n,_r,_o){if(!_r)return;let _a,_u;if(_n.media.mediaType==="video"?(_a=_o.videoExtensions,_u=_o.videoCodecs):(_a=_o.audioExtensions,_u=_o.audioCodecs),_r.twcc===!0){const _p=_a.find(_f=>_f.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");_p&&(_n.attributes.extmaps.find(_f=>_f.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")||_n.attributes.extmaps.push({entry:_p.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),function(_f,n_){return n_.filter(r_=>!!_f.find(o_=>o_.payloadType===r_.payloadType&&!!o_.rtcpFeedbacks.find(s_=>s_.type==="transport-cc")))}(_u,_n.attributes.payloads).forEach(_f=>{_f.rtcpFeedbacks.find(n_=>n_.type==="transport-cc")||_f.rtcpFeedbacks.push({type:"transport-cc"})}))}else if(_r.twcc===!1){const _p=_n.attributes.extmaps.findIndex(_f=>_f.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");_p!==-1&&_n.attributes.extmaps.splice(_p,1),_n.attributes.payloads.forEach(_f=>{const n_=_f.rtcpFeedbacks.findIndex(r_=>r_.type==="transport-cc");n_!==-1&&_f.rtcpFeedbacks.splice(n_,1)})}if(_r.remb===!0){const _p=_a.find(_f=>_f.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");_p&&(_n.attributes.extmaps.find(_f=>_f.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time")||_n.attributes.extmaps.push({entry:_p.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(_f,n_){return n_.filter(r_=>!!_f.find(o_=>o_.payloadType===r_.payloadType&&!!o_.rtcpFeedbacks.find(s_=>s_.type==="goog-remb")))}(_u,_n.attributes.payloads).forEach(_f=>{_f.rtcpFeedbacks.find(n_=>n_.type==="goog-remb")||_f.rtcpFeedbacks.push({type:"goog-remb"})}))}else if(_r.remb===!1){const _p=_n.attributes.extmaps.findIndex(_f=>_f.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");_p!==-1&&_n.attributes.extmaps.splice(_p,1),_n.attributes.payloads.forEach(_f=>{const n_=_f.rtcpFeedbacks.findIndex(r_=>r_.type==="goog-remb");n_!==-1&&_f.rtcpFeedbacks.splice(n_,1)})}}function _8(_n,_r,_o){if(tS()||_n.media.mediaType!=="video"||!(_r instanceof yS)||_o!=="vp9"&&_o!=="vp8"||_o==="vp8"&&!J_("SIMULCAST")||_r._scalabiltyMode===void 0||_r._scalabiltyMode.numSpatialLayers<=1)return;const _a=_o==="vp8"?2:_r._scalabiltyMode.numSpatialLayers,_u=_n.attributes.ssrcs[0],_p=_n.attributes.ssrcGroups.find(n_=>n_.semantic==="FID"&&n_.ssrcIds[0]===_u.ssrcId),_f={semantic:"SIM",ssrcIds:[_u.ssrcId]};for(let n_=1;n_<_a;n_++)_n.attributes.ssrcs.push({ssrcId:_u.ssrcId+n_,attributes:vS(_u.attributes)}),_f.ssrcIds.push(_u.ssrcId+n_),_p&&(_n.attributes.ssrcs.push({ssrcId:_p.ssrcIds[1]+n_,attributes:vS(_u.attributes)}),_n.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[_u.ssrcId+n_,_p.ssrcIds[1]+n_]}));_n.attributes.ssrcGroups.unshift(_f)}async function g8(_n,_r,_o,_a,_u){const _p=new RTCPeerConnection;_p.addTransceiver("video",{direction:"sendonly"}),_p.addTransceiver("audio",{direction:"sendonly"}),_p.addTransceiver("video",{direction:"recvonly"}),_p.addTransceiver("audio",{direction:"recvonly"});const _f=(await _p.createOffer()).sdp,n_=WH(_f,_n,_r,_o,_a,_u,"sendonly"),r_=WH(_f,_n,_r,_o,_a,_u,"recvonly"),o_={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},s_={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},u_={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(YF(n_,r_,"videoExtensions",o_,s_,u_),YF(n_,r_,"videoCodecs",o_,s_,u_),YF(n_,r_,"audioExtensions",o_,s_,u_),YF(n_,r_,"audioCodecs",o_,s_,u_),J_("RAISE_H264_BASELINE_PRIORITY")){const g_=u_.videoCodecs.findIndex(w_=>{var D_,M_;return((D_=w_.rtpMap)===null||D_===void 0?void 0:D_.encodingName.toLocaleLowerCase())==="h264"&&((M_=w_.fmtp)===null||M_===void 0?void 0:M_.parameters["profile-level-id"])==="42001f"});if(g_!==-1){const w_=u_.videoCodecs.findIndex(D_=>{var M_;return((M_=D_.rtpMap)===null||M_===void 0?void 0:M_.encodingName.toLocaleLowerCase())==="h264"});if(w_<g_){E_.debug("raising H264 baseline profile priority");const D_=u_.videoCodecs[g_];u_.videoCodecs.splice(g_,1),u_.videoCodecs.splice(w_,0,D_)}w_!==-1&&(s_.videoCodecs=s_.videoCodecs.filter(D_=>{var M_,P_;return!(((M_=D_.rtpMap)===null||M_===void 0?void 0:M_.encodingName.toLocaleLowerCase())==="h264"&&((P_=D_.fmtp)===null||P_===void 0?void 0:P_.parameters["profile-level-id"])!=="42001f")})),w_!==-1&&J_("FILTER_SEND_H264_BASELINE")&&(o_.videoCodecs=o_.videoCodecs.filter(D_=>{var M_,P_;return!(((M_=D_.rtpMap)===null||M_===void 0?void 0:M_.encodingName.toLocaleLowerCase())==="h264"&&((P_=D_.fmtp)===null||P_===void 0?void 0:P_.parameters["profile-level-id"])!=="42001f")}))}}try{_p.close()}catch{}return{send:o_,recv:s_,sendrecv:u_}}function YF(_n,_r,_o,_a,_u,_p){if(_o==="videoExtensions"||_o==="audioExtensions"){const _f=[];return _n[_o].forEach(n_=>{_r[_o].some((r_,o_)=>{if(n_.entry===r_.entry&&n_.extensionName===r_.extensionName)return _f.push(o_),!0})?_p[_o].push(n_):_a[_o].push(n_)}),void _r[_o].forEach((n_,r_)=>{_f.indexOf(r_)===-1&&_u[_o].push(n_)})}if(_o==="videoCodecs"||_o==="audioCodecs"){const _f=[];return _n[_o].forEach(n_=>{_r[_o].some((r_,o_)=>{if(n_.payloadType===r_.payloadType&&JSON.stringify(n_)===JSON.stringify(r_))return _f.push(o_),!0})?_p[_o].push(n_):_a[_o].push(n_)}),void _r[_o].forEach((n_,r_)=>{_f.indexOf(r_)===-1&&_u[_o].push(n_)})}}function JH(_n){const{send:_r,recv:_o,sendrecv:_a}=_n;if(!_a){if(!_r||!_o)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:_r,recv:_o}}let _u,_p;return _r?(_u={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},_u.audioCodecs=[..._r.audioCodecs,..._a.audioCodecs],_u.videoCodecs=[..._r.videoCodecs,..._a.videoCodecs],_u.audioExtensions=[..._r.audioExtensions,..._a.audioExtensions],_u.videoExtensions=[..._r.videoExtensions,..._a.videoExtensions]):_u=_a,_o?(_p={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},_p.audioCodecs=[..._o.audioCodecs,..._a.audioCodecs],_p.videoCodecs=[..._o.videoCodecs,..._a.videoCodecs],_p.audioExtensions=[..._o.audioExtensions,..._a.audioExtensions],_p.videoExtensions=[..._o.videoExtensions,..._a.videoExtensions]):_p=_a,{send:_u,recv:_p}}function oN(_n){_n.media.mediaType==="audio"&&_n.attributes.payloads.filter(_r=>{var _o;return((_o=_r.rtpMap)===null||_o===void 0?void 0:_o.encodingName.toLowerCase())==="opus"}).forEach(_r=>{_r.fmtp||(_r.fmtp={parameters:{}}),_r.fmtp.parameters.stereo="1",_r.fmtp.parameters["sprop-stereo"]="1"})}(function(_n,_r){_n.exports=(()=>{var _o={8:(_p,_f,n_)=>{n_.r(_f),n_.d(_f,{Parser:()=>z0,Printer:()=>ZT,parse:()=>FE,print:()=>p0});const r_=`
`,o_="".concat("\r").concat(r_),s_=" ";let u_;function g_(pE){return pE>="0"&&pE<="9"}function w_(pE){return pE>="!"&&pE<="~"}function D_(pE){return w_(pE)||pE>=""&&pE<=""}function M_(pE){return pE==="!"||pE>="#"&&pE<="'"||pE>="*"&&pE<="+"||pE>="-"&&pE<="."||pE>="0"&&pE<="9"||pE>="A"&&pE<="Z"||pE>="^"&&pE<="~"}function P_(pE){return pE>="1"&&pE<="9"}function _g(pE){return pE>="A"&&pE<="Z"||pE>="a"&&pE<="z"}function _y(pE){return pE==="d"||pE==="h"||pE==="m"||pE==="s"}function hE(pE){return pE>""&&pE<"	"||pE>"\v"&&pE<"\f"||pE>""&&pE<""}function NE(pE){return _g(pE)||g_(pE)||pE==="+"||pE==="/"}function mE(pE){return g_(pE)||_g(pE)||pE==="+"||pE==="/"||pE==="-"||pE==="_"}function _E(pE){return _g(pE)||g_(pE)||pE==="+"||pE==="/"}function dE(pE,m_){var L_=Object.keys(pE);if(Object.getOwnPropertySymbols){var V_=Object.getOwnPropertySymbols(pE);m_&&(V_=V_.filter(function(iE){return Object.getOwnPropertyDescriptor(pE,iE).enumerable})),L_.push.apply(L_,V_)}return L_}function IE(pE){for(var m_=1;m_<arguments.length;m_++){var L_=arguments[m_]!=null?arguments[m_]:{};m_%2?dE(Object(L_),!0).forEach(function(V_){j0(pE,V_,L_[V_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pE,Object.getOwnPropertyDescriptors(L_)):dE(Object(L_)).forEach(function(V_){Object.defineProperty(pE,V_,Object.getOwnPropertyDescriptor(L_,V_))})}return pE}function j0(pE,m_,L_){return m_ in pE?Object.defineProperty(pE,m_,{value:L_,enumerable:!0,configurable:!0,writable:!0}):pE[m_]=L_,pE}(function(pE){pE.VERSION="v",pE.ORIGIN="o",pE.SESSION_NAME="s",pE.INFORMATION="i",pE.URI="u",pE.EMAIL="e",pE.PHONE="p",pE.CONNECTION="c",pE.BANDWIDTH="b",pE.TIME="t",pE.REPEAT="r",pE.ZONE_ADJUSTMENTS="z",pE.KEY="k",pE.ATTRIBUTE="a",pE.MEDIA="m"})(u_||(u_={}));class GE{consumeText(m_,L_){let V_=L_;for(;V_<m_.length;){const iE=m_[V_];if(iE==="\0"||iE==="\r"||iE===r_)break;V_+=1}if(V_-L_==0)throw new Error("Invalid text, at ".concat(m_));return V_}consumeUnicastAddress(m_,L_,V_){return this.consumeTill(m_,L_,s_)}consumeOneOrMore(m_,L_,V_){let iE=L_;for(;V_(m_[iE]);)iE++;if(iE-L_==0)throw new Error("Invalid rule at ".concat(L_,"."));return iE}consumeSpace(m_,L_){if(m_[L_]===s_)return L_+1;throw new Error("Invalid space at ".concat(L_,"."))}consumeIP4Address(m_,L_){let V_=L_;for(let iE=0;iE<4;iE++)if(V_=this.consumeDecimalUChar(m_,V_),iE!==3){if(m_[V_]!==".")throw new Error("Invalid IP4 address.");V_++}return V_}consumeDecimalUChar(m_,L_){let V_=L_;for(let BE=0;BE<3&&g_(m_[V_]);BE++,V_++);if(V_-L_==0)throw new Error("Invalid decimal uchar.");const iE=parseInt(m_.slice(L_,V_));if(iE>=0&&iE<=255)return V_;throw new Error("Invalid decimal uchar")}consumeIP6Address(m_,L_){let V_=this.consumeHexpart(m_,L_);return m_[V_]===":"&&(V_+=1,V_=this.consumeIP4Address(m_,V_)),V_}consumeHexpart(m_,L_){let V_=L_;if(m_[V_]===":"&&m_[V_+1]===":"){V_+=2;try{V_=this.consumeHexseq(m_,V_)}catch{}return V_}if(V_=this.consumeHexseq(m_,V_),m_[V_]===":"&&m_[V_+1]===":"){V_+=2;try{V_=this.consumeHexseq(m_,V_)}catch{}return V_}return V_}consumeHexseq(m_,L_){let V_=L_;for(;V_=this.consumeHex4(m_,V_),m_[V_]===":"&&m_[V_+1]!==":";)V_+=1;return V_}consumeHex4(m_,L_){let V_=0;for(;V_<4;V_++)if(!((iE=m_[L_+V_])>="0"&&iE<="9"||iE>="a"&&iE<="f"||iE>="A"&&iE<="F")){if(V_===0)throw new Error("Invalid hex 4");break}var iE;return L_+V_}consumeFQDN(m_,L_){let V_=L_;for(;g_(m_[V_])||_g(m_[V_])||m_[V_]==="-"||m_[V_]===".";)V_+=1;if(V_-L_<4)throw new Error("Invalid FQDN");return V_}consumeExtnAddr(m_,L_){return this.consumeOneOrMore(m_,L_,D_)}consumeMulticastAddress(m_,L_,V_){switch(V_){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(m_,L_);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(m_,L_);default:try{return this.consumeFQDN(m_,L_)}catch{return this.consumeExtnAddr(m_,L_)}}}consumeIP6MulticastAddress(m_,L_){const V_=this.consumeHexpart(m_,L_);return m_[V_]==="/"?this.consumeInteger(m_,V_+1):V_}consumeIP4MulticastAddress(m_,L_){let V_=L_+3;const iE=m_.slice(L_,V_),BE=parseInt(iE);if(BE<224||BE>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let H0=0;H0<3;H0++){if(m_[V_]!==".")throw new Error("Invalid IP4 multicast address.");V_+=1,V_=this.consumeDecimalUChar(m_,V_)}return m_[V_]==="/"&&(V_+=1),V_=this.consumeTTL(m_,V_),m_[V_]==="/"&&(V_=this.consumeInteger(m_,V_)),V_}consumeInteger(m_,L_){if(!P_(m_[L_]))throw new Error("Invalid integer.");for(L_+=1;g_(m_[L_]);)L_+=1;return L_}consumeTTL(m_,L_){if(m_[L_]==="0")return L_+1;if(!P_(m_[L_]))throw new Error("Invalid TTL.");L_+=1;for(let V_=0;V_<2&&g_(m_[L_]);V_++)L_+=1;return L_}consumeToken(m_,L_){return this.consumeOneOrMore(m_,L_,M_)}consumeTime(m_,L_){let V_=L_;if(m_[V_]==="0")return V_+1;for(P_(m_[V_])&&(V_+=1);g_(m_[V_]);)V_++;if(V_-L_<10)throw new Error("Invalid time");return V_}consumeAddress(m_,L_){return this.consumeTill(m_,L_,s_)}consumeTypedTime(m_,L_){let V_=L_;return V_=this.consumeOneOrMore(m_,V_,g_),_y(m_[V_])?V_+1:V_}consumeRepeatInterval(m_,L_){if(!P_(m_[L_]))throw new Error("Invalid repeat interval");for(L_+=1;g_(m_[L_]);)L_+=1;return _y(m_[L_])&&(L_+=1),L_}consumePort(m_,L_){return this.consumeOneOrMore(m_,L_,g_)}consume(m_,L_,V_){for(let iE=0;iE<V_.length;iE++){if(L_+iE>=m_.length)throw new Error("consume exceeding value length");if(m_[L_+iE]!==V_[iE])throw new Error("consume ".concat(V_," failed at ").concat(iE))}return L_+V_.length}consumeTill(m_,L_,V_){let iE=L_;for(;iE<m_.length&&(typeof V_!="string"||m_[iE]!==V_)&&(typeof V_!="function"||!V_(m_[iE]));)iE++;return iE}}class z0 extends GE{constructor(){super(),j0(this,"records",[]),j0(this,"currentLine",0)}parse(m_){const L_=this.probeEOL(m_);this.records=m_.split(L_).filter(FT=>!!FT.trim()).map(this.parseLine),this.currentLine=0;const V_=this.parseVersion(),iE=this.parseOrigin(),BE=this.parseSessionName(),H0=this.parseInformation(),ZS=this.parseUri(),yI=this.parseEmail(),uN=this.parsePhone(),zR=this.parseConnection(),lN=this.parseBandWidth(),QD=this.parseTimeFields(),cS=this.parseKey(),bS=this.parseSessionAttribute(),F0=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:V_,origin:iE,sessionName:BE,information:H0,uri:ZS,emails:yI,phones:uN,connection:zR,bandwidths:lN,timeFields:QD,key:cS,attributes:bS,mediaDescriptions:F0}}getCurrentRecord(){const m_=this.records[this.currentLine];if(!m_)throw new Error("Record doesn't exit.");return m_}probeEOL(m_){for(let L_=0;L_<m_.length;L_++)if(m_[L_]===r_)return m_[L_-1]==="\r"?o_:r_;throw new Error("Invalid newline character.")}parseLine(m_,L_){if(m_.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const V_=m_[0];if(m_[1]!=="=")throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:V_,value:m_.slice(2),line:L_,cur:0}}parseSessionAttribute(){const m_=new fS;for(;this.currentLine<this.records.length;){const L_=this.getCurrentRecord();if(L_.type!==u_.ATTRIBUTE)break;const V_={attField:this.extractOneOrMore(L_,iE=>M_(iE)&&iE!==":"),_cur:0};L_.value[L_.cur]===":"&&(L_.cur+=1,V_.attValue=this.extractOneOrMore(L_,hE)),m_.parse(V_),this.currentLine++}return m_.digest()}parseMediaAttributes(m_){const L_=new XS(m_);for(;this.currentLine<this.records.length;){const V_=this.getCurrentRecord();if(V_.type!==u_.ATTRIBUTE)break;const iE={attField:this.extractOneOrMore(V_,BE=>M_(BE)&&BE!==":"),_cur:0};V_.value[V_.cur]===":"&&(V_.cur+=1,iE.attValue=this.extractOneOrMore(V_,hE)),L_.parse(iE),this.currentLine++}return L_.digest()}parseKey(){const m_=this.getCurrentRecord();if(m_.type===u_.KEY){if(m_.value==="prompt"||m_.value==="clear:"||m_.value==="base64:"||m_.value==="uri:")return m_.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const m_=this.getCurrentRecord();if(m_.type===u_.ZONE_ADJUSTMENTS){const L_=[];for(;;)try{const V_=this.extract(m_,this.consumeTime);this.consumeSpaceForRecord(m_);let iE=!1;m_.value[m_.cur]==="-"&&(iE=!0,m_.cur+=1);const BE=this.extract(m_,this.consumeTypedTime);L_.push({time:V_,typedTime:BE,back:iE})}catch{break}if(L_.length===0)throw new Error("Invalid zone adjustments");return this.currentLine++,L_}return[]}parseRepeat(){const m_=[];for(;;){const L_=this.getCurrentRecord();if(L_.type!==u_.REPEAT)break;{const V_=this.extract(L_,this.consumeRepeatInterval),iE=this.parseTypedTime(L_);m_.push({repeatInterval:V_,typedTimes:iE}),this.currentLine++}}return m_}parseTypedTime(m_){const L_=[];for(;;)try{this.consumeSpaceForRecord(m_),L_.push(this.extract(m_,this.consumeTypedTime))}catch{break}if(L_.length===0)throw new Error("Invalid typed time.");return L_}parseTime(){const m_=this.getCurrentRecord(),L_=this.extract(m_,this.consumeTime);this.consumeSpaceForRecord(m_);const V_=this.extract(m_,this.consumeTime);return this.currentLine++,{startTime:L_,stopTime:V_}}parseBandWidth(){const m_=[];for(;this.currentLine<this.records.length;){const L_=this.getCurrentRecord();if(L_.type!==u_.BANDWIDTH)break;{const V_=this.extractOneOrMore(L_,M_);if(L_.value[L_.cur]!==":")throw new Error("Invalid bandwidth field.");L_.cur++;const iE=this.extractOneOrMore(L_,g_);m_.push({bwtype:V_,bandwidth:iE}),this.currentLine++}}return m_}parseVersion(){const m_=this.getCurrentRecord();if(m_.type!==u_.VERSION)throw new Error("first sdp record must be version");const L_=m_.value.slice(0,this.consumeOneOrMore(m_.value,0,g_));if(L_.length!==m_.value.length)throw new Error('invalid proto version, "v='.concat(m_.value,'"'));return this.currentLine++,L_}parseOrigin(){const m_=this.getCurrentRecord();if(m_.type!==u_.ORIGIN)throw new Error("second line of sdp must be origin");const L_=this.extractOneOrMore(m_,D_);this.consumeSpaceForRecord(m_);const V_=this.extractOneOrMore(m_,g_);this.consumeSpaceForRecord(m_);const iE=this.extractOneOrMore(m_,g_);this.consumeSpaceForRecord(m_);const BE=this.extractOneOrMore(m_,M_);this.consumeSpaceForRecord(m_);const H0=this.extractOneOrMore(m_,M_);this.consumeSpaceForRecord(m_);const ZS=this.extract(m_,this.consumeUnicastAddress);return this.currentLine++,{username:L_,sessId:V_,sessVersion:iE,nettype:BE,addrtype:H0,unicastAddress:ZS}}parseSessionName(){const m_=this.getCurrentRecord();if(m_.type===u_.SESSION_NAME){const L_=this.extract(m_,this.consumeText);return this.currentLine++,L_}}parseInformation(){const m_=this.getCurrentRecord();if(m_.type!==u_.INFORMATION)return;const L_=this.extract(m_,this.consumeText);return this.currentLine++,L_}parseUri(){const m_=this.getCurrentRecord();if(m_.type===u_.URI)return this.currentLine++,m_.value}parseEmail(){const m_=[];for(;;){const L_=this.getCurrentRecord();if(L_.type!==u_.EMAIL)break;m_.push(L_.value),this.currentLine++}return m_}parsePhone(){const m_=[];for(;;){const L_=this.getCurrentRecord();if(L_.type!==u_.PHONE)break;m_.push(L_.value),this.currentLine++}return m_}parseConnection(){const m_=this.getCurrentRecord();if(m_.type===u_.CONNECTION){const L_=this.extractOneOrMore(m_,M_);this.consumeSpaceForRecord(m_);const V_=this.extractOneOrMore(m_,M_);this.consumeSpaceForRecord(m_);const iE=this.extract(m_,this.consumeAddress);return this.currentLine++,{nettype:L_,addrtype:V_,address:iE}}}parseMedia(){const m_=this.getCurrentRecord(),L_=this.extract(m_,this.consumeToken);this.consumeSpaceForRecord(m_);let V_=this.extract(m_,this.consumePort);m_.value[m_.cur]==="/"&&(m_.cur+=1,V_+=this.extract(m_,this.consumeInteger)),this.consumeSpaceForRecord(m_);const iE=[];for(iE.push(this.extract(m_,this.consumeToken));m_.value[m_.cur]==="/";)m_.cur+=1,iE.push(this.extract(m_,this.consumeToken));if(iE.length===0)throw new Error("Invalid proto");const BE=this.parseFmt(m_);return this.currentLine++,{mediaType:L_,port:V_,protos:iE,fmts:BE}}parseTimeFields(){const m_=[];for(;this.getCurrentRecord().type===u_.TIME;){const L_=this.parseTime(),V_=this.parseRepeat(),iE=this.parseZone();m_.push({time:L_,repeats:V_,zones:iE})}return m_}parseMediaDescription(){const m_=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===u_.MEDIA;){const L_=this.parseMedia(),V_=this.parseInformation(),iE=this.parseConnections(),BE=this.parseBandWidth(),H0=this.parseKey(),ZS=this.parseMediaAttributes(L_);m_.push({media:L_,information:V_,connections:iE,bandwidths:BE,key:H0,attributes:ZS})}return m_}parseConnections(){const m_=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===u_.CONNECTION;)m_.push(this.parseConnection());return m_}parseFmt(m_){const L_=[];for(;;)try{this.consumeSpaceForRecord(m_),L_.push(this.extract(m_,this.consumeToken))}catch{break}if(L_.length===0)throw new Error("Invalid fmts");return L_}extract(m_,L_,...V_){const iE=L_.call(this,m_.value,m_.cur,...V_),BE=m_.value.slice(m_.cur,iE);return m_.cur=iE,BE}extractOneOrMore(m_,L_){const V_=this.consumeOneOrMore(m_.value,m_.cur,L_),iE=m_.value.slice(m_.cur,V_);return m_.cur=V_,iE}consumeSpaceForRecord(m_){if(m_.value[m_.cur]!==s_)throw new Error("Invalid space at ".concat(m_.cur,"."));m_.cur+=1}}class $0 extends GE{constructor(...m_){super(...m_),j0(this,"attributes",void 0),j0(this,"digested",!1)}extractOneOrMore(m_,L_,V_){const iE=this.consumeOneOrMore(m_.attValue,m_._cur,L_),BE=m_.attValue.slice(m_._cur,iE),[H0,ZS]=V_||[];if(typeof H0=="number"&&BE.length<H0)throw new Error("error in length, should be more or equal than ".concat(H0," characters."));if(typeof ZS=="number"&&BE.length>ZS)throw new Error("error in length, should be less or equal than ".concat(ZS," characters."));return m_._cur=iE,BE}consumeAttributeSpace(m_){if(m_.attValue[m_._cur]!==s_)throw new Error("Invalid space at ".concat(m_._cur,"."));m_._cur+=1}extract(m_,L_,...V_){if(!m_.attValue)throw new Error("Nothing to extract from attValue.");const iE=L_.call(this,m_.attValue,m_._cur,...V_),BE=m_.attValue.slice(m_._cur,iE);return m_._cur=iE,BE}atEnd(m_){if(!m_.attValue)throw new Error;return m_._cur>=m_.attValue.length}peekChar(m_){if(!m_.attValue)throw new Error;return m_.attValue[m_._cur]}peek(m_,L_){if(!m_.attValue)throw new Error;for(let V_=0;V_<L_.length;V_++)if(L_[V_]!==m_.attValue[m_._cur+V_])return!1;return!0}parseIceUfrag(m_){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(m_,NE,[4,256])}parseIcePwd(m_){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(m_,NE,[22,256])}parseIceOptions(m_){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const L_=[];for(;!this.atEnd(m_);){L_.push(this.extractOneOrMore(m_,NE));try{this.consumeAttributeSpace(m_)}catch(V_){if(this.atEnd(m_))break;throw V_}}this.attributes.iceOptions=L_}parseFingerprint(m_){const L_=this.extract(m_,this.consumeToken);this.consumeAttributeSpace(m_);const V_=this.extract(m_,this.consumeTill);this.attributes.fingerprints.push({hashFunction:L_,fingerprint:V_})}parseExtmap(m_){const L_=this.extractOneOrMore(m_,g_);let V_;this.peekChar(m_)==="/"&&(this.extract(m_,this.consume,"/"),V_=this.extract(m_,this.consumeToken)),this.consumeAttributeSpace(m_);const iE=this.extract(m_,this.consumeTill,s_),BE=IE(IE({entry:parseInt(L_,10)},V_&&{direction:V_}),{},{extensionName:iE});this.peekChar(m_)===s_&&(this.consumeAttributeSpace(m_),BE.extensionAttributes=this.extract(m_,this.consumeTill)),this.attributes.extmaps.push(BE)}parseSetup(m_){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const L_=this.extract(m_,this.consumeTill);if(L_!=="active"&&L_!=="passive"&&L_!=="actpass"&&L_!=="holdconn")throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=L_}}class fS extends $0{constructor(...m_){super(...m_),j0(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(m_){if(this.digested)throw new Error("already digested");try{switch(m_.attField){case"group":this.parseGroup(m_);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(m_);break;case"ice-pwd":this.parseIcePwd(m_);break;case"ice-options":this.parseIceOptions(m_);break;case"fingerprint":this.parseFingerprint(m_);break;case"setup":this.parseSetup(m_);break;case"tls-id":this.parseTlsId(m_);break;case"identity":this.parseIdentity(m_);break;case"extmap":this.parseExtmap(m_);break;case"msid-semantic":this.parseMsidSemantic(m_);break;default:m_.ignored=!0,this.attributes.unrecognized.push(m_)}}catch(L_){throw console.error("parsing session attribute ".concat(m_.attField,' error, "a=').concat(m_.attField,":").concat(m_.attValue,'"')),L_}if(!m_.ignored&&m_.attValue&&!this.atEnd(m_))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(m_){const L_=this.extract(m_,this.consumeToken),V_=[];for(;!this.atEnd(m_)&&this.peekChar(m_)===s_;)this.consumeAttributeSpace(m_),V_.push(this.extract(m_,this.consumeToken));this.attributes.groups.push({semantic:L_,identificationTag:V_})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(m_){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(m_,mE)}parseIdentity(m_){const L_=this.extractOneOrMore(m_,_E),V_=[];for(;!this.atEnd(m_)&&this.peekChar(m_)===s_;){this.consumeAttributeSpace(m_);const iE=this.extract(m_,this.consumeToken);this.extract(m_,this.consume,"=");const BE=this.extractOneOrMore(m_,H0=>H0!==s_&&hE(H0));V_.push({name:iE,value:BE})}this.attributes.identities.push({assertionValue:L_,extensions:V_})}parseMsidSemantic(m_){this.peekChar(m_)===s_&&this.consumeAttributeSpace(m_);const L_={semantic:this.extract(m_,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(m_)}catch{break}if(this.peekChar(m_)==="*"){this.extract(m_,this.consume,"*"),L_.applyForAll=!0;break}{const V_=this.extract(m_,this.consumeTill,s_);L_.identifierList.push(V_)}}this.attributes.msidSemantic=L_}}class XS extends $0{constructor(m_){super(),j0(this,"attributes",void 0),m_.protos.indexOf("RTP")!==-1||m_.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(m_){if(this.digested)throw new Error("already digested");try{switch(m_.attField){case"extmap":this.parseExtmap(m_);break;case"setup":this.parseSetup(m_);break;case"ice-ufrag":this.parseIceUfrag(m_);break;case"ice-pwd":this.parseIcePwd(m_);break;case"ice-options":this.parseIceOptions(m_);break;case"candidate":this.parseCandidate(m_);break;case"remote-candidate":this.parseRemoteCandidate(m_);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(m_);break;case"rtpmap":this.parseRtpmap(m_);break;case"ptime":this.parsePtime(m_);break;case"maxptime":this.parseMaxPtime(m_);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(m_);break;case"ssrc":this.parseSSRC(m_);break;case"fmtp":this.parseFmtp(m_);break;case"rtcp-fb":this.parseRtcpFb(m_);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(m_);break;case"mid":this.parseMid(m_);break;case"msid":this.parseMsid(m_);break;case"imageattr":this.parseImageAttr(m_);break;case"rid":this.parseRid(m_);break;case"simulcast":this.parseSimulcast(m_);break;case"sctp-port":this.parseSctpPort(m_);break;case"max-message-size":this.parseMaxMessageSize(m_);break;case"ssrc-group":this.parseSSRCGroup(m_);break;default:m_.ignored=!0,this.attributes.unrecognized.push(m_)}}catch(L_){throw console.error("parsing media attribute ".concat(m_.attField,' error, "a=').concat(m_.attField,":").concat(m_.attValue,'"')),L_}if(!m_.ignored&&m_.attValue&&!this.atEnd(m_))throw new Error("attribute parsing error")}parseCandidate(m_){const L_=this.extractOneOrMore(m_,NE,[1,32]);this.consumeAttributeSpace(m_);const V_=this.extractOneOrMore(m_,g_,[1,5]);this.consumeAttributeSpace(m_);const iE=this.extract(m_,this.consumeToken);this.consumeAttributeSpace(m_);const BE=this.extractOneOrMore(m_,g_,[1,10]);this.consumeAttributeSpace(m_);const H0=this.extract(m_,this.consumeAddress);this.consumeAttributeSpace(m_);const ZS=this.extract(m_,this.consumePort);this.consumeAttributeSpace(m_),this.extract(m_,this.consume,"typ"),this.consumeAttributeSpace(m_);const yI={foundation:L_,componentId:V_,transport:iE,priority:BE,connectionAddress:H0,port:ZS,type:this.extract(m_,this.consumeToken),extension:{}};for(this.peek(m_," raddr")&&(this.extract(m_,this.consume," raddr"),this.consumeAttributeSpace(m_),yI.relAddr=this.extract(m_,this.consumeAddress)),this.peek(m_," rport")&&(this.extract(m_,this.consume," rport"),this.consumeAttributeSpace(m_),yI.relPort=this.extract(m_,this.consumePort));this.peekChar(m_)===s_;){this.consumeAttributeSpace(m_);const uN=this.extract(m_,this.consumeToken);this.consumeAttributeSpace(m_),yI.extension[uN]=this.extractOneOrMore(m_,w_)}this.attributes.candidates.push(yI)}parseRemoteCandidate(m_){const L_=[];for(;;){const V_=this.extractOneOrMore(m_,g_,[1,5]);this.consumeAttributeSpace(m_);const iE=this.extract(m_,this.consumeAddress);this.consumeAttributeSpace(m_);const BE=this.extract(m_,this.consumePort);L_.push({componentId:V_,connectionAddress:iE,port:BE});try{this.consumeAttributeSpace(m_)}catch{break}}this.attributes.remoteCandidatesList.push(L_)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(m_){const L_=this.extract(m_,this.consumeToken);this.consumeAttributeSpace(m_);const V_=this.extract(m_,this.consumeTill,"/");this.extract(m_,this.consume,"/");const iE={encodingName:V_,clockRate:this.extractOneOrMore(m_,g_)};this.atEnd(m_)||this.peekChar(m_)!=="/"||(this.extract(m_,this.consume,"/"),iE.encodingParameters=parseInt(this.extract(m_,this.consumeTill),10));const BE=this.attributes.payloads.find(H0=>H0.payloadType===parseInt(L_,10));BE?BE.rtpMap=iE:this.attributes.payloads.push({payloadType:parseInt(L_,10),rtpMap:iE,rtcpFeedbacks:[]})}parsePtime(m_){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(m_,this.consumeTill)}parseMaxPtime(m_){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(m_,this.consumeTill)}parseDirection(m_){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=m_.attField}parseSSRC(m_){const L_=this.extractOneOrMore(m_,g_);this.consumeAttributeSpace(m_);const V_=this.extract(m_,this.consumeTill,":");let iE;this.peekChar(m_)===":"&&(this.extract(m_,this.consume,":"),iE=this.extract(m_,this.consumeTill));const BE=this.attributes.ssrcs.find(H0=>H0.ssrcId===parseInt(L_,10));BE?BE.attributes[V_]=iE:this.attributes.ssrcs.push({ssrcId:parseInt(L_,10),attributes:{[V_]:iE}})}parseFmtp(m_){const L_=this.extract(m_,this.consumeTill,s_);this.consumeAttributeSpace(m_);const V_=this.extract(m_,this.consumeTill),iE={};V_.split(";").forEach(H0=>{let[ZS,yI]=H0.split("=");ZS=ZS.trim();const uN=typeof yI=="string"?yI.trim():null;typeof ZS=="string"&&ZS.length>0&&(iE[ZS]=uN)});const BE=this.attributes.payloads.find(H0=>H0.payloadType===parseInt(L_,10));BE?BE.fmtp={parameters:iE}:this.attributes.payloads.push({payloadType:parseInt(L_,10),rtcpFeedbacks:[],fmtp:{parameters:iE}})}parseFmtParameters(m_){const L_={},V_=this.extract(m_,this.consumeTill,"=");m_._cur++;const iE=this.extract(m_,this.consumeTill,";");for(L_[V_]=iE;m_.attValue[m_._cur]===";";){const BE=this.extract(m_,this.consumeTill,"=");m_._cur++;const H0=this.extract(m_,this.consumeTill,";");L_[BE]=H0}return L_}parseRtcpFb(m_){let L_="";L_=this.peekChar(m_)==="*"?this.extract(m_,this.consume,"*"):this.extract(m_,this.consumeTill,s_),this.consumeAttributeSpace(m_);const V_=this.extract(m_,this.consumeTill,s_);let iE;switch(V_){case"trr-int":iE={type:V_,interval:this.extract(m_,this.consumeTill)};break;case"ack":case"nack":default:{const BE={type:V_};this.peekChar(m_)===s_&&(this.consumeAttributeSpace(m_),BE.parameter=this.extract(m_,this.consumeToken),this.peekChar(m_)===s_&&(BE.additional=this.extract(m_,this.consumeTill))),iE=BE}}if(L_==="*")this.attributes.rtcpFeedbackWildcards.push(iE);else{const BE=this.attributes.payloads.find(H0=>H0.payloadType===parseInt(L_,10));BE?BE.rtcpFeedbacks.push(iE):this.attributes.payloads.push({payloadType:parseInt(L_,10),rtcpFeedbacks:[iE]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(m_){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const L_={port:this.extract(m_,this.consumePort)};this.peekChar(m_)===s_&&(this.consumeAttributeSpace(m_),L_.netType=this.extractOneOrMore(m_,M_),this.consumeAttributeSpace(m_),L_.addressType=this.extractOneOrMore(m_,M_),this.consumeAttributeSpace(m_),L_.address=this.extract(m_,this.consumeAddress)),this.attributes.rtcp=L_}parseMsid(m_){const L_={id:this.extractOneOrMore(m_,M_,[1,64])};this.peekChar(m_)===s_&&(this.consumeAttributeSpace(m_),L_.appdata=this.extractOneOrMore(m_,M_,[1,64])),this.attributes.msids.push(L_)}parseImageAttr(m_){this.attributes.imageattr.push(m_.attValue)}parseRid(m_){const L_=this.extractOneOrMore(m_,iE=>_g(iE)||g_(iE)||iE==="_"||iE==="-");this.consumeAttributeSpace(m_);const V_={id:L_,direction:this.extract(m_,this.consumeToken),params:[]};if(this.peekChar(m_)===s_){if(this.consumeAttributeSpace(m_),this.peek(m_,"pt=")){this.extract(m_,this.consume,"pt=");const iE=[];for(;;){const BE=this.extract(m_,this.consumeToken);iE.push(BE);try{this.extract(m_,this.consume,",")}catch{break}}V_.payloads=iE,this.peekChar(m_)===s_&&this.extract(m_,this.consume,s_)}for(;;){const iE=this.extract(m_,this.consumeToken);switch(iE){case"depend":{const BE={type:iE,rids:this.extract(m_,this.consume,"=").split(",")};V_.params.push(BE);break}case"max-width":case"height-width":case"max-fps":case"max-fs":case"max-br":case"max-pps":case"max-bpp":default:{const BE={type:iE};this.peekChar(m_)==="="&&(this.extract(m_,this.consume,"="),BE.val=this.extract(m_,this.consumeTill,";")),V_.params.push(BE)}}try{this.extract(m_,this.consume,";")}catch{break}}}this.attributes.rids.push(V_)}parseSimulcast(m_){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=m_.attValue,this.extract(m_,this.consumeTill)}parseSctpPort(m_){this.attributes.sctpPort=this.extractOneOrMore(m_,g_,[1,5])}parseMaxMessageSize(m_){this.attributes.maxMessageSize=this.extractOneOrMore(m_,g_,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(m_){this.attributes.mid=this.extract(m_,this.consumeToken)}parseSSRCGroup(m_){const L_=this.extract(m_,this.consumeToken),V_=[];for(;;)try{this.consumeAttributeSpace(m_);const iE=this.extract(m_,this.consumeInteger);V_.push(parseInt(iE,10))}catch{break}this.attributes.ssrcGroups.push({semantic:L_,ssrcIds:V_})}}function pS(pE,m_,L_){return m_ in pE?Object.defineProperty(pE,m_,{value:L_,enumerable:!0,configurable:!0,writable:!0}):pE[m_]=L_,pE}class ZT{constructor(){pS(this,"eol",o_)}print(m_,L_){let V_="";return L_&&(this.eol=L_),V_+=this.printVersion(m_.version),V_+=this.printOrigin(m_.origin),V_+=this.printSessionName(m_.sessionName),V_+=this.printInformation(m_.information),V_+=this.printUri(m_.uri),V_+=this.printEmail(m_.emails),V_+=this.printPhone(m_.phones),V_+=this.printConnection(m_.connection),V_+=this.printBandwidth(m_.bandwidths),V_+=this.printTimeFields(m_.timeFields),V_+=this.printKey(m_.key),V_+=this.printSessionAttributes(m_.attributes),V_+=this.printMediaDescription(m_.mediaDescriptions),V_}printVersion(m_){return"v=".concat(m_).concat(this.eol)}printOrigin(m_){return"o=".concat(m_.username," ").concat(m_.sessId," ").concat(m_.sessVersion," ").concat(m_.nettype," ").concat(m_.addrtype," ").concat(m_.unicastAddress).concat(this.eol)}printSessionName(m_){return m_?"s=".concat(m_).concat(this.eol):""}printInformation(m_){return m_?"i=".concat(m_).concat(this.eol):""}printUri(m_){return m_?"u=".concat(m_).concat(this.eol):""}printEmail(m_){let L_="";for(const V_ of m_)L_+="e=".concat(V_).concat(this.eol);return L_}printPhone(m_){let L_="";for(const V_ of m_)L_+="e=".concat(V_).concat(this.eol);return L_}printConnection(m_){return m_?"c=".concat(m_.nettype," ").concat(m_.addrtype," ").concat(m_.address).concat(this.eol):""}printBandwidth(m_){let L_="";for(const V_ of m_)L_+="b=".concat(V_.bwtype,":").concat(V_.bandwidth).concat(this.eol);return L_}printTimeFields(m_){let L_="";for(const V_ of m_){L_+="t=".concat(V_.time.startTime," ").concat(V_.time.startTime).concat(this.eol);for(const iE of V_.repeats)L_+="r=".concat(iE.repeatInterval," ").concat(iE.typedTimes.join(" ")).concat(this.eol);V_.zoneAdjustments&&(L_+="z=",L_+="z=".concat(V_.zoneAdjustments.map(iE=>"".concat(iE.time," ").concat(iE.back?"-":""," ").concat(iE.typedTime)).join(" ")).concat(this.eol),L_+=this.eol)}return L_}printKey(m_){return m_?"k=".concat(m_).concat(this.eol):""}printAttributes(m_){let L_="";for(const V_ of m_)L_+="a=".concat(V_.attField).concat(V_.attValue?":".concat(V_.attValue):"").concat(this.eol);return L_}printMediaDescription(m_){let L_="";for(const V_ of m_)L_+=this.printMedia(V_.media),L_+=this.printInformation(V_.information),L_+=this.printConnections(V_.connections),L_+=this.printBandwidth(V_.bandwidths),L_+=this.printKey(V_.key),L_+=this.printMediaAttributes(V_);return L_}printConnections(m_){let L_="";for(const V_ of m_)L_+=this.printConnection(V_);return L_}printMedia(m_){return"m=".concat(m_.mediaType," ").concat(m_.port," ").concat(m_.protos.join("/")," ").concat(m_.fmts.join(" ")).concat(this.eol)}printSessionAttributes(m_){return new sE(this.eol).print(m_)}printMediaAttributes(m_){return new bE(this.eol).print(m_)}}class tE{constructor(m_){pS(this,"eol",void 0),this.eol=m_}printIceUfrag(m_){return m_===void 0?"":"a=ice-ufrag:".concat(m_).concat(this.eol)}printIcePwd(m_){return m_===void 0?"":"a=ice-pwd:".concat(m_).concat(this.eol)}printIceOptions(m_){return m_===void 0?"":"a=ice-options:".concat(m_.join(s_)).concat(this.eol)}printFingerprints(m_){return m_.length>0?m_.map(L_=>"a=fingerprint:".concat(L_.hashFunction).concat(s_).concat(L_.fingerprint)).join(this.eol)+this.eol:""}printExtmap(m_){return m_.map(L_=>"a=extmap:".concat(L_.entry).concat(L_.direction?"/".concat(L_.direction):"").concat(s_).concat(L_.extensionName).concat(L_.extensionAttributes?"".concat(s_).concat(L_.extensionAttributes):"").concat(this.eol)).join("")}printSetup(m_){return m_===void 0?"":"a=setup:".concat(m_).concat(this.eol)}printUnrecognized(m_){return m_.map(L_=>"a=".concat(L_.attField).concat(L_.attValue?":".concat(L_.attValue):"").concat(this.eol)).join("")}}class sE extends tE{print(m_){let L_="";return L_+=this.printGroups(m_.groups),L_+=this.printMsidSemantic(m_.msidSemantic),L_+=this.printIceLite(m_.iceLite),L_+=this.printIceUfrag(m_.iceUfrag),L_+=this.printIcePwd(m_.icePwd),L_+=this.printIceOptions(m_.iceOptions),L_+=this.printFingerprints(m_.fingerprints),L_+=this.printSetup(m_.setup),L_+=this.printTlsId(m_.tlsId),L_+=this.printIdentity(m_.identities),L_+=this.printExtmap(m_.extmaps),L_+=this.printUnrecognized(m_.unrecognized),L_}printGroups(m_){let L_="";return m_.length>0&&(L_+=m_.map(V_=>"a=group:".concat(V_.semantic).concat(V_.identificationTag.map(iE=>"".concat(s_).concat(iE)).join("")).concat(this.eol)).join("")),L_}printIceLite(m_){return m_===void 0?"":"a=ice-lite"+this.eol}printTlsId(m_){return m_?"a=tls-id:".concat(m_).concat(this.eol):""}printIdentity(m_){return m_.length===0?"":m_.map(L_=>"a=identity:".concat(L_.assertionValue).concat(L_.extensions.map(V_=>"".concat(s_).concat(V_.name).concat(V_.value?"=".concat(V_.value):"")))).join(this.eol)+this.eol}printMsidSemantic(m_){if(!m_)return"";let L_="a=msid-semantic:".concat(m_.semantic);return m_.applyForAll?L_+="".concat(s_,"*"):m_.identifierList.length>0&&(L_+=m_.identifierList.map(V_=>"".concat(s_).concat(V_))),L_+this.eol}}class bE extends tE{print(m_){const L_=m_.attributes;let V_="";return V_+=this.printRTCP(L_.rtcp),V_+=this.printIceUfrag(L_.iceUfrag),V_+=this.printIcePwd(L_.icePwd),V_+=this.printIceOptions(L_.iceOptions),V_+=this.printCandidates(L_.candidates),V_+=this.printRemoteCandidatesList(L_.remoteCandidatesList),V_+=this.printEndOfCandidates(L_.endOfCandidates),V_+=this.printFingerprints(L_.fingerprints),V_+=this.printSetup(L_.setup),V_+=this.printMid(L_.mid),V_+=this.printExtmap(L_.extmaps),V_+=this.printRTPRelated(L_),V_+=this.printPtime(L_.ptime),V_+=this.printMaxPtime(L_.maxPtime),V_+=this.printDirection(L_.direction),V_+=this.printSSRCGroups(L_.ssrcGroups),V_+=this.printSSRC(L_.ssrcs),V_+=this.printRTCPMux(L_.rtcpMux),V_+=this.printRTCPMuxOnly(L_.rtcpMuxOnly),V_+=this.printRTCPRsize(L_.rtcpRsize),V_+=this.printMSId(L_.msids),V_+=this.printImageattr(L_.imageattr),V_+=this.printRid(L_.rids),V_+=this.printSimulcast(L_.simulcast),V_+=this.printSCTPPort(L_.sctpPort),V_+=this.printMaxMessageSize(L_.maxMessageSize),V_+=this.printUnrecognized(L_.unrecognized),V_}printCandidates(m_){return m_.map(L_=>"a=candidate:".concat(L_.foundation).concat(s_).concat(L_.componentId).concat(s_).concat(L_.transport).concat(s_).concat(L_.priority).concat(s_).concat(L_.connectionAddress).concat(s_).concat(L_.port).concat(s_,"typ").concat(s_).concat(L_.type).concat(L_.relAddr?"".concat(s_,"raddr").concat(s_).concat(L_.relAddr):"").concat(L_.relPort?"".concat(s_,"rport").concat(s_).concat(L_.relPort):"").concat(Object.keys(L_.extension).map(V_=>"".concat(s_).concat(V_).concat(s_).concat(L_.extension[V_])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(m_){return m_.map(L_=>"a=remote-candidates:".concat(L_.join(s_)).concat(this.eol)).join("")}printEndOfCandidates(m_){return m_===void 0?"":"a=end-of-candidates"+this.eol}printRTPRelated(m_){if(!m_.payloads)return"";const L_=m_.payloads;let V_="";V_+=m_.rtcpFeedbackWildcards.map(iE=>this.printRTCPFeedback("*",iE)).join("");for(const iE of L_)V_+=this.printRtpMap(iE.payloadType,iE.rtpMap),V_+=this.printFmtp(iE.payloadType,iE.fmtp),V_+=iE.rtcpFeedbacks.map(BE=>this.printRTCPFeedback(iE.payloadType,BE)).join("");return V_}printFmtp(m_,L_){if(!L_)return"";const V_=Object.keys(L_.parameters);return V_.length===1&&L_.parameters[V_[0]]===null?"a=fmtp:".concat(m_).concat(s_).concat(V_[0]).concat(this.eol):"a=fmtp:".concat(m_).concat(s_).concat(Object.keys(L_.parameters).map(iE=>"".concat(iE,"=").concat(L_.parameters[iE])).join(";")).concat(this.eol)}printRtpMap(m_,L_){return L_?"a=rtpmap:".concat(m_).concat(s_).concat(L_.encodingName,"/").concat(L_.clockRate).concat(L_.encodingParameters?"/".concat(L_.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(m_,L_){let V_="a=rtcp-fb:".concat(m_).concat(s_),iE=L_;switch(iE.type){case"trr-int":V_+="ttr-int".concat(s_).concat(iE.interval);break;case"ack":case"nack":default:iE=iE,V_+="".concat(iE.type),iE.parameter&&(V_+="".concat(s_).concat(iE.parameter),iE.additional&&(V_+="".concat(s_).concat(iE.additional)))}return V_+this.eol}printPtime(m_){return m_===void 0?"":"a=ptime:".concat(m_).concat(this.eol)}printMaxPtime(m_){return m_===void 0?"":"a=maxptime:".concat(m_).concat(this.eol)}printDirection(m_){return m_===void 0?"":"a=".concat(m_).concat(this.eol)}printSSRC(m_){return m_.map(L_=>Object.keys(L_.attributes).map(V_=>"a=ssrc:".concat(L_.ssrcId.toString(10)).concat(s_).concat(V_).concat(L_.attributes[V_]?":".concat(L_.attributes[V_]):"").concat(this.eol)).join("")).join("")}printRTCPMux(m_){return m_===void 0?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(m_){return m_===void 0?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(m_){return m_===void 0?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(m_){if(m_===void 0)return"";let L_="a=rtcp:".concat(m_.port);return m_.netType&&(L_+="".concat(s_).concat(m_.netType)),m_.addressType&&(L_+="".concat(s_).concat(m_.addressType)),m_.address&&(L_+="".concat(s_).concat(m_.address)),L_+this.eol}printMSId(m_){return m_.map(L_=>"a=msid:".concat(L_.id).concat(L_.appdata?"".concat(s_).concat(L_.appdata):"").concat(this.eol)).join("")}printImageattr(m_){return m_.map(L_=>"a=imageattr:".concat(L_).concat(this.eol)).join("")}printRid(m_){return m_.map(L_=>{let V_="a=rid:".concat(L_.id).concat(s_).concat(L_.direction);return L_.payloads&&(V_+="".concat(s_,"pt=").concat(L_.payloads.join(","))),L_.params.length>0&&(V_+="".concat(s_).concat(L_.params.map(iE=>iE.type==="depend"?"depend=".concat(iE.rids.join(",")):"".concat(iE.type,"=").concat(iE.val)).join(";"))),V_+this.eol}).join("")}printSimulcast(m_){return m_===void 0?"":"a=simulcast:".concat(m_).concat(this.eol)}printSCTPPort(m_){return m_===void 0?"":"a=sctp-port:".concat(m_).concat(this.eol)}printMaxMessageSize(m_){return m_===void 0?"":"a=max-message-size:".concat(m_).concat(this.eol)}printMid(m_){return m_===void 0?"":"a=mid:".concat(m_).concat(this.eol)}printSSRCGroups(m_){return m_.map(L_=>"a=ssrc-group:".concat(L_.semantic).concat(L_.ssrcIds.map(V_=>"".concat(s_).concat(V_.toString(10))).join("")).concat(this.eol)).join("")}}function FE(pE){return new z0().parse(pE)}function p0(pE,m_){return new ZT().print(pE,m_)}}},_a={};function _u(_p){if(_a[_p])return _a[_p].exports;var _f=_a[_p]={exports:{}};return _o[_p](_f,_f.exports,_u),_f.exports}return _u.d=(_p,_f)=>{for(var n_ in _f)_u.o(_f,n_)&&!_u.o(_p,n_)&&Object.defineProperty(_p,n_,{enumerable:!0,get:_f[n_]})},_u.o=(_p,_f)=>Object.prototype.hasOwnProperty.call(_p,_f),_u.r=_p=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_p,"__esModule",{value:!0})},_u(8)})()})(ES);class wQ{constructor(_r){p_(this,"sessionDesc",void 0),p_(this,"localCapabilities",void 0),p_(this,"rtpCapabilities",void 0),p_(this,"candidates",void 0),p_(this,"iceParameters",void 0),p_(this,"dtlsParameters",void 0),p_(this,"setup",void 0),p_(this,"currentMidIndex",void 0),p_(this,"cname",void 0),_r=vS(_r);const{remoteIceParameters:_o,remoteDtlsParameters:_a,candidates:_u,remoteRTPCapabilities:_p,remoteSetup:_f,localCapabilities:n_,sdkCodec:r_,cname:o_}=_r,s_=ES.exports.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE audio video
a=msid-semantic: WMS
a=ice-lite
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:audio
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:video
`);this.rtpCapabilities=_p,this.candidates=_u,this.iceParameters=_o,this.dtlsParameters=_a,this.setup=_f,this.localCapabilities=n_,this.cname=o_;for(let u_=0;u_<s_.mediaDescriptions.length;u_++){const g_=s_.mediaDescriptions[u_];if(g_.attributes.iceUfrag=_o.iceUfrag,g_.attributes.icePwd=_o.icePwd,g_.attributes.fingerprints=_a.fingerprints,g_.attributes.candidates=_u,g_.attributes.setup=_f,g_.media.mediaType==="video"){g_.media.fmts=_p.videoCodecs.map(D_=>D_.payloadType.toString(10));const w_=_p.videoCodecs.filter(D_=>{var M_;return(M_=D_.rtpMap)===null||M_===void 0?void 0:M_.encodingName.toLowerCase().includes(r_)});if(w_.length===0)throw new Error("Codec ".concat(r_," not supported by remote SDP."));g_.attributes.payloads=w_,g_.attributes.extmaps=_p.videoExtensions}g_.media.mediaType==="audio"&&(g_.media.fmts=_p.audioCodecs.map(w_=>w_.payloadType.toString(10)),g_.attributes.payloads=_p.audioCodecs,g_.attributes.extmaps=_p.audioExtensions),s_.mediaDescriptions[u_]=this.mungMediaDesc(g_)}this.sessionDesc=s_,this.currentMidIndex=s_.mediaDescriptions.length-1}toString(){return ES.exports.print(this.sessionDesc)}send(_r,_o,_a){const{ssrcs:_u,ssrcGroups:_p}=HR(_o,this.cname),_f=this.sessionDesc.mediaDescriptions.find(o_=>_r===WE.VIDEO?o_.media.mediaType==="video":o_.media.mediaType==="audio"),n_=_u[0].attributes.label,r_=_u[0].attributes.mslabel;return _f.attributes.ssrcs=_f.attributes.ssrcs.concat(_u),_f.attributes.ssrcGroups=_f.attributes.ssrcGroups.concat(_p),{id:n_,mslabel:r_}}batchSend(_r){return _r.map(_o=>{let{kind:_a,ssrcMsg:_u}=_o;return this.send(_a,_u,void 0)})}stopSending(_r){this.sessionDesc.mediaDescriptions.forEach(_o=>{const _a=[],_u=[],_p=[];_o.attributes.ssrcs.forEach(_f=>{_r.includes(_f.attributes.label||"")?_p.push(_f):_a.push(_f)}),_o.attributes.ssrcGroups.forEach(_f=>{_p.map(n_=>n_.ssrcId).includes(_f.ssrcIds[0])||_u.push(_f)}),_o.attributes.ssrcs=_a,_o.attributes.ssrcGroups=_u})}mute(_r){const _o=this.sessionDesc.mediaDescriptions.find(_a=>_a.attributes.mid===_r);if(!_o)throw new Error("mediaDescription not found with ".concat(_r," in remote SDP when calling RemoteSDP.mute."));_o.attributes.direction="inactive"}unmute(_r){const _o=this.sessionDesc.mediaDescriptions.find(_a=>_a.attributes.mid===_r);if(!_o)throw new Error("mediaDescription not found with ".concat(_r," in remote SDP when calling RemoteSDP.unmute."));_o.attributes.direction="sendonly"}receive(_r,_o,_a){_r.forEach((_u,_p)=>{const _f=_u._mediaStreamTrack,n_=this.sessionDesc.mediaDescriptions.findIndex(o_=>o_.attributes.mid===_f.kind),r_=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n_],_u);this.sessionDesc.mediaDescriptions[n_]=r_})}stopReceiving(_r){}restartICE(_r){_r=vS(_r),this.iceParameters=_r,this.sessionDesc.mediaDescriptions.forEach(_o=>{_o.attributes.iceUfrag=_r.iceUfrag,_o.attributes.icePwd=_r.icePwd})}predictReceivingMids(_r){const _o=[];for(let _a=0;_a<_r;_a++)_o.push((this.currentMidIndex+_a+1).toString(10));return _o}mungRecvMediaDsec(_r,_o){const _a=vS(_r);return zD(_a,_o),KH(_a,_o),_a}updateRecvMedia(_r,_o){const _a=this.sessionDesc.mediaDescriptions.findIndex(_u=>_u.attributes.mid===_r);if(_a!==-1){const _u=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[_a],_o);this.sessionDesc.mediaDescriptions[_a]=_u}}bumpMid(_r){this.currentMidIndex+=_r}updateTrackLabel(_r,_o,_a){const _u=this.sessionDesc.mediaDescriptions.find(_f=>_r===WE.VIDEO?_f.attributes.mid==="video":_f.attributes.mid==="audio");if(_u){const _f=_u.attributes.ssrcs.find(n_=>n_.attributes.label===_o);var _p;_f&&(_f.attributes.label=_a,(_p=_f.attributes.msid)===null||_p===void 0||_p.replace(_o,_a))}}mungMediaDesc(_r){const _o=vS(_r);return zH(_o),function(_a){const _u=_a.attributes.extmaps.find(_p=>_p.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");_u&&_a.attributes.extmaps.splice(_a.attributes.extmaps.indexOf(_u),1),_a.attributes.payloads.forEach(_p=>{const _f=_p.rtcpFeedbacks.findIndex(n_=>n_.type==="transport-cc");_f!==-1&&_p.rtcpFeedbacks.splice(_f,1)})}(_o),_o}getSSRC(_r){for(const _o of this.sessionDesc.mediaDescriptions)for(const _a of _o.attributes.ssrcs)if(_a.attributes.label===_r)return[_a]}}function gI(_n){if(Array.isArray(_n))return _n.map(_o=>_o);if(!v8(_n))return _n;const _r={};for(const _o in _n)v8(_n[_o])||Array.isArray(_n[_o])?_r[_o]=gI(_n[_o]):_r[_o]=_n[_o];return _r}function v8(_n){return!(typeof _n!="object"||Array.isArray(_n)||!_n)}function TQ(){const _n=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return _n&&_n[0]?Number(_n[0].split("/")[1]):null}function RQ(_n){return window.RTCStatsReport?_n.getStats()instanceof uE:!1}class QH{constructor(_r){p_(this,"input",[]),p_(this,"size",void 0),this.size=_r}add(_r){this.input.push(_r),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return this.input.length===0?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}}const y8={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},MU={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:y8,remoteCandidate:y8}},E8={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0},b8={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,qpSumPerFrame:0},S8={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},w8={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};class XH{constructor(_r,_o){p_(this,"onFirstVideoReceived",void 0),p_(this,"onFirstVideoDecoded",void 0),p_(this,"onFirstAudioReceived",void 0),p_(this,"onFirstVideoDecodedTimeout",void 0),p_(this,"onFirstAudioDecoded",void 0),p_(this,"onSelectedLocalCandidateChanged",void 0),p_(this,"onSelectedRemoteCandidateChanged",void 0),p_(this,"videoIsReady",!1),p_(this,"videoIsReady2",{}),p_(this,"pc",void 0),p_(this,"options",void 0),p_(this,"intervalTimer",void 0),p_(this,"stats",gI(MU)),p_(this,"isFirstVideoReceived",{}),p_(this,"isFirstVideoDecoded",{}),p_(this,"isFirstAudioReceived",{}),p_(this,"isFirstAudioDecoded",{}),p_(this,"isFirstVideoDecodedTimeout",{}),p_(this,"lossRateWindowStats",[]),this.pc=_r,this.options=_o,this.intervalTimer=window.setInterval(async()=>{this.updateStats()},this.options.updateInterval)}getStats(){return this.stats}setVideoIsReady(_r){this.videoIsReady=_r}setVideoIsReady2(_r,_o){this.videoIsReady2[_r]=_o}getVideoIsReady(_r){return this.videoIsReady2[_r]||!1}setIsFirstAudioDecoded(_r){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(_r){this.lossRateWindowStats.push(_r),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);const _o=this.lossRateWindowStats.length,_a=["videoSend","audioSend","videoRecv","audioRecv"];let _u=0,_p=0,_f=0,n_=0;for(const r_ of _a)_r[r_].forEach((o_,s_)=>{if(!this.lossRateWindowStats[_o-1][r_][s_]||!this.lossRateWindowStats[0][r_][s_])return;const u_=this.lossRateWindowStats[_o-1][r_][s_].packets-this.lossRateWindowStats[0][r_][s_].packets,g_=this.lossRateWindowStats[_o-1][r_][s_].packetsLost-this.lossRateWindowStats[0][r_][s_].packetsLost;r_==="videoSend"||r_==="audioSend"?(_u+=u_,_f+=g_):(_p+=u_,n_+=g_),Number.isNaN(u_)||Number.isNaN(u_)?o_.packetLostRate=0:o_.packetLostRate=u_<=0||g_<=0?0:g_/(u_+g_)});_r.sendPacketLossRate=_u<=0||_f<=0?0:_f/(_u+_f),_r.recvPacketLossRate=_p<=0||n_<=0?0:n_/(_p+n_)}}function T8(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function IQ(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?T8(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):T8(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}class CQ extends XH{constructor(){super(...arguments),p_(this,"_stats",MU),p_(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){const _r=await this._getStats(),_o=this.statsResponsesToObjects(_r);this._stats=gI(MU);const _a=_o.filter(_p=>_p.type==="ssrc");this.processSSRCStats(_a);const _u=_o.find(_p=>_p.type==="VideoBwe");_u&&this.processBandwidthStats(_u),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(_r){this._stats.bitrate={actualEncoded:Number(_r.googActualEncBitrate),targetEncoded:Number(_r.googTargetEncBitrate),retransmit:Number(_r.googRetransmitBitrate),transmit:Number(_r.googTransmitBitrate)},this._stats.sendBandwidth=Number(_r.googAvailableSendBandwidth)}processSSRCStats(_r){_r.forEach(_o=>{const _a=_o.id.includes("send");switch("".concat(_o.mediaType,"_").concat(_a?"send":"recv")){case"video_send":{const _u=gI(b8);_u.codec=_o.googCodecName,_u.adaptionChangeReason="none",_o.googCpuLimitedResolution&&(_u.adaptionChangeReason="cpu"),_o.googBandwidthLimitedResolution&&(_u.adaptionChangeReason="bandwidth"),_u.avgEncodeMs=Number(_o.googAvgEncodeMs),_u.inputFrame={width:Number(_o.googFrameWidthInput)||Number(_o.googFrameWidthSent),height:Number(_o.googFrameHeightInput)||Number(_o.googFrameHeightSent),frameRate:Number(_o.googFrameRateInput)},_u.sentFrame={width:Number(_o.googFrameWidthSent),height:Number(_o.googFrameHeightSent),frameRate:Number(_o.googFrameRateInput)},_u.firsCount=Number(_o.googFirReceived),_u.nacksCount=Number(_o.googNacksReceived),_u.plisCount=Number(_o.googPlisReceived),_u.frameCount=Number(_o.framesEncoded),_u.bytes=Number(_o.bytesSent),_u.packets=Number(_o.packetsSent),_u.packetsLost=Number(_o.packetsLost),_u.ssrc=Number(_o.ssrc),_u.rttMs=Number(_o.googRtt||0),this._stats.videoSend.push(_u),this._stats.rtt=_u.rttMs;break}case"video_recv":{const _u=gI(E8),_p=this.lastDecodeVideoReceiverStats.get(Number(_o.ssrc));if(_u.codec=_o.googCodecName,_u.targetDelayMs=Number(_o.googTargetDelayMs),_u.renderDelayMs=Number(_o.googRenderDelayMs),_u.currentDelayMs=Number(_o.googCurrentDelayMs),_u.minPlayoutDelayMs=Number(_o.googMinPlayoutDelayMs),_u.decodeMs=Number(_o.googDecodeMs),_u.maxDecodeMs=Number(_o.googMaxDecodeMs),_u.receivedFrame={width:Number(_o.googFrameWidthReceived),height:Number(_o.googFrameHeightReceived),frameRate:Number(_o.googFrameRateReceived)},_u.decodedFrame={width:Number(_o.googFrameWidthReceived),height:Number(_o.googFrameHeightReceived),frameRate:Number(_o.googFrameRateDecoded)},_u.decodeFrameRate=Number(_o.googFrameRateDecoded),_u.outputFrame={width:Number(_o.googFrameWidthReceived),height:Number(_o.googFrameHeightReceived),frameRate:Number(_o.googFrameRateOutput)},_u.jitterBufferMs=Number(_o.googJitterBufferMs),_u.firsCount=Number(_o.googFirsSent),_u.nacksCount=Number(_o.googNacksSent),_u.plisCount=Number(_o.googPlisSent),_u.framesDecodeCount=Number(_o.framesDecoded),_u.bytes=Number(_o.bytesReceived),_u.packets=Number(_o.packetsReceived),_u.packetsLost=Number(_o.packetsLost),_u.ssrc=Number(_o.ssrc),_u.packets>0&&!this.isFirstVideoReceived[_u.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(_u.ssrc),this.isFirstVideoReceived[_u.ssrc]=!0),_u.framesDecodeCount>0&&!this.isFirstVideoDecoded[_u.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(_u.ssrc,_u.decodedFrame.width,_u.decodedFrame.height),this.isFirstVideoDecoded[_u.ssrc]=!0),_p){const _f=_p.stats,n_=Date.now()-_p.lts;_u.framesDecodeFreezeTime=_f.framesDecodeFreezeTime,_u.framesDecodeInterval=_f.framesDecodeInterval,_u.framesDecodeCount>_f.framesDecodeCount&&this.isFirstVideoDecoded[_u.ssrc]?(_p.lts=Date.now(),_u.framesDecodeInterval=n_,_u.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(_o.ssrc,10))?_u.framesDecodeFreezeTime+=_u.framesDecodeInterval:this.setVideoIsReady2(parseInt(_o.ssrc,10),!0))):_u.framesDecodeCount<_p.stats.framesDecodeCount&&(_u.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(_u.ssrc,{stats:IQ({},_u),lts:Date.now()}),this._stats.videoRecv.push(_u);break}case"audio_recv":{const _u=gI(w8);_u.codec=_o.googCodecName,_u.outputLevel=Math.abs(Number(_o.audioOutputLevel))/32767,_u.decodingCNG=Number(_o.googDecodingCNG),_u.decodingCTN=Number(_o.googDecodingCTN),_u.decodingCTSG=Number(_o.googDecodingCTSG),_u.decodingNormal=Number(_o.googDecodingNormal),_u.decodingPLC=Number(_o.googDecodingPLC),_u.decodingPLCCNG=Number(_o.googDecodingPLCCNG),_u.expandRate=Number(_o.googExpandRate),_u.accelerateRate=Number(_o.googAccelerateRate),_u.preemptiveExpandRate=Number(_o.googPreemptiveExpandRate),_u.secondaryDecodedRate=Number(_o.googSecondaryDecodedRate),_u.speechExpandRate=Number(_o.googSpeechExpandRate),_u.preferredJitterBufferMs=Number(_o.googPreferredJitterBufferMs),_u.jitterBufferMs=Number(_o.googJitterBufferMs),_u.jitterMs=Number(_o.googJitterReceived),_u.bytes=Number(_o.bytesReceived),_u.packets=Number(_o.packetsReceived),_u.packetsLost=Number(_o.packetsLost),_u.ssrc=Number(_o.ssrc),_u.receivedFrames=Number(_o.googDecodingCTN)||Number(_o.packetsReceived),_u.droppedFrames=Number(_o.googDecodingPLC)+Number(_o.googDecodingPLCCNG)||Number(_o.packetsLost),_u.receivedFrames>0&&!this.isFirstAudioReceived[_u.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(_u.ssrc),this.isFirstAudioReceived[_u.ssrc]=!0),_u.decodingNormal>0&&!this.isFirstAudioDecoded[_u.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(_u.ssrc),this.isFirstAudioDecoded[_u.ssrc]=!0),this._stats.audioRecv.push(_u);break}case"audio_send":{const _u=gI(S8);_u.codec=_o.googCodecName,_u.inputLevel=Math.abs(Number(_o.audioInputLevel))/32767,_u.aecReturnLoss=Number(_o.googEchoCancellationReturnLoss||0),_u.aecReturnLossEnhancement=Number(_o.googEchoCancellationReturnLossEnhancement||0),_u.residualEchoLikelihood=Number(_o.googResidualEchoLikelihood||0),_u.residualEchoLikelihoodRecentMax=Number(_o.googResidualEchoLikelihoodRecentMax||0),_u.bytes=Number(_o.bytesSent),_u.packets=Number(_o.packetsSent),_u.packetsLost=Number(_o.packetsLost),_u.ssrc=Number(_o.ssrc),_u.rttMs=Number(_o.googRtt||0),this._stats.rtt=_u.rttMs,this._stats.audioSend.push(_u);break}}})}_getStats(){return new uE((_r,_o)=>{this.pc.getStats(_r,_o)})}statsResponsesToObjects(_r){const _o=[];return _r.result().forEach(_a=>{const _u={id:_a.id,timestamp:_a.timestamp.valueOf().toString(),type:_a.type};_a.names().forEach(_p=>{_u[_p]=_a.stat(_p)}),_o.push(_u)}),_o}}function R8(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function DU(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?R8(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):R8(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}class I8 extends XH{constructor(){super(...arguments),p_(this,"_stats",MU),p_(this,"report",void 0),p_(this,"lastDecodeVideoReceiverStats",new Map),p_(this,"lastVideoFramesRecv",new Map),p_(this,"lastVideoFramesSent",new Map),p_(this,"lastVideoFramesDecode",new Map),p_(this,"lastVideoJBDelay",new Map),p_(this,"lastAudioJBDelay",new Map),p_(this,"mediaBytesSent",new Map),p_(this,"mediaBytesRetransmit",new Map),p_(this,"mediaBytesTargetEncode",new Map),p_(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=gI(MU),this.report.forEach(_r=>{switch(_r.type){case mS.OUTBOUND:_r.mediaType==="audio"?this.processAudioOutboundStats(_r):_r.mediaType==="video"&&this.processVideoOutboundStats(_r);break;case mS.INBOUND:_r.mediaType==="audio"?this.processAudioInboundStats(_r):_r.mediaType==="video"&&this.processVideoInboundStats(_r);break;case mS.TRANSPORT:{const _o=this.report.get(_r.selectedCandidatePairId);_o&&this.processCandidatePairStats(_o);break}case mS.CANDIDATE_PAIR:_r.selected&&this.processCandidatePairStats(_r)}}),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processCandidatePairStats(_r){if(this._stats.sendBandwidth=_r.availableOutgoingBitrate||0,_r.currentRoundTripTime&&(this._stats.rtt=1e3*_r.currentRoundTripTime),this._stats.videoSend.forEach(_o=>{_r.currentRoundTripTime&&(_o.rttMs=1e3*_r.currentRoundTripTime)}),this._stats.audioSend.forEach(_o=>{_r.currentRoundTripTime&&(_o.rttMs=1e3*_r.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=_r.id,_r.localCandidateId){const _o=this.report.get(_r.localCandidateId);_o&&this.processCandidateStats(_o)}if(_r.remoteCandidateId){const _o=this.report.get(_r.remoteCandidateId);_o&&this.processCandidateStats(_o)}}processCandidateStats(_r){let _o;_r.type===mS.LOCAL_CANDIDATE&&(_o=this._stats.selectedCandidatePair.localCandidate),_r.type===mS.REMOTE_CANDIDATE&&(_o=this._stats.selectedCandidatePair.remoteCandidate),_o&&(_o.type=_r.type,_o.id=_r.id,_r.address&&(_o.address=_r.address),_r.candidateType&&(_o.candidateType=_r.candidateType),_r.port&&(_o.port=_r.port),_r.priority&&(_o.priority=_r.priority),_r.protocol&&(_o.protocol=_r.protocol),_r.relayProtocol&&(_o.relayProtocol=_r.relayProtocol),_r.type===mS.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==_o.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(DU({},_o),DU({},this.stats.selectedCandidatePair.localCandidate)),_r.type===mS.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==_o.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(DU({},_o),DU({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(_r){let _o=this._stats.audioRecv.find(_a=>_a.ssrc===_r.ssrc);_o||(_o=gI(w8),this._stats.audioRecv.push(_o)),_o.ssrc=_r.ssrc,_o.packets=_r.packetsReceived,_o.packetsLost=_r.packetsLost,_o.bytes=_r.bytesReceived,_o.jitterMs=1e3*_r.jitter,this.processAudioTrackReceiverStats(_r,_r.trackId,_o),_r.codecId&&(_o.codec=this.getCodecFromCodecStats(_r.codecId)),_o.receivedFrames||(_o.receivedFrames=_r.packetsReceived),_o.droppedFrames||(_o.droppedFrames=_r.packetsLost),_o.receivedFrames>0&&!this.isFirstAudioReceived[_o.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(_o.ssrc),this.isFirstAudioReceived[_o.ssrc]=!0),_o.outputLevel&&_o.outputLevel>0&&!this.isFirstAudioDecoded[_o.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(_o.ssrc),this.isFirstAudioDecoded[_o.ssrc]=!0),typeof _r.concealedSamples=="number"&&(_o.concealedSamples=_r.concealedSamples)}processVideoInboundStats(_r){let _o=this._stats.videoRecv.find(_f=>_f.ssrc===_r.ssrc);_o||(_o=gI(E8),this._stats.videoRecv.push(_o)),_o.ssrc=_r.ssrc,_o.packets=_r.packetsReceived,_o.packetsLost=_r.packetsLost,_o.bytes=_r.bytesReceived,_o.firsCount=_r.firCount,_o.nacksCount=_r.nackCount,_o.plisCount=_r.pliCount,_o.framesDecodeCount=_r.framesDecoded,_o.totalInterFrameDelay=_r.totalInterFrameDelay,_o.totalSquaredInterFrameDelay=_r.totalSquaredInterFrameDelay;const _a=this.lastDecodeVideoReceiverStats.get(_o.ssrc),_u=this.lastVideoFramesDecode.get(_o.ssrc),_p=Date.now();if(_o.framesDecodeCount>0&&!this.isFirstVideoDecoded[_o.ssrc]){const _f=_o.decodedFrame?_o.decodedFrame.width:0,n_=_o.decodedFrame?_o.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(_o.ssrc,_f,n_),this.isFirstVideoDecoded[_o.ssrc]=!0}if(_a){const _f=_a.stats,n_=_p-_a.lts;_o.framesDecodeFreezeTime=_f.framesDecodeFreezeTime,_o.framesDecodeInterval=_f.framesDecodeInterval,!this.isFirstVideoDecoded[_o.ssrc]&&n_>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[_o.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(_o.ssrc),this.isFirstVideoDecodedTimeout[_o.ssrc]=!0),_o.framesDecodeCount>_f.framesDecodeCount&&this.isFirstVideoDecoded[_o.ssrc]?(_a.lts=Date.now(),_o.framesDecodeInterval=n_,_o.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(_r.ssrc))?_o.framesDecodeFreezeTime+=_o.framesDecodeInterval:this.setVideoIsReady2(parseInt(_r.ssrc,10),!0))):_o.framesDecodeCount<_f.framesDecodeCount&&(_o.framesDecodeInterval=0),_r.framesDecoded&&_r.qpSum&&(_a.stats.framesDecodeCount>_r.framesDecoded?_o.qpSumPerFrame=_r.qpSum/_r.framesDecoded:_o.qpSumPerFrame=(_r.qpSum-_a.qpSum)/(_r.framesDecoded-_a.stats.framesDecodeCount))}_u&&_p-_u.lts>=800?(_o.decodeFrameRate=Math.round((_o.framesDecodeCount-_u.count)/((_p-_u.lts)/1e3)),this.lastVideoFramesDecode.set(_o.ssrc,{count:_o.framesDecodeCount,lts:_p,rate:_o.decodeFrameRate})):_u?_o.decodeFrameRate=_u.rate:this.lastVideoFramesDecode.set(_o.ssrc,{count:_o.framesDecodeCount,lts:_p,rate:0}),_r.totalDecodeTime&&(_o.decodeMs=1e3*_r.totalDecodeTime),this.processVideoTrackReceiverStats(_r,_r.trackId,_o),_r.codecId&&(_o.codec=this.getCodecFromCodecStats(_r.codecId)),_r.framerateMean&&(_o.framesRateFirefox=_r.framerateMean),_o.packets>0&&!this.isFirstVideoReceived[_o.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(_o.ssrc),this.isFirstVideoReceived[_o.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(_o.ssrc,{stats:DU({},_o),lts:_a?_a.lts:Date.now(),qpSum:_r.qpSum})}processVideoOutboundStats(_r){let _o=this._stats.videoSend.find(_u=>_u.ssrc===_r.ssrc);_o||(_o=gI(b8),this._stats.videoSend.push(_o));const _a=this.mediaBytesSent.get(_r.ssrc);if(_a)_a.add(_r.bytesSent);else{const _u=new QH(10);_u.add(_r.bytesSent),this.mediaBytesSent.set(_r.ssrc,_u)}if(_r.retransmittedBytesSent!==void 0){const _u=this.mediaBytesRetransmit.get(_r.ssrc);if(_u)_u.add(_r.retransmittedBytesSent);else{const _p=new QH(10);_p.add(_r.retransmittedBytesSent),this.mediaBytesRetransmit.set(_r.ssrc,_p)}}if(_r.totalEncodedBytesTarget){const _u=this.mediaBytesTargetEncode.get(_r.ssrc);if(_u)_u.add(_r.totalEncodedBytesTarget);else{const _p=new QH(10);_p.add(_r.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(_r.ssrc,_p)}}if(_o.ssrc=_r.ssrc,_o.bytes=_r.bytesSent,_o.packets=_r.packetsSent,_o.firsCount=_r.firCount,_o.nacksCount=_r.nackCount,_o.plisCount=_r.pliCount,_o.frameCount=_r.framesEncoded,_o.adaptionChangeReason=_r.qualityLimitationReason,_r.totalEncodeTime&&_r.framesEncoded){const _u=this.lastEncoderMs.get(_r.ssrc);if(!_u||_u.lastFrameCount>_r.framesEncoded)_o.avgEncodeMs=1e3*_r.totalEncodeTime/_r.framesEncoded;else{const _p=_r.framesEncoded-_u.lastFrameCount,_f=_r.totalEncodeTime-_u.lastEncoderTime;_o.avgEncodeMs=1e3*_f/_p}}if(_r.framesEncoded&&_r.qpSum){const _u=this.lastEncoderMs.get(_r.ssrc);!_u||_u.lastFrameCount>_r.framesEncoded?_o.qpSumPerFrame=_r.qpSum/_r.framesEncoded:_o.qpSumPerFrame=(_r.qpSum-_u.lastQpSum)/(_r.framesEncoded-_u.lastFrameCount)}if(this.lastEncoderMs.set(_r.ssrc,{lastFrameCount:_r.framesEncoded,lastEncoderTime:_r.totalEncodeTime,lastQpSum:_r.qpSum,lts:Date.now()}),_r.codecId&&(_o.codec=this.getCodecFromCodecStats(_r.codecId)),_r.mediaSourceId&&this.processVideoMediaSource(_r.mediaSourceId,_o),this.processVideoTrackSenderStats(_r,_r.trackId,_o),_r.remoteId)this.processRemoteInboundStats(_r.remoteId,_o);else{const _u=this.findRemoteStatsId(_r.ssrc,mS.REMOTE_INBOUND);_u&&this.processRemoteInboundStats(_u,_o)}}processAudioOutboundStats(_r){let _o=this._stats.audioSend.find(_a=>_a.ssrc===_r.ssrc);if(_o||(_o=gI(S8),this._stats.audioSend.push(_o)),_o.ssrc=_r.ssrc,_o.packets=_r.packetsSent,_o.bytes=_r.bytesSent,_r.mediaSourceId&&this.processAudioMediaSource(_r.mediaSourceId,_o),_r.codecId&&(_o.codec=this.getCodecFromCodecStats(_r.codecId)),this.processAudioTrackSenderStats(_r,_r.trackId,_o),_r.remoteId)this.processRemoteInboundStats(_r.remoteId,_o);else{const _a=this.findRemoteStatsId(_r.ssrc,mS.REMOTE_INBOUND);_a&&this.processRemoteInboundStats(_a,_o)}}findRemoteStatsId(_r,_o){var _a;const _u=Array.from(fO(_a=this.report).call(_a)).find(_p=>_p.type===_o&&_p.ssrc===_r);return _u?_u.id:null}processVideoMediaSource(_r,_o){const _a=this.report.get(_r);_a&&_a.width&&_a.height&&_a.framesPerSecond&&(_o.inputFrame={width:_a.width,height:_a.height,frameRate:_a.framesPerSecond})}processAudioMediaSource(_r,_o){const _a=this.report.get(_r);_a&&(_o.inputLevel=_a.audioLevel)}processVideoTrackSenderStats(_r,_o,_a){var _u,_p,_f;const n_=_o?this.report.get(_o):void 0,r_=(_u=n_==null?void 0:n_.framesSent)!==null&&_u!==void 0?_u:_r.framesSent;let o_=(_p=n_==null?void 0:n_.frameWidth)!==null&&_p!==void 0?_p:_r.frameWidth,s_=(_f=n_==null?void 0:n_.frameHeight)!==null&&_f!==void 0?_f:_r.frameHeight;if(typeof r_!="number")return;r_!==0||typeof o_=="number"&&typeof s_=="number"||(o_=0,s_=0);let u_=0;const g_=Date.now(),w_=this.lastVideoFramesSent.get(_a.ssrc);w_&&g_-w_.lts>=800?(u_=Math.round((r_-w_.count)/((g_-w_.lts)/1e3)),this.lastVideoFramesSent.set(_a.ssrc,{count:r_,lts:g_,rate:u_})):w_?u_=w_.rate:this.lastVideoFramesSent.set(_a.ssrc,{count:r_,lts:g_,rate:0}),_a.sentFrame={width:o_,height:s_,frameRate:Math.max(0,u_)}}processVideoTrackReceiverStats(_r,_o,_a){var _u,_p,_f,n_,r_;const o_=_o?this.report.get(_o):void 0,s_=(_u=o_==null?void 0:o_.framesReceived)!==null&&_u!==void 0?_u:_r.framesReceived,u_=(_p=o_==null?void 0:o_.frameWidth)!==null&&_p!==void 0?_p:_r.frameWidth,g_=(_f=o_==null?void 0:o_.frameHeight)!==null&&_f!==void 0?_f:_r.frameHeight,w_=(n_=o_==null?void 0:o_.jitterBufferDelay)!==null&&n_!==void 0?n_:_r.jitterBufferDelay,D_=(r_=o_==null?void 0:o_.jitterBufferEmittedCount)!==null&&r_!==void 0?r_:_r.jitterBufferEmittedCount;if(typeof s_=="number"){const M_=this.lastVideoFramesRecv.get(_a.ssrc),P_=Date.now();_a.framesReceivedCount=s_;let _g=0;M_&&P_-M_.lts>=800?(_g=Math.round((s_-M_.count)/((P_-M_.lts)/1e3)),this.lastVideoFramesRecv.set(_a.ssrc,{count:s_,lts:P_,rate:_g})):M_?_g=M_.rate:this.lastVideoFramesRecv.set(_a.ssrc,{count:s_,lts:P_,rate:0}),_a.receivedFrame={width:u_||0,height:g_||0,frameRate:_g||0},_a.decodedFrame={width:u_||0,height:g_||0,frameRate:_a.decodeFrameRate||0},_a.outputFrame={width:u_||0,height:g_||0,frameRate:_a.decodeFrameRate||0}}if(w_&&D_){let M_=this.lastVideoJBDelay.get(_a.ssrc);this.lastVideoJBDelay.set(_a.ssrc,{jitterBufferDelay:w_,jitterBufferEmittedCount:D_}),M_||(M_={jitterBufferDelay:0,jitterBufferEmittedCount:0});const P_=1e3*(w_-M_.jitterBufferDelay)/(D_-M_.jitterBufferEmittedCount);_a.jitterBufferMs=P_,_a.currentDelayMs=Math.round(P_)}}processAudioTrackSenderStats(_r,_o,_a){var _u,_p,_f,n_;const r_=_o?this.report.get(_o):void 0,o_=(_u=(_p=r_==null?void 0:r_.echoReturnLoss)!==null&&_p!==void 0?_p:_r.echoReturnLoss)!==null&&_u!==void 0?_u:0,s_=(_f=(n_=r_==null?void 0:r_.echoReturnLossEnhancement)!==null&&n_!==void 0?n_:_r.echoReturnLossEnhancement)!==null&&_f!==void 0?_f:0;_a.aecReturnLoss=o_,_a.aecReturnLossEnhancement=s_}processAudioTrackReceiverStats(_r,_o,_a){var _u,_p,_f,n_,r_,o_,s_;const u_=_o?this.report.get(_o):void 0,g_=(_u=u_==null?void 0:u_.removedSamplesForAcceleration)!==null&&_u!==void 0?_u:_r.removedSamplesForAcceleration,w_=(_p=u_==null?void 0:u_.totalSamplesReceived)!==null&&_p!==void 0?_p:_r.totalSamplesReceived,D_=(_f=u_==null?void 0:u_.jitterBufferDelay)!==null&&_f!==void 0?_f:_r.jitterBufferDelay,M_=(n_=u_==null?void 0:u_.jitterBufferEmittedCount)!==null&&n_!==void 0?n_:_r.jitterBufferEmittedCount,P_=(r_=u_==null?void 0:u_.audioLevel)!==null&&r_!==void 0?r_:_r==null?void 0:_r.audioLevel,_g=(o_=u_==null?void 0:u_.totalSamplesDuration)!==null&&o_!==void 0?o_:_r==null?void 0:_r.totalSamplesDuration,_y=(s_=u_==null?void 0:u_.concealedSamples)!==null&&s_!==void 0?s_:_r.concealedSamples;if(g_&&w_&&(_a.accelerateRate=g_/w_),D_&&M_){let NE=this.lastAudioJBDelay.get(_a.ssrc);this.lastAudioJBDelay.set(_a.ssrc,{jitterBufferDelay:D_,jitterBufferEmittedCount:M_}),NE||(NE={jitterBufferDelay:0,jitterBufferEmittedCount:0});const mE=1e3*(D_-NE.jitterBufferDelay)/(M_-NE.jitterBufferEmittedCount);_a.jitterBufferMs=Math.round(mE)}_a.outputLevel=P_;let hE=1920;_g&&w_&&(hE=w_/_g/50,_a.receivedFrames=Math.round(w_/hE)),_y&&(_a.droppedFrames=Math.round(_y/hE))}processRemoteInboundStats(_r,_o){const _a=this.report.get(_r);_a&&(_o.packetsLost=_a.packetsLost,_a.roundTripTime&&(_o.rttMs=1e3*_a.roundTripTime))}getCodecFromCodecStats(_r){const _o=this.report.get(_r);if(!_o)return"";const _a=_o.mimeType.match(/\/(.*)$/);return _a&&_a[1]?_a[1]:""}updateSendBitrate(){let _r=0,_o=null,_a=null;this.mediaBytesSent.forEach(_p=>{_r+=_p.diffMean()}),this.mediaBytesRetransmit.forEach(_p=>{_o=_o===null?_p.diffMean():_o+_p.diffMean()}),this.mediaBytesTargetEncode.forEach(_p=>{_a=_a===null?_p.diffMean():_a+_p.diffMean()});const _u=_o!==null?_r-_o:_r;this._stats.bitrate={actualEncoded:8*_u/(this.options.updateInterval/1e3),transmit:8*_r/(this.options.updateInterval/1e3)},_o!==null&&(this._stats.bitrate.retransmit=8*_o/(this.options.updateInterval/1e3)),_a!==null&&(this._stats.bitrate.targetEncoded=8*_a/(this.options.updateInterval/1e3))}}class AQ extends XH{updateStats(){return uE.resolve()}}function ZH(_n){let _r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250,_o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:8,_a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:500,_u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e4;const _p=TQ();return _p?_p<76?new CQ(_n,{updateInterval:_r,lossRateInterval:_o,freezeRateLimit:_a,firstVideoDecodedTimeout:_u}):new I8(_n,{updateInterval:_r,lossRateInterval:_o,freezeRateLimit:_a,firstVideoDecodedTimeout:_u}):RQ(_n)?new I8(_n,{updateInterval:_r,lossRateInterval:_o,freezeRateLimit:_a,firstVideoDecodedTimeout:_u}):new AQ(_n,{updateInterval:_r,lossRateInterval:_o,freezeRateLimit:_a,firstVideoDecodedTimeout:_u})}var x0;function C8(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function A8(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?C8(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):C8(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}let PU=(oE((x0=class FU extends yF{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}constructor(_r,_o){super(_r,_o),p_(this,"store",void 0),p_(this,"peerConnection",void 0),p_(this,"remoteSDP",void 0),p_(this,"initialOffer",void 0),p_(this,"statsFilter",void 0),p_(this,"useRTX",!1),p_(this,"localCapabilities",void 0),p_(this,"localCandidateCount",0),p_(this,"allCandidatesReceived",!1),p_(this,"establishPromise",void 0),p_(this,"mutex",new RT("P2PConnection-mutex")),this.store=_o,this.peerConnection=new RTCPeerConnection(FU.resolvePCConfiguration(_r),{optional:[{googDscp:!0}]}),this.statsFilter=ZH(this.peerConnection,void 0,void 0,tS()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{const _r=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!_r.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const _o=SL(_r.sdp),_a=WH(_r.sdp,!this.useRTX,J_("FILTER_VIDEO_FEC"),J_("FILTER_AUDIO_FEC"),["opus"]);return this.localCapabilities=_a,this.initialOffer=_r,A8(A8({},_o),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:_a},offerSDP:_r.sdp})}catch(_r){throw new U_(k_.GET_LOCAL_CONNECTION_PARAMS_FAILED,_r.toString())}}async connect(_r,_o,_a,_u,_p,_f){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new wQ({remoteIceParameters:_r,remoteDtlsParameters:_o,candidates:_a,remoteRTPCapabilities:_u.send,remoteSetup:_p,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec,cname:_f});const n_=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:n_})}catch(n_){throw new U_(k_.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(n_.toString()))}}send(_r,_o){var _a=this;return _I(function*(){const _u=yield i0(_a.mutex.lock());try{if(!_a.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const _p=_r.map(g_=>_a.peerConnection.addTrack(g_._mediaStreamTrack)),_f=yield i0(_a.peerConnection.createOffer()),n_=ES.exports.parse(_f.sdp),r_=_r.map(g_=>{const w_=g_._mediaStreamTrack,D_=n_.mediaDescriptions.find(M_=>M_.attributes.mid===w_.kind);if(!D_)throw new Error("Cannot extract ssrc from mediaDescription.");return function(M_,P_,_g){const _y=M_.attributes.ssrcs.filter(NE=>NE.attributes.label===P_),hE=M_.attributes.ssrcGroups;if(_y.length===0)throw new Error("Cannot extract ssrc from plan-b SDP.");if(hE&&_y.length>1){const NE=hE.find(mE=>mE.ssrcIds.indexOf(_y[0].ssrcId)!==-1);return NE?[{ssrcId:NE.ssrcIds[0],rtx:_g?NE.ssrcIds[1]:void 0}]:[{ssrcId:_y[0].ssrcId}]}return[{ssrcId:_y[0].ssrcId}]}(D_,w_.id,_a.useRTX)});let o_;try{o_=yield r_}catch(g_){throw _p.forEach(w_=>{rT()&&w_.replaceTrack(null),_a.peerConnection.removeTrack(w_)}),g_}const s_=_a.mungSendOfferSDP(_f.sdp,_r);_a.remoteSDP.receive(_r,_o,o_);const u_=_a.remoteSDP.toString();return yield i0(_a.peerConnection.setLocalDescription({type:"offer",sdp:s_})),yield i0(_a.applySendEncodings(_p,_r)),yield i0(_a.peerConnection.setRemoteDescription({type:"answer",sdp:u_})),_r.map((g_,w_)=>{const D_=g_._mediaStreamTrack.id;return{localSSRC:r_[w_],id:D_}})}catch(_p){throw new U_(k_.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(_p.toString()))}finally{_u()}})()}async stopSending(_r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const _o=this.peerConnection.getSenders().filter(_p=>{var _f;return _r.indexOf(((_f=_p.track)===null||_f===void 0?void 0:_f.id)||"")!==-1});if(_o.length!==_r.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");_o.map(_p=>{rT()&&_p.replaceTrack(null),this.peerConnection.removeTrack(_p)});const _a=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(_a),this.remoteSDP.stopReceiving(_r);const _u=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:_u})}catch(_o){throw new U_(k_.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(_o.toString()))}}async receive(_r,_o,_a,_u){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(_r," before remoteSDP created."));const{id:_p,mslabel:_f}=this.remoteSDP.send(_r,_o,_u),n_=new uE((s_,u_)=>{const g_=setTimeout(()=>{u_(new Error("Cannot receive track, id: ".concat(_p)))},1e4),w_=D_=>{const M_=I0();if((M_.name==="Safari"&&Number(M_.version)===11||KS())&&D_.track.id!==_p&&D_.streams[0].id===_f){var P_;const _g=D_.streams[0].getTracks()[0];return(P_=this.remoteSDP)===null||P_===void 0||P_.updateTrackLabel(_r,_p,D_.track.id),this.peerConnection.removeEventListener("track",w_),clearTimeout(g_),void s_(_g)}if(D_.track.id===_p)return this.peerConnection.removeEventListener("track",w_),clearTimeout(g_),void s_(D_.track)};this.peerConnection.addEventListener("track",w_)}),r_=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:r_});const o_=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(o_),{track:await n_,id:_p}}catch(_p){throw new U_(k_.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(_p.toString()))}}async stopReceiving(_r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(_r);const _o=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:_o});const _a=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(_a)}catch(_o){throw new U_(k_.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(_o.toString()))}}async muteRemote(_r){}async unmuteRemote(_r){}async muteLocal(_r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const _o=this.peerConnection.getSenders().filter(_a=>{var _u;return _r.indexOf(((_u=_a.track)===null||_u===void 0?void 0:_u.id)||"")!==-1});if(_o.length!==_r.length)throw new Error("sender' length doesn't match mids' length.");_o.map(_a=>{if(rT()&&_a.track)_a.track.enabled=!1;else{const _u=_a.getParameters();_u.encodings.forEach(_p=>_p.active=!1),_a.setParameters(_u)}})}catch(_o){throw new U_(k_.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(_o.toString()))}}async unmuteLocal(_r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const _o=this.peerConnection.getSenders().filter(_p=>{var _f;return _r.indexOf(((_f=_p.track)===null||_f===void 0?void 0:_f.id)||"")!==-1});if(_o.length!==_r.length)throw new Error("Senders' length doesn't match mids' length.");_o.map(async _p=>{if(rT()&&_p.track)_p.track.enabled=!0;else{const _f=_p.getParameters();_f.encodings.forEach(n_=>n_.active=!0),await _p.setParameters(_f)}});const _a=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(_a);const _u=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:_u})}catch(_o){throw new U_(k_.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(_o.toString()))}}restartICE(){var _r=this;return _I(function*(){const _o=yield i0(_r.mutex.lock("From P2PConnection.restartICE"));try{const _a=yield i0(_r.peerConnection.createOffer({iceRestart:!0}));if(!_a.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const _u=SL(_a.sdp),{remoteIceParameters:_p}=yield _u.iceParameters;if(!_r.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");_r.remoteSDP.restartICE(_p);const _f=_r.remoteSDP.toString();yield i0(_r.peerConnection.setLocalDescription(_a)),yield i0(_r.peerConnection.setRemoteDescription({type:"answer",sdp:_f}))}catch(_a){E_.warning("restart ICE failed, abort operation",_a)}finally{_o()}})()}close(){var _r;this.peerConnection.close(),(_r=this.onConnectionStateChange)===null||_r===void 0||_r.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(_r){return this.statsFilter.getVideoIsReady(_r)}async updateEncoderConfig(_r,_o){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const _a=await this.peerConnection.createOffer(),_u=this.mungSendOfferSDP(_a.sdp,[_o]);this.remoteSDP.updateRecvMedia(_o._mediaStreamTrack.kind,_o);const _p=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:_u}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:_p})}catch(_a){throw new U_(k_.EXCHANGE_SDP_FAILED,_a.toString())}}async updateSendParameters(_r,_o){const _a=this.peerConnection.getSenders().filter(_u=>{var _p;return((_p=_u.track)===null||_p===void 0?void 0:_p.id)===_r});_a.length===1&&await this.applySendEncodings(_a,[_o])}setStatsRemoteVideoIsReady(_r,_o){this.statsFilter.setVideoIsReady2(_r,_o)}async replaceTrack(_r,_o){const _a=this.peerConnection.getSenders().find(_u=>{var _p;return((_p=_u.track)===null||_p===void 0?void 0:_p.id)===_o});_a&&await _a.replaceTrack(_r._mediaStreamTrack)}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var _r;(_r=this.onICEConnectionStateChange)===null||_r===void 0||_r.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var _r;(_r=this.onConnectionStateChange)===null||_r===void 0||_r.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=_r=>{_r.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,E_.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,E_.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},J_("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(_r){const _o={iceServers:[],sdpSemantics:"plan-b"};return _r.iceServers?_o.iceServers=_r.iceServers:_r.turnServer&&_r.turnServer.mode!=="off"&&(vU(_r.turnServer.servers)?_o.iceServers=_r.turnServer.servers:(_o.iceServers&&_o.iceServers.push(...FU.turnServerConfigToIceServers(_r.turnServer.servers)),J_("USE_TURN_SERVER_OF_GATEWAY")&&_o.iceServers&&_r.turnServer.serversFromGateway&&_o.iceServers.push(...FU.turnServerConfigToIceServers(_r.turnServer.serversFromGateway)),_r.turnServer.servers.concat(_r.turnServer.serversFromGateway||[]).forEach(_a=>{_a.forceturn&&(_o.iceTransportPolicy="relay")}))),_o}static turnServerConfigToIceServers(_r){const _o=[];return _r.forEach(_a=>{_a.security?_a.tcpport&&_o.push({username:_a.username,credential:_a.password,credentialType:"password",urls:"turns:".concat(_a.turnServerURL,":").concat(_a.tcpport,"?transport=tcp")}):(_a.udpport&&_o.push({username:_a.username,credential:_a.password,credentialType:"password",urls:"turn:".concat(_a.turnServerURL,":").concat(_a.udpport,"?transport=udp")}),_a.tcpport&&_o.push({username:_a.username,credential:_a.password,credentialType:"password",urls:"turn:".concat(_a.turnServerURL,":").concat(_a.tcpport,"?transport=tcp")}))}),_o}async applySendEncodings(_r,_o){try{if(!VS().supportSetRtpSenderParameters||_r.length!==_o.length)return;for(let _u=0;_u<_r.length;_u++){var _a;const _p=_r[_u],_f=_o[_u];if(!_f)continue;const n_={},r_={};if(_f instanceof yS)switch(_f._optimizationMode){case"motion":n_.degradationPreference="maintain-framerate";break;case"detail":n_.degradationPreference="maintain-resolution";break;default:n_.degradationPreference="balanced"}if(J_("DSCP_TYPE")&&lO()){const u_=J_("DSCP_TYPE");["very-low","low","medium","high"].includes(u_)&&(r_.networkPriority=u_)}const o_=_p.getParameters(),s_=(_a=o_.encodings)===null||_a===void 0?void 0:_a[0];s_&&Object.assign(s_,r_),Object.assign(o_,n_),await _p.setParameters(o_)}}catch{E_.debug("Apply RTPSendEncodings failed.")}}mungSendOfferSDP(_r,_o){const _a=ES.exports.parse(_r);return _o.forEach((_u,_p)=>{const _f=_u._mediaStreamTrack,n_=_a.mediaDescriptions.find(r_=>r_.attributes.mid===_f.kind);n_&&zD(n_,_u)}),ES.exports.print(_a)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=_r=>{var _o;(_o=this.onFirstAudioReceived)===null||_o===void 0||_o.call(this,_r)},this.statsFilter.onFirstVideoReceived=_r=>{var _o;(_o=this.onFirstVideoReceived)===null||_o===void 0||_o.call(this,_r)},this.statsFilter.onFirstAudioDecoded=_r=>{var _o;(_o=this.onFirstAudioDecoded)===null||_o===void 0||_o.call(this,_r)},this.statsFilter.onFirstVideoDecoded=(_r,_o,_a)=>{var _u;(_u=this.onFirstVideoDecoded)===null||_u===void 0||_u.call(this,_r,_o,_a)},this.statsFilter.onSelectedLocalCandidateChanged=(_r,_o)=>{var _a;(_a=this.onSelectedLocalCandidateChanged)===null||_a===void 0||_a.call(this,_r,_o)},this.statsFilter.onSelectedRemoteCandidateChanged=(_r,_o)=>{var _a;(_a=this.onSelectedRemoteCandidateChanged)===null||_a===void 0||_a.call(this,_r,_o)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(_r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const _o=this.remoteSDP.batchSend(_r).map((_p,_f)=>{let{id:n_,mslabel:r_}=_p;const{kind:o_}=_r[_f];return new uE((s_,u_)=>{const g_=setTimeout(()=>{u_(new Error("Cannot receive track, id: ".concat(n_)))},1e4),w_=D_=>{const M_=I0();if(M_.name==="Safari"&&Number(M_.version)===11&&D_.track.id!==n_&&D_.streams[0].id===r_){var P_;const _g=D_.streams[0].getTracks()[0];return(P_=this.remoteSDP)===null||P_===void 0||P_.updateTrackLabel(o_,n_,D_.track.id),this.peerConnection.removeEventListener("track",w_),clearTimeout(g_),void s_({track:_g,id:n_})}if(D_.track.id===n_)return this.peerConnection.removeEventListener("track",w_),clearTimeout(g_),void s_({track:D_.track,id:n_})};this.peerConnection.addEventListener("track",w_)})}),_a=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:_a});const _u=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(_u),await uE.all(_o)}catch(_o){throw new U_(k_.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(_o.toString()))}}async getRemoteSSRC(_r){if(!this.remoteSDP)return;const _o=this.remoteSDP.getSSRC(_r);return _o==null?void 0:_o[0].ssrcId}setConfiguration(_r){if(VS().supportPCSetConfiguration){const _o=FU.resolvePCConfiguration(_r);this.peerConnection.setConfiguration(_o)}}}).prototype,"connect",[GR],Object.getOwnPropertyDescriptor(x0.prototype,"connect"),x0.prototype),oE(x0.prototype,"stopSending",[GR],Object.getOwnPropertyDescriptor(x0.prototype,"stopSending"),x0.prototype),oE(x0.prototype,"receive",[GR],Object.getOwnPropertyDescriptor(x0.prototype,"receive"),x0.prototype),oE(x0.prototype,"stopReceiving",[GR],Object.getOwnPropertyDescriptor(x0.prototype,"stopReceiving"),x0.prototype),oE(x0.prototype,"muteRemote",[GR],Object.getOwnPropertyDescriptor(x0.prototype,"muteRemote"),x0.prototype),oE(x0.prototype,"unmuteRemote",[GR],Object.getOwnPropertyDescriptor(x0.prototype,"unmuteRemote"),x0.prototype),oE(x0.prototype,"muteLocal",[GR],Object.getOwnPropertyDescriptor(x0.prototype,"muteLocal"),x0.prototype),oE(x0.prototype,"unmuteLocal",[GR],Object.getOwnPropertyDescriptor(x0.prototype,"unmuteLocal"),x0.prototype),oE(x0.prototype,"close",[GR],Object.getOwnPropertyDescriptor(x0.prototype,"close"),x0.prototype),oE(x0.prototype,"updateEncoderConfig",[GR],Object.getOwnPropertyDescriptor(x0.prototype,"updateEncoderConfig"),x0.prototype),oE(x0.prototype,"updateSendParameters",[GR],Object.getOwnPropertyDescriptor(x0.prototype,"updateSendParameters"),x0.prototype),oE(x0.prototype,"replaceTrack",[GR],Object.getOwnPropertyDescriptor(x0.prototype,"replaceTrack"),x0.prototype),oE(x0.prototype,"getRemoteSSRC",[GR],Object.getOwnPropertyDescriptor(x0.prototype,"getRemoteSSRC"),x0.prototype),x0);function GR(_n,_r,_o){const _a=_n[_r];if(typeof _a!="function")throw new Error("Cannot use mutex on object property.");return _o.value=async function(){const _u=this.mutex,_p=await _u.lock("Locking from P2PConnection.".concat(_r));try{for(var _f=arguments.length,n_=new Array(_f),r_=0;r_<_f;r_++)n_[r_]=arguments[r_];return await _a.apply(this,n_)}finally{_p()}},_o}const BF="9",O8=4e4;class OQ{get localCapabilities(){return vS(this._localCapabilities)}get rtpCapabilities(){return vS(this._rtpCapabilities)}get candidates(){return vS(this._candidates)}get iceParameters(){return vS(this._iceParameters)}get dtlsParameters(){return vS(this._dtlsParameters)}constructor(_r){p_(this,"sessionDesc",void 0),p_(this,"_localCapabilities",void 0),p_(this,"_rtpCapabilities",void 0),p_(this,"_candidates",void 0),p_(this,"_iceParameters",void 0),p_(this,"_dtlsParameters",void 0),p_(this,"setup",void 0),p_(this,"currentMidIndex",void 0),p_(this,"cname",void 0),p_(this,"firefoxSsrcMidMap",new Map),_r=vS(_r);const{remoteIceParameters:_o,remoteDtlsParameters:_a,candidates:_u,remoteRTPCapabilities:_p,remoteSetup:_f,localCapabilities:n_,cname:r_}=_r,o_=ES.exports.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=ice-lite
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`);this._rtpCapabilities=_p,this._candidates=_u,this._iceParameters=_o,this._dtlsParameters=_a,this._localCapabilities=n_,this.setup=_f,this.cname=r_;const s_=this.rtpCapabilities.send;for(const u_ of o_.mediaDescriptions){if(u_.attributes.iceUfrag=_o.iceUfrag,u_.attributes.icePwd=_o.icePwd,u_.attributes.fingerprints=_a.fingerprints,u_.attributes.candidates=_u,u_.attributes.setup=_f,u_.media.mediaType==="video"&&(u_.media.fmts=s_.videoCodecs.map(g_=>g_.payloadType.toString(10)),u_.attributes.payloads=s_.videoCodecs,u_.attributes.extmaps=s_.videoExtensions,J_("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:g_,ssrcGroups:w_}=HR([{ssrcId:O8,rtx:J_("USE_RTX")?40001:void 0}],this.cname);u_.attributes.ssrcs=g_,u_.attributes.ssrcGroups=w_}if(u_.media.mediaType==="audio"&&(u_.media.fmts=s_.audioCodecs.map(g_=>g_.payloadType.toString(10)),u_.attributes.payloads=s_.audioCodecs,u_.attributes.extmaps=s_.audioExtensions,oN(u_),J_("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:g_,ssrcGroups:w_}=HR([{ssrcId:2e4}],this.cname);u_.attributes.ssrcs=g_,u_.attributes.ssrcGroups=w_}}this.sessionDesc=o_,this.currentMidIndex=o_.mediaDescriptions.length-1}preloadRemoteMedia(){const _r=J_("PRELOAD_MEDIA_COUNT");this.rtpCapabilities;const _o=this.candidates,_a=this.dtlsParameters,_u=this.iceParameters,_p=this.rtpCapabilities.send;for(let _f=1;_f<_r;_f++){const n_=2*_f+2e4,r_=2*_f+O8,{ssrcs:o_,ssrcGroups:s_}=HR([{ssrcId:n_}],this.cname),{ssrcs:u_,ssrcGroups:g_}=HR([{ssrcId:r_,rtx:J_("USE_RTX")?r_+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:BF,protos:["UDP","TLS","RTP","SAVPF"],fmts:_p.videoCodecs.map(w_=>w_.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:_u.iceUfrag,icePwd:_u.icePwd,unrecognized:[],candidates:_o,extmaps:_p.videoExtensions,fingerprints:_a.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:u_,ssrcGroups:g_,rtcpFeedbackWildcards:[],payloads:_p.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*_f)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:BF,protos:["UDP","TLS","RTP","SAVPF"],fmts:_p.audioCodecs.map(w_=>w_.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:_u.iceUfrag,icePwd:_u.icePwd,unrecognized:[],candidates:_o,extmaps:_p.audioExtensions,fingerprints:_a.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:o_,ssrcGroups:s_,rtcpFeedbackWildcards:[],payloads:_p.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*_f+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return ES.exports.print(this.sessionDesc)}send(_r,_o,_a,_u){const{ssrcs:_p,ssrcGroups:_f}=HR(_o,this.cname,J_("SYNC_GROUP")?_a:void 0),n_=this.findPreloadMediaDesc(_p);if(n_){if(tS()&&this.firefoxSsrcMidMap.set(_p[0].ssrcId,n_.attributes.mid),_u&&(_u.twcc||_u.remb)){const r_=this.sessionDesc.mediaDescriptions.indexOf(n_);return this.sessionDesc.mediaDescriptions[r_]=this.mungSendMediaDesc(n_,_u),{mid:n_.attributes.mid,needExchangeSDP:!0}}return{mid:n_.attributes.mid,needExchangeSDP:!1}}{const r_=this.findAvailableMediaIndex(_r,_p);let o_;return r_===-1||r_===1&&(rT()||B3())||V3()?(o_=this.createOrRecycleSendMedia(_r,_p,_f,"sendonly",_u),this.updateBundleMids()):(o_=vS(this.sessionDesc.mediaDescriptions[r_]),o_.attributes.direction="sendonly",o_.attributes.ssrcs=_p,o_.attributes.ssrcGroups=_f,this.sessionDesc.mediaDescriptions[r_]=this.mungSendMediaDesc(o_,_u)),tS()&&this.firefoxSsrcMidMap.set(_p[0].ssrcId,o_.attributes.mid),{mid:o_.attributes.mid,needExchangeSDP:!0}}}batchSend(_r){const _o=_r.map(_p=>{let{kind:_f,ssrcMsg:n_,mslabel:r_}=_p;return this.send(_f,n_,r_)}),_a=[];let _u=!1;return _o.forEach(_p=>{let{mid:_f,needExchangeSDP:n_}=_p;n_&&(_u=!0),_a.push(_f)}),{mids:_a,needExchangeSDP:_u}}stopSending(_r){const _o=this.sessionDesc.mediaDescriptions.filter(_a=>_a.attributes.mid&&_r.indexOf(_a.attributes.mid)!==-1);if(_o.length!==_r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");_o.forEach(_a=>{_a.attributes.mid==="0"||tS()||V3()?_a.attributes.ssrcs=[]:(_a.attributes.ssrcs=[],_a.attributes.direction="inactive",_a.media.port="0")}),this.updateBundleMids()}mute(_r){const _o=this.sessionDesc.mediaDescriptions.find(_a=>_a.attributes.mid===_r);if(!_o)throw new Error("mediaDescription not found with ".concat(_r," in remote SDP when calling RemoteSDP.mute."));_o.attributes.direction="inactive"}unmute(_r){const _o=this.sessionDesc.mediaDescriptions.find(_a=>_a.attributes.mid===_r);if(!_o)throw new Error("mediaDescription not found with ".concat(_r," in remote SDP when calling RemoteSDP.unmute."));_o.attributes.direction="sendonly"}muteRemote(_r){const _o=this.sessionDesc.mediaDescriptions.filter(_a=>_r.includes(_a.attributes.mid||""));if(_o.length!==_r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");_o.forEach(_a=>{_a.attributes.direction="inactive"})}unmuteRemote(_r){const _o=this.sessionDesc.mediaDescriptions.filter(_a=>_r.includes(_a.attributes.mid||""));if(_o.length!==_r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");_o.forEach(_a=>{_a.attributes.direction="recvonly"})}receive(_r,_o,_a,_u){_r.forEach((_p,_f)=>{this.createOrRecycleRecvMedia(_p,[],"recvonly",_o,_a,_u[_f])}),this.updateBundleMids()}stopReceiving(_r){const _o=this.sessionDesc.mediaDescriptions.filter(_a=>_r.indexOf(_a.attributes.mid)!==-1);if(_o.length!==_r.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");_o.forEach(_a=>{_a.media.port="0",_a.attributes.direction="inactive"}),this.updateBundleMids()}restartICE(_r){_r=vS(_r),this._iceParameters=_r,this.sessionDesc.mediaDescriptions.forEach(_o=>{_o.attributes.iceUfrag=_r.iceUfrag,_o.attributes.icePwd=_r.icePwd})}predictReceivingMids(_r){const _o=[];for(let _a=0;_a<_r;_a++)_o.push((this.currentMidIndex+_a+1).toString(10));return _o}findAvailableMediaIndex(_r,_o){return this.sessionDesc.mediaDescriptions.findIndex(_a=>{const _u=_a.media.mediaType===_r&&_a.media.port!=="0"&&(_a.attributes.direction==="sendonly"||_a.attributes.direction==="sendrecv")&&_a.attributes.ssrcs.length===0;if(tS()){if(_u){const _p=this.firefoxSsrcMidMap.get(_o[0].ssrcId);return!(_p||_a.attributes.mid!=="0"&&_a.attributes.mid!=="1")||!(!_p||_p!==_a.attributes.mid)}return!1}return _u})}createOrRecycleRecvMedia(_r,_o,_a,_u,_p,_f){const n_=_r._mediaStreamTrack.kind,r_=this.rtpCapabilities.recv,o_=this.localCapabilities.send;let s_=[];if(n_===WE.VIDEO){var u_,g_;if(J_("H264_PROFILE_LEVEL_ID")&&_u==="h264"&&(s_=r_.videoCodecs.filter(_g=>{var _y,hE;return(((_y=_g.rtpMap)===null||_y===void 0?void 0:_y.encodingName.toLowerCase())||"").includes(_u)&&(_g==null||(hE=_g.fmtp)===null||hE===void 0?void 0:hE.parameters["profile-level-id"])===J_("H264_PROFILE_LEVEL_ID")})),!s_||((u_=s_)===null||u_===void 0?void 0:u_.length)===0){const _g=o_.videoCodecs.filter(_y=>{var hE;return(((hE=_y.rtpMap)===null||hE===void 0?void 0:hE.encodingName.toLowerCase())||"").includes(_u)});_g.length!==0&&(s_=r_.videoCodecs.filter(_y=>_g.some(hE=>hE.payloadType===_y.payloadType)))}if(J_("USE_RTX")){const _g=s_.map(hE=>hE.payloadType.toString()),_y=r_.videoCodecs.filter(hE=>{var NE,mE;return((NE=hE.rtpMap)===null||NE===void 0?void 0:NE.encodingName)==="rtx"&&_g.includes(((mE=hE.fmtp)===null||mE===void 0?void 0:mE.parameters.apt)||"")});s_=[...s_,..._y]}s_.length===0&&(E_.warning("codec ".concat(_u," not included in rtpCapabilities, fallback to default payloads: ").concat((g_=r_.videoCodecs[0].rtpMap)===null||g_===void 0?void 0:g_.encodingName)),s_=r_.videoCodecs)}else s_=r_.audioCodecs.filter(_g=>{var _y;return(((_y=_g.rtpMap)===null||_y===void 0?void 0:_y.encodingName.toLowerCase())||"").includes(_p)}),s_.length===0&&(E_.warning("codec ".concat(_p," not included in rtpCapabilities, fallback to opus")),s_=r_.audioCodecs.filter(_g=>{var _y;return(((_y=_g.rtpMap)===null||_y===void 0?void 0:_y.encodingName.toLowerCase())||"").includes("opus")}));const w_=n_===WE.VIDEO?r_.videoExtensions:r_.audioExtensions;this.currentMidIndex+=1;const D_="".concat(this.currentMidIndex);let M_={media:{mediaType:n_,port:BF,protos:["UDP","TLS","RTP","SAVPF"],fmts:s_.map(_g=>_g.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:w_,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:_o,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:s_,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:_a,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(D_)}};M_=this.mungRecvMediaDsec(M_,_r,_f);const P_=this.findFirstClosedMedia(n_);if(P_){const _g=this.sessionDesc.mediaDescriptions.indexOf(P_);this.sessionDesc.mediaDescriptions[_g]=M_}else this.sessionDesc.mediaDescriptions.push(M_);return M_}createOrRecycleSendMedia(_r,_o,_a,_u,_p){const _f=this.rtpCapabilities.send,n_=_r===WE.VIDEO?_f.videoCodecs:_f.audioCodecs,r_=_r===WE.VIDEO?_f.videoExtensions:_f.audioExtensions;this.currentMidIndex+=1;const o_="".concat(this.currentMidIndex);let s_={media:{mediaType:_r,port:BF,protos:["UDP","TLS","RTP","SAVPF"],fmts:n_.map(g_=>g_.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:r_,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:_o,ssrcGroups:_a,rtcpFeedbackWildcards:[],payloads:n_,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:_u,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(o_)}};s_=this.mungSendMediaDesc(s_,_p);const u_=this.findFirstClosedMedia(_r);if(u_){const g_=this.sessionDesc.mediaDescriptions.indexOf(u_);this.sessionDesc.mediaDescriptions[g_]=s_}else this.sessionDesc.mediaDescriptions.push(s_);return s_}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(_r=>_r.media.port!=="0").map(_r=>_r.attributes.mid)}mungRecvMediaDsec(_r,_o,_a){const _u=vS(_r);return zH(_u),zD(_u,_o),KH(_u,_o),m8(_u),FF(_u,_a,this.localCapabilities.send),_u}mungSendMediaDesc(_r,_o){const _a=vS(_r);return FF(_a,_o,this.localCapabilities.recv),oN(_a),_a}updateRecvMedia(_r,_o){const _a=this.sessionDesc.mediaDescriptions.findIndex(_u=>_u.attributes.mid===_r);if(_a!==-1){const _u=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[_a],_o);this.sessionDesc.mediaDescriptions[_a]=_u}}bumpMid(_r){this.currentMidIndex+=_r}findFirstClosedMedia(_r){return this.sessionDesc.mediaDescriptions.find(_o=>tS()?_o.media.port==="0"&&_o.media.mediaType===_r:_o.media.port==="0")}findPreloadMediaDesc(_r){return this.sessionDesc.mediaDescriptions.find(_o=>{var _a,_u;return((_a=_o.attributes)===null||_a===void 0||(_u=_a.ssrcs[0])===null||_u===void 0?void 0:_u.ssrcId)===_r[0].ssrcId})}getSSRC(_r){var _o;return(_o=this.sessionDesc.mediaDescriptions.find(_a=>_a.attributes.mid===_r))===null||_o===void 0?void 0:_o.attributes.ssrcs}}var L0;function N8(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function k8(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?N8(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):N8(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}let jU=(oE((L0=class YU extends yF{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(_r,_o){super(_r,_o),p_(this,"store",void 0),p_(this,"peerConnection",void 0),p_(this,"remoteSDP",void 0),p_(this,"initialOffer",void 0),p_(this,"transportEventReceiver",void 0),p_(this,"statsFilter",void 0),p_(this,"useRTX",J_("USE_RTX")),p_(this,"localCapabilities",void 0),p_(this,"localCandidateCount",0),p_(this,"allCandidatesReceived",!1),p_(this,"establishPromise",void 0),p_(this,"mutex",new RT("P2PConnection-mutex")),this.store=_o,this.peerConnection=new RTCPeerConnection(YU.resolvePCConfiguration(_r),{optional:[{googDscp:!0}]}),this.statsFilter=ZH(this.peerConnection,void 0,void 0,tS()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});const _r=await this.peerConnection.createOffer();if(!_r.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const _o=SL(_r.sdp),_a=await g8(!this.useRTX,J_("FILTER_VIDEO_FEC"),J_("FILTER_AUDIO_FEC"));return this.localCapabilities=JH(_a),this.initialOffer=_r,k8(k8({},_o),{},{rtpCapabilities:_a,offerSDP:_r.sdp})}catch(_r){throw new U_(k_.GET_LOCAL_CONNECTION_PARAMS_FAILED,_r.toString())}}async connect(_r,_o,_a,_u,_p,_f){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new OQ({remoteIceParameters:_r,remoteDtlsParameters:_o,candidates:_a,remoteRTPCapabilities:_u,remoteSetup:_p,localCapabilities:this.localCapabilities,cname:_f});const n_=this.remoteSDP.toString(),r_=ES.exports.parse(this.initialOffer.sdp),o_=r_.mediaDescriptions.find(w_=>w_.media.mediaType==="audio");o_&&oN(o_);const s_=ES.exports.print(r_),u_=this.logSDPExchange(s_||"","offer","local","connect");await this.peerConnection.setLocalDescription({type:"offer",sdp:s_}),u_==null||u_(n_),await this.peerConnection.setRemoteDescription({type:"answer",sdp:n_});const g_=this.peerConnection.getTransceivers()[0];if(g_!=null&&g_.receiver&&this.tryBindTransportEvents(g_.receiver),J_("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia();const w_=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:w_});const D_=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(D_)}}catch(n_){throw new U_(k_.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(n_.toString()))}}send(_r,_o,_a){var _u=this;return _I(function*(){const _p=yield i0(_u.mutex.lock("From P2PConnection.send"));try{if(!_u.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const _f=[];_r.forEach(M_=>{const P_=_u.peerConnection.addTransceiver(M_._mediaStreamTrack,{direction:"sendonly"});_f.push(P_)}),tS()&&J_("SIMULCAST")===!0&&(yield i0(_u.applySimulcastForFirefox(_f,_r)));const n_=yield i0(_u.peerConnection.createOffer()),r_=_u.remoteSDP.predictReceivingMids(_r.length),o_=_u.mungSendOfferSDP(n_.sdp,_r,r_),s_=ES.exports.parse(o_),u_=r_.map(M_=>{const P_=s_.mediaDescriptions.find(_g=>_g.attributes.mid===M_);if(!P_)throw new Error("Cannot extract ssrc from mediaDescription.");return p8(P_,_u.useRTX)});let g_;try{g_=yield u_}catch(M_){g_=[],_u.remoteSDP.receive(_r,_o,_a,g_);const P_=_u.remoteSDP.toString();throw yield i0(_u.peerConnection.setLocalDescription({type:"offer",sdp:o_})),yield i0(_u.peerConnection.setRemoteDescription({type:"answer",sdp:P_})),yield i0(_u.stopSending(r_,!0)),M_}_u.remoteSDP.receive(_r,_o,_a,g_);const w_=_u.remoteSDP.toString(),D_=_u.logSDPExchange(o_,"offer","local","send");return yield i0(_u.peerConnection.setLocalDescription({type:"offer",sdp:o_})),yield i0(_u.applySimulcastEncodings(_f,_r)),yield i0(_u.applySendEncodings(_f,_r)),D_==null||D_(w_),yield i0(_u.peerConnection.setRemoteDescription({type:"answer",sdp:w_})),_f.map((M_,P_)=>{const _g=r_[P_];return{localSSRC:u_[P_],id:_g,transceiver:M_}})}catch(_f){throw _f instanceof U_?_f:new U_(k_.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(_f.toString()))}finally{_p()}})()}async stopSending(_r,_o){const _a=_o?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const _u=this.peerConnection.getTransceivers().filter(r_=>_r.indexOf(r_.mid)!==-1);if(_u.length!==_r.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");_u.map(r_=>{var o_;r_.direction="inactive",(o_=r_.stop)===null||o_===void 0||o_.call(r_)});const _p=await this.peerConnection.createOffer(),_f=this.logSDPExchange(_p.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(_p),this.remoteSDP.stopReceiving(_r);const n_=this.remoteSDP.toString();_f==null||_f(n_),await this.peerConnection.setRemoteDescription({type:"answer",sdp:n_})}catch(_u){throw new U_(k_.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(_u.toString()))}finally{_a&&_a()}}async receive(_r,_o,_a,_u){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(_r," before remoteSDP created."));const{mid:_p,needExchangeSDP:_f}=this.remoteSDP.send(_r,_o,_a,_u);if(_f){const r_=this.remoteSDP.toString(),o_=this.logSDPExchange(r_,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:r_});const s_=await this.peerConnection.createAnswer(),u_=this.mungReceiveAnswerSDP(s_.sdp,_p,_r);o_==null||o_(u_||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:u_}),E_.debug("[P2PConnection] receive ".concat(_r," by exchanging SDP."))}else E_.debug("[P2PConnection] receive ".concat(_r," no need to exchange SDP."));const n_=this.peerConnection.getTransceivers().find(r_=>r_.mid===_p);if(!n_)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:n_.receiver.track,id:_p}}catch(_p){throw new U_(k_.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(_p.toString()))}}async batchReceive(_r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:_o,needExchangeSDP:_a}=this.remoteSDP.batchSend(_r);if(_a){const _u=this.remoteSDP.toString(),_p=this.logSDPExchange(_u,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:_u});const _f=await this.peerConnection.createAnswer();_p==null||_p(_f.sdp||""),await this.peerConnection.setLocalDescription(_f),E_.debug("[P2PConnection] batchReceive by exchanging SDP.")}else E_.debug("[P2PConnection] batchReceive no need to exchange SDP.");return _o.map(_u=>{const _p=this.peerConnection.getTransceivers().find(_f=>_f.mid===_u);if(!_p)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:_p.receiver.track,id:_u}})}catch(_o){throw new U_(k_.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(_o.toString()))}}async stopReceiving(_r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(_r);const _o=this.remoteSDP.toString(),_a=this.logSDPExchange(_o,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:_o});const _u=await this.peerConnection.createAnswer();_a==null||_a(_u.sdp||""),await this.peerConnection.setLocalDescription(_u)}catch(_o){throw new U_(k_.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(_o.toString()))}}async muteRemote(_r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(_r," before remote SDP created."));this.remoteSDP.mute(_r);const _o=this.remoteSDP.toString(),_a=this.logSDPExchange(_o,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:_o});const _u=await this.peerConnection.createAnswer();_a==null||_a(_u.sdp||""),await this.peerConnection.setLocalDescription(_u)}catch(_o){throw new U_(k_.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(_o.toString()))}}async unmuteRemote(_r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(_r," before remote SDP created."));this.remoteSDP.unmute(_r);const _o=this.remoteSDP.toString(),_a=this.logSDPExchange(_o,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:_o});const _u=await this.peerConnection.createAnswer();_a==null||_a(_u.sdp||""),await this.peerConnection.setLocalDescription(_u)}catch(_o){throw new U_(k_.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(_o.toString()))}}async muteLocal(_r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const _o=this.peerConnection.getTransceivers().filter(_f=>_f.mid&&_r.indexOf(_f.mid)!==-1);if(_o.length!==_r.length)throw new Error("Transceivers' length doesn't match mids' length.");_o.map(_f=>{_f.direction="inactive"});const _a=await this.peerConnection.createOffer(),_u=this.logSDPExchange(_a.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(_a),this.remoteSDP.muteRemote(_r);const _p=this.remoteSDP.toString();_u==null||_u(_p),await this.peerConnection.setRemoteDescription({type:"answer",sdp:_p})}catch(_o){throw new U_(k_.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(_o.toString()))}}async unmuteLocal(_r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const _o=this.peerConnection.getTransceivers().filter(_f=>_f.mid&&_r.indexOf(_f.mid)!==-1);if(_o.length!==_r.length)throw new Error("Transceivers' length doesn't match mids' length.");_o.map(async(_f,n_)=>{_f.direction="sendonly"});const _a=await this.peerConnection.createOffer(),_u=this.logSDPExchange(_a.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(_a),this.remoteSDP.unmuteRemote(_r);const _p=this.remoteSDP.toString();_u==null||_u(_p),await this.peerConnection.setRemoteDescription({type:"answer",sdp:_p})}catch(_o){throw new U_(k_.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(_o.toString()))}}restartICE(){var _r=this;return _I(function*(){const _o=yield i0(_r.mutex.lock("From P2PConnection.restartICE"));try{const _a=yield i0(_r.peerConnection.createOffer({iceRestart:!0}));if(!_a.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const _u=SL(_a.sdp),{remoteIceParameters:_p}=yield _u.iceParameters;if(!_r.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");_r.remoteSDP.restartICE(_p);const _f=_r.remoteSDP.toString(),n_=_r.logSDPExchange(_a.sdp||"","offer","local","restartICE");yield i0(_r.peerConnection.setLocalDescription(_a)),n_==null||n_(_f),yield i0(_r.peerConnection.setRemoteDescription({type:"answer",sdp:_f}))}catch(_a){E_.warning("restart ICE failed, abort operation",_a)}finally{_o()}})()}close(){var _r;this.peerConnection.close(),(_r=this.onConnectionStateChange)===null||_r===void 0||_r.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(_r){return this.statsFilter.getVideoIsReady(_r)}async updateEncoderConfig(_r,_o){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const _a=await this.peerConnection.createOffer(),_u=this.mungSendOfferSDP(_a.sdp,[_o],[_r]);this.remoteSDP.updateRecvMedia(_r,_o);const _p=this.remoteSDP.toString(),_f=this.logSDPExchange(_u,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:_u}),_f==null||_f(_p),await this.peerConnection.setRemoteDescription({type:"answer",sdp:_p})}catch(_a){throw new U_(k_.EXCHANGE_SDP_FAILED,_a.toString())}}async updateSendParameters(_r,_o){const _a=this.peerConnection.getTransceivers().filter(_u=>_u.mid===_r);_a.length===1&&(this.isVP8Simulcast(_o)?tS()||await this.applySimulcastEncodings(_a,[_o]):await this.applySendEncodings(_a,[_o]))}setStatsRemoteVideoIsReady(_r,_o){this.statsFilter.setVideoIsReady2(_r,_o)}async replaceTrack(_r,_o){const _a=this.peerConnection.getTransceivers().find(_u=>_u.mid===_o);_a&&await _a.sender.replaceTrack(_r._mediaStreamTrack)}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var _r;(_r=this.onICEConnectionStateChange)===null||_r===void 0||_r.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var _r;(_r=this.onConnectionStateChange)===null||_r===void 0||_r.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=_r=>{_r.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,E_.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,E_.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},J_("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(_r){const _o={iceServers:[]};return _r.iceServers?_o.iceServers=_r.iceServers:_r.turnServer&&_r.turnServer.mode!=="off"&&(vU(_r.turnServer.servers)?_o.iceServers=_r.turnServer.servers:(_o.iceServers&&_o.iceServers.push(...YU.turnServerConfigToIceServers(_r.turnServer.servers)),J_("USE_TURN_SERVER_OF_GATEWAY")&&_o.iceServers&&_r.turnServer.serversFromGateway&&_o.iceServers.push(...YU.turnServerConfigToIceServers(_r.turnServer.serversFromGateway)),J_("FORCE_TURN_TCP")?_o.iceTransportPolicy="relay":_r.turnServer.servers.concat(_r.turnServer.serversFromGateway||[]).forEach(_a=>{_a.forceturn&&(_o.iceTransportPolicy="relay")}))),_o}static turnServerConfigToIceServers(_r){const _o=[];return _r.forEach(_a=>{_a.security?_a.tcpport&&_o.push({username:_a.username,credential:_a.password,credentialType:"password",urls:"turns:".concat(CF(_a.turnServerURL),":").concat(_a.tcpport,"?transport=tcp")}):(_a.udpport&&!J_("FORCE_TURN_TCP")&&_o.push({username:_a.username,credential:_a.password,credentialType:"password",urls:"turn:".concat(_a.turnServerURL,":").concat(_a.udpport,"?transport=udp")}),_a.tcpport&&_o.push({username:_a.username,credential:_a.password,credentialType:"password",urls:"turn:".concat(_a.turnServerURL,":").concat(_a.tcpport,"?transport=tcp")}))}),_o}tryBindTransportEvents(_r){_r.transport&&(this.transportEventReceiver=_r,_r.transport.onstatechange=()=>{var _o,_a;(_o=_r.transport)!==null&&_o!==void 0&&_o.state&&((_a=this.onDTLSTransportStateChange)===null||_a===void 0||_a.call(this,_r.transport.state))},_r.transport.onerror=_o=>{var _a;(_a=this.onDTLSTransportError)===null||_a===void 0||_a.call(this,_o.error)},_r.transport.iceTransport&&(_r.transport.iceTransport.onstatechange=()=>{var _o;const _a=(_o=_r.transport)===null||_o===void 0?void 0:_o.iceTransport.state;var _u;_a&&((_u=this.onICETransportStateChange)===null||_u===void 0||_u.call(this,_a))}))}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async applySendEncodings(_r,_o){try{if(!VS().supportSetRtpSenderParameters||_r.length!==_o.length)return;for(let o_=0;o_<_r.length;o_++){const s_=_r[o_],u_=_o[o_];if(u_&&u_ instanceof yS){var _a,_u;if(this.isVP8Simulcast(u_))continue;const g_={},w_={};switch(u_._optimizationMode){case"motion":g_.degradationPreference="maintain-framerate";break;case"detail":g_.degradationPreference="maintain-resolution";break;default:g_.degradationPreference="balanced"}var _p,_f,n_,r_;if((_a=u_._encoderConfig)!==null&&_a!==void 0&&_a.bitrateMax&&(w_.maxBitrate=1e3*((_p=u_._encoderConfig)===null||_p===void 0?void 0:_p.bitrateMax)),u_._hints.includes(NS.LOW_STREAM)&&((_f=u_._encoderConfig)!==null&&_f!==void 0&&_f.frameRate&&(w_.maxFramerate=XO(u_._encoderConfig.frameRate)),(n_=u_._encoderConfig)!==null&&n_!==void 0&&n_.scaleResolutionDownBy&&((r_=u_._encoderConfig)===null||r_===void 0?void 0:r_.scaleResolutionDownBy)>1&&(w_.scaleResolutionDownBy=u_._encoderConfig.scaleResolutionDownBy)),J_("DSCP_TYPE")&&lO()){const P_=J_("DSCP_TYPE");["very-low","low","medium","high"].includes(P_)&&(w_.networkPriority=P_)}const D_=s_.sender.getParameters(),M_=(_u=D_.encodings)===null||_u===void 0?void 0:_u[0];tS()&&!M_&&(g_.encodings=[w_]),M_&&Object.assign(M_,w_),Object.assign(D_,g_),await s_.sender.setParameters(D_)}}}catch{E_.debug("Apply RTPSendEncodings failed.")}}mungSendOfferSDP(_r,_o,_a){const _u=ES.exports.parse(_r);return _o.forEach((_p,_f)=>{const n_=_a[_f],r_=_u.mediaDescriptions.find(o_=>o_.attributes.mid===n_);r_&&(zD(r_,_p),_8(r_,_p,this.store.codec))}),ES.exports.print(_u)}mungReceiveAnswerSDP(_r,_o,_a){const _u=ES.exports.parse(_r),_p=_u.mediaDescriptions.find(_f=>_f.attributes.mid===_o);return _p&&_a===WE.AUDIO&&_p.media.mediaType==="audio"&&oN(_p),ES.exports.print(_u)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=_r=>{var _o;(_o=this.onFirstAudioReceived)===null||_o===void 0||_o.call(this,_r)},this.statsFilter.onFirstVideoReceived=_r=>{var _o;(_o=this.onFirstVideoReceived)===null||_o===void 0||_o.call(this,_r)},this.statsFilter.onFirstAudioDecoded=_r=>{var _o;(_o=this.onFirstAudioDecoded)===null||_o===void 0||_o.call(this,_r)},this.statsFilter.onFirstVideoDecoded=(_r,_o,_a)=>{var _u;(_u=this.onFirstVideoDecoded)===null||_u===void 0||_u.call(this,_r,_o,_a)},this.statsFilter.onSelectedLocalCandidateChanged=(_r,_o)=>{var _a;(_a=this.onSelectedLocalCandidateChanged)===null||_a===void 0||_a.call(this,_r,_o)},this.statsFilter.onSelectedRemoteCandidateChanged=(_r,_o)=>{var _a;(_a=this.onSelectedRemoteCandidateChanged)===null||_a===void 0||_a.call(this,_r,_o)},this.statsFilter.onFirstVideoDecodedTimeout=_r=>{var _o;(_o=this.onFirstVideoDecodedTimeout)===null||_o===void 0||_o.call(this,_r)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(_r,_o){if(_r.length===_o.length)for(let n_=0;n_<_r.length;n_++){var _a,_u,_p,_f;const r_=_r[n_],o_=_o[n_];if(o_ instanceof yS&&!o_._hints.includes(NS.LOW_STREAM)&&(_a=o_._encoderConfig)!==null&&_a!==void 0&&_a.bitrateMax&&((_u=o_._encoderConfig)===null||_u===void 0?void 0:_u.bitrateMax)>200&&(_p=o_._scalabiltyMode)!==null&&_p!==void 0&&_p.numSpatialLayers&&((_f=o_._scalabiltyMode)===null||_f===void 0?void 0:_f.numSpatialLayers)>1&&this.store.codec==="vp8"){const s_={},u_={high:1e3*(o_._encoderConfig.bitrateMax-50),medium:5e4};s_.encodings=[{rid:"m",active:!0,maxBitrate:u_.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:u_.high}];const g_=r_.sender.getParameters();await r_.sender.setParameters(Object.assign(g_,s_))}}}async applySimulcastEncodings(_r,_o){if(!tS()&&_r.length===_o.length)for(let _a=0;_a<_r.length;_a++){const _u=_o[_a];if(_u instanceof yS&&this.isVP8Simulcast(_u)){const _p=_r[_a],_f={},n_={high:1e3*(_u._encoderConfig.bitrateMax-50),medium:5e4};_f.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:n_.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:n_.medium,scaleResolutionDownBy:4}];const r_=_p.sender.getParameters();await _p.sender.setParameters(Object.assign(r_,_f))}}}isVP8Simulcast(_r){var _o,_a,_u,_p;return!!(_r instanceof yS&&J_("SIMULCAST")&&this.store.codec==="vp8"&&!_r._hints.includes(NS.LOW_STREAM)&&(_o=_r._encoderConfig)!==null&&_o!==void 0&&_o.bitrateMax&&((_a=_r._encoderConfig)===null||_a===void 0?void 0:_a.bitrateMax)>200&&(_u=_r._scalabiltyMode)!==null&&_u!==void 0&&_u.numSpatialLayers&&((_p=_r._scalabiltyMode)===null||_p===void 0?void 0:_p.numSpatialLayers)>1)}logSDPExchange(_r,_o,_a,_u){if(J_("SDP_LOGGING"))return E_.upload("exchanging ".concat(_a," ").concat(_o," SDP during P2PConnection.").concat(_u,`
`),_r),_o==="offer"?_p=>{this.logSDPExchange(_p,"answer",_a==="local"?"remote":"local",_u)}:void 0}async getRemoteSSRC(_r){if(!this.remoteSDP)return;const _o=this.remoteSDP.getSSRC(_r);return _o==null?void 0:_o[0].ssrcId}setConfiguration(_r){if(VS().supportPCSetConfiguration){const _o=YU.resolvePCConfiguration(_r);this.peerConnection.setConfiguration(_o)}}}).prototype,"connect",[qR],Object.getOwnPropertyDescriptor(L0.prototype,"connect"),L0.prototype),oE(L0.prototype,"receive",[qR],Object.getOwnPropertyDescriptor(L0.prototype,"receive"),L0.prototype),oE(L0.prototype,"batchReceive",[qR],Object.getOwnPropertyDescriptor(L0.prototype,"batchReceive"),L0.prototype),oE(L0.prototype,"stopReceiving",[qR],Object.getOwnPropertyDescriptor(L0.prototype,"stopReceiving"),L0.prototype),oE(L0.prototype,"muteRemote",[qR],Object.getOwnPropertyDescriptor(L0.prototype,"muteRemote"),L0.prototype),oE(L0.prototype,"unmuteRemote",[qR],Object.getOwnPropertyDescriptor(L0.prototype,"unmuteRemote"),L0.prototype),oE(L0.prototype,"muteLocal",[qR],Object.getOwnPropertyDescriptor(L0.prototype,"muteLocal"),L0.prototype),oE(L0.prototype,"unmuteLocal",[qR],Object.getOwnPropertyDescriptor(L0.prototype,"unmuteLocal"),L0.prototype),oE(L0.prototype,"close",[qR],Object.getOwnPropertyDescriptor(L0.prototype,"close"),L0.prototype),oE(L0.prototype,"updateEncoderConfig",[qR],Object.getOwnPropertyDescriptor(L0.prototype,"updateEncoderConfig"),L0.prototype),oE(L0.prototype,"updateSendParameters",[qR],Object.getOwnPropertyDescriptor(L0.prototype,"updateSendParameters"),L0.prototype),oE(L0.prototype,"replaceTrack",[qR],Object.getOwnPropertyDescriptor(L0.prototype,"replaceTrack"),L0.prototype),oE(L0.prototype,"getRemoteSSRC",[qR],Object.getOwnPropertyDescriptor(L0.prototype,"getRemoteSSRC"),L0.prototype),L0);function qR(_n,_r,_o){const _a=_n[_r];if(typeof _a!="function")throw new Error("Cannot use mutex on object property.");return _o.value=async function(){const _u=this.mutex,_p=await _u.lock("From P2PConnection.".concat(_r));try{for(var _f=arguments.length,n_=new Array(_f),r_=0;r_<_f;r_++)n_[r_]=arguments[r_];return await _a.apply(this,n_)}finally{_p()}},_o}function x8(_n,_r){let _o=document.createElement("video"),_a=document.createElement("canvas");_o.setAttribute("style","display:none"),_a.setAttribute("style","display:none"),_o.setAttribute("muted",""),_o.muted=!0,_o.setAttribute("autoplay",""),_o.autoplay=!0,_o.setAttribute("playsinline",""),_a.width=XO(_r.width),_a.height=XO(_r.height);const _u=XO(_r.framerate||15);document.body.append(_o),document.body.append(_a);let _p=_n._mediaStreamTrack;_o.srcObject=new MediaStream([_p]),_o.play();const _f=_a.getContext("2d");if(!_f)throw new U_(k_.UNEXPECTED_ERROR,"can not get canvas context");const n_=VS(),r_=_a.captureStream(n_.supportRequestFrame?0:_u).getVideoTracks()[0],o_=cG(()=>(()=>{if(_o.paused&&_o.play(),_o.videoHeight>2&&_o.videoWidth>2){const u_=_o.videoWidth,g_=_o.videoHeight/u_,w_=_a.width*g_;Math.abs(w_-_a.height)>=2&&(E_.debug("adjust low stream resolution","".concat(_a.width,"x").concat(_a.height," -> ").concat(_a.width,"x").concat(w_)),_a.height=w_)}_f.drawImage(_o,0,0,_a.width,_a.height),r_.requestFrame&&r_.requestFrame(),_p!==_n._mediaStreamTrack&&(_p=_n._mediaStreamTrack,_o.srcObject=new MediaStream([_p]))})(),_u),s_=r_.stop;return r_.stop=()=>{s_.call(r_),o_(),_o&&(_o.remove(),_o=null),_a&&(_a.width=0,_a.remove(),_a=null),E_.debug("clean low stream renderer")},r_}var L8,M8,D8,P8,WR,j8,U8,$8,F8,Y8,B8,vT;function V8(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function VF(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?V8(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):V8(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}class H8 extends iG{getUserId(){return this._userId}constructor(_r,_o,_a,_u){super(_r,"track-".concat(_r.kind,"-").concat(_o,"-").concat(_u.clientId,"_").concat(X0(5,""))),p_(this,"_userId",void 0),p_(this,"_uintId",void 0),p_(this,"_isDestroyed",!1),p_(this,"store",void 0),p_(this,"processor",void 0),p_(this,"processorContext",void 0),this._userId=_o,this._uintId=_a,this.store=_u}_updateOriginMediaStreamTrack(_r){this._originMediaStreamTrack=_r,this._mediaStreamTrack=_r,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,E_.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}let HF=(L8=ME({argsMap:(_n,_r,_o)=>[_n.getTrackId(),typeof _r=="string"?_r:_r instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",_o]}),M8=ME({argsMap:_n=>[_n.getTrackId()]}),D8=ME({argsMap:(_n,_r)=>[_n.getTrackId(),_r.name]}),P8=ME({argsMap:_n=>[_n.getTrackId()]}),oE((WR=class extends H8{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==sT.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(_n,_r,_o,_a){super(_n,_r,_o,_a),p_(this,"_videoVisibleTimer",null),p_(this,"_previousVideoVisibleStatus",void 0),p_(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),p_(this,"trackMediaType","video"),p_(this,"_videoWidth",void 0),p_(this,"_videoHeight",void 0),p_(this,"_player",void 0),p_(this,"processorDestination",void 0),p_(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new yG(this.getTrackId(),"remote"),this.processorDestination=new vG(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return bU(()=>{E_.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),_O(this,UE.GET_STATS)||VF({},j5)}play(_n){let _r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof _n=="string"){const _a=document.getElementById(_n);_a?_n=_a:(E_.warning("[".concat(this.getTrackId(),'] can not find "#').concat(_n,'" element, use document.body')),_n=document.body)}E_.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(_n instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(_r));const _o=VF(VF({fit:"cover"},_r),{},{trackId:this.getTrackId(),element:_n});this._player?this._player.updateConfig(_o):(_n instanceof HTMLVideoElement?this._player=new AH(_o):this._player=new Q6(_o),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.emit(MD.FIRST_FRAME_DECODED)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const _a=this.getVideoElementVisibleStatus();this.emit(MD.VIDEO_ELEMENT_VISIBLE_STATUS,_a)}catch{}},J_("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,E_.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){p6(this._originMediaStreamTrack).then(_n=>{let[_r,_o]=_n;this._videoHeight=_o,this._videoWidth=_r}).catch(OF)}_updatePlayerSource(){E_.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var _n,_r;const _o=this==null||(_n=this._player)===null||_n===void 0?void 0:_n.getContainerElement(),_a={track:this,element:this==null||(_r=this._player)===null||_r===void 0?void 0:_r.getVideoElement(),slot:_o==null?void 0:_o.parentElement},{element:_u,slot:_p}=_a;if(this.isPlaying&&_u instanceof HTMLVideoElement&&_p instanceof HTMLElement){const _f=kW.checkOneElementVisible(_u),n_=Object.assign({},_f);if(n_.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=n_.visible;const r_=AE.reportApiInvoke(null,{tag:nS.TRACER,name:wS.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});n_.visible?r_.onSuccess("Video is visible"):r_.onSuccess("Invisible because of ".concat(n_.reason))}return n_}return}catch(_o){throw new U_(k_.GET_VIDEO_ELEMENT_VISIBLE_ERROR,_o.message)}}pipe(_n){if(this.processor===_n)return _n;if(_n._source)throw new U_(k_.INVALID_OPERATION,"Processor ".concat(_n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=_n,this.processor._source=this,_n.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),_n}unpipe(){if(!this.processor)return;const _n=this.processor;this.processor._source=void 0,this.processor=void 0,_n.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(uT.ON_TRACK,async _n=>{_n?_n!==this._mediaStreamTrack&&(this._mediaStreamTrack=_n,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(uT.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}}).prototype,"play",[L8],Object.getOwnPropertyDescriptor(WR.prototype,"play"),WR.prototype),oE(WR.prototype,"stop",[M8],Object.getOwnPropertyDescriptor(WR.prototype,"stop"),WR.prototype),oE(WR.prototype,"pipe",[D8],Object.getOwnPropertyDescriptor(WR.prototype,"pipe"),WR.prototype),oE(WR.prototype,"unpipe",[P8],Object.getOwnPropertyDescriptor(WR.prototype,"unpipe"),WR.prototype),WR),GF=(j8=ME({argsMap:(_n,_r)=>[_n.getTrackId(),_r],throttleTime:300}),U8=ME({argsMap:(_n,_r)=>[_n.getTrackId(),_r]}),$8=ME({argsMap:_n=>[_n.getTrackId()]}),F8=ME({argsMap:_n=>[_n.getTrackId()]}),Y8=ME({argsMap:(_n,_r)=>[_n.getTrackId(),_r.name]}),B8=ME({argsMap:_n=>[_n.getTrackId()]}),oE((vT=class extends H8{get isPlaying(){return this._useAudioElement?cR.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(_n,_r,_o,_a){super(_n,_r,_o,_a),p_(this,"trackMediaType","audio"),p_(this,"_source",void 0),p_(this,"_useAudioElement",!0),p_(this,"_volume",100),p_(this,"processorContext",void 0),p_(this,"processorDestination",void 0),p_(this,"_played",!1),p_(this,"_bypassWebAudio",!1),J_("DISABLE_WEBAUDIO")?(this._source=new pH,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new lH(_n,!0),J_("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(KT.RECEIVE_TRACK_BUFFER,()=>{this.emit(MD.FIRST_FRAME_DECODED)}),this.processorContext=new bG(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new EG(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(KT.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setAudioFrameCallback(_n){let _r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!_n)return this._source.removeAllListeners(KT.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(_r),this._source.removeAllListeners(KT.ON_AUDIO_BUFFER),this._source.on(KT.ON_AUDIO_BUFFER,_o=>_n(_o))}setVolume(_n){this._volume=_n,this._useAudioElement?cR.setVolume(this.getTrackId(),_n):this._source.setVolume(_n/100)}async setPlaybackDevice(_n){if(!this._useAudioElement)throw new U_(k_.NOT_SUPPORTED,"your browser does not support setting the audio output device");await cR.setSinkID(this.getTrackId(),_n)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return bU(()=>{E_.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),_O(this,UE.GET_STATS)||VF({},P5)}play(){E_.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(E_.debug("[".concat(this.getTrackId(),"] use audio element to play")),cR.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){E_.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?cR.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let _n=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];E_.debug("[".concat(this.getTrackId(),"] update player source track")),_n&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&cR.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(_n){if(this._bypassWebAudio)throw new U_(k_.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===_n)return _n;if(_n._source)throw new U_(k_.INVALID_OPERATION,"Processor ".concat(_n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=_n,this.processor._source=this,_n.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),_n}unpipe(){var _n;if(this._bypassWebAudio)throw new U_(k_.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;const _r=this.processor;(_n=this._source.processSourceNode)===null||_n===void 0||_n.disconnect(),this.processor._source=!1,this.processor=void 0,_r.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(uT.ON_TRACK,async _n=>{_n?_n!==this._mediaStreamTrack&&(this._mediaStreamTrack=_n,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(_n)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}),this.processorDestination.on(uT.ON_NODE,_n=>{this._source.processedNode=_n;const _r=!_n;this._useAudioElement!==_r&&(this._played?(this.stop(),this._useAudioElement=_r,this.play()):this._useAudioElement=_r)})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(uT.ON_TRACK),this.processorDestination.removeAllListeners(uT.ON_NODE)}}).prototype,"setVolume",[j8],Object.getOwnPropertyDescriptor(vT.prototype,"setVolume"),vT.prototype),oE(vT.prototype,"setPlaybackDevice",[U8],Object.getOwnPropertyDescriptor(vT.prototype,"setPlaybackDevice"),vT.prototype),oE(vT.prototype,"play",[$8],Object.getOwnPropertyDescriptor(vT.prototype,"play"),vT.prototype),oE(vT.prototype,"stop",[F8],Object.getOwnPropertyDescriptor(vT.prototype,"stop"),vT.prototype),oE(vT.prototype,"pipe",[Y8],Object.getOwnPropertyDescriptor(vT.prototype,"pipe"),vT.prototype),oE(vT.prototype,"unpipe",[B8],Object.getOwnPropertyDescriptor(vT.prototype,"unpipe"),vT.prototype),vT);function G8(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function q8(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?G8(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):G8(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}class NQ extends lS{constructor(){super(),p_(this,"uplinkStatsUploadInterval",void 0),p_(this,"uplinkStatsUploadSlowInterval",void 0),p_(this,"uplinkRelatedStatsUploadInterval",void 0),p_(this,"uplinkDenoiserStatsUploadInterval",void 0),p_(this,"transportStatsUploadInterval",void 0),p_(this,"uplinkExtensionStatsUploadInterval",void 0),p_(this,"downlinkExtensionStatsUploadInterval",void 0),p_(this,"extensionUsageStatsUploadInterval",void 0),p_(this,"downlinkStatsUploadInterval",void 0),p_(this,"downlinkStatsUploadSlowInterval",void 0),p_(this,"downlinkRelatedStatsUploadInterval",void 0),p_(this,"lastStats",void 0),p_(this,"uploadUnplinkStarted",!1),p_(this,"uploadDownlinkStarted",!1),p_(this,"uploadTransportStarted",!1),p_(this,"uploadExtensionUsageStarted",!1),p_(this,"requestStats",void 0),p_(this,"requestLocalMedia",void 0),p_(this,"requestRemoteMedia",void 0),p_(this,"requestAllTracks",void 0),p_(this,"requestVideoIsReady",void 0),p_(this,"requestUpload",void 0)}startUploadTransportStats(){this.uploadTransportStarted||(this.uploadTransportStarted=!0,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=window.setInterval(()=>{var _r;const _o=(_r=this.requestStats)===null||_r===void 0?void 0:_r.call(this);_o&&this.uploadTransportStats(_o)},1e3))}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.extensionUsageStatsUploadInterval&&window.clearInterval(this.extensionUsageStatsUploadInterval);const _r=new Map;this.extensionUsageStatsUploadInterval=window.setInterval(async()=>{var _o,_a,_u;const _p=Date.now(),_f={connectionInterval:J_("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:_p};let n_=[];const r_=((_o=this.requestAllTracks)===null||_o===void 0?void 0:_o.call(this))||[];for(const g_ of r_)!g_.muted&&g_.enabled&&(n_=n_.concat(await g_.getProcessorUsage()));const o_=((_a=this.requestRemoteMedia)===null||_a===void 0?void 0:_a.call(this))||[];for(const[g_,w_]of o_)w_.has(WE.VIDEO)&&g_.videoTrack&&(n_=n_.concat(await g_.videoTrack.getProcessorUsage())),w_.has(WE.AUDIO)&&g_.audioTrack&&(n_=n_.concat(await g_.audioTrack.getProcessorUsage()));if(n_.length===0)return;_f.details=function(g_,w_){const D_={};for(const{id:_y,value:hE,level:NE,direction:mE}of g_){var M_;const _E=(M_=w_.get(_y))!==null&&M_!==void 0?M_:0,dE=hE===2?_E+J_("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:_E;var P_,_g;w_.set(_y,dE),D_[_y]?(hE===2&&(D_[_y].value=hE),NE>D_[_y].level&&(D_[_y].level=NE),mE==="remote"&&(D_[_y].remoteUidCount+=1),D_[_y].totalTs=(P_=w_.get(_y))!==null&&P_!==void 0?P_:0):D_[_y]={value:hE,level:NE,remoteUidCount:mE==="local"?0:1,totalTs:(_g=w_.get(_y))!==null&&_g!==void 0?_g:0}}return Object.keys(D_).map(_y=>{const{level:hE,value:NE,totalTs:mE}=D_[_y];return{id:_y,level:hE,value:NE,totalTs:mE}})}(n_,_r);const s_=Date.now(),u_=s_>_p?s_:_p+1;(_u=this.requestUpload)===null||_u===void 0||_u.call(this,zT.EXTENSION_USAGE_STATS,{usageStats:_f,sendTs:u_})},J_("EXTENSION_USAGE_UPLOAD_INTERVAL"))}startUploadUplinkStats(){this.uploadUnplinkStarted||(this.uploadUnplinkStarted=!0,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkStatsUploadInterval=window.setInterval(()=>{var _r;const _o=(_r=this.requestStats)===null||_r===void 0?void 0:_r.call(this);_o&&(this.uploadUplinkStats(_o),this.lastStats=_o)},3e3),this.uplinkStatsUploadSlowInterval&&window.clearInterval(this.uplinkStatsUploadSlowInterval),this.uplinkStatsUploadSlowInterval=window.setInterval(()=>{var _r;const _o=(_r=this.requestStats)===null||_r===void 0?void 0:_r.call(this);_o&&this.uploadSlowUplinkStats(_o)},6e4),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkRelatedStatsUploadInterval=window.setInterval(()=>{var _r;const _o=(_r=this.requestStats)===null||_r===void 0?void 0:_r.call(this);_o&&this.uploadRelatedUplinkStats(_o,this.lastStats),this.lastStats=_o},1e3),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval=window.setInterval(()=>{var _r;const _o=(_r=this.requestAllTracks)===null||_r===void 0?void 0:_r.call(this);_o&&this.uploadDenoiserStats(_o)},2e3),this.uplinkExtensionStatsUploadInterval&&window.clearInterval(this.uplinkExtensionStatsUploadInterval),this.uplinkExtensionStatsUploadInterval=window.setInterval(()=>{var _r;const _o=(_r=this.requestAllTracks)===null||_r===void 0?void 0:_r.call(this);_o&&this.uploadExtensionStats(_o)},2e3))}uploadTransportStats(_r){mI(()=>{var _o;(_o=this.requestUpload)===null||_o===void 0||_o.call(this,zT.TRANSPORT_STATS,function(_a){const _u={connectionType:100,googRtt:_a.rtt};if(_a.selectedCandidatePair.localCandidate.candidateType==="relay"){const _p=_a.selectedCandidatePair.localCandidate.relayProtocol;_p==="udp"&&(_u.connectionType=101),_p==="tcp"&&(_u.connectionType=103),_p==="tls"&&(_u.connectionType=104)}return _u}(_r))})}uploadUplinkStats(_r){var _o;(((_o=this.requestLocalMedia)===null||_o===void 0?void 0:_o.call(this))||[]).forEach(_a=>{let[_u,{track:_p,ssrcs:_f}]=_a;switch(_u){case TE.LocalVideoLowTrack:case TE.LocalVideoTrack:{const n_=function(s_,u_,g_){var w_;const D_=u_.videoSend.find(P_=>P_.ssrc===s_);if(!D_)return null;const M_={id:X0(10,""),timestamp:new Date(u_.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:D_.ssrc.toString()};switch(M_.A_vstd=g_._originMediaStreamTrack&&!g_._originMediaStreamTrack.enabled||g_._mediaStreamTrack&&!g_._mediaStreamTrack.enabled?"1":"0",D_.sentFrame&&(M_.A_fhs=D_.sentFrame.height.toString(),M_.A_frs=D_.sentFrame.frameRate.toString(),M_.A_fws=D_.sentFrame.width.toString()),D_.adaptionChangeReason){case"none":M_.A_ac="0";break;case"cpu":M_.A_ac="1";break;case"bandwidth":M_.A_ac="2";break;case"other":M_.A_ac="3"}return M_.A_lvps=G4[g_._player?g_._player.videoElementStatus:"uninit"].toString(),M_.A_nr=(w_=D_.nacksCount)===null||w_===void 0?void 0:w_.toString(),D_.avgEncodeMs&&(M_.A_aem=D_.avgEncodeMs.toFixed(0).toString()),M_}(_f[0].ssrcId,_r,_p),r_=_u===TE.LocalVideoTrack?l6(_f[0].ssrcId,_r,_p):null;n_&&mI(()=>{var s_;return(s_=this.requestUpload)===null||s_===void 0?void 0:s_.call(this,zT.PUBLISH_STATS,{stream_type:_u===TE.LocalVideoLowTrack?"low":"high",stats:q8(q8({},n_),r_)})});const o_=function(s_){const u_={id:"bweforvideo",timestamp:new Date(s_.timestamp).toISOString(),type:"VideoBwe"};return s_.bitrate.retransmit&&(u_.A_rb=s_.bitrate.retransmit.toString()),s_.bitrate.targetEncoded&&(u_.A_teb=s_.bitrate.targetEncoded.toString()),u_.A_aeb=s_.bitrate.actualEncoded.toString(),u_.A_tb=s_.bitrate.transmit.toString(),s_.sendBandwidth!==void 0&&(u_.A_asb=s_.sendBandwidth.toString()),u_}(_r);o_&&setTimeout(()=>{var s_;return(s_=this.requestUpload)===null||s_===void 0?void 0:s_.call(this,zT.PUBLISH_STATS,{stream_type:_u===TE.LocalVideoLowTrack?"low":"high",stats:o_})},1e3);break}case TE.LocalAudioTrack:{const n_=function(r_,o_,s_){const u_=o_.audioSend.find(w_=>w_.ssrc===r_);if(!u_)return null;const g_={id:X0(10,""),timestamp:new Date(o_.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:u_.ssrc.toString()};return g_.A_astd=s_._originMediaStreamTrack.enabled&&s_._mediaStreamTrack.enabled?"0":"1",u_.inputLevel?g_.A_ail=Math.round(100*u_.inputLevel).toString():g_.A_ail=Math.round(100*s_._source.getAccurateVolumeLevel()).toString(),g_.A_apil=Math.round(100*s_._source.getAccurateVolumeLevel()).toString(),u_.aecReturnLoss&&(g_.A_ecrl=Math.round(u_.aecReturnLoss).toString()),u_.aecReturnLossEnhancement&&(g_.A_ecrle=Math.round(u_.aecReturnLossEnhancement).toString()),g_}(_f[0].ssrcId,_r,_p);n_&&mI(()=>{var r_;return(r_=this.requestUpload)===null||r_===void 0?void 0:r_.call(this,zT.PUBLISH_STATS,{stream_type:"high",stats:n_})});break}}})}uploadSlowUplinkStats(_r){var _o;(((_o=this.requestLocalMedia)===null||_o===void 0?void 0:_o.call(this))||[]).filter(_a=>{let[_u]=_a;return _u===TE.LocalVideoLowTrack||_u===TE.LocalVideoTrack}).forEach(_a=>{let[_u,{ssrcs:_p}]=_a;const _f=l6(_p[0].ssrcId,_r);_f&&mI(()=>{var n_;return(n_=this.requestUpload)===null||n_===void 0?void 0:n_.call(this,zT.PUBLISH_STATS,{stream_type:_u===TE.LocalVideoLowTrack?"low":"high",stats:_f})})})}uploadRelatedUplinkStats(_r,_o){var _a;(((_a=this.requestLocalMedia)===null||_a===void 0?void 0:_a.call(this))||[]).filter(_u=>{let[_p]=_u;return _p===TE.LocalVideoLowTrack||_p===TE.LocalVideoTrack}).forEach(_u=>{let[_p,{ssrcs:_f}]=_u;const n_=function(r_,o_){const s_=o_.videoSend.find(u_=>u_.ssrc===r_);return s_?{mediaType:"video",isVideoMute:!1,frameRateInput:s_.inputFrame&&s_.inputFrame.frameRate.toString(),frameRateSent:s_.sentFrame&&s_.sentFrame.frameRate.toString(),googRtt:s_.rttMs.toString(),qpSumPerFrame:Math.floor(s_.qpSumPerFrame).toString()}:null}(_f[0].ssrcId,_r);n_&&mI(()=>{var r_;(r_=this.requestUpload)===null||r_===void 0||r_.call(this,zT.PUBLISH_RELATED_STATS,{stream_type:_p===TE.LocalVideoLowTrack?"low":"high",stats:n_})})})}uploadDenoiserStats(_r){for(let _p=0;_p<_r.length;_p++){const _f=_r[_p];if(_f instanceof RF){var _o,_a,_u;const n_=(_o=(_a=_f._external).getDenoiserStats)===null||_o===void 0?void 0:_o.call(_a);return void(n_&&((_u=this.requestUpload)===null||_u===void 0||_u.call(this,zT.DENOISER_STATS,n_)))}}}uploadExtensionStats(_r){for(let _o=0;_o<_r.length;_o++)_r[_o].getProcessorStats().forEach(_a=>{var _u;(_u=this.requestUpload)===null||_u===void 0||_u.call(this,_a.type,_a.stats)})}stopUploadUplinkStats(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkStatsUploadInterval=void 0,this.uplinkRelatedStatsUploadInterval=void 0,this.uplinkDenoiserStatsUploadInterval=void 0)}startUploadDownlinkStats(){if(this.uploadDownlinkStarted)return;let _r;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);let _o=!1;this.downlinkStatsUploadInterval=window.setInterval(()=>{var _a;const _u=(_a=this.requestStats)===null||_a===void 0?void 0:_a.call(this);_u&&(this.uploadDownlinkStats(_u,_o,_r),_r=_u),_o=!_o},3e3),this.downlinkStatsUploadSlowInterval&&window.clearInterval(this.downlinkStatsUploadSlowInterval),this.downlinkStatsUploadSlowInterval=window.setInterval(()=>{var _a;const _u=(_a=this.requestStats)===null||_a===void 0?void 0:_a.call(this);_u&&this.uploadSlowDownlinkStats(_u)},6e4),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkRelatedStatsUploadInterval=window.setInterval(()=>{var _a;const _u=(_a=this.requestStats)===null||_a===void 0?void 0:_a.call(this);_u&&(this.uploadRelatedDownlinkStats(_u,this.lastStats),this.lastStats=_u)},1e3),this.downlinkExtensionStatsUploadInterval&&window.clearInterval(this.downlinkExtensionStatsUploadInterval),this.downlinkExtensionStatsUploadInterval=window.setInterval(()=>{var _a;const _u=(_a=this.requestRemoteMedia)===null||_a===void 0?void 0:_a.call(this);_u&&this.uploadDownlinkExtensionStats(_u)},2e3)}uploadDownlinkStats(_r,_o,_a){var _u;(((_u=this.requestRemoteMedia)===null||_u===void 0?void 0:_u.call(this))||[]).forEach(_p=>{let[_f,n_]=_p;if(n_.has(WE.VIDEO)&&_f.videoTrack){const r_=_f.videoTrack?function(o_,s_,u_,g_,w_){const D_=s_.videoRecv.find(_y=>_y.ssrc===o_);if(!D_)return null;const M_={id:X0(10,""),timestamp:new Date(s_.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:D_.ssrc.toString()};var P_,_g;if(M_.bytesReceived=D_.bytes.toString(),M_.packetsLost=D_.packetsLost.toString(),M_.packetsReceived=D_.packets.toString(),D_.framesRateFirefox&&(M_.A_frr=D_.framesRateFirefox.toString()),D_.receivedFrame?(M_.A_frr=D_.receivedFrame.frameRate.toString(),M_.A_fhr=D_.receivedFrame.height.toString(),M_.A_fwr=D_.receivedFrame.width.toString()):(M_.A_fhr=(P_=g_._videoHeight)===null||P_===void 0?void 0:P_.toString(),M_.A_fwr=(_g=g_._videoWidth)===null||_g===void 0?void 0:_g.toString()),M_.A_frd=D_.decodeFrameRate.toString(),D_.outputFrame&&(M_.A_fro=D_.outputFrame.frameRate.toString()),D_.jitterBufferMs!==void 0&&(M_.A_jbm=Math.floor(D_.jitterBufferMs).toString()),D_.currentDelayMs!==void 0&&(M_.A_cdm=Math.floor(D_.currentDelayMs).toString()),M_.A_fs=D_.firsCount.toString(),M_.A_ns=D_.nacksCount.toString(),M_.A_ps=D_.plisCount.toString(),g_&&(M_.A_vrtd=g_._originMediaStreamTrack.enabled&&g_._mediaStreamTrack.enabled?"0":"1"),g_._player&&g_._player.freezeTimeCounterList.length>0&&(M_.A_vrft=Math.round(g_._player.freezeTimeCounterList.splice(0,1)[0]).toString()),w_&&g_._player&&QO.visibility==="visible"){const _y=Math.min(6e3,g_._player.renderFreezeAccTime);M_.A_vrrft=Math.round(_y).toString(),g_._player.renderFreezeAccTime=Math.max(0,g_._player.renderFreezeAccTime-_y)}if(M_.A_rvps=G4[g_._player?g_._player.videoElementStatus:"uninit"].toString(),u_){const _y=u_.videoRecv.find(hE=>hE.ssrc===o_);if(_y&&D_.totalInterFrameDelay!==void 0&&D_.totalSquaredInterFrameDelay!==void 0&&_y.totalInterFrameDelay!==void 0&&_y.totalSquaredInterFrameDelay!==void 0){const hE=D_.totalInterFrameDelay-_y.totalInterFrameDelay,NE=D_.totalSquaredInterFrameDelay-_y.totalSquaredInterFrameDelay,mE=D_.framesDecodeCount-_y.framesDecodeCount,_E=hE/mE*1e3,dE=Math.round(1e3*Math.sqrt((NE-Math.pow(hE,2)/mE)/mE));!isNaN(dE)&&_E+dE>Math.max(3*_E,_E+150)&&(M_.A_ifdsd=dE.toString())}}return M_}(_f._videoSSRC,_r,_a,_f.videoTrack,_o):void 0;r_&&mI(()=>{var o_;return(o_=this.requestUpload)===null||o_===void 0?void 0:o_.call(this,zT.SUBSCRIBE_STATS,{stream_id:_f.uid,stats:r_})})}if(n_.has(WE.AUDIO)&&_f.audioTrack){const r_=_f.audioTrack?function(o_,s_,u_,g_){const w_=s_.audioRecv.find(M_=>M_.ssrc===o_);if(!w_)return null;const D_={id:X0(10,""),timestamp:new Date(s_.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:w_.ssrc.toString()};if(D_.bytesReceived=w_.bytes.toString(),D_.packetsLost=w_.packetsLost.toString(),D_.packetsReceived=w_.packets.toString(),w_.outputLevel?D_.A_aol=Math.round(100*w_.outputLevel).toString():D_.A_aol=Math.round(100*g_._source.getAccurateVolumeLevel()).toString(),D_.A_apol=Math.round(100*g_._source.getAccurateVolumeLevel()).toString(),g_&&(D_.A_artd=g_._originMediaStreamTrack.enabled&&g_._mediaStreamTrack.enabled?"0":"1"),D_.A_jr=w_.jitterMs.toString(),D_.A_jbm=Math.floor(w_.jitterBufferMs).toString(),D_.A_cdm=Math.floor(w_.jitterBufferMs).toString(),D_.A_raps=G4[cR.getPlayerState(g_.getTrackId())].toString(),u_){const M_=u_.audioRecv.find(P_=>P_.ssrc===o_);if(M_){const P_=w_.concealedSamples-M_.concealedSamples;P_>0&&(D_.A_cs=Math.round(P_).toString())}}return D_}(_f._audioSSRC,_r,_a,_f.audioTrack):void 0;r_&&mI(()=>{var o_;return(o_=this.requestUpload)===null||o_===void 0?void 0:o_.call(this,zT.SUBSCRIBE_STATS,{stream_id:_f.uid,stats:r_})})}})}uploadSlowDownlinkStats(_r){}uploadRelatedDownlinkStats(_r,_o){var _a;(((_a=this.requestRemoteMedia)===null||_a===void 0?void 0:_a.call(this))||[]).forEach(_u=>{let[_p,_f]=_u;if(_f.has(WE.VIDEO)&&_p.videoTrack){var n_;const r_=(_p._videoSSRC&&((n_=this.requestVideoIsReady)===null||n_===void 0?void 0:n_.call(this,_p._videoSSRC))||!1)===!0,o_=function(s_,u_,g_,w_,D_,M_){const P_=g_.videoRecv.find(NE=>NE.ssrc===s_),_g=D_?D_.videoRecv.find(NE=>NE.ssrc===s_):void 0;if(!P_)return null;const _y=FD.isRemoteVideoFreeze(M_,P_,_g)&&u_,hE={mediaType:"video",isVideoMute:!1,peerId:w_,frameRateReceived:P_.receivedFrame&&P_.receivedFrame.frameRate.toString(),frameRateDecoded:P_.decodedFrame&&P_.decodedFrame.frameRate.toString(),isFreeze:_y,bytesReceived:P_.bytes.toString(),packetsReceived:P_.packets.toString(),packetsLost:P_.packetsLost.toString(),qpSumPerFrame:Math.floor(P_.qpSumPerFrame).toString()};return P_.framesRateFirefox&&(hE.frameRateDecoded=P_.framesRateFirefox.toString(),hE.frameRateReceived=P_.framesRateFirefox.toString()),hE}(_p._videoSSRC,r_,_r,_p.uid,_o,_p.videoTrack);o_&&mI(()=>{var s_;(s_=this.requestUpload)===null||s_===void 0||s_.call(this,zT.SUBSCRIBE_RELATED_STATS,{stream_id:_p.uid,stats:o_})})}if(_f.has(WE.AUDIO)&&_p.audioTrack){const r_=function(o_,s_,u_,g_){const w_=s_.audioRecv.find(M_=>M_.ssrc===o_);if(!w_)return null;const D_=FD.isRemoteAudioFreeze(g_);return{mediaType:"audio",isAudioMute:!1,peerId:u_,googJitterReceived:w_.jitterMs.toString(),isFreeze:D_,bytesReceived:w_.bytes.toString(),packetsReceived:w_.packets.toString(),packetsLost:w_.packetsLost.toString(),frameReceived:w_.receivedFrames.toString(),frameDropped:w_.droppedFrames.toString()}}(_p._audioSSRC,_r,_p.uid,_p.audioTrack);r_&&mI(()=>{var o_;(o_=this.requestUpload)===null||o_===void 0||o_.call(this,zT.SUBSCRIBE_RELATED_STATS,{stream_id:_p.uid,stats:r_})})}})}stopUploadDownlinkStats(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkStatsUploadInterval=void 0,this.downlinkRelatedStatsUploadInterval=void 0)}stopUploadTransportStats(){this.uploadTransportStarted&&(this.uploadTransportStarted=!1,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=void 0)}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.extensionUsageStatsUploadInterval&&window.clearInterval(this.extensionUsageStatsUploadInterval),this.extensionUsageStatsUploadInterval=void 0)}uploadDownlinkExtensionStats(_r){_r.forEach(_o=>{let[_a,_u]=_o;_u.has(WE.VIDEO)&&_a.videoTrack&&_a.videoTrack.getProcessorStats().forEach(_p=>{var _f;(_f=this.requestUpload)===null||_f===void 0||_f.call(this,_p.type,_p.stats)}),_u.has(WE.AUDIO)&&_a.audioTrack&&_a.audioTrack.getProcessorStats().forEach(_p=>{var _f;(_f=this.requestUpload)===null||_f===void 0||_f.call(this,_p.type,_p.stats)})})}}const W8=`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0
a=msid-semantic: WMS
a=ice-lite
m=application 9 UDP/DTLS/SCTP webrtc-datachannel
c=IN IP4 127.0.0.1
a=mid:0
`,qF="9",e5=2e4,t5=4e4;class kQ{get localCapabilities(){return vS(this._localCapabilities)}get rtpCapabilities(){return vS(this._rtpCapabilities)}get candidates(){return vS(this._candidates)}get iceParameters(){return vS(this._iceParameters)}get dtlsParameters(){return vS(this._dtlsParameters)}constructor(_r){p_(this,"sessionDesc",void 0),p_(this,"_localCapabilities",void 0),p_(this,"_rtpCapabilities",void 0),p_(this,"_candidates",void 0),p_(this,"_iceParameters",void 0),p_(this,"_dtlsParameters",void 0),p_(this,"setup",void 0),p_(this,"currentMidIndex",void 0),p_(this,"cname",void 0),p_(this,"firefoxSsrcMidMap",new Map),_r=vS(_r);const{remoteIceParameters:_o,remoteDtlsParameters:_a,candidates:_u,remoteRTPCapabilities:_p,remoteSetup:_f,localCapabilities:n_,cname:r_}=_r,o_=ES.exports.parse(W8);this._rtpCapabilities=_p,this._candidates=_u,this._iceParameters=_o,this._dtlsParameters=_a,this._localCapabilities=n_,this.setup=_f,this.cname=r_;const s_=this.rtpCapabilities.send;for(const u_ of o_.mediaDescriptions){if(u_.attributes.iceUfrag=_o.iceUfrag,u_.attributes.icePwd=_o.icePwd,u_.attributes.fingerprints=_a.fingerprints,u_.attributes.candidates=_u,u_.attributes.setup=_f,u_.media.mediaType==="application"&&(u_.attributes.sctpPort="5000"),u_.media.mediaType==="video"&&(u_.media.fmts=s_.videoCodecs.map(g_=>g_.payloadType.toString(10)),u_.attributes.payloads=s_.videoCodecs,u_.attributes.extmaps=s_.videoExtensions,J_("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:g_,ssrcGroups:w_}=HR([{ssrcId:t5,rtx:J_("USE_RTX")?40001:void 0}],this.cname);u_.attributes.ssrcs=g_,u_.attributes.ssrcGroups=w_}if(u_.media.mediaType==="audio"&&(u_.media.fmts=s_.audioCodecs.map(g_=>g_.payloadType.toString(10)),u_.attributes.payloads=s_.audioCodecs,u_.attributes.extmaps=s_.audioExtensions,oN(u_),J_("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:g_,ssrcGroups:w_}=HR([{ssrcId:e5}],this.cname);u_.attributes.ssrcs=g_,u_.attributes.ssrcGroups=w_}}this.sessionDesc=o_,this.currentMidIndex=o_.mediaDescriptions.length-1}updateRemoteRTPCapabilities(_r){const _o=ES.exports.parse(W8);this._rtpCapabilities=_r;const _a=this.rtpCapabilities.send;for(const _u of _o.mediaDescriptions){if(_u.attributes.iceUfrag=this._iceParameters.iceUfrag,_u.attributes.icePwd=this._iceParameters.icePwd,_u.attributes.fingerprints=this._dtlsParameters.fingerprints,_u.attributes.candidates=this._candidates,_u.attributes.setup=this.setup,_u.media.mediaType==="application"&&(_u.attributes.sctpPort="5000"),_u.media.mediaType==="video"&&(_u.media.fmts=_a.videoCodecs.map(_p=>_p.payloadType.toString(10)),_u.attributes.payloads=_a.videoCodecs,_u.attributes.extmaps=_a.videoExtensions,J_("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:_p,ssrcGroups:_f}=HR([{ssrcId:t5,rtx:J_("USE_RTX")?40001:void 0}],this.cname);_u.attributes.ssrcs=_p,_u.attributes.ssrcGroups=_f}if(_u.media.mediaType==="audio"&&(_u.media.fmts=_a.audioCodecs.map(_p=>_p.payloadType.toString(10)),_u.attributes.payloads=_a.audioCodecs,_u.attributes.extmaps=_a.audioExtensions,J_("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:_p,ssrcGroups:_f}=HR([{ssrcId:e5}],this.cname);_u.attributes.ssrcs=_p,_u.attributes.ssrcGroups=_f}}this.sessionDesc=_o,this.currentMidIndex=_o.mediaDescriptions.length-1}preloadRemoteMedia(_r){this.rtpCapabilities;const _o=this.candidates,_a=this.dtlsParameters,_u=this.iceParameters,_p=this.rtpCapabilities.send;for(let _f=1;_f<_r;_f++){const n_=2*_f+e5,r_=2*_f+t5,{ssrcs:o_,ssrcGroups:s_}=HR([{ssrcId:n_}],this.cname),{ssrcs:u_,ssrcGroups:g_}=HR([{ssrcId:r_,rtx:J_("USE_RTX")?r_+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:qF,protos:["UDP","TLS","RTP","SAVPF"],fmts:_p.videoCodecs.map(w_=>w_.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:_u.iceUfrag,icePwd:_u.icePwd,unrecognized:[],candidates:_o,extmaps:_p.videoExtensions,fingerprints:_a.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:u_,ssrcGroups:g_,rtcpFeedbackWildcards:[],payloads:_p.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*_f-1)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:qF,protos:["UDP","TLS","RTP","SAVPF"],fmts:_p.audioCodecs.map(w_=>w_.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:_u.iceUfrag,icePwd:_u.icePwd,unrecognized:[],candidates:_o,extmaps:_p.audioExtensions,fingerprints:_a.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:o_,ssrcGroups:s_,rtcpFeedbackWildcards:[],payloads:_p.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*_f)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return ES.exports.print(this.sessionDesc)}send(_r,_o,_a,_u){const{ssrcs:_p,ssrcGroups:_f}=HR(_o,this.cname,J_("SYNC_GROUP")?_a:void 0),n_=this.findPreloadMediaDesc(_p);if(n_){if(tS()&&this.firefoxSsrcMidMap.set(_p[0].ssrcId,n_.attributes.mid),_u&&(_u.twcc||_u.remb)){const r_=this.sessionDesc.mediaDescriptions.indexOf(n_);return this.sessionDesc.mediaDescriptions[r_]=this.mungSendMediaDesc(n_,_u),{mid:n_.attributes.mid,needExchangeSDP:!0}}return{mid:n_.attributes.mid,needExchangeSDP:!1}}{const r_=this.findAvailableMediaIndex(_r,_p);let o_;return r_===-1||rT()||KS()||B3()?(o_=this.createOrRecycleSendMedia(_r,_p,_f,"sendonly",_u),this.updateBundleMids()):(o_=vS(this.sessionDesc.mediaDescriptions[r_]),o_.attributes.direction="sendonly",o_.attributes.ssrcs=_p,o_.attributes.ssrcGroups=_f,this.sessionDesc.mediaDescriptions[r_]=this.mungSendMediaDesc(o_,_u)),tS()&&this.firefoxSsrcMidMap.set(_p[0].ssrcId,o_.attributes.mid),{mid:o_.attributes.mid,needExchangeSDP:!0}}}batchSend(_r){const _o=_r.map(_p=>{let{kind:_f,ssrcMsg:n_,mslabel:r_}=_p;return this.send(_f,n_,r_)}),_a=[];let _u=!1;return _o.forEach(_p=>{let{mid:_f,needExchangeSDP:n_}=_p;n_&&(_u=!0),_a.push(_f)}),{mids:_a,needExchangeSDP:_u}}stopSending(_r){const _o=this.sessionDesc.mediaDescriptions.filter(_a=>_a.attributes.mid&&_r.indexOf(_a.attributes.mid)!==-1);if(_o.length!==_r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");_o.forEach(_a=>{_a.attributes.mid==="0"||tS()||rT()||KS()?_a.attributes.ssrcs=[]:(_a.attributes.ssrcs=[],_a.attributes.direction="inactive",_a.media.port="0")}),this.updateBundleMids()}mute(_r){const _o=this.sessionDesc.mediaDescriptions.find(_a=>_a.attributes.mid===_r);if(!_o)throw new Error("mediaDescription not found with ".concat(_r," in remote SDP when calling RemoteSDP.mute."));_o.attributes.direction="inactive"}unmute(_r){const _o=this.sessionDesc.mediaDescriptions.find(_a=>_a.attributes.mid===_r);if(!_o)throw new Error("mediaDescription not found with ".concat(_r," in remote SDP when calling RemoteSDP.unmute."));_o.attributes.direction="sendonly"}muteRemote(_r){const _o=this.sessionDesc.mediaDescriptions.filter(_a=>_r.includes(_a.attributes.mid||""));if(_o.length!==_r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");_o.forEach(_a=>{_a.attributes.direction="inactive"})}unmuteRemote(_r){const _o=this.sessionDesc.mediaDescriptions.filter(_a=>_r.includes(_a.attributes.mid||""));if(_o.length!==_r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");_o.forEach(_a=>{_a.attributes.direction="recvonly"})}receive(_r,_o,_a,_u){_r.forEach((_p,_f)=>{this.createOrRecycleRecvMedia(_p,[],"recvonly",_o,_a,_u[_f])}),this.updateBundleMids()}stopReceiving(_r){const _o=this.sessionDesc.mediaDescriptions.filter(_a=>_r.indexOf(_a.attributes.mid)!==-1);if(_o.length!==_r.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");_o.forEach(_a=>{_a.media.port="0",_a.attributes.direction="inactive"}),this.updateBundleMids()}restartICE(_r){_r=vS(_r),this._iceParameters=_r,this.sessionDesc.mediaDescriptions.forEach(_o=>{_o.attributes.iceUfrag=_r.iceUfrag,_o.attributes.icePwd=_r.icePwd})}predictReceivingMids(_r){const _o=[];for(let _a=0;_a<_r;_a++)_o.push((this.currentMidIndex+_a+1).toString(10));return _o}findAvailableMediaIndex(_r,_o){return this.sessionDesc.mediaDescriptions.findIndex(_a=>{const _u=_a.media.mediaType===_r&&_a.media.port!=="0"&&(_a.attributes.direction==="sendonly"||_a.attributes.direction==="sendrecv")&&_a.attributes.ssrcs.length===0;if(tS()){if(_u){const _p=this.firefoxSsrcMidMap.get(_o[0].ssrcId);return!(_p||_a.attributes.mid!=="0"&&_a.attributes.mid!=="1")||!(!_p||_p!==_a.attributes.mid)}return!1}return _u})}createOrRecycleRecvMedia(_r,_o,_a,_u,_p,_f){const n_=_r._mediaStreamTrack.kind,r_=this.rtpCapabilities.recv,o_=this.localCapabilities.send;let s_=[];if(n_===WE.VIDEO){var u_,g_;if(J_("H264_PROFILE_LEVEL_ID")&&_u==="h264"&&(s_=r_.videoCodecs.filter(_g=>{var _y,hE;return(((_y=_g.rtpMap)===null||_y===void 0?void 0:_y.encodingName.toLowerCase())||"").includes(_u)&&(_g==null||(hE=_g.fmtp)===null||hE===void 0?void 0:hE.parameters["profile-level-id"])===J_("H264_PROFILE_LEVEL_ID")})),!s_||((u_=s_)===null||u_===void 0?void 0:u_.length)===0){const _g=o_.videoCodecs.filter(_y=>{var hE;return(((hE=_y.rtpMap)===null||hE===void 0?void 0:hE.encodingName.toLowerCase())||"").includes(_u)});_g.length!==0&&(s_=r_.videoCodecs.filter(_y=>_g.some(hE=>hE.payloadType===_y.payloadType)))}if(J_("USE_RTX")){const _g=s_.map(hE=>hE.payloadType.toString()),_y=r_.videoCodecs.filter(hE=>{var NE,mE;return((NE=hE.rtpMap)===null||NE===void 0?void 0:NE.encodingName)==="rtx"&&_g.includes(((mE=hE.fmtp)===null||mE===void 0?void 0:mE.parameters.apt)||"")});s_=[...s_,..._y]}s_.length===0&&(E_.warning("codec ".concat(_u," not included in rtpCapabilities, fallback to default payloads: ").concat((g_=r_.videoCodecs[0].rtpMap)===null||g_===void 0?void 0:g_.encodingName)),s_=r_.videoCodecs)}else s_=r_.audioCodecs.filter(_g=>{var _y;return(((_y=_g.rtpMap)===null||_y===void 0?void 0:_y.encodingName.toLowerCase())||"").includes(_p)}),s_.length===0&&(E_.warning("codec ".concat(_p," not included in rtpCapabilities, fallback to opus")),s_=r_.audioCodecs.filter(_g=>{var _y;return(((_y=_g.rtpMap)===null||_y===void 0?void 0:_y.encodingName.toLowerCase())||"").includes("opus")}));const w_=n_===WE.VIDEO?r_.videoExtensions:r_.audioExtensions;this.currentMidIndex+=1;const D_="".concat(this.currentMidIndex);let M_={media:{mediaType:n_,port:qF,protos:["UDP","TLS","RTP","SAVPF"],fmts:s_.map(_g=>_g.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:w_,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:_o,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:s_,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:_a,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(D_)}};M_=this.mungRecvMediaDsec(M_,_r,_f);const P_=this.findFirstClosedMedia(n_);if(P_){const _g=this.sessionDesc.mediaDescriptions.indexOf(P_);this.sessionDesc.mediaDescriptions[_g]=M_}else this.sessionDesc.mediaDescriptions.push(M_);return M_}createOrRecycleSendMedia(_r,_o,_a,_u,_p){const _f=this.rtpCapabilities.send,n_=_r===WE.VIDEO?_f.videoCodecs:_f.audioCodecs,r_=_r===WE.VIDEO?_f.videoExtensions:_f.audioExtensions;this.currentMidIndex+=1;const o_="".concat(this.currentMidIndex);let s_={media:{mediaType:_r,port:qF,protos:["UDP","TLS","RTP","SAVPF"],fmts:n_.map(g_=>g_.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:r_,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:_o,ssrcGroups:_a,rtcpFeedbackWildcards:[],payloads:n_,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:_u,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(o_)}};s_=this.mungSendMediaDesc(s_,_p);const u_=this.findFirstClosedMedia(_r);if(u_){const g_=this.sessionDesc.mediaDescriptions.indexOf(u_);this.sessionDesc.mediaDescriptions[g_]=s_}else this.sessionDesc.mediaDescriptions.push(s_);return s_}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(_r=>_r.media.port!=="0").map(_r=>_r.attributes.mid)}mungRecvMediaDsec(_r,_o,_a){const _u=vS(_r);return zH(_u),zD(_u,_o),KH(_u,_o),m8(_u),FF(_u,_a,this.localCapabilities.send),_u}mungSendMediaDesc(_r,_o){const _a=vS(_r);return FF(_a,_o,this.localCapabilities.recv),oN(_a),_a}updateRecvMedia(_r,_o){const _a=this.sessionDesc.mediaDescriptions.findIndex(_u=>_u.attributes.mid===_r);if(_a!==-1){const _u=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[_a],_o);this.sessionDesc.mediaDescriptions[_a]=_u}}bumpMid(_r){this.currentMidIndex+=_r}findFirstClosedMedia(_r){return this.sessionDesc.mediaDescriptions.find(_o=>tS()?_o.media.port==="0"&&_o.media.mediaType===_r:_o.media.port==="0")}findPreloadMediaDesc(_r){return this.sessionDesc.mediaDescriptions.find(_o=>{var _a,_u;return((_a=_o.attributes)===null||_a===void 0||(_u=_a.ssrcs[0])===null||_u===void 0?void 0:_u.ssrcId)===_r[0].ssrcId})}getSSRC(_r){var _o;return(_o=this.sessionDesc.mediaDescriptions.find(_a=>_a.attributes.mid===_r))===null||_o===void 0?void 0:_o.attributes.ssrcs}}var R0;function z8(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function WF(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?z8(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):z8(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}let xQ=(oE((R0=class ZF extends yF{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(_r,_o,_a){super(_r,_o),p_(this,"store",void 0),p_(this,"peerConnection",void 0),p_(this,"remoteSDP",void 0),p_(this,"initialOffer",void 0),p_(this,"transportEventReceiver",void 0),p_(this,"statsFilter",void 0),p_(this,"useRTX",J_("USE_RTX")),p_(this,"localCapabilities",void 0),p_(this,"localCandidateCount",0),p_(this,"allCandidatesReceived",!1),p_(this,"establishPromise",void 0),p_(this,"mutex",new RT("NVExtentionsConnection-mutex")),p_(this,"rtcMedia",void 0),this.store=_o,this.peerConnection=_a,this.statsFilter=ZH(this.peerConnection,void 0,void 0,tS()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(_r){try{const _o=await this.peerConnection.createOffer();if(!_o.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const _a=SL(_o.sdp),_u=await g8(!this.useRTX,J_("FILTER_VIDEO_FEC"),J_("FILTER_AUDIO_FEC"));return this.localCapabilities=_u,this.initialOffer=_o,WF(WF({},_a),{},{rtpCapabilities:_u,offerSDP:_o.sdp})}catch(_o){throw new U_(k_.GET_LOCAL_CONNECTION_PARAMS_FAILED,_o.toString())}}async connect(_r,_o,_a,_u,_p,_f){try{if(!this.initialOffer)throw new Error("Cannot establish NVConnection without initial offer.");this.remoteSDP=new kQ({remoteIceParameters:_r,remoteDtlsParameters:_o,candidates:_a,remoteRTPCapabilities:_u,remoteSetup:_p,localCapabilities:JH(this.localCapabilities),cname:_f});const n_=this.remoteSDP.toString(),r_=ES.exports.parse(this.initialOffer.sdp),o_=r_.mediaDescriptions.find(g_=>g_.media.mediaType==="audio");o_&&oN(o_);const s_=ES.exports.print(r_),u_=this.logSDPExchange(s_||"","offer","local","connect");await this.peerConnection.setLocalDescription({type:"offer",sdp:s_}),u_==null||u_(n_),await this.peerConnection.setRemoteDescription({type:"answer",sdp:n_})}catch(n_){throw new U_(k_.EXCHANGE_SDP_FAILED,"NV.connect failed; ".concat(n_.toString()))}}async updateRemoteConnect(_r){var _o,_a,_u;(_o=this.remoteSDP)===null||_o===void 0||_o.updateRemoteRTPCapabilities(_r),(_a=this.remoteSDP)===null||_a===void 0||_a.preloadRemoteMedia(2);const _p=(_u=this.remoteSDP)===null||_u===void 0?void 0:_u.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:_p});const _f=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(_f),E_.debug("[NVExtentionsConnection] updateRemoteRTPCapabilities by exchanging SDP.")}send(_r,_o,_a){var _u=this;return _I(function*(){const _p=yield i0(_u.mutex.lock("From NVExtentionsConnection.send"));try{if(!_u.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.send before remote SDP created");const _f=[];_r.forEach(M_=>{const P_=_u.peerConnection.addTransceiver(M_._mediaStreamTrack,{direction:"sendonly"});_f.push(P_)}),tS()&&J_("SIMULCAST")===!0&&(yield i0(_u.applySimulcastForFirefox(_f,_r)));const n_=yield i0(_u.peerConnection.createOffer()),r_=_u.remoteSDP.predictReceivingMids(_r.length),o_=_u.mungSendOfferSDP(n_.sdp,_r,r_),s_=ES.exports.parse(o_),u_=r_.map(M_=>{const P_=s_.mediaDescriptions.find(_g=>_g.attributes.mid===M_);if(!P_)throw new Error("Cannot extract ssrc from mediaDescription.");return p8(P_,_u.useRTX)});let g_;try{g_=yield u_}catch(M_){g_=[],_u.remoteSDP.receive(_r,_o,_a,g_);const P_=_u.remoteSDP.toString();throw yield i0(_u.peerConnection.setLocalDescription({type:"offer",sdp:o_})),yield i0(_u.peerConnection.setRemoteDescription({type:"answer",sdp:P_})),yield i0(_u.stopSending(r_,!0)),M_}_u.remoteSDP.receive(_r,_o,_a,g_);const w_=_u.remoteSDP.toString(),D_=_u.logSDPExchange(o_,"offer","local","send");return yield i0(_u.peerConnection.setLocalDescription({type:"offer",sdp:o_})),yield i0(_u.applySimulcastEncodings(_f,_r)),yield i0(_u.applySendEncodings(_f,_r)),D_==null||D_(w_),yield i0(_u.peerConnection.setRemoteDescription({type:"answer",sdp:w_})),_f.map((M_,P_)=>{const _g=r_[P_];return{localSSRC:u_[P_],id:_g,transceiver:M_}})}catch(_f){throw _f instanceof U_?_f:new U_(k_.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.send failed; ".concat(_f.toString()))}finally{_p()}})()}async stopSending(_r,_o){const _a=_o?void 0:await this.mutex.lock("From NVExtentionsConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopSending before remote SDP created");const _u=this.peerConnection.getTransceivers().filter(r_=>_r.indexOf(r_.mid)!==-1);if(_u.length!==_r.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call NVExtentionsConnection.stopSending.");_u.map(r_=>{var o_;r_.direction="inactive",(o_=r_.stop)===null||o_===void 0||o_.call(r_)});const _p=await this.peerConnection.createOffer(),_f=this.logSDPExchange(_p.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(_p),this.remoteSDP.stopReceiving(_r);const n_=this.remoteSDP.toString();_f==null||_f(n_),await this.peerConnection.setRemoteDescription({type:"answer",sdp:n_})}catch(_u){throw new U_(k_.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.stopSending failed; ".concat(_u.toString()))}finally{_a&&_a()}}async receive(_r,_o,_a,_u){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.receive ".concat(_r," before remoteSDP created."));const{mid:_p,needExchangeSDP:_f}=this.remoteSDP.send(_r,_o,_a,_u);if(_f){const r_=this.remoteSDP.toString(),o_=this.logSDPExchange(r_,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:r_});const s_=await this.peerConnection.createAnswer(),u_=this.mungReceiveAnswerSDP(s_.sdp,_p,_r);o_==null||o_(u_||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:u_}),E_.debug("[NVExtentionsConnection] receive ".concat(_r," by exchanging SDP."))}else E_.debug("[NVExtentionsConnection] receive ".concat(_r," no need to exchange SDP."));const n_=this.peerConnection.getTransceivers().find(r_=>r_.mid===_p);if(!n_)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:n_.receiver.track,id:_p}}catch(_p){throw new U_(k_.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(_p.toString()))}}async batchReceive(_r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.batchReceive before remoteSDP created.");const{mids:_o,needExchangeSDP:_a}=this.remoteSDP.batchSend(_r);if(_a){const _u=this.remoteSDP.toString(),_p=this.logSDPExchange(_u,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:_u});const _f=await this.peerConnection.createAnswer();_p==null||_p(_f.sdp||""),await this.peerConnection.setLocalDescription(_f),E_.debug("[NVExtentionsConnection] batchReceive by exchanging SDP.")}else E_.debug("[NVExtentionsConnection] batchReceive no need to exchange SDP.");return _o.map(_u=>{const _p=this.peerConnection.getTransceivers().find(_f=>_f.mid===_u);if(!_p)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:_p.receiver.track,id:_u}})}catch(_o){throw new U_(k_.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(_o.toString()))}}async stopReceiving(_r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(_r);const _o=this.remoteSDP.toString(),_a=this.logSDPExchange(_o,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:_o});const _u=await this.peerConnection.createAnswer();_a==null||_a(_u.sdp||""),await this.peerConnection.setLocalDescription(_u)}catch(_o){throw new U_(k_.EXCHANGE_SDP_FAILED,"NVExtentionsConnection stopReceiving failed; ".concat(_o.toString()))}}async muteRemote(_r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteRemote mid=".concat(_r," before remote SDP created."));this.remoteSDP.mute(_r);const _o=this.remoteSDP.toString(),_a=this.logSDPExchange(_o,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:_o});const _u=await this.peerConnection.createAnswer();_a==null||_a(_u.sdp||""),await this.peerConnection.setLocalDescription(_u)}catch(_o){throw new U_(k_.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteRemote failed; ".concat(_o.toString()))}}async unmuteRemote(_r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteRemote mid=".concat(_r," before remote SDP created."));this.remoteSDP.unmute(_r);const _o=this.remoteSDP.toString(),_a=this.logSDPExchange(_o,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:_o});const _u=await this.peerConnection.createAnswer();_a==null||_a(_u.sdp||""),await this.peerConnection.setLocalDescription(_u)}catch(_o){throw new U_(k_.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteRemote failed; ".concat(_o.toString()))}}async muteLocal(_r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteLocal before remote SDP created.");const _o=this.peerConnection.getTransceivers().filter(_f=>_f.mid&&_r.indexOf(_f.mid)!==-1);if(_o.length!==_r.length)throw new Error("Transceivers' length doesn't match mids' length.");_o.map(_f=>{_f.direction="inactive"});const _a=await this.peerConnection.createOffer(),_u=this.logSDPExchange(_a.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(_a),this.remoteSDP.muteRemote(_r);const _p=this.remoteSDP.toString();_u==null||_u(_p),await this.peerConnection.setRemoteDescription({type:"answer",sdp:_p})}catch(_o){throw new U_(k_.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteLocal failed; ".concat(_o.toString()))}}async unmuteLocal(_r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteLocal before remote SDP created.");const _o=this.peerConnection.getTransceivers().filter(_f=>_f.mid&&_r.indexOf(_f.mid)!==-1);if(_o.length!==_r.length)throw new Error("Transceivers' length doesn't match mids' length.");_o.map(async(_f,n_)=>{_f.direction="sendonly"});const _a=await this.peerConnection.createOffer(),_u=this.logSDPExchange(_a.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(_a),this.remoteSDP.unmuteRemote(_r);const _p=this.remoteSDP.toString();_u==null||_u(_p),await this.peerConnection.setRemoteDescription({type:"answer",sdp:_p})}catch(_o){throw new U_(k_.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteLocal failed; ".concat(_o.toString()))}}restartICE(){var _r=this;return _I(function*(){const _o=yield i0(_r.mutex.lock("From NVExtentionsConnection.restartICE"));try{const _a=yield i0(_r.peerConnection.createOffer({iceRestart:!0}));if(!_a.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const _u=SL(_a.sdp),{remoteIceParameters:_p}=yield _u.iceParameters;if(!_r.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");_r.remoteSDP.restartICE(_p);const _f=_r.remoteSDP.toString(),n_=_r.logSDPExchange(_a.sdp||"","offer","local","restartICE");yield i0(_r.peerConnection.setLocalDescription(_a)),n_==null||n_(_f),yield i0(_r.peerConnection.setRemoteDescription({type:"answer",sdp:_f}))}catch(_a){E_.warning("restart ICE failed, abort operation",_a)}finally{_o()}})()}close(){var _r;(_r=this.onConnectionStateChange)===null||_r===void 0||_r.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(_r){return this.statsFilter.getVideoIsReady(_r)}async updateEncoderConfig(_r,_o){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.updateEncoderConfig before remote SDP created.");const _a=await this.peerConnection.createOffer(),_u=this.mungSendOfferSDP(_a.sdp,[_o],[_r]);this.remoteSDP.updateRecvMedia(_r,_o);const _p=this.remoteSDP.toString(),_f=this.logSDPExchange(_u,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:_u}),_f==null||_f(_p),await this.peerConnection.setRemoteDescription({type:"answer",sdp:_p})}catch(_a){throw new U_(k_.EXCHANGE_SDP_FAILED,_a.toString())}}async updateSendParameters(_r,_o){const _a=this.peerConnection.getTransceivers().filter(_u=>_u.mid===_r);_a.length===1&&(this.isVP8Simulcast(_o)?tS()||await this.applySimulcastEncodings(_a,[_o]):await this.applySendEncodings(_a,[_o]))}setStatsRemoteVideoIsReady(_r,_o){this.statsFilter.setVideoIsReady2(_r,_o)}async replaceTrack(_r,_o){const _a=this.peerConnection.getTransceivers().find(_u=>_u.mid===_o);_a&&await _a.sender.replaceTrack(_r._mediaStreamTrack)}getP2PConnectionParams(){var _r;if((_r=this.peerConnection.currentLocalDescription)===null||_r===void 0||!_r.sdp||!this.localCapabilities)throw new Error;return WF(WF({},SL(this.peerConnection.currentLocalDescription.sdp)),{},{rtpCapabilities:this.localCapabilities})}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var _r;(_r=this.onICEConnectionStateChange)===null||_r===void 0||_r.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var _r;(_r=this.onConnectionStateChange)===null||_r===void 0||_r.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=_r=>{_r.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,E_.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,E_.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},J_("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(_r){const _o={iceServers:[]};return _r.iceServers?_o.iceServers=_r.iceServers:_r.turnServer&&_r.turnServer.mode!=="off"&&(vU(_r.turnServer.servers)?_o.iceServers=_r.turnServer.servers:(_o.iceServers&&_o.iceServers.push(...ZF.turnServerConfigToIceServers(_r.turnServer.servers)),J_("USE_TURN_SERVER_OF_GATEWAY")&&_o.iceServers&&_r.turnServer.serversFromGateway&&_o.iceServers.push(...ZF.turnServerConfigToIceServers(_r.turnServer.serversFromGateway)),J_("FORCE_TURN_TCP")?_o.iceTransportPolicy="relay":_r.turnServer.servers.concat(_r.turnServer.serversFromGateway||[]).forEach(_a=>{_a.forceturn&&(_o.iceTransportPolicy="relay")}))),_o}static turnServerConfigToIceServers(_r){const _o=[];return _r.forEach(_a=>{_a.security?_a.tcpport&&_o.push({username:_a.username,credential:_a.password,credentialType:"password",urls:"turns:".concat(CF(_a.turnServerURL),":").concat(_a.tcpport,"?transport=tcp")}):(_a.udpport&&!J_("FORCE_TURN_TCP")&&_o.push({username:_a.username,credential:_a.password,credentialType:"password",urls:"turn:".concat(_a.turnServerURL,":").concat(_a.udpport,"?transport=udp")}),_a.tcpport&&_o.push({username:_a.username,credential:_a.password,credentialType:"password",urls:"turn:".concat(_a.turnServerURL,":").concat(_a.tcpport,"?transport=tcp")}))}),_o}async applySendEncodings(_r,_o){try{if(!VS().supportSetRtpSenderParameters||_r.length!==_o.length)return;for(let o_=0;o_<_r.length;o_++){const s_=_r[o_],u_=_o[o_];if(u_&&u_ instanceof yS){var _a,_u;if(this.isVP8Simulcast(u_))continue;const g_={},w_={};switch(u_._optimizationMode){case"motion":g_.degradationPreference="maintain-framerate";break;case"detail":g_.degradationPreference="maintain-resolution";break;default:g_.degradationPreference="balanced"}var _p,_f,n_,r_;if((_a=u_._encoderConfig)!==null&&_a!==void 0&&_a.bitrateMax&&(w_.maxBitrate=1e3*((_p=u_._encoderConfig)===null||_p===void 0?void 0:_p.bitrateMax)),u_._hints.includes(NS.LOW_STREAM)&&((_f=u_._encoderConfig)!==null&&_f!==void 0&&_f.frameRate&&(w_.maxFramerate=XO(u_._encoderConfig.frameRate)),(n_=u_._encoderConfig)!==null&&n_!==void 0&&n_.scaleResolutionDownBy&&((r_=u_._encoderConfig)===null||r_===void 0?void 0:r_.scaleResolutionDownBy)>1&&(w_.scaleResolutionDownBy=u_._encoderConfig.scaleResolutionDownBy)),J_("DSCP_TYPE")&&lO()){const P_=J_("DSCP_TYPE");["very-low","low","medium","high"].includes(P_)&&(w_.networkPriority=P_)}const D_=s_.sender.getParameters(),M_=(_u=D_.encodings)===null||_u===void 0?void 0:_u[0];tS()&&!M_&&(g_.encodings=[w_]),M_&&Object.assign(M_,w_),Object.assign(D_,g_),await s_.sender.setParameters(D_)}}}catch{E_.debug("Apply RTPSendEncodings failed.")}}mungSendOfferSDP(_r,_o,_a){const _u=ES.exports.parse(_r);return _o.forEach((_p,_f)=>{const n_=_a[_f],r_=_u.mediaDescriptions.find(o_=>o_.attributes.mid===n_);r_&&(zD(r_,_p),_8(r_,_p,this.store.codec))}),ES.exports.print(_u)}mungReceiveAnswerSDP(_r,_o,_a){const _u=ES.exports.parse(_r),_p=_u.mediaDescriptions.find(_f=>_f.attributes.mid===_o);return _p&&_a===WE.AUDIO&&_p.media.mediaType==="audio"&&oN(_p),ES.exports.print(_u)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=_r=>{var _o;(_o=this.onFirstAudioReceived)===null||_o===void 0||_o.call(this,_r)},this.statsFilter.onFirstVideoReceived=_r=>{var _o;(_o=this.onFirstVideoReceived)===null||_o===void 0||_o.call(this,_r)},this.statsFilter.onFirstAudioDecoded=_r=>{var _o;(_o=this.onFirstAudioDecoded)===null||_o===void 0||_o.call(this,_r)},this.statsFilter.onFirstVideoDecoded=(_r,_o,_a)=>{var _u;(_u=this.onFirstVideoDecoded)===null||_u===void 0||_u.call(this,_r,_o,_a)},this.statsFilter.onSelectedLocalCandidateChanged=(_r,_o)=>{var _a;(_a=this.onSelectedLocalCandidateChanged)===null||_a===void 0||_a.call(this,_r,_o)},this.statsFilter.onSelectedRemoteCandidateChanged=(_r,_o)=>{var _a;(_a=this.onSelectedRemoteCandidateChanged)===null||_a===void 0||_a.call(this,_r,_o)},this.statsFilter.onFirstVideoDecodedTimeout=_r=>{var _o;(_o=this.onFirstVideoDecodedTimeout)===null||_o===void 0||_o.call(this,_r)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(_r,_o){if(_r.length===_o.length)for(let n_=0;n_<_r.length;n_++){var _a,_u,_p,_f;const r_=_r[n_],o_=_o[n_];if(o_ instanceof yS&&!o_._hints.includes(NS.LOW_STREAM)&&(_a=o_._encoderConfig)!==null&&_a!==void 0&&_a.bitrateMax&&((_u=o_._encoderConfig)===null||_u===void 0?void 0:_u.bitrateMax)>200&&(_p=o_._scalabiltyMode)!==null&&_p!==void 0&&_p.numSpatialLayers&&((_f=o_._scalabiltyMode)===null||_f===void 0?void 0:_f.numSpatialLayers)>1&&this.store.codec==="vp8"){const s_={},u_={high:1e3*(o_._encoderConfig.bitrateMax-50),medium:5e4};s_.encodings=[{rid:"m",active:!0,maxBitrate:u_.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:u_.high}];const g_=r_.sender.getParameters();await r_.sender.setParameters(Object.assign(g_,s_))}}}async applySimulcastEncodings(_r,_o){if(!tS()&&_r.length===_o.length)for(let _a=0;_a<_r.length;_a++){const _u=_o[_a];if(_u instanceof yS&&this.isVP8Simulcast(_u)){const _p=_r[_a],_f={},n_={high:1e3*(_u._encoderConfig.bitrateMax-50),medium:5e4};_f.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:n_.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:n_.medium,scaleResolutionDownBy:4}];const r_=_p.sender.getParameters();await _p.sender.setParameters(Object.assign(r_,_f))}}}isVP8Simulcast(_r){var _o,_a,_u,_p;return!!(_r instanceof yS&&J_("SIMULCAST")&&this.store.codec==="vp8"&&!_r._hints.includes(NS.LOW_STREAM)&&(_o=_r._encoderConfig)!==null&&_o!==void 0&&_o.bitrateMax&&((_a=_r._encoderConfig)===null||_a===void 0?void 0:_a.bitrateMax)>200&&(_u=_r._scalabiltyMode)!==null&&_u!==void 0&&_u.numSpatialLayers&&((_p=_r._scalabiltyMode)===null||_p===void 0?void 0:_p.numSpatialLayers)>1)}logSDPExchange(_r,_o,_a,_u){if(J_("SDP_LOGGING"))return E_.upload("exchanging ".concat(_a," ").concat(_o," SDP during NVExtentionsConnection.").concat(_u,`
`),_r),_o==="offer"?_p=>{this.logSDPExchange(_p,"answer",_a==="local"?"remote":"local",_u)}:void 0}async getRemoteSSRC(_r){if(!this.remoteSDP)return;const _o=this.remoteSDP.getSSRC(_r);return _o==null?void 0:_o[0].ssrcId}setConfiguration(_r){if(VS().supportPCSetConfiguration){const _o=ZF.resolvePCConfiguration(_r);this.peerConnection.setConfiguration(_o)}}}).prototype,"connect",[AR],Object.getOwnPropertyDescriptor(R0.prototype,"connect"),R0.prototype),oE(R0.prototype,"updateRemoteConnect",[AR],Object.getOwnPropertyDescriptor(R0.prototype,"updateRemoteConnect"),R0.prototype),oE(R0.prototype,"receive",[AR],Object.getOwnPropertyDescriptor(R0.prototype,"receive"),R0.prototype),oE(R0.prototype,"batchReceive",[AR],Object.getOwnPropertyDescriptor(R0.prototype,"batchReceive"),R0.prototype),oE(R0.prototype,"stopReceiving",[AR],Object.getOwnPropertyDescriptor(R0.prototype,"stopReceiving"),R0.prototype),oE(R0.prototype,"muteRemote",[AR],Object.getOwnPropertyDescriptor(R0.prototype,"muteRemote"),R0.prototype),oE(R0.prototype,"unmuteRemote",[AR],Object.getOwnPropertyDescriptor(R0.prototype,"unmuteRemote"),R0.prototype),oE(R0.prototype,"muteLocal",[AR],Object.getOwnPropertyDescriptor(R0.prototype,"muteLocal"),R0.prototype),oE(R0.prototype,"unmuteLocal",[AR],Object.getOwnPropertyDescriptor(R0.prototype,"unmuteLocal"),R0.prototype),oE(R0.prototype,"close",[AR],Object.getOwnPropertyDescriptor(R0.prototype,"close"),R0.prototype),oE(R0.prototype,"updateEncoderConfig",[AR],Object.getOwnPropertyDescriptor(R0.prototype,"updateEncoderConfig"),R0.prototype),oE(R0.prototype,"updateSendParameters",[AR],Object.getOwnPropertyDescriptor(R0.prototype,"updateSendParameters"),R0.prototype),oE(R0.prototype,"replaceTrack",[AR],Object.getOwnPropertyDescriptor(R0.prototype,"replaceTrack"),R0.prototype),oE(R0.prototype,"getRemoteSSRC",[AR],Object.getOwnPropertyDescriptor(R0.prototype,"getRemoteSSRC"),R0.prototype),R0);function AR(_n,_r,_o){const _a=_n[_r];if(typeof _a!="function")throw new Error("Cannot use mutex on object property.");return _o.value=async function(){const _u=this.mutex,_p=await _u.lock("From NVExtentionsConnection.".concat(_r));try{for(var _f=arguments.length,n_=new Array(_f),r_=0;r_<_f;r_++)n_[r_]=arguments[r_];return await _a.apply(this,n_)}finally{_p()}},_o}var V0;function K8(_n){var _r,_o,_a,_u=2;for(typeof Symbol<"u"&&(_o=l8,_a=Symbol.iterator);_u--;){if(_o&&(_r=_n[_o])!=null)return _r.call(_n);if(_a&&(_r=_n[_a])!=null)return new n5(_r.call(_n));_o="@@asyncIterator",_a="@@iterator"}throw new TypeError("Object is not async iterable")}function n5(_n){function _r(_o){if(Object(_o)!==_o)return uE.reject(new TypeError(_o+" is not an object."));var _a=_o.done;return uE.resolve(_o.value).then(function(_u){return{value:_u,done:_a}})}return(n5=function(_o){this.s=_o,this.n=_o.next}).prototype={s:null,n:null,next:function(){return _r(this.n.apply(this.s,arguments))},return:function(_o){var _a=this.s.return;return _a===void 0?uE.resolve({value:_o,done:!0}):_r(_a.apply(this.s,arguments))},throw:function(_o){var _a=this.s.return;return _a===void 0?uE.reject(_o):_r(_a.apply(this.s,arguments))}},new n5(_n)}let sN=(oE((V0=class eY extends yF{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(_r,_o){super(_r,_o),p_(this,"store",void 0),p_(this,"peerConnection",void 0),p_(this,"cname",void 0),p_(this,"mutex",new RT("DataChannelConnection-mutex")),p_(this,"dataChannel",void 0),p_(this,"_p2pConnection",void 0),p_(this,"establishPromise",void 0),p_(this,"_nvMedia",void 0),this.store=_o,this.store.dcId=this.store.dcId+1,this.peerConnection=new RTCPeerConnection(eY.resolvePCConfiguration(_r),{optional:[{googDscp:!0}]}),this.dataChannel=this.peerConnection.createDataChannel("agora-signal",{ordered:!1,maxPacketLifeTime:50}),this.dataChannel.binaryType="arraybuffer",this._p2pConnection=new xQ(_r,_o,this.peerConnection),this.bindPCEvents(),this.establishPromise=this._p2pConnection.establishPromise}async establish(){var _r;const _o=(_r=this._nvMedia)===null||_r===void 0?void 0:_r.getLocalRtpCapabilities();return await this._p2pConnection.establish(_o)}getP2PConnectionParams(){return this._p2pConnection.getP2PConnectionParams()}async connect(_r,_o,_a,_u,_p,_f){return this.cname=_f,await this._p2pConnection.connect(_r,_o,_a,_u,_p,_f),await new uE((n_,r_)=>{const o_=setTimeout(()=>{this.closeSignal(),r_(new U_(k_.DATACHANNEL_CONNECTION_TIMEOUT,"Datachannel connection timed out, candidates: ".concat(JSON.stringify(_a))))},2e3);this.dataChannel.onopen=()=>{if(this.dataChannel.readyState==="open")return clearTimeout(o_),void n_()},this.dataChannel.onerror=s_=>{this.closeSignal(),r_(s_)}}),{transmitter:this.dataChannel,close:this.closeSignal.bind(this)}}send(_r,_o,_a){var _u=this;return _I(function*(){const _p=yield i0(_u.mutex.lock("From DataChannelConnection.send"));try{return yield*LU(K8(_u._p2pConnection.send(_r,_o,_a)),i0)}finally{_p()}})()}async stopSending(_r,_o){return this._p2pConnection.stopSending(_r,_o)}async receive(_r,_o,_a,_u){return this._nvMedia?(E_.debug("[DataChannelConnection] receive ".concat(_r," by DataChannel.")),await this._nvMedia.reveiveByRTCMedia(_r,_o,this.cname)):(E_.debug("[DataChannelConnection] receive ".concat(_r," by WebRTC.")),await this._p2pConnection.receive(_r,_o,_a,_u))}async batchReceive(_r){return[...await this._p2pConnection.batchReceive(_r)]}async stopReceiving(_r){return await this._p2pConnection.stopReceiving(_r)}async muteRemote(_r){return await this._p2pConnection.muteRemote(_r)}async unmuteRemote(_r){return await this._p2pConnection.unmuteRemote(_r)}async muteLocal(_r){return await this._p2pConnection.muteLocal(_r)}async unmuteLocal(_r){return await this._p2pConnection.unmuteLocal(_r)}restartICE(){var _r=this;return _I(function*(){return yield*LU(K8(_r._p2pConnection.restartICE()),i0)})()}close(){var _r;(_r=this._nvMedia)===null||_r===void 0||_r.close(),this._p2pConnection.close(),this.unbindConnectionEvents(this._p2pConnection)}getStats(){return this._p2pConnection.getStats()}getRemoteVideoIsReady(_r){return this._p2pConnection.getRemoteVideoIsReady(_r)}updateRemoteConnect(_r){var _o;(_o=this._nvMedia)===null||_o===void 0||_o.setRemoteRtpCapabilities(_r),this._p2pConnection.updateRemoteConnect(_r)}async updateEncoderConfig(_r,_o){return await this._p2pConnection.updateEncoderConfig(_r,_o)}async updateSendParameters(_r,_o){return await this._p2pConnection.updateSendParameters(_r,_o)}setStatsRemoteVideoIsReady(_r,_o){this._p2pConnection.setStatsRemoteVideoIsReady(_r,_o)}async replaceTrack(_r,_o){return await this._p2pConnection.replaceTrack(_r,_o)}async getRemoteSSRC(_r){return this._p2pConnection.getRemoteSSRC(_r)}logSDPExchange(_r,_o,_a,_u){if(J_("SDP_LOGGING"))return E_.upload("exchanging ".concat(_a," ").concat(_o," SDP during DataChannelConnection.").concat(_u,`
`),_r),_o==="offer"?_p=>{this.logSDPExchange(_p,"answer",_a==="local"?"remote":"local",_u)}:void 0}static resolvePCConfiguration(_r){const _o={iceServers:[]};return _r.iceServers?_o.iceServers=_r.iceServers:_r.turnServer&&_r.turnServer.mode!=="off"&&(vU(_r.turnServer.servers)?_o.iceServers=_r.turnServer.servers:(_o.iceServers&&_o.iceServers.push(...eY.turnServerConfigToIceServers(_r.turnServer.servers)),J_("USE_TURN_SERVER_OF_GATEWAY")&&_o.iceServers&&_r.turnServer.serversFromGateway&&_o.iceServers.push(...eY.turnServerConfigToIceServers(_r.turnServer.serversFromGateway)),J_("FORCE_TURN_TCP")?_o.iceTransportPolicy="relay":_r.turnServer.servers.concat(_r.turnServer.serversFromGateway||[]).forEach(_a=>{_a.forceturn&&(_o.iceTransportPolicy="relay")}))),_o}static turnServerConfigToIceServers(_r){const _o=[];return _r.forEach(_a=>{_a.security?_a.tcpport&&_o.push({username:_a.username,credential:_a.password,credentialType:"password",urls:"turns:".concat(CF(_a.turnServerURL),":").concat(_a.tcpport,"?transport=tcp")}):(_a.udpport&&!J_("FORCE_TURN_TCP")&&_o.push({username:_a.username,credential:_a.password,credentialType:"password",urls:"turn:".concat(_a.turnServerURL,":").concat(_a.udpport,"?transport=udp")}),_a.tcpport&&_o.push({username:_a.username,credential:_a.password,credentialType:"password",urls:"turn:".concat(_a.turnServerURL,":").concat(_a.tcpport,"?transport=tcp")}))}),_o}bindPCEvents(){this._p2pConnection.onICEConnectionStateChange=_r=>{var _o;return(_o=this.onICEConnectionStateChange)===null||_o===void 0?void 0:_o.call(this,_r)},this._p2pConnection.onConnectionStateChange=_r=>{var _o;return(_o=this.onConnectionStateChange)===null||_o===void 0?void 0:_o.call(this,_r)},this._p2pConnection.onDTLSTransportStateChange=_r=>{var _o;return(_o=this.onDTLSTransportStateChange)===null||_o===void 0?void 0:_o.call(this,_r)},this._p2pConnection.onDTLSTransportError=_r=>{var _o;return(_o=this.onDTLSTransportError)===null||_o===void 0?void 0:_o.call(this,_r)},this._p2pConnection.onICETransportStateChange=_r=>{var _o;return(_o=this.onICETransportStateChange)===null||_o===void 0?void 0:_o.call(this,_r)},this._p2pConnection.onFirstAudioReceived=_r=>{var _o;return(_o=this.onFirstAudioReceived)===null||_o===void 0?void 0:_o.call(this,_r)},this._p2pConnection.onFirstVideoReceived=_r=>{var _o;return(_o=this.onFirstVideoReceived)===null||_o===void 0?void 0:_o.call(this,_r)},this._p2pConnection.onFirstAudioDecoded=_r=>{var _o;return(_o=this.onFirstAudioDecoded)===null||_o===void 0?void 0:_o.call(this,_r)},this._p2pConnection.onFirstVideoDecoded=(_r,_o,_a)=>{var _u;return(_u=this.onFirstVideoDecoded)===null||_u===void 0?void 0:_u.call(this,_r,_o,_a)},this._p2pConnection.onFirstVideoDecodedTimeout=_r=>{var _o;return(_o=this.onFirstVideoDecodedTimeout)===null||_o===void 0?void 0:_o.call(this,_r)},this._p2pConnection.onSelectedLocalCandidateChanged=(_r,_o)=>{var _a;return(_a=this.onSelectedLocalCandidateChanged)===null||_a===void 0?void 0:_a.call(this,_r,_o)},this._p2pConnection.onSelectedRemoteCandidateChanged=(_r,_o)=>{var _a;return(_a=this.onSelectedRemoteCandidateChanged)===null||_a===void 0?void 0:_a.call(this,_r,_o)}}closeSignal(){this.dataChannel.close(),this.peerConnection.close()}unbindConnectionEvents(_r){_r.onConnectionStateChange=void 0,_r.onICEConnectionStateChange=void 0,_r.onICETransportStateChange=void 0,_r.onDTLSTransportStateChange=void 0,_r.onDTLSTransportError=void 0,_r.onFirstAudioDecoded=void 0,_r.onFirstAudioReceived=void 0,_r.onFirstVideoDecoded=void 0,_r.onFirstVideoReceived=void 0,_r.onSelectedLocalCandidateChanged=void 0,_r.onSelectedRemoteCandidateChanged=void 0,_r.onFirstVideoDecodedTimeout=void 0}setConfiguration(_r){this._p2pConnection.setConfiguration(_r)}}).prototype,"connect",[vI],Object.getOwnPropertyDescriptor(V0.prototype,"connect"),V0.prototype),oE(V0.prototype,"receive",[vI],Object.getOwnPropertyDescriptor(V0.prototype,"receive"),V0.prototype),oE(V0.prototype,"stopReceiving",[vI],Object.getOwnPropertyDescriptor(V0.prototype,"stopReceiving"),V0.prototype),oE(V0.prototype,"muteRemote",[vI],Object.getOwnPropertyDescriptor(V0.prototype,"muteRemote"),V0.prototype),oE(V0.prototype,"unmuteRemote",[vI],Object.getOwnPropertyDescriptor(V0.prototype,"unmuteRemote"),V0.prototype),oE(V0.prototype,"muteLocal",[vI],Object.getOwnPropertyDescriptor(V0.prototype,"muteLocal"),V0.prototype),oE(V0.prototype,"unmuteLocal",[vI],Object.getOwnPropertyDescriptor(V0.prototype,"unmuteLocal"),V0.prototype),oE(V0.prototype,"close",[vI],Object.getOwnPropertyDescriptor(V0.prototype,"close"),V0.prototype),oE(V0.prototype,"updateEncoderConfig",[vI],Object.getOwnPropertyDescriptor(V0.prototype,"updateEncoderConfig"),V0.prototype),oE(V0.prototype,"updateSendParameters",[vI],Object.getOwnPropertyDescriptor(V0.prototype,"updateSendParameters"),V0.prototype),oE(V0.prototype,"replaceTrack",[vI],Object.getOwnPropertyDescriptor(V0.prototype,"replaceTrack"),V0.prototype),oE(V0.prototype,"getRemoteSSRC",[vI],Object.getOwnPropertyDescriptor(V0.prototype,"getRemoteSSRC"),V0.prototype),V0);function vI(_n,_r,_o){const _a=_n[_r];if(typeof _a!="function")throw new Error("Cannot use mutex on object property.");return _o.value=async function(){const _u=this.mutex,_p=await _u.lock("From DataChannelConnection.".concat(_r));try{for(var _f=arguments.length,n_=new Array(_f),r_=0;r_<_f;r_++)n_[r_]=arguments[r_];return await _a.apply(this,n_)}finally{_p()}},_o}var g0;function J8(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function aN(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?J8(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):J8(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}function r5(_n){var _r,_o,_a,_u=2;for(typeof Symbol<"u"&&(_o=l8,_a=Symbol.iterator);_u--;){if(_o&&(_r=_n[_o])!=null)return _r.call(_n);if(_a&&(_r=_n[_a])!=null)return new i5(_r.call(_n));_o="@@asyncIterator",_a="@@iterator"}throw new TypeError("Object is not async iterable")}function i5(_n){function _r(_o){if(Object(_o)!==_o)return uE.reject(new TypeError(_o+" is not an object."));var _a=_o.done;return uE.resolve(_o.value).then(function(_u){return{value:_u,done:_a}})}return(i5=function(_o){this.s=_o,this.n=_o.next}).prototype={s:null,n:null,next:function(){return _r(this.n.apply(this.s,arguments))},return:function(_o){var _a=this.s.return;return _a===void 0?uE.resolve({value:_o,done:!0}):_r(_a.apply(this.s,arguments))},throw:function(_o){var _a=this.s.return;return _a===void 0?uE.reject(_o):_r(_a.apply(this.s,arguments))}},new i5(_n)}let LQ=(oE((g0=class extends lS{get state(){return this._state}set state(_n){const _r=this._state;this._state=_n,this.emit(_0.StateChange,_r,this._state)}constructor(_n,_r){super(),p_(this,"store",void 0),p_(this,"statsUploader",void 0),p_(this,"connection",void 0),p_(this,"localTrackMap",new Map),p_(this,"remoteUserMap",new Map),p_(this,"pendingLocalTracks",[]),p_(this,"pendingRemoteTracks",[]),p_(this,"statsCollector",void 0),p_(this,"isPlanB",!1),p_(this,"shouldForwardP2PCreation",void 0),p_(this,"iceFailedCount",0),p_(this,"dtlsFailedCount",0),p_(this,"mutex",new RT("P2PChannel-mutex")),p_(this,"_state",kS.Disconnected),p_(this,"handleMuteLocalTrack",async(_o,_a,_u)=>{const _p=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==kS.Connected)return void _u(new U_(k_.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));const _f=this.filterTobeMutedTracks(_o);if(_f.length===0)return void _a();const n_=_f.find(o_=>o_[0]==="videoLowTrack");n_&&n_[1].track._originMediaStreamTrack.stop(),await this.connection.muteLocal(_f.map(o_=>{let[,{id:s_}]=o_;return s_}));const r_=this.createMuteMessage(_f);await aS(this,_0.RequestMuteLocal,r_),_a()}catch(_f){_u(_f)}finally{_p()}}),p_(this,"handleUnmuteLocalTrack",async(_o,_a,_u)=>{const _p=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==kS.Connected)return void _u(new U_(k_.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));const _f=this.filterTobeUnmutedTracks(_o);if(_f.length===0)return void _a();const n_=_f.find(o_=>o_[0]==="videoLowTrack");if(n_){const o_=n_[1];if(o_.track._originMediaStreamTrack.stop(),VS().supportDualStreamEncoding){const s_=_o._mediaStreamTrack.clone();o_.track._mediaStreamTrack=s_,o_.track._originMediaStreamTrack=s_}else{const s_=x8(_o,yL(this,_0.RequestLowStreamParameter));o_.track._mediaStreamTrack=s_,o_.track._originMediaStreamTrack=s_}await new uE((s_,u_)=>{this.handleReplaceTrack(o_.track,s_,u_,!0)})}await this.connection.unmuteLocal(_f.map(o_=>{let[,{id:s_}]=o_;return s_}));const r_=this.createUnmuteMessage(_f);await aS(this,_0.RequestUnmuteLocal,r_),_a()}catch(_f){_u(_f)}finally{_p()}}),p_(this,"handleUpdateVideoEncoder",async(_o,_a,_u)=>{const _p=await this.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const _f=this.localTrackMap.get(TE.LocalVideoTrack);if(!this.connection||!_f||_f.track!==_o||this.state!==kS.Connected)return void _a();const{id:n_,track:r_}=_f;await this.connection.updateSendParameters(n_,r_),await this.connection.updateEncoderConfig(n_,r_),this.emit(_0.UpdateVideoEncoder,r_),_a()}catch(_f){_u(_f)}finally{_p()}}),p_(this,"handleSetOptimizationMode",async(_o,_a,_u)=>{const _p=await this.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");try{const _f=this.localTrackMap.get(TE.LocalVideoTrack);if(!this.connection||!_f||_f.track!==_o||this.state!==kS.Connected)return;const{id:n_,track:r_}=_f;await this.connection.updateSendParameters(n_,r_),_a()}catch(_f){_u(_f)}finally{_p()}}),p_(this,"handleReplaceTrack",async(_o,_a,_u,_p)=>{let _f;E_.debug("P2PChannel handleReplaceTrack for [track-id-".concat(_o.getTrackId(),"]")),typeof _p=="boolean"&&_p||(_f=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var n_;const o_=Array.from(this.localTrackMap.entries()).find(s_=>{let[,{track:u_}]=s_;return _o===u_});if(!this.connection||!o_||this.state!==kS.Connected)return void _a();if(await((n_=this.connection)===null||n_===void 0?void 0:n_.replaceTrack(_o,o_[1].id)),this.isPlanB){const s_=o_[1];s_.id=_o._mediaStreamTrack.id,this.localTrackMap.set(o_[0],s_)}if(o_[0]===TE.LocalVideoTrack&&VS().supportDualStreamEncoding){const s_=this.localTrackMap.get(TE.LocalVideoLowTrack);if(s_){const u_=_o._mediaStreamTrack.clone();s_.track._originMediaStreamTrack.stop(),s_.track._mediaStreamTrack=u_,s_.track._originMediaStreamTrack=u_,await new uE((g_,w_)=>{this.handleReplaceTrack(s_.track,g_,w_,!0)})}}_a()}catch(o_){_u(o_)}finally{var r_;(r_=_f)===null||r_===void 0||r_()}}),p_(this,"handleGetLocalVideoStats",_o=>{_o(this.statsCollector.getLocalVideoTrackStats())}),p_(this,"handleGetLocalAudioStats",_o=>{_o(this.statsCollector.getLocalAudioTrackStats())}),p_(this,"handleGetRemoteVideoStats",_o=>this.statsCollector.getRemoteVideoTrackStats(_o.uid)[_o.uid]),p_(this,"handleGetRemoteAudioStats",_o=>this.statsCollector.getRemoteAudioTrackStats(_o.uid)[_o.uid]),this.store=_n,this.statsCollector=_r,this.statsCollector.addP2PChannel(this),this.statsUploader=new NQ,this.bindStatsUploaderEvents(),this.isPlanB=!VS().supportUnifiedPlan||J_("CHROME_FORCE_PLAN_B")&&lO(),this.shouldForwardP2PCreation=J_("FORWARD_P2P_CREATION")&&VS().supportPCSetConfiguration,this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new sN({},this.store):this.isPlanB?new PU({},this.store):new jU({},this.store),this.bindConnectionEvents(this.connection))}async startP2PConnection(_n,_r){if(this.state=kS.New,this.shouldForwardP2PCreation||(this.connection=this.store.useDataChannel?new sN(_n,this.store):this.isPlanB?new PU(_n,this.store):new jU(_n,this.store),this.bindConnectionEvents(this.connection)),!this.connection)throw new U_(k_.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this.connection.setConfiguration(_n),this.connection.establishPromise}async connect(_n,_r,_o,_a,_u,_p){if(!this.connection)throw new U_(k_.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.connection instanceof sN?this.connection.updateRemoteConnect(_a):(this.store.peerConnectionStart(),await this.connection.connect(_n,_r,_o,_a,_u,_p),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=kS.Connected)}async preConnect(_n,_r,_o,_a,_u,_p){if(!this.connection)throw new U_(k_.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.store.peerConnectionStart();const _f=await this.connection.connect(_n,_r,_o,_a,_u,_p);return this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=kS.Connected,_f}getEstablishParams(){if(this.connection instanceof sN)return this.connection.getP2PConnectionParams();throw new Error("Only DataChannelConnection needs to obtain establishParams")}publish(_n,_r,_o){var _a=this;return _I(function*(){const _u=yield i0(_a.mutex.lock("From P2PChannel.publish"));try{if(!_a.connection||_a.state!==kS.Connected){if(_a.state===kS.Disconnected)throw new U_(k_.UNEXPECTED_ERROR,"PeerConnection already disconnected.");_a.throwIfTrackTypeNotMatch(_n);const _f=_n.filter(n_=>_a.pendingLocalTracks.indexOf(n_)===-1);return void(_a.pendingLocalTracks=_a.pendingLocalTracks.concat(_f))}_a.store.pubId=_a.store.pubId+1,YR.markPublishStart(_a.store.clientId,_a.store.pubId);const _p=_a.filterTobePublishedTracks(_n,_r,_o);if(_p.length===0)return void(yield i0(_a.tryToUnmuteAudio(_n)));yield*LU(r5(_a.doPublish(_a.connection,_p)),i0)}finally{_u()}})()}doPublish(_n,_r){var _o=this;return _I(function*(){_r.forEach(o_=>{let{track:s_,type:u_}=o_;const g_=Date.now();_o.store.publish(s_.getTrackId(),u_===TE.LocalAudioTrack?"audio":"video",g_)}),_o.bindLocalTrackEvents(_r);const _a=yield i0(_n.send(_r.map(o_=>{let{track:s_}=o_;return s_}),_o.store.codec,_o.store.audioCodec)),_u=(yield i0(_a.next())).value,_p=_o.createGatewayPublishMessage(_r,_u);let _f;try{_f=yield _p}catch(o_){throw _a.throw(o_),(o_==null?void 0:o_.code)===k_.WS_ABORT&&_r.forEach(s_=>{let{track:u_}=s_;_o.pendingLocalTracks.indexOf(u_)===-1&&_o.pendingLocalTracks.push(u_)}),_o.unbindLocalTrackEvents(_r),o_}const n_=_o.mapPubResToRemoteConfig(_p,_f),r_=(yield i0(_a.next(n_))).value;_r.forEach(o_=>{let{type:s_}=o_;_o.statsCollector.addLocalStats(s_)}),_o.assignLocalTracks(_r,r_),_o.statsUploader.startUploadUplinkStats(),_r.forEach(o_=>{let{track:s_,type:u_}=o_;const g_=Date.now();_o.store.publish(s_.getTrackId(),u_===TE.LocalAudioTrack?"audio":"video",void 0,g_)})})()}publishLowStream(_n){var _r=this;return _I(function*(){if(!_r.connection||_r.state!==kS.Connected)return;const _o=yield i0(_r.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const _u=_r.localTrackMap.get(TE.LocalVideoTrack);if(!_u)throw new U_(k_.UNEXPECTED_ERROR,"Could not find high stream");if(_r.localTrackMap.has(TE.LocalVideoLowTrack))throw new U_(k_.UNEXPECTED_ERROR,"[".concat(_r.store.clientId,"] Can't publish low stream when stream already publish"));const _p=[{track:_r.getLowVideoTrack(_u.track,_n),type:TE.LocalVideoLowTrack}];if(yield*LU(r5(_r.doPublish(_r.connection,_p)),i0),_u.track.muted||!_u.track.enabled){var _a;const _f=(_a=_r.localTrackMap.get(TE.LocalVideoLowTrack))===null||_a===void 0?void 0:_a.id;_f!==void 0&&(yield i0(_r.connection.muteLocal([_f])))}}finally{_o()}})()}async republish(){this.pendingLocalTracks.length>0&&(E_.debug("Emit P2PChannelEvents.RequestRePublish to republish tracks."),await hT(this,_0.RequestRePublish,this.pendingLocalTracks),this.emit(_0.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async reSubscribe(_n){for(let _r=this.pendingRemoteTracks.length-1;_r>=0;_r--){const{user:_o,kind:_a}=this.pendingRemoteTracks[_r];(_a!==WE.AUDIO||_o._audio_added_&&_o._audioSSRC)&&(_a!==WE.VIDEO||_o._video_added_&&_o._videoSSRC)||this.pendingRemoteTracks.splice(_r,1)}if(_n)await hT(this,_0.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:_r,kind:_o}of this.pendingRemoteTracks)await this.subscribe(_r,_o,_o===WE.VIDEO?_r._videoSSRC:_r._audioSSRC);this.pendingRemoteTracks.forEach(_r=>{let{user:_o}=_r;this.emit(_0.MediaReconnectEnd,_o.uid)}),this.pendingRemoteTracks=[]}async unpublish(_n){if(!this.connection||this.state!==kS.Connected)return void _n.forEach(_a=>{const _u=this.pendingLocalTracks.indexOf(_a);_u!==-1&&this.pendingLocalTracks.splice(_u,1)});const _r=this.filterTobeUnpublishedTracks(_n);if(_r.length===0)return;const _o=_r.find(_a=>_a[0]==="videoLowTrack");return _o&&_o[1].track.close(),this.doUnpublish(this.connection,_r)}async unpublishLowStream(){if(!this.connection||this.state!==kS.Connected)return;const _n=this.localTrackMap.get(TE.LocalVideoLowTrack);if(!_n)return;_n.track.close();const _r=[[TE.LocalVideoLowTrack,_n]];return this.doUnpublish(this.connection,_r)}async doUnpublish(_n,_r){const _o=this.createGatewayUnpublishMessage(_r);return await _n.stopSending(_r.map(_a=>{let[,{id:_u}]=_a;return _u})),this.withdrawLocalTracks(_r),this.unbindLocalTrackEvents(_r.map(_a=>{let[_u,{track:_p}]=_a;return{type:_u,track:_p}})),_r.forEach(_a=>{let[_u]=_a;this.statsCollector.removeLocalStats(_u)}),this.localTrackMap.size===0&&this.statsUploader.stopUploadUplinkStats(),_o}async subscribe(_n,_r,_o,_a,_u){var _p;if(!this.connection||this.state!==kS.Connected)throw new U_(k_.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if((_p=this.remoteUserMap.get(_n))!==null&&_p!==void 0&&_p.has(_r))return;let _f,n_;if(_u){const s_=_u.find(g_=>{let{stream_type:w_}=g_;return w_===_r});if(!s_)throw new U_(k_.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(_r," for user: ").concat(_n.uid," because subscribe answer from gateway does not contain stream_type: ").concat(_r,"."));const u_=await this.connection.receive(_r,s_.ssrcs,String(_n._uintid),s_.attributes);_f=u_.track,n_=u_.id}else{const s_=await this.connection.receive(_r,[{ssrcId:_o,rtx:_a}],String(_n._uintid),void 0);_f=s_.track,n_=s_.id}_r===WE.AUDIO?(_n._audioTrack?_n._audioTrack._updateOriginMediaStreamTrack(_f):(_n._audioTrack=new GF(_f,_n.uid,_n._uintid,this.store),E_.info("[".concat(this.store.p2pId,"] create remote audio track: ").concat(_n._audioTrack.getTrackId()))),this.bindRemoteTrackEvents(_n,_n._audioTrack)):(_n._videoTrack?_n._videoTrack._updateOriginMediaStreamTrack(_f):(_n._videoTrack=new HF(_f,_n.uid,_n._uintid,this.store),E_.info("[".concat(this.store.p2pId,"] create remote video track: ").concat(_n._videoTrack.getTrackId()))),this.bindRemoteTrackEvents(_n,_n._videoTrack));const r_=this.remoteUserMap.get(_n);r_?r_.set(_r,n_):this.remoteUserMap.set(_n,new Map([[_r,n_]])),this.statsCollector.addRemoteStats(_n.uid),this.statsUploader.startUploadDownlinkStats();const o_=this.pendingRemoteTracks.findIndex(s_=>{let{user:u_,kind:g_}=s_;return u_.uid===_n.uid&&_r===g_});o_!==-1&&(this.pendingRemoteTracks.splice(o_,1),this.emit(_0.MediaReconnectEnd,_n.uid))}async massSubscribe(_n){return this.massSubscribeNoLock(_n)}async massSubscribeNoLock(_n){if(!this.connection||this.state!==kS.Connected)throw new U_(k_.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");_n=_n.filter(_o=>{var _a;let{user:_u,mediaType:_p}=_o;return!((_a=this.remoteUserMap.get(_u))!==null&&_a!==void 0&&_a.has(_p))});const _r=await this.connection.batchReceive(_n.map(_o=>{let{user:_a,mediaType:_u,ssrcId:_p,rtxSsrcId:_f}=_o;return{kind:_u,ssrcMsg:[{ssrcId:_p,rtx:_f}],mslabel:String(_a._uintid)}}));_n.forEach((_o,_a)=>{let{user:_u,mediaType:_p}=_o;const{track:_f,id:n_}=_r[_a];_p===WE.AUDIO?(_u._audioTrack?_u._audioTrack._updateOriginMediaStreamTrack(_f):(_u._audioTrack=new GF(_f,_u.uid,_u._uintid,this.store),E_.info("[".concat(this.store.p2pId,"] create remote audio track: ").concat(_u._audioTrack.getTrackId()))),this.bindRemoteTrackEvents(_u,_u._audioTrack)):(_u._videoTrack?_u._videoTrack._updateOriginMediaStreamTrack(_f):(_u._videoTrack=new HF(_f,_u.uid,_u._uintid,this.store),E_.info("[".concat(this.store.p2pId,"] create remote video track: ").concat(_u._videoTrack.getTrackId()))),this.bindRemoteTrackEvents(_u,_u._videoTrack));const r_=this.remoteUserMap.get(_u);r_?r_.set(_p,n_):this.remoteUserMap.set(_u,new Map([[_p,n_]])),this.statsCollector.addRemoteStats(_u.uid),this.statsUploader.startUploadDownlinkStats();const o_=this.pendingRemoteTracks.findIndex(s_=>{let{user:u_,kind:g_}=s_;return u_.uid===_u.uid&&_p===g_});o_!==-1&&(this.pendingRemoteTracks.splice(o_,1),this.emit(_0.MediaReconnectEnd,_u.uid))})}async unsubscribe(_n,_r,_o){const _a=this.pendingRemoteTracks.filter(_f=>{let{user:n_,kind:r_}=_f;return _r!==void 0?n_.uid===_n.uid&&_r===r_:n_.uid===_n.uid});if(_a.forEach(_f=>{const n_=this.pendingRemoteTracks.indexOf(_f);this.pendingRemoteTracks.splice(n_,1)}),this.connection&&this.state===kS.Connected||_o||_a.forEach(_f=>{let{kind:n_}=_f;var r_;if(n_===WE.AUDIO)(r_=_n._audioTrack)===null||r_===void 0||r_._destroy(),_n._audioTrack=void 0;else if(n_===WE.VIDEO){var o_;(o_=_n._videoTrack)===null||o_===void 0||o_._destroy(),_n._videoTrack=void 0}}),!this.connection||this.state!==kS.Connected)return;const _u=this.filterTobeUnSubscribedTracks(_n,_r);if(_u.length===0)return;await this.connection.stopReceiving(_u.map(_f=>{let[,{id:n_}]=_f;return n_}));const _p=this.createUnsubscribeMessage(_u);return this.withdrawRemoteTracks(_u),this.remoteUserMap.size===0&&this.statsUploader.stopUploadDownlinkStats(),_u.forEach(_f=>{let[n_,{kind:r_}]=_f;var o_,s_;if(r_===WE.VIDEO&&n_._videoSSRC&&((o_=this.connection)===null||o_===void 0||o_.setStatsRemoteVideoIsReady(n_._videoSSRC,!1)),r_===WE.VIDEO)this.unbindRemoteTrackEvents(n_._videoTrack),_o||((s_=n_._videoTrack)===null||s_===void 0||s_._destroy(),n_._videoTrack=void 0);else if(r_===WE.AUDIO){var u_;this.unbindRemoteTrackEvents(n_._audioTrack),!_o&&((u_=n_._audioTrack)===null||u_===void 0||u_._destroy(),n_._audioTrack=void 0)}}),_p}async massUnsubscribe(_n){return this.massUnsubscribeNoLock(_n)}async massUnsubscribeNoLock(_n){let _r=[];for(const{user:_u,mediaType:_p}of _n){const _f=this.pendingRemoteTracks.filter(n_=>{let{user:r_,kind:o_}=n_;return _p!==void 0?r_.uid===_u.uid&&_p===o_:r_.uid===_u.uid});_f.forEach(n_=>{const r_=this.pendingRemoteTracks.indexOf(n_);this.pendingRemoteTracks.splice(r_,1)}),_r=_r.concat(_f)}if(!this.connection||this.state!==kS.Connected)return void _r.forEach(_u=>{let{user:_p,kind:_f}=_u;var n_;if(_f===WE.AUDIO)(n_=_p._audioTrack)===null||n_===void 0||n_._destroy(),_p._audioTrack=void 0;else if(_f===WE.VIDEO){var r_;(r_=_p._videoTrack)===null||r_===void 0||r_._destroy(),_p._videoTrack=void 0}});const _o=ZR(_n).call(_n,(_u,_p)=>{let{user:_f,mediaType:n_}=_p;const r_=this.filterTobeUnSubscribedTracks(_f,n_);return _u.concat(r_)},[]);if(_o.length===0)return;await this.connection.stopReceiving(_o.map(_u=>{let[,{id:_p}]=_u;return _p}));const _a=this.createUnsubscribeAllMessage(_o);return this.withdrawRemoteTracks(_o),this.remoteUserMap.size===0&&this.statsUploader.stopUploadDownlinkStats(),_o.forEach(_u=>{let[_p,{kind:_f}]=_u;var n_,r_;if(_f===WE.VIDEO&&_p._videoSSRC&&((n_=this.connection)===null||n_===void 0||n_.setStatsRemoteVideoIsReady(_p._videoSSRC,!1)),_f===WE.VIDEO)this.unbindRemoteTrackEvents(_p._videoTrack),(r_=_p._videoTrack)===null||r_===void 0||r_._destroy(),_p._videoTrack=void 0;else if(_f===WE.AUDIO){var o_;this.unbindRemoteTrackEvents(_p._audioTrack),(o_=_p._audioTrack)===null||o_===void 0||o_._destroy(),_p._audioTrack=void 0}}),_a}async muteRemote(_n,_r){if(!this.connection)return;const _o=this.remoteUserMap.get(_n);if(!_o)return void E_.warning("P2PChannel.muteRemote has no remote user ".concat(_n.uid,"."));if(!_o.get(_r))return void E_.warning("P2PChannel.muteRemote has no remote user ".concat(_n.uid," media type ").concat(_r,"."));const _a=_r===WE.VIDEO?_n._videoSSRC:_n._audioSSRC;_a!==void 0&&this.connection.setStatsRemoteVideoIsReady(_a,!1)}async unmuteRemote(_n,_r){return this.unmuteRemoteNoLock(_n,_r)}async unmuteRemoteNoLock(_n,_r){if(!this.connection)return;const _o=this.remoteUserMap.get(_n);if(!_o)return void E_.warning("P2PChannel.unmuteRemote has no remote user ".concat(_n.uid,"."));_o.get(_r)||E_.warning("P2PChannel.unmuteRemote has no remote user ".concat(_n.uid," media type ").concat(_r,"."))}getAllTracks(_n){const _r=this.localTrackMap.get(TE.LocalAudioTrack);if((_r==null?void 0:_r.track)instanceof FR){const _o=_r.track;return Array.from(this.localTrackMap.entries()).filter(_a=>{let[_u]=_a;return _u!==TE.LocalAudioTrack}).filter(_a=>{let[_u]=_a;return!(_n&&_u===TE.LocalVideoLowTrack)}).map(_a=>{let[,{track:_u}]=_a;return _u}).concat(_o.trackList)}return Array.from(this.localTrackMap.entries()).filter(_o=>{let[_a]=_o;return!(_n&&_a===TE.LocalVideoLowTrack)}).map(_o=>{let[,{track:_a}]=_o;return _a})}reportPublishEvent(_n,_r,_o,_a,_u){if(_n){const _f=this.localTrackMap.get(TE.LocalAudioTrack),n_=_a?this.localTrackMap.get(TE.LocalVideoLowTrack):this.localTrackMap.get(TE.LocalVideoTrack);AE.publish(this.store.sessionId,{eventElapse:YR.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:_n,ec:_r,audioName:_f==null?void 0:_f.track.getTrackLabel(),videoName:n_==null?void 0:n_.track.getTrackLabel(),screenshare:(n_==null?void 0:n_.track._hints.indexOf(NS.SCREEN_TRACK))!==-1,audio:!!_f,video:!!n_,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:_u})}else{var _p;_o||(_o=[]);const _f=_o.find(r_=>r_ instanceof lT),n_=_a?(_p=this.localTrackMap.get(TE.LocalVideoTrack))===null||_p===void 0?void 0:_p.track:_o.find(r_=>r_ instanceof yS);AE.publish(this.store.sessionId,{eventElapse:YR.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:_n,ec:_r,audioName:_f==null?void 0:_f.getTrackLabel(),videoName:n_==null?void 0:n_.getTrackLabel(),screenshare:(n_==null?void 0:n_._hints.indexOf(NS.SCREEN_TRACK))!==-1,audio:!!_f,video:!!n_,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:_u})}}reportSubscribeEvent(_n,_r,_o,_a){const _u=_a===WE.VIDEO?_o._videoSSRC:_o._audioSSRC;_u&&AE.subscribe(this.store.sessionId,{succ:_n,ec:_r,video:_a===WE.VIDEO,audio:_a===WE.AUDIO,peerid:_o.uid,subscribeRequestid:_a===WE.VIDEO?_o._videoSSRC:_o._audioSSRC,p2pid:this.store.p2pId,eventElapse:YR.measureFromSubscribeStart(this.store.clientId,_u)})}reset(){E_.debug("P2PChannel.reset"),this.mutex=new RT("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new sN({},this.store):this.isPlanB?new PU({},this.store):new jU({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.state=kS.Disconnected}getStats(){var _n;return(_n=this.connection)===null||_n===void 0?void 0:_n.getStats()}getRemoteVideoIsReady(_n){var _r;return((_r=this.connection)===null||_r===void 0?void 0:_r.getRemoteVideoIsReady(_n))||!1}getLocalAudioVolume(){const _n=this.localTrackMap.get(TE.LocalAudioTrack);if(_n)return _n.track.getVolumeLevel()}getLocalVideoSize(){const _n=this.localTrackMap.get(TE.LocalVideoTrack);if(_n)return{width:_n.track._videoWidth||0,height:_n.track._videoHeight||0}}getEncoderConfig(_n){const _r=this.localTrackMap.get(_n);return _r&&_r.track instanceof yS||_r&&_r.track instanceof lT?_r.track._encoderConfig:void 0}getLocalMedia(_n){return this.localTrackMap.get(_n)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(_n,_r){if(!_n)return this.remoteUserMap.size>0;const _o=this.remoteUserMap.get(_n);return!!_o&&(!_r||_o.has(_r))}async hasRemoteMediaWithLock(_n,_r){if(!_n)return this.remoteUserMap.size>0;const _o=this.remoteUserMap.get(_n);return!!_o&&(!_r||_o.has(_r))}getRemoteMedia(_n){var _r;const _o=Array.from(mL(_r=this.remoteUserMap).call(_r)).find(_a=>_a.uid===_n);return _o?{audioTrack:_o.audioTrack,audioSSRC:_o._audioSSRC,videoTrack:_o.videoTrack,videoSSRC:_o._videoSSRC}:{}}getAudioLevels(){let _n=Array.from(this.remoteUserMap.entries()).map(_o=>{let[_a]=_o;return{uid:_a.uid,level:_a.audioTrack?100*_a.audioTrack._source.getAccurateVolumeLevel():0}});const _r=this.localTrackMap.get(TE.LocalAudioTrack);return _r&&_n.push({level:100*_r.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),_n=Y4(_n).call(_n,(_o,_a)=>_o.level-_a.level),_n}async disconnectForReconnect(){this.connection&&(E_.debug("P2PChannel.disconnectForReconnect closing P2PConnection"),this.state=kS.Reconnecting,J_("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(_n=>{var _r,_o,_a,_u;let[_p]=_n;(_r=_p._videoTrack)===null||_r===void 0||(_o=_r._player)===null||_o===void 0||(_a=_o.getVideoElement())===null||_a===void 0||_a.pause(),(_u=_p._videoTrack)===null||_u===void 0||_u._originMediaStreamTrack.stop()}),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new sN({},this.store):this.isPlanB?new PU({},this.store):new jU({},this.store),this.bindConnectionEvents(this.connection)),this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(_n=>{let[_r,{track:_o}]=_n;switch(_r){case TE.LocalVideoTrack:_o._hints.includes(NS.LOW_STREAM)?_o.close():this.pendingLocalTracks.push(_o);break;case TE.LocalAudioTrack:_o instanceof FR?this.pendingLocalTracks=this.pendingLocalTracks.concat(_o.trackList):this.pendingLocalTracks.push(_o);break;case TE.LocalVideoLowTrack:}}),this.emit(_0.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(_n=>{let[_r,_o]=_n;Array.from(mL(_o).call(_o)).forEach(_a=>{this.setPendingRemoteMedia(_r,_a)}),this.emit(_0.MediaReconnectStart,_r.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),E_.debug("P2PChannel disconnected, waiting to reconnect."))}hasPendingRemoteMedia(_n,_r){for(const _o of this.pendingRemoteTracks){const{user:_a,kind:_u}=_o;if((_n instanceof OH?_n.uid:_n)===_a.uid&&_r===_u)return!0}return!1}setPendingRemoteMedia(_n,_r){this.hasPendingRemoteMedia(_n,_r)||this.pendingRemoteTracks.push({user:_n,kind:_r})}restartICE(){var _n=this;return _I(function*(){if(!_n.connection||_n.state!==kS.Connected||_n.connection instanceof sN)return;const _r=yield i0(_n.mutex.lock("From P2PChannel.restartICE"));try{yield*LU(r5(_n.connection.restartICE()),i0)}finally{_r()}})()}getUplinkNetworkQuality(){if(!this.connection)return 0;const _n=this.connection.getStats(),_r=this.localTrackMap.get(TE.LocalVideoTrack),_o=this.localTrackMap.get(TE.LocalAudioTrack),_a=_n.videoSend.find(w_=>w_.ssrc===(_r==null?void 0:_r.ssrcs[0].ssrcId)),_u=_n.audioSend.find(w_=>w_.ssrc===(_o==null?void 0:_o.ssrcs[0].ssrcId));if(!_a||!_u)return 1;const _p=_O(this,_0.NeedSignalRTT),_f=_a?_a.rttMs:void 0,n_=_u?_u.rttMs:void 0,r_=_f&&n_?(_f+n_)/2:_f||n_,o_=(r_&&_p?(r_+_p)/2:r_||_p)||0,s_=100*_n.sendPacketLossRate*.7/50+.3*o_/1500,u_=s_<.17?1:s_<.36?2:s_<.59?3:s_<.1?4:5,g_=_r==null?void 0:_r.track;if(g_&&g_._encoderConfig&&g_._hints.indexOf(NS.SCREEN_TRACK)===-1){const w_=g_._encoderConfig.bitrateMax,D_=_n.bitrate.actualEncoded;if(w_&&D_){const M_=(1e3*w_-D_)/(1e3*w_);return u7[M_<.15?0:M_<.3?1:M_<.45?2:M_<.6?3:4][u_]}}return u_}getDownlinkNetworkQuality(){if(!this.connection)return 0;const _n=this.connection.getStats();let _r=0;return Array.from(this.remoteUserMap.entries()).forEach(_o=>{let[_a]=_o;const _u=_a._audioSSRC,_p=_a._videoSSRC,_f=_n.audioRecv.find(D_=>D_.ssrc===_u),n_=_n.videoRecv.find(D_=>D_.ssrc===_p);if(!_f&&!n_)return void(_r+=1);const r_=_O(this,_0.NeedSignalRTT),o_=_n.rtt,s_=(o_&&r_?(o_+r_)/2:o_||r_)||0,u_=_f?_f.jitterMs:void 0,g_=_n.recvPacketLossRate;let w_=.7*g_*100/50+.3*s_/1500;u_&&(w_=.6*g_*100/50+.2*s_/1500+.2*u_/400),_r+=w_<.1?1:w_<.17?2:w_<.36?3:w_<.59?4:5}),this.remoteUserMap.size>0?Math.round(_r/this.remoteUserMap.size):_r}async muteLocalTrack(_n){return new uE((_r,_o)=>{this.handleMuteLocalTrack(_n,_r,_o)})}filterTobePublishedTracks(_n,_r,_o){const _a=[],_u=VS(),_p=this.getAllTracks();_n=f6(_n=_n.filter(r_=>_p.indexOf(r_)===-1));let _f=!1,n_=!1;for(const r_ of _n){if(r_ instanceof yS&&(this.localTrackMap.has(TE.LocalVideoTrack)||_f?new U_(k_.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(_a.push({track:r_,type:TE.LocalVideoTrack}),_f=!0),_r)){const o_=this.getLowVideoTrack(r_,_o);_a.push({track:o_,type:TE.LocalVideoLowTrack})}if(r_ instanceof lT){const o_=this.localTrackMap.get(TE.LocalAudioTrack);if(o_){if(!(o_.track instanceof FR))throw new U_(k_.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(r_._bypassWebAudio)throw new U_(k_.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");o_.track.addAudioTrack(r_),this.bindLocalAudioTrackEvents(r_,!0)}else if(n_){const s_=_a.find(u_=>{let{type:g_}=u_;return g_===TE.LocalAudioTrack});if(!(s_.track instanceof FR))throw new U_(k_.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(r_._bypassWebAudio)throw new U_(k_.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");s_.track.addAudioTrack(r_)}else{if(!_u.webAudioMediaStreamDest||r_ instanceof FR||r_._bypassWebAudio)_a.push({track:r_,type:TE.LocalAudioTrack});else{const s_=new FR;s_.addAudioTrack(r_),_a.push({track:s_,type:TE.LocalAudioTrack})}n_=!0}}}return _a}filterTobeUnpublishedTracks(_n){const _r=[],_o=this.getAllTracks();_n=f6(_n=_n.filter(_a=>_o.indexOf(_a)!==-1));for(const _a of _n){if(_a instanceof lT){const _u=this.localTrackMap.get(TE.LocalAudioTrack);if(!_u)continue;_u.track instanceof FR?(_u.track.removeAudioTrack(_a),this.unbindLocalAudioTrackEvents(_a),_u.track.trackList.length===0&&(_r.push([TE.LocalAudioTrack,_u]),_u.track.close())):_r.push([TE.LocalAudioTrack,_u])}if(_a instanceof yS){const _u=this.localTrackMap.get(TE.LocalVideoTrack);if(!_u)continue;_r.push([TE.LocalVideoTrack,_u]);const _p=this.localTrackMap.get(TE.LocalVideoLowTrack);_p&&_r.push([TE.LocalVideoLowTrack,_p])}}return _r}bindLocalTrackEvents(_n){_n.forEach(_r=>{let{track:_o,type:_a}=_r;switch(_a){case TE.LocalVideoTrack:_o.addListener(UE.GET_STATS,this.handleGetLocalVideoStats),_o.addListener(UE.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),_o.addListener(UE.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),_o.addListener(UE.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),_o.addListener(UE.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),_o.addListener(UE.NEED_REPLACE_TRACK,this.handleReplaceTrack),_o.addListener(UE.NEED_MUTE_TRACK,this.handleMuteLocalTrack),_o.addListener(UE.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case TE.LocalAudioTrack:this.bindLocalAudioTrackEvents(_o);break;case TE.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(_n,_r){_n instanceof FR?_n.trackList.forEach(_o=>{_o.addListener(UE.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),_o.addListener(UE.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),_o.addListener(UE.GET_STATS,this.handleGetLocalAudioStats),_o.addListener(UE.NEED_MUTE_TRACK,this.handleMuteLocalTrack),_o.addListener(UE.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(_n.addListener(UE.GET_STATS,this.handleGetLocalAudioStats),_n.addListener(UE.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),_n.addListener(UE.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),_n.addListener(UE.NEED_MUTE_TRACK,this.handleMuteLocalTrack),_n.addListener(UE.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),_r||_n.addListener(UE.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(_n){_n||(_n=Array.from(this.localTrackMap.entries()).map(_r=>{let[_o,{track:_a}]=_r;return{track:_a,type:_o}})),_n.forEach(_r=>{let{track:_o,type:_a}=_r;switch(_a){case TE.LocalVideoTrack:_o.off(UE.GET_STATS,this.handleGetLocalVideoStats),_o.off(UE.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),_o.off(UE.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),_o.off(UE.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),_o.off(UE.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),_o.off(UE.NEED_REPLACE_TRACK,this.handleReplaceTrack),_o.off(UE.NEED_MUTE_TRACK,this.handleMuteLocalTrack),_o.off(UE.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case TE.LocalAudioTrack:this.unbindLocalAudioTrackEvents(_o);break;case TE.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(_n){_n instanceof FR?_n.trackList.forEach(_r=>{_r.off(UE.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),_r.off(UE.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),_r.off(UE.GET_STATS,this.handleGetLocalAudioStats),_r.off(UE.NEED_MUTE_TRACK,this.handleMuteLocalTrack),_r.off(UE.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(_n.off(UE.GET_STATS,this.handleGetLocalAudioStats),_n.off(UE.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),_n.off(UE.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),_n.off(UE.NEED_REPLACE_TRACK,this.handleReplaceTrack),_n.off(UE.NEED_MUTE_TRACK,this.handleMuteLocalTrack),_n.off(UE.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(_n,_r){_r instanceof HF&&_r.addListener(UE.GET_STATS,_o=>{_o(this.handleGetRemoteVideoStats(_n))}),_r instanceof GF&&_r.addListener(UE.GET_STATS,_o=>{_o(this.handleGetRemoteAudioStats(_n))})}unbindRemoteTrackEvents(_n){_n&&_n.removeAllListeners(UE.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(_n=>{let[_r,_o]=_n;_o.has(WE.AUDIO)&&this.unbindRemoteTrackEvents(_r._audioTrack),_o.has(WE.VIDEO)&&this.unbindRemoteTrackEvents(_r._videoTrack)})}createGatewayPublishMessage(_n,_r){return _n.map((_o,_a)=>{let _u,_p,{track:_f,type:n_}=_o;switch(n_){case TE.LocalAudioTrack:_u=RS.Audio,_p={dtx:_f instanceof RF&&_f._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case TE.LocalVideoTrack:_u=_f._hints.includes(NS.SCREEN_TRACK)?RS.Screen:RS.High,_p=aN(aN({},u6(_f)),{},{codec:this.store.codec});break;case TE.LocalVideoLowTrack:_u=RS.Low,_p=aN(aN({},u6(_f)),{},{codec:this.store.codec})}return{stream_type:_u,attributes:_p,ssrcs:_r[_a]}})}createGatewayUnpublishMessage(_n){return _n.map(_r=>{let _o,[_a,{track:_u,ssrcs:_p,id:_f}]=_r;switch(_a){case TE.LocalVideoTrack:_o=_u._hints.includes(NS.SCREEN_TRACK)?RS.Screen:RS.High;break;case TE.LocalAudioTrack:_o=RS.Audio;break;case TE.LocalVideoLowTrack:_o=RS.Low}return{stream_type:_o,ssrcs:_p,mid:_f}})}assignLocalTracks(_n,_r){_n.forEach((_o,_a)=>{let{track:_u,type:_p}=_o;this.localTrackMap.set(_p,{track:_u,id:_r[_a].id,ssrcs:_r[_a].localSSRC})})}withdrawLocalTracks(_n){_n.forEach(_r=>{let[_o]=_r;this.localTrackMap.delete(_o)})}bindConnectionEvents(_n){_n.onConnectionStateChange=async _r=>{if(E_.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(_r,")")),this.emit(_0.PeerConnectionStateChange,_r),_r!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),_r==="disconnected"&&_n.iceConnectionState==="disconnected")return setTimeout(()=>{_n.iceConnectionState==="disconnected"&&J_("ICE_RESTART")&&_O(this,_0.QueryClientConnectionState)==="CONNECTED"&&this.emit(_0.RequestRestartICE)},800),void setTimeout(()=>{_n.peerConnectionState==="disconnected"&&(E_.debug("P2PConnection disconnected timeout 4000ms, force reconnect"),setTimeout(()=>this.emit(_0.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},4e3);_r==="failed"&&(E_.debug("P2PConnection state failed, force reconnect"),setTimeout(()=>this.emit(_0.P2PLost),0),this.iceFailedCount+=1,await this.requestReconnect())},_n.onICEConnectionStateChange=_r=>{_r!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),E_.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(_r,")")),AE.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:_r,tag:nS.TRACER}).onSuccess(),this.emit(_0.IceConnectionStateChange,_r)},_n.onICETransportStateChange=_r=>{E_.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(_r,")"))},_n.onDTLSTransportStateChange=_r=>{E_.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(_r,")"))},_n.onDTLSTransportError=_r=>{E_.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(_r,")"))},_n.onFirstAudioDecoded=_r=>{var _o;const _a=Array.from(mL(_o=this.remoteUserMap).call(_o)).find(_p=>_p._audioSSRC===_r);var _u;_a&&(this.store.subscribe(_a.uid,"audio",void 0,void 0,void 0,Date.now()),(_u=_a.audioTrack)===null||_u===void 0||_u.emit(MD.FIRST_FRAME_DECODED),AE.firstRemoteFrame(this.store.sessionId,aT.FIRST_AUDIO_DECODE,oS.FIRST_AUDIO_DECODE,{peer:_a._uintid,subscribeElapse:YR.measureFromSubscribeStart(this.store.clientId,_r),subscribeRequestid:_r,p2pid:this.store.p2pId}))},_n.onFirstAudioReceived=_r=>{var _o;const _a=Array.from(mL(_o=this.remoteUserMap).call(_o)).find(_u=>_u._audioSSRC===_r);_a&&AE.firstRemoteFrame(this.store.sessionId,aT.FIRST_AUDIO_RECEIVED,oS.FIRST_AUDIO_RECEIVED,{peer:_a._uintid,subscribeElapse:YR.measureFromSubscribeStart(this.store.clientId,_r),subscribeRequestid:_r,p2pid:this.store.p2pId})},_n.onFirstVideoDecoded=(_r,_o,_a)=>{this.reportVideoFirstFrameDecoded(_r,_o,_a)},_n.onFirstVideoReceived=_r=>{var _o;const _a=Array.from(mL(_o=this.remoteUserMap).call(_o)).find(_u=>_u._videoSSRC===_r);_a&&AE.firstRemoteFrame(this.store.sessionId,aT.FIRST_VIDEO_RECEIVED,oS.FIRST_VIDEO_RECEIVED,{peer:_a._uintid,subscribeElapse:YR.measureFromSubscribeStart(this.store.clientId,_r),subscribeRequestid:_r,p2pid:this.store.p2pId})},_n.onSelectedLocalCandidateChanged=(_r,_o)=>{const _a=_r.candidateType==="relay",_u=_o.candidateType==="relay";_o.candidateType!=="unknown"&&_a===_u||this.emit(_0.ConnectionTypeChange,_a),E_.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(AF(_o))," -> ").concat(JSON.stringify(AF(_r)),")"))},_n.onSelectedRemoteCandidateChanged=(_r,_o)=>{E_.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(AF(_o))," -> ").concat(JSON.stringify(AF(_r)),")"))},_n.onFirstVideoDecodedTimeout=_r=>{this.reportVideoFirstFrameDecoded(_r,void 0,void 0,!0)}}unbindConnectionEvents(_n){_n.onConnectionStateChange=void 0,_n.onICEConnectionStateChange=void 0,_n.onICETransportStateChange=void 0,_n.onDTLSTransportStateChange=void 0,_n.onDTLSTransportError=void 0,_n.onFirstAudioDecoded=void 0,_n.onFirstAudioReceived=void 0,_n.onFirstVideoDecoded=void 0,_n.onFirstVideoReceived=void 0,_n.onSelectedLocalCandidateChanged=void 0,_n.onSelectedRemoteCandidateChanged=void 0,_n.onFirstVideoDecodedTimeout=void 0}filterTobeMutedTracks(_n){const _r=[];if(this.getAllTracks().indexOf(_n)===-1)return _r;const _o=this.localTrackMap.get(TE.LocalAudioTrack);if(_n instanceof lT&&(_o==null?void 0:_o.track)instanceof FR)return _o.track.isActive||_r.push([TE.LocalAudioTrack,_o]),_r;const _a=Array.from(this.localTrackMap.entries()).find(_u=>{let[,{track:_p}]=_u;return _n===_p});if(_a&&(_r.push(_a),_a[0]===TE.LocalVideoTrack)){const _u=this.localTrackMap.get(TE.LocalVideoLowTrack);_u&&_r.push([TE.LocalVideoLowTrack,_u])}return _r}filterTobeUnmutedTracks(_n){const _r=[],_o=this.localTrackMap.get(TE.LocalAudioTrack);if(_n instanceof lT&&(_o==null?void 0:_o.track)instanceof FR)return _o.track.isActive&&_r.push([TE.LocalAudioTrack,_o]),_r;const _a=Array.from(this.localTrackMap.entries()).find(_u=>{let[,{track:_p}]=_u;return _n===_p});if(_a)if(_a[0]===TE.LocalVideoTrack){_r.push(_a);const _u=this.localTrackMap.get(TE.LocalVideoLowTrack);_u&&_r.push([TE.LocalVideoLowTrack,_u])}else _r.push(_a);return _r}createMuteMessage(_n){return _n.map(_r=>{let _o,[_a,{track:_u,ssrcs:_p,id:_f}]=_r;switch(_a){case TE.LocalAudioTrack:_o=RS.Audio;break;case TE.LocalVideoTrack:_o=_u._hints.includes(NS.SCREEN_TRACK)?RS.Screen:RS.High;break;case TE.LocalVideoLowTrack:_o=RS.Low}return{stream_type:_o,ssrcs:_p,mid:_f}})}createUnmuteMessage(_n){return _n.map(_r=>{let _o,[_a,{track:_u,ssrcs:_p,id:_f}]=_r;switch(_a){case TE.LocalAudioTrack:_o=RS.Audio;break;case TE.LocalVideoTrack:_o=_u._hints.includes(NS.SCREEN_TRACK)?RS.Screen:RS.High;break;case TE.LocalVideoLowTrack:_o=RS.Low}return{stream_type:_o,ssrcs:_p,mid:_f}})}filterTobeUnSubscribedTracks(_n,_r){const _o=[],_a=this.remoteUserMap.get(_n);if(!_a)return _o;if(_r){const _u=_a.get(_r);if(!_u)return _o;_o.push([_n,{kind:_r,id:_u}])}else Array.from(_a.entries()).forEach(_u=>{let[_p,_f]=_u;_o.push([_n,{kind:_p,id:_f}])});return _o}createUnsubscribeMessage(_n){const _r=[];return _n.forEach(_o=>{let[_a,{kind:_u,id:_p}]=_o;switch(_u){case WE.VIDEO:return void(_a._videoSSRC&&_r.push({stream_type:WE.VIDEO,ssrcId:_a._videoSSRC}));case WE.AUDIO:return void(_a._audioSSRC&&_r.push({stream_type:WE.AUDIO,ssrcId:_a._audioSSRC}))}}),_r}createUnsubscribeAllMessage(_n){const _r=new Map;return _n.forEach(_o=>{let[_a,{kind:_u}]=_o;if(_r.has(_a)){let _p=_r.get(_a);_u===WE.VIDEO?_p|=_S.Video:_p|=_S.Audio,_r.set(_a,_p)}else _u===WE.VIDEO?_r.set(_a,_S.Video):_r.set(_a,_S.Audio)}),{users:Array.from(_r.entries()).map(_o=>{let[_a,_u]=_o;return{stream_id:_a.uid,stream_type:_u}})}}withdrawRemoteTracks(_n){_n.forEach(_r=>{let[_o,{kind:_a}]=_r;const _u=this.remoteUserMap.get(_o);_u&&(_u.delete(_a),Array.from(_u.entries()).length===0&&this.remoteUserMap.delete(_o))})}async updateBitrateLimit(_n){const _r=this.localTrackMap.get(TE.LocalVideoTrack),_o=this.localTrackMap.get(TE.LocalVideoLowTrack);_r&&await _r.track.setBitrateLimit(_n.uplink),_o&&_n.low_stream_uplink&&await _o.track.setBitrateLimit({max_bitrate:_n.low_stream_uplink.bitrate,min_bitrate:_n.low_stream_uplink.bitrate||0})}isP2PDisconnected(){return this.connection?this.connection.peerConnectionState!=="connected":!0}mapPubResToRemoteConfig(_n,_r){return _n.map((_o,_a)=>{var _u;let{stream_type:_p}=_o;return(_u=_r.find(_f=>{let{stream_type:n_}=_f;return _p===n_}))===null||_u===void 0?void 0:_u.attributes})}async tryToUnmuteAudio(_n){for(let _o=0;_o<_n.length;_o++)if(_n[_o]instanceof lT){var _r;const _a=this.filterTobeUnmutedTracks(_n[_o]);if(_a.length===0)continue;await((_r=this.connection)===null||_r===void 0?void 0:_r.unmuteLocal(_a.map(_p=>{let[,{id:_f}]=_p;return _f})));const _u=this.createUnmuteMessage(_a);return void await aS(this,_0.RequestUnmuteLocal,_u)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=_n=>{var _r;return!((_r=this.connection)===null||_r===void 0||!_r.getRemoteVideoIsReady(_n))},this.statsUploader.requestUpload=(_n,_r)=>this.emit(_0.RequestUploadStats,_n,_r),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await dT(k4(this.dtlsFailedCount,OS)),this.emit(_0.RequestReconnect)}async reconnectP2P(){const _n=Array.from(this.localTrackMap.entries()),_r=this.createGatewayUnpublishMessage(_n);Array.from(this.remoteUserMap.entries()),_r.length>0&&await hT(this,_0.RequestUnpublishForReconnectPC,_r),this.disconnectForReconnect(),this.emit(_0.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(TE.LocalVideoTrack)||this.pendingLocalTracks.some(_n=>_n instanceof yS)}throwIfTrackTypeNotMatch(_n){if(_n.filter(_r=>_r instanceof yS).length>1)throw new U_(k_.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(_n.filter(_r=>_r instanceof lT).length>1&&(_n.some(_r=>_r instanceof lT&&_r._bypassWebAudio)||!VS().webAudioMediaStreamDest))throw new U_(k_.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const _r of _n){if(_r instanceof yS&&this.pendingLocalTracks.some(_o=>_o instanceof yS))throw new U_(k_.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(_r instanceof lT&&this.pendingLocalTracks.some(_o=>_o instanceof lT)&&(!VS().webAudioMediaStreamDest||_r._bypassWebAudio||this.pendingLocalTracks.some(_o=>_o instanceof lT&&_o._bypassWebAudio)))throw new U_(k_.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(_n,_r){const _o=VS().supportDualStreamEncoding,_a=aN(aN({},{width:160,height:120,framerate:15,bitrate:50}),_r);let _u;_u=_o?_n._mediaStreamTrack.clone():x8(_n,_a);const _p=X0(8,"track-low-"),_f=new yS(_u,aN(aN({},_o&&{scaleResolutionDownBy:h9(_a,_n)}),{},{frameRate:_a.framerate,bitrateMax:_a.bitrate,bitrateMin:_a.bitrate}),void 0,void 0,_p);return _f._hints.push(NS.LOW_STREAM),_n.addListener(UE.NEED_CLOSE,()=>{_f.close()}),_f}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}reportVideoFirstFrameDecoded(_n,_r,_o,_a){var _u;const _p=Array.from(mL(_u=this.remoteUserMap).call(_u)).find(_f=>_f._videoSSRC===_n);if(_p){_a||this.store.subscribe(_p.uid,"video",void 0,void 0,void 0,void 0,Date.now());const _f=this.store.keyMetrics,n_=_f.subscribe.find(r_=>r_.userId===_p.uid&&r_.type==="video");AE.firstRemoteVideoDecode(this.store.sessionId,aT.FIRST_VIDEO_DECODE,oS.FIRST_VIDEO_DECODE,{peer:_p._uintid,videowidth:_r,videoheight:_o,subscribeElapse:YR.measureFromSubscribeStart(this.store.clientId,_n),subscribeRequestid:_n,p2pid:this.store.p2pId,apEnd:_f.requestAPEnd||0,apStart:_f.requestAPStart||0,joinGwEnd:_f.joinGatewayEnd||0,joinGwStart:_f.joinGatewayStart||0,pcEnd:_f.peerConnectionEnd||0,pcStart:_f.peerConnectionStart||0,subscriberEnd:(n_==null?void 0:n_.subscribeEnd)||0,subscriberStart:(n_==null?void 0:n_.subscribeStart)||0,videoAddNotify:(n_==null?void 0:n_.streamAdded)||0,state:_a?1:0})}}async remoteMediaSsrcChanged(_n,_r,_o){if(!this.connection)return!1;const _a=this.remoteUserMap.get(_n);if(!_a)return!1;const _u=_a.get(_r);if(!_u)return!1;const _p=await this.connection.getRemoteSSRC(_u);return _p!==void 0&&_p!==_o}resetConnection(_n){E_.debug("[P2PChannel] reset connection to ".concat(_n)),this.state===kS.Connected?(E_.debug("[P2PChannel] fallback to websocket but P2PChannel state still connected, disconnect first"),this.disconnectForReconnect()):(this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=_n===gF.datachannel?new sN({},this.store):this.isPlanB?new PU({},this.store):new jU({},this.store),this.bindConnectionEvents(this.connection)))}}).prototype,"startP2PConnection",[uR],Object.getOwnPropertyDescriptor(g0.prototype,"startP2PConnection"),g0.prototype),oE(g0.prototype,"connect",[uR],Object.getOwnPropertyDescriptor(g0.prototype,"connect"),g0.prototype),oE(g0.prototype,"preConnect",[uR],Object.getOwnPropertyDescriptor(g0.prototype,"preConnect"),g0.prototype),oE(g0.prototype,"unpublish",[uR],Object.getOwnPropertyDescriptor(g0.prototype,"unpublish"),g0.prototype),oE(g0.prototype,"unpublishLowStream",[uR],Object.getOwnPropertyDescriptor(g0.prototype,"unpublishLowStream"),g0.prototype),oE(g0.prototype,"subscribe",[uR],Object.getOwnPropertyDescriptor(g0.prototype,"subscribe"),g0.prototype),oE(g0.prototype,"massSubscribe",[uR],Object.getOwnPropertyDescriptor(g0.prototype,"massSubscribe"),g0.prototype),oE(g0.prototype,"unsubscribe",[uR],Object.getOwnPropertyDescriptor(g0.prototype,"unsubscribe"),g0.prototype),oE(g0.prototype,"massUnsubscribe",[uR],Object.getOwnPropertyDescriptor(g0.prototype,"massUnsubscribe"),g0.prototype),oE(g0.prototype,"muteRemote",[uR],Object.getOwnPropertyDescriptor(g0.prototype,"muteRemote"),g0.prototype),oE(g0.prototype,"unmuteRemote",[uR],Object.getOwnPropertyDescriptor(g0.prototype,"unmuteRemote"),g0.prototype),oE(g0.prototype,"hasRemoteMediaWithLock",[uR],Object.getOwnPropertyDescriptor(g0.prototype,"hasRemoteMediaWithLock"),g0.prototype),oE(g0.prototype,"disconnectForReconnect",[uR],Object.getOwnPropertyDescriptor(g0.prototype,"disconnectForReconnect"),g0.prototype),oE(g0.prototype,"updateBitrateLimit",[uR],Object.getOwnPropertyDescriptor(g0.prototype,"updateBitrateLimit"),g0.prototype),oE(g0.prototype,"remoteMediaSsrcChanged",[uR],Object.getOwnPropertyDescriptor(g0.prototype,"remoteMediaSsrcChanged"),g0.prototype),g0);function uR(_n,_r,_o){const _a=_n[_r];if(typeof _a!="function")throw new Error("Cannot use mutex on object property.");return _o.value=async function(){const _u=this.mutex,_p=await _u.lock("From P2PChannel.".concat(_r));try{for(var _f=arguments.length,n_=new Array(_f),r_=0;r_<_f;r_++)n_[r_]=arguments[r_];return await _a.apply(this,n_)}finally{_p()}},_o}function Q8(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function OE(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?Q8(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):Q8(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}var o0;(function(_n){_n.SET_SESSION_ID="SET_SESSION_ID",_n.SET_P2P_ID="SET_P2P_id",_n.SET_DC_ID="SET_DC_id",_n.SET_UID="SET_UID",_n.SET_PUB_ID="SET_PUB_ID",_n.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",_n.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",_n.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",_n.AVOID_JOIN_START="AVOID_JOIN_START",_n.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",_n.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",_n.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",_n.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",_n.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",_n.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",_n.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",_n.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",_n.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",_n.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",_n.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",_n.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",_n.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",_n.RESET_KEY_METRICS="RESET_KEY_METRICS",_n.SET_USE_DATACHANNEL="SET_USE_DATACHANNEL"})(o0||(o0={}));class MQ{constructor(_r,_o,_a,_u){p_(this,"state",void 0),this.state={codec:_r,audioCodec:_o,mode:_a,clientId:_u,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useDataChannel:!1}}dispatch(_r){this.state=function(_o,_a){switch(_a.type){case o0.SET_SESSION_ID:return OE(OE({},_o),{},{sessionId:_a.sessionId});case o0.SET_P2P_ID:return OE(OE({},_o),{},{p2pId:_a.p2pId});case o0.SET_UID:return OE(OE({},_o),{},{uid:_a.uid});case o0.SET_PUB_ID:return OE(OE({},_o),{},{pubId:_a.pubId});case o0.KEY_METRIC_CLIENT_CREATED:return OE(OE({},_o),{},{keyMetrics:OE(OE({},_o.keyMetrics),{},{clientCreated:_a.metric})});case o0.KEY_METRIC_JOIN_START:return OE(OE({},_o),{},{keyMetrics:OE(OE({},_o.keyMetrics),{},{joinStart:_a.metric})});case o0.AVOID_JOIN_START:return OE(OE({},_o),{},{avoidJoinStart:_a.avoidJoinStart});case o0.KEY_METRIC_JOIN_END:return OE(OE({},_o),{},{keyMetrics:OE(OE({},_o.keyMetrics),{},{joinEnd:_a.metric})});case o0.KEY_METRIC_REQUEST_AP_START:return OE(OE({},_o),{},{keyMetrics:OE(OE({},_o.keyMetrics),{},{requestAPStart:_a.metric})});case o0.KEY_METRIC_REQUEST_AP_END:return OE(OE({},_o),{},{keyMetrics:OE(OE({},_o.keyMetrics),{},{requestAPEnd:_a.metric})});case o0.KEY_METRIC_JOIN_GATEWAY_START:return OE(OE({},_o),{},{keyMetrics:OE(OE({},_o.keyMetrics),{},{joinGatewayStart:_a.metric})});case o0.KEY_METRIC_JOIN_GATEWAY_END:return OE(OE({},_o),{},{keyMetrics:OE(OE({},_o.keyMetrics),{},{joinGatewayEnd:_a.metric})});case o0.KEY_METRIC_PEER_CONNECTION_START:return OE(OE({},_o),{},{keyMetrics:OE(OE({},_o.keyMetrics),{},{peerConnectionStart:_a.metric})});case o0.KEY_METRIC_PEER_CONNECTION_END:return OE(OE({},_o),{},{keyMetrics:OE(OE({},_o.keyMetrics),{},{peerConnectionEnd:_a.metric})});case o0.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return OE(OE({},_o),{},{keyMetrics:OE(OE({},_o.keyMetrics),{},{signalChannelOpen:_a.metric})});case o0.KEY_METRIC_ICE_CONNECTION_END:return OE(OE({},_o),{},{keyMetrics:OE(OE({},_o.keyMetrics),{},{iceConnectionEnd:_a.metric})});case o0.KEY_METRIC_PUBLISH:{const _u=_o.keyMetrics.publish,_p=_u.findIndex(_f=>_f.trackId===_a.metric.trackId);return _p!==-1?(_u[_p]=OE(OE({},_u[_p]),_a.metric),OE(OE({},_o),{},{keyMetrics:OE(OE({},_o.keyMetrics),{},{publish:[..._u]})})):OE(OE({},_o),{},{keyMetrics:OE(OE({},_o.keyMetrics),{},{publish:[..._o.keyMetrics.publish,_a.metric]})})}case o0.KEY_METRIC_SUBSCRIBE:{const _u=_o.keyMetrics.subscribe,_p=_u.findIndex(_f=>_f.userId===_a.metric.userId&&_f.type===_a.metric.type);return _p!==-1?(_u[_p]=OE(OE({},_u[_p]),_a.metric),OE(OE({},_o),{},{keyMetrics:OE(OE({},_o.keyMetrics),{},{subscribe:[..._u]})})):OE(OE({},_o),{},{keyMetrics:OE(OE({},_o.keyMetrics),{},{subscribe:[..._o.keyMetrics.subscribe,_a.metric]})})}case o0.SET_CLOUD_PROXY_SERVER_MODE:return _o.cloudProxyServerMode=_a.mode,_o;case o0.RECORD_JOIN_CHANNEL_SERVICE:return typeof _a.index!="number"?_o.joinChannelServiceRecords=[..._o.joinChannelServiceRecords,_a.record]:(_o.joinChannelServiceRecords[_a.index]=OE(OE({},_o.joinChannelServiceRecords[_a.index]),_a.record),_o.joinChannelServiceRecords=[..._o.joinChannelServiceRecords]),_o;case o0.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return _o.joinChannelServiceRecords=[],_o;case o0.RESET_KEY_METRICS:return _o.keyMetrics={publish:[],subscribe:[]},_o;case o0.SET_USE_DATACHANNEL:return OE(OE({},_o),{},{useDataChannel:_a.val});default:return _o}}(this.state,_r)}set sessionId(_r){this.dispatch({type:o0.SET_SESSION_ID,sessionId:_r})}get sessionId(){return this.state.sessionId}get codec(){return this.state.codec}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(_r){this.dispatch({type:o0.SET_P2P_ID,p2pId:_r})}get p2pId(){return this.state.p2pId}set dcId(_r){this.dispatch({type:o0.SET_DC_ID,dcId:_r})}get dcId(){return this.state.dcId}set uid(_r){this.dispatch({type:o0.SET_UID,uid:_r})}get uid(){return this.state.uid}set pubId(_r){this.dispatch({type:o0.SET_PUB_ID,pubId:_r})}get pubId(){return this.state.pubId}set cloudProxyServerMode(_r){this.dispatch({type:o0.SET_CLOUD_PROXY_SERVER_MODE,mode:_r})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useDataChannel(_r){this.dispatch({type:o0.SET_USE_DATACHANNEL,val:_r})}get useDataChannel(){return this.state.useDataChannel}clientCreated(){this.dispatch({type:o0.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:o0.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:o0.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:o0.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:o0.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:o0.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:o0.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:o0.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:o0.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:o0.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:o0.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(_r,_o,_a,_u){this.dispatch({type:o0.KEY_METRIC_PUBLISH,metric:OE(OE({trackId:_r,type:_o},_a&&{publishStart:_a}),_u&&{publishEnd:_u})})}subscribe(_r,_o,_a,_u,_p,_f,n_){this.dispatch({type:o0.KEY_METRIC_SUBSCRIBE,metric:OE(OE(OE(OE(OE({userId:_r,type:_o},_a&&{subscribeStart:_a}),_u&&{subscribeEnd:_u}),_p&&{firstFrame:_p}),_f&&{streamAdded:_f}),n_&&{firstDecoded:n_})})}massSubscribe(_r,_o,_a,_u){_r.forEach(_p=>{this.dispatch({type:o0.KEY_METRIC_SUBSCRIBE,metric:OE(OE(OE({userId:_p.userId,type:_p.type},_o&&{subscribeStart:_o}),_a&&{subscribeEnd:_a}),_u&&{firstFrame:_u})})})}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(_r,_o){_r.service==="gateway"&&Array.isArray(_r.urls)&&(_r.urls=_r.urls.map(_a=>_a.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return typeof _o!="number"?(this.dispatch({type:o0.RECORD_JOIN_CHANNEL_SERVICE,record:OE(OE({},_r),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(_o<0||_o>=this.state.joinChannelServiceRecords.length||this.dispatch({type:o0.RECORD_JOIN_CHANNEL_SERVICE,record:_r,index:_o}),_o)}catch{return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:o0.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:o0.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch{return[]}}get avoidJoinStart(){return this.state.avoidJoinStart}set avoidJoinStart(_r){this.dispatch({type:o0.AVOID_JOIN_START,avoidJoinStart:_r})}}let zF;const DQ=()=>(zF||zF||(zF=(window.location.protocol.split(":")[0]||"").toUpperCase(),zF))==="HTTPS",X8=()=>window.isSecureContext!==void 0;function PQ(_n){let _r=tK();return function(_o,_a){let _u=_o.appId;_u!==void 0&&(E0(_a,10),vO(_a,_u));let _p=_o.cid;_p!==void 0&&(E0(_a,16),E0(_a,_p));let _f=_o.cname;_f!==void 0&&(E0(_a,26),vO(_a,_f));let n_=_o.deviceId;n_!==void 0&&(E0(_a,34),vO(_a,n_));let r_=_o.elapse;r_!==void 0&&(E0(_a,40),cN(_a,r_));let o_=_o.fileSize;o_!==void 0&&(E0(_a,48),cN(_a,KD(o_)));let s_=_o.height;s_!==void 0&&(E0(_a,56),cN(_a,KD(s_)));let u_=_o.jpg;u_!==void 0&&(E0(_a,66),E0(_a,u_.length),function(ZT,tE){let sE=JD(ZT,tE.length);ZT.bytes.set(tE,sE)}(_a,u_));let g_=_o.networkType;g_!==void 0&&(E0(_a,72),cN(_a,KD(g_)));let w_=_o.osType;w_!==void 0&&(E0(_a,80),cN(_a,KD(w_)));let D_=_o.requestId;D_!==void 0&&(E0(_a,90),vO(_a,D_));let M_=_o.sdkVersion;M_!==void 0&&(E0(_a,98),vO(_a,M_));let P_=_o.sequence;P_!==void 0&&(E0(_a,104),cN(_a,KD(P_)));let _g=_o.sid;_g!==void 0&&(E0(_a,114),vO(_a,_g));let _y=_o.timestamp;_y!==void 0&&(E0(_a,120),cN(_a,_y));let hE=_o.uid;hE!==void 0&&(E0(_a,128),E0(_a,hE));let NE=_o.vid;NE!==void 0&&(E0(_a,136),E0(_a,NE));let mE=_o.width;mE!==void 0&&(E0(_a,144),cN(_a,KD(mE)));let _E=_o.service;_E!==void 0&&(E0(_a,152),E0(_a,_E));let dE=_o.callbackData;dE!==void 0&&(E0(_a,162),vO(_a,dE));let IE=_o.jpgEncryption;IE!==void 0&&(E0(_a,168),E0(_a,IE));let j0=_o.requestType;j0!==void 0&&(E0(_a,176),E0(_a,j0));let GE=_o.scorePorn;GE!==void 0&&(E0(_a,185),u5(_a,GE));let z0=_o.scoreSexy;z0!==void 0&&(E0(_a,193),u5(_a,z0));let $0=_o.scoreNeutral;$0!==void 0&&(E0(_a,201),u5(_a,$0));let fS=_o.scene;fS!==void 0&&(E0(_a,208),E0(_a,fS));let XS=_o.ossFilePrefix;XS!==void 0&&(E0(_a,218),vO(_a,XS));let pS=_o.serviceVendor;if(pS!==void 0)for(let ZT of pS){E0(_a,226);let tE=tK();$Q(ZT,tE),E0(_a,tE.limit),VQ(_a,tE),BQ(tE)}}(_n,_r),function(_o){let _a=_o.bytes,_u=_o.limit;return _a.length===_u?_a:_a.subarray(0,_u)}(_r)}function jQ(_n){return function(_o){let _a={};e:for(;!nK(_o);){let _u=yO(_o);switch(_u>>>3){case 0:break e;case 1:_a.code=yO(_o);break;case 2:_a.msg=rK(_o,yO(_o));break;case 3:{let _p=FQ(_o);_a.data=UQ(_o),_o.limit=_p;break}default:Z8(_o,7&_u)}}return _a}({bytes:_r=_n,offset:0,limit:_r.length});var _r}function UQ(_n){let _r={};e:for(;!nK(_n);){let _o=yO(_n);switch(_o>>>3){case 0:break e;case 1:_r.requestId=rK(_n,yO(_n));break;case 2:_r.requestType=yO(_n)>>>0;break;case 3:_r.scorePorn=c5(_n);break;case 4:_r.scoreSexy=c5(_n);break;case 5:_r.scoreNeutral=c5(_n);break;case 6:_r.requestScene=yO(_n)>>>0;break;case 7:_r.scene=yO(_n)>>>0;break;default:Z8(_n,7&_o)}}return _r}function $Q(_n,_r){let _o=_n.service;_o!==void 0&&(E0(_r,8),E0(_r,_o));let _a=_n.vendor;_a!==void 0&&(E0(_r,16),E0(_r,_a));let _u=_n.token;_u!==void 0&&(E0(_r,26),vO(_r,_u));let _p=_n.callbackUrl;_p!==void 0&&(E0(_r,34),vO(_r,_p))}function FQ(_n){let _r=yO(_n),_o=_n.limit;return _n.limit=_n.offset+_r,_o}function Z8(_n,_r){switch(_r){case 0:for(;128&iK(_n););break;case 2:s5(_n,yO(_n));break;case 5:s5(_n,4);break;case 1:s5(_n,8);break;default:throw new Error("Unimplemented type: "+_r)}}let YQ=new Float32Array(1);new Uint8Array(YQ.buffer);let o5=new Float64Array(1),XT=new Uint8Array(o5.buffer);function KD(_n){return{low:_n|=0,high:_n>>31,unsigned:_n>=0}}let eK=[];function tK(){const _n=eK.pop();return _n?(_n.offset=_n.limit=0,_n):{bytes:new Uint8Array(64),offset:0,limit:0}}function BQ(_n){eK.push(_n)}function s5(_n,_r){if(_n.offset+_r>_n.limit)throw new Error("Skip past limit");_n.offset+=_r}function nK(_n){return _n.offset>=_n.limit}function JD(_n,_r){let _o=_n.bytes,_a=_n.offset,_u=_n.limit,_p=_a+_r;if(_p>_o.length){let _f=new Uint8Array(2*_p);_f.set(_o),_n.bytes=_f}return _n.offset=_p,_p>_u&&(_n.limit=_p),_a}function a5(_n,_r){let _o=_n.offset;if(_o+_r>_n.limit)throw new Error("Read past limit");return _n.offset+=_r,_o}function rK(_n,_r){let _o=a5(_n,_r),_a=String.fromCharCode,_u=_n.bytes,_p="",_f="";for(let n_=0;n_<_r;n_++){let r_,o_,s_,u_,g_=_u[n_+_o];128&g_?(224&g_)==192?n_+1>=_r?_f+=_p:(r_=_u[n_+_o+1],(192&r_)!=128?_f+=_p:(u_=(31&g_)<<6|63&r_,u_<128?_f+=_p:(_f+=_a(u_),n_++))):(240&g_)==224?n_+2>=_r?_f+=_p:(r_=_u[n_+_o+1],o_=_u[n_+_o+2],(49344&(r_|o_<<8))!=32896?_f+=_p:(u_=(15&g_)<<12|(63&r_)<<6|63&o_,u_<2048||u_>=55296&&u_<=57343?_f+=_p:(_f+=_a(u_),n_+=2))):(248&g_)==240?n_+3>=_r?_f+=_p:(r_=_u[n_+_o+1],o_=_u[n_+_o+2],s_=_u[n_+_o+3],(12632256&(r_|o_<<8|s_<<16))!=8421504?_f+=_p:(u_=(7&g_)<<18|(63&r_)<<12|(63&o_)<<6|63&s_,u_<65536||u_>1114111?_f+=_p:(u_-=65536,_f+=_a(55296+(u_>>10),56320+(1023&u_)),n_+=3))):_f+=_p:_f+=_a(g_)}return _f}function vO(_n,_r){let _o=_r.length,_a=0;for(let _f=0;_f<_o;_f++){let n_=_r.charCodeAt(_f);n_>=55296&&n_<=56319&&_f+1<_o&&(n_=(n_<<10)+_r.charCodeAt(++_f)-56613888),_a+=n_<128?1:n_<2048?2:n_<65536?3:4}E0(_n,_a);let _u=JD(_n,_a),_p=_n.bytes;for(let _f=0;_f<_o;_f++){let n_=_r.charCodeAt(_f);n_>=55296&&n_<=56319&&_f+1<_o&&(n_=(n_<<10)+_r.charCodeAt(++_f)-56613888),n_<128?_p[_u++]=n_:(n_<2048?_p[_u++]=n_>>6&31|192:(n_<65536?_p[_u++]=n_>>12&15|224:(_p[_u++]=n_>>18&7|240,_p[_u++]=n_>>12&63|128),_p[_u++]=n_>>6&63|128),_p[_u++]=63&n_|128)}}function VQ(_n,_r){let _o=JD(_n,_r.limit),_a=_n.bytes,_u=_r.bytes;for(let _p=0,_f=_r.limit;_p<_f;_p++)_a[_p+_o]=_u[_p]}function iK(_n){return _n.bytes[a5(_n,1)]}function oK(_n,_r){let _o=JD(_n,1);_n.bytes[_o]=_r}function c5(_n){let _r=a5(_n,8),_o=_n.bytes;return XT[0]=_o[_r++],XT[1]=_o[_r++],XT[2]=_o[_r++],XT[3]=_o[_r++],XT[4]=_o[_r++],XT[5]=_o[_r++],XT[6]=_o[_r++],XT[7]=_o[_r++],o5[0]}function u5(_n,_r){let _o=JD(_n,8),_a=_n.bytes;o5[0]=_r,_a[_o++]=XT[0],_a[_o++]=XT[1],_a[_o++]=XT[2],_a[_o++]=XT[3],_a[_o++]=XT[4],_a[_o++]=XT[5],_a[_o++]=XT[6],_a[_o++]=XT[7]}function yO(_n){let _r,_o=0,_a=0;do _r=iK(_n),_o<32&&(_a|=(127&_r)<<_o),_o+=7;while(128&_r);return _a}function E0(_n,_r){for(_r>>>=0;_r>=128;)oK(_n,127&_r|128),_r>>>=7;oK(_n,_r)}function cN(_n,_r){let _o=_r.low>>>0,_a=(_r.low>>>28|_r.high<<4)>>>0,_u=_r.high>>>24,_p=_u===0?_a===0?_o<16384?_o<128?1:2:_o<1<<21?3:4:_a<16384?_a<128?5:6:_a<1<<21?7:8:_u<128?9:10,_f=JD(_n,_p),n_=_n.bytes;switch(_p){case 10:n_[_f+9]=_u>>>7&1;case 9:n_[_f+8]=_p!==9?128|_u:127&_u;case 8:n_[_f+7]=_p!==8?_a>>>21|128:_a>>>21&127;case 7:n_[_f+6]=_p!==7?_a>>>14|128:_a>>>14&127;case 6:n_[_f+5]=_p!==6?_a>>>7|128:_a>>>7&127;case 5:n_[_f+4]=_p!==5?128|_a:127&_a;case 4:n_[_f+3]=_p!==4?_o>>>21|128:_o>>>21&127;case 3:n_[_f+2]=_p!==3?_o>>>14|128:_o>>>14&127;case 2:n_[_f+1]=_p!==2?_o>>>7|128:_o>>>7&127;case 1:n_[_f]=_p!==1?128|_o:127&_o}}const HQ=async(_n,_r,_o)=>{const _a=function(_f){const n_=[];for(let r_=0;r_<_f.length;r_+=2)n_.push(parseInt(_f.slice(r_,r_+2),16));return Uint8Array.from(n_)}(function(_f){const n_="0123456789abcdef";function r_(j0){let GE,z0="";for(GE=0;GE<=3;GE++)z0+=n_.charAt(j0>>8*GE+4&15)+n_.charAt(j0>>8*GE&15);return z0}function o_(j0,GE){const z0=(65535&j0)+(65535&GE);return(j0>>16)+(GE>>16)+(z0>>16)<<16|65535&z0}function s_(j0,GE,z0,$0,fS,XS){return o_(function(pS,ZT){return pS<<ZT|pS>>>32-ZT}(o_(o_(GE,j0),o_($0,XS)),fS),z0)}function u_(j0,GE,z0,$0,fS,XS,pS){return s_(GE&z0|~GE&$0,j0,GE,fS,XS,pS)}function g_(j0,GE,z0,$0,fS,XS,pS){return s_(GE&$0|z0&~$0,j0,GE,fS,XS,pS)}function w_(j0,GE,z0,$0,fS,XS,pS){return s_(GE^z0^$0,j0,GE,fS,XS,pS)}function D_(j0,GE,z0,$0,fS,XS,pS){return s_(z0^(GE|~$0),j0,GE,fS,XS,pS)}const M_=function(j0){let GE;const z0=1+(j0.length+8>>6),$0=new Array(16*z0);for(GE=0;GE<16*z0;GE++)$0[GE]=0;for(GE=0;GE<j0.length;GE++)$0[GE>>2]|=j0.charCodeAt(GE)<<GE%4*8;return $0[GE>>2]|=128<<GE%4*8,$0[16*z0-2]=8*j0.length,$0}(_f);let P_,_g,_y,hE,NE,mE=1732584193,_E=-271733879,dE=-1732584194,IE=271733878;for(P_=0;P_<M_.length;P_+=16)_g=mE,_y=_E,hE=dE,NE=IE,mE=u_(mE,_E,dE,IE,M_[P_+0],7,-680876936),IE=u_(IE,mE,_E,dE,M_[P_+1],12,-389564586),dE=u_(dE,IE,mE,_E,M_[P_+2],17,606105819),_E=u_(_E,dE,IE,mE,M_[P_+3],22,-1044525330),mE=u_(mE,_E,dE,IE,M_[P_+4],7,-176418897),IE=u_(IE,mE,_E,dE,M_[P_+5],12,1200080426),dE=u_(dE,IE,mE,_E,M_[P_+6],17,-1473231341),_E=u_(_E,dE,IE,mE,M_[P_+7],22,-45705983),mE=u_(mE,_E,dE,IE,M_[P_+8],7,1770035416),IE=u_(IE,mE,_E,dE,M_[P_+9],12,-1958414417),dE=u_(dE,IE,mE,_E,M_[P_+10],17,-42063),_E=u_(_E,dE,IE,mE,M_[P_+11],22,-1990404162),mE=u_(mE,_E,dE,IE,M_[P_+12],7,1804603682),IE=u_(IE,mE,_E,dE,M_[P_+13],12,-40341101),dE=u_(dE,IE,mE,_E,M_[P_+14],17,-1502002290),_E=u_(_E,dE,IE,mE,M_[P_+15],22,1236535329),mE=g_(mE,_E,dE,IE,M_[P_+1],5,-165796510),IE=g_(IE,mE,_E,dE,M_[P_+6],9,-1069501632),dE=g_(dE,IE,mE,_E,M_[P_+11],14,643717713),_E=g_(_E,dE,IE,mE,M_[P_+0],20,-373897302),mE=g_(mE,_E,dE,IE,M_[P_+5],5,-701558691),IE=g_(IE,mE,_E,dE,M_[P_+10],9,38016083),dE=g_(dE,IE,mE,_E,M_[P_+15],14,-660478335),_E=g_(_E,dE,IE,mE,M_[P_+4],20,-405537848),mE=g_(mE,_E,dE,IE,M_[P_+9],5,568446438),IE=g_(IE,mE,_E,dE,M_[P_+14],9,-1019803690),dE=g_(dE,IE,mE,_E,M_[P_+3],14,-187363961),_E=g_(_E,dE,IE,mE,M_[P_+8],20,1163531501),mE=g_(mE,_E,dE,IE,M_[P_+13],5,-1444681467),IE=g_(IE,mE,_E,dE,M_[P_+2],9,-51403784),dE=g_(dE,IE,mE,_E,M_[P_+7],14,1735328473),_E=g_(_E,dE,IE,mE,M_[P_+12],20,-1926607734),mE=w_(mE,_E,dE,IE,M_[P_+5],4,-378558),IE=w_(IE,mE,_E,dE,M_[P_+8],11,-2022574463),dE=w_(dE,IE,mE,_E,M_[P_+11],16,1839030562),_E=w_(_E,dE,IE,mE,M_[P_+14],23,-35309556),mE=w_(mE,_E,dE,IE,M_[P_+1],4,-1530992060),IE=w_(IE,mE,_E,dE,M_[P_+4],11,1272893353),dE=w_(dE,IE,mE,_E,M_[P_+7],16,-155497632),_E=w_(_E,dE,IE,mE,M_[P_+10],23,-1094730640),mE=w_(mE,_E,dE,IE,M_[P_+13],4,681279174),IE=w_(IE,mE,_E,dE,M_[P_+0],11,-358537222),dE=w_(dE,IE,mE,_E,M_[P_+3],16,-722521979),_E=w_(_E,dE,IE,mE,M_[P_+6],23,76029189),mE=w_(mE,_E,dE,IE,M_[P_+9],4,-640364487),IE=w_(IE,mE,_E,dE,M_[P_+12],11,-421815835),dE=w_(dE,IE,mE,_E,M_[P_+15],16,530742520),_E=w_(_E,dE,IE,mE,M_[P_+2],23,-995338651),mE=D_(mE,_E,dE,IE,M_[P_+0],6,-198630844),IE=D_(IE,mE,_E,dE,M_[P_+7],10,1126891415),dE=D_(dE,IE,mE,_E,M_[P_+14],15,-1416354905),_E=D_(_E,dE,IE,mE,M_[P_+5],21,-57434055),mE=D_(mE,_E,dE,IE,M_[P_+12],6,1700485571),IE=D_(IE,mE,_E,dE,M_[P_+3],10,-1894986606),dE=D_(dE,IE,mE,_E,M_[P_+10],15,-1051523),_E=D_(_E,dE,IE,mE,M_[P_+1],21,-2054922799),mE=D_(mE,_E,dE,IE,M_[P_+8],6,1873313359),IE=D_(IE,mE,_E,dE,M_[P_+15],10,-30611744),dE=D_(dE,IE,mE,_E,M_[P_+6],15,-1560198380),_E=D_(_E,dE,IE,mE,M_[P_+13],21,1309151649),mE=D_(mE,_E,dE,IE,M_[P_+4],6,-145523070),IE=D_(IE,mE,_E,dE,M_[P_+11],10,-1120210379),dE=D_(dE,IE,mE,_E,M_[P_+2],15,718787259),_E=D_(_E,dE,IE,mE,M_[P_+9],21,-343485551),mE=o_(mE,_g),_E=o_(_E,_y),dE=o_(dE,hE),IE=o_(IE,NE);return r_(mE)+r_(_E)+r_(dE)+r_(IE)}(""+_r+_o)).slice(0,16),_u=_a.slice(0,12),_p=await window.crypto.subtle.importKey("raw",_a,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:_u},_p,_n))};function sK(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}const GQ=new Map([["moderation",1],["supervise",2]]);class KF extends lS{get connectionState(){return this._connectionState}set connectionState(_r){if(this._connectionState===_r)return;const _o=this._connectionState;this._connectionState=_r,this.emit(IS.CONNECTION_STATE_CHANGE,_o,_r)}get inspectType(){return this._inspectType}set inspectType(_r){var _o;this._inspectMode=ZR(_o=_r.map(_a=>GQ.get(_a)||0)).call(_o,(_a,_u)=>_a+_u),this._inspectType=_r}get quality(){return this._quality}set quality(_r){this._quality=_r>1?1:_r<.1?.1:_r,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this.qualityRatio},6e4))}constructor(_r){super(),p_(this,"name","AgoraRTCVideoContentInspect"),p_(this,"_connectionState",SR.CONNECTING),p_(this,"_innerConnectionState",void 0),p_(this,"sequence",0),p_(this,"inspectStartTime",void 0),p_(this,"workerManagerConnection",void 0),p_(this,"workerConnection",void 0),p_(this,"workerMessageLengthLimit",void 0),p_(this,"inspectIntervalMinimum",void 0),p_(this,"qualityRatio",void 0),p_(this,"_connectInfo",void 0),p_(this,"_cancelTokenSource",dI.CancelToken.source()),p_(this,"_retryConfig",void 0),p_(this,"wmSequence",0),p_(this,"inspectInterval",void 0),p_(this,"inspectTimer",null),p_(this,"ossFilePrefix",void 0),p_(this,"extraInfo",void 0),p_(this,"_inspectType",void 0),p_(this,"_inspectMode",void 0),p_(this,"_quality",1),p_(this,"qualityTimer",null),p_(this,"_inspectId",void 0),p_(this,"_needWorkUrlOnly",!1),p_(this,"inspectImage",()=>{if(this.connectionState!==SR.CONNECTED)throw new U_(k_.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval(()=>{this.connectionState===SR.CONNECTED?this.requestToInspectImage():E_.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)},this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()}),this._inspectId=X0(5,"inspect-"),this.workerMessageLengthLimit=J_("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=J_("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=J_("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=_r.interval,this.ossFilePrefix=_r.ossFilePrefix,this.extraInfo=_r.extraInfo,this.inspectType=_r.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new VD("worker-manager-"+this._inspectId,OS),this.on(IS.STATE_CHANGE,(_o,_a)=>{this._innerConnectionState=_o,E_.debug("[".concat(this._inspectId,"] Inspect operation :").concat(wR[_o]," ").concat(_a||""))}),this.handleWorkerManagerEvents(),this.workerConnection=new VD("worker-"+this._inspectId,OS),this.handleWorkerEvents()}async init(_r,_o){this.emit(IS.STATE_CHANGE,wR.CONNECT_AP),this._connectInfo=_r;const _a=this._cancelTokenSource.token;return this._retryConfig=_o,new uE((_u,_p)=>{this.on(IS.CONNECTION_STATE_CHANGE,(_f,n_)=>{n_===SR.CONNECTED&&_u()}),this.requestAP(_r,_a,_o).then(_f=>{this.connectWorkerManager(_f)}).catch(_f=>{_p(_f)})})}async requestAP(_r,_o,_a){const _u=J_("WEBCS_DOMAIN").map(n_=>"https://".concat(n_,"/api/v1")),_p=await function(n_,r_,o_,s_){let{appId:u_,areaCode:g_,cname:w_,sid:D_,token:M_,uid:P_}=r_;RH++;const _g="image_moderation_api",_y={service_name:_g,json_body:JSON.stringify({appId:u_,areaCode:g_,cname:w_,command:"allocateEdge",requestId:RH,seq:RH,sid:D_,token:M_,ts:Date.now(),uid:P_+""})};let hE,NE,mE=n_[0];return hO(async()=>{hE=Date.now();const _E=await $I(mE,{data:_y,cancelToken:o_,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(NE=Date.now()-hE,_E.code!==0){const GE=new U_(k_.UNEXPECTED_RESPONSE,"image inspect ap error, code"+_E.code,{retry:!0,responseTime:NE});throw E_.error(GE.toString()),GE}const dE=JSON.parse(_E.json_body);if(dE.code!==200){const GE=new U_(k_.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(dE.code,", reason: ").concat(dE.reason),{code:dE.code,responseTime:NE});throw E_.error(GE.toString()),GE}if(!dE.servers||!Array.isArray(dE.servers)||dE.servers.length===0){const GE=new U_(k_.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:dE.code,responseTime:NE});throw E_.error(GE.toString()),GE}const IE=J_("VIDEO_INSPECT_WORKER_MANAGER_HOST"),j0=J_("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:dE.servers.map(GE=>{let{address:z0,wss:$0}=GE;if(z0&&$0)return"wss://".concat(z0.replace(/\./g,"-"),".").concat(IE,":").concat(j0||$0)}).filter(GE=>!!GE),workerToken:dE.workerToken,vid:dE.vid,responseTime:NE}},(_E,dE)=>(AE.apworkerEvent(D_,{success:!0,sc:200,serviceName:_g,responseDetail:JSON.stringify(_E.addressList),firstSuccess:dE===0,responseTime:NE,serverIp:n_[dE%n_.length]}),!1),(_E,dE)=>(AE.apworkerEvent(D_,{success:!1,sc:_E.data&&_E.data.code||200,serviceName:_g,responseTime:NE,serverIp:n_[dE%n_.length]}),!!(_E.code!==k_.OPERATION_ABORTED&&_E.code!==k_.UNEXPECTED_RESPONSE||_E.data&&_E.data.retry)&&(mE=n_[(dE+1)%n_.length],!0)),s_)}(_u,_r,_o,_a);this.emit(IS.STATE_CHANGE,wR.AP_CONNECTED);const{addressList:_f}=_p;return this.wmSequence++,_f}async connectWorkerManager(_r){let _o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this._needWorkUrlOnly=_o,this.emit(IS.STATE_CHANGE,wR.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(_r,1e4)}async connectWorker(_r){await this.workerConnection.init([_r])}handleWorkerManagerEvents(){this.workerManagerConnection.on(KE.CONNECTED,async()=>{this.emit(IS.STATE_CHANGE,wR.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.17.2",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)}),this.workerManagerConnection.on(KE.CLOSED,()=>{this._innerConnectionState<wR.GET_WORKER_MANAGER_RESPONSE&&E_.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))}),this.workerManagerConnection.on(KE.FAILED,()=>{this._innerConnectionState<wR.GET_WORKER_MANAGER_RESPONSE&&E_.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))}),this.workerManagerConnection.on(KE.RECONNECTING,()=>{this._innerConnectionState<wR.GET_WORKER_MANAGER_RESPONSE&&E_.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))}),this.workerManagerConnection.on(KE.ON_MESSAGE,async _r=>{this.emit(IS.STATE_CHANGE,wR.GET_WORKER_MANAGER_RESPONSE);const _o=this.workerManagerConnection.url;this.workerManagerConnection.close();const _a=JSON.parse(_r.data);if(_a.code!==200)throw E_.error("[".concat(this._inspectId,"] Unexpected code ").concat(_a.code," from worker manager")),new U_(k_.UNEXPECTED_RESPONSE,"response code of worker is unexpected",_a);if(!(_a.serverResponse&&_a.serverResponse.portWss&&_o))throw E_.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(_a))),new U_(k_.UNEXPECTED_RESPONSE,"response content of worker is unexpected",_a);{const _u=J_("VIDEO_INSPECT_WORKER_PORT")||_a.serverResponse.portWss,_p=_o.replace(/:\d+\/?$/,":".concat(_u));this.emit(IS.STATE_CHANGE,wR.CONNECT_WORKER,_p),this._needWorkUrlOnly?this.emit(IS.REQUEST_NEW_WORKER_URL,_p):await this.connectWorker(_p)}}),this.workerManagerConnection.on(KE.WILL_RECONNECT,(_r,_o)=>{_o(_r)}),this.workerManagerConnection.on(KE.REQUEST_NEW_URLS,(_r,_o)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(_r).catch(_o)})}handleWorkerEvents(){this.workerConnection.on(KE.CONNECTED,async()=>{this.emit(IS.STATE_CHANGE,wR.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=SR.CONNECTED}),this.workerConnection.on(KE.ON_MESSAGE,async _r=>{if(_r.data instanceof ArrayBuffer){const _a=jQ(new Uint8Array(_r.data));if(J_("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&E_.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(_a)),_a.code===200){if(Array.isArray(this.inspectType)&&this.inspectType.length===1&&this.inspectType[0]==="supervise")return void this.emit(IS.INSPECT_RESULT,void 0,void 0);if(_a.data&&_a.data.scorePorn&&_a.data.scoreSexy&&_a.data.scoreNeutral){var _o;const _u={porn:_a.data.scorePorn,sexy:_a.data.scoreSexy,neutral:_a.data.scoreNeutral},_p=ZR(_o=Object.keys(_u)).call(_o,(n_,r_)=>_u[n_]>_u[r_]?n_:r_,"porn"),_f=Object.keys(_u).find(n_=>n_===_p);this.emit(IS.INSPECT_RESULT,_f)}else this.emit(IS.INSPECT_RESULT,void 0,new U_(k_.UNEXPECTED_RESPONSE,_a.code+"","There is an unexpected data on message"))}else this.emit(IS.INSPECT_RESULT,void 0,new U_(k_.UNEXPECTED_RESPONSE,_a.code+"",_a.msg))}else E_.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(IS.INSPECT_RESULT,void 0,new U_(k_.UNEXPECTED_RESPONSE,"invalid worker message type"))}),this.workerConnection.on(KE.CLOSED,()=>{this.connectionState=SR.CLOSED}),this.workerConnection.on(KE.FAILED,()=>{this.connectionState=SR.CLOSED}),this.workerConnection.on(KE.RECONNECTING,()=>{this.connectionState=this.connectionState===SR.CONNECTED?SR.RECONNECTING:SR.CONNECTING}),this.workerConnection.on(KE.WILL_RECONNECT,(_r,_o)=>{_r==="recover"&&_o(_r),_o("tryNext")}),this.workerConnection.on(KE.REQUEST_NEW_URLS,(_r,_o)=>{this.workerManagerConnection.close(),this.once(IS.REQUEST_NEW_WORKER_URL,_a=>{_r([_a])}),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(_a=>{this.connectWorkerManager(_a,!0)}).catch(_a=>{_o(_a)})})}static intToLong(_r){return{low:_r|=0,high:_r>>31,unsigned:_r>=0}}async requestToInspectImage(){this.sequence++;const _r=_O(this,IS.CLIENT_LOCAL_VIDEO_TRACK),_o={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(_r){if(!_r.isPlaying)return void this.emit(IS.INSPECT_RESULT,void 0,new U_(k_.INVALID_OPERATION,"Only the track being played can be inspected"));const _a=await this.generateRequestData(_r,_o);this.workerConnection.sendMessage(_a,!0,!0)}else this.emit(IS.INSPECT_RESULT,void 0,new U_(k_.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(_r,_o){let{appId:_a,cname:_u,cid:_p,vid:_f,sid:n_,uid:r_}=_o;const o_=Date.now(),s_=await _r.getCurrentFrameImage("image/jpeg",this.quality),u_=await(async(M_,P_,_g)=>await HQ(M_.buffer,P_,_g))(s_,_a,_u),g_=this.sequence+"-"+_p+"-"+r_+"-"+o_+"-"+X0(12,""),w_={appId:_a,cid:_p,cname:_u,deviceId:"",elapse:KF.intToLong(Number(o_-this.inspectStartTime)),fileSize:u_.byteLength,jpgEncryption:2,height:s_.height,width:s_.width,jpg:u_,networkType:6,osType:7,requestId:g_,sdkVersion:"4.17.2",sequence:this.sequence,sid:n_,timestamp:KF.intToLong(o_),uid:r_,vid:_f,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};this.extraInfo===void 0&&delete w_.callbackData,this.ossFilePrefix===void 0&&delete w_.ossFilePrefix;const D_=PQ(w_);if(D_.byteLength<this.workerMessageLengthLimit){if(J_("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const M_=function(P_){for(var _g=1;_g<arguments.length;_g++){var _y=arguments[_g]!=null?arguments[_g]:{};_g%2?sK(Object(_y),!0).forEach(function(hE){p_(P_,hE,_y[hE])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P_,Object.getOwnPropertyDescriptors(_y)):sK(Object(_y)).forEach(function(hE){Object.defineProperty(P_,hE,Object.getOwnPropertyDescriptor(_y,hE))})}return P_}({},w_);delete M_.jpg,E_.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(M_))}return D_}{const M_=this.quality*this.qualityRatio;return this.quality=M_,await this.generateRequestData(_r,{appId:_a,cname:_u,cid:_p,vid:_f,sid:n_,uid:r_})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=dI.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=SR.CLOSED,this.emit(IS.STATE_CHANGE,wR.CLOSED)}}var aK,cK,uK,lK,dK,hK,pK,fK,mK,_K,gK,vK,yK,EK,bK,SK,wK,TK,RK,IK,CK,AK,OK,NK,kK,xK,LK,MK,DK,PK,jK,UK,$K,FK,YK,BK,VK,HK,EE;function GK(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function UU(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?GK(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):GK(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}let qQ=(aK=ME(),cK=ME({argsMap:(_n,_r)=>(Array.isArray(_r)||(_r=[_r]),_r.map(_o=>_o?Object(_o).toString():"null"))}),uK=ME({argsMap:(_n,_r)=>(_r||(_r=[]),Array.isArray(_r)||(_r=[_r]),_r.map(_o=>_o.getTrackId()))}),lK=ME({argsMap:(_n,_r,_o)=>[_r.uid,_o]}),dK=ME({argsMap:(_n,_r)=>_r.map(_o=>{let{user:_a,mediaType:_u}=_o;return[_a==null?void 0:_a.uid,_u]})}),hK=ME({argsMap:(_n,_r,_o)=>[_r.uid,_o]}),pK=ME({argsMap:(_n,_r)=>_r.map(_o=>{let{user:_a,mediaType:_u}=_o;return{uid:_a==null?void 0:_a.uid,mediaType:_u}})}),fK=ME(),mK=ME(),_K=ME(),gK=ME(),vK=ME(),yK=ME(),EK=ME(),bK=ME(),SK=ME(),wK=ME(),TK=ME(),RK=ME(),IK=ME(),CK=ME(),AK=ME({argsMap:(_n,_r)=>[_r]}),OK=ME(),NK=ME(),kK=ME(),xK=ME(),LK=ME(),MK=ME(),DK=ME(),PK=ME(),jK=ME(),UK=ME(),$K=ME({argsMap:(_n,_r)=>(Array.isArray(_r)||(_r=[_r]),[JSON.stringify(_r)])}),FK=ME(),YK=ME(),BK=ME(),VK=ME({reportResult:!0}),HK=ME(),oE((EE=class extends lS{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(_n){let _r;if(super(),p_(this,"store",void 0),p_(this,"_uid",void 0),p_(this,"_channelName",void 0),p_(this,"_uintUid",void 0),p_(this,"_users",[]),p_(this,"_codec",void 0),p_(this,"_mode",void 0),p_(this,"_config",void 0),p_(this,"_clientId",void 0),p_(this,"_appId",void 0),p_(this,"_sessionId",null),p_(this,"_key",void 0),p_(this,"_joinInfo",void 0),p_(this,"_gateway",void 0),p_(this,"_statsCollector",void 0),p_(this,"_configDistribute",void 0),p_(this,"_leaveMutex",new RT("client-leave")),p_(this,"_publishMutex",new RT("client-publish")),p_(this,"_renewTokenMutex",new RT("client-renewtoken")),p_(this,"_subscribeMutex",new RT("client-subscribe")),p_(this,"_encryptionMode","none"),p_(this,"_encryptionSecret",null),p_(this,"_encryptionSalt",null),p_(this,"_proxyServer",void 0),p_(this,"_turnServer",{servers:[],mode:"auto"}),p_(this,"_cloudProxyServerMode","disabled"),p_(this,"_isDualStreamEnabled",!1),p_(this,"_defaultStreamFallbackType",void 0),p_(this,"_lowStreamParameter",void 0),p_(this,"_streamFallbackTypeCacheMap",new Map),p_(this,"_remoteStreamTypeCacheMap",new Map),p_(this,"_axiosCancelSource",dI.CancelToken.source()),p_(this,"_audioVolumeIndicationInterval",void 0),p_(this,"_networkQualityInterval",void 0),p_(this,"_userOfflineTimeout",void 0),p_(this,"_streamRemovedTimeout",void 0),p_(this,"_injectStreamingClient",void 0),p_(this,"_liveTranscodeStreamingClient",void 0),p_(this,"_liveRawStreamingClient",void 0),p_(this,"_channelMediaRelayClient",void 0),p_(this,"_networkQualitySensitivity","normal"),p_(this,"_p2pChannel",void 0),p_(this,"_useLocalAccessPoint",!1),p_(this,"_setLocalAPVersion",void 0),p_(this,"_joinAndNotLeaveYet",!1),p_(this,"_numberOfJoinCount",0),p_(this,"_remoteDefaultVideoStreamType",void 0),p_(this,"_inspect",void 0),p_(this,"_license",void 0),p_(this,"_handleLocalTrackEnable",(_o,_a,_u)=>{this.publish(_o,!1).then(_a).catch(_u)}),p_(this,"_handleLocalTrackDisable",(_o,_a,_u)=>{this.unpublish(_o).then(_a).catch(_u)}),p_(this,"_handleUserOnline",_o=>{if(J_("BLOCK_LOCAL_CLIENT")&&pL(_o.uid,this.channelName))return void E_.debug("[".concat(_o.uid,"] will be ignored in local"));this.isStringUID&&typeof _o.uid!="string"&&E_.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));const _a=this._users.find(_u=>_u.uid===_o.uid);if(_a)_a._trust_in_room_=!0;else{const _u=new OH(_o.uid,_o.uint_id||_o.uid);this._users.push(_u),E_.debug("[".concat(this._clientId,"] user online"),_o.uid),this.emit(r0.USER_JOINED,_u)}}),p_(this,"_handleUserOffline",_o=>{if(J_("BLOCK_LOCAL_CLIENT")&&pL(_o.uid,this.channelName))return;const _a=this._users.find(_u=>_u.uid===_o.uid);_a&&(this._handleRemoveStream(_o),vH(this._users,_a),this._remoteStreamTypeCacheMap.delete(_a.uid),this._streamFallbackTypeCacheMap.delete(_a.uid),E_.debug("[".concat(this._clientId,"] user offline"),_o.uid,"reason:",_o.reason),this.emit(r0.USER_LEAVED,_a,_o.reason))}),p_(this,"_handleAddAudioOrVideoStream",(_o,_a,_u,_p,_f,n_,r_)=>{if(J_("BLOCK_LOCAL_CLIENT")&&pL(_a,this.channelName))return;const o_=this._users.find(u_=>u_.uid===_a);if(!o_)return void E_.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));E_.debug("[".concat(this._clientId,"] stream added with uid ").concat(_a,", type ").concat(_o)),this.store.subscribe(o_.uid,_o,void 0,void 0,void 0,Date.now());const s_=_o==="audio"?o_.hasAudio:o_.hasVideo;o_._uintid||(o_._uintid=_f||_a),_o==="audio"?o_._trust_audio_stream_added_state_=!0:o_._trust_video_stream_added_state_=!0,_o==="audio"?(o_._audio_added_=!0,_u!==void 0&&(o_._audioSSRC=_u),_p!==void 0&&(o_._cname=_p),n_&&(o_._audioOrtc=n_)):(o_._video_added_=!0,_u!==void 0&&(o_._videoSSRC=_u),_p!==void 0&&(o_._cname=_p),r_!==void 0&&(o_._rtxSsrcId=r_),n_&&(o_._videoOrtc=n_)),(_o==="audio"?o_.hasAudio:o_.hasVideo)&&!s_&&(E_.info("[".concat(this._clientId,"] remote user ").concat(o_.uid," published ").concat(_o)),this.emit(r0.USER_PUBLISHED,o_,_o)),_o==="video"?AE.onGatewayStream(this._sessionId,aT.ON_ADD_VIDEO_STREAM,oS.ON_ADD_VIDEO_STREAM,{peer:_f||_a}):AE.onGatewayStream(this._sessionId,aT.ON_ADD_AUDIO_STREAM,oS.ON_ADD_AUDIO_STREAM,{peer:_f||_a}),this._p2pChannel.remoteMediaSsrcChanged(o_,_o,_u).then(u_=>{if(u_)return E_.debug("[".concat(this._clientId,"] resubscribe ").concat(_o," for user ").concat(o_.uid," after rejoin because SSRC id changed.")),this._p2pChannel.unsubscribe(o_,_o,!0).then(()=>this._subscribe(o_,_o,!0).catch(g_=>{E_.error("[".concat(this._clientId,"] resubscribe error"),g_.toString())}))}),this._p2pChannel.hasPendingRemoteMedia(o_,_o)&&(E_.debug("[".concat(this._clientId,"] resubscribe ").concat(_o," for user ").concat(o_.uid," after reconnect.")),this._subscribe(o_,_o,!0).catch(u_=>{E_.error("[".concat(this._clientId,"] resubscribe error"),u_.toString())}))}),p_(this,"_handleRemoveStream",_o=>{if(J_("BLOCK_LOCAL_CLIENT")&&pL(_o.uid,this.channelName))return;const _a=this._users.find(_p=>_p.uid===_o.uid);if(!_a)return void E_.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));E_.debug("[".concat(this._clientId,"] stream removed with uid ").concat(_o.uid));let _u=()=>{};_a.hasAudio&&_a.hasVideo?_u=()=>{E_.info("[".concat(this._clientId,"] remote user ").concat(_a.uid," unpublished audio track")),this.emit(r0.USER_UNPUBLISHED,_a,"audio"),E_.info("[".concat(this._clientId,"] remote user ").concat(_a.uid," unpublished video track")),this.emit(r0.USER_UNPUBLISHED,_a,"video")}:_a.hasVideo?_u=()=>{E_.info("[".concat(this._clientId,"] remote user ").concat(_a.uid," unpublished video track")),this.emit(r0.USER_UNPUBLISHED,_a,"video")}:_a.hasAudio&&(_u=()=>{E_.info("[".concat(this._clientId,"] remote user ").concat(_a.uid," unpublished audio track")),this.emit(r0.USER_UNPUBLISHED,_a,"audio")}),_a._trust_audio_stream_added_state_=!0,_a._trust_video_stream_added_state_=!0,_a._audio_added_=!1,_a._video_added_=!1,this._p2pChannel.unsubscribe(_a).then(_p=>{if(_p)return this._gateway.unsubscribe(_p,_a.uid)}),_a._audioSSRC=void 0,_a._videoSSRC=void 0,_a._audioOrtc=void 0,_a._videoOrtc=void 0,_a._rtxSsrcId=void 0,AE.onGatewayStream(this._sessionId,aT.ON_REMOVE_STREAM,oS.ON_REMOVE_STREAM,{peer:_o.uint_id||_o.uid}),_u()}),p_(this,"_handleSetStreamLocalEnable",(_o,_a,_u)=>{if(J_("BLOCK_LOCAL_CLIENT")&&pL(_a,this.channelName))return;const _p=this._users.find(r_=>r_.uid===_a);if(!_p)return void E_.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));E_.debug("[".concat(this._clientId,"] local ").concat(_o," ").concat(_u?"enabled":"disabled"," with uid ").concat(_a));const _f=_o==="audio"?_p.hasAudio:_p.hasVideo;if(_o==="audio"){_p._trust_audio_enabled_state_=!0;const r_=_p._audio_enabled_;if(_p._audio_enabled_=_u,_p._audio_enabled_===r_)return;{const o_=_p._audio_enabled_?"enable-local-audio":"disable-local-audio";E_.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(_a,", msg: ").concat(o_)),this.emit(r0.USER_INFO_UPDATED,_a,o_)}}else{_p._trust_video_enabled_state_=!0;const r_=_p._video_enabled_;if(_p._video_enabled_=_u,_p._video_enabled_===r_)return;{const o_=_p._video_enabled_?"enable-local-video":"disable-local-video";E_.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(_a,", msg: ").concat(o_)),this.emit(r0.USER_INFO_UPDATED,_a,o_)}}const n_=_o==="audio"?_p.hasAudio:_p.hasVideo;return _f!==n_?!_f&&n_?(E_.info("[".concat(this._clientId,"] remote user ").concat(_a," published ").concat(_o)),void this.emit(r0.USER_PUBLISHED,_p,_o)):(_o==="video"&&_p._videoTrack&&_p._videoTrack._destroy(),_o==="audio"&&_p._audioTrack,this._p2pChannel.muteRemote(_p,_o),E_.info("[".concat(this._clientId,"] remote user ").concat(_a," unpublished ").concat(_o)),void this.emit(r0.USER_UNPUBLISHED,_p,_o)):void 0}),p_(this,"_handleMuteStream",(_o,_a,_u)=>{if(J_("BLOCK_LOCAL_CLIENT")&&pL(_o,this.channelName))return;E_.debug("[".concat(this._clientId,"] receive mute message"),_o,_a,_u);const _p=this._users.find(r_=>r_.uid===_o);if(!_p)return void E_.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(_o));const _f=_a==="audio"?_p.hasAudio:_p.hasVideo;if(_a==="audio"){_p._trust_audio_mute_state_=!0;const r_=_p._audio_muted_;if(_p._audio_muted_=_u,_p._audio_muted_===r_)return;{const o_=_p._audio_muted_?"mute-audio":"unmute-audio";E_.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(_o,", msg: ").concat(o_)),this.emit(r0.USER_INFO_UPDATED,_o,o_)}}else{_p._trust_video_mute_state_=!0;const r_=_p._video_muted_;if(_p._video_muted_=_u,_p._video_muted_===r_)return;{const o_=_p._video_muted_?"mute-video":"unmute-video";E_.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(_o,", msg: ").concat(o_)),this.emit(r0.USER_INFO_UPDATED,_o,o_)}}const n_=_a==="audio"?_p.hasAudio:_p.hasVideo;if(_f!==n_){if(!_f&&n_)return(_a==="audio"?_p._audioSSRC:_p._videoSSRC)?(E_.info("[".concat(this._clientId,"] remote user ").concat(_o," published ").concat(_a)),void this.emit(r0.USER_PUBLISHED,_p,_a)):void E_.warning("[".concat(this._clientId,"] remote user ").concat(_o," receive ").concat(_a," unmute message  before add stream message, ").concat(_a," SSRC doesn't exist yet."));_a==="video"&&_p._videoTrack&&_p._videoTrack._destroy(),_a==="audio"&&_p._audioTrack,this._p2pChannel.muteRemote(_p,_a),E_.info("[".concat(this._clientId,"] remote user ").concat(_o," unpublished ").concat(_a)),this.emit(r0.USER_UNPUBLISHED,_p,_a)}}),p_(this,"_handleP2PLost",async _o=>{E_.debug("[".concat(this._clientId,"] receive p2p lost"),_o),parseInt(_o.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():E_.warning("P2PLost stream not found",_o)}),p_(this,"_handleTokenWillExpire",()=>{E_.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.emit(r0.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),p_(this,"_handleBeforeUnload",_o=>{_o.type==="beforeunload"&&_o.returnValue!==void 0&&_o.returnValue!==""||(this.leave(),E_.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))}),p_(this,"_handleUpdateNetworkQuality",()=>{if(this._networkQualitySensitivity==="normal")return;if(navigator&&navigator.onLine!==void 0&&!navigator.onLine)return void this.emit(r0.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const _o={downlinkNetworkQuality:0,uplinkNetworkQuality:0};_o.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),_o.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.emit(r0.NETWORK_QUALITY,_o)}),this._codec=_n.codec,this._mode=_n.mode,this._clientId=X0(5,"client-"),this.store=new MQ(_n.codec,_n.audioCodec,_n.mode,this._clientId),this.store.clientCreated(),_n.proxyServer&&this.setProxyServer(_n.proxyServer,!0),_n.turnServer&&this.setTurnServer(_n.turnServer,!0),E_.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat($R," build: ").concat(L4,", mode: ").concat(this._mode,", codec: ").concat(this._codec)),_n.clientRoleOptions)try{D5(_n.clientRoleOptions),_r=Object.assign({},_n.clientRoleOptions)}catch(_o){E_.warning("[".concat(this._clientId,"] ").concat(_o.toString()))}this._statsCollector=new FD(this.store),this._statsCollector.onStatsException=(_o,_a,_u)=>{E_.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(_o,", msg: ").concat(_a,", uid: ").concat(_u)),this.emit(r0.EXCEPTION,{code:_o,msg:_a,uid:_u})},this._statsCollector.onUploadPublishDuration=(_o,_a,_u,_p)=>{const _f=this._users.find(n_=>n_.uid===_o);_f&&AE.peerPublishStatus(this._sessionId,{subscribeElapse:_p,audioPublishDuration:_a,videoPublishDuration:_u,peer:_f._uintid})},this.store.useDataChannel=VS().supportDataChannel&&J_("SIGNAL_CHANNEL"),this._gateway=new v9(this.store,{clientId:this._clientId,mode:this._mode,codec:this._codec,websocketRetryConfig:_n.websocketRetryConfig||OS,httpRetryConfig:_n.httpRetryConfig||OS,forceWaitGatewayResponse:_n.forceWaitGatewayResponse===void 0||_n.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:_n.role,clientRoleOptions:_r}),this._config=_n,this._configDistribute=new C9,this._p2pChannel=new LQ(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async join(_n,_r,_o,_a,_u){const _p=++this._numberOfJoinCount;this.store.joinStart(),_a&&(this.store.uid=_a);const _f=DQ(),n_=X8()?window.isSecureContext:"Browser Not Support";if(!X8()&&!_f||!window.isSecureContext){const w_="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";E_.warning(w_)}const r_=gH();this.connectionState==="DISCONNECTED"&&(this.store.avoidJoinStart=Math.round(Date.now()),E_.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart)));const o_=AE.reportApiInvoke(r_,{name:wS.JOIN,options:[_n,_r,_o,_a],states:{isHttps:_f,isSecureContext:n_},tag:nS.TRACER});AE.setAppId(_n);try{if(!_o&&_o!==null)throw new U_(k_.INVALID_PARAMS,"Invalid token: ".concat(_o,". If you don not use token, set it to null"));_o&&oT(_o,"token",1,2047),oT(_n,"appid",1,2047),V4(_r),_a&&H4(_a),_u&&oT(_u,"optionalInfo",1,2047)}catch(w_){throw o_.onError(w_),w_}if(E_.info("[".concat(this._clientId,"] start join channel ").concat(_r,", join number: ").concat(_p)),this._leaveMutex.isLocked&&(E_.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),E_.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,this.connectionState!=="DISCONNECTED"){const w_=new U_(k_.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw o_.onError(w_),w_}this._sessionId||(this._sessionId=r_,this.store.sessionId=this._sessionId),this._gateway.state="CONNECTING";const s_=UU({clientId:this._clientId,appId:_n,sid:this._sessionId,cname:_r,uid:typeof _a!="string"?_a:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:_o||_n,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:_u,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint},this._remoteDefaultVideoStreamType!==void 0&&{defaultVideoStream:this._remoteDefaultVideoStreamType});if(this._useLocalAccessPoint&&(s_.setLocalAPVersion=this._setLocalAPVersion),typeof _a=="string"&&(s_.stringUid=_a,this._uintUid?(s_.uid=this._uintUid,this._uintUid=void 0):s_.uid=0),this._encryptionMode!=="none"&&this._encryptionSecret){if(s_.aesmode=this._encryptionMode,s_.aespassword=await(async w_=>{const D_=yH(`MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu
STM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+
HvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy
xQiYDz3vqa6bP29adwIDAQAB`),M_=await window.crypto.subtle.importKey("spki",D_,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),P_=aH(w_),_g=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},M_,P_);return NF(new Uint8Array(_g))})(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new U_(k_.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(s_.aessalt=this._encryptionSalt)}this._startSession(this._sessionId,{channel:_r,appId:_n});const u_=this._sessionId;setTimeout(()=>{this.connectionState==="CONNECTING"&&u_===this._sessionId&&AE.joinChannelTimeout(this._sessionId,5)},5e3);try{let w_;const D_=s_.cloudProxyServer;if(["proxy3","proxy4","proxy5"].includes(D_)){const _y=J_("PROXY_SERVER_TYPE3");Array.isArray(_y)?s_.proxyServer=_y[0]:s_.proxyServer=_y}if(AE.setProxyServer(s_.proxyServer),E_.setProxyServer(s_.proxyServer),this.store.requestAPStart(),s_.stringUid&&!s_.uid){const _y=await U6(s_.stringUid,s_,this._axiosCancelSource.token,this._config.httpRetryConfig||OS,this.store);E_.debug("getUserAccount Success ".concat(s_.stringUid," => ").concat(_y)),s_.uid=_y,w_=await j6(s_,this._axiosCancelSource.token,this._config.httpRetryConfig||OS,!0,this.store)}else w_=await j6(s_,this._axiosCancelSource.token,this._config.httpRetryConfig||OS,!0,this.store);if(!this._joinAndNotLeaveYet)throw new U_(k_.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this.store.requestAPEnd(),setTimeout(()=>{this._configDistribute.startGetConfigDistribute(s_,this._axiosCancelSource.token),this._configDistribute.on(yU.UPDATE_BITRATE_LIMIT,_y=>{this._p2pChannel.updateBitrateLimit(_y)})},0),this._key=_o||_n;const M_=w_.gatewayInfo;this._joinInfo=UU(UU({},s_),{},{cid:M_.cid,uid:s_.uid?s_.uid:M_.uid,vid:M_.vid,apResponse:M_.res,uni_lbs_ip:M_.uni_lbs_ip,gatewayAddrs:M_.gatewayAddrs});const P_=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new U_(k_.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));o_.onSuccess(P_),this._appId=_n,this._channelName=s_.cname,this._uid=P_,this.store.uid=P_,setTimeout(()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(rT()?"beforeunload":"pagehide",this._handleBeforeUnload)},0);const _g=s_.stringUid?"string uid: ".concat(s_.stringUid,",uid: ").concat(s_.uid):"uid: ".concat(this._uid);return E_.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(_r,",").concat(_g)),setTimeout(()=>{E_.startUpload()},5e3),this.store.joinEnd(),g_=this,hL.includes(g_)||hL.push(g_),P_}catch(w_){const D_=Array.isArray(w_)?w_[0]:w_;throw E_.error("[".concat(this._clientId,"] join number: ").concat(_p,", Joining channel failed, rollback"),D_),D_.code!==k_.OPERATION_ABORTED&&this._numberOfJoinCount===_p&&(this._gateway.state="DISCONNECTED",this._reset()),o_.onError(D_),D_}var g_}_joinGateway(){if(!this._joinInfo||!this._key)throw new U_(k_.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!(this._joinInfo.cloudProxyServer!=="disabled"||this._joinInfo.proxyServer||!J_("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then(_n=>_n).catch(_n=>{if(_n.code===k_.INIT_WEBSOCKET_TIMEOUT)return this._gateway.leave(!0,w0.FALLBACK),_n;if(_n.code===k_.INIT_DATACHANNEL_TIMEOUT)return this._gateway.leave(!0,w0.FALLBACK),_n;throw _n}).then(_n=>{if(_n instanceof U_){if(_n.code===k_.INIT_WEBSOCKET_TIMEOUT){if(E_.info("[".concat(this._clientId,"] join timeout, fallback to proxy")),!this._joinInfo||!this._key)throw new U_(k_.INVALID_OPERATION);this._joinInfo.cloudProxyServer="fallback",this._cloudProxyServerMode="fallback",this.store.cloudProxyServerMode="fallback";const _r=J_("PROXY_SERVER_TYPE3");if(Array.isArray(_r))if(this._joinInfo.apUrl){const _a=/^https?:\/\/(.+?)(\/.*)?$/.exec(this._joinInfo.apUrl)[1].split("."),_u=_a.slice(_a.length-2).join(".");_r.forEach(_p=>{this._joinInfo&&_p.includes(_u)&&(this._joinInfo.proxyServer=_p)}),this._joinInfo.proxyServer||(this._joinInfo.proxyServer=_r[0])}else this._joinInfo.proxyServer=_r[0];else this._joinInfo.proxyServer=_r;const _o=J_("LOG_UPLOAD_SERVER").match(/.+:(\d{1,5})$/);return _o&&_o[1]&&_o[1]!=="443"&&E_.setProxyServer(this._joinInfo.proxyServer),J_("STATS_COLLECTOR_PORT").toString()!=="443"&&AE.setProxyServer(this._joinInfo.proxyServer),AE.reportApiInvoke(this._sessionId,{name:wS.JOIN_FALLBACK_TO_PROXY,options:[this._joinInfo.proxyServer],tag:nS.TRACER}).onSuccess(),this.emit(r0.JOIN_FALLBACK_TO_PROXY,this._joinInfo.proxyServer),J_("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&this._joinInfo.turnServer.servers.forEach(_a=>{"forceturn"in _a&&(_a.forceturn=!0)}),this._gateway.join(this._joinInfo,this._key)}if(E_.info("[".concat(this._clientId,"] join by datachannel timeout, fallback to websocket")),!this._joinInfo||!this._key)throw new U_(k_.INVALID_OPERATION);return AE.reportApiInvoke(this._sessionId,{name:wS.DATACHANNEL_FAILBACK,options:[this.store.clientId],tag:nS.TRACER}).onSuccess(),this._joinGateway()}return _n}).then(_n=>_n)}async leave(){E_.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(rT()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(_r){const _o=hL.indexOf(_r);_o!==-1&&hL.splice(_o,1)}(this);const _n=await this._leaveMutex.lock();if(this.connectionState==="DISCONNECTED")return E_.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void _n();await this._gateway.leave(this.connectionState!=="CONNECTED"),E_.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),_n()}async publish(_n){let _r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(Array.isArray(_n)||(_n=[_n]),_n.length===0)throw new U_(k_.INVALID_PARAMS,"track list is empty");if(this._gateway.role==="audience")throw new U_(k_.INVALID_OPERATION,"audience can not publish stream");for(const _a of _n){if(!(_a instanceof cH))throw new U_(k_.INVALID_PARAMS,"parameter is not local track");if(!_a._enabled&&_r)throw new U_(k_.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(_a.getTrackId()))}E_.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(_n.map(_a=>"".concat(_a.getTrackId()," ")))),await this._configDistribute.awaitConfigDistributeComplete(),_r&&_n.forEach(_a=>{const _u=this._configDistribute.getBitrateLimit();_a instanceof yS&&_u&&_a.setBitrateLimit(_u.uplink)});const _o=await this._publishMutex.lock();try{await this._publishHighStream(_n),E_.info("[".concat(this._clientId,"] Publish success, id ").concat(_n.map(_a=>"".concat(_a.getTrackId()," "))))}catch(_a){throw E_.error("[".concat(this._clientId,"] publish error"),_a.toString()),_a}finally{_o()}}async unpublish(_n){if(!this._joinInfo||this._uid===void 0)throw new U_(k_.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");_n?Array.isArray(_n)||(_n=[_n]):_n=this._p2pChannel.getAllTracks(!0),E_.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(_n.map(_o=>"".concat(_o.getTrackId()," "))," "));const _r=await this._publishMutex.lock();try{const _o=await this._p2pChannel.unpublish(_n);_o&&await this._gateway.unpublish(_o,this._uid),E_.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(_n.map(_a=>"".concat(_a.getTrackId()))))}catch(_o){throw E_.error("[".concat(this._clientId,"] unpublish error"),_o.toString()),_o}finally{_r&&_r()}}async subscribe(_n,_r){return this._subscribe(_n,_r)}async _subscribe(_n,_r,_o){if($S(_r,"mediaType",["audio","video"]),!this._joinInfo)throw new U_(k_.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new U_(k_.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(r_=>r_===_n)){const r_=new U_(k_.INVALID_REMOTE_USER,"user is not in the channel");throw E_.error("[".concat(this._clientId,"] can not subscribe ").concat(_n.uid,", this user is not in the channel")),r_}if(!_n.hasAudio&&!_n.hasVideo){const r_=new U_(k_.INVALID_REMOTE_USER,"user is not published");throw E_.error("[".concat(this._clientId,"] can not subscribe ").concat(_n.uid,", user is not published")),r_}if(!(_o||(_r!=="audio"||_n.hasAudio&&_n._audioSSRC!==void 0)&&(_r!=="video"||_n.hasVideo&&_n._videoSSRC!==void 0))){const r_=new U_(k_.REMOTE_USER_IS_NOT_PUBLISHED);throw E_.error("[".concat(this._clientId,"] can not subscribe ").concat(_n.uid," with mediaType ").concat(_r,", remote track is not published")),r_}const _a=_r==="audio"?_n._audioSSRC:_n._videoSSRC,_u=_r==="audio"?_n._audioOrtc:_n._videoOrtc,_p=_r==="video"?_n._rtxSsrcId:void 0,_f={stream_type:_r==="audio"?WE.AUDIO:WE.VIDEO,ssrcId:_a},n_=await this._subscribeMutex.lock();E_.info("[".concat(this._clientId,"] subscribe user ").concat(_n.uid,", mediaType: ").concat(_r));try{if(await this._p2pChannel.hasRemoteMediaWithLock(_n,_r))await this._p2pChannel.unmuteRemote(_n,_r);else try{YR.markSubscribeStart(this.store.clientId,_a),this.store.subscribe(_n.uid,_r,Date.now()),await this._p2pChannel.subscribe(_n,_r,_a,_p,_u);try{await this._gateway.subscribe(_n.uid,_f,!0)}catch(o_){if((o_==null?void 0:o_.code)!==k_.WS_ABORT)throw await this._p2pChannel.unsubscribe(_n,_r),o_;await this._p2pChannel.unsubscribe(_n,_r,!0),this._p2pChannel.setPendingRemoteMedia(_n,_r)}this.store.subscribe(_n.uid,_r,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,_n,_r)}catch(o_){throw this._p2pChannel.reportSubscribeEvent(!1,o_==null?void 0:o_.code,_n,_r),o_}E_.info("[".concat(this._clientId,"] subscribe success user ").concat(_n.uid,", mediaType: ").concat(_r)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(_n.uid,this._defaultStreamFallbackType).catch(o_=>{E_.warning("[".concat(this._clientId,"] auto set fallback failed"),o_)});const r_=_r==="audio"?_n._audioTrack:_n._videoTrack;if(!r_)throw new U_(k_.UNEXPECTED_ERROR,"can not find remote track in user object");return r_}catch(r_){throw E_.error("[".concat(this._clientId,"] subscribe user ").concat(_n.uid," error"),r_),r_}finally{n_()}}async massSubscribe(_n){if(KO(_n,"subscribeList"),!this._joinInfo)throw new U_(k_.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new U_(k_.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const _r=Date.now(),_o=new Map,_a=await this._subscribeMutex.lock();E_.info("[".concat(this._clientId,"]start massSubscribe user ").concat(_n.map(n_=>{let{user:r_,mediaType:o_}=n_;return"user: ".concat(r_==null?void 0:r_.uid,", mediaType: ").concat(o_)}).join("; ")));const _u=(_n=[..._n]).map(n_=>{let{user:r_,mediaType:o_}=n_;return{user:r_,mediaType:o_}}),_p=await this._p2pChannel.globalLock();try{var _f;for(let r_=_n.length-1;r_>=0;r_--){const o_=_n[r_],{user:s_,mediaType:u_}=o_;if($S(u_,"mediaType",["audio","video"]),!s_){const D_=new U_(k_.INVALID_PARAMS,"user property does not exist in subscribeList item");throw E_.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),D_}if(!this._users.find(D_=>D_===s_)){const D_=new U_(k_.INVALID_REMOTE_USER,"user is not in the channel");E_.error("[".concat(this._clientId,"] can not massSubscribe ").concat(s_.uid,", this user is not in the channel")),_u[r_].error=D_,_n.splice(r_,1);continue}if(u_==="audio"&&(!s_.hasAudio||s_._audioSSRC===void 0)||u_==="video"&&(!s_.hasVideo||s_._videoSSRC===void 0)){const D_=new U_(k_.REMOTE_USER_IS_NOT_PUBLISHED);E_.error("[".concat(this._clientId,"] can not subscribe ").concat(s_.uid," with mediaType ").concat(u_,", remote user is not published")),_u[r_].error=D_,_n.splice(r_,1);continue}const g_=_S.Video|_S.LwoVideo,w_=_o.get(s_);if(w_){if(u_==="video"?w_&g_:w_&_S.Audio){_n.splice(r_,1),E_.warning("repeat massSubscribe user:".concat(s_.uid,", mediaType:").concat(u_," twice"));continue}_o.set(s_,w_|(u_==="video"?g_:_S.Audio))}else _o.set(s_,u_==="video"?g_:_S.Audio)}for(let r_=_n.length-1;r_>=0;r_--){const o_=_n[r_],{user:s_,mediaType:u_}=o_,g_=_S.Video|_S.LwoVideo;if(this._p2pChannel.hasRemoteMedia(s_,u_)){await this._p2pChannel.unmuteRemoteNoLock(s_,u_);const w_=_o.get(s_);_o.set(s_,u_==="video"?w_^g_:w_^_S.Audio),_n.splice(r_,1)}}this.store.massSubscribe(_n.map(r_=>({userId:r_.user.uid,type:r_.mediaType})),_r);const n_=ZR(_f=Array.from(_o.entries())).call(_f,(r_,o_)=>{let[s_,u_]=o_;if(u_===0)return r_;const g_={stream_id:s_.uid,stream_type:u_};return u_&_S.Audio&&(g_.audio_ssrc=s_._audioSSRC),u_&_S.Video&&(g_.video_ssrc=s_._videoSSRC),r_.push(g_),r_},[]);try{_n.length>0&&await this._p2pChannel.massSubscribeNoLock(_n.map(o_=>{let{user:s_,mediaType:u_}=o_;return{user:s_,mediaType:u_,ssrcId:u_===WE.VIDEO?s_._videoSSRC:s_._audioSSRC,rtxSsrcId:s_._rtxSsrcId}}));const r_=new Map;if(n_.length>0){const o_=await this._gateway.subscribeAll(n_,!0);((o_==null?void 0:o_.users)||[]).forEach(s_=>{let{stream_id:u_,video_error_code:g_,audio_error_code:w_,error_code:D_}=s_;(g_||w_||D_)&&r_.set(u_,{video_error_code:g_,audio_error_code:w_,error_code:D_})})}if(Array.from(r_.entries()).length>0){const o_=Array.from(r_.entries()).map(s_=>{let u_,[g_,w_]=s_;return w_.error_code||w_.video_error_code&&w_.audio_error_code?u_=void 0:w_.video_error_code?u_=WE.VIDEO:w_.audio_error_code&&(u_=WE.AUDIO),{user:this.remoteUsers.find(D_=>D_.uid===g_),mediaType:u_}});await this._p2pChannel.massUnsubscribeNoLock(o_)}for(const o_ of _u){const s_=r_.get(o_.user.uid);if(s_){const u_=s_.error_code||o_.mediaType==="audio"&&s_.audio_error_code||o_.mediaType==="video"&&s_.video_error_code;if(u_){const g_=wU(u_);E_.error("user:".concat(o_.user.uid," mediaType:").concat(o_.mediaType," has massSubscribe error ").concat(g_.desc)),o_.error=new U_(k_.SUBSCRIBE_FAILED,"code ".concat(u_,": ").concat(g_.desc))}}o_.error||(o_.mediaType==="video"?o_.track=o_.user.videoTrack:o_.track=o_.user.audioTrack)}return this.store.massSubscribe(_u.filter(o_=>!o_.error).map(o_=>({userId:o_.user.uid,type:o_.mediaType})),void 0,Date.now()),_u.forEach(o_=>{var s_;AE.subscribe(this.store.sessionId,{succ:!!o_.error,ec:((s_=o_.error)===null||s_===void 0?void 0:s_.code)||null,video:o_.mediaType===WE.VIDEO,audio:o_.mediaType===WE.AUDIO,peerid:o_.user.uid,subscribeRequestid:o_.mediaType===WE.VIDEO?o_.user._videoSSRC:o_.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-_r)},!0)}),E_.info("[".concat(this._clientId,"] massSubscribe success ").concat(_n.map(o_=>{let{user:s_,mediaType:u_}=o_;return"user: ".concat(s_==null?void 0:s_.uid,", mediaType: ").concat(u_)}).join("; "))),_u}catch(r_){throw await this._p2pChannel.massUnsubscribeNoLock(_n),r_}}finally{_p(),_a()}}async unsubscribe(_n,_r){if(_r&&$S(_r,"mediaType",["audio","video"]),!this._joinInfo)throw new U_(k_.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");if(!this._users.find(_o=>_o===_n)){const _o=new U_(k_.INVALID_REMOTE_USER,"user is not in the channel");throw E_.error("[".concat(this._clientId,"] can not unsubscribe ").concat(_n.uid,", user is not in the channel")),_o}E_.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(_n.uid,", mediaType: ").concat(_r));try{const _o=await this._p2pChannel.unsubscribe(_n,_r);_o&&await this._gateway.unsubscribe(_o,_n.uid),E_.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(_n.uid,", mediaType: ").concat(_r))}catch(_o){if(_o.code===k_.DISCONNECT_P2P)return void E_.warning("disconnecting p2p, abort unsubscribe request.");throw E_.error("[".concat(this._clientId,"] unsubscribe user ").concat(_n.uid," error"),_o.toString()),_o}}async massUnsubscribe(_n){if(KO(_n,"unsubscribeList"),!this._joinInfo)throw new U_(k_.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");E_.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(_n.map(_o=>{let{user:_a,mediaType:_u}=_o;return"user: ".concat(_a==null?void 0:_a.uid,", mediaType: ").concat(_u,";")}).join())),_n=[..._n];const _r=new Map;for(let _o=_n.length-1;_o>=0;_o--){const{user:_a,mediaType:_u}=_n[_o];if(!_a){const _f=new U_(k_.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw E_.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),_f}if($S(_u,"mediaType",["video","audio",void 0]),!this._users.find(_f=>_f===_a)){E_.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(_a.uid,", user is not in the channel")),_n.splice(_o,1);continue}const _p=_S.Video|_S.LwoVideo;if(_r.has(_a)){const _f=_r.get(_a);let n_;switch(_u){case"video":n_=_f&_p;break;case"audio":n_=_f&_S.Audio;break;default:n_=_f&(_S.Audio|_p)}if(n_){E_.warning("repeat massUnsubscribe user:".concat(_a.uid,",mediaType:").concat(_u," twice.")),_n.splice(_o,1);continue}_u?_u==="audio"?_r.set(_a,_f|_S.Audio):_u==="video"&&_r.set(_a,_f|_p):_r.set(_a,_f|_S.Audio|_p)}else _u?_u==="audio"?_r.set(_a,_S.Audio):_u==="video"&&_r.set(_a,_p):_r.set(_a,_S.Audio|_p)}try{const _o=await this._p2pChannel.massUnsubscribe(_n);_o&&await this._gateway.massUnsubscribe(_o),E_.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(_n.map(_a=>{let{user:_u,mediaType:_p}=_a;return"user: ".concat(_u==null?void 0:_u.uid,", mediaType: ").concat(_p,";")}).join()))}catch(_o){if(_o.code===k_.DISCONNECT_P2P)return void E_.warning("disconnecting p2p, abort unsubscribe request.");throw E_.error("[".concat(this._clientId,"] massUnsubscribe error"),_o.toString()),_o}}setLowStreamParameter(_n){(function(_o){if(!_o)throw new U_(k_.INVALID_PARAMS);Q0(_o.width)||B4(_o.width,"streamParameter.width"),Q0(_o.height)||B4(_o.height,"streamParameter.height"),Q0(_o.framerate)||B4(_o.framerate,"streamParameter.framerate"),Q0(_o.bitrate)||W0(_o.bitrate,"streamParameter.bitrate")})(_n),(!_n.width&&_n.height||_n.width&&!_n.height)&&E_.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),E_.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(_n));const _r=this._configDistribute.getLowStreamConfigDistribute();_r&&_r.bitrate&&_n.bitrate&&_r.bitrate<_n.bitrate&&(_n.bitrate=_r.bitrate),this._lowStreamParameter=_n}async enableDualStream(){if(!VS().supportDualStream)throw AE.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new U_(k_.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new U_(k_.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(_n){throw AE.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),_n}this._isDualStreamEnabled=!0,AE.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),E_.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new U_(k_.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(TE.LocalVideoLowTrack))try{const _n=await this._p2pChannel.unpublishLowStream();_n&&await this._gateway.unpublish(_n,this._joinInfo.stringUid||this._joinInfo.uid)}catch(_n){throw AE.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),_n}this._isDualStreamEnabled=!1,AE.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),E_.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(_n,_r){if(function(_o){$S(_o,"role",["audience","host"])}(_n),_r&&D5(_r),this._mode==="rtc")throw E_.warning("[".concat(this._clientId,"]rtc mode can not use setClientRole")),new U_(k_.INVALID_OPERATION,"rtc mode can not use setClientRole");if(_r&&_r.level&&_n==="host")throw new U_(k_.INVALID_OPERATION,"host mode can not set audience latency level");if(_n==="audience"&&this._p2pChannel.hasLocalMedia())throw new U_(k_.INVALID_OPERATION,"can not set client role to audience when publishing stream");await this._gateway.setClientRole(_n,_r),E_.info("[".concat(this._clientId,"] set client role to ").concat(_n,", level: ").concat(_r&&_r.level))}setProxyServer(_n,_r){if(oT(_n,"proxyServer"),!_r){if(this.connectionState!=="DISCONNECTED")throw new U_(k_.INVALID_OPERATION,"Set proxy server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new U_(k_.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=_n,AE.setProxyServer(this._proxyServer),E_.setProxyServer(this._proxyServer),E_.info("[".concat(this._clientId,"] Set proxy server ").concat(_r?"by initialize call":""," success."))}setTurnServer(_n,_r){if(Array.isArray(_n)||(_n=[_n]),!_r){if(this.connectionState!=="DISCONNECTED")throw new U_(k_.INVALID_OPERATION,"Set turn server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new U_(k_.INVALID_OPERATION,"You have already set the proxy")}if(vU(_n))return this._turnServer={servers:_n,mode:"original-manual"},void E_.info("[".concat(this._clientId,"] Set original turnserver ").concat(_r?"by initialize call":""," success: ").concat(_n.map(_o=>_o.urls).join(","),"."));_n.forEach(_o=>M5(_o)),this._turnServer={servers:_n,mode:"manual"},E_.info("[".concat(this._clientId,"] Set turnserver ").concat(_r?"by initialize call":""," success."))}setLicense(_n){if(this.connectionState!=="DISCONNECTED")throw new U_(k_.INVALID_OPERATION,"you should set license before join channel");if(oT(_n,"license",32,32),!/^[A-Za-z\d]+$/.test(_n))throw new U_(k_.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=_n,E_.info("[".concat(this._clientId,"] set license success"),_n)}startProxyServer(_n){if(this.connectionState!=="DISCONNECTED")throw new U_(k_.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||this._turnServer.mode==="manual"||this._useLocalAccessPoint)throw new U_(k_.INVALID_OPERATION,"You have already set the proxy");const _r=[3,4,5];let _o;switch(_n===void 0&&(_n=3),_n){case 1:case 2:throw new U_(k_.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:_o="proxy3";break;case 4:_o="proxy4";break;case 5:_o="proxy5";break;default:throw new U_(k_.INVALID_PARAMS,"proxy server mode must be ".concat(_r.join("|")))}this._cloudProxyServerMode=_o,this.store.cloudProxyServerMode=_o,E_.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if(this.connectionState!=="DISCONNECTED")throw new U_(k_.INVALID_OPERATION,"Stop proxy server after leave channel");AE.setProxyServer(),E_.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",E_.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(_n){if(!_n.accessPoints)throw new U_(k_.INVALID_PARAMS,"accessPoints is required.");KO(_n.accessPoints.serverList,"accessPoints.serverList"),oT(_n.accessPoints.domain,"accessPoints.domain");const _r=(g_,w_)=>{W0(g_,w_,0,65535,!0)};let _o=443;if(_n.accessPoints.port&&(_r(_n.accessPoints.port,"accessPoints.port"),_o=_n.accessPoints.port),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new U_(k_.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");J_("CLOSE_AFB_FOR_LOCAL_AP")&&(P0("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),P0("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));const _a=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,_u=_n.accessPoints.domain,_p=_n.accessPoints.serverList.map(g_=>_a.test(g_)?"".concat(g_.replace(/\./g,"-"),".").concat(_u):g_),_f=_p.map(g_=>"".concat(g_,":").concat(_o));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,P0("WEBCS_DOMAIN",_f),P0("WEBCS_DOMAIN_BACKUP_LIST",_f),P0("GATEWAY_DOMAINS",[_u]),_n.report&&_n.report.hostname&&Array.isArray(_n.report.hostname)&&_n.report.hostname.length?(KO(_n.report.hostname,"report.hostname"),P0("EVENT_REPORT_DOMAIN",_n.report.hostname[0]),P0("EVENT_REPORT_BACKUP_DOMAIN",_n.report.hostname[1]||_n.report.hostname[0])):(P0("EVENT_REPORT_DOMAIN",_p[0]),P0("EVENT_REPORT_BACKUP_DOMAIN",_p[1]||_p[0]));let n_=6443;_n.report&&_n.report.port&&(_r(_n.report.port,"report.port"),n_=_n.report.port),P0("STATS_COLLECTOR_PORT",n_),_n.report?P0("ENABLE_EVENT_REPORT",!0):P0("ENABLE_EVENT_REPORT",!1);let r_="";_n.log&&_n.log.hostname&&Array.isArray(_n.log.hostname)&&_n.log.hostname.length?(KO(_n.log.hostname,"log.hostname"),r_=_n.log.hostname[0]):r_=_p[0];let o_=6444;_n.log&&_n.log.port&&(_r(_n.log.port,"log.port"),o_=_n.log.port),P0("LOG_UPLOAD_SERVER","".concat(r_,":").concat(o_));let s_=[];_n.cds&&_n.cds.hostname&&Array.isArray(_n.cds.hostname)&&_n.cds.hostname.length?(KO(_n.cds.hostname,"cds.hostname"),s_=_n.cds.hostname):s_=_p;let u_=443;_n.cds&&_n.cds.port&&(_r(_n.cds.port,"cds.port"),u_=_n.cds.port),P0("CDS_AP",s_.map(g_=>"".concat(g_,":").concat(u_))),_n.cds?P0("ENABLE_CONFIG_DISTRIBUTE",!0):P0("ENABLE_CONFIG_DISTRIBUTE",!1),E_.info("set local access point v2 success")}setLocalAccessPoints(_n,_r){if(KO(_n,"serverList"),oT(_r,"domain"),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new U_(k_.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const _o=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;_n=_n.map(_a=>_o.test(_a)?"".concat(_a.replace(/\./g,"-"),".").concat(_r):_a),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,P0("WEBCS_DOMAIN",_n),P0("WEBCS_DOMAIN_BACKUP_LIST",_n),P0("GATEWAY_DOMAINS",[_r]),P0("EVENT_REPORT_DOMAIN",_n[0]),P0("EVENT_REPORT_BACKUP_DOMAIN",_n[1]||_n[0]),P0("LOG_UPLOAD_SERVER","".concat(_n[0],":6444")),E_.info("set local access point success")}async setRemoteDefaultVideoStreamType(_n){if($S(_n,"streamType",[0,1]),this._remoteDefaultVideoStreamType=_n,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(_n),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(_r){throw E_.error("[".concat(this._clientId,"] set default remote video stream type error"),_r.toString()),_r}else E_.debug("haven't joined yet, cache remoteDefaultVideoStreamType ".concat(_n))}async setRemoteVideoStreamType(_n,_r){$S(_r,"streamType",[0,1]);try{await this._gateway.setRemoteVideoStreamType(_n,_r),setTimeout(()=>{const _o=this._users.find(_a=>_a.uid===_n);_o&&_o.videoTrack&&_o.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(_o){throw E_.error("[".concat(this._clientId,"] set remote video stream type error"),_o.toString()),_o}E_.info("[".concat(this._clientId,"] set remote ").concat(_n," video stream type to ").concat(_r)),this._remoteStreamTypeCacheMap.set(_n,_r)}async setStreamFallbackOption(_n,_r){$S(_r,"fallbackType",[0,1,2]);try{await this._gateway.setStreamFallbackOption(_n,_r)}catch(_o){throw E_.error("[".concat(this._clientId,"] set stream fallback option"),_o.toString()),_o}E_.info("[".concat(this._clientId,"] set remote ").concat(_n," stream fallback type to ").concat(_r)),this._streamFallbackTypeCacheMap.set(_n,_r)}setEncryptionConfig(_n,_r,_o){if(function(_a){$S(_a,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])}(_n),oT(_r,"secret"),["aes-128-gcm2","aes-256-gcm2"].includes(_n)){if(!_o||!(_o instanceof Uint8Array&&_o.length===32))throw new U_(k_.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(_o)throw new U_(k_.INVALID_PARAMS,"current encrypt mode does not need salt");new RegExp(`^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'"|{}\\[\\]])(?=.{8,})`).test(_r)||E_.warning(`The secret is not strong:
      The secret must contain at least 1 lowercase alphabetical character,
      The secret must contain at least 1 uppercase alphabetical character,
      The secret must contain at least 1 numeric character,
      The secret must contain at least one special character,
      The secret must be eight characters or longer.
      `),this._encryptionMode=_n,this._encryptionSecret=_r,_o&&(this._encryptionSalt=NF(_o))}async renewToken(_n){if(oT(_n,"token",1,2047),!this._key||!this._joinInfo)throw new U_(k_.INVALID_OPERATION,"renewToken should not be called before user join");const _r=this._key;this._key=_n,this._joinInfo&&(this._joinInfo.token=_n);const _o=await this._renewTokenMutex.lock();try{if(J_("USE_NEW_TOKEN")){E_.debug("start renew token with ticket from unilbs");const _a=await I9(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||OS);E_.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:_n,ticket:_a})}else E_.debug("start renew token without ticket"),await this._gateway.renewToken({token:_n});E_.debug("[".concat(this._clientId,"] renewToken success"))}catch(_a){throw this._key=_r,this._joinInfo.token=_r,E_.error("[".concat(this._clientId,"] renewToken failed"),_a.toString()),_a}finally{_o()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?E_.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval(()=>{const _n=this._p2pChannel.getAudioLevels();this.emit(r0.VOLUME_INDICATOR,_n)},J_("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){const _n=this._statsCollector.getRTCStats(),_r=this._gateway.getInChannelInfo();return _n.Duration=Math.round(_r.duration/1e3),_n}async startLiveStreaming(_n,_r){if(!_r){if(this._codec!=="h264")throw new U_(k_.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new U_(k_.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(_n)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(_n))throw new U_(k_.LIVE_STREAMING_TASK_CONFLICT);const _o=_r?TS.TRANSCODE:TS.RAW;return this._createLiveStreamingClient(_o).startLiveStreamingTask(_n,_o)}setLiveTranscoding(_n){return this._createLiveStreamingClient(TS.TRANSCODE).setTranscodingConfig(_n)}async stopLiveStreaming(_n){const _r=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(_o=>_o&&_o.hasUrl(_n));if(!_r.length)throw new U_(k_.INVALID_PARAMS,"can not find live streaming url to stop");await uE.all(_r.map(_o=>_o&&_o.stopLiveStreamingTask(_n)))}async addInjectStreamUrl(_n,_r){if(!this._joinInfo)throw new U_(k_.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const _o=this._createLiveStreamingClient(TS.INJECT);_o.setInjectStreamConfig(_r,0),await _o.startLiveStreamingTask(_n,TS.INJECT)}async removeInjectStreamUrl(){var _n;const _r=this._createLiveStreamingClient(TS.INJECT),_o=Array.from(fO(_n=_r.streamingTasks).call(_n)).find(_a=>_a.mode===TS.INJECT);if(!this._joinInfo||!_o)throw new U_(k_.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");await _r.stopLiveStreamingTask(_o.url)}async startChannelMediaRelay(_n){q6(_n),await this._createChannelMediaRelayClient().startChannelMediaRelay(_n)}async updateChannelMediaRelay(_n){q6(_n),await this._createChannelMediaRelayClient().updateChannelMediaRelay(_n)}async stopChannelMediaRelay(){await this._createChannelMediaRelayClient().stopChannelMediaRelay()}sendStreamMessage(_n){let _r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!this._joinInfo)throw new U_(k_.INVALID_OPERATION,"can not send data stream, not joined");if(typeof _n=="string"&&(_n=new TextEncoder().encode(_n)),new Blob([_n]).size>1024)throw new U_(k_.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(PE.DATA_STREAM,{payload:NF(_n)},!_r)}sendMetadata(_n){if(!this._joinInfo)throw new U_(k_.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([_n]).size>1024)throw new U_(k_.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(PE.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:NF(_n)})}async sendCustomReportMessage(_n){if(Array.isArray(_n)||(_n=[_n]),_n.forEach(F7),!this._joinInfo)throw new U_(k_.INVALID_OPERATION,"can not send custom report, not joined");await AE.sendCustomReportMessage(this._joinInfo.sid,_n)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(_n,_r){$S(_r.spatialLayer,"spatialLayer",[0,1,2,3]),$S(_r.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(_n,_r)}catch(_o){throw E_.error("[".concat(this._clientId,"] pick SVC layer failed"),_o.toString()),_o}}_reset(){if(E_.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=dI.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._users.forEach(_n=>{_n._audioTrack&&_n._audioTrack._destroy(),_n._videoTrack&&_n._videoTrack._destroy()}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),this._cloudProxyServerMode==="fallback"&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new RT("client-publish"),this._subscribeMutex=new RT("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch{}}_startSession(_n,_r){const _o=_n||gH();_n?E_.debug("[".concat(this._clientId,"] new Session ").concat(_o)):E_.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(_o)),this._sessionId=_o,this.store.sessionId=_o,_r?AE.sessionInit(this._sessionId,{lts:new Date().getTime(),cname:_r.channel,appid:_r.appId,mode:this._mode}):this._joinInfo?AE.sessionInit(this._sessionId,{lts:new Date().getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this._mode}):this._gateway.joinInfo&&AE.sessionInit(this._sessionId,{lts:new Date().getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this._mode}),this._joinInfo&&(this._joinInfo.sid=_o),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=_o)}async _publishHighStream(_n){if(!this._joinInfo||this._uid===void 0)throw new U_(k_.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new U_(k_.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&J_("FORCE_TURN")&&!J_("TURN_ENABLE_TCP")&&!J_("TURN_ENABLE_UDP"))throw new U_(k_.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");E_.debug("[".concat(this._clientId,"] publish high stream"));try{const _o=await this._p2pChannel.publish(_n,this._isDualStreamEnabled,this._lowStreamParameter),_a=(await _o.next()).value;if(_a){var _r;let _u;try{_u=await this._gateway.publish(this._uid,_a,!0)}catch(_p){if(_p.code!==k_.DISCONNECT_P2P)throw _o.throw(_p),_p}await _o.next(((_r=_u)===null||_r===void 0?void 0:_r.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const _u of _n)_u instanceof yS&&_u._encoderConfig&&this._gateway.setVideoProfile(_u._encoderConfig),!_u.muted&&_u.enabled||await this._p2pChannel.muteLocalTrack(_u)}catch(_o){if(this._p2pChannel.reportPublishEvent(!1,_o==null?void 0:_o.code,_n),(_o==null?void 0:_o.code)===k_.WS_ABORT)return;throw _o}}async _publishLowStream(){if(!this._joinInfo||this._uid===void 0)throw new U_(k_.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new U_(k_.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));E_.debug("[".concat(this._clientId,"] publish low stream"));const _n=this._configDistribute.getLowStreamConfigDistribute();_n&&_n.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&_n.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=_n.bitrate));try{const _o=await this._p2pChannel.publishLowStream(this._lowStreamParameter),_a=(await _o.next()).value;if(_a){var _r;let _u;try{_u=await this._gateway.publish(this._uid,_a,!0)}catch(_p){if(_p.code!==k_.DISCONNECT_P2P)throw _o.throw(_p),_p}_o.next(((_r=_u)===null||_r===void 0?void 0:_r.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(_o){if(this._p2pChannel.reportPublishEvent(!1,_o==null?void 0:_o.code,void 0,!0),(_o==null?void 0:_o.code)===k_.WS_ABORT)return;throw _o}}_createLiveStreamingClient(_n){if(!this._joinInfo||!this._appId)return new U_(k_.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const _r=()=>new O9(this._joinInfo,this._config.websocketRetryConfig||OS,this._config.httpRetryConfig||OS),_o=_a=>{_a.onLiveStreamError=(_u,_p)=>{AE.reportApiInvoke(this._sessionId,{name:wS.ON_LIVE_STREAM_ERROR,options:[_u,_p],tag:nS.TRACER}).onSuccess(),this.emit(r0.LIVE_STREAMING_ERROR,_u,_p)},_a.onLiveStreamWarning=(_u,_p)=>{AE.reportApiInvoke(this._sessionId,{name:wS.ON_LIVE_STREAM_WARNING,options:[_u,_p],tag:nS.TRACER}).onSuccess(),this.emit(r0.LIVE_STREAMING_WARNING,_u,_p)},_a.on(LD.REQUEST_WORKER_MANAGER_LIST,(_u,_p,_f)=>{if(!this._joinInfo)return _f(new U_(k_.INVALID_OPERATION,"can not find join info to get worker manager"));F6(_u,this._joinInfo,this._axiosCancelSource.token,OS).then(_p).catch(_f)})};switch(_n){case TS.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=_r(),_o(this._liveRawStreamingClient)),this._liveRawStreamingClient;case TS.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=_r(),_o(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case TS.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=_r(),this._injectStreamingClient.on(LD.REQUEST_WORKER_MANAGER_LIST,(_a,_u,_p)=>{if(!this._joinInfo)return _p(new U_(k_.INVALID_OPERATION,"can not find join info to get worker manager"));F6(_a,this._joinInfo,this._axiosCancelSource.token,OS).then(_u).catch(_p)}),this._injectStreamingClient.onInjectStatusChange=(_a,_u,_p)=>{this.emit(r0.INJECT_STREAM_STATUS,_a,_u,_p)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){return this._joinInfo?(this._channelMediaRelayClient||(this._channelMediaRelayClient=new k9(this._joinInfo,this._clientId,this._config.websocketRetryConfig||OS,this._config.httpRetryConfig||OS),this._channelMediaRelayClient.on("state",_n=>{_n===jT.RELAY_STATE_FAILURE&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.emit(r0.CHANNEL_MEDIA_RELAY_STATE,_n)}),this._channelMediaRelayClient.on("event",_n=>{this.emit(r0.CHANNEL_MEDIA_RELAY_EVENT,_n)})),this._channelMediaRelayClient):new U_(k_.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw()}_handleGatewayEvents(){this._gateway.on(eS.DISCONNECT_P2P,async()=>{await this._p2pChannel.disconnectForReconnect()}),this._gateway.on(eS.CONNECTION_STATE_CHANGE,(_n,_r,_o)=>{var _a;if(_o===w0.FALLBACK)return;const _u=()=>{this.emit(r0.CONNECTION_STATE_CHANGE,_n,_r,_o)};if(AE.reportApiInvoke(this._sessionId||((_a=this._gateway.joinInfo)===null||_a===void 0?void 0:_a.sid)||null,{name:wS.CONNECTION_STATE_CHANGE,options:[_n,_r,_o],tag:nS.TRACER}).onSuccess(JSON.stringify({cur:_n,prev:_r,reason:_o})),E_.info("[".concat(this._clientId,"] connection state change: ").concat(_r," -> ").concat(_n)),_n==="DISCONNECTED")return this._reset(),void _u();if(_n==="RECONNECTING")this._users.forEach(_f=>{_f._trust_in_room_=!1,_f._trust_audio_enabled_state_=!1,_f._trust_video_enabled_state_=!1,_f._trust_audio_mute_state_=!1,_f._trust_video_mute_state_=!1,_f._trust_audio_stream_added_state_=!1,_f._trust_video_stream_added_state_=!1,_f._audioSSRC=void 0,_f._videoSSRC=void 0,_f._videoOrtc=void 0,_f._audioOrtc=void 0,_f._cname=void 0,_f._rtxSsrcId=void 0}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if(_n==="CONNECTED"){var _p;this._streamFallbackTypeCacheMap.forEach((_f,n_)=>{this._gateway.setStreamFallbackOption(n_,_f).catch(r_=>{E_.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),r_)})}),this._remoteStreamTypeCacheMap.forEach((_f,n_)=>{this._gateway.setRemoteVideoStreamType(n_,_f).catch(r_=>{E_.warning("[".concat(this._clientId,"] auto set remote stream type failed"),r_)})}),this._remoteDefaultVideoStreamType!==void 0&&((_p=this._joinInfo)===null||_p===void 0?void 0:_p.defaultVideoStream)===void 0&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{E_.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(_f=>{E_.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(_f))}),this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._userOfflineTimeout=void 0,this._users.filter(_f=>!_f._trust_in_room_).forEach(_f=>{E_.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(_f.uid)),this._handleUserOffline({uid:_f.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._streamRemovedTimeout=void 0,this._users.forEach(_f=>{_f._trust_audio_mute_state_||(E_.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(_f.uid)),this._handleMuteStream(_f.uid,"audio",!1)),_f._trust_video_mute_state_||(E_.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(_f.uid)),this._handleMuteStream(_f.uid,"video",!1)),_f._trust_audio_enabled_state_||(E_.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(_f.uid)),this._handleSetStreamLocalEnable("audio",_f.uid,!0)),_f._trust_video_enabled_state_||(E_.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(_f.uid)),this._handleSetStreamLocalEnable("video",_f.uid,!0)),_f._trust_video_stream_added_state_||(E_.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(_f.uid)),this._handleResetAddStream(_f,"video")),_f._trust_audio_stream_added_state_||(E_.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(_f.uid)),this._handleResetAddStream(_f,"audio")),_f._video_added_||_f._audio_added_||(E_.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(_f.uid)),this._handleRemoveStream({uid:_f.uid,uint_id:_f._uintid}))}))},1e3)}_u()}),this._gateway.on(eS.REQUEST_NEW_GATEWAY_LIST,(_n,_r)=>{if(!this._joinInfo)return _r(new U_(k_.UNEXPECTED_ERROR,"can not recover, no join info"));IH(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||OS,this.store).then(_o=>{this._joinInfo&&(this._joinInfo.apResponse=_o.gatewayInfo.res,this._joinInfo.gatewayAddrs=_o.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=_o.gatewayInfo.uni_lbs_ip),_n(_o.gatewayInfo.gatewayAddrs.map(_a=>{if(this._joinInfo&&this._joinInfo.proxyServer){const _u=_a.address.split(":");return"wss://".concat(this._joinInfo.proxyServer,"/ws/?h=").concat(_u[0],"&p=").concat(_u[1])}return"wss://".concat(_a.address)}))}).catch(_r)}),this._gateway.on(eS.NETWORK_QUALITY,_n=>{this._networkQualitySensitivity==="normal"&&this.emit(r0.NETWORK_QUALITY,_n)}),this._gateway.on(eS.STREAM_TYPE_CHANGE,(_n,_r)=>{this.emit(r0.STREAM_TYPE_CHANGED,_n,_r),AE.reportApiInvoke(this._sessionId,{name:wS.STREAM_TYPE_CHANGE,options:[_n,_r],tag:nS.TRACER}).onSuccess(JSON.stringify({uid:_n,streamType:_r}))}),this._gateway.on(eS.IS_P2P_DISCONNECTED,_n=>{this._p2pChannel.isP2PDisconnected()?_n(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?_n(!1):_n(!0)}),this._gateway.on(eS.NEED_RENEW_SESSION,()=>{this._startSession()}),this._gateway.on(eS.REQUEST_P2P_CONNECTION_PARAMS,async(_n,_r,_o)=>{try{_r(await this._p2pChannel.startP2PConnection(_n))}catch(_a){_o(_a)}}),this._gateway.on(eS.JOIN_RESPONSE,(_n,_r)=>{const{dtlsParameters:_o,iceParameters:_a,candidates:_u,rtpCapabilities:_p,setup:_f,cname:n_}=f8(_n.ortc,_r);this._p2pChannel.connect(_a,_o,_u,_p,_f,n_)}),this._gateway.on(eS.REQUEST_DC_CONNECTION_PARAMS,_n=>{_n(this._p2pChannel.getEstablishParams())}),this._gateway.on(eS.RESET_SIGNAL,_n=>{this._p2pChannel.resetConnection(_n),this._handleGatewaySignalEvents()}),this._gateway.on(eS.DATACHANNEL_FAILBACK,()=>{this._joinGateway()}),this._gateway.on(eS.DATACHANNEL_PRECONNECT,async(_n,_r,_o,_a)=>{var _u,_p,_f,n_,r_,o_;await this._p2pChannel.startP2PConnection({turnServer:(_u=this._joinInfo)===null||_u===void 0?void 0:_u.turnServer},!0);const s_=function(u_,g_){let w_;return g_&&g_.ip&&typeof g_.port=="number"?(w_=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:g_.ip,port:g_.port.toString(),type:"host",extension:{}}],E_.debug("Using remote candidate from AP ".concat(g_.ip,":").concat(g_.port)),g_.ip6&&(w_.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:g_.ip6,port:g_.port.toString(),type:"host",extension:{}}),E_.debug("Using IPV6 remote candidate from AP ".concat(g_.ip6,":").concat(g_.port)))):w_=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:u_.ip,port:u_.port.toString(),type:"host",extension:{}}],w_}(_n,_r);return this._p2pChannel.preConnect({iceUfrag:"".concat((_p=this._joinInfo)===null||_p===void 0?void 0:_p.apResponse.cid,"_").concat((_f=this._joinInfo)===null||_f===void 0?void 0:_f.apResponse.cert),icePwd:"".concat((n_=this._joinInfo)===null||n_===void 0?void 0:n_.apResponse.cid,"_").concat((r_=this._joinInfo)===null||r_===void 0?void 0:r_.apResponse.cert)},{fingerprints:[{hashFunction:"sha-256",fingerprint:(o_=J_("FINGERPRINT"))!==null&&o_!==void 0?o_:_n.fingerprint}]},s_,{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},"active","o/i14u9pJrxRKAsu").then(_o).catch(_a)})}_handleGatewaySignalEvents(){this._gateway.signal.on(XE.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(XE.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(XE.ON_ADD_AUDIO_STREAM,_n=>this._handleAddAudioOrVideoStream("audio",_n.uid,_n.ssrcId,_n.cname,_n.uint_id,_n.ortc)),this._gateway.signal.on(XE.ON_ADD_VIDEO_STREAM,_n=>this._handleAddAudioOrVideoStream("video",_n.uid,_n.ssrcId,_n.cname,_n.uint_id,_n.ortc,_n.rtxSsrcId)),this._gateway.signal.on(XE.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(XE.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(XE.MUTE_AUDIO,_n=>this._handleMuteStream(_n.uid,"audio",!0)),this._gateway.signal.on(XE.UNMUTE_AUDIO,_n=>this._handleMuteStream(_n.uid,"audio",!1)),this._gateway.signal.on(XE.MUTE_VIDEO,_n=>this._handleMuteStream(_n.uid,"video",!0)),this._gateway.signal.on(XE.UNMUTE_VIDEO,_n=>this._handleMuteStream(_n.uid,"video",!1)),this._gateway.signal.on(XE.RECEIVE_METADATA,_n=>{const _r=yH(_n.metadata);this.emit(r0.RECEIVE_METADATA,_n.uid,_r)}),this._gateway.signal.on(XE.ON_DATA_STREAM,_n=>{_n.seq&&delete _n.seq,_n.payload=yH(_n.payload),this.emit(r0.STREAM_MESSAGE,_n.uid,_n.payload),this.onStreamMessage&&this.onStreamMessage(_n)}),this._gateway.signal.on(XE.ON_CRYPT_ERROR,()=>{bU(()=>{E_.warning("[".concat(this._clientId,"] on crypt error")),this.emit(r0.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(XE.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(XE.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{E_.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0),this.emit(r0.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(XE.ON_STREAM_FALLBACK_UPDATE,_n=>{E_.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(_n.stream_id,", attr: ").concat(_n.stream_type)),this.emit(r0.STREAM_FALLBACK,_n.stream_id,_n.stream_type===1?"fallback":"recover")}),this._gateway.signal.on(XE.ON_PUBLISH_STREAM,_n=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:_n.proxy})),E_.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(_n))))}),this._gateway.signal.on(XE.ENABLE_LOCAL_VIDEO,_n=>{this._handleSetStreamLocalEnable("video",_n.uid,!0)}),this._gateway.signal.on(XE.DISABLE_LOCAL_VIDEO,_n=>{this._handleSetStreamLocalEnable("video",_n.uid,!1)}),this._gateway.signal.on(CE.REQUEST_TIMEOUT,(_n,_r)=>{if(this._joinInfo)switch(_n){case PE.PUBLISH:{if(!_r)return;const _f=(_r=_r).ortc;if(_f){var _o,_a,_u,_p;const n_=_f.some(s_=>{let{stream_type:u_}=s_;return u_===RS.Audio}),r_=_f.some(s_=>{let{stream_type:u_}=s_;return u_!==RS.Audio}),o_=_f.some(s_=>{let{stream_type:u_}=s_;return u_===RS.Screen||u_===RS.ScreenLow});_r.state==="offer"&&AE.publish(this._joinInfo.sid,{eventElapse:YR.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:k_.TIMEOUT,audio:n_,video:r_,p2pid:_r.p2p_id,publishRequestid:this.store.pubId,screenshare:o_,audioName:n_?(_o=_f.find(s_=>{let{stream_type:u_}=s_;return u_===RS.Audio}))===null||_o===void 0||(_a=_o.ssrcs[0])===null||_a===void 0?void 0:_a.ssrcId.toString():void 0,videoName:r_?(_u=_f.find(s_=>{let{stream_type:u_}=s_;return u_!==RS.Audio}))===null||_u===void 0||(_p=_u.ssrcs[0])===null||_p===void 0?void 0:_p.ssrcId.toString():void 0})}break}case PE.SUBSCRIBE:(_r=_r)&&AE.subscribe(this._joinInfo.sid,{succ:!1,ec:k_.TIMEOUT,audio:_r.stream_type===WE.AUDIO,video:_r.stream_type===WE.VIDEO,peerid:_r.stream_id,subscribeRequestid:_r.ssrcId,p2pid:this.store.p2pId,eventElapse:YR.measureFromSubscribeStart(this.store.clientId,_r.ssrcId)})}}),this._gateway.signal.on(XE.ON_P2P_OK,_n=>{this.uid,this._uid}),this._gateway.signal.on(XE.ON_PUBLISHED_USER_LIST,_n=>{if(_n==null||!_n.users)return;J_("BLOCK_LOCAL_CLIENT")&&(_n.users=_n.users.filter(_a=>!pL(_a.audio_ssrc,this.channelName)));const _r=[],_o=[];for(const _a of _n.users){let _u=this._users.find(o_=>o_.uid===_a.stream_id);_u?_u._trust_in_room_=!0:(_u=new OH(_a.stream_id,_a.stream_id),this._users.push(_u),this.getListeners(r0.PUBLISHED_USER_LIST).length===0&&(E_.debug("[".concat(this._clientId,"] user online"),_a.stream_id),this.emit(r0.USER_JOINED,_u)));const _p=_S.Audio&_a.stream_type,_f=(_S.Video|_S.LwoVideo)&_a.stream_type,n_=_p&&_u.hasAudio,r_=_f&&_u.hasVideo;_f&&(_u._trust_video_stream_added_state_=!0,_u._video_added_=!0,_u._videoSSRC=_a.video_ssrc),_p&&(_u._trust_audio_stream_added_state_=!0,_u._audio_added_=!0,_u._audioSSRC=_a.audio_ssrc),_p&&!n_&&this.getListeners(r0.PUBLISHED_USER_LIST).length===0&&(E_.info("[".concat(this._clientId,"] remote user ").concat(_u.uid," published audio")),this.emit(r0.USER_PUBLISHED,_u,"audio")),_f&&!r_&&this.getListeners(r0.PUBLISHED_USER_LIST).length===0&&(E_.info("[".concat(this._clientId,"] remote user ").concat(_u.uid," published video")),this.emit(r0.USER_PUBLISHED,_u,"video")),(_p&&!n_||_f&&!r_)&&_r.push(_u),_f&&this._p2pChannel.hasPendingRemoteMedia(_u,"video")&&_o.push({user:_u,mediaType:"video"}),_p&&this._p2pChannel.hasPendingRemoteMedia(_u,"audio")&&_o.push({user:_u,mediaType:"audio"})}_o.length>0&&(E_.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(_o.map(_a=>"user: ".concat(_a.user.uid,", mediaType: ").concat(_a.mediaType)).join("; ")," ")),this.massSubscribe(_o).catch(_a=>{E_.error("[".concat(this._clientId,"] mass resubscribe error"),_a.toString())})),this.getListeners(r0.PUBLISHED_USER_LIST).length>0?(E_.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(_r.map(_a=>_a.uid).join(", "))),this.emit(r0.PUBLISHED_USER_LIST,_r)):E_.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(_r.map(_a=>_a.uid).join(", ")))})}_handleP2PChannelEvents(){this._p2pChannel.on(_0.RequestMuteLocal,async(_n,_r,_o)=>{if(this._joinInfo)try{await this._gateway.muteLocal(_n,this._joinInfo.stringUid||this._joinInfo.uid),_r()}catch(_a){_a.code===k_.DISCONNECT_P2P?_r():_o(_a)}else _r()}),this._p2pChannel.on(_0.RequestUnmuteLocal,async(_n,_r,_o)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(_n,this._joinInfo.stringUid||this._joinInfo.uid),_r()}catch(_a){_a.code===k_.DISCONNECT_P2P?_r():_o(_a)}else _r()}),this._p2pChannel.on(_0.RequestRePublish,(_n,_r,_o)=>{this.publish(_n,!1).then(_r).catch(_o)}),this._p2pChannel.on(_0.RequestReSubscribe,async(_n,_r,_o)=>{try{for(const{user:_a,kind:_u}of _n)_u===WE.VIDEO?await this.subscribe(_a,"video"):await this.subscribe(_a,"audio");_r()}catch(_a){_o(_a)}}),this._p2pChannel.on(_0.RequestUploadStats,(_n,_r)=>{this._gateway.uploadStats(_n,_r)}),this._p2pChannel.on(_0.MediaReconnectStart,_n=>{this.emit(r0.MEDIA_RECONNECT_START,_n)}),this._p2pChannel.on(_0.MediaReconnectEnd,_n=>{this.emit(r0.MEDIA_RECONNECT_END,_n)}),this._p2pChannel.on(_0.NeedSignalRTT,_n=>{_n(this._gateway.getSignalRTT())}),this._p2pChannel.on(_0.RequestRestartICE,async()=>{const _n=await this._p2pChannel.restartICE(),_r=await _n.next();if(_r.done)return;const _o=_r.value;let _a;try{_a=await this._gateway.restartICE({iceParameters:_o})}catch(_p){return void _n.throw(_p)}const{iceParameters:_u}=function(_p){const _f=_p.iceParameters;return{iceParameters:{iceUfrag:_f.iceUfrag,icePwd:_f.icePwd}}}(_a);await _n.next({remoteIceParameters:_u})}),this._p2pChannel.on(_0.RequestReconnect,async()=>{this._gateway.reconnect()}),this._p2pChannel.on(_0.RequestReconnectPC,async()=>{var _n;const{iceParameters:_r,dtlsParameters:_o,rtpCapabilities:_a}=await this._p2pChannel.startP2PConnection({turnServer:(_n=this._joinInfo)===null||_n===void 0?void 0:_n.turnServer}),{gatewayEstablishParams:_u,gatewayAddress:_p}=await this._gateway.reconnectPC({iceParameters:_r,dtlsParameters:_o,rtpCapabilities:_a}),{dtlsParameters:_f,iceParameters:n_,candidates:r_,rtpCapabilities:o_,setup:s_,cname:u_}=f8(_u,_p);await this._p2pChannel.connect(n_,_f,r_,o_,s_,u_),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()}),this._p2pChannel.on(_0.RequestUnpublishForReconnectPC,async(_n,_r,_o)=>{this._joinInfo&&this._uid!==void 0?(await this._gateway.unpublish(_n,this._uid),_r()):_o()}),this._p2pChannel.on(_0.P2PLost,()=>{this.emit(r0.P2P_LOST,this.store.uid)}),this._p2pChannel.on(_0.UpdateVideoEncoder,_n=>{_n._encoderConfig&&this._gateway.setVideoProfile(_n._encoderConfig)}),this._p2pChannel.on(_0.ConnectionTypeChange,_n=>{this.emit(r0.IS_USING_CLOUD_PROXY,_n)}),this._p2pChannel.on(_0.RequestLowStreamParameter,_n=>{_n(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})}),this._p2pChannel.on(_0.QueryClientConnectionState,_n=>{_n(this.connectionState)})}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(_n){if(this.connectionState!=="CONNECTED"||!this._joinInfo)throw new U_(k_.INVALID_OPERATION,"[".concat(this._clientId,"] Client did not join channel"));if(this._inspect)throw new U_(k_.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));if(!_n)throw new U_(k_.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig is necessary"));if(!_n.inspectType||!Array.isArray(_n.inspectType))throw new U_(k_.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.inspectType is necessary and is an instance of Array."));{const _r=[...new Set(_n.inspectType)];_r.forEach(_o=>{if(!["supervise","moderation"].includes(_o))throw new U_(k_.INVALID_PARAMS,"[".concat(this._clientId,"] ").concat(_o," is not a valid inspect type."))}),_n.inspectType=_r}if(_n&&_n.extraInfo&&_n.extraInfo.length>1024)throw new U_(k_.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.extraInfo length cannot exceed 1024 bytes"));try{const _r=new KF(_n);this._inspect=_r,this.handleVideoInspectEvents(this._inspect),await _r.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},OS)}catch(_r){throw Array.isArray(_r)?_r[0]:_r}}async disableContentInspect(){if(!this._inspect)throw new U_(k_.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(_n){throw Array.isArray(_n)?_n[0]:_n}}handleVideoInspectEvents(_n){_n.on(IS.CONNECTION_STATE_CHANGE,(_r,_o)=>{switch(this.emit(r0.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,_r,_o),_o){case SR.CONNECTED:if(this.connectionState!=="CONNECTED")return void this.emit(r0.CONTENT_INSPECT_ERROR,new U_(k_.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));_n.inspectImage()}}),_n.on(IS.INSPECT_RESULT,(_r,_o)=>{var _a;if((_o==null?void 0:_o.code)===k_.INVALID_OPERATION&&this.connectionState==="DISCONNECTED")return E_.debug("Stop inspect content because that has left channel"),this==null||(_a=this._inspect)===null||_a===void 0||_a.close(),void(this._inspect=void 0);this.emit(r0.CONTENT_INSPECT_RESULT,_r,_o)}),_n.on(IS.CLIENT_LOCAL_VIDEO_TRACK,_r=>{_r(this.localTracks.filter(_o=>_o.trackMediaType==="video")[0])})}getJoinChannelServiceRecords(){return E_.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(_n){_U(_n,"enabled"),P0("ENABLE_PUBLISH_AUDIO_FILTER",_n),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(_n)}_handleResetAddStream(_n,_r){switch(_r){case"audio":_n._audio_added_=!1,_n._trust_audio_stream_added_state_=!0;break;case"video":_n._video_added_=!1,_n._trust_video_stream_added_state_=!0}}}).prototype,"leave",[aK],Object.getOwnPropertyDescriptor(EE.prototype,"leave"),EE.prototype),oE(EE.prototype,"publish",[cK],Object.getOwnPropertyDescriptor(EE.prototype,"publish"),EE.prototype),oE(EE.prototype,"unpublish",[uK],Object.getOwnPropertyDescriptor(EE.prototype,"unpublish"),EE.prototype),oE(EE.prototype,"subscribe",[lK],Object.getOwnPropertyDescriptor(EE.prototype,"subscribe"),EE.prototype),oE(EE.prototype,"massSubscribe",[dK],Object.getOwnPropertyDescriptor(EE.prototype,"massSubscribe"),EE.prototype),oE(EE.prototype,"unsubscribe",[hK],Object.getOwnPropertyDescriptor(EE.prototype,"unsubscribe"),EE.prototype),oE(EE.prototype,"massUnsubscribe",[pK],Object.getOwnPropertyDescriptor(EE.prototype,"massUnsubscribe"),EE.prototype),oE(EE.prototype,"setLowStreamParameter",[fK],Object.getOwnPropertyDescriptor(EE.prototype,"setLowStreamParameter"),EE.prototype),oE(EE.prototype,"enableDualStream",[mK],Object.getOwnPropertyDescriptor(EE.prototype,"enableDualStream"),EE.prototype),oE(EE.prototype,"disableDualStream",[_K],Object.getOwnPropertyDescriptor(EE.prototype,"disableDualStream"),EE.prototype),oE(EE.prototype,"setClientRole",[gK],Object.getOwnPropertyDescriptor(EE.prototype,"setClientRole"),EE.prototype),oE(EE.prototype,"setProxyServer",[vK],Object.getOwnPropertyDescriptor(EE.prototype,"setProxyServer"),EE.prototype),oE(EE.prototype,"setTurnServer",[yK],Object.getOwnPropertyDescriptor(EE.prototype,"setTurnServer"),EE.prototype),oE(EE.prototype,"setLicense",[EK],Object.getOwnPropertyDescriptor(EE.prototype,"setLicense"),EE.prototype),oE(EE.prototype,"startProxyServer",[bK],Object.getOwnPropertyDescriptor(EE.prototype,"startProxyServer"),EE.prototype),oE(EE.prototype,"stopProxyServer",[SK],Object.getOwnPropertyDescriptor(EE.prototype,"stopProxyServer"),EE.prototype),oE(EE.prototype,"setLocalAccessPointsV2",[wK],Object.getOwnPropertyDescriptor(EE.prototype,"setLocalAccessPointsV2"),EE.prototype),oE(EE.prototype,"setLocalAccessPoints",[TK],Object.getOwnPropertyDescriptor(EE.prototype,"setLocalAccessPoints"),EE.prototype),oE(EE.prototype,"setRemoteDefaultVideoStreamType",[RK],Object.getOwnPropertyDescriptor(EE.prototype,"setRemoteDefaultVideoStreamType"),EE.prototype),oE(EE.prototype,"setRemoteVideoStreamType",[IK],Object.getOwnPropertyDescriptor(EE.prototype,"setRemoteVideoStreamType"),EE.prototype),oE(EE.prototype,"setStreamFallbackOption",[CK],Object.getOwnPropertyDescriptor(EE.prototype,"setStreamFallbackOption"),EE.prototype),oE(EE.prototype,"setEncryptionConfig",[AK],Object.getOwnPropertyDescriptor(EE.prototype,"setEncryptionConfig"),EE.prototype),oE(EE.prototype,"renewToken",[OK],Object.getOwnPropertyDescriptor(EE.prototype,"renewToken"),EE.prototype),oE(EE.prototype,"enableAudioVolumeIndicator",[NK],Object.getOwnPropertyDescriptor(EE.prototype,"enableAudioVolumeIndicator"),EE.prototype),oE(EE.prototype,"startLiveStreaming",[kK],Object.getOwnPropertyDescriptor(EE.prototype,"startLiveStreaming"),EE.prototype),oE(EE.prototype,"setLiveTranscoding",[xK],Object.getOwnPropertyDescriptor(EE.prototype,"setLiveTranscoding"),EE.prototype),oE(EE.prototype,"stopLiveStreaming",[LK],Object.getOwnPropertyDescriptor(EE.prototype,"stopLiveStreaming"),EE.prototype),oE(EE.prototype,"addInjectStreamUrl",[MK],Object.getOwnPropertyDescriptor(EE.prototype,"addInjectStreamUrl"),EE.prototype),oE(EE.prototype,"removeInjectStreamUrl",[DK],Object.getOwnPropertyDescriptor(EE.prototype,"removeInjectStreamUrl"),EE.prototype),oE(EE.prototype,"startChannelMediaRelay",[PK],Object.getOwnPropertyDescriptor(EE.prototype,"startChannelMediaRelay"),EE.prototype),oE(EE.prototype,"updateChannelMediaRelay",[jK],Object.getOwnPropertyDescriptor(EE.prototype,"updateChannelMediaRelay"),EE.prototype),oE(EE.prototype,"stopChannelMediaRelay",[UK],Object.getOwnPropertyDescriptor(EE.prototype,"stopChannelMediaRelay"),EE.prototype),oE(EE.prototype,"sendCustomReportMessage",[$K],Object.getOwnPropertyDescriptor(EE.prototype,"sendCustomReportMessage"),EE.prototype),oE(EE.prototype,"pickSVCLayer",[FK],Object.getOwnPropertyDescriptor(EE.prototype,"pickSVCLayer"),EE.prototype),oE(EE.prototype,"enableContentInspect",[YK],Object.getOwnPropertyDescriptor(EE.prototype,"enableContentInspect"),EE.prototype),oE(EE.prototype,"disableContentInspect",[BK],Object.getOwnPropertyDescriptor(EE.prototype,"disableContentInspect"),EE.prototype),oE(EE.prototype,"getJoinChannelServiceRecords",[VK],Object.getOwnPropertyDescriptor(EE.prototype,"getJoinChannelServiceRecords"),EE.prototype),oE(EE.prototype,"setPublishAudioFilterEnabled",[HK],Object.getOwnPropertyDescriptor(EE.prototype,"setPublishAudioFilterEnabled"),EE.prototype),EE);class WQ extends lG{set currentState(_r){_r!==this._currentState&&(this._currentState=_r,this.emit(KT.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(_r){let _o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),p_(this,"audioBuffer",void 0),p_(this,"sourceNode",void 0),p_(this,"startPlayTime",0),p_(this,"startPlayOffset",0),p_(this,"pausePlayTime",0),p_(this,"options",void 0),p_(this,"currentLoopCount",0),p_(this,"_currentState","stopped"),this.audioBuffer=_r,this.options=_o,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer.duration}get currentTime(){return this.currentState==="stopped"?0:this.currentState==="paused"?this.pausePlayTime:(this.context.currentTime-this.startPlayTime+this.startPlayOffset)%this.audioBuffer.duration}updateOptions(_r){this.currentState==="stopped"?(this.options=_r,this.startPlayOffset=this.options.startPlayTime||0):E_.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&this.currentState==="playing"&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(_r){this.sourceNode&&(this.sourceNode.onended=null,this.currentState==="playing"&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),this.currentState==="playing"?(this.startPlayOffset=_r,this.startSourceNode()):this.currentState==="paused"&&(this.pausePlayTime=_r))}resumeProcessAudioBuffer(){this.currentState==="paused"&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch{}this.reset()}}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const _r=this.context.createBufferSource();return _r.buffer=this.audioBuffer,_r.loop=!!this.options.loop,_r.connect(this.outputNode),_r}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const qK=new Map;async function zQ(_n,_r){let _o=null;if(typeof _n=="string"){const _u=qK.get(_n);if(_u)return E_.debug("use cached audio resource: ",_n),_u;try{_o=(await hO(()=>dI.get(_n,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(_p){throw new U_(k_.FETCH_AUDIO_FILE_FAILED,_p.toString())}}else _o=await new uE((_p,_f)=>{const n_=new FileReader;n_.onload=r_=>{r_.target?_p(r_.target.result):_f(new U_(k_.READ_LOCAL_AUDIO_FILE_ERROR))},n_.onerror=()=>{_f(new U_(k_.READ_LOCAL_AUDIO_FILE_ERROR))},n_.readAsArrayBuffer(_n)});const _a=await function(_u){const _p=PD();return new uE((_f,n_)=>{_p.decodeAudioData(_u,r_=>{_f(r_)},r_=>{n_(new U_(k_.DECODE_AUDIO_FILE_FAILED,r_.toString()))})})}(_o);return typeof _n=="string"&&_r&&qK.set(_n,_a),_a}function WK(_n,_r){var _o=Object.keys(_n);if(Object.getOwnPropertySymbols){var _a=Object.getOwnPropertySymbols(_n);_r&&(_a=_a.filter(function(_u){return Object.getOwnPropertyDescriptor(_n,_u).enumerable})),_o.push.apply(_o,_a)}return _o}function JF(_n){for(var _r=1;_r<arguments.length;_r++){var _o=arguments[_r]!=null?arguments[_r]:{};_r%2?WK(Object(_o),!0).forEach(function(_a){p_(_n,_a,_o[_a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_n,Object.getOwnPropertyDescriptors(_o)):WK(Object(_o)).forEach(function(_a){Object.defineProperty(_n,_a,Object.getOwnPropertyDescriptor(_o,_a))})}return _n}function l5(_n,_r,_o,_a){_o.optimizationMode&&(_a&&_a.width&&_a.height?(_o.encoderConfig=JF(JF({},_a),{},{bitrateMin:_a.bitrateMin,bitrateMax:_a.bitrateMax}),_o.optimizationMode!=="motion"&&_o.optimizationMode!=="detail"||(_r.contentHint=_o.optimizationMode,_r.contentHint===_o.optimizationMode?E_.debug("[".concat(_n,"] set content hint to"),_o.optimizationMode):E_.debug("[".concat(_n,"] set content hint failed")))):E_.warning("[".concat(_n,"] can not apply optimization mode bitrate config, no encoderConfig")))}const KQ=I0().name;function JQ(_n,_r,_o,_a){let _u,_p=0,_f=null;return new uE((n_,r_)=>{setTimeout(()=>{_u&&(_u(),n_(_p))},_r),_u=cG(()=>{(function(){_p>_a&&_u&&(_u(),n_(_p));const o_=_o.getContext("2d");if(!o_){const g_=new U_(k_.UNEXPECTED_ERROR,"can not get canvas 2d context.");return E_.error(g_.toString()),void r_(g_)}o_.drawImage(_n,0,0,160,120);const s_=o_.getImageData(0,0,_o.width,_o.height),u_=Math.floor(s_.data.length/3);if(_f){for(let g_=0;g_<u_;g_+=3)if(s_.data[g_]!==_f[g_])return _p+=1,void(_f=s_.data);_f=s_.data}else _f=s_.data})()},30)})}class $U{constructor(_r,_o){p_(this,"id",0),p_(this,"element",void 0),p_(this,"peerPair",void 0),p_(this,"context",void 0),p_(this,"audioPlayerElement",void 0),p_(this,"audioTrack",void 0),$U.count+=1,this.id=$U.count,this.element=_r,this.context=_o}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=_r=>{const _o=document.createElement("audio");_o.srcObject=new MediaStream([_r.track]),_o.play(),this.audioPlayerElement=_o}}async switchSdp(){if(!this.peerPair)return;const _r=async(_a,_u)=>{const _p=_u==="offer"?await _a.createOffer():await _a.createAnswer();return await _a.setLocalDescription(_p),_a.iceGatheringState==="complete"?_a.localDescription:new uE(_f=>{_a.onicegatheringstatechange=()=>{_a.iceGatheringState==="complete"&&_f(_a.localDescription)}})},_o=async(_a,_u)=>await _a.setRemoteDescription(_u);try{const _a=await _r(this.peerPair[0],"offer");await _o(this.peerPair[1],_a);const _u=await _r(this.peerPair[1],"answer");await _o(this.peerPair[0],_u)}catch(_a){throw new U_(k_.LOCAL_AEC_ERROR,_a.toString()).print()}}async getTracksFromMediaElement(_r){if(this.audioTrack)return this.audioTrack;let _o;try{_r instanceof HTMLVideoElement&&(_r.captureStream?_r.captureStream():_r.mozCaptureStream()),_o=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(_r).connect(_o)}catch(_u){throw new U_(k_.LOCAL_AEC_ERROR,_u.toString()).print()}if(!_o)throw new U_(k_.LOCAL_AEC_ERROR,"no dest node when local aec").print();const _a=_o.stream.getAudioTracks()[0];return this.audioTrack=_a,_a}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const _r=this.element,_o=await this.getTracksFromMediaElement(_r);this.peerPair&&this.peerPair[0].addTrack(_o),await this.switchSdp()}close(){E_.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(_r=>{_r.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}}var zK,QF;p_($U,"count",0);const QQ=window.AudioContext||window.webkitAudioContext,XQ=new(zK=ME({report:AE}),oE((QF=class{constructor(){p_(this,"units",[]),p_(this,"context",void 0)}processExternalMediaAEC(_n){if(!this._doesEnvironmentNeedAEC())return E_.debug("the system does not need to process local aec"),-1;this.context||(this.context=new QQ);let _r=this.units.find(_o=>_o&&_o.getElement()===_n);return _r||(_r=new $U(_n,this.context),this.units.push(_r)),_r.startEchoCancellation(),E_.debug("start processing local audio echo cancellation, id is",_r.id),_r.id}_doesEnvironmentNeedAEC(){return I0().name!==S0.SAFARI}}).prototype,"processExternalMediaAEC",[zK],Object.getOwnPropertyDescriptor(QF.prototype,"processExternalMediaAEC"),QF.prototype),QF);P0("PROCESS_ID","process-".concat(X0(8,""),"-").concat(X0(4,""),"-").concat(X0(4,""),"-").concat(X0(4,""),"-").concat(X0(12,""))),function(){const _n=I0();TT.getDisplayMedia=function(_r){return!!(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)}(),TT.getStreamFromExtension=_n.name===S0.CHROME&&Number(_n.version)>34,TT.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const _r=new RTCPeerConnection;let _o=!1;try{_r.addTransceiver("audio"),_o=!0}catch{}return _r.close(),_o}(),TT.supportMinBitrate=_n.name===S0.CHROME||_n.name===S0.EDGE,TT.supportSetRtpSenderParameters=function(){const _r=I0();return!window.RTCRtpSender||!window.RTCRtpSender.prototype.setParameters||!window.RTCRtpSender.prototype.getParameters?!1:!!lO()||!(!rT()&&!vD())||_r.name===S0.FIREFOX&&Number(_r.version)>=64}(),_n.name===S0.SAFARI&&(Number(_n.version)>=14?TT.supportDualStream=!0:TT.supportDualStream=!1),TT.webAudioMediaStreamDest=function(){const _r=I0();return!(_r.name===S0.SAFARI&&Number(_r.version)<12)}(),TT.supportReplaceTrack=function(){return window.RTCRtpSender?typeof RTCRtpSender.prototype.replaceTrack=="function":!1}(),TT.supportWebGL=typeof WebGLRenderingContext<"u",TT.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,lO()||(TT.webAudioWithAEC=!0),TT.supportShareAudio=function(){const _r=I0();return(_r.os===zS.WIN_10||_r.os===zS.WIN_81||_r.os===zS.WIN_7||_r.os===zS.LINUX||_r.os===zS.MAC_OS)&&_r.name===S0.CHROME&&Number(_r.version)>=74}(),TT.supportDualStreamEncoding=function(){const _r=I0();return J_("DISABLE_WEBAUDIO")?!0:_r.name==="Safari"&&Number(_r.version)>=14||!!(_r.name==="Chrome"&&/Windows/i.test(_r.os||"")&&Number(_r.version)>=100&&J_("CHROME_DUAL_STREAM_USE_ENCODING"))}(),TT.supportDataChannel=function(){return!!(yD(76)||function(_r){const _o=I0();return!(_o.name!==S0.FIREFOX||!_o.osVersion)&&Number(_o.version)>=_r}(68)||function(_r){const _o=I0();return!(_o.name!==S0.SAFARI||!_o.osVersion)&&Number(_o.version)>=_r}(14))}(),TT.supportPCSetConfiguration=!tS()&&!!RTCPeerConnection.prototype.setConfiguration,E_.info("browser compatibility",JSON.stringify(TT),JSON.stringify(_n))}(),function(){let _n;try{_n=window.localStorage.getItem("websdk_ng_global_parameter")}catch(_r){return void E_.error("Error loading sdk config",_r.message)}if(_n)try{const _r=JSON.parse(window.atob(_n)),_o=Date.now();E_.debug("Loading global parameters from cache",_r),Object.keys(_r).forEach(_a=>{if(Object.prototype.hasOwnProperty.call(WT,_a)){const{value:_u,expires:_p}=_r[_a];if(_p&&_p<=_o)return;dL[_a]=_u,WT[_a]=_u}})}catch(_r){E_.error("Error loading mutableParamsCache: ".concat(_n),_r.message)}}(),Array.isArray(dL.AREAS)&&dL.AREAS.length>0&&SH(dL.AREAS,!0);const $T={__CLIENT_LIST__:hL,__TRACK_LIST__:mU,VERSION:$R,BUILD:L4,setParameter:(_n,_r,_o)=>{E_.debug("setParameter key:".concat(_n,", value:").concat(JSON.stringify(_r))),P0(_n,_r,_o)},getParameter:J_,getSupportedCodec:async function(){let _n={audio:[],video:[]};try{let _r=new RTCPeerConnection;_r.addTransceiver("video",{direction:"recvonly"}),_r.addTransceiver("audio",{direction:"recvonly"});const _o=(await _r.createOffer()).sdp;if(!_o)return _n;_r.close(),_r=null,_n=function(_a){const _u={video:[],audio:[]};return _a.match(/ VP8/i)&&_u.video.push("VP8"),_a.match(/ VP9/i)&&_u.video.push("VP9"),_a.match(/ AV1/i)&&_u.video.push("AV1"),_a.match(/ H264/i)&&_u.video.push("H264"),_a.match(/ opus/i)&&_u.audio.push("OPUS"),_a.match(/ PCMU/i)&&_u.audio.push("PCMU"),_a.match(/ PCMA/i)&&_u.audio.push("PCMA"),_a.match(/ G722/i)&&_u.audio.push("G722"),_u}(_o)}catch(_r){throw new U_(k_.CREATE_OFFER_FAILED,_r.toString&&_r.toString()).print()}return _n},checkSystemRequirements:function(){const _n=AE.reportApiInvoke(null,{name:wS.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:nS.TRACER});let _r=!1;try{const _p=window.RTCPeerConnection,_f=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,n_=window.WebSocket;_r=!!(_p&&_f&&n_)}catch(_p){return E_.error("check system requirement failed: ",_p),!1}let _o=!1;const _a=I0();_a.name===S0.CHROME&&Number(_a.version)>=58&&(!$3()||o4())&&(_o=!0),_a.name===S0.FIREFOX&&Number(_a.version)>=56&&(_o=!0),_a.name===S0.OPERA&&Number(_a.version)>=45&&(_o=!0),_a.name===S0.SAFARI&&Number(_a.version)>=11&&(_o=!0),(q3()||I0().name===S0.QQ)&&(_o=!0),E_.debug("checkSystemRequirements, api:",_r,"browser",_o);const _u=_r&&_o;return _n.onSuccess(_u),_u},getDevices:function(_n){return IR.enumerateDevices(!0,!0,_n)},getMicrophones:function(_n){return IR.getRecordingDevices(_n)},getCameras:function(_n){return IR.getCamerasDevices(_n)},getElectronScreenSources:hG,getPlaybackDevices:function(_n){return IR.getSpeakers(_n)},createClient:function(){let _n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const _r=AE.reportApiInvoke(null,{name:wS.CREATE_CLIENT,options:[_n],tag:nS.TRACER});try{B7(_n)}catch(_o){throw _r.onError(_o),_o}return _n.audioCodec===void 0&&(_n.audioCodec="opus"),_r.onSuccess(),new qQ(UU(UU({forceWaitGatewayResponse:!0},_n),{},{role:_n.mode==="rtc"?"host":_n.role}))},createCameraVideoTrack:async function(){let _n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const _r=AE.reportApiInvoke(null,{tag:nS.TRACER,name:wS.CREATE_CAM_VIDEO_TRACK,options:[JF({},_n)]}),_o=MF(_n),_a=X0(8,"track-cam-");let _u=null;E_.info("start create camera video track with config",JSON.stringify(_n),"trackId",_a);try{_u=(await fI({video:_o},_a)).getVideoTracks()[0]||null}catch(_f){throw _r.onError(_f),_f}if(!_u){const _f=new U_(k_.UNEXPECTED_ERROR,"can not find track in media stream");return _r.onError(_f),_f.throw()}_n.optimizationMode&&l5(_a,_u,_n,lL(_n.encoderConfig));const _p=new LW(_u,_n,_o,_n.scalabiltyMode?mF(_n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},_n.optimizationMode,_a);return _r.onSuccess(_p.getTrackId()),E_.info("create camera video success, trackId:",_a),_p},createCustomVideoTrack:function(_n){const _r=AE.reportApiInvoke(null,{tag:nS.TRACER,name:wS.CREATE_CUSTOM_VIDEO_TRACK,options:[_n]}),_o=new yS(_n.mediaStreamTrack,{width:_n.width,height:_n.height,frameRate:_n.frameRate,bitrateMax:_n.bitrateMax,bitrateMin:_n.bitrateMin},_n.scalabiltyMode?mF(_n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},_n.optimizationMode,X0(8,"track-cus-"),[NS.CUSTOM_TRACK]);return _r.onSuccess(_o.getTrackId()),E_.info("create custom video track success with config",_n,"trackId",_o.getTrackId()),_o},createScreenVideoTrack:async function(){let _n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"disable";const _o=AE.reportApiInvoke(null,{tag:nS.TRACER,name:wS.CREATE_SCREEN_VIDEO_TRACK,options:[JF({},_n),_r]});_n.encoderConfig?typeof _n.encoderConfig=="string"||_n.encoderConfig.width&&_n.encoderConfig.height||(_n.encoderConfig.width={max:1920},_n.encoderConfig.height={max:1080}):_n.encoderConfig="1080p_2";const _a=x9(_n),_u=X0(8,"track-scr-v-");let _p=null,_f=null;const n_=VS();if(!n_.supportShareAudio&&_r==="enable"){const s_=new U_(k_.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return _o.onError(s_),s_.throw()}E_.info("start create screen video track with config",_n,"withAudio",_r,"trackId",_u);try{const s_=await fI({screen:_a,screenAudio:_r==="auto"?n_.supportShareAudio:_r==="enable"},_u);_p=s_.getVideoTracks()[0]||null,_f=s_.getAudioTracks()[0]||null}catch(s_){throw _o.onError(s_),s_}if(!_p){const s_=new U_(k_.UNEXPECTED_ERROR,"can not find track in media stream");return _o.onError(s_),s_.throw()}if(!_f&&_r==="enable"){_p&&_p.stop();const s_=new U_(k_.SHARE_AUDIO_NOT_ALLOWED);return _o.onError(s_),s_.throw()}_n.optimizationMode||(_n.optimizationMode="detail"),_n.optimizationMode&&(l5(_u,_p,_n,_n.encoderConfig&&D4(_n.encoderConfig)),_n.encoderConfig&&typeof _n.encoderConfig!="string"&&(_n.encoderConfig.bitrateMin=_n.encoderConfig.bitrateMax));const r_=new yS(_p,_n.encoderConfig?D4(_n.encoderConfig):{},_n.scalabiltyMode?mF(_n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},_n.optimizationMode,_u,[NS.SCREEN_TRACK]);if(!_f)return _o.onSuccess(r_.getTrackId()),E_.info("create screen video track success","video:",r_.getTrackId()),r_;const o_=new lT(_f,void 0,X0(8,"track-scr-a-"),!1,!0);return _o.onSuccess([r_.getTrackId(),o_.getTrackId()]),E_.info("create screen video track success","video:",r_.getTrackId(),"audio:",o_.getTrackId()),[r_,o_]},createMicrophoneAndCameraTracks:async function(){let _n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const _o=AE.reportApiInvoke(null,{tag:nS.TRACER,name:wS.CREATE_MIC_AND_CAM_TRACKS,options:[_n,_r]}),_a=MF(_r),_u=X6(_n),_p=X0(8,"track-mic-"),_f=X0(8,"track-cam-");let n_=null,r_=null;E_.info("start create camera video track(".concat(_f,") and microphone audio track(").concat(_p,") with config, audio: ").concat(JSON.stringify(_n),", video: ").concat(JSON.stringify(_r)));try{const u_=await fI({audio:_u,video:_a},"".concat(_p,"-").concat(_f));n_=u_.getAudioTracks()[0],r_=u_.getVideoTracks()[0]}catch(u_){throw _o.onError(u_),u_}if(!n_||!r_){const u_=new U_(k_.UNEXPECTED_ERROR,"can not find tracks in media stream");return _o.onError(u_),u_.throw()}_r.optimizationMode&&l5(_f,r_,_r,lL(_r.encoderConfig));const o_=new RF(n_,_n,_u,_p),s_=new LW(r_,_r,_a,_r.scalabiltyMode?mF(_r.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},_r.optimizationMode,_f);return _o.onSuccess([o_.getTrackId(),s_.getTrackId()]),E_.info("create camera video track(".concat(_f,") and microphone audio track(").concat(_p,") success")),[o_,s_]},createMicrophoneAudioTrack:async function(){let _n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const _r=AE.reportApiInvoke(null,{tag:nS.TRACER,name:wS.CREATE_MIC_AUDIO_TRACK,options:[_n]}),_o=X6(_n),_a=X0(8,"track-mic-");let _u=null;E_.info("start create microphone audio track with config",JSON.stringify(_n),"trackId",_a);try{_u=(await fI({audio:_o},_a)).getAudioTracks()[0]||null}catch(_f){throw _r.onError(_f),_f}if(!_u){const _f=new U_(k_.UNEXPECTED_ERROR,"can not find track in media stream");return _r.onError(_f),_f.throw()}const _p=new RF(_u,_n,_o,_a);return _r.onSuccess(_p.getTrackId()),E_.info("create microphone audio track success, trackId:",_a),_p},createCustomAudioTrack:function(_n){const _r=AE.reportApiInvoke(null,{tag:nS.TRACER,name:wS.CREATE_CUSTOM_AUDIO_TRACK,options:[_n]}),_o=new lT(_n.mediaStreamTrack,_n.encoderConfig?_F(_n.encoderConfig):{},X0(8,"track-cus-"),!1,!0);return E_.info("create custom audio track success with config",_n,"trackId",_o.getTrackId()),_r.onSuccess(_o.getTrackId()),_o},createBufferSourceAudioTrack:async function(_n){const _r=AE.reportApiInvoke(null,{tag:nS.TRACER,name:wS.CREATE_BUFFER_AUDIO_TRACK,options:[_n]});if(J_("DISABLE_WEBAUDIO"))throw new U_(k_.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");const _o=X0(8,"track-buf-");E_.info("start create buffer source audio track with config",JSON.stringify(_n),"trackId",_o);const _a=_n.source;if(!(_n.source instanceof AudioBuffer))try{_n.source=await zQ(_n.source,_n.cacheOnlineFile)}catch(_f){return _r.onError(_f),_f.throw()}const _u=new WQ(_n.source),_p=new u9(_a,_u,_n.encoderConfig?_F(_n.encoderConfig):{},_o);return E_.info("create buffer source audio track success, trackId:",_o),_r.onSuccess(_p.getTrackId()),_p},setAppType:function(_n){if(E_.debug("setAppType: ".concat(_n)),!(Number.isInteger(_n)&&_n>=0))throw E_.debug("Invalid appType"),new U_(k_.INVALID_PARAMS,"invalid app type",_n);P0("APP_TYPE",Math.floor(_n))},setLogLevel:function(_n){E_.setLogLevel(_n)},enableLogUpload:function(){J_("USE_NEW_LOG")?P0("UPLOAD_LOG",!0):E_.enableLogUpload()},disableLogUpload:function(){J_("USE_NEW_LOG")?P0("UPLOAD_LOG",!1):E_.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new G6},checkAudioTrackIsActive:async function(_n){let _r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const _o=AE.reportApiInvoke(null,{tag:nS.TRACER,name:wS.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[_r]});if(!(_n instanceof lT||_n instanceof GF)){const r_=new U_(k_.INVALID_TRACK,"the parameter is not a audio track");return _o.onError(r_),r_.throw()}_r&&_r<1e3&&(_r=1e3);const _a=_n instanceof lT?_n.getTrackLabel():"remote_track",_u=_n.getVolumeLevel();let _p=_u,_f=_u;const n_=Date.now();return new uE(r_=>{const o_=setInterval(()=>{const s_=_n.getVolumeLevel();_p=s_>_p?s_:_p,_f=s_<_f?s_:_f;const u_=_p-_f>1e-4,g_=Date.now()-n_;if(u_||g_>_r){clearInterval(o_);const w_=u_,D_={duration:g_,deviceLabel:_a,maxVolumeLevel:_p,result:w_};E_.info("[track-".concat(_n.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(D_))),_o.onSuccess(D_),r_(w_)}},200)})},checkVideoTrackIsActive:async function(_n){let _r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const _o=AE.reportApiInvoke(null,{tag:nS.TRACER,name:wS.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[_r]});if(!(_n instanceof yS||_n instanceof HF)){const g_=new U_(k_.INVALID_TRACK,"the parameter is not a video track");return _o.onError(g_),g_.throw()}const _a=4;_r&&_r<1e3&&(_r=1e3);const _u=_n instanceof yS?_n.getTrackLabel():"remote_track",_p=_n.getMediaStreamTrack(!0),_f=document.createElement("video");_f.style.width="1px",_f.style.height="1px",_f.setAttribute("muted",""),_f.muted=!0,_f.setAttribute("playsinline",""),_f.controls=!1,(rT()||vD())&&(_f.style.opacity="0.01",_f.style.position="fixed",_f.style.left="0",_f.style.top="0",document.body.appendChild(_f)),_f.srcObject=new MediaStream([_p]),_f.play();const n_=document.createElement("canvas");n_.width=160,n_.height=120;let r_=0,o_=0;try{const g_=Date.now();r_=await JQ(_f,_r,n_,_a),o_=Date.now()-g_}catch(g_){throw _o.onError(g_),g_}KQ===S0.SAFARI&&(_f.pause(),_f.remove()),_f.srcObject=null;const s_=r_>_a,u_={duration:o_,changedPicNum:r_,deviceLabel:_u,result:s_};return E_.info("[track-".concat(_n.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(u_))),_o.onSuccess(u_),s_},setArea:SH,audioElementPlayCenter:cR,processExternalMediaAEC:function(_n){XQ.processExternalMediaAEC(_n)},registerExtensions:function(_n){_n.forEach(_r=>{const _o=_r;_o.__registered__=!0,_o.logger.hookLog=E_.extLog,_o.reporter.hookApiInvoke=AE.extApiInvoke,_o.parameters&&Object.keys(_o.parameters).forEach(_a=>{_o.parameters[_a]=J_(_a)})})},ChannelMediaRelayError:Z1,ChannelMediaRelayEvent:UI,ChannelMediaRelayState:jT,RemoteStreamFallbackType:Z4,RemoteStreamType:X4,ConnectionDisconnectedReason:w0,AudienceLatencyLevelType:W4,AREAS:a0},d5=window||document;return Object.defineProperties($T,{onAudioAutoplayFailed:{get:()=>TR.onAudioAutoplayFailed,set:_n=>{TR.onAudioAutoplayFailed=_n}},onAutoplayFailed:{get:()=>TR.onAutoplayFailed,set:_n=>{TR.onAutoplayFailed=_n}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>$T._onSecurityPolicyViolation,set(_n){if($T._onSecurityPolicyViolation=_n,!d5)return;const _r=_a=>{if(!(_a&&_a.blockedURI&&$T.onSecurityPolicyViolation))return;const _u=_a.blockedURI;J_("CSP_DETECTED_HOSTNAME_LIST").some(_p=>_u.includes(_p))&&$T.onSecurityPolicyViolation&&typeof $T.onSecurityPolicyViolation=="function"&&$T.onSecurityPolicyViolation(_a)},_o=$T._cspEventHandlerPointer;_o&&d5.removeEventListener("securitypolicyviolation",_o),_n&&typeof _n=="function"&&d5.addEventListener("securitypolicyviolation",_r),$T._cspEventHandlerPointer=_r}}}),IR.on(JO.CAMERA_DEVICE_CHANGED,_n=>{E_.info("camera device changed",JSON.stringify(_n)),$T.onCameraChanged&&$T.onCameraChanged(_n)}),IR.on(JO.RECORDING_DEVICE_CHANGED,_n=>{E_.info("microphone device changed",JSON.stringify(_n)),$T.onMicrophoneChanged&&$T.onMicrophoneChanged(_n)}),IR.on(JO.PLAYOUT_DEVICE_CHANGED,_n=>{E_.debug("playout device changed",JSON.stringify(_n)),$T.onPlaybackDeviceChanged&&$T.onPlaybackDeviceChanged(_n)}),cR.onAutoplayFailed=()=>{E_.info("detect audio element autoplay failed"),TR.onAudioAutoplayFailed&&TR.onAudioAutoplayFailed()},c0.on("autoplay-failed",()=>{E_.info("detect webaudio autoplay failed"),TR.onAudioAutoplayFailed&&TR.onAudioAutoplayFailed()}),window&&(window.__ARTC__=$T),$T})})(AgoraRTC_NProduction);const AgoraRTC__default=getDefaultExportFromCjs$1(AgoraRTC_NProductionExports);function _objectWithoutPropertiesLoose($,_e){if($==null)return{};var _t={},Vt=Object.keys($),Wt,_i;for(_i=0;_i<Vt.length;_i++)Wt=Vt[_i],!(_e.indexOf(Wt)>=0)&&(_t[Wt]=$[Wt]);return _t}var AgoraRTCErrorCode;(function($){$.UNEXPECTED_ERROR="UNEXPECTED_ERROR",$.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",$.TIMEOUT="TIMEOUT",$.INVALID_PARAMS="INVALID_PARAMS",$.NOT_SUPPORTED="NOT_SUPPORTED",$.INVALID_OPERATION="INVALID_OPERATION",$.OPERATION_ABORTED="OPERATION_ABORTED",$.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",$.NETWORK_ERROR="NETWORK_ERROR",$.NETWORK_TIMEOUT="NETWORK_TIMEOUT",$.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",$.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",$.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",$.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",$.ELECTRON_IS_NULL="ELECTRON_IS_NULL",$.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",$.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",$.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",$.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",$.PERMISSION_DENIED="PERMISSION_DENIED",$.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",$.TRACK_IS_DISABLED="TRACK_IS_DISABLED",$.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",$.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",$.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",$.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",$.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",$.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",$.UID_CONFLICT="UID_CONFLICT",$.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",$.INVALID_TRACK="INVALID_TRACK",$.SENDER_NOT_FOUND="SENDER_NOT_FOUND",$.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",$.SET_ANSWER_FAILED="SET_ANSWER_FAILED",$.ICE_FAILED="ICE_FAILED",$.PC_CLOSED="PC_CLOSED",$.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",$.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",$.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",$.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",$.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",$.INVALID_REMOTE_USER="INVALID_REMOTE_USER",$.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",$.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",$.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",$.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",$.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",$.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",$.WS_ABORT="WS_ABORT",$.WS_DISCONNECT="WS_DISCONNECT",$.WS_ERR="WS_ERR",$.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",$.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",$.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",$.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",$.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",$.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",$.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",$.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",$.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",$.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",$.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",$.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",$.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",$.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",$.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",$.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",$.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",$.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE"})(AgoraRTCErrorCode||(AgoraRTCErrorCode={}));var createClient=function(_e){var _t;function Vt(){return _t||(_t=AgoraRTC__default.createClient(_e)),_t}return function(){return Vt()}};function createMicrophoneAndCameraTracks($,_e){var _t=function(){try{return Promise.resolve(AgoraRTC__default.createMicrophoneAndCameraTracks($,_e)).then(function(_i){return Vt=_i,Vt})}catch(_i){return Promise.reject(_i)}},Vt=null;return function(){var _i=reactExports.useState(!1),_s=_i[0],_c=_i[1],_l=reactExports.useState(null),_d=_l[0],_m=_l[1],e_=reactExports.useRef(Vt);return reactExports.useEffect(function(){return e_.current===null?_t().then(function(t_){e_.current=t_,_c(!0)},function(t_){_m(t_)}):_c(!0),function(){Vt=null}},[]),{ready:_s,tracks:e_.current,error:_d}}}var AgoraVideoPlayer=function(_e){var _t=reactExports.useRef(null),Vt=_e.videoTrack,Wt=_e.config,_i=_objectWithoutPropertiesLoose(_e,["videoTrack","config"]);return reactExports.useLayoutEffect(function(){return _t.current!==null&&Vt.play(_t.current,Wt),function(){Vt.stop()}},[Vt]),React.createElement("div",Object.assign({},_i,{ref:_t}))},agoraRtmSdkExports={},agoraRtmSdk={get exports(){return agoraRtmSdkExports},set exports($){agoraRtmSdkExports=$}};/*
 @preserve
 AgoraRTM Web SDK 1.4.3-203 - commit: v1.4.3-17-g1e27aa38
 Copyright (C) 2018-2021 Agora Lab.
 This file is licensed under the AGORA, INC. SDK LICENSE AGREEMENT
 A copy of this license may be found at https://www.agora.io/en/sdk-license-agreement/
*/(function(module,exports){(function($,_e){module.exports=_e()})(commonjsGlobal$1,function(){function be($,_e){var _t=Object.keys($);if(Object.getOwnPropertySymbols){var Vt=Object.getOwnPropertySymbols($);_e&&(Vt=Vt.filter(function(Wt){return Object.getOwnPropertyDescriptor($,Wt).enumerable})),_t.push.apply(_t,Vt)}return _t}function ua($){for(var _e=1;_e<arguments.length;_e++){var _t=arguments[_e]!=null?arguments[_e]:{};_e%2?be(Object(_t),!0).forEach(function(Vt){m($,Vt,_t[Vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(_t)):be(Object(_t)).forEach(function(Vt){Object.defineProperty($,Vt,Object.getOwnPropertyDescriptor(_t,Vt))})}return $}function X($){return(X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_e){return typeof _e}:function(_e){return _e&&typeof Symbol=="function"&&_e.constructor===Symbol&&_e!==Symbol.prototype?"symbol":typeof _e})($)}function sl($,_e,_t,Vt,Wt,_i,_s){try{var _c=$[_i](_s),_l=_c.value}catch(_d){return void _t(_d)}_c.done?_e(_l):Promise.resolve(_l).then(Vt,Wt)}function J($){return function(){var _e=this,_t=arguments;return new Promise(function(Vt,Wt){function _i(_l){sl(_c,Vt,Wt,_i,_s,"next",_l)}function _s(_l){sl(_c,Vt,Wt,_i,_s,"throw",_l)}var _c=$.apply(_e,_t);_i(void 0)})}}function W($,_e){if(!($ instanceof _e))throw new TypeError("Cannot call a class as a function")}function tl($,_e){for(var _t=0;_t<_e.length;_t++){var Vt=_e[_t];Vt.enumerable=Vt.enumerable||!1,Vt.configurable=!0,"value"in Vt&&(Vt.writable=!0),Object.defineProperty($,Vt.key,Vt)}}function Ha($,_e,_t){return _e&&tl($.prototype,_e),_t&&tl($,_t),$}function m($,_e,_t){return _e in $?Object.defineProperty($,_e,{value:_t,enumerable:!0,configurable:!0,writable:!0}):$[_e]=_t,$}function la($,_e){if(typeof _e!="function"&&_e!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(_e&&_e.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),_e&&df($,_e)}function wd($){return(wd=Object.setPrototypeOf?Object.getPrototypeOf:function(_e){return _e.__proto__||Object.getPrototypeOf(_e)})($)}function df($,_e){return(df=Object.setPrototypeOf||function(_t,Vt){return _t.__proto__=Vt,_t})($,_e)}function ul(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Sh($,_e,_t){return(Sh=ul()?Reflect.construct:function(Vt,Wt,_i){var _s=[null];return _s.push.apply(_s,Wt),Vt=new(Function.bind.apply(Vt,_s)),_i&&df(Vt,_i.prototype),Vt}).apply(null,arguments)}function ef($){var _e=typeof Map=="function"?new Map:void 0;return(ef=function(_t){function Vt(){return Sh(_t,arguments,wd(this).constructor)}if(_t===null||Function.toString.call(_t).indexOf("[native code]")===-1)return _t;if(typeof _t!="function")throw new TypeError("Super expression must either be null or a function");if(_e!==void 0){if(_e.has(_t))return _e.get(_t);_e.set(_t,Vt)}return Vt.prototype=Object.create(_t.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),df(Vt,_t)})($)}function ff($,_e){if($==null)return{};if($==null)var _t={};else{_t={};var Vt,Wt=Object.keys($);for(Vt=0;Vt<Wt.length;Vt++){var _i=Wt[Vt];0<=_e.indexOf(_i)||(_t[_i]=$[_i])}}if(Object.getOwnPropertySymbols)for(Vt=Object.getOwnPropertySymbols($),_i=0;_i<Vt.length;_i++)Wt=Vt[_i],0<=_e.indexOf(Wt)||Object.prototype.propertyIsEnumerable.call($,Wt)&&(_t[Wt]=$[Wt]);return _t}function n($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function ma($){var _e=ul();return function(){var _t=wd($);if(_e){var Vt=wd(this).constructor;_t=Reflect.construct(_t,arguments,Vt)}else _t=_t.apply(this,arguments);return _t=!_t||typeof _t!="object"&&typeof _t!="function"?n(this):_t}}function Th($,_e,_t){return(Th=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(Vt,Wt,_i){for(;!Object.prototype.hasOwnProperty.call(Vt,Wt)&&(Vt=wd(Vt))!==null;);if(Vt)return(Wt=Object.getOwnPropertyDescriptor(Vt,Wt)).get?Wt.get.call(_i):Wt.value})($,_e,_t||$)}function ra($,_e){var _t=Array.isArray($)?$:void 0;if(!_t)if((_t=$&&(typeof Symbol<"u"&&$[Symbol.iterator]||$["@@iterator"]))==null)_t=void 0;else{var Vt,Wt=[],_i=!0,_s=!1;try{for(_t=_t.call($);!(_i=(Vt=_t.next()).done)&&(Wt.push(Vt.value),!_e||Wt.length!==_e);_i=!0);}catch(_l){_s=!0;var _c=_l}finally{try{_i||_t.return==null||_t.return()}finally{if(_s)throw _c}}_t=Wt}if(!($=_t||vl($,_e)))throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);return $}function G($){var _e=Array.isArray($)?Uh($):void 0;if(_e||(_e=typeof Symbol<"u"&&$[Symbol.iterator]!=null||$["@@iterator"]!=null?Array.from($):void 0),!($=_e||vl($)))throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);return $}function vl($,_e){if($){if(typeof $=="string")return Uh($,_e);var _t=Object.prototype.toString.call($).slice(8,-1);if(_t==="Object"&&$.constructor&&(_t=$.constructor.name),_t==="Map"||_t==="Set")return Array.from($);if(_t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_t))return Uh($,_e)}}function Uh($,_e){(_e==null||_e>$.length)&&(_e=$.length);for(var _t=0,Vt=Array(_e);_t<_e;_t++)Vt[_t]=$[_t];return Vt}function fa($,_e,_t,Vt,Wt){var _i={};return Object.keys(Vt).forEach(function(_s){_i[_s]=Vt[_s]}),_i.enumerable=!!_i.enumerable,_i.configurable=!!_i.configurable,("value"in _i||_i.initializer)&&(_i.writable=!0),_i=_t.slice().reverse().reduce(function(_s,_c){return _c($,_e,_s)||_s},_i),Wt&&_i.initializer!==void 0&&(_i.value=_i.initializer?_i.initializer.call(Wt):void 0,_i.initializer=void 0),_i.initializer===void 0&&(Object.defineProperty($,_e,_i),_i=null),_i}function $a($){var _e={exports:{}};return $(_e,_e.exports),_e.exports}function wl($,_e){var _t,Vt=3>arguments.length?$:arguments[2];return va($)===Vt?$[_e]:(_t=Fb.f($,_e))?Q(_t,"value")?_t.value:_t.get===void 0?void 0:_t.get.call(Vt):ha(_t=Vb($))?wl(_t,_e,Vt):void 0}function rs($){var _e=$.charCodeAt(0)<<24,_t=0|ss(~_e),Vt=0,Wt=0|$.length,_i="";if(5>_t&&Wt>=_t){for(_e=_e<<_t>>>24+_t,Vt=1;Vt<_t;Vt=Vt+1|0)_e=_e<<6|63&$.charCodeAt(Vt);65535>=_e?_i+=xd(_e):1114111>=_e?_i+=xd(55296+((_e=_e-65536|0)>>10)|0,56320+(1023&_e)|0):Vt=0}for(;Vt<Wt;Vt=Vt+1|0)_i+="";return _i}function xl(){}function ts($){var _e=0|$.charCodeAt(0);if(55296<=_e&&56319>=_e){var _t=0|$.charCodeAt(1);if(!(_t==_t&&56320<=_t&&57343>=_t))return xd(239,191,189);if(65535<(_e=(_e-55296<<10)+_t-56320+65536|0))return xd(240|_e>>>18,128|_e>>>12&63,128|_e>>>6&63,128|63&_e)}return 127>=_e?$:2047>=_e?xd(192|_e>>>6,128|63&_e):xd(224|_e>>>12,128|_e>>>6&63,128|63&_e)}function yl(){}function ea(){ea.init.call(this)}function ng($){if(typeof $!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+X($))}function zl($,_e,_t,Vt){ng(_t);var Wt=$._events;if(Wt===void 0)Wt=$._events=Object.create(null),$._eventsCount=0;else{Wt.newListener!==void 0&&($.emit("newListener",_e,_t.listener?_t.listener:_t),Wt=$._events);var _i=Wt[_e]}return _i===void 0?(Wt[_e]=_t,++$._eventsCount):(typeof _i=="function"?_i=Wt[_e]=Vt?[_t,_i]:[_i,_t]:Vt?_i.unshift(_t):_i.push(_t),0<(_t=$._maxListeners===void 0?ea.defaultMaxListeners:$._maxListeners)&&_i.length>_t&&!_i.warned&&(_i.warned=!0,(_t=Error("Possible EventEmitter memory leak detected. "+_i.length+" "+String(_e)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",_t.emitter=$,_t.type=_e,_t.count=_i.length,console&&console.warn&&console.warn(_t))),$}function us(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Al($,_e,_t){return $={fired:!1,wrapFn:void 0,target:$,type:_e,listener:_t},(_e=us.bind($)).listener=_t,$.wrapFn=_e}function Bl($,_e,_t){if(($=$._events)===void 0)return[];if((_e=$[_e])===void 0)return[];if(typeof _e=="function")return _t?[_e.listener||_e]:[_e];if(_t)for(_t=Array(_e.length),$=0;$<_t.length;++$)_t[$]=_e[$].listener||_e[$];else _t=Cl(_e,_e.length);return _t}function Dl($){var _e=this._events;if(_e!==void 0){if(typeof($=_e[$])=="function")return 1;if($!==void 0)return $.length}return 0}function Cl($,_e){for(var _t=Array(_e),Vt=0;Vt<_e;++Vt)_t[Vt]=$[Vt];return _t}function vs($,_e,_t){typeof $.on=="function"&&El($,"error",_e,_t)}function El($,_e,_t,Vt){if(typeof $.on=="function")Vt.once?$.once(_e,_t):$.on(_e,_t);else{if(typeof $.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+X($));$.addEventListener(_e,function Wt(_i){Vt.once&&$.removeEventListener(_e,Wt),_t(_i)})}}function ws($){return $?G($):xs(function(){return[]},function(_e,_t){return _e.push(_t),_e})}function Fl($,_e){var _t,Vt,Wt,_i;return w.wrap(function(_s){for(;;)switch(_s.prev=_s.next){case 0:_t=Gl($)([Hl,Hl,function(_c,_l){return _l}])[2],Vt=0;case 2:if(!(Vt<_e.length)){_s.next=17;break}if(Wt=_e[Vt],!((_i=_t(Vh,Wt))instanceof og)){_s.next=11;break}if((_i=Wh(_i.deref()))===Vh){_s.next=10;break}return _s.next=10,_i;case 10:return _s.abrupt("return");case 11:if(_i===Vh){_s.next=14;break}return _s.next=14,_i;case 14:Vt++,_s.next=2;break;case 17:case"end":return _s.stop()}},ys)}function pg($,_e){return _e!=null&&typeof _e[Symbol.iterator]=="function"?Fl(pg($),_e):function(_t){var Vt=_t[2];return zs(_t,function(Wt,_i){return Vt(Wt,$(_i))})}}function Ac($){return Object.prototype.toString.call($).slice(8,-1)}function yd($){return Ac($)==="Object"&&$.constructor===Object&&Object.getPrototypeOf($)===Object.prototype}function Il($){var _e;return(_e=Ac($)==="Boolean"||Ac($)==="Null"||Ac($)==="Undefined")||(_e=Ac($)==="Number"&&!isNaN($)),_e||Ac($)==="String"||Ac($)==="Symbol"}function zd($){var _e=-1,_t=$==null?0:$.length;for(this.clear();++_e<_t;){var Vt=$[_e];this.set(Vt[0],Vt[1])}}function ce($){var _e=-1,_t=$==null?0:$.length;for(this.clear();++_e<_t;){var Vt=$[_e];this.set(Vt[0],Vt[1])}}function de($){var _e=-1,_t=$==null?0:$.length;for(this.clear();++_e<_t;){var Vt=$[_e];this.set(Vt[0],Vt[1])}}function gf($){var _e=-1,_t=$==null?0:$.length;for(this.__data__=new qg;++_e<_t;)this.add($[_e])}function ee($){this.size=(this.__data__=new rg($)).size}function fe($,_e,_t,Vt,Wt,_i){var _s,_c=1&_e,_l=2&_e,_d=4&_e;if(_t&&(_s=Wt?_t($,Vt,Wt,_i):_t($)),_s!==void 0)return _s;if(!lb($))return $;if(Vt=Va($)){if(_s=As($),!_c)return Xh($,_s)}else{var _m=hf($),e_=_m=="[object Function]"||_m=="[object GeneratorFunction]";if(jf($))return Jl($,_c);if(_m=="[object Object]"||_m=="[object Arguments]"||e_&&!Wt){if(_s=_l||e_?{}:Kl($),!_c)return _l?Bs($,Cs(_s,$)):Ds($,Es(_s,$))}else{if(!wa[_m])return Wt?$:{};_s=Fs($,_m,_c)}}if(_i||(_i=new ge),Wt=_i.get($))return Wt;_i.set($,_s),Gs($)?$.forEach(function(i_){_s.add(fe(i_,_e,_t,i_,$,_i))}):Hs($)&&$.forEach(function(i_,c_){_s.set(c_,fe(i_,_e,_t,c_,$,_i))}),_l=_d?_l?Ll:Yh:_l?kf:Ad;var t_=Vt?void 0:_l($);return Is(t_||$,function(i_,c_){t_&&(i_=$[c_=i_]),Ml(_s,c_,fe(i_,_e,_t,c_,$,_i))}),_s}function Zh($,_e){if(typeof $!="function"||_e!=null&&typeof _e!="function")throw new TypeError("Expected a function");var _t=function Vt(){var Wt=arguments,_i=_e?_e.apply(this,Wt):Wt[0],_s=Vt.cache;return _s.has(_i)?_s.get(_i):(Wt=$.apply(this,Wt),Vt.cache=_s.set(_i,Wt)||_s,Wt)};return _t.cache=new(Zh.Cache||qg),_t}function Nl($){if(typeof $=="string")return $;if(Va($))return he($,Nl)+"";if(ie($))return Ol?Ol.call($):"";var _e=$+"";return _e=="0"&&1/$==-Js?"-0":_e}function $h($,_e,_t,Vt,Wt){var _i=-1,_s=$.length;for(_t||(_t=Ks),Wt||(Wt=[]);++_i<_s;){var _c=$[_i];0<_e&&_t(_c)?1<_e?$h(_c,_e-1,_t,Vt,Wt):ai(Wt,_c):Vt||(Wt[Wt.length]=_c)}return Wt}function je($,_e,_t,Vt,Wt){if($===_e)_e=!0;else if($==null||_e==null||!gc($)&&!gc(_e))_e=$!=$&&_e!=_e;else e:{var _i=Va($),_s=Va(_e),_c=_i?"[object Array]":hf($),_l=_s?"[object Array]":hf(_e),_d=(_c=_c=="[object Arguments]"?"[object Object]":_c)=="[object Object]";if(_s=(_l=_l=="[object Arguments]"?"[object Object]":_l)=="[object Object]",(_l=_c==_l)&&jf($)){if(!jf(_e)){_e=!1;break e}_i=!0,_d=!1}if(_l&&!_d)Wt||(Wt=new ge),_e=_i||bi($)?Pl($,_e,_t,Vt,je,Wt):Ls($,_e,_c,_t,Vt,je,Wt);else{if(!(1&_t)&&(_i=_d&&Ql.call($,"__wrapped__"),_c=_s&&Ql.call(_e,"__wrapped__"),_i||_c)){$=_i?$.value():$,_e=_c?_e.value():_e,Wt||(Wt=new ge),_e=je($,_e,_t,Vt,Wt);break e}if(_l)t:if(Wt||(Wt=new ge),_i=1&_t,_c=Yh($),_s=_c.length,_l=Yh(_e).length,_s==_l||_i){for(_l=_s;_l--;){var _m=_c[_l];if(!(_i?_m in _e:Ms.call(_e,_m))){_e=!1;break t}}if(_d=Wt.get($),_m=Wt.get(_e),_d&&_m)_e=_d==_e&&_m==$;else{_d=!0,Wt.set($,_e),Wt.set(_e,$);for(var e_=_i;++_l<_s;){var t_=$[_m=_c[_l]],i_=_e[_m];if(Vt)var c_=_i?Vt(i_,t_,_m,_e,$,Wt):Vt(t_,i_,_m,$,_e,Wt);if(c_===void 0?t_!==i_&&!je(t_,i_,_t,Vt,Wt):!c_){_d=!1;break}e_||(e_=_m=="constructor")}_d&&!e_&&(_t=$.constructor)!=(Vt=_e.constructor)&&"constructor"in $&&"constructor"in _e&&!(typeof _t=="function"&&_t instanceof _t&&typeof Vt=="function"&&Vt instanceof Vt)&&(_d=!1),Wt.delete($),Wt.delete(_e),_e=_d}}else _e=!1;else _e=!1}}return _e}function xa($,_e,_t){this.low=0|$,this.high=0|_e,this.unsigned=!!_t}function mb($){return($&&$.__isLong__)===!0}function Bd($,_e){var _t;if(_e){if((_e=0<=($>>>=0)&&256>$)&&(_t=Rl[$]))return _t;_t=ya($,0>(0|$)?-1:0,!0),_e&&(Rl[$]=_t)}else{if((_e=-128<=($|=0)&&128>$)&&(_t=Sl[$]))return _t;_t=ya($,0>$?-1:0,!1),_e&&(Sl[$]=_t)}return _t}function Gb($,_e){if(isNaN($))return _e?Cd:Hb;if(_e){if(0>$)return Cd;if($>=Tl)return Ul}else{if($<=-Vl)return nb;if($+1>=Vl)return Wl}return 0>$?Gb(-$,_e).neg():ya($%ke|0,$/ke|0,_e)}function ya($,_e,_t){return new xa($,_e,_t)}function ci($,_e,_t){if($.length===0)throw Error("empty string");if($==="NaN"||$==="Infinity"||$==="+Infinity"||$==="-Infinity")return Hb;if(typeof _e=="number"?(_t=_e,_e=!1):_e=!!_e,2>(_t=_t||10)||36<_t)throw RangeError("radix");var Vt;if(0<(Vt=$.indexOf("-")))throw Error("interior hyphen");if(Vt===0)return ci($.substring(1),_e,_t).neg();Vt=Gb(sg(_t,8));for(var Wt=Hb,_i=0;_i<$.length;_i+=8){var _s=Math.min(8,$.length-_i),_c=parseInt($.substring(_i,_i+_s),_t);8>_s?(_s=Gb(sg(_t,_s)),Wt=Wt.mul(_s).add(Gb(_c))):Wt=(Wt=Wt.mul(Vt)).add(Gb(_c))}return Wt.unsigned=_e,Wt}function Wb($,_e){return typeof $=="number"?Gb($,_e):typeof $=="string"?ci($,_e):ya($.low,$.high,typeof _e=="boolean"?_e:$.unsigned)}function O($,_e){function _t(){this.constructor=$}di($,_e),$.prototype=_e===null?Object.create(_e):(_t.prototype=_e.prototype,new _t)}function le($){return typeof $=="function"}function me($){setTimeout(function(){throw $},0)}function ei($){return $!==null&&X($)==="object"}function Xl($){return $.reduce(function(_e,_t){return _e.concat(_t instanceof lf?_t.errors:_t)},[])}function fi($){for(;$;){var _e=$.destination,_t=$.isStopped;if($.closed||_t)return!1;$=_e&&_e instanceof ia?_e:null}return!0}function Yc($){return $}function gi(){for(var $=[],_e=0;_e<arguments.length;_e++)$[_e]=arguments[_e];return Yl($)}function Yl($){return $.length===0?Yc:$.length===1?$[0]:function(_e){return $.reduce(function(_t,Vt){return Vt(_t)},_e)}}function Zl($){if($||($=Ib.Promise||Promise),!$)throw Error("no Promise impl found");return $}function $l(){return function($){return $.lift(new Ns($))}}function mf($){return $?Os($):vb}function Os($){return new Y(function(_e){return $.schedule(function(){return _e.complete()})})}function Zc($){return $&&typeof $.schedule=="function"}function hi($,_e){return new Y(function(_t){var Vt=new Oa,Wt=0;return Vt.add(_e.schedule(function(){Wt===$.length?_t.complete():(_t.next($[Wt++]),_t.closed||Vt.add(this.schedule()))})),Vt})}function nf($,_e){return _e?hi($,_e):new Y(am($))}function bb(){for(var $=[],_e=0;_e<arguments.length;_e++)$[_e]=arguments[_e];return Zc(_e=$[$.length-1])?($.pop(),hi($,_e)):nf($)}function Z($,_e){return new Y(_e?function(_t){return _e.schedule(Ps,0,{error:$,subscriber:_t})}:function(_t){return _t.error($)})}function Ps($){$.subscriber.error($.error)}function Qs($,_e){return _e===void 0&&(_e=0),function(_t){return _t.lift(new Rs($,_e))}}function bm($){return $ in ii&&(delete ii[$],!0)}function hc(){}function ba($,_e){return function(_t){if(typeof $!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return _t.lift(new Ss($,_e))}}function cm($,_e,_t){if(_e){if(!Zc(_e))return function(){for(var Vt=[],Wt=0;Wt<arguments.length;Wt++)Vt[Wt]=arguments[Wt];return cm($,_t).apply(void 0,Vt).pipe(ba(function(_i){return Jb(_i)?_e.apply(void 0,_i):_e(_i)}))};_t=_e}return function(){for(var Vt=[],Wt=0;Wt<arguments.length;Wt++)Vt[Wt]=arguments[Wt];var _i,_s=this,_c={context:_s,subject:_i,callbackFunc:$,scheduler:_t};return new Y(function(_l){if(_t)return _t.schedule(Ts,0,{args:Vt,subscriber:_l,params:_c});if(!_i){_i=new of;try{$.apply(_s,Vt.concat([function(){for(var _d=[],_m=0;_m<arguments.length;_m++)_d[_m]=arguments[_m];_i.next(1>=_d.length?_d[0]:_d),_i.complete()}]))}catch(_d){fi(_i)?_i.error(_d):console.warn(_d)}}return _i.subscribe(_l)})}}function Ts($){var _e=this,_t=$.args,Vt=$.subscriber,Wt=$.params;$=Wt.callbackFunc;var _i=Wt.context,_s=Wt.scheduler,_c=Wt.subject;if(!_c){_c=Wt.subject=new of,Wt=function(){for(var _l=[],_d=0;_d<arguments.length;_d++)_l[_d]=arguments[_d];_e.add(_s.schedule(Us,0,{value:1>=_l.length?_l[0]:_l,subject:_c}))};try{$.apply(_i,_t.concat([Wt]))}catch(_l){_c.error(_l)}}this.add(_c.subscribe(Vt))}function Us($){var _e=$.subject;_e.next($.value),_e.complete()}function dm($,_e,_t){if(_e){if(!Zc(_e))return function(){for(var Vt=[],Wt=0;Wt<arguments.length;Wt++)Vt[Wt]=arguments[Wt];return dm($,_t).apply(void 0,Vt).pipe(ba(function(_i){return Jb(_i)?_e.apply(void 0,_i):_e(_i)}))};_t=_e}return function(){for(var Vt=[],Wt=0;Wt<arguments.length;Wt++)Vt[Wt]=arguments[Wt];var _i={subject:void 0,args:Vt,callbackFunc:$,scheduler:_t,context:this};return new Y(function(_s){var _c=_i.context,_l=_i.subject;if(_t)return _t.schedule(Vs,0,{params:_i,subscriber:_s,context:_c});if(!_l){_l=_i.subject=new of;try{$.apply(_c,Vt.concat([function(){for(var _d=[],_m=0;_m<arguments.length;_m++)_d[_m]=arguments[_m];(_m=_d.shift())?_l.error(_m):(_l.next(1>=_d.length?_d[0]:_d),_l.complete())}]))}catch(_d){fi(_l)?_l.error(_d):console.warn(_d)}}return _l.subscribe(_s)})}}function Vs($){var _e=this,_t=$.params,Vt=$.subscriber;$=$.context;var Wt=_t.callbackFunc,_i=_t.args,_s=_t.scheduler,_c=_t.subject;if(!_c){_c=_t.subject=new of,_t=function(){for(var _l=[],_d=0;_d<arguments.length;_d++)_l[_d]=arguments[_d];(_d=_l.shift())?_e.add(_s.schedule(em,0,{err:_d,subject:_c})):_e.add(_s.schedule(Ws,0,{value:1>=_l.length?_l[0]:_l,subject:_c}))};try{Wt.apply($,_i.concat([_t]))}catch(_l){this.add(_s.schedule(em,0,{err:_l,subject:_c}))}}this.add(_c.subscribe(Vt))}function Ws($){var _e=$.subject;_e.next($.value),_e.complete()}function em($){$.subject.error($.err)}function fm($){return!!$&&typeof $.subscribe!="function"&&typeof $.then=="function"}function ji($,_e,_t,Vt,Wt){if(Wt===void 0&&(Wt=new Xs($,_t,Vt)),!Wt.closed)return _e instanceof Y?_e.subscribe(Wt):pf(_e)(Wt)}function Ys($,_e){return new Y(function(_t){var Vt=new Oa;return Vt.add(_e.schedule(function(){var Wt=$[ne]();Vt.add(Wt.subscribe({next:function(_i){Vt.add(_e.schedule(function(){return _t.next(_i)}))},error:function(_i){Vt.add(_e.schedule(function(){return _t.error(_i)}))},complete:function(){Vt.add(_e.schedule(function(){return _t.complete()}))}}))})),Vt})}function Zs($,_e){return new Y(function(_t){var Vt=new Oa;return Vt.add(_e.schedule(function(){return $.then(function(Wt){Vt.add(_e.schedule(function(){_t.next(Wt),Vt.add(_e.schedule(function(){return _t.complete()}))}))},function(Wt){Vt.add(_e.schedule(function(){return _t.error(Wt)}))})})),Vt})}function $s($,_e){if(!$)throw Error("Iterable cannot be null");return new Y(function(_t){var Vt,Wt=new Oa;return Wt.add(function(){Vt&&typeof Vt.return=="function"&&Vt.return()}),Wt.add(_e.schedule(function(){Vt=$[$c](),Wt.add(_e.schedule(function(){if(!_t.closed){try{var _i=Vt.next(),_s=_i.value,_c=_i.done}catch(_l){return void _t.error(_l)}_c?_t.complete():(_t.next(_s),this.schedule())}}))})),Wt})}function gm($,_e){if($!=null){if($&&typeof $[ne]=="function")return Ys($,_e);if(fm($))return Zs($,_e);if(hm($))return hi($,_e);if($&&typeof $[$c]=="function"||typeof $=="string")return $s($,_e)}throw new TypeError(($!==null&&X($)||$)+" is not observable")}function Kb($,_e){return _e?gm($,_e):$ instanceof Y?$:new Y(pf($))}function ic($,_e){if(!_e.closed){if($ instanceof Y)return $.subscribe(_e);try{var _t=pf($)(_e)}catch(Vt){_e.error(Vt)}return _t}}function cb($,_e,_t){return _t===void 0&&(_t=Number.POSITIVE_INFINITY),typeof _e=="function"?function(Vt){return Vt.pipe(cb(function(Wt,_i){return Kb($(Wt,_i)).pipe(ba(function(_s,_c){return _e(Wt,_s,_i,_c)}))},_t))}:(typeof _e=="number"&&(_t=_e),function(Vt){return Vt.lift(new at($,_t))})}function tg($){return $===void 0&&($=Number.POSITIVE_INFINITY),cb(Yc,$)}function im(){for(var $=[],_e=0;_e<arguments.length;_e++)$[_e]=arguments[_e];return tg(1)(bb.apply(void 0,$))}function ad($){return new Y(function(_e){try{var _t=$()}catch(Vt){return void _e.error(Vt)}return(_t?Kb(_t):mf()).subscribe(_e)})}function jm(){for(var $=[],_e=0;_e<arguments.length;_e++)$[_e]=arguments[_e];if($.length===1){var _t=$[0];if(Jb(_t))return ug(_t,null);if(ei(_t)&&Object.getPrototypeOf(_t)===Object.prototype)return ug(($=Object.keys(_t)).map(function(Wt){return _t[Wt]}),$)}if(typeof $[$.length-1]=="function"){var Vt=$.pop();return ug($=$.length===1&&Jb($[0])?$[0]:$,null).pipe(ba(function(Wt){return Vt.apply(void 0,Wt)}))}return ug($,null)}function ug($,_e){return new Y(function(_t){var Vt=$.length;if(Vt===0)_t.complete();else for(var Wt=Array(Vt),_i=0,_s=0,_c=function(_d){var _m=Kb($[_d]),e_=!1;_t.add(_m.subscribe({next:function(t_){e_||(e_=!0,_s++),Wt[_d]=t_},error:function(t_){return _t.error(t_)},complete:function(){++_i!==Vt&&e_||(_s===Vt&&_t.next(_e?_e.reduce(function(t_,i_,c_){return t_[i_]=Wt[c_],t_},{}):Wt),_t.complete())}}))},_l=0;_l<Vt;_l++)_c(_l)})}function gb($,_e,_t,Vt){return le(_t)&&(Vt=_t,_t=void 0),Vt?gb($,_e,_t).pipe(ba(function(Wt){return Jb(Wt)?Vt.apply(void 0,Wt):Vt(Wt)})):new Y(function(Wt){km($,_e,function(_i){1<arguments.length?Wt.next(Array.prototype.slice.call(arguments)):Wt.next(_i)},Wt,_t)})}function km($,_e,_t,Vt,Wt){if($&&typeof $.addEventListener=="function"&&typeof $.removeEventListener=="function"){$.addEventListener(_e,_t,Wt);var _i=function(){return $.removeEventListener(_e,_t,Wt)}}else if($&&typeof $.on=="function"&&typeof $.off=="function")$.on(_e,_t),_i=function(){return $.off(_e,_t)};else if($&&typeof $.addListener=="function"&&typeof $.removeListener=="function")$.addListener(_e,_t),_i=function(){return $.removeListener(_e,_t)};else{if(!$||!$.length)throw new TypeError("Invalid event target");for(var _s=0,_c=$.length;_s<_c;_s++)km($[_s],_e,_t,Vt,Wt)}Vt.add(_i)}function lm($,_e,_t){return _t?lm($,_e).pipe(ba(function(Vt){return Jb(Vt)?_t.apply(void 0,Vt):_t(Vt)})):new Y(function(Vt){var Wt=function(){for(var _s=[],_c=0;_c<arguments.length;_c++)_s[_c]=arguments[_c];return Vt.next(_s.length===1?_s[0]:_s)};try{var _i=$(Wt)}catch(_s){return void Vt.error(_s)}if(le(_e))return function(){return _e(Wt,_i)}})}function bt($){var _e=$.subscriber,_t=$.condition;if(!_e.closed){if($.needIterate)try{$.state=$.iterate($.state)}catch(_i){return void _e.error(_i)}else $.needIterate=!0;if(_t){var Vt=void 0;try{Vt=_t($.state)}catch(_i){return void _e.error(_i)}if(!Vt)return void _e.complete();if(_e.closed)return}try{var Wt=$.resultSelector($.state)}catch(_i){return void _e.error(_i)}if(!_e.closed&&(_e.next(Wt),!_e.closed))return this.schedule($)}}function ki($){return!Jb($)&&0<=$-parseFloat($)+1}function mm($,_e){return $===void 0&&($=0),_e===void 0&&(_e=bd),(!ki($)||0>$)&&($=0),_e&&typeof _e.schedule=="function"||(_e=bd),new Y(function(_t){return _t.add(_e.schedule(ct,$,{subscriber:_t,counter:0,period:$})),_t})}function ct($){var _e=$.subscriber,_t=$.counter;$=$.period,_e.next(_t),this.schedule({subscriber:_e,counter:_t+1,period:$},$)}function Xb(){for(var $=[],_e=0;_e<arguments.length;_e++)$[_e]=arguments[_e];_e=Number.POSITIVE_INFINITY;var _t=null,Vt=$[$.length-1];return Zc(Vt)?(_t=$.pop(),1<$.length&&typeof $[$.length-1]=="number"&&(_e=$.pop())):typeof Vt=="number"&&(_e=$.pop()),_t===null&&$.length===1&&$[0]instanceof Y?$[0]:tg(_e)(nf($,_t))}function li(){for(var $=[],_e=0;_e<arguments.length;_e++)$[_e]=arguments[_e];if($.length===0)return vb;var _t=$[0],Vt=$.slice(1);return $.length===1&&Jb(_t)?li.apply(void 0,_t):new Y(function(Wt){var _i=function(){return Wt.add(li.apply(void 0,Vt).subscribe(Wt))};return Kb(_t).subscribe({next:function(_s){Wt.next(_s)},error:_i,complete:_i})})}function dt($){var _e=$.keys,_t=$.index,Vt=$.subscriber,Wt=$.subscription;if($=$.obj,!Vt.closed)if(_t<_e.length){var _i=_e[_t];Vt.next([_i,$[_i]]),Wt.add(this.schedule({keys:_e,index:_t+1,subscriber:Vt,subscription:Wt,obj:$}))}else Vt.complete()}function et($,_e){function _t(){return!_t.pred.apply(_t.thisArg,arguments)}return _t.pred=$,_t.thisArg=_e,_t}function wb($,_e){return function(_t){return _t.lift(new ft($,_e))}}function Ca(){for(var $=[],_e=0;_e<arguments.length;_e++)$[_e]=arguments[_e];if($.length===1){if(!Jb($[0]))return $[0];$=$[0]}return nf($,void 0).lift(new gt)}function ht($){var _e=$.start,_t=$.index,Vt=$.subscriber;_t>=$.count?Vt.complete():(Vt.next(_e),Vt.closed||($.index=_t+1,$.start=_e+1,this.schedule($)))}function Bc($,_e,_t){$===void 0&&($=0);var Vt=-1;return ki(_e)?Vt=1>Number(_e)?1:Number(_e):Zc(_e)&&(_t=_e),Zc(_t)||(_t=bd),new Y(function(Wt){var _i=ki($)?$:+$-_t.now();return _t.schedule(it,_i,{index:0,period:Vt,subscriber:Wt})})}function it($){var _e=$.index,_t=$.period,Vt=$.subscriber;if(Vt.next(_e),!Vt.closed){if(_t===-1)return Vt.complete();$.index=_e+1,this.schedule($,_t)}}function mi(){for(var $=[],_e=0;_e<arguments.length;_e++)$[_e]=arguments[_e];return typeof(_e=$[$.length-1])=="function"&&$.pop(),nf($,void 0).lift(new jt(_e))}function Ga($){return function(_e){var _t=new kt($);return _e=_e.lift(_t),_t.caught=_e}}function ni($,_e){return cb($,_e,1)}function nm($){return $===void 0&&($=null),function(_e){return _e.lift(new lt($))}}function cd($,_e){_e===void 0&&(_e=bd);var _t=$ instanceof Date&&!isNaN(+$)?+$-_e.now():Math.abs($);return function(Vt){return Vt.lift(new mt(_t,_e))}}function om($,_e){return function(_t){return _t.lift(new nt($,_e))}}function Dd($){return $===void 0&&($=ot),function(_e){return _e.lift(new pt($))}}function ot(){return new vg}function Ka($){return function(_e){return $===0?mf():_e.lift(new qt($))}}function pm($,_e){return _e?function(_t){return _t.pipe(pm(function(Vt,Wt){return Kb($(Vt,Wt)).pipe(ba(function(_i,_s){return _e(Vt,_i,Wt,_s)}))}))}:function(_t){return _t.lift(new rt($))}}function wg($){return function(_e){return _e.lift(new st($))}}function aa($,_e){var _t=2<=arguments.length;return function(Vt){return Vt.pipe($?wb(function(Wt,_i){return $(Wt,_i,Vt)}):Yc,Ka(1),_t?nm(_e):Dd(function(){return new vg}))}}function tt(){return function($){return $.lift(new ut)}}function qm($){return function(_e){return $===0?mf():_e.lift(new vt($))}}function qf($){return function(_e){return _e.lift(new wt($))}}function xg($,_e){var _t=!1;return 2<=arguments.length&&(_t=!0),function(Vt){return Vt.lift(new xt($,_e,_t))}}function rm($,_e){return 2<=arguments.length?function(_t){return gi(xg($,_e),qm(1),nm(_e))(_t)}:function(_t){return gi(xg(function(Vt,Wt,_i){return $(Vt,Wt,_i+1)}),qm(1))(_t)}}function yt($,_e){return function(_t){var Vt=typeof $=="function"?$:function(){return $};if(typeof _e=="function")return _t.lift(new zt(Vt,_e));var Wt=Object.create(_t,At);return Wt.source=_t,Wt.subjectFactory=Vt,Wt}}function oe($){return function(_e){return _e.lift(new Bt($,_e))}}function Ct(){return new Pa}function pe(){return function($){return $l()(yt(Ct)($))}}function sm($,_e,_t){var Vt=$&&X($)==="object"?$:{bufferSize:$,windowTime:_e,refCount:!1,scheduler:_t};return function(Wt){return Wt.lift(Dt(Vt))}}function Dt($){var _e,_t,Vt=$.bufferSize,Wt=Vt===void 0?Number.POSITIVE_INFINITY:Vt,_i=(Vt=$.windowTime)===void 0?Number.POSITIVE_INFINITY:Vt,_s=$.refCount,_c=$.scheduler,_l=0,_d=!1,_m=!1;return function(e_){if(_l++,!_e||_d){_d=!1;var t_=(_e=new qe(Wt,_i,_c)).subscribe(this);_t=e_.subscribe({next:function(i_){_e.next(i_)},error:function(i_){_d=!0,_e.error(i_)},complete:function(){_m=!0,_t=void 0,_e.complete()}}),_m&&(_t=void 0)}else t_=_e.subscribe(this);this.add(function(){_l--,t_.unsubscribe(),t_=void 0,_t&&!_m&&_s&&_l===0&&(_t.unsubscribe(),_e=_t=void 0)})}}function Cc($,_e){return typeof _e=="function"?function(_t){return _t.pipe(Cc(function(Vt,Wt){return Kb($(Vt,Wt)).pipe(ba(function(_i,_s){return _e(Vt,_i,Wt,_s)}))}))}:function(_t){return _t.lift(new Et($))}}function ob($){return function(_e){return _e.lift(new Ft($))}}function Gt($,_e){return _e===void 0&&(_e=!1),function(_t){return _t.lift(new Ht($,_e))}}function ca($,_e,_t){return function(Vt){return Vt.lift(new It($,_e,_t))}}function Jt($,_e,_t){return _e===void 0&&(_e=bd),_t===void 0&&(_t=Kt),function(Vt){return Vt.lift(new Lt($,_e,_t.leading,_t.trailing))}}function Mt($){$.subscriber.clearThrottle()}function Nt($,_e,_t){return _t===void 0&&(_t=bd),function(Vt){var Wt=$ instanceof Date&&!isNaN(+$),_i=Wt?+$-_t.now():Math.abs($);return Vt.lift(new Ot(_i,Wt,_e,_t))}}function hb($,_e){return _e===void 0&&(_e=bd),Nt($,Z(new pb),_e)}function Pt(){for(var $=[],_e=0;_e<arguments.length;_e++)$[_e]=arguments[_e];return function(_t){var Vt;return typeof $[$.length-1]=="function"&&(Vt=$.pop()),_t.lift(new Qt($,Vt))}}function tm($,_e,_t,Vt,Wt){$!==_e&&um(_e,function(_i,_s){if(Wt||(Wt=new ge),lb(_i)){_i=Wt;var _c=oi($,_s),_l=oi(_e,_s),_d=_i.get(_l);if(_d)pi($,_s,_d);else{var _m=(_d=Vt?Vt(_c,_l,_s+"",$,_e,_i):void 0)===void 0;if(_m){var e_=Va(_l),t_=!e_&&jf(_l),i_=!e_&&!t_&&bi(_l);_d=_l,e_||t_||i_?Va(_c)?_d=_c:gc(_c)&&Ed(_c)?_d=Xh(_c):t_?(_m=!1,_d=Jl(_l,!0)):i_?(_m=!1,_d=vm(_l,!0)):_d=[]:wm(_l)||rf(_l)?(_d=_c,rf(_c)?_d=re(_c,kf(_c)):lb(_c)&&!qi(_c)||(_d=Kl(_l))):_m=!1}_m&&(_i.set(_l,_d),tm(_d,_l,_t,Vt,_i),_i.delete(_l)),pi($,_s,_d)}}else(_c=Vt?Vt(oi($,_s),_i,_s+"",$,_e,Wt):void 0)===void 0&&(_c=_i),pi($,_s,_c)},kf)}function Rt($){var _e=1,_t=ri;(1>=arguments.length?0:arguments.length-1)==1?typeof(1>=arguments.length?void 0:arguments[1])=="number"?_e=1>=arguments.length?void 0:arguments[1]:_t=1>=arguments.length?void 0:arguments[1]:(1>=arguments.length?0:arguments.length-1)==2&&(_e=1>=arguments.length?void 0:arguments[1],_t=2>=arguments.length?void 0:arguments[2]);var Vt=_e||1;return function(Wt){return Wt.pipe(xg(function(_i,_s){var _c=_t.now(),_l=_c-$;if((_i=_i.filter(function(e_){return e_.until>_l})).length>=Vt){var _d=_i[_i.length-1],_m=_i[0].until+$*Math.floor(_i.length/Vt);_i.push({delay:_d.until<_c?_m-_c:_m-_d.until,until:_m,value:_s})}else _i.push({delay:0,until:_c,value:_s});return _i},[]),ba(function(_i){return _i[_i.length-1]}),ni(function(_i){var _s=bb(_i.value);return _i.delay?_s.pipe(cd(_i.delay,_t)):_s}))}}function St($,_e){var _t=(_e=_e===void 0?{protocols:xm,makeWebSocket:ym}:_e).protocols,Vt=_t===void 0?xm:_t,Wt=(_e=_e.makeWebSocket)===void 0?ym:_e;return new Y(function(_i){var _s,_c=new Pa,_l=Wt($,Vt),_d=!1,_m=!1,e_=function(t_){if(_s)throw _d=!0,t_=Error("Web socket message factory function called more than once"),_i.error(t_),t_;return _s=t_.subscribe(function(i_){_l.send(i_)}),_c};return _l.onopen=function(){_m?(_d=!0,_l.close()):_i.next(e_)},_l.onmessage=function(t_){_c.next(t_.data)},_l.onerror=function(t_){_d=!0,_i.error(Error(t_.message))},_l.onclose=function(t_){_d||(_d=!0,_m?(_i.complete(),_c.complete()):_i.error(Error(t_.code===1e3?"Normal closure":t_.reason)))},function(){_m=!0,_s&&_s.unsubscribe(),_d||(_d=!0,_l.close())}})}function yg(){this._listeners={}}function zm($){return typeof Float32Array<"u"?function(){function _e(_l,_d,_m){_i[0]=_l,_d[_m]=_s[0],_d[_m+1]=_s[1],_d[_m+2]=_s[2],_d[_m+3]=_s[3]}function _t(_l,_d,_m){_i[0]=_l,_d[_m]=_s[3],_d[_m+1]=_s[2],_d[_m+2]=_s[1],_d[_m+3]=_s[0]}function Vt(_l,_d){return _s[0]=_l[_d],_s[1]=_l[_d+1],_s[2]=_l[_d+2],_s[3]=_l[_d+3],_i[0]}function Wt(_l,_d){return _s[3]=_l[_d],_s[2]=_l[_d+1],_s[1]=_l[_d+2],_s[0]=_l[_d+3],_i[0]}var _i=new Float32Array([-0]),_s=new Uint8Array(_i.buffer),_c=_s[3]===128;$.writeFloatLE=_c?_e:_t,$.writeFloatBE=_c?_t:_e,$.readFloatLE=_c?Vt:Wt,$.readFloatBE=_c?Wt:Vt}():function(){function _e(Vt,Wt,_i,_s){var _c=0>Wt?1:0;if(_c&&(Wt=-Wt),Wt===0)Vt(0<1/Wt?0:2147483648,_i,_s);else if(isNaN(Wt))Vt(2143289344,_i,_s);else if(34028234663852886e22<Wt)Vt((_c<<31|2139095040)>>>0,_i,_s);else if(11754943508222875e-54>Wt)Vt((_c<<31|Math.round(Wt/1401298464324817e-60))>>>0,_i,_s);else{var _l=Math.floor(Math.log(Wt)/Math.LN2);Vt((_c<<31|_l+127<<23|8388607&Math.round(Wt*Math.pow(2,-_l)*8388608))>>>0,_i,_s)}}function _t(Vt,Wt,_i){return _i=Vt(Wt,_i),Vt=2*(_i>>31)+1,Wt=_i>>>23&255,_i&=8388607,Wt===255?_i?NaN:1/0*Vt:Wt===0?1401298464324817e-60*Vt*_i:Vt*Math.pow(2,Wt-150)*(_i+8388608)}$.writeFloatLE=_e.bind(null,Am),$.writeFloatBE=_e.bind(null,Bm),$.readFloatLE=_t.bind(null,Cm),$.readFloatBE=_t.bind(null,Dm)}(),typeof Float64Array<"u"?function(){function _e(_l,_d,_m){_i[0]=_l,_d[_m]=_s[0],_d[_m+1]=_s[1],_d[_m+2]=_s[2],_d[_m+3]=_s[3],_d[_m+4]=_s[4],_d[_m+5]=_s[5],_d[_m+6]=_s[6],_d[_m+7]=_s[7]}function _t(_l,_d,_m){_i[0]=_l,_d[_m]=_s[7],_d[_m+1]=_s[6],_d[_m+2]=_s[5],_d[_m+3]=_s[4],_d[_m+4]=_s[3],_d[_m+5]=_s[2],_d[_m+6]=_s[1],_d[_m+7]=_s[0]}function Vt(_l,_d){return _s[0]=_l[_d],_s[1]=_l[_d+1],_s[2]=_l[_d+2],_s[3]=_l[_d+3],_s[4]=_l[_d+4],_s[5]=_l[_d+5],_s[6]=_l[_d+6],_s[7]=_l[_d+7],_i[0]}function Wt(_l,_d){return _s[7]=_l[_d],_s[6]=_l[_d+1],_s[5]=_l[_d+2],_s[4]=_l[_d+3],_s[3]=_l[_d+4],_s[2]=_l[_d+5],_s[1]=_l[_d+6],_s[0]=_l[_d+7],_i[0]}var _i=new Float64Array([-0]),_s=new Uint8Array(_i.buffer),_c=_s[7]===128;$.writeDoubleLE=_c?_e:_t,$.writeDoubleBE=_c?_t:_e,$.readDoubleLE=_c?Vt:Wt,$.readDoubleBE=_c?Wt:Vt}():function(){function _e(Vt,Wt,_i,_s,_c,_l){var _d=0>_s?1:0;if(_d&&(_s=-_s),_s===0)Vt(0,_c,_l+Wt),Vt(0<1/_s?0:2147483648,_c,_l+_i);else if(isNaN(_s))Vt(0,_c,_l+Wt),Vt(2146959360,_c,_l+_i);else if(17976931348623157e292<_s)Vt(0,_c,_l+Wt),Vt((_d<<31|2146435072)>>>0,_c,_l+_i);else if(22250738585072014e-324>_s)Vt((_s/=5e-324)>>>0,_c,_l+Wt),Vt((_d<<31|_s/4294967296)>>>0,_c,_l+_i);else{var _m=Math.floor(Math.log(_s)/Math.LN2);_m===1024&&(_m=1023),Vt(4503599627370496*(_s*=Math.pow(2,-_m))>>>0,_c,_l+Wt),Vt((_d<<31|_m+1023<<20|1048576*_s&1048575)>>>0,_c,_l+_i)}}function _t(Vt,Wt,_i,_s,_c){return Wt=Vt(_s,_c+Wt),_s=Vt(_s,_c+_i),Vt=2*(_s>>31)+1,Wt=4294967296*(1048575&_s)+Wt,(_i=_s>>>20&2047)===2047?Wt?NaN:1/0*Vt:_i===0?5e-324*Vt*Wt:Vt*Math.pow(2,_i-1075)*(Wt+4503599627370496)}$.writeDoubleLE=_e.bind(null,Am,0,4),$.writeDoubleBE=_e.bind(null,Bm,4,0),$.readDoubleLE=_t.bind(null,Cm,0,4),$.readDoubleBE=_t.bind(null,Dm,4,0)}(),$}function Am($,_e,_t){_e[_t]=255&$,_e[_t+1]=$>>>8&255,_e[_t+2]=$>>>16&255,_e[_t+3]=$>>>24}function Bm($,_e,_t){_e[_t]=$>>>24,_e[_t+1]=$>>>16&255,_e[_t+2]=$>>>8&255,_e[_t+3]=255&$}function Cm($,_e){return($[_e]|$[_e+1]<<8|$[_e+2]<<16|$[_e+3]<<24)>>>0}function Dm($,_e){return($[_e]<<24|$[_e+1]<<16|$[_e+2]<<8|$[_e+3])>>>0}function Wa($,_e){this.lo=$>>>0,this.hi=_e>>>0}function sf($,_e,_t){this.fn=$,this.len=_e,this.next=void 0,this.val=_t}function si(){}function Tt($){this.head=$.head,this.tail=$.tail,this.len=$.len,this.next=$.states}function ja(){this.len=0,this.tail=this.head=new sf(si,0,0),this.states=null}function ti($,_e,_t){_e[_t]=255&$}function ui($,_e){this.len=$,this.next=void 0,this.val=_e}function vi($,_e,_t){for(;$.hi;)_e[_t++]=127&$.lo|128,$.lo=($.lo>>>7|$.hi<<25)>>>0,$.hi>>>=7;for(;127<$.lo;)_e[_t++]=127&$.lo|128,$.lo>>>=7;_e[_t++]=$.lo}function wi($,_e,_t){_e[_t]=255&$,_e[_t+1]=$>>>8&255,_e[_t+2]=$>>>16&255,_e[_t+3]=$>>>24}function jc(){xi.call(this)}function Ut($,_e,_t){40>$.length?V.utf8.write($,_e,_t):_e.utf8Write?_e.utf8Write($,_t):_e.write($,_t)}function Yb($,_e){return RangeError("index out of range: "+$.pos+" + "+(_e||1)+" > "+$.len)}function La($){this.buf=$,this.pos=0,this.len=$.length}function yi(){var $=new Em(0,0),_e=0;if(!(4<this.len-this.pos)){for(;3>_e;++_e){if(this.pos>=this.len)throw Yb(this);if($.lo=($.lo|(127&this.buf[this.pos])<<7*_e)>>>0,128>this.buf[this.pos++])return $}return $.lo=($.lo|(127&this.buf[this.pos++])<<7*_e)>>>0,$}for(;4>_e;++_e)if($.lo=($.lo|(127&this.buf[this.pos])<<7*_e)>>>0,128>this.buf[this.pos++])return $;if($.lo=($.lo|(127&this.buf[this.pos])<<28)>>>0,$.hi=($.hi|(127&this.buf[this.pos])>>4)>>>0,128>this.buf[this.pos++])return $;if(_e=0,4<this.len-this.pos){for(;5>_e;++_e)if($.hi=($.hi|(127&this.buf[this.pos])<<7*_e+3)>>>0,128>this.buf[this.pos++])return $}else for(;5>_e;++_e){if(this.pos>=this.len)throw Yb(this);if($.hi=($.hi|(127&this.buf[this.pos])<<7*_e+3)>>>0,128>this.buf[this.pos++])return $}throw Error("invalid varint encoding")}function zg($,_e){return($[_e-4]|$[_e-3]<<8|$[_e-2]<<16|$[_e-1]<<24)>>>0}function Fm(){if(this.pos+8>this.len)throw Yb(this,8);return new Em(zg(this.buf,this.pos+=4),zg(this.buf,this.pos+=4))}function Fd($){zi.call(this,$)}function tf($,_e,_t){if(typeof $!="function")throw TypeError("rpcImpl must be a function");V.EventEmitter.call(this),this.rpcImpl=$,this.requestDelimited=!!_e,this.responseDelimited=!!_t}function za($){return typeof $=="string"&&/^[\s\w!#$%&()+,.:;<=>?@[\]^{|}~-]{1,64}$/.test($)&&$!=="null"}function Gm($){try{var _e=$.split(".").map(function(Vt){return Number(Vt)})}catch{return!1}if(_e.length!==4||_e[0]===0)return!1;for($=0;$<_e.length;$++){var _t=_e[$];if(!Number.isInteger(_t)||0>_t||255<_t)return!1}return!0}function Hm($,_e){if(!Array.isArray(_e)||_e.length===0||32<_e.length||_e.some(function(_t){return _t.length===0||32<_t.length}))throw new I("arguments is not valid",Ja);if(!za($))throw new I("ID is invalid",Ja)}function uf($){var _e=$.attributes,_t=$.attrSizeMap,Vt=$.maxAttrsCount,Wt=$.maxAttrValueSize;if($=$.maxTotalSize,!yd(_e))throw new I("attributes must be an object",Ja);if(Object.keys(_e).length>Vt)throw new ib("Exceed the limit of ".concat(Vt," attributes"),se);if(Object.keys(_e).length===0)throw new I("The attributes is an empty object",Ja);var _i=0,_s=0;for(_e=Object.entries(_e);_s<_e.length;_s++){var _c=ra(_e[_s],2),_l=_c[1];_c=new Blob([_c[0]]).size;var _d=new Blob([_l]).size;if(_c===0||32<_c)throw new I("Invalid attribute key",Ja);if(_d>Wt)throw new ib("Invalid attribute value, over the limit of ".concat(Wt," bytes"),se);if(typeof _l!="string"||_l.length===0)throw new I("Invalid attribute value",Ja);_i+=_c,_i+=_d}if(_i>$)throw new ib("The attributes size overflow",se);if(_t!==void 0){if(Object.keys(_t).length>Vt)throw new ib("Exceed the limit of ".concat(Vt," attributes"),se);for(_i=Vt=0,_t=Object.entries(_t);_i<_t.length;_i++){if(_s=(_e=ra(_t[_i],2))[1],(_e=new Blob([_e[0]]).size)===0)throw new I("Invalid attribute key",Ja);if(_s>Wt)throw new ib("Invalid attribute value, over the limit of ".concat(Wt," bytes"),se);Vt+=_e,Vt+=_s}if(Vt>$)throw new ib("The attributes size overflow",se)}}function Ag($,_e){return Math.floor(Math.random()*(Math.floor(_e)-Math.ceil($)+1))+$}function Bg(){var $=Ag(0,4294967295),_e=Ag(1,4294967295);return new U($,_e,!0)}function Xa($){return $.toString().padEnd(32,"0")}function Im($,_e){return new TypeError("Unexpected ".concat($,": ").concat(_e))}function Jm($,_e){return $=$.split(".").map(function(_t){return Number(_t)}),_e=_e.split(".").map(function(_t){return Number(_t)}),Math.sqrt(1e3*Math.pow($[0]-_e[0],2)+100*Math.pow($[1]-_e[1],2)+10*Math.pow($[2]-_e[2],2)+1*Math.pow($[3]-_e[3],2))}function Km($){return $.lessThanOrEqual(Number.MAX_SAFE_INTEGER)?$.toNumber():$.toString()}function Ai($,_e){_e="".concat($).concat(_e||"");var _t=Lm.get(_e)||1;return Lm.set(_e,_t+1),"".concat($).concat(_t)}function Mm($,_e){var _t=typeof _e=="number"?_e:_e!==void 0&&typeof _e!="string"?_e.code:void 0;return _e=typeof _e!="number"&&typeof _e!="string"&&_e!==void 0&&_e.serverCode!==void 0?_e.serverCode:void 0,_t="".concat(_t!==void 0?" Error Code ".concat(_t):"").concat(_e!==void 0?", server Code ".concat(_e):""),$=typeof $=="string"&&$?Cg($):Array.isArray($)&&typeof $[0]=="string"&&$[0]?Cg(Nm.apply(void 0,[$[0]].concat(G($.slice(1))))):"","".concat(_t===""?"":"".concat(_t," - ")).concat($)}function Om($){return Bi.apply(this,arguments)}function Bi(){return(Bi=J(w.mark(function $(_e){return w.wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:return _t.abrupt("return",new Promise(function(Vt){setTimeout(function(){Vt()},_e)}));case 1:case"end":return _t.stop()}},$)}))).apply(this,arguments)}function Pm($){return $ instanceof Blob||Object.prototype.toString.call($)==="[object Blob]"}function Dg($){var _e=255&$,_t=$>>8&255,Vt=$>>16&255;return"".concat($>>24&255,".").concat(Vt,".").concat(_t,".").concat(_e)}function te($,_e,_t){return Ci.apply(this,arguments)}function Ci(){return(Ci=J(w.mark(function $(_e,_t,Vt){var Wt,_i,_s,_c,_l,_d,_m,e_,t_,i_,c_,h_,y_,l_,d_,f_,S_,T_,R_,C_,j_,W_,A_,$_,q_,G_;return w.wrap(function(I_){for(;;)switch(I_.prev=I_.next){case 0:if(Wt=_t.body,_i=_t.headers,_s=_i===void 0?{}:_i,_c=_t.timeout,_l=_c===void 0?1e4:_c,_d=_t.signal,_m=_t.withCredentials,e_=_m!==void 0&&_m,t_=(Vt||{}).useBinaryResponse,i_=t_!==void 0&&t_,(c_=new XMLHttpRequest).open("POST",_e,!0),c_.responseType=i_?"arraybuffer":"text",c_.withCredentials=e_,c_.timeout=_l,h_=Wt instanceof FormData,y_=Wt instanceof Uint8Array,!(1<(l_=Object.keys(_s).filter(function(x_){return x_.toLowerCase()==="content-type"})).length)){I_.next=14;break}throw new RangeError("multiple content-type");case 14:l_.length===0&&(y_?_s["Content-Type"]="application/octet-stream":h_||(_s["Content-Type"]="application/json"));case 15:if("setRequestHeader"in c_){I_.next=46;break}return c_.abort(),I_.next=19,fetch(_e,{body:h_||y_?Wt:JSON.stringify(Wt),cache:"no-cache",credentials:e_?"include":"same-origin",headers:_s,method:"POST",mode:"cors",referrer:"no-referrer",signal:_d});case 19:if(d_=I_.sent,!(200<=(f_=d_.status)&&300>f_||f_===304)){I_.next=31;break}if(!i_){I_.next=27;break}return I_.next=25,d_.arrayBuffer();case 25:return S_=I_.sent,I_.abrupt("return",{status:f_,responseData:S_});case 27:return I_.next=29,d_.text();case 29:return T_=I_.sent,I_.abrupt("return",{status:f_,responseText:T_});case 31:return R_=new da(["Post XHR failure, status %d",f_]),I_.prev=32,I_.next=35,d_.text();case 35:throw C_=I_.sent,R_.statusCode=f_,R_.message=C_||"Request failed, status ".concat(f_),R_;case 41:throw I_.prev=41,I_.t0=I_.catch(32),R_.statusCode=f_,R_.message="Request failed, status ".concat(f_),R_;case 46:if(Object.keys(_s).length!==0)for(j_=0,W_=Object.entries(_s);j_<W_.length;j_++)A_=ra(W_[j_],2),$_=A_[0],q_=A_[1],c_.setRequestHeader($_,q_);return _d!==void 0&&(G_=function x_(){c_.abort(),_d.removeEventListener("abort",x_)},_d.addEventListener("abort",G_)),h_||y_?c_.send(Wt):c_.send(JSON.stringify(Wt)),I_.abrupt("return",new Promise(function(x_,Y_){c_.onload=function(){var z_=c_.status;if(200<=z_&&300>z_||z_===304)x_(i_?{status:z_,responseData:c_.response}:{status:z_,responseText:c_.responseText});else{var B_=new da(["Post XHR failure, status %d",z_]);B_.statusCode=z_,B_.message=c_.response||"Request failed, status ".concat(c_.status),Y_(B_)}},c_.ontimeout=function(z_){Y_(new db(["XHR request timed out after %d ms",_l],{originalError:z_}))},c_.onerror=function(){var z_=new da(["Post XHR failure, status %d",c_.status]);z_.statusCode=c_.status,z_.message=c_.response||"Request failed, status ".concat(c_.status),Y_(z_)},c_.onabort=function(){try{Y_(new DOMException("The request aborted.","AbortError"))}catch{var z_=Error("The request aborted.");z_.name="AbortError",Y_(z_)}}}));case 50:case"end":return I_.stop()}},$,null,[[32,41]])}))).apply(this,arguments)}function Rm($){return Hi.apply(this,arguments)}function Hi(){return(Hi=J(w.mark(function $(_e){var _t;return w.wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:return(_t=new Image).src=_e,Vt.abrupt("return",new Promise(function(Wt,_i){_t.onload=function(){Wt({width:_t.width,height:_t.height})},_t.onerror=_i}));case 3:case"end":return Vt.stop()}},$)}))).apply(this,arguments)}function Xt($,_e){return Ii.apply(this,arguments)}function Ii(){return(Ii=J(w.mark(function $(_e,_t){var Vt,Wt,_i,_s,_c,_l,_d,_m,e_,t_;return w.wrap(function(i_){for(;;)switch(i_.prev=i_.next){case 0:if(Vt=_e.thumbnailHeight,Wt=Vt===void 0?0:Vt,_i=_e.thumbnailWidth,_s=_i===void 0?0:_i,_c=_e.width,_l=_c===void 0?0:_c,_d=_e.height,_m=_d===void 0?0:_d,e_=_e.thumbnail,t_=[],typeof Wt=="number"&&typeof _s=="number"&&typeof _l=="number"&&typeof _m=="number"){i_.next=5;break}throw new I("Invalid message params",wf);case 5:return 0>=_l&&0>=_m&&t_.push(Rm(Sm(_t)).then(function(c_){_l=c_.width,_m=c_.height})),0>=_s&&0>=Wt&&e_!==void 0&&t_.push(Ji(e_).then(function(){var c_=J(w.mark(function h_(y_){var l_;return w.wrap(function(d_){for(;;)switch(d_.prev=d_.next){case 0:return d_.next=2,Rm(Sm(y_));case 2:l_=d_.sent,_s=l_.width,Wt=l_.height;case 5:case"end":return d_.stop()}},h_)}));return function(h_){return c_.apply(this,arguments)}}())),i_.next=9,Promise.all(t_).catch(function(){});case 9:return i_.abrupt("return",{width:_l,height:_m,thumbnailWidth:_s,thumbnailHeight:Wt});case 10:case"end":return i_.stop()}},$)}))).apply(this,arguments)}function Tm($,_e){if(!yd($))throw new I("message object is not a plain object",_e);if($.messageType===void 0)if($.rawMessage instanceof Uint8Array){if($.messageType="RAW",$.text!==void 0)throw new I("Raw messages cannot have text property. Use description instead",_e)}else{if(typeof $.text!="string")throw new I("messageType is undefined",_e);if($.messageType="TEXT",$.rawMessage!==void 0)throw new I("Text messages cannot have rawMessage property",_e)}}function Gg($){return Ki.apply(this,arguments)}function Ki(){return(Ki=J(w.mark(function $(_e){var _t,Vt,Wt,_i,_s,_c,_l,_d,_m,e_,t_,i_,c_,h_,y_,l_,d_,f_,S_,T_,R_;return w.wrap(function(C_){for(;;)switch(C_.prev=C_.next){case 0:if(_t=_e.message,Vt=_e.peerId,Wt=_e.toPeer,_i=_e.session,_s=_e.errorCodes,_c=_e.diff,_l=_e.logger,_d=_e.options,_i!==void 0){C_.next=3;break}throw new K("The client is not logged in. Cannot do the operation",_s.NOT_LOGGED_IN);case 3:if(_m=!1,_t.messageType!=="TEXT"||!_t.text.startsWith("AgoraRTMLegacyEndcallCompatibleMessagePrefix")||!Wt){C_.next=11;break}if(e_=_t.text.split("_"),t_=ra(e_,3),i_=t_[0],c_=t_[1],t_[2]!==void 0&&za(c_)&&i_==="AgoraRTMLegacyEndcallCompatibleMessagePrefix"){C_.next=10;break}throw new I("Message is not valid",ve);case 10:_m=!0;case 11:if(h_=Date.now(),y_=_i.messageSentTimes.length-1,!((l_=_i.messageSentTimes[y_])&&l_+3e3<h_)){C_.next=18;break}_i.messageSentTimes=[h_],C_.next=29;break;case 18:d_=y_;case 19:if(!(0<=d_)){C_.next=28;break}if(!(_i.messageSentTimes[d_]+3e3<h_)){C_.next=23;break}return _i.messageSentTimes=_i.messageSentTimes.slice(d_+1,y_+1),C_.abrupt("break",28);case 23:if(!(180<=y_-d_+1)){C_.next=25;break}throw new ib("Message sent failed, exceeded the 180 message in 3 seconds",_s.TOO_OFTEN);case 25:d_--,C_.next=19;break;case 28:_i.messageSentTimes.push(h_);case 29:C_.t0=_t.messageType,C_.next=C_.t0==="TEXT"?32:C_.t0==="RAW"?37:C_.t0==="FILE"||C_.t0==="IMAGE"?39:40;break;case 32:if(!_m){C_.next=36;break}return f_=_t.text.split("_"),S_=ra(f_,3),T_=S_[1],R_=S_[2],_l.info("[rtm-API] EndCall message send api is called"),C_.abrupt("return",_i.sendInvitationMessage({peerId:Vt,type:"CallCancel",extra:R_,channelId:T_,callId:"0"}));case 36:return C_.abrupt("return",_i.sendTextMessage(_t.text,Vt,Wt,_d,1e4-_c));case 37:return _t.description===void 0&&(_t.description=""),C_.abrupt("return",_i.sendRawMessage(_t.rawMessage,_t.description,Vt,Wt,_d,1e4-_c));case 39:return C_.abrupt("return",_i.sendMediaMessage(_t.messageType,_t,Vt,Wt,_d,1e4-_c));case 40:throw new I("Invalid message type",ve);case 41:case"end":return C_.stop()}},$)}))).apply(this,arguments)}function Yt($){var _e=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1],_t=$.replace(/(https?:\/\/)?(www.)?/i,"");return _e||(_t=_t.split(".").slice($.length-2).join(".")),_t.indexOf("/")!==-1?_t.split("/")[0]:_t}function oa($){if(typeof $!="string")return"[Sensitive Info]";var _e=Math.floor(.7*$.length),_t=$.length;return Um($,_e,_t,"*".repeat(_t-_e))}function Vm($,_e,_t){function Vt(Wt){if($===void 0)return $;if(Il(Wt))return Wt;if(Array.isArray(Wt))return Wt.map(Vt);var _i={},_s=0;for(Wt=Hg(Wt);_s<Wt.length;_s++){var _c=ra(Wt[_s],2),_l=_c[0];if(typeof(_c=_c[1])=="string"&&_t.includes(_l)){_i[_l]=typeof _c=="string"?oa(_c):"[Sensitive Info]";break}_e.includes(_l)?_i[_l]="[Hidden Info]":_i[_l]=_c==null?_c:_t.includes(_l)?"[Sensitive Info]":Vt(_c)}return _i}return Array.isArray($)?$.map(Vt):Vt($)}function Wm($){return Object.getOwnPropertyNames($).forEach(function(_e){X(_e=$[_e])=="object"&&_e!==null&&Wm(_e)}),Object.freeze($)}function pa($){return new TextDecoder("utf-8").decode($.buffer.slice($.byteOffset,$.byteOffset+$.byteLength))}function Ig($){return new TextEncoder().encode($).length}function Xm(){for(var $=0,_e=arguments.length,_t=Array(_e),Vt=0;Vt<_e;Vt++)_t[Vt]=arguments[Vt];for(_e=0;_e<_t.length;_e++)$+=_t[_e].length;for($=new Uint8Array($),Vt=_e=0;Vt<_t.length;Vt++){var Wt=_t[Vt];$.set(Wt,_e),_e+=Wt.length}return $}function we($,_e,_t){var Vt=$.match(/([^?#]+)(\?[^#]*)?(#.*)?/);if($=Vt==null?void 0:Vt[1],Vt=Vt==null?void 0:Vt[2]){var Wt;for(Vt=Vt.substr(1).split("&"),Wt=0;Wt<Vt.length;Wt++)if(Vt[Wt].split("=")[0]==_e){Vt[Wt]=_e+"="+encodeURIComponent(_t);break}return Wt==Vt.length&&Vt.push(_e+"="+encodeURIComponent(_t)),$+"?"+Vt.join("&")}return $+"?"+_e+"="+encodeURIComponent(_t)}function Ji($){return new Promise(function(_e,_t){var Vt=new FileReader;Vt.onloadend=function(){var Wt=Vt.result||new ArrayBuffer(0);_e(Wt)},Vt.onerror=_t,Vt.readAsArrayBuffer($)})}function Zt($,_e){$=$=[$],typeof(_e=_e||{})=="string"&&(_e={type:_e});try{var _t=new Blob($,_e)}catch(Wt){if(Wt.name!=="TypeError")throw Wt;_t=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder);for(var Vt=0;Vt<$.length;Vt+=1)_t.append($[Vt]);_t=_t.getBlob(_e.type)}return _t}function Um($,_e,_t,Vt){return typeof $!="string"?"[Sensitive Info]":$.substring(0,_e)+Vt+$.substring(_t)}function Ym($){var _e=[];return function _t(Vt){if(Vt===null||X(Vt)!=="object")return Vt;if(_e.indexOf(Vt)!==-1)return"[Circular]";if(_e.push(Vt),typeof Vt.toJSON=="function")try{var Wt=_t(Vt.toJSON());return _e.pop(),Wt}catch(_i){return"[Throws: "+(_i?_i.message:"?")+"]"}return Array.isArray(Vt)?(Wt=Vt.map(_t),_e.pop(),Wt):(Wt=Object.keys(Vt).reduce(function(_i,_s){e:{if($t.call(Vt,_s))try{var _c=Vt[_s];break e}catch(_l){_c="[Throws: "+(_l?_l.message:"?")+"]";break e}_c=Vt[_s]}return _i[_s]=_t(_c),_i},{}),_e.pop(),Wt)}($)}function au($){if(!(100<($=String($)).length)&&($=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec($))){var _e=parseFloat($[1]);switch(($[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*_e;case"weeks":case"week":case"w":return 6048e5*_e;case"days":case"day":case"d":return 864e5*_e;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*_e;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*_e;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*_e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return _e}}}function Jg($,_e,_t,Vt){return Math.round($/_t)+" "+Vt+(_e>=1.5*_t?"s":"")}function bu($){var _e=$.areas,_t=$.excludedArea;if(_e.length===1&&_e[0]===F.GLOBAL&&_t===F.CHINA)return xe([F.OVERSEA]);if(_e.includes(F.GLOBAL)){if($=xf(Kg).filter(function(_i){return _i!==F.GLOBAL&&_i!==F.OVERSEA}),_t in yf){_e=yf[_t];var Vt=[].concat(G(_e??[]),[_t]);return xe($.filter(function(_i){return!Vt.includes(_i)}))}if(Zm(_t)){var Wt=cu(_t);return xe($.filter(function(_i){return _i!==_t&&_i!==Wt}))}}if(Zm(_t)||_t in yf)return xe(_e);throw new I("Invalid excludedArea area config")}function Ma($,_e,_t){_t===void 0&&(_t=Object.getOwnPropertyDescriptor($,_e));var Vt=_t.value;return _t.value=function(){for(var Wt=this,_i=arguments.length,_s=Array(_i),_c=0;_c<_i;_c++)_s[_c]=arguments[_c];this.invokeTracker.apply(this,["%s: ".concat(0<_s.length?"%s with args: ".concat(_s.map(function(){return"%o"})):"%s"),this.name,_e].concat(G(_s.map(ye))));try{var _l=Vt.apply(this,_s)}catch(_m){throw this.logError.apply(this,["".concat(_m.code!==void 0?"Error Code ".concat(_m.code,": "):"","%s failed").concat(0<_s.length?" with args: ".concat(_s.map(function(){return"%o"})):""),_e].concat(G(_s.map(ye)))),_m.originalError&&this.logError(_m.originalError),this.errorTracker(_m),_m}var _d=Date.now();return J(w.mark(function _m(){var e_,t_;return w.wrap(function(i_){for(;;)switch(i_.prev=i_.next){case 0:return i_.prev=0,i_.next=3,_l;case 3:e_=i_.sent,i_.next=12;break;case 6:return i_.prev=6,i_.t0=i_.catch(0),Wt.logError.apply(Wt,["".concat(i_.t0.code!==void 0?"Error Code ".concat(i_.t0.code,": "):"","%s failed").concat(0<_s.length?" with args: ".concat(_s.map(function(){return"%o"})):""),_e].concat(G(_s.map(ye)))),i_.t0.originalError&&Wt.logError(i_.t0.originalError),Wt.errorTracker(i_.t0),i_.abrupt("return");case 12:e_!==_l?e_===void 0?Wt.resultTracker("%s promise resolves after %dms",_e,Date.now()-_d):Wt.resultTracker("%s promise resolves after %dms, result is %o",_e,Date.now()-_d,ye(e_)):Ac(e_)!=="Object"||yd(e_)?Wt.resultTracker("%s result is %o",_e,ye(e_)):Wt.resultTracker("%s result is %s",_e,e_.name||((t_=e_.constructor)===null||t_===void 0?void 0:t_.name));case 13:case"end":return i_.stop()}},_m,null,[[0,6]])}))(),_l},_t}function Nb($,_e,_t){_t===void 0&&(_t=Object.getOwnPropertyDescriptor($,_e));var Vt=_t.value;return _t.value=function(){for(var Wt=this,_i=arguments.length,_s=Array(_i),_c=0;_c<_i;_c++)_s[_c]=arguments[_c];this.invokeTracker.apply(this,["%s: ".concat(0<_s.length?"%s with args: ".concat(_s.map(function(){return"%o"})):"%s"),this.name,_e].concat(_s));try{var _l=Vt.apply(this,_s)}catch(_m){throw this.logError.apply(this,["".concat(_m.code!==void 0?"Error Code ".concat(_m.code,": "):"","%s failed").concat(0<_s.length?" with args: ".concat(_s.map(function(){return"%o"})):""),_e].concat(_s)),_m.originalError&&this.logError(_m.originalError),this.errorTracker(_m),_m}var _d=Date.now();return J(w.mark(function _m(){var e_,t_;return w.wrap(function(i_){for(;;)switch(i_.prev=i_.next){case 0:return i_.prev=0,i_.next=3,_l;case 3:e_=i_.sent,i_.next=12;break;case 6:return i_.prev=6,i_.t0=i_.catch(0),Wt.logError.apply(Wt,["".concat(i_.t0.code!==void 0?"Error Code ".concat(i_.t0.code,": "):"","%s failed").concat(0<_s.length?" with args: ".concat(_s.map(function(){return"%o"})):""),_e].concat(_s)),i_.t0.originalError&&Wt.logError(i_.t0.originalError),Wt.errorTracker(i_.t0),i_.abrupt("return");case 12:e_!==_l?e_===void 0?Wt.resultTracker("%s promise resolves after %dms",_e,Date.now()-_d):Wt.resultTracker("%s promise resolves after %dms, result is %o",_e,Date.now()-_d,e_):Ac(e_)!=="Object"||yd(e_)?Wt.resultTracker("%s result is %o",_e,e_):Wt.resultTracker("%s result is %s",_e,e_.name||((t_=e_.constructor)===null||t_===void 0?void 0:t_.name));case 13:case"end":return i_.stop()}},_m,null,[[0,6]])}))(),_l},_t}function du($,_e){var _t="".concat($,"Uri");if(typeof(_t=Li[_t])!="number"||_t===0)throw new TypeError("Got Unknown URI Name");return _e=new($=$m[$])(_e),_e=$.encode(_e).finish(),new eu({uri:_t,data:_e})}function an($,_e){return"".concat($.split(".").join("-"),".edge.").concat(_e?"sd-rtn.com":"agora.io")}function eb($,_e,_t){return Mi.apply(this,arguments)}function Mi(){return(Mi=J(w.mark(function $(_e,_t,Vt){var Wt,_i;return w.wrap(function(_s){for(;;)switch(_s.prev=_s.next){case 0:_s.next=2;break;case 2:return Wt=fu[_e].encode(_t).finish(),_i=function(){var _c=J(w.mark(function _l(_d){var _m,e_,t_,i_=arguments;return w.wrap(function(c_){for(;;)switch(c_.prev=c_.next){case 0:if(!(3<(e_=1<i_.length&&i_[1]!==void 0?i_[1]:0))){c_.next=3;break}return c_.abrupt("return");case 3:return t_=we(t_=Vt?"https://".concat((_m=M==null?void 0:M.PROXY_NGINX[0])!==null&&_m!==void 0?_m:"webrtc-cloud-proxy.sd-rtn.com","/rs/?h=").concat(_d,"&p=6443&d=events/proto-raw"):"https://".concat(_d,":6443/events/proto-raw"),"sentTs",Math.ceil(Date.now()/1e3).toString()),t_=we(t_,"id",gu[_e].toString()),c_.next=8,te(t_,{body:Wt,timeout:2e4,headers:{"Content-Type":"application/octet-stream"}}).catch(function(h_){return _i(_d,e_+1)});case 8:case"end":return c_.stop()}},_l)}));return function(_l){return _c.apply(this,arguments)}}(),_s.prev=4,_s.next=7,_i((M==null?void 0:M.EVENT_REPORT_DOMAIN[0])||"webcollector-rtm.agora.io");case 7:_s.next=13;break;case 9:return _s.prev=9,_s.t0=_s.catch(4),_s.next=13,_i(M&&bn(1<(M==null?void 0:M.EVENT_REPORT_DOMAIN.length)?M==null?void 0:M.EVENT_REPORT_DOMAIN.slice(1):M==null?void 0:M.EVENT_REPORT_DOMAIN)||"rtm.statscollector.sd-rtn.com");case 13:case"end":return _s.stop()}},$,null,[[4,9]])}))).apply(this,arguments)}function fb($){return $===void 0?U.fromNumber(0):U.fromNumber(Date.now()-$)}function hu($){return btoa(String.fromCharCode.apply({},$.replace(/\r|\n/g,"").replace(/([\dA-Fa-f]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ").map(function(_e){return parseInt(_e,16)}))).replace(/={1,2}$/,"")}function Lg($,_e){return U.fromValue($).eq(_e)}function Mg($,_e){var _t=_e===void 0?$.val:_e,Vt=$.isBoolean;_e=$.isNumber;var Wt=$.oneof,_i=$.len;if([Vt,_e,Wt].filter(function(_s){return!_s}).length!==2)throw new TypeError("invalid field type");if(_t!==void 0&&($=!1,Wt!==void 0&&(Wt=Ni(Wt),iu(Wt,Lg).length===Wt.length&&ju(Wt,function(_s){return Lg(_t,_s)})!==void 0&&($=!0)),Vt=Vt!==void 0&&(_t===0||_t===1)&&_i===1,_e=_e!==void 0&&_t.toString(2).length<=_i,!($||Vt||_e)))throw Error("invalid field value")}function cn($){return function(){var _e=$();if(!_e)throw new K("Client is not logged in. Cannot do the operation");return _e}}var Ya=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:{},Ng=function($){return $&&$.Math==Math&&$},y=Ng(typeof globalThis=="object"&&globalThis)||Ng(typeof window=="object"&&window)||Ng(typeof self=="object"&&self)||Ng(typeof Ya=="object"&&Ya)||function(){return this}()||Function("return this")(),R=function($){try{return!!$()}catch{return!0}},ka=!R(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),dn={}.propertyIsEnumerable,en=Object.getOwnPropertyDescriptor,zf=en&&!dn.call({1:2},1)?function($){return!!($=en(this,$))&&$.enumerable}:dn,dd=function($,_e){return{enumerable:!(1&$),configurable:!(2&$),writable:!(4&$),value:_e}},ku={}.toString,Zb=function($){return ku.call($).slice(8,-1)},lu="".split,Af=R(function(){return!Object("z").propertyIsEnumerable(0)})?function($){return Zb($)=="String"?lu.call($,""):Object($)}:Object,jb=function($){if($==null)throw TypeError("Can't call method on "+$);return $},qb=function($){return Af(jb($))},ha=function($){return typeof $=="object"?$!==null:typeof $=="function"},lc=function($,_e){if(!ha($))return $;var _t,Vt;if(_e&&typeof(_t=$.toString)=="function"&&!ha(Vt=_t.call($))||typeof(_t=$.valueOf)=="function"&&!ha(Vt=_t.call($))||!_e&&typeof(_t=$.toString)=="function"&&!ha(Vt=_t.call($)))return Vt;throw TypeError("Can't convert object to primitive value")},Qa=function($){return Object(jb($))},mu={}.hasOwnProperty,Q=function($,_e){return mu.call(Qa($),_e)},ze=y.document,Og=ha(ze)&&ha(ze.createElement),fn=!ka&&!R(function(){return Object.defineProperty(Og?ze.createElement("div"):{},"a",{get:function(){return 7}}).a!=7}),gn=Object.getOwnPropertyDescriptor,Fb={f:ka?gn:function($,_e){if($=qb($),_e=lc(_e,!0),fn)try{return gn($,_e)}catch{}if(Q($,_e))return dd(!zf.call($,_e),$[_e])}},va=function($){if(!ha($))throw TypeError(String($)+" is not an object");return $},hn=Object.defineProperty,Ra={f:ka?hn:function($,_e,_t){if(va($),_e=lc(_e,!0),va(_t),fn)try{return hn($,_e,_t)}catch{}if("get"in _t||"set"in _t)throw TypeError("Accessors not supported");return"value"in _t&&($[_e]=_t.value),$}},Na=ka?function($,_e,_t){return Ra.f($,_e,dd(1,_t))}:function($,_e,_t){return $[_e]=_t,$},Oi=function($,_e){try{Na(y,$,_e)}catch{y[$]=_e}return _e},ed=y["__core-js_shared__"]||Oi("__core-js_shared__",{}),nu=Function.toString;typeof ed.inspectSource!="function"&&(ed.inspectSource=function($){return nu.call($)});var Pi=ed.inspectSource,jn=y.WeakMap,ou=typeof jn=="function"&&/native code/.test(Pi(jn)),fd=$a(function($){($.exports=function(_e,_t){return ed[_e]||(ed[_e]=_t!==void 0?_t:{})})("versions",[]).push({version:"3.12.1",mode:"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})}),pu=0,qu=Math.random(),Ae=function($){return"Symbol("+String($===void 0?"":$)+")_"+(++pu+qu).toString(36)},kn=fd("keys"),Pg=function($){return kn[$]||(kn[$]=Ae($))},Be={},ru=y.WeakMap;if(ou||ed.state)var Gd=ed.state||(ed.state=new ru),su=Gd.get,ln=Gd.has,tu=Gd.set,Qi=function($,_e){if(ln.call(Gd,$))throw new TypeError("Object already initialized");return _e.facade=$,tu.call(Gd,$,_e),_e},Qg=function($){return su.call(Gd,$)||{}},Ri=function($){return ln.call(Gd,$)};else{var Ce=Pg("state");Be[Ce]=!0,Qi=function($,_e){if(Q($,Ce))throw new TypeError("Object already initialized");return _e.facade=$,Na($,Ce,_e),_e},Qg=function($){return Q($,Ce)?$[Ce]:{}},Ri=function($){return Q($,Ce)}}var Za={set:Qi,get:Qg,has:Ri,enforce:function($){return Ri($)?Qg($):Qi($,{})},getterFor:function($){return function(_e){var _t;if(!ha(_e)||(_t=Qg(_e)).type!==$)throw TypeError("Incompatible receiver, "+$+" required");return _t}}},Ta=$a(function($){var _e=Za.get,_t=Za.enforce,Vt=String(String).split("String");($.exports=function(Wt,_i,_s,_c){var _l=!!_c&&!!_c.unsafe,_d=!!_c&&!!_c.enumerable;if(_c=!!_c&&!!_c.noTargetGet,typeof _s=="function"){typeof _i!="string"||Q(_s,"name")||Na(_s,"name",_i);var _m=_t(_s);_m.source||(_m.source=Vt.join(typeof _i=="string"?_i:""))}Wt===y?_d?Wt[_i]=_s:Oi(_i,_s):(_l?!_c&&Wt[_i]&&(_d=!0):delete Wt[_i],_d?Wt[_i]=_s:Na(Wt,_i,_s))})(Function.prototype,"toString",function(){return typeof this=="function"&&_e(this).source||Pi(this)})}),mn=function($){return typeof $=="function"?$:void 0},mc=function($,_e){return 2>arguments.length?mn(y[$])||mn(y[$]):y[$]&&y[$][_e]||y[$]&&y[$][_e]},uu=Math.ceil,vu=Math.floor,$b=function($){return isNaN($=+$)?0:(0<$?vu:uu)($)},wu=Math.min,ta=function($){return 0<$?wu($b($),9007199254740991):0},xu=Math.max,yu=Math.min,xb=function($,_e){return 0>($=$b($))?xu($+_e,0):yu($,_e)},nn=function($){return function(_e,_t,Vt){_e=qb(_e);var Wt=ta(_e.length);if(Vt=xb(Vt,Wt),$&&_t!=_t){for(;Wt>Vt;)if((_t=_e[Vt++])!=_t)return!0}else for(;Wt>Vt;Vt++)if(($||Vt in _e)&&_e[Vt]===_t)return $||Vt||0;return!$&&-1}},on=nn(!0),Si=nn(!1),pn=function($,_e){$=qb($);var _t,Vt=0,Wt=[];for(_t in $)!Q(Be,_t)&&Q($,_t)&&Wt.push(_t);for(;_e.length>Vt;)Q($,_t=_e[Vt++])&&(~Si(Wt,_t)||Wt.push(_t));return Wt},Rg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),zu=Rg.concat("length","prototype"),Hd={f:Object.getOwnPropertyNames||function($){return pn($,zu)}},Bf={f:Object.getOwnPropertySymbols},qn=mc("Reflect","ownKeys")||function($){var _e=Hd.f(va($)),_t=Bf.f;return _t?_e.concat(_t($)):_e},rn=function($,_e){for(var _t=qn(_e),Vt=Ra.f,Wt=Fb.f,_i=0;_i<_t.length;_i++){var _s=_t[_i];Q($,_s)||Vt($,_s,Wt(_e,_s))}},Au=/#|\.prototype\./,nc=function($,_e){return($=Bu[Cu($)])==Du||$!=Eu&&(typeof _e=="function"?R(_e):!!_e)},Cu=nc.normalize=function($){return String($).replace(Au,".").toLowerCase()},Bu=nc.data={},Eu=nc.NATIVE="N",Du=nc.POLYFILL="P",Fu=Fb.f,N=function($,_e){var _t,Vt,Wt,_i=$.target,_s=$.global,_c=$.stat;if(Vt=_s?y:_c?y[_i]||Oi(_i,{}):(y[_i]||{}).prototype)for(Wt in _e){var _l=_e[Wt],_d=$.noTargetGet?(_t=Fu(Vt,Wt))&&_t.value:Vt[Wt];if(!(_t=nc(_s?Wt:_i+(_c?".":"#")+Wt,$.forced))&&_d!==void 0){if(typeof _l==typeof _d)continue;rn(_l,_d)}($.sham||_d&&_d.sham)&&Na(_l,"sham",!0);try{Ta(Vt,Wt,_l,$)}catch{}}},yb=function($){if(typeof $!="function")throw TypeError(String($)+" is not a function");return $},Id=function($,_e,_t){if(yb($),_e===void 0)return $;switch(_t){case 0:return function(){return $.call(_e)};case 1:return function(Vt){return $.call(_e,Vt)};case 2:return function(Vt,Wt){return $.call(_e,Vt,Wt)};case 3:return function(Vt,Wt,_i){return $.call(_e,Vt,Wt,_i)}}return function(){return $.apply(_e,arguments)}},gd=Array.isArray||function($){return Zb($)=="Array"},De=mc("navigator","userAgent")||"",sn=y.process,tn=sn&&sn.versions,un=tn&&tn.v8;if(un)var hd=un.split("."),Ti=4>hd[0]?1:hd[0]+hd[1];else De&&(hd=De.match(/Edge\/(\d+)/),(!hd||74<=hd[1])&&(hd=De.match(/Chrome\/(\d+)/))&&(Ti=hd[1]));var id=Ti&&+Ti,oc=!!Object.getOwnPropertySymbols&&!R(function(){return!String(Symbol())||!Symbol.sham&&id&&41>id}),vn=oc&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Cf=fd("wks"),Df=y.Symbol,Gu=vn?Df:Df&&Df.withoutSetter||Ae,qa=function($){return Q(Cf,$)&&(oc||typeof Cf[$]=="string")||(oc&&Q(Df,$)?Cf[$]=Df[$]:Cf[$]=Gu("Symbol."+$)),Cf[$]},Hu=qa("species"),Sg=function($,_e){if(gd($)){var _t=$.constructor;typeof _t!="function"||_t!==Array&&!gd(_t.prototype)?ha(_t)&&(_t=_t[Hu])===null&&(_t=void 0):_t=void 0}return new(_t===void 0?Array:_t)(_e===0?0:_e)},wn=[].push,jd=function($){var _e=$==1,_t=$==2,Vt=$==3,Wt=$==4,_i=$==6,_s=$==7,_c=$==5||_i;return function(_l,_d,_m,e_){var t_=Qa(_l),i_=Af(t_);_d=Id(_d,_m,3),_m=ta(i_.length);var c_,h_=0;for(e_=e_||Sg,_l=_e?e_(_l,_m):_t||_s?e_(_l,0):void 0;_m>h_;h_++)if((_c||h_ in i_)&&(c_=_d(e_=i_[h_],h_,t_),$))if(_e)_l[h_]=c_;else if(c_)switch($){case 3:return!0;case 5:return e_;case 6:return h_;case 2:wn.call(_l,e_)}else switch($){case 4:return!1;case 7:wn.call(_l,e_)}return _i?-1:Vt||Wt?Wt:_l}},Jd=jd(0),xn=jd(1),yn=jd(2),Iu=jd(3),Ju=jd(4),zn=jd(5),An=jd(6),Ku=qa("species"),Ef=function($){return 51<=id||!R(function(){var _e=[];return(_e.constructor={})[Ku]=function(){return{foo:1}},_e[$](Boolean).foo!==1})},Lu=Ef("filter");N({target:"Array",proto:!0,forced:!Lu},{filter:function($){return yn(this,$,1<arguments.length?arguments[1]:void 0)}});var Dc=Object.keys||function($){return pn($,Rg)},Mu=R(function(){Dc(1)});N({target:"Object",stat:!0,forced:Mu},{keys:function($){return Dc(Qa($))}});var Ee=function($,_e){var _t=[][$];return!!_t&&R(function(){_t.call(null,_e||function(){throw 1},1)})},Nu=[].join,Ou=Af!=Object,Pu=Ee("join",",");N({target:"Array",proto:!0,forced:Ou||!Pu},{join:function($){return Nu.call(qb(this),$===void 0?",":$)}});var Qu=Ef("map");N({target:"Array",proto:!0,forced:!Qu},{map:function($){return xn(this,$,1<arguments.length?arguments[1]:void 0)}});var Ui=function($){var _e=$.return;if(_e!==void 0)return va(_e.call($)).value},Fe={},Ru=qa("iterator"),Su=Array.prototype,Vi=function($){return $!==void 0&&(Fe.Array===$||Su[Ru]===$)},Ge=function($,_e,_t){(_e=lc(_e))in $?Ra.f($,_e,dd(0,_t)):$[_e]=_t},Tu=qa("toStringTag"),Bn={};Bn[Tu]="z";var Wi=String(Bn)==="[object z]",Uu=qa("toStringTag"),Vu=Zb(function(){return arguments}())=="Arguments",Ff=Wi?Zb:function($){var _e;if($===void 0)var _t="Undefined";else{if($===null)var Vt="Null";else{e:{var Wt=$=Object($);try{Vt=Wt[Uu];break e}catch{}Vt=void 0}Vt=typeof(_t=Vt)=="string"?_t:Vu?Zb($):(_e=Zb($))=="Object"&&typeof $.callee=="function"?"Arguments":_e}_t=Vt}return _t},Wu=qa("iterator"),Xi=function($){if($!=null)return $[Wu]||$["@@iterator"]||Fe[Ff($)]},Cn=qa("iterator"),Dn=!1;try{var Xu=0,En={next:function(){return{done:!!Xu++}},return:function(){Dn=!0}};En[Cn]=function(){return this},Array.from(En,function(){throw 2})}catch($){}var Tg=function($,_e){if(!_e&&!Dn)return!1;var _t=!1;try{(_e={})[Cn]=function(){return{next:function(){return{done:_t=!0}}}},$(_e)}catch{}return _t},Yu=!Tg(function($){Array.from($)});N({target:"Array",stat:!0,forced:Yu},{from:function($){var _e,_t=Qa($),Vt=typeof this=="function"?this:Array,Wt=arguments.length,_i=1<Wt?arguments[1]:void 0,_s=_i!==void 0,_c=Xi(_t),_l=0;if(_s&&(_i=Id(_i,2<Wt?arguments[2]:void 0,2)),_c==null||Vt==Array&&Vi(_c)){var _d=ta(_t.length);for(Vt=new Vt(_d);_d>_l;_l++)_c=_s?_i(_t[_l],_l):_t[_l],Ge(Vt,_l,_c)}else for(Wt=(_t=_c.call(_t)).next,Vt=new Vt;!(_e=Wt.call(_t)).done;_l++){if(_s){_c=_t;var _m=_i;_e=[_e.value,_l];try{_d=_m(va(_e)[0],_e[1])}catch(e_){throw Ui(_c),e_}}else _d=_e.value;Ge(Vt,_l,_c=_d)}return Vt.length=_l,Vt}});var Fn=function($){return function(_e,_t){_e=String(jb(_e)),_t=$b(_t);var Vt,Wt=_e.length;if(0>_t||_t>=Wt)return $?"":void 0;var _i=_e.charCodeAt(_t);return 55296>_i||56319<_i||_t+1===Wt||56320>(Vt=_e.charCodeAt(_t+1))||57343<Vt?$?_e.charAt(_t):_i:$?_e.slice(_t,_t+2):Vt-56320+(_i-55296<<10)+65536}},Gn=Fn(!0),Hn=!R(function(){function $(){}return $.prototype.constructor=null,Object.getPrototypeOf(new $)!==$.prototype}),In=Pg("IE_PROTO"),Zu=Object.prototype,Vb=Hn?Object.getPrototypeOf:function($){return $=Qa($),Q($,In)?$[In]:typeof $.constructor=="function"&&$ instanceof $.constructor?$.constructor.prototype:$ instanceof Object?Zu:null},Yi=qa("iterator"),Jn=!1,$u=function(){return this},Kd;if([].keys){var Kn=[].keys();if("next"in Kn){var Ln=Vb(Vb(Kn));Ln!==Object.prototype&&(Kd=Ln)}else Jn=!0}(Kd==null||R(function(){var $={};return Kd[Yi].call($)!==$}))&&(Kd={}),Q(Kd,Yi)||Na(Kd,Yi,$u);var Ug=Kd,Vg=Jn,av=ka?Object.defineProperties:function($,_e){va($);for(var _t,Vt=Dc(_e),Wt=Vt.length,_i=0;Wt>_i;)Ra.f($,_t=Vt[_i++],_e[_t]);return $},Zi=mc("document","documentElement"),Mn=Pg("IE_PROTO"),$i=function(){},aj,Wg=function(){try{aj=document.domain&&new ActiveXObject("htmlfile")}catch{}if(aj){var $=aj;$.write("<script><\/script>"),$.close(),$=$.parentWindow.Object}else($=Og?ze.createElement("iframe"):{}).style.display="none",Zi.appendChild($),$.src="javascript:",($=$.contentWindow.document).open(),$.write("<script>document.F=Object<\/script>"),$.close(),$=$.F;for(Wg=$,$=Rg.length;$--;)delete Wg.prototype[Rg[$]];return Wg()};Be[Mn]=!0;var ac=Object.create||function($,_e){if($!==null){$i.prototype=va($);var _t=new $i;$i.prototype=null,_t[Mn]=$}else _t=Wg();return _e===void 0?_t:av(_t,_e)},bv=Ra.f,Nn=qa("toStringTag"),Ec=function($,_e,_t){$&&!Q($=_t?$:$.prototype,Nn)&&bv($,Nn,{configurable:!0,value:_e})},cv=function(){return this},dv=function($,_e,_t){return _e+=" Iterator",$.prototype=ac(Ug,{next:dd(1,_t)}),Ec($,_e,!1),Fe[_e]=cv,$},Ua=Object.setPrototypeOf||("__proto__"in{}?function(){var $=!1,_e={};try{var _t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set;_t.call(_e,[]),$=_e instanceof Array}catch{}return function(Vt,Wt){if(va(Vt),!ha(Wt)&&Wt!==null)throw TypeError("Can't set "+String(Wt)+" as a prototype");return $?_t.call(Vt,Wt):Vt.__proto__=Wt,Vt}}():void 0),Gf=qa("iterator"),ev=function(){return this},bj=function($,_e,_t,Vt,Wt,_i,_s){dv(_t,_e,Vt),Vt=function(h_){if(h_===Wt&&t_)return t_;if(!Vg&&h_ in _m)return _m[h_];switch(h_){case"keys":case"values":case"entries":return function(){return new _t(this,h_)}}return function(){return new _t(this)}};var _c,_l=_e+" Iterator",_d=!1,_m=$.prototype,e_=_m[Gf]||_m["@@iterator"]||Wt&&_m[Wt],t_=!Vg&&e_||Vt(Wt),i_=_e=="Array"&&_m.entries||e_;if(i_&&($=Vb(i_.call(new $)),Ug!==Object.prototype&&$.next&&(Vb($)!==Ug&&(Ua?Ua($,Ug):typeof $[Gf]!="function"&&Na($,Gf,ev)),Ec($,_l,!0))),Wt=="values"&&e_&&e_.name!=="values"&&(_d=!0,t_=function(){return e_.call(this)}),_m[Gf]!==t_&&Na(_m,Gf,t_),Fe[_e]=t_,Wt){var c_={values:Vt("values"),keys:_i?t_:Vt("keys"),entries:Vt("entries")};if(_s)for(_c in c_)!Vg&&!_d&&_c in _m||Ta(_m,_c,c_[_c]);else N({target:_e,proto:!0,forced:Vg||_d},c_)}return c_},fv=Za.set,gv=Za.getterFor("String Iterator");bj(String,"String",function($){fv(this,{type:"String Iterator",string:String($),index:0})},function(){var $=gv(this),_e=$.string,_t=$.index;return _t>=_e.length?{value:void 0,done:!0}:(_e=Gn(_e,_t),$.index+=_e.length,{value:_e,done:!1})});var cj=qa("unscopables"),dj=Array.prototype;dj[cj]==null&&Ra.f(dj,cj,{configurable:!0,value:ac(null)});var Ld=function($){dj[cj][$]=!0},On=!0;"find"in[]&&Array(1).find(function(){On=!1}),N({target:"Array",proto:!0,forced:On},{find:function($){return zn(this,$,1<arguments.length?arguments[1]:void 0)}}),Ld("find");var Pn=function($){var _e=String(jb(this)),_t="";if(0>($=$b($))||1/0==$)throw RangeError("Wrong number of repetitions");for(;0<$;($>>>=1)&&(_e+=_e))1&$&&(_t+=_e);return _t};N({target:"String",proto:!0},{repeat:Pn}),N({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991}),N({target:"Number",stat:!0},{isNaN:function($){return $!=$}}),y.Number.isNaN;var hv=Wi?{}.toString:function(){return"[object "+Ff(this)+"]"};Wi||Ta(Object.prototype,"toString",hv,{unsafe:!0});var Fc=y.Promise,Hf=function($,_e,_t){for(var Vt in _e)Ta($,Vt,_e[Vt],_t);return $},Qn=qa("species"),If=function($){$=mc($);var _e=Ra.f;ka&&$&&!$[Qn]&&_e($,Qn,{configurable:!0,get:function(){return this}})},Gc=function($,_e,_t){if(!($ instanceof _e))throw TypeError("Incorrect "+(_t?_t+" ":"")+"invocation");return $},Jf=function($,_e){this.stopped=$,this.result=_e},Xg=function($,_e,_t){var Vt,Wt=!(!_t||!_t.AS_ENTRIES),_i=!(!_t||!_t.IS_ITERATOR),_s=!(!_t||!_t.INTERRUPTED),_c=Id(_e,_t&&_t.that,1+Wt+_s),_l=function(_m){return _d&&Ui(_d),new Jf(!0,_m)};if(_e=function(_m){return Wt?(va(_m),_s?_c(_m[0],_m[1],_l):_c(_m[0],_m[1])):_s?_c(_m,_l):_c(_m)},_i)var _d=$;else{if(typeof(_i=Xi($))!="function")throw TypeError("Target is not iterable");if(Vi(_i)){for(_i=0,_t=ta($.length);_t>_i;_i++)if((Vt=_e($[_i]))&&Vt instanceof Jf)return Vt;return new Jf(!1)}_d=_i.call($)}for($=_d.next;!(_i=$.call(_d)).done;){try{Vt=_e(_i.value)}catch(_m){throw Ui(_d),_m}if(typeof Vt=="object"&&Vt&&Vt instanceof Jf)return Vt}return new Jf(!1)},iv=qa("species"),kd=function($,_e){var _t;return($=va($).constructor)===void 0||(_t=va($)[iv])==null?_e:yb(_t)},Rn=/(?:iphone|ipod|ipad).*applewebkit/i.test(De),Hc=Zb(y.process)=="process",Yg=y.location,ej=y.setImmediate,Sn=y.clearImmediate,jv=y.process,Tn=y.MessageChannel,fj=y.Dispatch,gj=0,Kf={},hj=function($){if(Kf.hasOwnProperty($)){var _e=Kf[$];delete Kf[$],_e()}},ij=function($){return function(){hj($)}},Un=function($){hj($.data)},Vn=function($){y.postMessage($+"",Yg.protocol+"//"+Yg.host)};if(!ej||!Sn)if(ej=function($){for(var _e=[],_t=1;arguments.length>_t;)_e.push(arguments[_t++]);return Kf[++gj]=function(){(typeof $=="function"?$:Function($)).apply(void 0,_e)},Lf(gj),gj},Sn=function($){delete Kf[$]},Hc)var Lf=function($){jv.nextTick(ij($))};else if(fj&&fj.now)Lf=function($){fj.now(ij($))};else if(Tn&&!Rn){var Wn=new Tn,Xn=Wn.port2;Wn.port1.onmessage=Un,Lf=Id(Xn.postMessage,Xn,1)}else y.addEventListener&&typeof postMessage=="function"&&!y.importScripts&&Yg&&Yg.protocol!=="file:"&&!R(Vn)?(Lf=Vn,y.addEventListener("message",Un,!1)):Lf="onreadystatechange"in(Og?ze.createElement("script"):{})?function($){Zi.appendChild(Og?ze.createElement("script"):{}).onreadystatechange=function(){Zi.removeChild(this),hj($)}}:function($){setTimeout(ij($),0)};var jj=ej,kv=/web0s(?!.*chrome)/i.test(De),lv=Fb.f,Yn=y.MutationObserver||y.WebKitMutationObserver,Zn=y.document,$n=y.process,Zg=y.Promise,ao=lv(y,"queueMicrotask"),bo=ao&&ao.value,Md,Mf;if(!bo){var ah=function(){var $;for(Hc&&($=$n.domain)&&$.exit();Md;){var _e=Md.fn;Md=Md.next;try{_e()}catch(_t){throw Md?$g():Mf=void 0,_t}}Mf=void 0,$&&$.enter()};if(Rn||Hc||kv||!Yn||!Zn)if(Zg&&Zg.resolve){var kj=Zg.resolve(void 0);kj.constructor=Zg;var mv=kj.then,$g=function(){mv.call(kj,ah)}}else $g=Hc?function(){$n.nextTick(ah)}:function(){jj.call(y,ah)};else{var co=!0,eo=Zn.createTextNode("");new Yn(ah).observe(eo,{characterData:!0}),$g=function(){eo.data=co=!co}}}var fo=bo||function($){$={fn:$,next:void 0},Mf&&(Mf.next=$),Md||(Md=$,$g()),Mf=$},nv=function($){var _e,_t;this.promise=new $(function(Vt,Wt){if(_e!==void 0||_t!==void 0)throw TypeError("Bad Promise constructor");_e=Vt,_t=Wt}),this.resolve=yb(_e),this.reject=yb(_t)},lj={f:function($){return new nv($)}},mj=function($,_e){return va($),ha(_e)&&_e.constructor===$?_e:((0,($=lj.f($)).resolve)(_e),$.promise)},ov=function($,_e){var _t=y.console;_t&&_t.error&&(arguments.length===1?_t.error($):_t.error($,_e))},nj=function($){try{return{error:!1,value:$()}}catch(_e){return{error:!0,value:_e}}},pv=typeof window=="object",qv=qa("species"),go=Za.get,rv=Za.set,sv=Za.getterFor("Promise"),Nd=Fc&&Fc.prototype,zb=Fc,bh=Nd,ho=y.TypeError,oj=y.document,pj=y.process,He=lj.f,tv=He,uv=!!(oj&&oj.createEvent&&y.dispatchEvent),io=typeof PromiseRejectionEvent=="function",jo=!1,Nf=nc("Promise",function(){var $=Pi(zb)!==String(zb);if(!$&&id===66)return!0;if(51<=id&&/native code/.test(zb))return!1;var _e=new zb(function(Vt){Vt(1)}),_t=function(Vt){Vt(function(){},function(){})};return(_e.constructor={})[qv]=_t,!(jo=_e.then(function(){})instanceof _t)||!$&&pv&&!io}),vv=Nf||!Tg(function($){zb.all($).catch(function(){})}),ko=function($){var _e;return!(!ha($)||typeof(_e=$.then)!="function")&&_e},qj=function($,_e){if(!$.notified){$.notified=!0;var _t=$.reactions;fo(function(){for(var Vt=$.value,Wt=$.state==1,_i=0;_t.length>_i;){var _s,_c=_t[_i++],_l=Wt?_c.ok:_c.fail,_d=_c.resolve,_m=_c.reject,e_=_c.domain;try{if(_l){if(Wt||($.rejection===2&&wv($),$.rejection=1),_l===!0)var t_=Vt;else if(e_&&e_.enter(),t_=_l(Vt),e_){e_.exit();var i_=!0}t_===_c.promise?_m(ho("Promise-chain cycle")):(_s=ko(t_))?_s.call(t_,_d,_m):_d(t_)}else _m(Vt)}catch(c_){e_&&!i_&&e_.exit(),_m(c_)}}$.reactions=[],$.notified=!1,_e&&!$.rejection&&xv($)})}},lo=function($,_e,_t){var Vt;if(uv){var Wt=oj.createEvent("Event");Wt.promise=_e,Wt.reason=_t,Wt.initEvent($,!1,!0),y.dispatchEvent(Wt)}else Wt={promise:_e,reason:_t};!io&&(Vt=y["on"+$])?Vt(Wt):$==="unhandledrejection"&&ov("Unhandled promise rejection",_t)},xv=function($){jj.call(y,function(){var _e=$.facade,_t=$.value;if($.rejection!==1&&!$.parent){var Vt=nj(function(){Hc?pj.emit("unhandledRejection",_t,_e):lo("unhandledrejection",_e,_t)});if($.rejection=Hc||$.rejection!==1&&!$.parent?2:1,Vt.error)throw Vt.value}})},wv=function($){jj.call(y,function(){var _e=$.facade;Hc?pj.emit("rejectionHandled",_e):lo("rejectionhandled",_e,$.value)})},Ie=function($,_e,_t){return function(Vt){$(_e,Vt,_t)}},Je=function($,_e,_t){$.done||($.done=!0,_t&&($=_t),$.value=_e,$.state=2,qj($,!0))},rj=function($,_e,_t){if(!$.done){$.done=!0,_t&&($=_t);try{if($.facade===_e)throw ho("Promise can't be resolved itself");var Vt=ko(_e);Vt?fo(function(){var Wt={done:!1};try{Vt.call(_e,Ie(rj,Wt,$),Ie(Je,Wt,$))}catch(_i){Je(Wt,_i,$)}}):($.value=_e,$.state=1,qj($,!1))}catch(Wt){Je({done:!1},Wt,$)}}};if(Nf){zb=function($){Gc(this,zb,"Promise"),yb($),sj.call(this);var _e=go(this);try{$(Ie(rj,_e),Ie(Je,_e))}catch(_t){Je(_e,_t)}},bh=zb.prototype;var sj=function($){rv(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})};sj.prototype=Hf(bh,{then:function($,_e){var _t=sv(this),Vt=He(kd(this,zb));return Vt.ok=typeof $!="function"||$,Vt.fail=typeof _e=="function"&&_e,Vt.domain=Hc?pj.domain:void 0,_t.parent=!0,_t.reactions.push(Vt),_t.state!=0&&qj(_t,!1),Vt.promise},catch:function($){return this.then(void 0,$)}});var yv=function(){var $=new sj,_e=go($);this.promise=$,this.resolve=Ie(rj,_e),this.reject=Ie(Je,_e)};if(lj.f=He=function($){return $===zb||$===zv?new yv($):tv($)},typeof Fc=="function"&&Nd!==Object.prototype){var Av=Nd.then;jo||(Ta(Nd,"then",function($,_e){var _t=this;return new zb(function(Vt,Wt){Av.call(_t,Vt,Wt)}).then($,_e)},{unsafe:!0}),Ta(Nd,"catch",bh.catch,{unsafe:!0}));try{delete Nd.constructor}catch{}Ua&&Ua(Nd,bh)}}N({global:!0,wrap:!0,forced:Nf},{Promise:zb}),Ec(zb,"Promise",!1),If("Promise");var zv=mc("Promise");N({target:"Promise",stat:!0,forced:Nf},{reject:function($){var _e=He(this);return _e.reject.call(void 0,$),_e.promise}}),N({target:"Promise",stat:!0,forced:Nf},{resolve:function($){return mj(this,$)}}),N({target:"Promise",stat:!0,forced:vv},{all:function($){var _e=this,_t=He(_e),Vt=_t.resolve,Wt=_t.reject,_i=nj(function(){var _s=yb(_e.resolve),_c=[],_l=0,_d=1;Xg($,function(_m){var e_=_l++,t_=!1;_c.push(void 0),_d++,_s.call(_e,_m).then(function(i_){t_||(t_=!0,_c[e_]=i_,--_d||Vt(_c))},Wt)}),--_d||Vt(_c)});return _i.error&&Wt(_i.value),_t.promise},race:function($){var _e=this,_t=He(_e),Vt=_t.reject,Wt=nj(function(){var _i=yb(_e.resolve);Xg($,function(_s){_i.call(_e,_s).then(_t.resolve,Vt)})});return Wt.error&&Vt(Wt.value),_t.promise}});var mo=[].indexOf,no=!!mo&&0>1/[1].indexOf(1,-0),Bv=Ee("indexOf");N({target:"Array",proto:!0,forced:no||!Bv},{indexOf:function($){return no?mo.apply(this,arguments)||0:Si(this,$,1<arguments.length?arguments[1]:void 0)}});var tj=function(){var $=va(this),_e="";return $.global&&(_e+="g"),$.ignoreCase&&(_e+="i"),$.multiline&&(_e+="m"),$.dotAll&&(_e+="s"),$.unicode&&(_e+="u"),$.sticky&&(_e+="y"),_e},pc=R(function(){var $=RegExp("a","y");return $.lastIndex=2,$.exec("abcd")!=null}),Cv=R(function(){var $=RegExp("^r","gy");return $.lastIndex=2,$.exec("str")!=null}),ch=RegExp.prototype.exec,Dv=fd("native-string-replace",String.prototype.replace),oo=ch,uj=(c=/a/,a=/b*/g,ch.call(c,"a"),ch.call(a,"a"),c.lastIndex!==0||a.lastIndex!==0),po=pc||Cv,vj=/()??/.exec("")[1]!==void 0,c,a;(uj||vj||po)&&(oo=function($){var _e,_t=po&&this.sticky,Vt=tj.call(this),Wt=this.source,_i=0,_s=$;if(_t){(Vt=Vt.replace("y","")).indexOf("g")===-1&&(Vt+="g"),_s=String($).slice(this.lastIndex),0<this.lastIndex&&(!this.multiline||this.multiline&&$[this.lastIndex-1]!==`
`)&&(Wt="(?: "+Wt+")",_s=" "+_s,_i++);var _c=new RegExp("^(?:"+Wt+")",Vt)}if(vj&&(_c=new RegExp("^"+Wt+"$(?!\\s)",Vt)),uj)var _l=this.lastIndex;var _d=ch.call(_t?_c:this,_s);return _t?_d?(_d.input=_d.input.slice(_i),_d[0]=_d[0].slice(_i),_d.index=this.lastIndex,this.lastIndex+=_d[0].length):this.lastIndex=0:uj&&_d&&(this.lastIndex=this.global?_d.index+_d[0].length:_l),vj&&_d&&1<_d.length&&Dv.call(_d[0],_c,function(){for(_e=1;_e<arguments.length-2;_e++)arguments[_e]===void 0&&(_d[_e]=void 0)}),_d});var Of=oo;N({target:"RegExp",proto:!0,forced:/./.exec!==Of},{exec:Of});var Ev=qa("species"),wj=RegExp.prototype,Fv=!R(function(){var $=/./;return $.exec=function(){var _e=[];return _e.groups={a:"7"},_e},"".replace($,"$<a>")!=="7"}),qo="a".replace(/./,"$0")==="$0",ro=qa("replace"),so=!!/./[ro]&&/./[ro]("a","$0")==="",Gv=!R(function(){var $=/(?:)/,_e=$.exec;return $.exec=function(){return _e.apply(this,arguments)},($="ab".split($)).length!==2||$[0]!=="a"||$[1]!=="b"}),dh=function($,_e,_t,Vt){var Wt=qa($),_i=!R(function(){var _d={};return _d[Wt]=function(){return 7},""[$](_d)!=7}),_s=_i&&!R(function(){var _d=!1,_m=/a/;return $==="split"&&((_m={constructor:{}}).constructor[Ev]=function(){return _m},_m.flags="",_m[Wt]=/./[Wt]),_m.exec=function(){return _d=!0,null},_m[Wt](""),!_d});if(!_i||!_s||$==="replace"&&(!Fv||!qo||so)||$==="split"&&!Gv){var _c=/./[Wt],_l=(_t=_t(Wt,""[$],function(_d,_m,e_,t_,i_){var c_=_m.exec;return c_===Of||c_===wj.exec?_i&&!i_?{done:!0,value:_c.call(_m,e_,t_)}:{done:!0,value:_d.call(e_,_m,t_)}:{done:!1}},{REPLACE_KEEPS_$0:qo,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:so}))[1];Ta(String.prototype,$,_t[0]),Ta(wj,Wt,_e==2?function(_d,_m){return _l.call(_d,this,_m)}:function(_d){return _l.call(_d,this)})}Vt&&Na(wj[Wt],"sham",!0)},xj=function($,_e,_t){return _e+(_t?Gn($,_e).length:1)},Hv=Math.floor,Iv="".replace,Jv=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Kv=/\$([$&'`]|\d{1,2})/g,Lv=function($,_e,_t,Vt,Wt,_i){var _s=_t+$.length,_c=Vt.length,_l=Kv;return Wt!==void 0&&(Wt=Qa(Wt),_l=Jv),Iv.call(_i,_l,function(_d,_m){switch(_m.charAt(0)){case"$":return"$";case"&":return $;case"`":return _e.slice(0,_t);case"'":return _e.slice(_s);case"<":_d=Wt[_m.slice(1,-1)];break;default:var e_=+_m;if(e_===0)return _d;if(e_>_c)return(e_=Hv(e_/10))===0?_d:e_<=_c?Vt[e_-1]===void 0?_m.charAt(1):Vt[e_-1]+_m.charAt(1):_d;_d=Vt[e_-1]}return _d===void 0?"":_d})},Ke=function($,_e){var _t=$.exec;if(typeof _t=="function"){if(typeof($=_t.call($,_e))!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return $}if(Zb($)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return Of.call($,_e)},Mv=Math.max,Nv=Math.min,Ov=function($){return $===void 0?$:String($)};dh("replace",2,function($,_e,_t,Vt){var Wt=Vt.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,_i=Vt.REPLACE_KEEPS_$0,_s=Wt?"$":"$0";return[function(_c,_l){var _d=jb(this),_m=_c==null?void 0:_c[$];return _m!==void 0?_m.call(_c,_d,_l):_e.call(String(_d),_c,_l)},function(_c,_l){if(!Wt&&_i||typeof _l=="string"&&_l.indexOf(_s)===-1){var _d=_t(_e,_c,this,_l);if(_d.done)return _d.value}var _m=va(_c);_c=String(this),(_d=typeof _l=="function")||(_l=String(_l));var e_=_m.global;if(e_){var t_=_m.unicode;_m.lastIndex=0}for(var i_=[];;){var c_=Ke(_m,_c);if(c_===null||(i_.push(c_),!e_))break;String(c_[0])===""&&(_m.lastIndex=xj(_c,ta(_m.lastIndex),t_))}for(t_="",e_=_m=0;e_<i_.length;e_++){c_=i_[e_];for(var h_=String(c_[0]),y_=Mv(Nv($b(c_.index),_c.length),0),l_=[],d_=1;d_<c_.length;d_++)l_.push(Ov(c_[d_]));c_=c_.groups,_d?(l_=[h_].concat(l_,y_,_c),c_!==void 0&&l_.push(c_),c_=String(_l.apply(void 0,l_))):c_=Lv(h_,_c,y_,l_,c_,_l),y_>=_m&&(t_+=_c.slice(_m,y_)+c_,_m=y_+h_.length)}return t_+_c.slice(_m)}]});var Pv=Ef("slice"),Qv=qa("species"),Rv=[].slice,Sv=Math.max;N({target:"Array",proto:!0,forced:!Pv},{slice:function($,_e){var _t=qb(this),Vt=ta(_t.length);if($=xb($,Vt),_e=xb(_e===void 0?Vt:_e,Vt),gd(_t)){var Wt=_t.constructor;if(typeof Wt!="function"||Wt!==Array&&!gd(Wt.prototype)?ha(Wt)&&(Wt=Wt[Qv])===null&&(Wt=void 0):Wt=void 0,Wt===Array||Wt===void 0)return Rv.call(_t,$,_e)}for(Wt=new(Wt===void 0?Array:Wt)(Sv(_e-$,0)),Vt=0;$<_e;$++,Vt++)$ in _t&&Ge(Wt,Vt,_t[$]);return Wt.length=Vt,Wt}});var Tv=Za.set,Uv=Za.getterFor("Array Iterator"),ld=bj(Array,"Array",function($,_e){Tv(this,{type:"Array Iterator",target:qb($),index:0,kind:_e})},function(){var $=Uv(this),_e=$.target,_t=$.kind,Vt=$.index++;return!_e||Vt>=_e.length?($.target=void 0,{value:void 0,done:!0}):_t=="keys"?{value:Vt,done:!1}:_t=="values"?{value:_e[Vt],done:!1}:{value:[Vt,_e[Vt]],done:!1}},"values");Fe.Arguments=Fe.Array,Ld("keys"),Ld("values"),Ld("entries");var to=typeof ArrayBuffer<"u"&&typeof DataView<"u",Le=function($){if($===void 0)return 0;$=$b($);var _e=ta($);if($!==_e)throw RangeError("Wrong length or index");return _e},Vv=Math.abs,Ic=Math.pow,Wv=Math.floor,Xv=Math.log,Yv=Math.LN2,yj=function($){var _e=Qa(this),_t=ta(_e.length),Vt=arguments.length,Wt=xb(1<Vt?arguments[1]:void 0,_t);for(_t=(Vt=2<Vt?arguments[2]:void 0)===void 0?_t:xb(Vt,_t);_t>Wt;)_e[Wt++]=$;return _e},Zv=Hd.f,$v=Ra.f,Me=Za.get,uo=Za.set,bc=y.ArrayBuffer,Ab=bc,cc=y.DataView,eh=cc&&cc.prototype,vo=Object.prototype,fh=y.RangeError,wo=function($,_e,_t){var Vt,Wt=Array(_t),_i=(1<<(_t=8*_t-_e-1))-1,_s=_i>>1,_c=_e===23?Ic(2,-24)-Ic(2,-77):0,_l=0>$||$===0&&0>1/$?1:0,_d=0;if(($=Vv($))!=$||1/0===$){$=$!=$?1:0;var _m=_i}else _m=Wv(Xv($)/Yv),1>$*(Vt=Ic(2,-_m))&&(_m--,Vt*=2),2<=($=1<=_m+_s?$+_c/Vt:$+_c*Ic(2,1-_s))*Vt&&(_m++,Vt/=2),_m+_s>=_i?($=0,_m=_i):1<=_m+_s?($=($*Vt-1)*Ic(2,_e),_m+=_s):($=$*Ic(2,_s-1)*Ic(2,_e),_m=0);for(;8<=_e;Wt[_d++]=255&$,$/=256,_e-=8);for(_m=_m<<_e|$,_t+=_e;0<_t;Wt[_d++]=255&_m,_m/=256,_t-=8);return Wt[--_d]|=128*_l,Wt},xo=function($,_e){var _t=$.length,Vt=8*_t-_e-1,Wt=(1<<Vt)-1,_i=Wt>>1;Vt-=7,--_t;var _s=$[_t--],_c=127&_s;for(_s>>=7;0<Vt;_c=256*_c+$[_t],_t--,Vt-=8);var _l=_c&(1<<-Vt)-1;for(_c>>=-Vt,Vt+=_e;0<Vt;_l=256*_l+$[_t],_t--,Vt-=8);if(_c===0)_c=1-_i;else{if(_c===Wt)return _l?NaN:_s?-1/0:1/0;_l+=Ic(2,_e),_c-=_i}return(_s?-1:1)*_l*Ic(2,_c-_e)},yo=function($){return[255&$]},zo=function($){return[255&$,$>>8&255]},Ao=function($){return[255&$,$>>8&255,$>>16&255,$>>24&255]},Bo=function($){return $[3]<<24|$[2]<<16|$[1]<<8|$[0]},aw=function($){return wo($,23,4)},bw=function($){return wo($,52,8)},gh=function($,_e){$v($.prototype,_e,{get:function(){return Me(this)[_e]}})},md=function($,_e,_t,Vt){_t=Le(_t);var Wt=Me($);if(_t+_e>Wt.byteLength)throw fh("Wrong index");return $=Me(Wt.buffer).bytes,_t+=Wt.byteOffset,_e=$.slice(_t,_t+_e),Vt?_e:_e.reverse()},nd=function($,_e,_t,Vt,Wt,_i){_t=Le(_t);var _s=Me($);if(_t+_e>_s.byteLength)throw fh("Wrong index");for($=Me(_s.buffer).bytes,_t+=_s.byteOffset,Vt=Vt(+Wt),Wt=0;Wt<_e;Wt++)$[_t+Wt]=Vt[_i?Wt:_e-Wt-1]};if(to){if(!R(function(){bc(1)})||!R(function(){new bc(-1)})||R(function(){return new bc,new bc(1.5),new bc(NaN),bc.name!="ArrayBuffer"})){Ab=function($){return Gc(this,Ab),new bc(Le($))};for(var cw=Ab.prototype=bc.prototype,Co=Zv(bc),Do=0,zj;Co.length>Do;)(zj=Co[Do++])in Ab||Na(Ab,zj,bc[zj]);cw.constructor=Ab}Ua&&Vb(eh)!==vo&&Ua(eh,vo);var hh=new cc(new Ab(2)),Eo=eh.setInt8;hh.setInt8(0,2147483648),hh.setInt8(1,2147483649),!hh.getInt8(0)&&hh.getInt8(1)||Hf(eh,{setInt8:function($,_e){Eo.call(this,$,_e<<24>>24)},setUint8:function($,_e){Eo.call(this,$,_e<<24>>24)}},{unsafe:!0})}else Ab=function($){Gc(this,Ab,"ArrayBuffer"),$=Le($),uo(this,{bytes:yj.call(Array($),0),byteLength:$}),ka||(this.byteLength=$)},cc=function($,_e,_t){Gc(this,cc,"DataView"),Gc($,Ab,"DataView");var Vt=Me($).byteLength;if(0>(_e=$b(_e))||_e>Vt)throw fh("Wrong offset");if(_e+(_t=_t===void 0?Vt-_e:ta(_t))>Vt)throw fh("Wrong length");uo(this,{buffer:$,byteLength:_t,byteOffset:_e}),ka||(this.buffer=$,this.byteLength=_t,this.byteOffset=_e)},ka&&(gh(Ab,"byteLength"),gh(cc,"buffer"),gh(cc,"byteLength"),gh(cc,"byteOffset")),Hf(cc.prototype,{getInt8:function($){return md(this,1,$)[0]<<24>>24},getUint8:function($){return md(this,1,$)[0]},getInt16:function($){var _e=md(this,2,$,1<arguments.length?arguments[1]:void 0);return(_e[1]<<8|_e[0])<<16>>16},getUint16:function($){var _e=md(this,2,$,1<arguments.length?arguments[1]:void 0);return _e[1]<<8|_e[0]},getInt32:function($){return Bo(md(this,4,$,1<arguments.length?arguments[1]:void 0))},getUint32:function($){return Bo(md(this,4,$,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function($){return xo(md(this,4,$,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function($){return xo(md(this,8,$,1<arguments.length?arguments[1]:void 0),52)},setInt8:function($,_e){nd(this,1,$,yo,_e)},setUint8:function($,_e){nd(this,1,$,yo,_e)},setInt16:function($,_e){nd(this,2,$,zo,_e,2<arguments.length?arguments[2]:void 0)},setUint16:function($,_e){nd(this,2,$,zo,_e,2<arguments.length?arguments[2]:void 0)},setInt32:function($,_e){nd(this,4,$,Ao,_e,2<arguments.length?arguments[2]:void 0)},setUint32:function($,_e){nd(this,4,$,Ao,_e,2<arguments.length?arguments[2]:void 0)},setFloat32:function($,_e){nd(this,4,$,aw,_e,2<arguments.length?arguments[2]:void 0)},setFloat64:function($,_e){nd(this,8,$,bw,_e,2<arguments.length?arguments[2]:void 0)}});Ec(Ab,"ArrayBuffer"),Ec(cc,"DataView");var Pf={ArrayBuffer:Ab,DataView:cc},Aj=Pf.ArrayBuffer,Fo=Pf.DataView,Go=Aj.prototype.slice,dw=R(function(){return!new Aj(2).slice(1,void 0).byteLength});N({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:dw},{slice:function($,_e){if(Go!==void 0&&_e===void 0)return Go.call(va(this),$);var _t=va(this).byteLength;$=xb($,_t),_e=xb(_e===void 0?_t:_e,_t),_t=new(kd(this,Aj))(ta(_e-$));for(var Vt=new Fo(this),Wt=new Fo(_t),_i=0;$<_e;)Wt.setUint8(_i++,Vt.getUint8($++));return _t}});var ew=Ra.f,ih=y.Int8Array,Bj=ih&&ih.prototype,Ho=y.Uint8ClampedArray,Io=Ho&&Ho.prototype,qc=ih&&Vb(ih),dc=Bj&&Vb(Bj),Jo=Object.prototype,Ko=Jo.isPrototypeOf,Lo=qa("toStringTag"),Cj=Ae("TYPED_ARRAY_TAG"),Jc=to&&!!Ua&&Ff(y.opera)!=="Opera",Mo=!1,Bb,rc={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},fw={BigInt64Array:8,BigUint64Array:8},jh=function($){return!!ha($)&&($=Ff($),Q(rc,$)||Q(fw,$))};for(Bb in rc)y[Bb]||(Jc=!1);if((!Jc||typeof qc!="function"||qc===Function.prototype)&&(qc=function(){throw TypeError("Incorrect invocation")},Jc))for(Bb in rc)y[Bb]&&Ua(y[Bb],qc);if((!Jc||!dc||dc===Jo)&&(dc=qc.prototype,Jc))for(Bb in rc)y[Bb]&&Ua(y[Bb].prototype,dc);if(Jc&&Vb(Io)!==dc&&Ua(Io,dc),ka&&!Q(dc,Lo))for(Bb in Mo=!0,ew(dc,Lo,{get:function(){return ha(this)?this[Cj]:void 0}}),rc)y[Bb]&&Na(y[Bb],Cj,Bb);var Qf=Jc,No=Mo&&Cj,Da=function($){if(jh($))return $;throw TypeError("Target is not a typed array")},Ne=function($){if(Ua){if(Ko.call(qc,$))return $}else for(var _e in rc)if(Q(rc,Bb)){var _t=y[_e];if(_t&&($===_t||Ko.call(_t,$)))return $}throw TypeError("Target is not a typed array constructor")},Aa=function($,_e,_t){if(ka){if(_t)for(var Vt in rc){var Wt=y[Vt];if(Wt&&Q(Wt.prototype,$))try{delete Wt.prototype[$]}catch{}}dc[$]&&!_t||Ta(dc,$,_t?_e:Jc&&Bj[$]||_e)}},Oo=function($,_e,_t){var Vt,Wt;if(ka){if(Ua){if(_t){for(Vt in rc)if((Wt=y[Vt])&&Q(Wt,$))try{delete Wt[$]}catch{}}if(qc[$]&&!_t)return;try{return Ta(qc,$,_t?_e:Jc&&qc[$]||_e)}catch{}}for(Vt in rc)!(Wt=y[Vt])||Wt[$]&&!_t||Ta(Wt,$,_e)}},Po=qc,Rf=dc,gw=y.ArrayBuffer,Od=y.Int8Array,Dj=!Qf||!R(function(){Od(1)})||!R(function(){new Od(-1)})||!Tg(function($){new Od,new Od(null),new Od(1.5),new Od($)},!0)||R(function(){return new Od(new gw(2),1,void 0).length!==1}),kh=function($,_e){if(0>($=$b($)))throw RangeError("The argument can't be less than 0");if($%_e)throw RangeError("Wrong offset");return $},Ej=function($){var _e=Qa($),_t=arguments.length,Vt=1<_t?arguments[1]:void 0,Wt=Vt!==void 0,_i=Xi(_e);if(_i!=null&&!Vi(_i)){var _s=_i.call(_e),_c=_s.next;for(_e=[];!(_i=_c.call(_s)).done;)_e.push(_i.value)}for(Wt&&2<_t&&(Vt=Id(Vt,arguments[2],2)),_i=ta(_e.length),_s=new(Ne(this))(_i),_t=0;_i>_t;_t++)_s[_t]=Wt?Vt(_e[_t],_t):_e[_t];return _s},lh=function($,_e,_t){var Vt,Wt;return Ua&&typeof(Vt=_e.constructor)=="function"&&Vt!==_t&&ha(Wt=Vt.prototype)&&Wt!==_t.prototype&&Ua($,Wt),$},Sf=$a(function($){var _e=Hd.f,_t=Za.get,Vt=Za.set,Wt=Ra.f,_i=Fb.f,_s=Math.round,_c=y.RangeError,_l=Pf.ArrayBuffer,_d=Pf.DataView,_m=function(y_,l_){var d_=0,f_=l_.length;for(y_=new(Ne(y_))(f_);f_>d_;)y_[d_]=l_[d_++];return y_},e_=function(y_,l_){Wt(y_,l_,{get:function(){return _t(this)[l_]}})},t_=function(y_){var l_;return y_ instanceof _l||(l_=Ff(y_))=="ArrayBuffer"||l_=="SharedArrayBuffer"},i_=function(y_,l_){return jh(y_)&&typeof l_!="symbol"&&l_ in y_&&String(+l_)==String(l_)},c_=function(y_,l_){return i_(y_,l_=lc(l_,!0))?dd(2,y_[l_]):_i(y_,l_)},h_=function(y_,l_,d_){return!(i_(y_,l_=lc(l_,!0))&&ha(d_)&&Q(d_,"value"))||Q(d_,"get")||Q(d_,"set")||d_.configurable||Q(d_,"writable")&&!d_.writable||Q(d_,"enumerable")&&!d_.enumerable?Wt(y_,l_,d_):(y_[l_]=d_.value,y_)};ka?(Qf||(Fb.f=c_,Ra.f=h_,e_(Rf,"buffer"),e_(Rf,"byteOffset"),e_(Rf,"byteLength"),e_(Rf,"length")),N({target:"Object",stat:!0,forced:!Qf},{getOwnPropertyDescriptor:c_,defineProperty:h_}),$.exports=function(y_,l_,d_){var f_=y_.match(/\d+$/)[0]/8,S_=y_+(d_?"Clamped":"")+"Array",T_="get"+y_,R_="set"+y_,C_=y[S_],j_=C_;y_=j_&&j_.prototype;var W_={},A_=function($_,q_){Wt($_,q_,{get:function(){var G_=_t(this);return G_.view[T_](q_*f_+G_.byteOffset,!0)},set:function(G_){var I_=_t(this);d_&&(G_=0>(G_=_s(G_))?0:255<G_?255:255&G_),I_.view[R_](q_*f_+I_.byteOffset,G_,!0)},enumerable:!0})};Qf?Dj&&(j_=l_(function($_,q_,G_,I_){return Gc($_,j_,S_),lh(ha(q_)?t_(q_)?I_!==void 0?new C_(q_,kh(G_,f_),I_):G_!==void 0?new C_(q_,kh(G_,f_)):new C_(q_):jh(q_)?_m(j_,q_):Ej.call(j_,q_):new C_(Le(q_)),$_,j_)}),Ua&&Ua(j_,Po),Jd(_e(C_),function($_){$_ in j_||Na(j_,$_,C_[$_])}),j_.prototype=y_):(j_=l_(function($_,q_,G_,I_){Gc($_,j_,S_);var x_=0,Y_=0;if(ha(q_)){if(!t_(q_))return jh(q_)?_m(j_,q_):Ej.call(j_,q_);var z_=q_;if(Y_=kh(G_,f_),q_=q_.byteLength,I_===void 0){if(q_%f_||0>(I_=q_-Y_))throw _c("Wrong length")}else if((I_=ta(I_)*f_)+Y_>q_)throw _c("Wrong length");q_=I_/f_}else q_=Le(q_),z_=new _l(I_=q_*f_);for(Vt($_,{buffer:z_,byteOffset:Y_,byteLength:I_,length:q_,view:new _d(z_)});x_<q_;)A_($_,x_++)}),Ua&&Ua(j_,Po),y_=j_.prototype=ac(Rf)),y_.constructor!==j_&&Na(y_,"constructor",j_),No&&Na(y_,No,S_),W_[S_]=j_,N({global:!0,forced:j_!=C_,sham:!Qf},W_),"BYTES_PER_ELEMENT"in j_||Na(j_,"BYTES_PER_ELEMENT",f_),"BYTES_PER_ELEMENT"in y_||Na(y_,"BYTES_PER_ELEMENT",f_),If(S_)}):$.exports=function(){}});Sf("Uint8",function($){return function(_e,_t,Vt){return $(this,_e,_t,Vt)}});var hw=Math.min,iw=[].copyWithin||function($,_e){var _t=Qa(this),Vt=ta(_t.length),Wt=xb($,Vt),_i=xb(_e,Vt),_s=2<arguments.length?arguments[2]:void 0;for(Vt=hw((_s===void 0?Vt:xb(_s,Vt))-_i,Vt-Wt),_s=1,_i<Wt&&Wt<_i+Vt&&(_s=-1,_i+=Vt-1,Wt+=Vt-1);0<Vt--;)_i in _t?_t[Wt]=_t[_i]:delete _t[Wt],Wt+=_s,_i+=_s;return _t};Aa("copyWithin",function($,_e){return iw.call(Da(this),$,_e,2<arguments.length?arguments[2]:void 0)}),Aa("every",function($){return Ju(Da(this),$,1<arguments.length?arguments[1]:void 0)}),Aa("fill",function($){return yj.apply(Da(this),arguments)}),Aa("filter",function($){var _e=yn(Da(this),$,1<arguments.length?arguments[1]:void 0),_t=kd(this,this.constructor),Vt=0,Wt=_e.length;for(_t=new(Ne(_t))(Wt);Wt>Vt;)_t[Vt]=_e[Vt++];return _t}),Aa("find",function($){return zn(Da(this),$,1<arguments.length?arguments[1]:void 0)}),Aa("findIndex",function($){return An(Da(this),$,1<arguments.length?arguments[1]:void 0)}),Aa("forEach",function($){Jd(Da(this),$,1<arguments.length?arguments[1]:void 0)}),Aa("includes",function($){return on(Da(this),$,1<arguments.length?arguments[1]:void 0)}),Aa("indexOf",function($){return Si(Da(this),$,1<arguments.length?arguments[1]:void 0)});var Qo=qa("iterator"),Ro=y.Uint8Array,jw=ld.values,kw=ld.keys,lw=ld.entries,Fj=Ro&&Ro.prototype[Qo],So=!!Fj&&(Fj.name=="values"||Fj.name==null),To=function(){return jw.call(Da(this))};Aa("entries",function(){return lw.call(Da(this))}),Aa("keys",function(){return kw.call(Da(this))}),Aa("values",To,!So),Aa(Qo,To,!So);var mw=[].join;Aa("join",function($){return mw.apply(Da(this),arguments)});var nw=Math.min,Gj=[].lastIndexOf,Uo=!!Gj&&0>1/[1].lastIndexOf(1,-0),ow=Ee("lastIndexOf"),pw=Uo||!ow?function($){if(Uo)return Gj.apply(this,arguments)||0;var _e=qb(this),_t=ta(_e.length),Vt=_t-1;for(1<arguments.length&&(Vt=nw(Vt,$b(arguments[1]))),0>Vt&&(Vt=_t+Vt);0<=Vt;Vt--)if(Vt in _e&&_e[Vt]===$)return Vt||0;return-1}:Gj;Aa("lastIndexOf",function($){return pw.apply(Da(this),arguments)}),Aa("map",function($){return xn(Da(this),$,1<arguments.length?arguments[1]:void 0,function(_e,_t){return new(Ne(kd(_e,_e.constructor)))(_t)})});var Vo=function($){return function(_e,_t,Vt,Wt){yb(_t),_e=Qa(_e);var _i=Af(_e),_s=ta(_e.length),_c=$?_s-1:0,_l=$?-1:1;if(2>Vt)for(;;){if(_c in _i){Wt=_i[_c],_c+=_l;break}if(_c+=_l,$?0>_c:_s<=_c)throw TypeError("Reduce of empty array with no initial value")}for(;$?0<=_c:_s>_c;_c+=_l)_c in _i&&(Wt=_t(Wt,_i[_c],_c,_e));return Wt}},Wo=Vo(!1),qw=Vo(!0);Aa("reduce",function($){return Wo(Da(this),$,arguments.length,1<arguments.length?arguments[1]:void 0)}),Aa("reduceRight",function($){return qw(Da(this),$,arguments.length,1<arguments.length?arguments[1]:void 0)});var rw=Math.floor;Aa("reverse",function(){for(var $,_e=Da(this).length,_t=rw(_e/2),Vt=0;Vt<_t;)$=this[Vt],this[Vt++]=this[--_e],this[_e]=$;return this});var sw=R(function(){new Int8Array(1).set({})});Aa("set",function($){Da(this);var _e=kh(1<arguments.length?arguments[1]:void 0,1),_t=this.length,Vt=Qa($),Wt=ta(Vt.length),_i=0;if(Wt+_e>_t)throw RangeError("Wrong length");for(;_i<Wt;)this[_e+_i]=Vt[_i++]},sw);var tw=[].slice,uw=R(function(){new Int8Array(1).slice()});Aa("slice",function($,_e){$=tw.call(Da(this),$,_e);var _t=kd(this,this.constructor);_e=0;var Vt=$.length;for(_t=new(Ne(_t))(Vt);Vt>_e;)_t[_e]=$[_e++];return _t},uw),Aa("some",function($){return Iu(Da(this),$,1<arguments.length?arguments[1]:void 0)});var vw=[].sort;Aa("sort",function($){return vw.call(Da(this),$)}),Aa("subarray",function($,_e){var _t=Da(this),Vt=_t.length;return $=xb($,Vt),new(kd(_t,_t.constructor))(_t.buffer,_t.byteOffset+$*_t.BYTES_PER_ELEMENT,ta((_e===void 0?Vt:xb(_e,Vt))-$))});var mh=y.Int8Array,Xo=[].toLocaleString,ww=[].slice,xw=!!mh&&R(function(){Xo.call(new mh(1))}),yw=R(function(){return[1,2].toLocaleString()!=new mh([1,2]).toLocaleString()})||!R(function(){mh.prototype.toLocaleString.call([1,2])});Aa("toLocaleString",function(){return Xo.apply(xw?ww.call(Da(this)):Da(this),arguments)},yw);var Yo=y.Uint8Array,zw=Yo&&Yo.prototype||{},nh=[].toString,Aw=[].join;R(function(){nh.call({})})&&(nh=function(){return Aw.call(this)}),Aa("toString",nh,zw.toString!=nh);var Zo=Pf.ArrayBuffer;N({global:!0,forced:y.ArrayBuffer!==Zo},{ArrayBuffer:Zo}),If("ArrayBuffer");var Bw=Ra.f,Hj=Function.prototype,Cw=Hj.toString,Dw=/^\s*function ([^ (]*)/;!ka||"name"in Hj||Bw(Hj,"name",{configurable:!0,get:function(){try{return Cw.call(this).match(Dw)[1]}catch{return""}}});var $o=RegExp.prototype,ap=$o.toString,Ew=R(function(){return ap.call({source:"a",flags:"b"})!="/a/b"}),Fw=ap.name!="toString";(Ew||Fw)&&Ta(RegExp.prototype,"toString",function(){var $=va(this),_e=String($.source),_t=$.flags;return"/"+_e+"/"+($=String(_t===void 0&&$ instanceof RegExp&&!("flags"in $o)?tj.call($):_t))},{unsafe:!0});var Gw=Ef("splice"),Hw=Math.max,Iw=Math.min;N({target:"Array",proto:!0,forced:!Gw},{splice:function($,_e){var _t,Vt,Wt=Qa(this),_i=ta(Wt.length),_s=xb($,_i),_c=arguments.length;if(_c===0?_c=_t=0:_c===1?(_c=0,_t=_i-_s):(_c-=2,_t=Iw(Hw($b(_e),0),_i-_s)),9007199254740991<_i+_c-_t)throw TypeError("Maximum allowed length exceeded");var _l=Sg(Wt,_t);for(Vt=0;Vt<_t;Vt++){var _d=_s+Vt;_d in Wt&&Ge(_l,Vt,Wt[_d])}if(_l.length=_t,_c<_t){for(Vt=_s;Vt<_i-_t;Vt++){var _m=Vt+_c;(_d=Vt+_t)in Wt?Wt[_m]=Wt[_d]:delete Wt[_m]}for(Vt=_i;Vt>_i-_t+_c;Vt--)delete Wt[Vt-1]}else if(_c>_t)for(Vt=_i-_t;Vt>_s;Vt--)_m=Vt+_c-1,(_d=Vt+_t-1)in Wt?Wt[_m]=Wt[_d]:delete Wt[_m];for(Vt=0;Vt<_c;Vt++)Wt[Vt+_s]=arguments[Vt+2];return Wt.length=_i-_t+_c,_l}});var Ij={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Jj=qa("iterator"),bp=qa("toStringTag"),Kj=ld.values,oh;for(oh in Ij){var cp=y[oh],Kc=cp&&cp.prototype;if(Kc){if(Kc[Jj]!==Kj)try{Na(Kc,Jj,Kj)}catch{Kc[Jj]=Kj}if(Kc[bp]||Na(Kc,bp,oh),Ij[oh]){for(var Oe in ld)if(Kc[Oe]!==ld[Oe])try{Na(Kc,Oe,ld[Oe])}catch{Kc[Oe]=ld[Oe]}}}}var dp=Object.is||function($,_e){return $===_e?$!==0||1/$==1/_e:$!=$&&_e!=_e};dh("search",1,function($,_e,_t){return[function(Vt){var Wt=jb(this),_i=Vt==null?void 0:Vt[$];return _i!==void 0?_i.call(Vt,Wt):new RegExp(Vt)[$](String(Wt))},function(Vt){var Wt=_t(_e,Vt,this);if(Wt.done)return Wt.value;Vt=va(Vt);var _i=String(this);return Wt=Vt.lastIndex,dp(Wt,0)||(Vt.lastIndex=0),_i=Ke(Vt,_i),dp(Vt.lastIndex,Wt)||(Vt.lastIndex=Wt),_i===null?-1:_i.index}]}),$a(function($){(function(_e,_t){$.exports?$.exports=_t(_e):_t(_e)})(typeof self<"u"?self:Ya,function(_e){function _t(A_){return btoa(A_).replace(/=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function Vt(A_){return A_=(A_+="===").slice(0,-A_.length%4),atob(A_.replace(/-/g,"+").replace(/_/g,"/"))}function Wt(A_){for(var $_=new Uint8Array(A_.length),q_=0;q_<A_.length;q_++)$_[q_]=A_.charCodeAt(q_);return $_}function _i(A_){return A_ instanceof ArrayBuffer&&(A_=new Uint8Array(A_)),String.fromCharCode.apply(String,A_)}function _s(A_){var $_={name:(A_.name||A_||"").toUpperCase().replace("V","v")};switch($_.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":A_.length&&($_.length=A_.length);break;case"HMAC":A_.hash&&($_.hash=_s(A_.hash)),A_.length&&($_.length=A_.length);break;case"RSAES-PKCS1-v1_5":A_.publicExponent&&($_.publicExponent=new Uint8Array(A_.publicExponent)),A_.modulusLength&&($_.modulusLength=A_.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":A_.hash&&($_.hash=_s(A_.hash)),A_.publicExponent&&($_.publicExponent=new Uint8Array(A_.publicExponent)),A_.modulusLength&&($_.modulusLength=A_.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return $_}function _c(A_){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[A_.name][(A_.hash||{}).name||A_.length||""]}function _l(A_){(A_ instanceof ArrayBuffer||A_ instanceof Uint8Array)&&(A_=JSON.parse(decodeURIComponent(escape(_i(A_)))));var $_={kty:A_.kty,alg:A_.alg,ext:A_.ext||A_.extractable};switch($_.kty){case"oct":$_.k=A_.k;case"RSA":"n e d p q dp dq qi oth".split(" ").forEach(function(q_){q_ in A_&&($_[q_]=A_[q_])});break;default:throw new TypeError("Unsupported key type")}return $_}function _d(A_){return A_=_l(A_),T_&&(A_.extractable=A_.ext,delete A_.ext),Wt(unescape(encodeURIComponent(JSON.stringify(A_)))).buffer}function _m(A_){var $_=e_(A_),q_=!1;switch(2<$_.length&&(q_=!0,$_.shift()),A_={ext:!0},$_[0][0]){case"1.2.840.113549.1.1.1":var G_="n e d p q dp dq qi".split(" ");for($_=e_($_[1]),q_&&$_.shift(),q_=0;q_<$_.length;q_++)$_[q_][0]||($_[q_]=$_[q_].subarray(1)),A_[G_[q_]]=_t(_i($_[q_]));A_.kty="RSA";break;default:throw new TypeError("Unsupported key type")}return A_}function e_(A_,$_){if(A_ instanceof ArrayBuffer&&(A_=new Uint8Array(A_)),$_||($_={pos:0,end:A_.length}),2>$_.end-$_.pos||$_.end>A_.length)throw new RangeError("Malformed DER");var q_=A_[$_.pos++],G_=A_[$_.pos++];if(128<=G_){if(G_&=127,$_.end-$_.pos<G_)throw new RangeError("Malformed DER");for(var I_=0;G_--;)I_<<=8,I_|=A_[$_.pos++];G_=I_}if($_.end-$_.pos<G_)throw new RangeError("Malformed DER");switch(q_){case 2:q_=A_.subarray($_.pos,$_.pos+=G_);break;case 3:if(A_[$_.pos++])throw Error("Unsupported bit string");G_--;case 4:q_=new Uint8Array(A_.subarray($_.pos,$_.pos+=G_)).buffer;break;case 5:q_=null;break;case 6:if(!((A_=btoa(_i(A_.subarray($_.pos,$_.pos+=G_))))in C_))throw Error("Unsupported OBJECT ID "+A_);q_=C_[A_];break;case 48:for(q_=[],G_=$_.pos+G_;$_.pos<G_;)q_.push(e_(A_,$_));break;default:throw Error("Unsupported DER tag 0x"+q_.toString(16))}return q_}function t_(A_,$_){$_||($_=[]);var q_=$_.length+2;if($_.push(0,0),A_ instanceof Uint8Array)for(var G_=2,I_=A_.length,x_=0;x_<I_;x_++)$_.push(A_[x_]);else if(A_ instanceof ArrayBuffer)for(G_=4,I_=A_.byteLength,A_=new Uint8Array(A_),x_=0;x_<I_;x_++)$_.push(A_[x_]);else if(A_===null)G_=5,I_=0;else if(typeof A_=="string"&&A_ in j_)for(G_=6,I_=(A_=Wt(atob(j_[A_]))).length,x_=0;x_<I_;x_++)$_.push(A_[x_]);else if(A_ instanceof Array){for(x_=0;x_<A_.length;x_++)t_(A_[x_],$_);G_=48,I_=$_.length-q_}else{if(!(X(A_)==="object"&&A_.tag===3&&A_.value instanceof ArrayBuffer))throw Error("Unsupported DER value "+A_);for(G_=3,I_=(A_=new Uint8Array(A_.value)).byteLength,$_.push(0),x_=0;x_<I_;x_++)$_.push(A_[x_]);I_++}if(128<=I_){for(x_=I_,I_=4,$_.splice(q_,0,x_>>24&255,x_>>16&255,x_>>8&255,255&x_);1<I_&&!(x_>>24);)x_<<=8,I_--;4>I_&&$_.splice(q_,4-I_),I_|=128}return $_.splice(q_-2,2,G_,I_),$_}function i_(A_,$_,q_,G_){Object.defineProperties(this,{_key:{value:A_},type:{value:A_.type,enumerable:!0},extractable:{value:q_===void 0?A_.extractable:q_,enumerable:!0},algorithm:{value:$_===void 0?A_.algorithm:$_,enumerable:!0},usages:{value:G_===void 0?A_.usages:G_,enumerable:!0}})}function c_(A_){return A_==="verify"||A_==="encrypt"||A_==="wrapKey"}function h_(A_){return A_==="sign"||A_==="decrypt"||A_==="unwrapKey"}if(typeof Promise!="function")throw"Promise support required";var y_=_e.crypto||_e.msCrypto;if(y_){var l_=y_.subtle||y_.webkitSubtle;if(l_){var d_=_e.Crypto||y_.constructor||Object,f_=_e.SubtleCrypto||l_.constructor||Object;_e.CryptoKey||_e.Key;var S_=-1<_e.navigator.userAgent.indexOf("Edge/"),T_=!!_e.msCrypto&&!S_,R_=!y_.subtle&&!!y_.webkitSubtle;if(T_||R_){var C_={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},j_={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};if(["generateKey","importKey","unwrapKey"].forEach(function(A_){var $_=l_[A_];l_[A_]=function(q_,G_,I_){var x_=[].slice.call(arguments);switch(A_){case"generateKey":var Y_=_s(q_),z_=G_,B_=I_;break;case"importKey":Y_=_s(I_),z_=x_[3],B_=x_[4],q_==="jwk"&&((G_=_l(G_)).alg||(G_.alg=_c(Y_)),G_.key_ops||(G_.key_ops=G_.kty!=="oct"?"d"in G_?B_.filter(h_):B_.filter(c_):B_.slice()),x_[1]=_d(G_));break;case"unwrapKey":Y_=x_[4],z_=x_[5],B_=x_[6],x_[2]=I_._key}if(A_==="generateKey"&&Y_.name==="HMAC"&&Y_.hash)return Y_.length=Y_.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[Y_.hash.name],l_.importKey("raw",y_.getRandomValues(new Uint8Array(Y_.length+7>>3)),Y_,z_,B_);if(R_&&A_==="generateKey"&&Y_.name==="RSASSA-PKCS1-v1_5"&&(!Y_.modulusLength||2048<=Y_.modulusLength))return(q_=_s(q_)).name="RSAES-PKCS1-v1_5",delete q_.hash,l_.generateKey(q_,!0,["encrypt","decrypt"]).then(function(K_){return Promise.all([l_.exportKey("jwk",K_.publicKey),l_.exportKey("jwk",K_.privateKey)])}).then(function(K_){return K_[0].alg=K_[1].alg=_c(Y_),K_[0].key_ops=B_.filter(c_),K_[1].key_ops=B_.filter(h_),Promise.all([l_.importKey("jwk",K_[0],Y_,!0,K_[0].key_ops),l_.importKey("jwk",K_[1],Y_,z_,K_[1].key_ops)])}).then(function(K_){return{publicKey:K_[0],privateKey:K_[1]}});if((R_||T_&&(Y_.hash||{}).name==="SHA-1")&&A_==="importKey"&&q_==="jwk"&&Y_.name==="HMAC"&&G_.kty==="oct")return l_.importKey("raw",Wt(Vt(G_.k)),I_,x_[3],x_[4]);if(R_&&A_==="importKey"&&(q_==="spki"||q_==="pkcs8"))return l_.importKey("jwk",_m(G_),I_,x_[3],x_[4]);if(T_&&A_==="unwrapKey")return l_.decrypt(x_[3],I_,G_).then(function(K_){return l_.importKey(q_,K_,x_[4],x_[5],x_[6])});try{var Q_=$_.apply(l_,x_)}catch(K_){return Promise.reject(K_)}return T_&&(Q_=new Promise(function(K_,rE){Q_.onabort=Q_.onerror=function(aE){rE(aE)},Q_.oncomplete=function(aE){K_(aE.target.result)}})),Q_=Q_.then(function(K_){return Y_.name!=="HMAC"||Y_.length||(Y_.length=8*K_.algorithm.length),Y_.name.search("RSA")==0&&(Y_.modulusLength||(Y_.modulusLength=(K_.publicKey||K_).algorithm.modulusLength),Y_.publicExponent||(Y_.publicExponent=(K_.publicKey||K_).algorithm.publicExponent)),K_.publicKey&&K_.privateKey?{publicKey:new i_(K_.publicKey,Y_,z_,B_.filter(c_)),privateKey:new i_(K_.privateKey,Y_,z_,B_.filter(h_))}:new i_(K_,Y_,z_,B_)})}}),["exportKey","wrapKey"].forEach(function(A_){var $_=l_[A_];l_[A_]=function(q_,G_,I_){var x_=[].slice.call(arguments);switch(A_){case"exportKey":x_[1]=G_._key;break;case"wrapKey":x_[1]=G_._key,x_[2]=I_._key}if((R_||T_&&(G_.algorithm.hash||{}).name==="SHA-1")&&A_==="exportKey"&&q_==="jwk"&&G_.algorithm.name==="HMAC"&&(x_[0]="raw"),!R_||A_!=="exportKey"||q_!=="spki"&&q_!=="pkcs8"||(x_[0]="jwk"),T_&&A_==="wrapKey")return l_.exportKey(q_,G_).then(function(z_){return q_==="jwk"&&(z_=Wt(unescape(encodeURIComponent(JSON.stringify(_l(z_)))))),l_.encrypt(x_[3],I_,z_)});try{var Y_=$_.apply(l_,x_)}catch(z_){return Promise.reject(z_)}return T_&&(Y_=new Promise(function(z_,B_){Y_.onabort=Y_.onerror=function(Q_){B_(Q_)},Y_.oncomplete=function(Q_){z_(Q_.target.result)}})),A_==="exportKey"&&q_==="jwk"&&(Y_=Y_.then(function(z_){return(R_||T_&&(G_.algorithm.hash||{}).name==="SHA-1")&&G_.algorithm.name==="HMAC"?{kty:"oct",alg:_c(G_.algorithm),key_ops:G_.usages.slice(),ext:!0,k:_t(_i(z_))}:((z_=_l(z_)).alg||(z_.alg=_c(G_.algorithm)),z_.key_ops||(z_.key_ops=G_.type==="public"?G_.usages.filter(c_):G_.type==="private"?G_.usages.filter(h_):G_.usages.slice()),z_)})),!R_||A_!=="exportKey"||q_!=="spki"&&q_!=="pkcs8"||(Y_=Y_.then(function(z_){var B_=[["",null]],Q_=!1;switch((z_=_l(z_)).kty){case"RSA":for(var K_="n e d p q dp dq qi".split(" "),rE=[],aE=0;aE<K_.length&&K_[aE]in z_;aE++){var gE=rE[aE]=Wt(Vt(z_[K_[aE]]));128&gE[0]&&(rE[aE]=new Uint8Array(gE.length+1),rE[aE].set(gE,1))}2<rE.length&&(Q_=!0,rE.unshift(new Uint8Array([0]))),B_[0][0]="1.2.840.113549.1.1.1";break;default:throw new TypeError("Unsupported key type")}return B_.push(new Uint8Array(t_(rE)).buffer),Q_?B_.unshift(new Uint8Array([0])):B_[1]={tag:3,value:B_[1]},new Uint8Array(t_(B_)).buffer})),Y_}}),["encrypt","decrypt","sign","verify"].forEach(function(A_){var $_=l_[A_];l_[A_]=function(q_,G_,I_,x_){if(T_&&(!I_.byteLength||x_&&!x_.byteLength))throw Error("Empty input is not allowed");var Y_=[].slice.call(arguments),z_=_s(q_);if(!T_||A_!=="sign"&&A_!=="verify"||q_!=="RSASSA-PKCS1-v1_5"&&q_!=="HMAC"||(Y_[0]={name:q_}),T_&&G_.algorithm.hash&&(Y_[0].hash=Y_[0].hash||G_.algorithm.hash),T_&&A_==="decrypt"&&z_.name==="AES-GCM"){var B_=q_.tagLength>>3;Y_[2]=(I_.buffer||I_).slice(0,I_.byteLength-B_),q_.tag=(I_.buffer||I_).slice(I_.byteLength-B_)}T_&&z_.name==="AES-GCM"&&Y_[0].tagLength===void 0&&(Y_[0].tagLength=128),Y_[1]=G_._key;try{var Q_=$_.apply(l_,Y_)}catch(K_){return Promise.reject(K_)}return T_&&(Q_=new Promise(function(K_,rE){Q_.onabort=Q_.onerror=function(aE){rE(aE)},Q_.oncomplete=function(aE){if(aE=aE.target.result,A_==="encrypt"&&aE instanceof AesGcmEncryptResult){var gE=aE.ciphertext,kE=aE.tag;(aE=new Uint8Array(gE.byteLength+kE.byteLength)).set(new Uint8Array(gE),0),aE.set(new Uint8Array(kE),gE.byteLength),aE=aE.buffer}K_(aE)}})),Q_}}),T_){var W_=l_.digest;l_.digest=function(A_,$_){if(!$_.byteLength)throw Error("Empty input is not allowed");try{var q_=W_.call(l_,A_,$_)}catch(G_){return Promise.reject(G_)}return q_=new Promise(function(G_,I_){q_.onabort=q_.onerror=function(x_){I_(x_)},q_.oncomplete=function(x_){G_(x_.target.result)}})},_e.crypto=Object.create(y_,{getRandomValues:{value:function(A_){return y_.getRandomValues(A_)}},subtle:{value:l_}}),_e.CryptoKey=i_}R_&&(y_.subtle=l_,_e.Crypto=d_,_e.SubtleCrypto=f_,_e.CryptoKey=i_)}}}})});var Jw=qa("match"),Lj=function($){var _e;return ha($)&&((_e=$[Jw])!==void 0?!!_e:Zb($)=="RegExp")},Kw=[].push,Lw=Math.min;dh("split",2,function($,_e,_t){var Vt="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(Wt,_i){var _s=String(jb(this));if((_i=_i===void 0?4294967295:_i>>>0)===0)return[];if(Wt===void 0)return[_s];if(!Lj(Wt))return _e.call(_s,Wt,_i);var _c,_l,_d,_m=[],e_=0;for(Wt=new RegExp(Wt.source,(Wt.ignoreCase?"i":"")+(Wt.multiline?"m":"")+(Wt.unicode?"u":"")+(Wt.sticky?"y":"")+"g");(_c=Of.call(Wt,_s))&&!((_l=Wt.lastIndex)>e_&&(_m.push(_s.slice(e_,_c.index)),1<_c.length&&_c.index<_s.length&&Kw.apply(_m,_c.slice(1)),_d=_c[0].length,e_=_l,_m.length>=_i));)Wt.lastIndex===_c.index&&Wt.lastIndex++;return e_===_s.length?(_d||!Wt.test(""))&&_m.push(""):_m.push(_s.slice(e_)),_m.length>_i?_m.slice(0,_i):_m}:"0".split(void 0,0).length?function(Wt,_i){return Wt===void 0&&_i===0?[]:_e.call(this,Wt,_i)}:_e;return[function(Wt,_i){var _s=jb(this),_c=Wt==null?void 0:Wt[$];return _c!==void 0?_c.call(Wt,_s,_i):Vt.call(String(_s),Wt,_i)},function(Wt,_i){var _s=_t(Vt,Wt,this,_i,Vt!==_e);if(_s.done)return _s.value;var _c=va(Wt);Wt=String(this);var _l=kd(_c,RegExp);if(_s=_c.unicode,_c=new _l(pc?"^(?:"+_c.source+")":_c,(_c.ignoreCase?"i":"")+(_c.multiline?"m":"")+(_c.unicode?"u":"")+(pc?"g":"y")),(_i=_i===void 0?4294967295:_i>>>0)===0)return[];if(Wt.length===0)return Ke(_c,Wt)===null?[Wt]:[];var _d=0,_m=0;for(_l=[];_m<Wt.length;){_c.lastIndex=pc?0:_m;var e_,t_=Ke(_c,pc?Wt.slice(_m):Wt);if(t_===null||(e_=Lw(ta(_c.lastIndex+(pc?_m:0)),Wt.length))===_d)_m=xj(Wt,_m,_s);else{if(_l.push(Wt.slice(_d,_m)),_l.length===_i)return _l;for(_d=1;_d<=t_.length-1;_d++)if(_l.push(t_[_d]),_l.length===_i)return _l;_m=_d=e_}}return _l.push(Wt.slice(_d)),_l}]},pc),function($){$.console||($.console={}),$=$.console;for(var _e,_t=function(){},Vt=["memory"],Wt="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profiles profileEnd show table time timeEnd timeline timelineEnd timeStamp trace warn".split(" ");_e=Vt.pop();)$[_e]||($[_e]={});for(;_e=Wt.pop();)$[_e]||($[_e]=_t)}(typeof window>"u"?Ya:window),N({target:"Object",stat:!0},{setPrototypeOf:Ua});var Mw=R(function(){Vb(1)});N({target:"Object",stat:!0,forced:Mw,sham:!Hn},{getPrototypeOf:function($){return Vb(Qa($))}});var ep=[].slice,Mj={},Nw=Function.bind||function($){var _e=yb(this),_t=ep.call(arguments,1),Vt=function(){var Wt=_t.concat(ep.call(arguments));if(this instanceof Vt){var _i=Wt.length;if(!(_i in Mj)){for(var _s=[],_c=0;_c<_i;_c++)_s[_c]="a["+_c+"]";Mj[_i]=Function("C,a","return new C("+_s.join(",")+")")}Wt=Mj[_i](_e,Wt)}else Wt=_e.apply($,Wt);return Wt};return ha(_e.prototype)&&(Vt.prototype=_e.prototype),Vt},Nj=mc("Reflect","construct"),fp=R(function(){function $(){}return!(Nj(function(){},[],$)instanceof $)}),gp=!R(function(){Nj(function(){})}),hp=fp||gp;N({target:"Reflect",stat:!0,forced:hp,sham:hp},{construct:function($,_e){yb($),va(_e);var _t=3>arguments.length?$:yb(arguments[2]);if(gp&&!fp)return Nj($,_e,_t);if($==_t){switch(_e.length){case 0:return new $;case 1:return new $(_e[0]);case 2:return new $(_e[0],_e[1]);case 3:return new $(_e[0],_e[1],_e[2]);case 4:return new $(_e[0],_e[1],_e[2],_e[3])}return(_t=[null]).push.apply(_t,_e),new(Nw.apply($,_t))}_t=_t.prototype,_t=ac(ha(_t)?_t:Object.prototype);var Vt=Function.apply.call($,_t,_e);return ha(Vt)?Vt:_t}}),N({target:"Reflect",stat:!0},{get:wl});var ip=Fb.f,Ow=R(function(){ip(1)});N({target:"Object",stat:!0,forced:!ka||Ow,sham:!ka},{getOwnPropertyDescriptor:function($,_e){return ip(qb($),_e)}});var jp=Hd.f,Pw={}.toString,kp=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Oj=function($){if(kp&&Pw.call($)=="[object Window]")try{var _e=jp($)}catch{_e=kp.slice()}else _e=jp(qb($));return _e},lp={f:qa},Qw=Ra.f,ph=function($){var _e=y.Symbol||(y.Symbol={});Q(_e,$)||Qw(_e,$,{value:lp.f($)})},rb=Pg("hidden"),mp=qa("toPrimitive"),Rw=Za.set,np=Za.getterFor("Symbol"),Ob=Object.prototype,sb=y.Symbol,Tf=mc("JSON","stringify"),op=Fb.f,od=Ra.f,pp=Oj,Sw=zf,Lc=fd("symbols"),Uf=fd("op-symbols"),Pj=fd("string-to-symbol-registry"),Qj=fd("symbol-to-string-registry"),Tw=fd("wks"),Rj=y.QObject,Sj=!Rj||!Rj.prototype||!Rj.prototype.findChild,Tj=ka&&R(function(){return ac(od({},"a",{get:function(){return od(this,"a",{value:7}).a}})).a!=7})?function($,_e,_t){var Vt=op(Ob,_e);Vt&&delete Ob[_e],od($,_e,_t),Vt&&$!==Ob&&od(Ob,_e,Vt)}:od,Uj=function($,_e){var _t=Lc[$]=ac(sb.prototype);return Rw(_t,{type:"Symbol",tag:$,description:_e}),ka||(_t.description=_e),_t},Vj=vn?function($){return typeof $=="symbol"}:function($){return Object($)instanceof sb},qh=function($,_e,_t){return $===Ob&&qh(Uf,_e,_t),va($),_e=lc(_e,!0),va(_t),Q(Lc,_e)?(_t.enumerable?(Q($,rb)&&$[rb][_e]&&($[rb][_e]=!1),_t=ac(_t,{enumerable:dd(0,!1)})):(Q($,rb)||od($,rb,dd(1,{})),$[rb][_e]=!0),Tj($,_e,_t)):od($,_e,_t)},qp=function($,_e){va($);var _t=qb(_e);return _e=Dc(_t).concat(Wj(_t)),Jd(_e,function(Vt){ka&&!Xj.call(_t,Vt)||qh($,Vt,_t[Vt])}),$},Xj=function($){$=lc($,!0);var _e=Sw.call(this,$);return!(this===Ob&&Q(Lc,$)&&!Q(Uf,$))&&(!(_e||!Q(this,$)||!Q(Lc,$)||Q(this,rb)&&this[rb][$])||_e)},rp=function($,_e){if($=qb($),_e=lc(_e,!0),$!==Ob||!Q(Lc,_e)||Q(Uf,_e)){var _t=op($,_e);return!_t||!Q(Lc,_e)||Q($,rb)&&$[rb][_e]||(_t.enumerable=!0),_t}},sp=function($){$=pp(qb($));var _e=[];return Jd($,function(_t){Q(Lc,_t)||Q(Be,_t)||_e.push(_t)}),_e},Wj=function($){var _e=$===Ob;$=pp(_e?Uf:qb($));var _t=[];return Jd($,function(Vt){!Q(Lc,Vt)||_e&&!Q(Ob,Vt)||_t.push(Lc[Vt])}),_t};if(oc||(sb=function(){if(this instanceof sb)throw TypeError("Symbol is not a constructor");var $=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,_e=Ae($),_t=function(Vt){this===Ob&&_t.call(Uf,Vt),Q(this,rb)&&Q(this[rb],_e)&&(this[rb][_e]=!1),Tj(this,_e,dd(1,Vt))};return ka&&Sj&&Tj(Ob,_e,{configurable:!0,set:_t}),Uj(_e,$)},Ta(sb.prototype,"toString",function(){return np(this).tag}),Ta(sb,"withoutSetter",function($){return Uj(Ae($),$)}),zf=Xj,Ra.f=qh,Fb.f=rp,Hd.f=Oj=sp,Bf.f=Wj,lp.f=function($){return Uj(qa($),$)},ka&&(od(sb.prototype,"description",{configurable:!0,get:function(){return np(this).description}}),Ta(Ob,"propertyIsEnumerable",Xj,{unsafe:!0}))),N({global:!0,wrap:!0,forced:!oc,sham:!oc},{Symbol:sb}),Jd(Dc(Tw),function($){ph($)}),N({target:"Symbol",stat:!0,forced:!oc},{for:function($){if($=String($),Q(Pj,$))return Pj[$];var _e=sb($);return Pj[$]=_e,Qj[_e]=$,_e},keyFor:function($){if(!Vj($))throw TypeError($+" is not a symbol");if(Q(Qj,$))return Qj[$]},useSetter:function(){Sj=!0},useSimple:function(){Sj=!1}}),N({target:"Object",stat:!0,forced:!oc,sham:!ka},{create:function($,_e){return _e===void 0?ac($):qp(ac($),_e)},defineProperty:qh,defineProperties:qp,getOwnPropertyDescriptor:rp}),N({target:"Object",stat:!0,forced:!oc},{getOwnPropertyNames:sp,getOwnPropertySymbols:Wj}),N({target:"Object",stat:!0,forced:R(function(){Bf.f(1)})},{getOwnPropertySymbols:function($){return Bf.f(Qa($))}}),Tf){var Uw=!oc||R(function(){var $=sb();return Tf([$])!="[null]"||Tf({a:$})!="{}"||Tf(Object($))!="{}"});N({target:"JSON",stat:!0,forced:Uw},{stringify:function($,_e,_t){for(var Vt,Wt=[$],_i=1;arguments.length>_i;)Wt.push(arguments[_i++]);if(Vt=_e,(ha(_e)||$!==void 0)&&!Vj($))return gd(_e)||(_e=function(_s,_c){if(typeof Vt=="function"&&(_c=Vt.call(this,_s,_c)),!Vj(_c))return _c}),Wt[1]=_e,Tf.apply(null,Wt)}})}sb.prototype[mp]||Na(sb.prototype,mp,sb.prototype.valueOf),Ec(sb,"Symbol"),Be[rb]=!0;var Vw=Ra.f,Mc=y.Symbol;if(ka&&typeof Mc=="function"&&(!("description"in Mc.prototype)||Mc().description!==void 0)){var tp={},Vf=function(){var $=1>arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),_e=this instanceof Vf?new Mc($):$===void 0?Mc():Mc($);return $===""&&(tp[_e]=!0),_e};rn(Vf,Mc);var Yj=Vf.prototype=Mc.prototype;Yj.constructor=Vf;var Ww=Yj.toString,Xw=String(Mc("test"))=="Symbol(test)",Yw=/^Symbol\((.*)\)[^)]+$/;Vw(Yj,"description",{configurable:!0,get:function(){var $=ha(this)?this.valueOf():this,_e=Ww.call($);return Q(tp,$)?"":($=Xw?_e.slice(7,-1):_e.replace(Yw,"$1"))===""?void 0:$}}),N({global:!0,forced:!0},{Symbol:Vf})}ph("toStringTag"),Ec(y.JSON,"JSON",!0),Ec(Math,"Math",!0),function(){function $(t_,i_){if(!(t_ instanceof i_))throw new TypeError("Cannot call a class as a function")}function _e(t_,i_){for(var c_=0;c_<i_.length;c_++){var h_=i_[c_];h_.enumerable=h_.enumerable||!1,h_.configurable=!0,"value"in h_&&(h_.writable=!0),Object.defineProperty(t_,h_.key,h_)}}function _t(t_,i_,c_){return i_&&_e(t_.prototype,i_),c_&&_e(t_,c_),t_}function Vt(t_,i_){if(typeof i_!="function"&&i_!==null)throw new TypeError("Super expression must either be null or a function");t_.prototype=Object.create(i_&&i_.prototype,{constructor:{value:t_,writable:!0,configurable:!0}}),i_&&_i(t_,i_)}function Wt(t_){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(i_){return i_.__proto__||Object.getPrototypeOf(i_)})(t_)}function _i(t_,i_){return(_i=Object.setPrototypeOf||function(c_,h_){return c_.__proto__=h_,c_})(t_,i_)}function _s(t_){if(t_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t_}function _c(t_){var i_=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var c_=Wt(t_);if(i_){var h_=Wt(this).constructor;c_=Reflect.construct(c_,arguments,h_)}else c_=c_.apply(this,arguments);return c_=!c_||X(c_)!=="object"&&typeof c_!="function"?_s(this):c_}}function _l(t_,i_,c_){return(_l=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(h_,y_,l_){for(;!Object.prototype.hasOwnProperty.call(h_,y_)&&(h_=Wt(h_))!==null;);if(h_)return(y_=Object.getOwnPropertyDescriptor(h_,y_)).get?y_.get.call(l_):y_.value})(t_,i_,c_||t_)}var _d=function(){function t_(){$(this,t_),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return _t(t_,[{key:"addEventListener",value:function(i_,c_,h_){i_ in this.listeners||(this.listeners[i_]=[]),this.listeners[i_].push({callback:c_,options:h_})}},{key:"removeEventListener",value:function(i_,c_){if(i_ in this.listeners){for(var h_=0,y_=(i_=this.listeners[i_]).length;h_<y_;h_++)if(i_[h_].callback===c_){i_.splice(h_,1);break}}}},{key:"dispatchEvent",value:function(i_){if(i_.type in this.listeners){for(var c_=this.listeners[i_.type].slice(),h_=0,y_=c_.length;h_<y_;h_++){var l_=c_[h_];try{l_.callback.call(this,i_)}catch(d_){Promise.resolve().then(function(){throw d_})}l_.options&&l_.options.once&&this.removeEventListener(i_.type,l_.callback)}return!i_.defaultPrevented}}}]),t_}(),_m=function(t_){function i_(){$(this,i_);var h_=c_.call(this);return h_.listeners||_d.call(_s(h_)),Object.defineProperty(_s(h_),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(_s(h_),"onabort",{value:null,writable:!0,configurable:!0}),h_}Vt(i_,t_);var c_=_c(i_);return _t(i_,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(h_){h_.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,h_)),_l(Wt(i_.prototype),"dispatchEvent",this).call(this,h_)}}]),i_}(_d),e_=function(){function t_(){$(this,t_),Object.defineProperty(this,"signal",{value:new _m,writable:!0,configurable:!0})}return _t(t_,[{key:"abort",value:function(){try{var i_=new Event("abort")}catch{typeof document<"u"?document.createEvent?(i_=document.createEvent("Event")).initEvent("abort",!1,!1):(i_=document.createEventObject()).type="abort":i_={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(i_)}},{key:"toString",value:function(){return"[object AbortController]"}}]),t_}();typeof Symbol<"u"&&Symbol.toStringTag&&(e_.prototype[Symbol.toStringTag]="AbortController",_m.prototype[Symbol.toStringTag]="AbortSignal"),function(t_){if(t_.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL){console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill");var i_=!0}else i_=typeof t_.Request=="function"&&!t_.Request.prototype.hasOwnProperty("signal")||!t_.AbortController;i_&&(t_.AbortController=e_,t_.AbortSignal=_m)}(typeof self<"u"?self:Ya)}();var Zw=Math.floor,$w=Math.log,ax=Math.LOG2E;N({target:"Math",stat:!0},{clz32:function($){return($>>>=0)?31-Zw($w($+.5)*ax):32}});var bx=Math.log,cx=Math.LN2,ss=Math.clz32||function($){return 31-bx($>>>0)/cx|0},xd=String.fromCharCode,up={}.toString,Zj=window.Uint8Array,ak=Zj||Array,dx=up.call((window.ArrayBuffer||ak).prototype),bk;xl.prototype.decode=function($){if($=$&&$.buffer||$,up.call($)!==dx)throw Error("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");for(var _e="",_t=0,Vt=0|($=Zj?new ak($):$).length;_t<Vt;_t=_t+32768|0)_e+=xd.apply(0,$[Zj?"slice":"subarray"](_t,_t+32768|0));return _e.replace(/[\xc0-\xff][\x80-\xbf]*/g,rs)},window.TextDecoder||(window.TextDecoder=xl),yl.prototype.encode=function($){for(var _e=0|($=$===void 0?"":(""+$).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,ts)).length,_t=new ak(_e),Vt=0;Vt<_e;Vt=Vt+1|0)_t[Vt]=$.charCodeAt(Vt);return _t},window.TextEncoder||(window.TextEncoder=yl),function($){var _e,_t,Vt,Wt,_i,_s,_c,_l,_d,_m,e_;(function(t_){t_.LOGIN="LOGIN",t_.LOGIN_SUCCESS="LOGIN_SUCCESS",t_.LOGIN_FAILURE="LOGIN_FAILURE",t_.LOGIN_TIMEOUT="LOGIN_TIMEOUT",t_.INTERRUPTED="INTERRUPTED",t_.LOGOUT="LOGOUT",t_.BANNED_BY_SERVER="BANNED_BY_SERVER",t_.REMOTE_LOGIN="REMOTE_LOGIN"})(_e||(_e={})),$.ConnectionChangeReason=_e,function(t_){t_.DISCONNECTED="DISCONNECTED",t_.CONNECTING="CONNECTING",t_.CONNECTED="CONNECTED",t_.RECONNECTING="RECONNECTING",t_.ABORTED="ABORTED"}(_t||(_t={})),$.ConnectionState=_t,function(t_){t_.IDLE="IDLE",t_.SENT_TO_REMOTE="SENT_TO_REMOTE",t_.RECEIVED_BY_REMOTE="RECEIVED_BY_REMOTE",t_.ACCEPTED_BY_REMOTE="ACCEPTED_BY_REMOTE",t_.REFUSED_BY_REMOTE="REFUSED_BY_REMOTE",t_.CANCELED="CANCELED",t_.FAILURE="FAILURE"}(Vt||(Vt={})),$.LocalInvitationState=Vt,function(t_){t_.INVITATION_RECEIVED="INVITATION_RECEIVED",t_.ACCEPT_SENT_TO_LOCAL="ACCEPT_SENT_TO_LOCAL",t_.REFUSED="REFUSED",t_.ACCEPTED="ACCEPTED",t_.CANCELED="CANCELED",t_.FAILURE="FAILURE"}(Wt||(Wt={})),$.RemoteInvitationState=Wt,function(t_){t_.UNKNOWN="UNKNOWN",t_.PEER_NO_RESPONSE="PEER_NO_RESPONSE",t_.INVITATION_EXPIRE="INVITATION_EXPIRE",t_.PEER_OFFLINE="PEER_OFFLINE",t_.NOT_LOGGEDIN="NOT_LOGGEDIN"}(_i||(_i={})),$.LocalInvitationFailureReason=_i,function(t_){t_.UNKNOWN="UNKNOWN",t_.PEER_OFFLINE="PEER_OFFLINE",t_.ACCEPT_FAILURE="ACCEPT_FAILURE",t_.INVITATION_EXPIRE="INVITATION_EXPIRE"}(_s||(_s={})),$.RemoteInvitationFailureReason=_s,function(t_){t_.ONLINE="ONLINE",t_.UNREACHABLE="UNREACHABLE",t_.OFFLINE="OFFLINE"}(_c||(_c={})),$.PeerOnlineState=_c,(_l||(_l={})).ONLINE_STATUS="ONLINE_STATUS",$.PeerSubscriptionOption=_l,function(t_){t_.TEXT="TEXT",t_.RAW="RAW",t_.IMAGE="IMAGE",t_.FILE="FILE"}(_d||(_d={})),$.MessageType=_d,function(t_){t_.CN="CN",t_.NA="NA",t_.EU="EU",t_.AS="AS",t_.JP="JP",t_.IN="IN",t_.GLOB="GLOB",t_.OC="OC",t_.SA="SA",t_.AF="AF",t_.OVS="OVS"}(_m||(_m={})),$.LegacyAreaCode=_m,function(t_){t_.GLOBAL="GLOBAL",t_.INDIA="INDIA",t_.JAPAN="JAPAN",t_.ASIA="ASIA",t_.EUROPE="EUROPE",t_.CHINA="CHINA",t_.NORTH_AMERICA="NORTH_AMERICA"}(e_||(e_={})),$.AreaCode=e_}(bk||(bk={}));var S=bk;N({target:"Array",proto:!0},{includes:function($){return on(this,$,1<arguments.length?arguments[1]:void 0)}}),Ld("includes");var ck=function($){if(Lj($))throw TypeError("The method doesn't accept regular expressions");return $},ex=qa("match"),dk=function($){var _e=/./;try{"/./"[$](_e)}catch{try{return _e[ex]=!1,"/./"[$](_e)}catch{}}return!1};N({target:"String",proto:!0,forced:!dk("includes")},{includes:function($){return!!~String(jb(this)).indexOf(ck($),1<arguments.length?arguments[1]:void 0)}});var Nc={RECONNECTING_AP_INTERVAL:2500,RECONNECTING_AP_NUM:2,DISABLE_MESSAGE_COMPRESSION:!1,LOG_UPLOAD_INTERVAL:3e3,LOG_HANDLER:void 0};ph("iterator"),ph("asyncIterator");var ek=Ee("forEach")?[].forEach:function($){return Jd(this,$,1<arguments.length?arguments[1]:void 0)},vp;for(vp in Ij){var wp=y[vp],rh=wp&&wp.prototype;if(rh&&rh.forEach!==ek)try{Na(rh,"forEach",ek)}catch{rh.forEach=ek}}var fx=[].reverse,xp=[1,2];N({target:"Array",proto:!0,forced:String(xp)===String(xp.reverse())},{reverse:function(){return gd(this)&&(this.length=this.length),fx.call(this)}});var w=$a(function($){$=function(_e){function _t(I_,x_,Y_){return Object.defineProperty(I_,x_,{value:Y_,enumerable:!0,configurable:!0,writable:!0}),I_[x_]}function Vt(I_,x_,Y_,z_){return x_=Object.create((x_&&x_.prototype instanceof _i?x_:_i).prototype),z_=new i_(z_||[]),x_._invoke=function(B_,Q_,K_){var rE=C_;return function(aE,gE){if(rE===W_)throw Error("Generator is already running");if(rE===A_){if(aE==="throw")throw gE;return h_()}for(K_.method=aE,K_.arg=gE;;){if((aE=K_.delegate)&&(aE=_m(aE,K_))){if(aE===$_)continue;return aE}if(K_.method==="next")K_.sent=K_._sent=K_.arg;else if(K_.method==="throw"){if(rE===C_)throw rE=A_,K_.arg;K_.dispatchException(K_.arg)}else K_.method==="return"&&K_.abrupt("return",K_.arg);if(rE=W_,(aE=Wt(B_,Q_,K_)).type==="normal"){if(rE=K_.done?A_:j_,aE.arg===$_)continue;return{value:aE.arg,done:K_.done}}aE.type==="throw"&&(rE=A_,K_.method="throw",K_.arg=aE.arg)}}}(I_,Y_,z_),x_}function Wt(I_,x_,Y_){try{return{type:"normal",arg:I_.call(x_,Y_)}}catch(z_){return{type:"throw",arg:z_}}}function _i(){}function _s(){}function _c(){}function _l(I_){["next","throw","return"].forEach(function(x_){_t(I_,x_,function(Y_){return this._invoke(x_,Y_)})})}function _d(I_,x_){function Y_(B_,Q_,K_,rE){if((B_=Wt(I_[B_],I_,Q_)).type!=="throw"){var aE=B_.arg;return(B_=aE.value)&&X(B_)==="object"&&d_.call(B_,"__await")?x_.resolve(B_.__await).then(function(gE){Y_("next",gE,K_,rE)},function(gE){Y_("throw",gE,K_,rE)}):x_.resolve(B_).then(function(gE){aE.value=gE,K_(aE)},function(gE){return Y_("throw",gE,K_,rE)})}rE(B_.arg)}var z_;this._invoke=function(B_,Q_){function K_(){return new x_(function(rE,aE){Y_(B_,Q_,rE,aE)})}return z_=z_?z_.then(K_,K_):K_()}}function _m(I_,x_){var Y_=I_.iterator[x_.method];if(Y_===y_){if(x_.delegate=null,x_.method==="throw"){if(I_.iterator.return&&(x_.method="return",x_.arg=y_,_m(I_,x_),x_.method==="throw"))return $_;x_.method="throw",x_.arg=new TypeError("The iterator does not provide a 'throw' method")}return $_}return(Y_=Wt(Y_,I_.iterator,x_.arg)).type==="throw"?(x_.method="throw",x_.arg=Y_.arg,x_.delegate=null,$_):(Y_=Y_.arg)?Y_.done?(x_[I_.resultName]=Y_.value,x_.next=I_.nextLoc,x_.method!=="return"&&(x_.method="next",x_.arg=y_),x_.delegate=null,$_):Y_:(x_.method="throw",x_.arg=new TypeError("iterator result is not an object"),x_.delegate=null,$_)}function e_(I_){var x_={tryLoc:I_[0]};1 in I_&&(x_.catchLoc=I_[1]),2 in I_&&(x_.finallyLoc=I_[2],x_.afterLoc=I_[3]),this.tryEntries.push(x_)}function t_(I_){var x_=I_.completion||{};x_.type="normal",delete x_.arg,I_.completion=x_}function i_(I_){this.tryEntries=[{tryLoc:"root"}],I_.forEach(e_,this),this.reset(!0)}function c_(I_){if(I_){var x_=I_[S_];if(x_)return x_.call(I_);if(typeof I_.next=="function")return I_;if(!isNaN(I_.length)){var Y_=-1;return(x_=function z_(){for(;++Y_<I_.length;)if(d_.call(I_,Y_))return z_.value=I_[Y_],z_.done=!1,z_;return z_.value=y_,z_.done=!0,z_}).next=x_}}return{next:h_}}function h_(){return{value:y_,done:!0}}var y_,l_=Object.prototype,d_=l_.hasOwnProperty,f_=typeof Symbol=="function"?Symbol:{},S_=f_.iterator||"@@iterator",T_=f_.asyncIterator||"@@asyncIterator",R_=f_.toStringTag||"@@toStringTag";try{_t({},"")}catch{_t=function(x_,Y_,z_){return x_[Y_]=z_}}_e.wrap=Vt;var C_="suspendedStart",j_="suspendedYield",W_="executing",A_="completed",$_={};_t(f_={},S_,function(){return this});var q_=Object.getPrototypeOf;(q_=q_&&q_(q_(c_([]))))&&q_!==l_&&d_.call(q_,S_)&&(f_=q_);var G_=_c.prototype=_i.prototype=Object.create(f_);return _s.prototype=_c,_t(G_,"constructor",_c),_t(_c,"constructor",_s),_s.displayName=_t(_c,R_,"GeneratorFunction"),_e.isGeneratorFunction=function(I_){return!!(I_=typeof I_=="function"&&I_.constructor)&&(I_===_s||(I_.displayName||I_.name)==="GeneratorFunction")},_e.mark=function(I_){return Object.setPrototypeOf?Object.setPrototypeOf(I_,_c):(I_.__proto__=_c,_t(I_,R_,"GeneratorFunction")),I_.prototype=Object.create(G_),I_},_e.awrap=function(I_){return{__await:I_}},_l(_d.prototype),_t(_d.prototype,T_,function(){return this}),_e.AsyncIterator=_d,_e.async=function(I_,x_,Y_,z_,B_){B_===void 0&&(B_=Promise);var Q_=new _d(Vt(I_,x_,Y_,z_),B_);return _e.isGeneratorFunction(x_)?Q_:Q_.next().then(function(K_){return K_.done?K_.value:Q_.next()})},_l(G_),_t(G_,R_,"Generator"),_t(G_,S_,function(){return this}),_t(G_,"toString",function(){return"[object Generator]"}),_e.keys=function(I_){var x_,Y_=[];for(x_ in I_)Y_.push(x_);return Y_.reverse(),function z_(){for(;Y_.length;){var B_=Y_.pop();if(B_ in I_)return z_.value=B_,z_.done=!1,z_}return z_.done=!0,z_}},_e.values=c_,i_.prototype={constructor:i_,reset:function(I_){if(this.next=this.prev=0,this.sent=this._sent=y_,this.done=!1,this.delegate=null,this.method="next",this.arg=y_,this.tryEntries.forEach(t_),!I_)for(var x_ in this)x_.charAt(0)==="t"&&d_.call(this,x_)&&!isNaN(+x_.slice(1))&&(this[x_]=y_)},stop:function(){this.done=!0;var I_=this.tryEntries[0].completion;if(I_.type==="throw")throw I_.arg;return this.rval},dispatchException:function(I_){function x_(aE,gE){return Q_.type="throw",Q_.arg=I_,Y_.next=aE,gE&&(Y_.method="next",Y_.arg=y_),!!gE}if(this.done)throw I_;for(var Y_=this,z_=this.tryEntries.length-1;0<=z_;--z_){var B_=this.tryEntries[z_],Q_=B_.completion;if(B_.tryLoc==="root")return x_("end");if(B_.tryLoc<=this.prev){var K_=d_.call(B_,"catchLoc"),rE=d_.call(B_,"finallyLoc");if(K_&&rE){if(this.prev<B_.catchLoc)return x_(B_.catchLoc,!0);if(this.prev<B_.finallyLoc)return x_(B_.finallyLoc)}else if(K_){if(this.prev<B_.catchLoc)return x_(B_.catchLoc,!0)}else{if(!rE)throw Error("try statement without catch or finally");if(this.prev<B_.finallyLoc)return x_(B_.finallyLoc)}}}},abrupt:function(I_,x_){for(var Y_=this.tryEntries.length-1;0<=Y_;--Y_){var z_=this.tryEntries[Y_];if(z_.tryLoc<=this.prev&&d_.call(z_,"finallyLoc")&&this.prev<z_.finallyLoc){var B_=z_;break}}return B_&&(I_==="break"||I_==="continue")&&B_.tryLoc<=x_&&x_<=B_.finallyLoc&&(B_=null),(Y_=B_?B_.completion:{}).type=I_,Y_.arg=x_,B_?(this.method="next",this.next=B_.finallyLoc,$_):this.complete(Y_)},complete:function(I_,x_){if(I_.type==="throw")throw I_.arg;return I_.type==="break"||I_.type==="continue"?this.next=I_.arg:I_.type==="return"?(this.rval=this.arg=I_.arg,this.method="return",this.next="end"):I_.type==="normal"&&x_&&(this.next=x_),$_},finish:function(I_){for(var x_=this.tryEntries.length-1;0<=x_;--x_){var Y_=this.tryEntries[x_];if(Y_.finallyLoc===I_)return this.complete(Y_.completion,Y_.afterLoc),t_(Y_),$_}},catch:function(I_){for(var x_=this.tryEntries.length-1;0<=x_;--x_){var Y_=this.tryEntries[x_];if(Y_.tryLoc===I_){if((I_=Y_.completion).type==="throw"){var z_=I_.arg;t_(Y_)}return z_}}throw Error("illegal catch attempt")},delegateYield:function(I_,x_,Y_){return this.delegate={iterator:c_(I_),resultName:x_,nextLoc:Y_},this.method==="next"&&(this.arg=y_),$_}},_e}($.exports);try{regeneratorRuntime=$}catch{(typeof globalThis>"u"?"undefined":X(globalThis))==="object"?globalThis.regeneratorRuntime=$:Function("r","regeneratorRuntime = r")($)}}),yp=!R(function(){return Object.isExtensible(Object.preventExtensions({}))}),fk=$a(function($){var _e=Ra.f,_t=Ae("meta"),Vt=0,Wt=Object.isExtensible||function(){return!0},_i=function(_c){_e(_c,_t,{value:{objectID:"O"+ ++Vt,weakData:{}}})},_s=$.exports={REQUIRED:!1,fastKey:function(_c,_l){if(!ha(_c))return typeof _c=="symbol"?_c:(typeof _c=="string"?"S":"P")+_c;if(!Q(_c,_t)){if(!Wt(_c))return"F";if(!_l)return"E";_i(_c)}return _c[_t].objectID},getWeakData:function(_c,_l){if(!Q(_c,_t)){if(!Wt(_c))return!0;if(!_l)return!1;_i(_c)}return _c[_t].weakData},onFreeze:function(_c){return yp&&_s.REQUIRED&&Wt(_c)&&!Q(_c,_t)&&_i(_c),_c}};Be[_t]=!0}),zp=function($,_e,_t){var Vt=$.indexOf("Map")!==-1,Wt=$.indexOf("Weak")!==-1,_i=Vt?"set":"add",_s=y[$],_c=_s&&_s.prototype,_l=_s,_d={},_m=function(y_){var l_=_c[y_];Ta(_c,y_,y_=="add"?function(d_){return l_.call(this,d_===0?0:d_),this}:y_=="delete"?function(d_){return!(Wt&&!ha(d_))&&l_.call(this,d_===0?0:d_)}:y_=="get"?function(d_){return Wt&&!ha(d_)?void 0:l_.call(this,d_===0?0:d_)}:y_=="has"?function(d_){return!(Wt&&!ha(d_))&&l_.call(this,d_===0?0:d_)}:function(d_,f_){return l_.call(this,d_===0?0:d_,f_),this})};if(nc($,typeof _s!="function"||!(Wt||_c.forEach&&!R(function(){new _s().entries().next()}))))_l=_t.getConstructor(_e,$,Vt,_i),fk.REQUIRED=!0;else if(nc($,!0)){var e_=new _l,t_=e_[_i](Wt?{}:-0,1)!=e_,i_=R(function(){e_.has(1)}),c_=Tg(function(y_){new _s(y_)}),h_=!Wt&&R(function(){for(var y_=new _s,l_=5;l_--;)y_[_i](l_,l_);return!y_.has(-0)});c_||((_l=_e(function(y_,l_){return Gc(y_,_l,$),y_=lh(new _s,y_,_l),l_!=null&&Xg(l_,y_[_i],{that:y_,AS_ENTRIES:Vt}),y_})).prototype=_c,_c.constructor=_l),(i_||h_)&&(_m("delete"),_m("has"),Vt&&_m("get")),(h_||t_)&&_m(_i),Wt&&_c.clear&&delete _c.clear}return _d[$]=_l,N({global:!0,forced:_l!=_s},_d),Ec(_l,$),Wt||_t.setStrong(_l,$,Vt),_l},gx=Ra.f,Ap=fk.fastKey,Bp=Za.set,gk=Za.getterFor,Cp={getConstructor:function($,_e,_t,Vt){var Wt=$(function(_l,_d){Gc(_l,Wt,_e),Bp(_l,{type:_e,index:ac(null),first:void 0,last:void 0,size:0}),ka||(_l.size=0),_d!=null&&Xg(_d,_l[Vt],{that:_l,AS_ENTRIES:_t})}),_i=gk(_e),_s=function(_l,_d,_m){var e_,t_=_i(_l),i_=_c(_l,_d);return i_?i_.value=_m:(t_.last=i_={index:e_=Ap(_d,!0),key:_d,value:_m,previous:_d=t_.last,next:void 0,removed:!1},t_.first||(t_.first=i_),_d&&(_d.next=i_),ka?t_.size++:_l.size++,e_!=="F"&&(t_.index[e_]=i_)),_l},_c=function(_l,_d){_l=_i(_l);var _m=Ap(_d);if(_m!=="F")return _l.index[_m];for(_l=_l.first;_l;_l=_l.next)if(_l.key==_d)return _l};return Hf(Wt.prototype,{clear:function(){for(var _l=_i(this),_d=_l.index,_m=_l.first;_m;)_m.removed=!0,_m.previous&&(_m.previous=_m.previous.next=void 0),delete _d[_m.index],_m=_m.next;_l.first=_l.last=void 0,ka?_l.size=0:this.size=0},delete:function(_l){var _d=_i(this);if(_l=_c(this,_l)){var _m=_l.next,e_=_l.previous;delete _d.index[_l.index],_l.removed=!0,e_&&(e_.next=_m),_m&&(_m.previous=e_),_d.first==_l&&(_d.first=_m),_d.last==_l&&(_d.last=e_),ka?_d.size--:this.size--}return!!_l},forEach:function(_l){for(var _d,_m=_i(this),e_=Id(_l,1<arguments.length?arguments[1]:void 0,3);_d=_d?_d.next:_m.first;)for(e_(_d.value,_d.key,this);_d&&_d.removed;)_d=_d.previous},has:function(_l){return!!_c(this,_l)}}),Hf(Wt.prototype,_t?{get:function(_l){return(_l=_c(this,_l))&&_l.value},set:function(_l,_d){return _s(this,_l===0?0:_l,_d)}}:{add:function(_l){return _s(this,_l=_l===0?0:_l,_l)}}),ka&&gx(Wt.prototype,"size",{get:function(){return _i(this).size}}),Wt},setStrong:function($,_e,_t){var Vt=_e+" Iterator",Wt=gk(_e),_i=gk(Vt);bj($,_e,function(_s,_c){Bp(this,{type:Vt,target:_s,state:Wt(_s),kind:_c,last:void 0})},function(){for(var _s=_i(this),_c=_s.kind,_l=_s.last;_l&&_l.removed;)_l=_l.previous;return _s.target&&(_s.last=_l=_l?_l.next:_s.state.first)?_c=="keys"?{value:_l.key,done:!1}:_c=="values"?{value:_l.value,done:!1}:{value:[_l.key,_l.value],done:!1}:(_s.target=void 0,{value:void 0,done:!0})},_t?"entries":"values",!_t,!0),If(_e)}};zp("Set",function($){return function(){return $(this,arguments.length?arguments[0]:void 0)}},Cp);var hx=/^[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*/,ix=/[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*$/,hk=function($){return function(_e){return _e=String(jb(_e)),1&$&&(_e=_e.replace(hx,"")),2&$&&(_e=_e.replace(ix,"")),_e}},ik=hk(3),sh=y.parseInt,jx=/^[+-]?0[Xx]/,Dp=sh(`	
\v\f\r \u2028\u2029\uFEFF08`)!==8||sh(`	
\v\f\r \u2028\u2029\uFEFF0x16`)!==22?function($,_e){return $=ik(String($)),sh($,_e>>>0||(jx.test($)?16:10))}:sh;N({global:!0,forced:parseInt!=Dp},{parseInt:Dp});var kx=Hd.f,lx=Fb.f,mx=Ra.f,pd=y.Number,th=pd.prototype,nx=Zb(ac(th))=="Number",Ep=function($){var _e,_t=lc($,!1);if(typeof _t=="string"&&2<_t.length){if(($=(_t=ik(_t)).charCodeAt(0))===43||$===45){if(($=_t.charCodeAt(2))===88||$===120)return NaN}else if($===48){switch(_t.charCodeAt(1)){case 66:case 98:$=2;var Vt=49;break;case 79:case 111:$=8,Vt=55;break;default:return+_t}var Wt=(_t=_t.slice(2)).length;for(_e=0;_e<Wt;_e++){var _i=_t.charCodeAt(_e);if(48>_i||_i>Vt)return NaN}return parseInt(_t,$)}}return+_t};if(nc("Number",!pd(" 0o1")||!pd("0b1")||pd("+0x1"))){for(var Pd=function($){var _e=1>arguments.length?0:$,_t=this;return _t instanceof Pd&&(nx?R(function(){th.valueOf.call(_t)}):Zb(_t)!="Number")?lh(new pd(Ep(_e)),_t,Pd):Ep(_e)},Fp=ka?kx(pd):"MAX_VALUE MIN_VALUE NaN NEGATIVE_INFINITY POSITIVE_INFINITY EPSILON isFinite isInteger isNaN isSafeInteger MAX_SAFE_INTEGER MIN_SAFE_INTEGER parseFloat parseInt isInteger fromString range".split(" "),jk=0,uh;Fp.length>jk;jk++)Q(pd,uh=Fp[jk])&&!Q(Pd,uh)&&mx(Pd,uh,lx(pd,uh));Pd.prototype=th,th.constructor=Pd,Ta(y,"Number",Pd)}var Gp=qa("isConcatSpreadable"),ox=51<=id||!R(function(){var $=[];return $[Gp]=!1,$.concat()[0]!==$}),px=Ef("concat");N({target:"Array",proto:!0,forced:!ox||!px},{concat:function($){var _e,_t=Qa(this),Vt=Sg(_t,0),Wt=0,_i=-1;for(_e=arguments.length;_i<_e;_i++){var _s=_i===-1?_t:arguments[_i],_c=_s;if(ha(_c)){var _l=_c[Gp];_c=_l!==void 0?!!_l:gd(_c)}else _c=!1;if(_c){if(9007199254740991<Wt+(_l=ta(_s.length)))throw TypeError("Maximum allowed index exceeded");for(_c=0;_c<_l;_c++,Wt++)_c in _s&&Ge(Vt,Wt,_s[_c])}else{if(9007199254740991<=Wt)throw TypeError("Maximum allowed index exceeded");Ge(Vt,Wt++,_s)}}return Vt.length=Wt,Vt}});var kk=mc("Reflect","apply"),qx=Function.apply,rx=!R(function(){kk(function(){})});N({target:"Reflect",stat:!0,forced:rx},{apply:function($,_e,_t){return yb($),va(_t),kk?kk($,_e,_t):qx.call($,_e,_t)}}),N({target:"Reflect",stat:!0},{ownKeys:qn});var sx=Oj,tx=R(function(){return!Object.getOwnPropertyNames(1)});N({target:"Object",stat:!0,forced:tx},{getOwnPropertyNames:sx});var Pe=(typeof Reflect>"u"?"undefined":X(Reflect))==="object"?Reflect:null,Hp=Pe&&typeof Pe.apply=="function"?Pe.apply:function($,_e,_t){return Function.prototype.apply.call($,_e,_t)},ux=Pe&&typeof Pe.ownKeys=="function"?Pe.ownKeys:Object.getOwnPropertySymbols?function($){return Object.getOwnPropertyNames($).concat(Object.getOwnPropertySymbols($))}:function($){return Object.getOwnPropertyNames($)},Ip=Number.isNaN||function($){return $!=$};ea.EventEmitter=ea,ea.prototype._events=void 0,ea.prototype._eventsCount=0,ea.prototype._maxListeners=void 0;var Jp=10;Object.defineProperty(ea,"defaultMaxListeners",{enumerable:!0,get:function(){return Jp},set:function($){if(typeof $!="number"||0>$||Ip($))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+$+".");Jp=$}}),ea.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ea.prototype.setMaxListeners=function($){if(typeof $!="number"||0>$||Ip($))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+$+".");return this._maxListeners=$,this},ea.prototype.getMaxListeners=function(){return this._maxListeners===void 0?ea.defaultMaxListeners:this._maxListeners},ea.prototype.emit=function($){for(var _e=[],_t=1;_t<arguments.length;_t++)_e.push(arguments[_t]);_t=$==="error";var Vt=this._events;if(Vt!==void 0)_t=_t&&Vt.error===void 0;else if(!_t)return!1;if(_t){var Wt;throw 0<_e.length&&(Wt=_e[0]),Wt instanceof Error?Wt:((_e=Error("Unhandled error."+(Wt?" ("+Wt.message+")":""))).context=Wt,_e)}if((_t=Vt[$])===void 0)return!1;if(typeof _t=="function")Hp(_t,this,_e);else for(Vt=Cl(_t,Wt=_t.length),_t=0;_t<Wt;++_t)Hp(Vt[_t],this,_e);return!0},ea.prototype.addListener=function($,_e){return zl(this,$,_e,!1)},ea.prototype.on=ea.prototype.addListener,ea.prototype.prependListener=function($,_e){return zl(this,$,_e,!0)},ea.prototype.once=function($,_e){return ng(_e),this.on($,Al(this,$,_e)),this},ea.prototype.prependOnceListener=function($,_e){return ng(_e),this.prependListener($,Al(this,$,_e)),this},ea.prototype.removeListener=function($,_e){var _t;ng(_e);var Vt=this._events;if(Vt===void 0)return this;var Wt=Vt[$];if(Wt===void 0)return this;if(Wt===_e||Wt.listener===_e)--this._eventsCount==0?this._events=Object.create(null):(delete Vt[$],Vt.removeListener&&this.emit("removeListener",$,Wt.listener||_e));else if(typeof Wt!="function"){var _i=-1;for(_t=Wt.length-1;0<=_t;_t--)if(Wt[_t]===_e||Wt[_t].listener===_e){var _s=Wt[_t].listener;_i=_t;break}if(0>_i)return this;if(_i===0)Wt.shift();else{for(;_i+1<Wt.length;_i++)Wt[_i]=Wt[_i+1];Wt.pop()}Wt.length===1&&(Vt[$]=Wt[0]),Vt.removeListener!==void 0&&this.emit("removeListener",$,_s||_e)}return this},ea.prototype.off=ea.prototype.removeListener,ea.prototype.removeAllListeners=function($){var _e=this._events;if(_e===void 0)return this;if(_e.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):_e[$]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete _e[$]),this;if(arguments.length===0){var _t=Object.keys(_e);for(_e=0;_e<_t.length;++_e){var Vt=_t[_e];Vt!=="removeListener"&&this.removeAllListeners(Vt)}return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(_t=_e[$])=="function")this.removeListener($,_t);else if(_t!==void 0)for(_e=_t.length-1;0<=_e;_e--)this.removeListener($,_t[_e]);return this},ea.prototype.listeners=function($){return Bl(this,$,!0)},ea.prototype.rawListeners=function($){return Bl(this,$,!1)},ea.listenerCount=function($,_e){return typeof $.listenerCount=="function"?$.listenerCount(_e):Dl.call($,_e)},ea.prototype.listenerCount=Dl,ea.prototype.eventNames=function(){return 0<this._eventsCount?ux(this._events):[]},ea.once=function($,_e){return new Promise(function(_t,Vt){function Wt(_s){$.removeListener(_e,_i),Vt(_s)}function _i(){typeof $.removeListener=="function"&&$.removeListener("error",Wt),_t([].slice.call(arguments))}El($,_e,_i,{once:!0}),_e!=="error"&&vs($,Wt,{once:!0})})};var Qe=Object.assign,Kp=Object.defineProperty,Lp=!Qe||R(function(){if(ka&&Qe({b:1},Qe(Kp({},"a",{enumerable:!0,get:function(){Kp(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var $={},_e={},_t=Symbol();return $[_t]=7,"abcdefghijklmnopqrst".split("").forEach(function(Vt){_e[Vt]=Vt}),Qe({},$)[_t]!=7||Dc(Qe({},_e)).join("")!="abcdefghijklmnopqrst"})?function($,_e){for(var _t=Qa($),Vt=arguments.length,Wt=1,_i=Bf.f,_s=zf;Vt>Wt;)for(var _c,_l=Af(arguments[Wt++]),_d=_i?Dc(_l).concat(_i(_l)):Dc(_l),_m=_d.length,e_=0;_m>e_;)_c=_d[e_++],(!ka||_s.call(_l,_c))&&(_t[_c]=_l[_c]);return _t}:Qe;N({target:"Object",stat:!0,forced:Object.assign!==Lp},{assign:Lp}),zp("Map",function($){return function(){return $(this,arguments.length?arguments[0]:void 0)}},Cp);var vx=Math.log,wx=Math.LN2;N({target:"Math",stat:!0},{log2:function($){return vx($)/wx}});var xx=Ra.f,yx=Hd.f,zx=Za.enforce,Ax=qa("match"),sc=y.RegExp,lk=sc.prototype,Wf=/a/g,mk=/a/g,nk=new sc(Wf)!==Wf;if(ka&&nc("RegExp",!nk||pc||R(function(){return mk[Ax]=!1,sc(Wf)!=Wf||sc(mk)==mk||sc(Wf,"i")!="/a/i"}))){for(var Oc=function($,_e){var _t,Vt=this instanceof Oc,Wt=Lj($),_i=_e===void 0;return!Vt&&Wt&&$.constructor===Oc&&_i||(nk?Wt&&!_i&&($=$.source):$ instanceof Oc&&(_i&&(_e=tj.call($)),$=$.source),pc&&(_t=!!_e&&-1<_e.indexOf("y"))&&(_e=_e.replace(/y/g,"")),$=lh(nk?new sc($,_e):sc($,_e),Vt?this:lk,Oc),pc&&_t&&(zx($).sticky=!0)),$},Bx=function($){$ in Oc||xx(Oc,$,{configurable:!0,get:function(){return sc[$]},set:function(_e){sc[$]=_e}})},Mp=yx(sc),Np=0;Mp.length>Np;)Bx(Mp[Np++]);lk.constructor=Oc,Oc.prototype=lk,Ta(y,"RegExp",Oc)}If("RegExp"),Sf("Float32",function($){return function(_e,_t,Vt){return $(this,_e,_t,Vt)}}),Sf("Float64",function($){return function(_e,_t,Vt){return $(this,_e,_t,Vt)}}),Sf("Uint32",function($){return function(_e,_t,Vt){return $(this,_e,_t,Vt)}}),Sf("Uint16",function($){return function(_e,_t,Vt){return $(this,_e,_t,Vt)}});var ok=function($,_e){return $===_e?0:$==null?_e==null?0:-1:_e==null?$==null?0:1:typeof $.compare=="function"?$.compare(_e):typeof _e.compare=="function"?-_e.compare($):$<_e?-1:$>_e?1:0},pk=[],Op=pk.sort,Cx=R(function(){pk.sort(void 0)}),Dx=R(function(){pk.sort(null)}),Ex=Ee("sort");N({target:"Array",proto:!0,forced:Cx||!Dx||!Ex},{sort:function($){return $===void 0?Op.call(Qa(this)):Op.call(Qa(this),yb($))}});var Pp=Object.getPrototypeOf({}),Xf=function($,_e){var _t;return $===_e||($==null?$==_e:X($.equiv)==="function"?$.equiv(_e):_e==null?$==_e:X(_e.equiv)==="function"?_e.equiv($):X($)!=="string"&&X(_e)!=="string"&&((_t=Object.getPrototypeOf($))!=null&&_t!==Pp||(_t=Object.getPrototypeOf(_e))!=null&&_t!==Pp?X($)!=="function"&&$.length!==void 0&&X(_e)!=="function"&&_e.length!==void 0?Gx($,_e):$ instanceof Set&&_e instanceof Set?Hx($,_e):$ instanceof Map&&_e instanceof Map?Ix($,_e):$ instanceof Date&&_e instanceof Date?$.getTime()===_e.getTime():$ instanceof RegExp&&_e instanceof RegExp?$.toString()===_e.toString():$!=$&&_e!=_e:Fx($,_e)))},Gx=function($,_e){var _t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:Xf,Vt=$.length;if(Vt===_e.length)for(;0<=--Vt&&_t($[Vt],_e[Vt]););return 0>Vt},Hx=function($,_e){var _t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:Xf;return $.size===_e.size&&_t(G($.keys()).sort(),G(_e.keys()).sort())},Ix=function($,_e){var _t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:Xf;return $.size===_e.size&&_t(G($).sort(),G(_e).sort())},Fx=function($,_e){var _t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:Xf;if(Object.keys($).length!==Object.keys(_e).length)return!1;for(var Vt in $)if(!_e.hasOwnProperty(Vt)||!_t($[Vt],_e[Vt]))return!1;return!0},Qp=function($){var _e=1<arguments.length&&arguments[1]!==void 0?arguments[1]:function(_t){return _t!==void 0?": "+_t:""};return function(_t){function Vt(_i){return W(this,Vt),Wt.call(this,$(_i)+_e(_i))}la(Vt,_t);var Wt=ma(Vt);return Vt}(ef(Error))},Jx=Qp(function(){return"illegal argument(s)"}),vh=function($){throw new Jx($)},qk=Qp(function(){return"index out of bounds"}),Rp=1/4294967295,Kx=function(){function $(){W(this,$)}return Ha($,[{key:"float",value:function(){var _e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1;return this.int()*Rp*_e}},{key:"norm",value:function(){var _e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1;return 2*(this.int()*Rp-.5)*_e}},{key:"minmax",value:function(_e,_t){return this.float()*(_t-_e)+_e}}]),$}(),rk=Math.random,Lx=new(function($){function _e(){return W(this,_e),_t.apply(this,arguments)}la(_e,$);var _t=ma(_e);return Ha(_e,[{key:"int",value:function(){return 4294967296*rk()>>>0}},{key:"float",value:function(){var Vt=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1;return rk()*Vt}},{key:"norm",value:function(){var Vt=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1;return 2*(rk()-.5)*Vt}}]),_e}(Kx)),Vh=Symbol(),Hl=function(){},Mx=fk.onFreeze,sk=Object.freeze,Nx=R(function(){sk(1)});N({target:"Object",stat:!0,forced:Nx,sham:!yp},{freeze:function($){return sk&&ha($)?sk(Mx($)):$}});var Ox=Ee("reduce"),Px=!Hc&&79<id&&83>id;N({target:"Array",proto:!0,forced:!Ox||Px},{reduce:function($){return Wo(this,$,arguments.length,1<arguments.length?arguments[1]:void 0)}});var Gl=function($){return $!=null&&typeof $.xform=="function"?$.xform():$},og=function(){function $(_e){W(this,$),this.value=_e}return Ha($,[{key:"deref",value:function(){return this.value}}]),$}(),Wh=function($){return $ instanceof og?$.deref():$},xs=function($,_e){return[$,function(_t){return _t},_e]},Qx=w.mark(function($,_e){var _t,Vt,Wt,_i,_s,_c;return w.wrap(function(_l){for(;;)switch(_l.prev=_l.next){case 0:_t=Gl($)(ws()),Vt=_t[1],Wt=_t[2],_i=0;case 4:if(!(_i<_e.length)){_l.next=15;break}if(_s=_e[_i],!((_c=Wt([],_s))instanceof og)){_l.next=10;break}return _l.delegateYield(Wh(Vt(_c.deref())),"t0",9);case 9:return _l.abrupt("return");case 10:if(!_c.length){_l.next=12;break}return _l.delegateYield(_c,"t1",12);case 12:_i++,_l.next=4;break;case 15:return _l.delegateYield(Wh(Vt([])),"t2",16);case 16:case"end":return _l.stop()}},Qx)}),ys=w.mark(Fl),zs=function($,_e){return[$[0],$[1],_e]},Sp=!0;"findIndex"in[]&&Array(1).findIndex(function(){Sp=!1}),N({target:"Array",proto:!0,forced:Sp},{findIndex:function($){return An(this,$,1<arguments.length?arguments[1]:void 0)}}),Ld("findIndex"),N({target:"Array",proto:!0},{fill:yj}),Ld("fill");var Rx=function(){function $(_e){W(this,$),this._length=0,_e&&this.into(_e)}return Ha($,[{key:"length",get:function(){return this._length}},{key:"copy",value:function(){return new $(this)}},{key:"empty",value:function(){return new $}},{key:"clear",value:function(){this.release()}},{key:"release",value:function(){for(var _e,_t=this.head;_t;)_e=_t.next,delete _t.value,delete _t.prev,delete _t.next,_t=_e;return delete this.head,delete this.tail,this._length=0,!0}},{key:"compare",value:function(_e){var _t=this._length;if(_t<_e._length)return-1;if(_t>_e._length)return 1;if(_t===0)return 0;_t=this.head,_e=_e.head;for(var Vt=0;_t&&Vt==0;)Vt=ok(_t.value,_e.value),_t=_t.next,_e=_e.next;return Vt}},{key:"equiv",value:function(_e){if(!(_e instanceof $||_e!=null&&typeof _e!="function"&&_e.length!==void 0)||this._length!==_e.length)return!1;if(!this._length||this===_e)return!0;for(var _t=this.head,Vt=0;Vt<_e.length;Vt++){if(!Xf(_t.value,_e[Vt]))return!1;_t=_t.next}return!0}},{key:Symbol.iterator,value:w.mark(function _e(){var _t;return w.wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:_t=this.head;case 1:if(!_t){Vt.next=7;break}return Vt.next=4,_t.value;case 4:_t=_t.next,Vt.next=1;break;case 7:case"end":return Vt.stop()}},_e,this)})},{key:"seq",value:function(){var _e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0,_t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:this.length;if(!(_e>=_t||0>_e)){_e=this.nthCell(_e);var Vt=this.nthCell(_t-1);return _t=function Wt(_i){return{first:function(){return _i.value},next:function(){return _i!==Vt&&_i.next?Wt(_i.next):void 0}}},_e?_t(_e):void 0}}},{key:"cycle",value:w.mark(function _e(){return w.wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:return _t.delegateYield(this,"t0",2);case 2:_t.next=0;break;case 4:case"end":return _t.stop()}},_e,this)})},{key:"$reduce",value:function(_e,_t){for(var Vt=this.head;Vt&&!(_t instanceof og);)_t=_e(_t,Vt.value),Vt=Vt.next;return _t}},{key:"drop",value:function(){var _e=this.head;if(_e)return(this.head=_e.next)?delete this.head.prev:delete this.tail,this._length--,_e.value}},{key:"cons",value:function(_e){return _e={value:_e,next:this.head},this.head?this.head.prev=_e:this.tail=_e,this.head=_e,this._length++,this}},{key:"insertBefore",value:function(_e,_t){return _e||vh("cell is undefined"),_t={value:_t,next:_e,prev:_e.prev},_e.prev?_e.prev.next=_t:this.head=_t,_e.prev=_t,this._length++,this}},{key:"insertAfter",value:function(_e,_t){return _e||vh("cell is undefined"),_t={value:_t,next:_e.next,prev:_e},_e.next?_e.next.prev=_t:this.tail=_t,_e.next=_t,this._length++,this}},{key:"insertBeforeNth",value:function(_e,_t){if(0>_e&&(_e+=this._length),0>=_e)return this.cons(_t);if(0>_e||_e>=this._length)throw new qk(_e);return this.insertBefore(this.nthCellUnsafe(_e),_t)}},{key:"insertAfterNth",value:function(_e,_t){if(0>_e&&(_e+=this._length),_e>=this._length-1)return this.push(_t);if(0>_e||_e>=this._length)throw new qk(_e);return this.insertAfter(this.nthCellUnsafe(_e),_t)}},{key:"insertSorted",value:function(_e,_t){_t=_t||ok;for(var Vt=this.head;Vt;){if(0>=_t(_e,Vt.value))return this.insertBefore(Vt,_e);Vt=Vt.next}return this.push(_e)}},{key:"find",value:function(_e){for(var _t=this.head;_t;){if(_t.value===_e)return _t;_t=_t.next}}},{key:"findWith",value:function(_e){for(var _t=this.head;_t;){if(_e(_t.value))return _t;_t=_t.next}}},{key:"concat",value:function(){for(var _e=this.copy(),_t=arguments.length,Vt=Array(_t),Wt=0;Wt<_t;Wt++)Vt[Wt]=arguments[Wt];for(_t=0;_t<Vt.length;_t++)_e.into(Vt[_t]);return _e}},{key:"into",value:function(_e){for(var _t=0;_t<_e.length;_t++)this.push(_e[_t])}},{key:"slice",value:function(){var _e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0,_t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:this.length;_e=0>_e?_e+this._length:_e,_t=0>_t?_t+this._length:_t,(0>_e||0>_t)&&vh("invalid indices: ${from} / ${to}");for(var Vt=new $,Wt=this.nthCell(_e);Wt&&++_e<=_t;)Vt.push(Wt.value),Wt=Wt.next;return Vt}},{key:"splice",value:function(_e){var _t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,Vt=2<arguments.length?arguments[2]:void 0;if(typeof _e=="number"){if(0>_e&&(_e+=this._length),0>_e||_e>=this._length)throw new qk(_e);var Wt=this.nthCellUnsafe(_e)}else Wt=_e;var _i=new $;if(0<_t)for(;Wt&&0<_t--;)this.remove(Wt),_i.push(Wt.value),Wt=Wt.next;else Wt&&(Wt=Wt.next);if(Vt)if(Wt)for(_t=0;_t<Vt.length;_t++)this.insertBefore(Wt,Vt[_t]);else for(Wt=0;Wt<Vt.length;Wt++)this.push(Vt[Wt]);return _i}},{key:"remove",value:function(_e){return _e.prev?_e.prev.next=_e.next:this.head=_e.next,_e.next?_e.next.prev=_e.prev:this.tail=_e.prev,this._length--,this}},{key:"swap",value:function(_e,_t){if(_e!==_t){var Vt=_e.value;_e.value=_t.value,_t.value=Vt}return this}},{key:"push",value:function(_e){return this.tail?(_e={value:_e,prev:this.tail},this.tail=this.tail.next=_e,this._length++,this):this.cons(_e)}},{key:"pop",value:function(){var _e=this.tail;if(_e)return(this.tail=_e.prev)?delete this.tail.next:delete this.head,this._length--,_e.value}},{key:"first",value:function(){return this.head&&this.head.value}},{key:"peek",value:function(){return this.tail&&this.tail.value}},{key:"setHead",value:function(_e){return this.head?(this.head.value=_e,this):this.cons(_e)}},{key:"setTail",value:function(_e){return this.tail?(this.tail.value=_e,this):this.push(_e)}},{key:"setNth",value:function(_e,_t){var Vt=this.nthCell(_e);return!Vt&&vh("index out of bounds: ".concat(_e)),Vt.value=_t,this}},{key:"nth",value:function(_e,_t){return(_e=this.nthCell(_e))?_e.value:_t}},{key:"nthCell",value:function(_e){if(0>_e&&(_e+=this._length),!(0>_e||_e>=this._length))return this.nthCellUnsafe(_e)}},{key:"rotateLeft",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:return this.push(this.drop())}}},{key:"rotateRight",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:var _e=this.peek();return this.pop(),this.cons(_e)}}},{key:"map",value:function(_e){for(var _t=new $,Vt=this.head;Vt;)_t.push(_e(Vt.value)),Vt=Vt.next;return _t}},{key:"filter",value:function(_e){for(var _t=new $,Vt=this.head;Vt;)_e(Vt.value)&&_t.push(Vt.value),Vt=Vt.next;return _t}},{key:"reduce",value:function(_e,_t){for(var Vt=this.head;Vt;)_t=_e(_t,Vt.value),Vt=Vt.next;return _t}},{key:"shuffle",value:function(_e){var _t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:Lx;if(2>this._length)return this;for(_e=_e??Math.ceil(1.5*Math.log2(this._length));0<_e;_e--)for(var Vt=this.head;Vt;){var Wt=Vt.next;.5>_t.float()?this.asHead(Vt):this.asTail(Vt),Vt=Wt}return this}},{key:"sort",value:function(){var _e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:ok;if(!this._length)return this;for(var _t=1;;){var Vt=this.head;this.tail=this.head=void 0;for(var Wt=0;Vt;){Wt++;for(var _i=Vt,_s=0,_c=0;_c<_t&&(_s++,_i=_i.next);_c++);for(_c=_t;0<_s||0<_c&&_i;){if(_s===0){var _l=_i;_i=_i.next,_c--}else _i&&_c!==0?0>=_e(Vt.value,_i.value)?(_l=Vt,Vt=Vt.next,_s--):(_l=_i,_i=_i.next,_c--):(_l=Vt,Vt=Vt.next,_s--);this.tail?this.tail.next=_l:this.head=_l,_l.prev=this.tail,this.tail=_l}Vt=_i}if(this.tail.next=void 0,1>=Wt)return this;_t*=2}}},{key:"reverse",value:function(){for(var _e=this.head,_t=this.tail,Vt=(this._length>>>1)+(1&this._length);_e&&_t&&0<Vt;){var Wt=_e.value;_e.value=_t.value,_t.value=Wt,_e=_e.next,_t=_t.prev,Vt--}return this}},{key:"asHead",value:function(_e){return _e===this.head||(this.remove(_e),this.head.prev=_e,_e.next=this.head,_e.prev=void 0,this.head=_e,this._length++),this}},{key:"asTail",value:function(_e){return _e===this.tail||(this.remove(_e),this.tail.next=_e,_e.prev=this.tail,_e.next=void 0,this.tail=_e,this._length++),this}},{key:"toString",value:function(){for(var _e=[],_t=this.head;_t;)_e.push(String(_t.value)),_t=_t.next;return _e.join(", ")}},{key:"toJSON",value:function(){return G(this)}},{key:"nthCellUnsafe",value:function(_e){if(_e<=this._length>>1)var _t=this.head,Vt="next";else _t=this.tail,Vt="prev",_e=this._length-_e-1;for(;0<_e--&&_t;)_t=_t[Vt];return _t}}]),$}(),tc=function(){function $(_e,_t){W(this,$),_t=Object.assign({maxlen:1/0,maxsize:1/0,map:function(){return new Map},ksize:function(){return 0},vsize:function(){return 0}},_t),this.map=_t.map(),this.items=new Rx,this._size=0,this.opts=_t,_e&&this.into(_e)}return Ha($,[{key:"length",get:function(){return this.items.length}},{key:"size",get:function(){return this._size}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"entries",value:function(){return pg(function(_e){return[_e.k,_e]},this.items)}},{key:"keys",value:function(){return pg(function(_e){return _e.k},this.items)}},{key:"values",value:function(){return pg(function(_e){return _e.v},this.items)}},{key:"copy",value:function(){var _e=this.empty();_e.items=this.items.copy();for(var _t=_e.items.head;_t;)_e.map.set(_t.value.k,_t),_t=_t.next;return _e}},{key:"empty",value:function(){return new $(null,this.opts)}},{key:"release",value:function(){this._size=0,this.map.clear();var _e=this.opts.release;if(_e){for(var _t;_t=this.items.drop();)_e(_t.k,_t.v);return!0}return this.items.release()}},{key:"has",value:function(_e){return this.map.has(_e)}},{key:"get",value:function(_e,_t){return(_e=this.map.get(_e))?this.resetEntry(_e):_t}},{key:"set",value:function(_e,_t){var Vt=this.opts.ksize(_e)+this.opts.vsize(_t),Wt=this.map.get(_e);return this._size+=Math.max(0,Vt-(Wt?Wt.value.s:0)),this.ensureSize()&&this.doSetEntry(Wt,_e,_t,Vt),_t}},{key:"into",value:function(_e){for(var _t=0;_t<_e.length;_t++){var Vt=_e[_t];this.set(Vt[0],Vt[1])}return this}},{key:"getSet",value:function(_e,_t){var Vt=this,Wt=this.map.get(_e);return Wt?Promise.resolve(this.resetEntry(Wt)):_t().then(function(_i){return Vt.set(_e,_i)})}},{key:"delete",value:function(_e){return!!(_e=this.map.get(_e))&&(this.removeEntry(_e),!0)}},{key:"resetEntry",value:function(_e){return this.items.asTail(_e),_e.value.v}},{key:"ensureSize",value:function(){for(var _e=this.opts.release,_t=this.opts.maxsize,Vt=this.opts.maxlen;this._size>_t||this.length>=Vt;){var Wt=this.items.drop();if(!Wt)return!1;this.map.delete(Wt.k),_e&&_e(Wt.k,Wt.v),this._size-=Wt.s}return!0}},{key:"removeEntry",value:function(_e){var _t=_e.value;this.map.delete(_t.k),this.items.remove(_e),this.opts.release&&this.opts.release(_t.k,_t.v),this._size-=_t.s}},{key:"doSetEntry",value:function(_e,_t,Vt,Wt){_e?(_e.value.v=Vt,_e.value.s=Wt,this.items.asTail(_e)):(this.items.push({k:_t,v:Vt,s:Wt}),this.map.set(_t,this.items.tail))}}]),$}(),Sx=function($){function _e(Vt,Wt){return W(this,_e),Wt=Object.assign({ttl:36e5},Wt),_t.call(this,Vt,Wt)}la(_e,$);var _t=ma(_e);return Ha(_e,[{key:"empty",value:function(){return new _e(null,this.opts)}},{key:"has",value:function(Vt){return this.get(Vt)!==void 0}},{key:"get",value:function(Vt,Wt){if(Vt=this.map.get(Vt)){if(Vt.value.t>=Date.now())return this.resetEntry(Vt);this.removeEntry(Vt)}return Wt}},{key:"set",value:function(Vt,Wt){var _i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:this.opts.ttl,_s=this.opts.ksize(Vt)+this.opts.vsize(Wt),_c=this.map.get(Vt);return this._size+=Math.max(0,_s-(_c?_c.value.s:0)),this.ensureSize()&&(_i=Date.now()+_i,_c?(_c.value.v=Wt,_c.value.s=_s,_c.value.t=_i,this.items.asTail(_c)):(this.items.push({k:Vt,v:Wt,s:_s,t:_i}),this.map.set(Vt,this.items.tail))),Wt}},{key:"getSet",value:function(Vt,Wt){var _i=this,_s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:this.opts.ttl,_c=this.get(Vt);return _c?Promise.resolve(_c):Wt().then(function(_l){return _i.set(Vt,_l,_s)})}},{key:"prune",value:function(){for(var Vt=Date.now(),Wt=this.items.head;Wt;)Wt.value.t<Vt&&this.removeEntry(Wt),Wt=Wt.next}},{key:"ensureSize",value:function(){for(var Vt=this.opts.maxsize,Wt=this.opts.maxlen,_i=Date.now(),_s=this.items.head;_s&&(this._size>Vt||this.length>=Wt);)_s.value.t<_i&&this.removeEntry(_s),_s=_s.next;return Th(wd(_e.prototype),"ensureSize",this).call(this)}}]),_e}(tc),Tp=X(Ya)=="object"&&Ya&&Ya.Object===Object&&Ya,Tx=(typeof self>"u"?"undefined":X(self))=="object"&&self&&self.Object===Object&&self,Cb=Tp||Tx||Function("return this")(),Pb=Cb.Symbol,Up=Object.prototype,Ux=Up.hasOwnProperty,Vx=Up.toString,Yf=Pb?Pb.toStringTag:void 0,Wx=Object.prototype.toString,Vp=Pb?Pb.toStringTag:void 0,Qd=function($){if($==null)$=$===void 0?"[object Undefined]":"[object Null]";else if(Vp&&Vp in Object($)){var _e=Ux.call($,Yf),_t=$[Yf];try{$[Yf]=void 0;var Vt=!0}catch{}var Wt=Vx.call($);Vt&&(_e?$[Yf]=_t:delete $[Yf]),$=Wt}else $=Wx.call($);return $},lb=function($){var _e=X($);return $!=null&&(_e=="object"||_e=="function")},qi=function($){return!!lb($)&&(($=Qd($))=="[object Function]"||$=="[object GeneratorFunction]"||$=="[object AsyncFunction]"||$=="[object Proxy]")},tk=Cb["__core-js_shared__"],Wp=function(){var $=/[^.]+$/.exec(tk&&tk.keys&&tk.keys.IE_PROTO||"");return $?"Symbol(src)_1."+$:""}(),Xx=Function.prototype.toString,Rd=function($){if($!=null){try{return Xx.call($)}catch{}return $+""}return""},Yx=/^\[object .+?Constructor\]$/,Zx=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Sd=function($,_e){return $=$==null?void 0:$[_e],!lb($)||Wp&&Wp in $||!(qi($)?Zx:Yx).test(Rd($))?void 0:$},Zf=Sd(Object,"create"),$x=Object.prototype.hasOwnProperty,ay=Object.prototype.hasOwnProperty;zd.prototype.clear=function(){this.__data__=Zf?Zf(null):{},this.size=0},zd.prototype.delete=function($){return $=this.has($)&&delete this.__data__[$],this.size-=$?1:0,$},zd.prototype.get=function($){var _e=this.__data__;return Zf?($=_e[$])==="__lodash_hash_undefined__"?void 0:$:$x.call(_e,$)?_e[$]:void 0},zd.prototype.has=function($){var _e=this.__data__;return Zf?_e[$]!==void 0:ay.call(_e,$)},zd.prototype.set=function($,_e){var _t=this.__data__;return this.size+=this.has($)?0:1,_t[$]=Zf&&_e===void 0?"__lodash_hash_undefined__":_e,this};var $f=function($,_e){return $===_e||$!=$&&_e!=_e},wh=function($,_e){for(var _t=$.length;_t--;)if($f($[_t][0],_e))return _t;return-1},by=Array.prototype.splice;ce.prototype.clear=function(){this.__data__=[],this.size=0},ce.prototype.delete=function($){var _e=this.__data__;return!(0>($=wh(_e,$)))&&($==_e.length-1?_e.pop():by.call(_e,$,1),--this.size,!0)},ce.prototype.get=function($){var _e=this.__data__;return 0>($=wh(_e,$))?void 0:_e[$][1]},ce.prototype.has=function($){return-1<wh(this.__data__,$)},ce.prototype.set=function($,_e){var _t=this.__data__,Vt=wh(_t,$);return 0>Vt?(++this.size,_t.push([$,_e])):_t[Vt][1]=_e,this};var rg=ce,ag=Sd(Cb,"Map"),xh=function($,_e){$=$.__data__;var _t=X(_e);return(_t=="string"||_t=="number"||_t=="symbol"||_t=="boolean"?_e!=="__proto__":_e===null)?$[typeof _e=="string"?"string":"hash"]:$.map};de.prototype.clear=function(){this.size=0,this.__data__={hash:new zd,map:new(ag||rg),string:new zd}},de.prototype.delete=function($){return $=xh(this,$).delete($),this.size-=$?1:0,$},de.prototype.get=function($){return xh(this,$).get($)},de.prototype.has=function($){return xh(this,$).has($)},de.prototype.set=function($,_e){var _t=xh(this,$),Vt=_t.size;return _t.set($,_e),this.size+=_t.size==Vt?0:1,this};var qg=de;gf.prototype.add=gf.prototype.push=function($){return this.__data__.set($,"__lodash_hash_undefined__"),this},gf.prototype.has=function($){return this.__data__.has($)};var Xp=function($,_e,_t,Vt){var Wt=$.length;for(_t+=Vt?1:-1;Vt?_t--:++_t<Wt;)if(_e($[_t],_t,$))return _t;return-1},cy=function($){return $!=$},dy=function($,_e){var _t;if(_t=!($==null||!$.length)){if(_e==_e)e:{_t=-1;for(var Vt=$.length;++_t<Vt;)if($[_t]===_e){$=_t;break e}$=-1}else $=Xp($,cy,0);_t=-1<$}return _t},ey=function($,_e,_t){for(var Vt=-1,Wt=$==null?0:$.length;++Vt<Wt;)if(_t(_e,$[Vt]))return!0;return!1},fy=function($,_e){return $.has(_e)},Re=Sd(Cb,"Set"),gy=function(){},uk=function($){var _e=-1,_t=Array($.size);return $.forEach(function(Vt){_t[++_e]=Vt}),_t},hy=1/0,iy=Re&&1/uk(new Re([,-0]))[1]==hy?function($){return new Re($)}:gy,vk=function($,_e,_t){var Vt=-1,Wt=dy,_i=$.length,_s=!0,_c=[],_l=_c;if(_t)_s=!1,Wt=ey;else if(200<=_i){if(Wt=_e?null:iy($))return uk(Wt);_s=!1,Wt=fy,_l=new gf}else _l=_e?[]:_c;e:for(;++Vt<_i;){var _d=$[Vt],_m=_e?_e(_d):_d;if(_d=_t||_d!==0?_d:0,_s&&_m==_m){for(var e_=_l.length;e_--;)if(_l[e_]===_m)continue e;_e&&_l.push(_m),_c.push(_d)}else Wt(_l,_m,_t)||(_l!==_c&&_l.push(_m),_c.push(_d))}return _c},Yp=function($){for(var _e=-1,_t=$==null?0:$.length,Vt={};++_e<_t;){var Wt=$[_e];Vt[Wt[0]]=Wt[1]}return Vt},he=function($,_e){for(var _t=-1,Vt=$==null?0:$.length,Wt=Array(Vt);++_t<Vt;)Wt[_t]=_e($[_t],_t,$);return Wt};ee.prototype.clear=function(){this.__data__=new rg,this.size=0},ee.prototype.delete=function($){var _e=this.__data__;return $=_e.delete($),this.size=_e.size,$},ee.prototype.get=function($){return this.__data__.get($)},ee.prototype.has=function($){return this.__data__.has($)},ee.prototype.set=function($,_e){var _t=this.__data__;if(_t instanceof rg){var Vt=_t.__data__;if(!ag||199>Vt.length)return Vt.push([$,_e]),this.size=++_t.size,this;_t=this.__data__=new qg(Vt)}return _t.set($,_e),this.size=_t.size,this};var ge=ee,Is=function($,_e){for(var _t=-1,Vt=$==null?0:$.length;++_t<Vt&&_e($[_t],_t,$)!==!1;);return $},yh=function(){try{var $=Sd(Object,"defineProperty");return $({},"",{}),$}catch{}}(),bg=function($,_e,_t){_e=="__proto__"&&yh?yh($,_e,{configurable:!0,enumerable:!0,value:_t,writable:!0}):$[_e]=_t},jy=Object.prototype.hasOwnProperty,Ml=function($,_e,_t){var Vt=$[_e];jy.call($,_e)&&$f(Vt,_t)&&(_t!==void 0||_e in $)||bg($,_e,_t)},re=function($,_e,_t,Vt){var Wt=!_t;_t||(_t={});for(var _i=-1,_s=_e.length;++_i<_s;){var _c=_e[_i],_l=Vt?Vt(_t[_c],$[_c],_c,_t,$):void 0;_l===void 0&&(_l=$[_c]),Wt?bg(_t,_c,_l):Ml(_t,_c,_l)}return _t},gc=function($){return $!=null&&X($)=="object"},Zp=function($){return gc($)&&Qd($)=="[object Arguments]"},$p=Object.prototype,ky=$p.hasOwnProperty,ly=$p.propertyIsEnumerable,rf=Zp(function(){return arguments}())?Zp:function($){return gc($)&&ky.call($,"callee")&&!ly.call($,"callee")},Va=Array.isArray,my=function(){return!1},jf=$a(function($,_e){var _t=(_e=_e&&!_e.nodeType&&_e)&&$&&!$.nodeType&&$;_e=_t&&_t.exports===_e?Cb.Buffer:void 0,$.exports=(_e?_e.isBuffer:void 0)||my}),ny=/^(?:0|[1-9]\d*)$/,wk=function($,_e){var _t=X($);return!!(_e=_e??9007199254740991)&&(_t=="number"||_t!="symbol"&&ny.test($))&&-1<$&&$%1==0&&$<_e},xk=function($){return typeof $=="number"&&-1<$&&$%1==0&&9007199254740991>=$},Ea={};Ea["[object Float32Array]"]=Ea["[object Float64Array]"]=Ea["[object Int8Array]"]=Ea["[object Int16Array]"]=Ea["[object Int32Array]"]=Ea["[object Uint8Array]"]=Ea["[object Uint8ClampedArray]"]=Ea["[object Uint16Array]"]=Ea["[object Uint32Array]"]=!0,Ea["[object Arguments]"]=Ea["[object Array]"]=Ea["[object ArrayBuffer]"]=Ea["[object Boolean]"]=Ea["[object DataView]"]=Ea["[object Date]"]=Ea["[object Error]"]=Ea["[object Function]"]=Ea["[object Map]"]=Ea["[object Number]"]=Ea["[object Object]"]=Ea["[object RegExp]"]=Ea["[object Set]"]=Ea["[object String]"]=Ea["[object WeakMap]"]=!1;var oy=function($){return gc($)&&xk($.length)&&!!Ea[Qd($)]},zh=function($){return function(_e){return $(_e)}},Se=$a(function($,_e){var _t=_e&&!_e.nodeType&&_e;_t=(_e=_t&&$&&!$.nodeType&&$)&&_e.exports===_t&&Tp.process;e:{try{var Vt=_e&&_e.require&&_e.require("util").types;if(Vt){var Wt=Vt;break e}Wt=_t&&_t.binding&&_t.binding("util");break e}catch{}Wt=void 0}$.exports=Wt}),aq=Se&&Se.isTypedArray,bi=aq?zh(aq):oy,py=Object.prototype.hasOwnProperty,bq=function($,_e){var _t=Va($),Vt=!_t&&rf($),Wt=!_t&&!Vt&&jf($),_i=!_t&&!Vt&&!Wt&&bi($);if(_t=_t||Vt||Wt||_i){Vt=$.length;for(var _s=String,_c=-1,_l=Array(Vt);++_c<Vt;)_l[_c]=_s(_c);Vt=_l}else Vt=[];for(var _d in _s=Vt.length,$)!_e&&!py.call($,_d)||_t&&(_d=="length"||Wt&&(_d=="offset"||_d=="parent")||_i&&(_d=="buffer"||_d=="byteLength"||_d=="byteOffset")||wk(_d,_s))||Vt.push(_d);return Vt},qy=Object.prototype,yk=function($){var _e=$&&$.constructor;return $===(typeof _e=="function"&&_e.prototype||qy)},cq=function($,_e){return function(_t){return $(_e(_t))}},ry=cq(Object.keys,Object),sy=Object.prototype.hasOwnProperty,Ed=function($){return $!=null&&xk($.length)&&!qi($)},Ad=function($){if(Ed($))$=bq($);else if(yk($)){var _e,_t=[];for(_e in Object($))sy.call($,_e)&&_e!="constructor"&&_t.push(_e);$=_t}else $=ry($);return $},Es=function($,_e){return $&&re(_e,Ad(_e),$)},ty=Object.prototype.hasOwnProperty,kf=function($){if(Ed($))$=bq($,!0);else if(lb($)){var _e=yk($),_t=[];for(Vt in $)(Vt!="constructor"||!_e&&ty.call($,Vt))&&_t.push(Vt);$=_t}else{var Vt=[];if($!=null)for(_e in Object($))Vt.push(_e);$=Vt}return $},Cs=function($,_e){return $&&re(_e,kf(_e),$)},Jl=$a(function($,_e){var _t=(_e=_e&&!_e.nodeType&&_e)&&$&&!$.nodeType&&$,Vt=(_e=_t&&_t.exports===_e?Cb.Buffer:void 0)?_e.allocUnsafe:void 0;$.exports=function(Wt,_i){return _i?Wt.slice():(_i=Wt.length,_i=Vt?Vt(_i):new Wt.constructor(_i),Wt.copy(_i),_i)}}),Xh=function($,_e){var _t=-1,Vt=$.length;for(_e||(_e=Array(Vt));++_t<Vt;)_e[_t]=$[_t];return _e},uy=function($,_e){for(var _t=-1,Vt=$==null?0:$.length,Wt=0,_i=[];++_t<Vt;){var _s=$[_t];_e(_s,_t,$)&&(_i[Wt++]=_s)}return _i},dq=function(){return[]},vy=Object.prototype.propertyIsEnumerable,eq=Object.getOwnPropertySymbols,zk=eq?function($){return $==null?[]:($=Object($),uy(eq($),function(_e){return vy.call($,_e)}))}:dq,Ds=function($,_e){return re($,zk($),_e)},ai=function($,_e){for(var _t=-1,Vt=_e.length,Wt=$.length;++_t<Vt;)$[Wt+_t]=_e[_t];return $},Ak=cq(Object.getPrototypeOf,Object),fq=Object.getOwnPropertySymbols?function($){for(var _e=[];$;)ai(_e,zk($)),$=Ak($);return _e}:dq,Bs=function($,_e){return re($,fq($),_e)},gq=function($,_e,_t){return _e=_e($),Va($)?_e:ai(_e,_t($))},Yh=function($){return gq($,Ad,zk)},Ll=function($){return gq($,kf,fq)},Bk=Sd(Cb,"DataView"),Ck=Sd(Cb,"Promise"),Dk=Sd(Cb,"WeakMap"),wy=Rd(Bk),xy=Rd(ag),yy=Rd(Ck),zy=Rd(Re),Ay=Rd(Dk),Td=Qd;(Bk&&Td(new Bk(new ArrayBuffer(1)))!="[object DataView]"||ag&&Td(new ag)!="[object Map]"||Ck&&Td(Ck.resolve())!="[object Promise]"||Re&&Td(new Re)!="[object Set]"||Dk&&Td(new Dk)!="[object WeakMap]")&&(Td=function($){var _e=Qd($);if($=($=_e=="[object Object]"?$.constructor:void 0)?Rd($):"")switch($){case wy:return"[object DataView]";case xy:return"[object Map]";case yy:return"[object Promise]";case zy:return"[object Set]";case Ay:return"[object WeakMap]"}return _e});var hf=Td,By=Object.prototype.hasOwnProperty,As=function($){var _e=$.length,_t=new $.constructor(_e);return _e&&typeof $[0]=="string"&&By.call($,"index")&&(_t.index=$.index,_t.input=$.input),_t},Ah=Cb.Uint8Array,Ek=function($){var _e=new $.constructor($.byteLength);return new Ah(_e).set(new Ah($)),_e},Cy=/\w*$/,hq=Pb?Pb.prototype:void 0,iq=hq?hq.valueOf:void 0,vm=function($,_e){return _e=_e?Ek($.buffer):$.buffer,new $.constructor(_e,$.byteOffset,$.length)},Fs=function($,_e,_t){var Vt=$.constructor;switch(_e){case"[object ArrayBuffer]":return Ek($);case"[object Boolean]":case"[object Date]":return new Vt(+$);case"[object DataView]":return _e=_t?Ek($.buffer):$.buffer,new $.constructor(_e,$.byteOffset,$.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return vm($,_t);case"[object Map]":return new Vt;case"[object Number]":case"[object String]":return new Vt($);case"[object RegExp]":return(_e=new $.constructor($.source,Cy.exec($))).lastIndex=$.lastIndex,_e;case"[object Set]":return new Vt;case"[object Symbol]":return iq?Object(iq.call($)):{}}},jq=Object.create,Dy=function(){function $(){}return function(_e){return lb(_e)?jq?jq(_e):($.prototype=_e,_e=new $,$.prototype=void 0,_e):{}}}(),Kl=function($){return typeof $.constructor!="function"||yk($)?{}:Dy(Ak($))},Ey=function($){return gc($)&&hf($)=="[object Map]"},kq=Se&&Se.isMap,Hs=kq?zh(kq):Ey,Fy=function($){return gc($)&&hf($)=="[object Set]"},lq=Se&&Se.isSet,Gs=lq?zh(lq):Fy,wa={};wa["[object Arguments]"]=wa["[object Array]"]=wa["[object ArrayBuffer]"]=wa["[object DataView]"]=wa["[object Boolean]"]=wa["[object Date]"]=wa["[object Float32Array]"]=wa["[object Float64Array]"]=wa["[object Int8Array]"]=wa["[object Int16Array]"]=wa["[object Int32Array]"]=wa["[object Map]"]=wa["[object Number]"]=wa["[object Object]"]=wa["[object RegExp]"]=wa["[object Set]"]=wa["[object String]"]=wa["[object Symbol]"]=wa["[object Uint8Array]"]=wa["[object Uint8ClampedArray]"]=wa["[object Uint16Array]"]=wa["[object Uint32Array]"]=!0,wa["[object Error]"]=wa["[object Function]"]=wa["[object WeakMap]"]=!1;var ie=function($){return X($)=="symbol"||gc($)&&Qd($)=="[object Symbol]"},Gy=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Hy=/^\w*$/,Fk=function($,_e){if(Va($))return!1;var _t=X($);return!(_t!="number"&&_t!="symbol"&&_t!="boolean"&&$!=null&&!ie($))||Hy.test($)||!Gy.test($)||_e!=null&&$ in Object(_e)};Zh.Cache=qg;var Iy=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Jy=/\\(\\)?/g,Ky=function($){var _e=($=Zh($,function(_t){return _e.size===500&&_e.clear(),_t})).cache;return $}(function($){var _e=[];return $.charCodeAt(0)===46&&_e.push(""),$.replace(Iy,function(_t,Vt,Wt,_i){_e.push(Wt?_i.replace(Jy,"$1"):Vt||_t)}),_e}),Js=1/0,mq=Pb?Pb.prototype:void 0,Ol=mq?mq.toString:void 0,Bh=function($,_e){return Va($)?$:Fk($,_e)?[$]:Ky($==null?"":Nl($))},Ly=1/0,cg=function($){if(typeof $=="string"||ie($))return $;var _e=$+"";return _e=="0"&&1/$==-Ly?"-0":_e},Ch=function($,_e){for(var _t=0,Vt=(_e=Bh(_e,$)).length;$!=null&&_t<Vt;)$=$[cg(_e[_t++])];return _t&&_t==Vt?$:void 0},My=function($,_e){if(!(2>(_e=Bh(_e,$)).length)){var _t=_e,Vt=0,Wt=-1,_i=-1,_s=_t.length;for(0>Vt&&(Vt=-Vt>_s?0:_s+Vt),0>(Wt=Wt>_s?_s:Wt)&&(Wt+=_s),_s=Vt>Wt?0:Wt-Vt>>>0,Vt>>>=0,Wt=Array(_s);++_i<_s;)Wt[_i]=_t[_i+Vt];$=Ch($,Wt)}return(_t=$==null)||(_t=_e==null?0:_e.length,_t=delete $[cg(_t?_e[_t-1]:void 0)]),_t},nq=Function.prototype.toString,Ny=Object.prototype.hasOwnProperty,Oy=nq.call(Object),wm=function($){return!(!gc($)||Qd($)!="[object Object]")&&(($=Ak($))===null||typeof($=Ny.call($,"constructor")&&$.constructor)=="function"&&$ instanceof $&&nq.call($)==Oy)},Py=function($){return wm($)?void 0:$},oq=Pb?Pb.isConcatSpreadable:void 0,Ks=function($){return Va($)||rf($)||!!(oq&&$&&$[oq])},Qy=function($){return $!=null&&$.length?$h($,1):[]},Ry=function($,_e,_t){switch(_t.length){case 0:return $.call(_e);case 1:return $.call(_e,_t[0]);case 2:return $.call(_e,_t[0],_t[1]);case 3:return $.call(_e,_t[0],_t[1],_t[2])}return $.apply(_e,_t)},pq=Math.max,qq=function($,_e,_t){return _e=pq(_e===void 0?$.length-1:_e,0),function(){for(var Vt=arguments,Wt=-1,_i=pq(Vt.length-_e,0),_s=Array(_i);++Wt<_i;)_s[Wt]=Vt[_e+Wt];for(Wt=-1,_i=Array(_e+1);++Wt<_e;)_i[Wt]=Vt[Wt];return _i[_e]=_t(_s),Ry($,this,_i)}},Sy=function($){return function(){return $}},Dh=function($){return $},Ty=Date.now,rq=function($){var _e=0,_t=0;return function(){var Vt=Ty(),Wt=16-(Vt-_t);if(_t=Vt,0<Wt){if(800<=++_e)return arguments[0]}else _e=0;return $.apply(void 0,arguments)}}(yh?function($,_e){return yh($,"toString",{configurable:!0,enumerable:!1,value:Sy(_e),writable:!0})}:Dh),Gk=function($){return rq(qq($,void 0,Qy),$+"")}(function($,_e){var _t={};if($==null)return _t;var Vt=!1;_e=he(_e,function(_i){return _i=Bh(_i,$),Vt||(Vt=1<_i.length),_i}),re($,Ll($),_t),Vt&&(_t=fe(_t,7,Py));for(var Wt=_e.length;Wt--;)My(_t,_e[Wt]);return _t}),Uy=function($,_e,_t,Vt){for(var Wt=-1,_i=$==null?0:$.length;++Wt<_i;){var _s=$[Wt];_e(Vt,_s,_t(_s),$)}return Vt},um=function($,_e,_t){for(var Vt=-1,Wt=Object($),_i=(_t=_t($)).length;_i--;){var _s=_t[++Vt];if(_e(Wt[_s],_s,Wt)===!1)break}return $},sq=function($,_e){return $&&um($,_e,Ad)},Hk=function($,_e){return function(_t,Vt){if(_t==null)return _t;if(!Ed(_t))return $(_t,Vt);for(var Wt=_t.length,_i=-1,_s=Object(_t);++_i<Wt&&Vt(_s[_i],_i,_s)!==!1;);return _t}}(sq),Vy=function($,_e,_t,Vt){return Hk($,function(Wt,_i,_s){_e(Vt,Wt,_t(Wt),_s)}),Vt},tq=function($,_e){for(var _t=-1,Vt=$==null?0:$.length;++_t<Vt;)if(_e($[_t],_t,$))return!0;return!1},Pl=function($,_e,_t,Vt,Wt,_i){var _s=1&_t,_c=$.length,_l=_e.length;if(_c!=_l&&!(_s&&_l>_c))return!1;_l=_i.get($);var _d=_i.get(_e);if(_l&&_d)return _l==_e&&_d==$;_l=-1,_d=!0;var _m=2&_t?new gf:void 0;for(_i.set($,_e),_i.set(_e,$);++_l<_c;){var e_=$[_l],t_=_e[_l];if(Vt)var i_=_s?Vt(t_,e_,_l,_e,$,_i):Vt(e_,t_,_l,$,_e,_i);if(i_!==void 0){if(i_)continue;_d=!1;break}if(_m){if(!tq(_e,function(c_,h_){if(!_m.has(h_)&&(e_===c_||Wt(e_,c_,_t,Vt,_i)))return _m.push(h_)})){_d=!1;break}}else if(e_!==t_&&!Wt(e_,t_,_t,Vt,_i)){_d=!1;break}}return _i.delete($),_i.delete(_e),_d},Wy=function($){var _e=-1,_t=Array($.size);return $.forEach(function(Vt,Wt){_t[++_e]=[Wt,Vt]}),_t},uq=Pb?Pb.prototype:void 0,Ik=uq?uq.valueOf:void 0,Ls=function($,_e,_t,Vt,Wt,_i,_s){switch(_t){case"[object DataView]":if($.byteLength!=_e.byteLength||$.byteOffset!=_e.byteOffset)break;$=$.buffer,_e=_e.buffer;case"[object ArrayBuffer]":if($.byteLength!=_e.byteLength||!_i(new Ah($),new Ah(_e)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return $f(+$,+_e);case"[object Error]":return $.name==_e.name&&$.message==_e.message;case"[object RegExp]":case"[object String]":return $==_e+"";case"[object Map]":var _c=Wy;case"[object Set]":if(_c||(_c=uk),$.size!=_e.size&&!(1&Vt))break;return(_t=_s.get($))?_t==_e:(Vt|=2,_s.set($,_e),_e=Pl(_c($),_c(_e),Vt,Wt,_i,_s),_s.delete($),_e);case"[object Symbol]":if(Ik)return Ik.call($)==Ik.call(_e)}return!1},Ms=Object.prototype.hasOwnProperty,Ql=Object.prototype.hasOwnProperty,Xy=function($,_e,_t,Vt){var Wt=_t.length,_i=Wt,_s=!Vt;if($==null)return!_i;for($=Object($);Wt--;){var _c=_t[Wt];if(_s&&_c[2]?_c[1]!==$[_c[0]]:!(_c[0]in $))return!1}for(;++Wt<_i;){var _l=(_c=_t[Wt])[0],_d=$[_l],_m=_c[1];if(_s&&_c[2]){if(_d===void 0&&!(_l in $))return!1}else{if(_c=new ge,Vt)var e_=Vt(_d,_m,_l,$,_e,_c);if(e_===void 0?!je(_m,_d,3,Vt,_c):!e_)return!1}}return!0},Yy=function($){for(var _e=Ad($),_t=_e.length;_t--;){var Vt=_e[_t],Wt=$[Vt];_e[_t]=[Vt,Wt,Wt==Wt&&!lb(Wt)]}return _e},vq=function($,_e){return function(_t){return _t!=null&&_t[$]===_e&&(_e!==void 0||$ in Object(_t))}},Zy=function($){var _e=Yy($);return _e.length==1&&_e[0][2]?vq(_e[0][0],_e[0][1]):function(_t){return _t===$||Xy(_t,$,_e)}},$y=function($,_e){return Fk($)&&_e==_e&&!lb(_e)?vq(cg($),_e):function(_t){var Vt=_t==null?void 0:Ch(_t,$);if((Vt=Vt===void 0?void 0:Vt)===void 0&&Vt===_e){if(Vt=_t!=null){for(var Wt=-1,_i=(Vt=Bh(Vt=$,_t)).length,_s=!1;++Wt<_i;){var _c=cg(Vt[Wt]);if(!(_s=_t!=null&&_t!=null&&_c in Object(_t)))break;_t=_t[_c]}_s||++Wt!=_i?Vt=_s:Vt=!!(_i=_t==null?0:_t.length)&&xk(_i)&&wk(_c,_i)&&(Va(_t)||rf(_t))}_c=Vt}else _c=je(_e,Vt,3);return _c}},az=function($){return function(_e){return _e==null?void 0:_e[$]}},bz=function($){return function(_e){return Ch(_e,$)}},Te=function($){return typeof $=="function"?$:$==null?Dh:X($)=="object"?Va($)?$y($[0],$[1]):Zy($):Fk($)?az(cg($)):bz($)},Jk=function($,_e){return function(_t,Vt){var Wt={};return(Va(_t)?Uy:Vy)(_t,$,Te(Vt),Wt)}}(function($,_e,_t){bg($,_t,_e)}),uc=function($,_e){var _t={};return _e=Te(_e),sq($,function(Vt,Wt,_i){bg(_t,Wt,_e(Vt,Wt,_i))}),_t};N({target:"String",proto:!0,forced:R(function(){var $="".sub('"');return $!==$.toLowerCase()||3<$.split('"').length})},{sub:function(){return"<sub>"+String(jb(this))+"</sub>"}});var U=xa,Qb=null;try{Qb=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch($){}xa.prototype.__isLong__,Object.defineProperty(xa.prototype,"__isLong__",{value:!0}),xa.isLong=mb;var Sl={},Rl={};xa.fromInt=Bd,xa.fromNumber=Gb,xa.fromBits=ya;var sg=Math.pow;xa.fromString=ci,xa.fromValue=Wb;var ke=4294967296,Tl=ke*ke,Vl=Tl/2,wq=Bd(16777216),Hb=Bd(0);xa.ZERO=Hb;var Cd=Bd(0,!0);xa.UZERO=Cd;var Ue=Bd(1);xa.ONE=Ue;var xq=Bd(1,!0);xa.UONE=xq;var Kk=Bd(-1);xa.NEG_ONE=Kk;var Wl=ya(-1,2147483647,!1);xa.MAX_VALUE=Wl;var Ul=ya(-1,-1,!0);xa.MAX_UNSIGNED_VALUE=Ul;var nb=ya(0,-2147483648,!1);xa.MIN_VALUE=nb;var D=xa.prototype;D.toInt=function(){return this.unsigned?this.low>>>0:this.low},D.toNumber=function(){return this.unsigned?(this.high>>>0)*ke+(this.low>>>0):this.high*ke+(this.low>>>0)},D.toString=function($){if(2>($=$||10)||36<$)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(nb)){var _e=Gb($),_t=this.div(_e);return _e=_t.mul(_e).sub(this),_t.toString($)+_e.toInt().toString($)}return"-"+this.neg().toString($)}_t=Gb(sg($,6),this.unsigned),_e=this;for(var Vt="";;){var Wt=_e.div(_t),_i=(_e.sub(Wt.mul(_t)).toInt()>>>0).toString($);if((_e=Wt).isZero())return _i+Vt;for(;6>_i.length;)_i="0"+_i;Vt=""+_i+Vt}},D.getHighBits=function(){return this.high},D.getHighBitsUnsigned=function(){return this.high>>>0},D.getLowBits=function(){return this.low},D.getLowBitsUnsigned=function(){return this.low>>>0},D.getNumBitsAbs=function(){if(this.isNegative())return this.eq(nb)?64:this.neg().getNumBitsAbs();for(var $=this.high!=0?this.high:this.low,_e=31;0<_e&&!($&1<<_e);_e--);return this.high!=0?_e+33:_e+1},D.isZero=function(){return this.high===0&&this.low===0},D.eqz=D.isZero,D.isNegative=function(){return!this.unsigned&&0>this.high},D.isPositive=function(){return this.unsigned||0<=this.high},D.isOdd=function(){return(1&this.low)==1},D.isEven=function(){return(1&this.low)==0},D.equals=function($){return mb($)||($=Wb($)),(this.unsigned===$.unsigned||this.high>>>31!=1||$.high>>>31!=1)&&this.high===$.high&&this.low===$.low},D.eq=D.equals,D.notEquals=function($){return!this.eq($)},D.neq=D.notEquals,D.ne=D.notEquals,D.lessThan=function($){return 0>this.comp($)},D.lt=D.lessThan,D.lessThanOrEqual=function($){return 0>=this.comp($)},D.lte=D.lessThanOrEqual,D.le=D.lessThanOrEqual,D.greaterThan=function($){return 0<this.comp($)},D.gt=D.greaterThan,D.greaterThanOrEqual=function($){return 0<=this.comp($)},D.gte=D.greaterThanOrEqual,D.ge=D.greaterThanOrEqual,D.compare=function($){if(mb($)||($=Wb($)),this.eq($))return 0;var _e=this.isNegative(),_t=$.isNegative();return _e&&!_t?-1:!_e&&_t?1:this.unsigned?$.high>>>0>this.high>>>0||$.high===this.high&&$.low>>>0>this.low>>>0?-1:1:this.sub($).isNegative()?-1:1},D.comp=D.compare,D.negate=function(){return!this.unsigned&&this.eq(nb)?nb:this.not().add(Ue)},D.neg=D.negate,D.add=function($){mb($)||($=Wb($));var _e=this.high>>>16,_t=65535&this.high,Vt=this.low>>>16,Wt=$.high>>>16,_i=65535&$.high,_s=$.low>>>16;return Vt=(_s=(($=(65535&this.low)+(65535&$.low))>>>16)+(Vt+_s))>>>16,ya((65535&_s)<<16|65535&$,(_e=((Vt+=_t+_i)>>>16)+(_e+Wt)&65535)<<16|65535&Vt,this.unsigned)},D.subtract=function($){return mb($)||($=Wb($)),this.add($.neg())},D.sub=D.subtract,D.multiply=function($){if(this.isZero())return Hb;if(mb($)||($=Wb($)),Qb){var _e=Qb.mul(this.low,this.high,$.low,$.high);return ya(_e,Qb.get_high(),this.unsigned)}if($.isZero())return Hb;if(this.eq(nb))return $.isOdd()?nb:Hb;if($.eq(nb))return this.isOdd()?nb:Hb;if(this.isNegative())return $.isNegative()?this.neg().mul($.neg()):this.neg().mul($).neg();if($.isNegative())return this.mul($.neg()).neg();if(this.lt(wq)&&$.lt(wq))return Gb(this.toNumber()*$.toNumber(),this.unsigned);_e=this.high>>>16;var _t=65535&this.high,Vt=this.low>>>16,Wt=65535&this.low,_i=$.high>>>16,_s=65535&$.high,_c=$.low>>>16,_l=Wt*($=65535&$.low),_d=(_l>>>16)+Vt*$,_m=_d>>>16;_m+=(_d=(65535&_d)+Wt*_c)>>>16;var e_=(_m+=_t*$)>>>16;return ya((65535&_d)<<16|65535&_l,(e_=(e_+=(_m=(65535&_m)+Vt*_c)>>>16)+((_m=(65535&_m)+Wt*_s)>>>16)+(_e*$+_t*_c+Vt*_s+Wt*_i)&65535)<<16|65535&_m,this.unsigned)},D.mul=D.multiply,D.divide=function($){if(mb($)||($=Wb($)),$.isZero())throw Error("division by zero");if(Qb)return this.unsigned||this.high!==-2147483648||$.low!==-1||$.high!==-1?ya($=(this.unsigned?Qb.div_u:Qb.div_s)(this.low,this.high,$.low,$.high),Qb.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Cd:Hb;if(this.unsigned){if($.unsigned||($=$.toUnsigned()),$.gt(this))return Cd;if($.gt(this.shru(1)))return xq;var _e=Cd}else{if(this.eq(nb)){if($.eq(Ue)||$.eq(Kk))return nb;if($.eq(nb))return Ue;var _t=this.shr(1).div($).shl(1);if(_t.eq(Hb))return $.isNegative()?Ue:Kk;var Vt=this.sub($.mul(_t));return _t.add(Vt.div($))}if($.eq(nb))return this.unsigned?Cd:Hb;if(this.isNegative())return $.isNegative()?this.neg().div($.neg()):this.neg().div($).neg();if($.isNegative())return this.div($.neg()).neg();_e=Hb}for(Vt=this;Vt.gte($);){_t=Math.max(1,Math.floor(Vt.toNumber()/$.toNumber()));var Wt=Math.ceil(Math.log(_t)/Math.LN2);Wt=48>=Wt?1:sg(2,Wt-48);for(var _i=Gb(_t),_s=_i.mul($);_s.isNegative()||_s.gt(Vt);)_s=(_i=Gb(_t-=Wt,this.unsigned)).mul($);_i.isZero()&&(_i=Ue),_e=_e.add(_i),Vt=Vt.sub(_s)}return _e},D.div=D.divide,D.modulo=function($){return mb($)||($=Wb($)),Qb?ya($=(this.unsigned?Qb.rem_u:Qb.rem_s)(this.low,this.high,$.low,$.high),Qb.get_high(),this.unsigned):this.sub(this.div($).mul($))},D.mod=D.modulo,D.rem=D.modulo,D.not=function(){return ya(~this.low,~this.high,this.unsigned)},D.and=function($){return mb($)||($=Wb($)),ya(this.low&$.low,this.high&$.high,this.unsigned)},D.or=function($){return mb($)||($=Wb($)),ya(this.low|$.low,this.high|$.high,this.unsigned)},D.xor=function($){return mb($)||($=Wb($)),ya(this.low^$.low,this.high^$.high,this.unsigned)},D.shiftLeft=function($){return mb($)&&($=$.toInt()),($&=63)==0?this:32>$?ya(this.low<<$,this.high<<$|this.low>>>32-$,this.unsigned):ya(0,this.low<<$-32,this.unsigned)},D.shl=D.shiftLeft,D.shiftRight=function($){return mb($)&&($=$.toInt()),($&=63)==0?this:32>$?ya(this.low>>>$|this.high<<32-$,this.high>>$,this.unsigned):ya(this.high>>$-32,0<=this.high?0:-1,this.unsigned)},D.shr=D.shiftRight,D.shiftRightUnsigned=function($){if(mb($)&&($=$.toInt()),($&=63)===0)return this;var _e=this.high;return 32>$?ya(this.low>>>$|_e<<32-$,_e>>>$,this.unsigned):ya($===32?_e:_e>>>$-32,0,this.unsigned)},D.shru=D.shiftRightUnsigned,D.shr_u=D.shiftRightUnsigned,D.toSigned=function(){return this.unsigned?ya(this.low,this.high,!1):this},D.toUnsigned=function(){return this.unsigned?this:ya(this.low,this.high,!0)},D.toBytes=function($){return $?this.toBytesLE():this.toBytesBE()},D.toBytesLE=function(){var $=this.high,_e=this.low;return[255&_e,_e>>>8&255,_e>>>16&255,_e>>>24,255&$,$>>>8&255,$>>>16&255,$>>>24]},D.toBytesBE=function(){var $=this.high,_e=this.low;return[$>>>24,$>>>16&255,$>>>8&255,255&$,_e>>>24,_e>>>16&255,_e>>>8&255,255&_e]},xa.fromBytes=function($,_e,_t){return _t?xa.fromBytesLE($,_e):xa.fromBytesBE($,_e)},xa.fromBytesLE=function($,_e){return new xa($[0]|$[1]<<8|$[2]<<16|$[3]<<24,$[4]|$[5]<<8|$[6]<<16|$[7]<<24,_e)},xa.fromBytesBE=function($,_e){return new xa($[4]<<24|$[5]<<16|$[6]<<8|$[7],$[0]<<24|$[1]<<16|$[2]<<8|$[3],_e)};var di=function($,_e){return(di=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,Vt){_t.__proto__=Vt}||function(_t,Vt){for(var Wt in Vt)Vt.hasOwnProperty(Wt)&&(_t[Wt]=Vt[Wt])})($,_e)},Lk=!1,Ib={Promise:void 0,set useDeprecatedSynchronousErrorHandling($){$?console.warn(`DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: 
`+Error().stack):Lk&&console.log("RxJS: Back to a better error behavior. Thank you. <3"),Lk=$},get useDeprecatedSynchronousErrorHandling(){return Lk}},Eh={closed:!0,next:function($){},error:function($){if(Ib.useDeprecatedSynchronousErrorHandling)throw $;me($)},complete:function(){}},Jb=Array.isArray||function($){return $&&typeof $.length=="number"},lf=function(){function $(_e){return Error.call(this),this.message=_e?_e.length+` errors occurred during unsubscription:
`+_e.map(function(_t,Vt){return Vt+1+") "+_t.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=_e,this}return $.prototype=Object.create(Error.prototype),$}(),Oa=function(){function $(_e){this.closed=!1,this._subscriptions=this._parentOrParents=null,_e&&(this._ctorUnsubscribe=!0,this._unsubscribe=_e)}return $.prototype.unsubscribe=function(){if(!this.closed){var _e=this._parentOrParents,_t=this._ctorUnsubscribe,Vt=this._unsubscribe,Wt=this._subscriptions;if(this.closed=!0,this._subscriptions=this._parentOrParents=null,_e instanceof $)_e.remove(this);else if(_e!==null)for(var _i=0;_i<_e.length;++_i)_e[_i].remove(this);if(le(Vt)){_t&&(this._unsubscribe=void 0);try{Vt.call(this)}catch(_c){var _s=_c instanceof lf?Xl(_c.errors):[_c]}}if(Jb(Wt)){for(_i=-1,_e=Wt.length;++_i<_e;)if(ei(_t=Wt[_i]))try{_t.unsubscribe()}catch(_c){_s=_s||[],_c instanceof lf?_s=_s.concat(Xl(_c.errors)):_s.push(_c)}}if(_s)throw new lf(_s)}},$.prototype.add=function(_e){var _t=_e;if(!_e)return $.EMPTY;switch(X(_e)){case"function":_t=new $(_e);case"object":if(_t===this||_t.closed||typeof _t.unsubscribe!="function")return _t;if(this.closed)return _t.unsubscribe(),_t;_t instanceof $||(_e=_t,(_t=new $)._subscriptions=[_e]);break;default:throw Error("unrecognized teardown "+_e+" added to Subscription.")}if((_e=_t._parentOrParents)===null)_t._parentOrParents=this;else if(_e instanceof $){if(_e===this)return _t;_t._parentOrParents=[_e,this]}else{if(_e.indexOf(this)!==-1)return _t;_e.push(this)}return(_e=this._subscriptions)===null?this._subscriptions=[_t]:_e.push(_t),_t},$.prototype.remove=function(_e){var _t=this._subscriptions;_t&&(_e=_t.indexOf(_e))!==-1&&_t.splice(_e,1)},$.EMPTY=function(_e){return _e.closed=!0,_e}(new $),$}(),Fh=typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),ia=function($){function _e(_t,Vt,Wt){var _i=$.call(this)||this;switch(_i.syncErrorValue=null,_i.syncErrorThrown=!1,_i.syncErrorThrowable=!1,_i.isStopped=!1,arguments.length){case 0:_i.destination=Eh;break;case 1:if(!_t){_i.destination=Eh;break}if(X(_t)==="object"){_t instanceof _e?(_i.syncErrorThrowable=_t.syncErrorThrowable,_i.destination=_t,_t.add(_i)):(_i.syncErrorThrowable=!0,_i.destination=new yq(_i,_t));break}default:_i.syncErrorThrowable=!0,_i.destination=new yq(_i,_t,Vt,Wt)}return _i}return O(_e,$),_e.prototype[Fh]=function(){return this},_e.create=function(_t,Vt,Wt){return(_t=new _e(_t,Vt,Wt)).syncErrorThrowable=!1,_t},_e.prototype.next=function(_t){this.isStopped||this._next(_t)},_e.prototype.error=function(_t){this.isStopped||(this.isStopped=!0,this._error(_t))},_e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},_e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,$.prototype.unsubscribe.call(this))},_e.prototype._next=function(_t){this.destination.next(_t)},_e.prototype._error=function(_t){this.destination.error(_t),this.unsubscribe()},_e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},_e.prototype._unsubscribeAndRecycle=function(){var _t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.isStopped=this.closed=!1,this._parentOrParents=_t,this},_e}(Oa),yq=function($){function _e(_t,Vt,Wt,_i){var _s=$.call(this)||this;if(_s._parentSubscriber=_t,_t=_s,le(Vt))var _c=Vt;else Vt&&(_c=Vt.next,Wt=Vt.error,_i=Vt.complete,Vt!==Eh&&(le((_t=Object.create(Vt)).unsubscribe)&&_s.add(_t.unsubscribe.bind(_t)),_t.unsubscribe=_s.unsubscribe.bind(_s)));return _s._context=_t,_s._next=_c,_s._error=Wt,_s._complete=_i,_s}return O(_e,$),_e.prototype.next=function(_t){if(!this.isStopped&&this._next){var Vt=this._parentSubscriber;Ib.useDeprecatedSynchronousErrorHandling&&Vt.syncErrorThrowable?this.__tryOrSetError(Vt,this._next,_t)&&this.unsubscribe():this.__tryOrUnsub(this._next,_t)}},_e.prototype.error=function(_t){if(!this.isStopped){var Vt=this._parentSubscriber,Wt=Ib.useDeprecatedSynchronousErrorHandling;if(this._error)Wt&&Vt.syncErrorThrowable?this.__tryOrSetError(Vt,this._error,_t):this.__tryOrUnsub(this._error,_t),this.unsubscribe();else if(Vt.syncErrorThrowable)Wt?(Vt.syncErrorValue=_t,Vt.syncErrorThrown=!0):me(_t),this.unsubscribe();else{if(this.unsubscribe(),Wt)throw _t;me(_t)}}},_e.prototype.complete=function(){var _t=this;if(!this.isStopped){var Vt=this._parentSubscriber;if(this._complete){var Wt=function(){return _t._complete.call(_t._context)};Ib.useDeprecatedSynchronousErrorHandling&&Vt.syncErrorThrowable?this.__tryOrSetError(Vt,Wt):this.__tryOrUnsub(Wt)}this.unsubscribe()}},_e.prototype.__tryOrUnsub=function(_t,Vt){try{_t.call(this._context,Vt)}catch(Wt){if(this.unsubscribe(),Ib.useDeprecatedSynchronousErrorHandling)throw Wt;me(Wt)}},_e.prototype.__tryOrSetError=function(_t,Vt,Wt){if(!Ib.useDeprecatedSynchronousErrorHandling)throw Error("bad call");try{Vt.call(this._context,Wt)}catch(_i){return Ib.useDeprecatedSynchronousErrorHandling?(_t.syncErrorValue=_i,_t.syncErrorThrown=!0):me(_i),!0}return!1},_e.prototype._unsubscribe=function(){var _t=this._parentSubscriber;this._parentSubscriber=this._context=null,_t.unsubscribe()},_e}(ia),ne=typeof Symbol=="function"&&Symbol.observable||"@@observable",Y=function(){function $(_e){this._isScalar=!1,_e&&(this._subscribe=_e)}return $.prototype.lift=function(_e){var _t=new $;return _t.source=this,_t.operator=_e,_t},$.prototype.subscribe=function(_e,_t,Vt){var Wt=this.operator;e:{if(_e){if(_e instanceof ia)break e;if(_e[Fh]){_e=_e[Fh]();break e}}_e=_e||_t||Vt?new ia(_e,_t,Vt):new ia(Eh)}if(Wt?_e.add(Wt.call(_e,this.source)):_e.add(this.source||Ib.useDeprecatedSynchronousErrorHandling&&!_e.syncErrorThrowable?this._subscribe(_e):this._trySubscribe(_e)),Ib.useDeprecatedSynchronousErrorHandling&&_e.syncErrorThrowable&&(_e.syncErrorThrowable=!1,_e.syncErrorThrown))throw _e.syncErrorValue;return _e},$.prototype._trySubscribe=function(_e){try{return this._subscribe(_e)}catch(_t){Ib.useDeprecatedSynchronousErrorHandling&&(_e.syncErrorThrown=!0,_e.syncErrorValue=_t),fi(_e)?_e.error(_t):console.warn(_t)}},$.prototype.forEach=function(_e,_t){var Vt=this;return new(_t=Zl(_t))(function(Wt,_i){var _s=Vt.subscribe(function(_c){try{_e(_c)}catch(_l){_i(_l),_s&&_s.unsubscribe()}},_i,Wt)})},$.prototype._subscribe=function(_e){var _t=this.source;return _t&&_t.subscribe(_e)},$.prototype[ne]=function(){return this},$.prototype.pipe=function(){for(var _e=[],_t=0;_t<arguments.length;_t++)_e[_t]=arguments[_t];return _e.length===0?this:Yl(_e)(this)},$.prototype.toPromise=function(_e){var _t=this;return new(_e=Zl(_e))(function(Vt,Wt){var _i;_t.subscribe(function(_s){return _i=_s},function(_s){return Wt(_s)},function(){return Vt(_i)})})},$.create=function(_e){return new $(_e)},$}(),qd=function(){function $(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return $.prototype=Object.create(Error.prototype),$}(),zq=function($){function _e(_t,Vt){var Wt=$.call(this)||this;return Wt.subject=_t,Wt.subscriber=Vt,Wt.closed=!1,Wt}return O(_e,$),_e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var _t=this.subject,Vt=_t.observers;this.subject=null,!Vt||Vt.length===0||_t.isStopped||_t.closed||(_t=Vt.indexOf(this.subscriber))!==-1&&Vt.splice(_t,1)}},_e}(Oa),Aq=function($){function _e(_t){var Vt=$.call(this,_t)||this;return Vt.destination=_t,Vt}return O(_e,$),_e}(ia),Pa=function($){function _e(){var _t=$.call(this)||this;return _t.observers=[],_t.closed=!1,_t.isStopped=!1,_t.hasError=!1,_t.thrownError=null,_t}return O(_e,$),_e.prototype[Fh]=function(){return new Aq(this)},_e.prototype.lift=function(_t){var Vt=new Bq(this,this);return Vt.operator=_t,Vt},_e.prototype.next=function(_t){if(this.closed)throw new qd;if(!this.isStopped){var Vt=this.observers,Wt=Vt.length;Vt=Vt.slice();for(var _i=0;_i<Wt;_i++)Vt[_i].next(_t)}},_e.prototype.error=function(_t){if(this.closed)throw new qd;this.hasError=!0,this.thrownError=_t,this.isStopped=!0;var Vt=this.observers,Wt=Vt.length;Vt=Vt.slice();for(var _i=0;_i<Wt;_i++)Vt[_i].error(_t);this.observers.length=0},_e.prototype.complete=function(){if(this.closed)throw new qd;this.isStopped=!0;var _t=this.observers,Vt=_t.length;_t=_t.slice();for(var Wt=0;Wt<Vt;Wt++)_t[Wt].complete();this.observers.length=0},_e.prototype.unsubscribe=function(){this.closed=this.isStopped=!0,this.observers=null},_e.prototype._trySubscribe=function(_t){if(this.closed)throw new qd;return $.prototype._trySubscribe.call(this,_t)},_e.prototype._subscribe=function(_t){if(this.closed)throw new qd;return this.hasError?(_t.error(this.thrownError),Oa.EMPTY):this.isStopped?(_t.complete(),Oa.EMPTY):(this.observers.push(_t),new zq(this,_t))},_e.prototype.asObservable=function(){var _t=new Y;return _t.source=this,_t},_e.create=function(_t,Vt){return new Bq(_t,Vt)},_e}(Y),Bq=function($){function _e(_t,Vt){var Wt=$.call(this)||this;return Wt.destination=_t,Wt.source=Vt,Wt}return O(_e,$),_e.prototype.next=function(_t){var Vt=this.destination;Vt&&Vt.next&&Vt.next(_t)},_e.prototype.error=function(_t){var Vt=this.destination;Vt&&Vt.error&&this.destination.error(_t)},_e.prototype.complete=function(){var _t=this.destination;_t&&_t.complete&&this.destination.complete()},_e.prototype._subscribe=function(_t){return this.source?this.source.subscribe(_t):Oa.EMPTY},_e}(Pa),Ns=function(){function $(_e){this.connectable=_e}return $.prototype.call=function(_e,_t){var Vt=this.connectable;return Vt._refCount++,_e=new cz(_e,Vt),_t=_t.subscribe(_e),_e.closed||(_e.connection=Vt.connect()),_t},$}(),cz=function($){function _e(_t,Vt){return(_t=$.call(this,_t)||this).connectable=Vt,_t}return O(_e,$),_e.prototype._unsubscribe=function(){var _t=this.connectable;if(_t){this.connectable=null;var Vt=_t._refCount;0>=Vt?this.connection=null:(_t._refCount=Vt-1,1<Vt?this.connection=null:(Vt=this.connection,_t=_t._connection,this.connection=null,!_t||Vt&&_t!==Vt||_t.unsubscribe()))}else this.connection=null},_e}(ia),Cq=function($){function _e(_t,Vt){var Wt=$.call(this)||this;return Wt.source=_t,Wt.subjectFactory=Vt,Wt._refCount=0,Wt._isComplete=!1,Wt}return O(_e,$),_e.prototype._subscribe=function(_t){return this.getSubject().subscribe(_t)},_e.prototype.getSubject=function(){var _t=this._subject;return _t&&!_t.isStopped||(this._subject=this.subjectFactory()),this._subject},_e.prototype.connect=function(){var _t=this._connection;return _t||(this._isComplete=!1,(_t=this._connection=new Oa).add(this.source.subscribe(new dz(this.getSubject(),this))),_t.closed&&(this._connection=null,_t=Oa.EMPTY)),_t},_e.prototype.refCount=function(){return $l()(this)},_e}(Y),At=function(){var $=Cq.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:$._subscribe},_isComplete:{value:$._isComplete,writable:!0},getSubject:{value:$.getSubject},connect:{value:$.connect},refCount:{value:$.refCount}}}(),dz=function($){function _e(_t,Vt){return(_t=$.call(this,_t)||this).connectable=Vt,_t}return O(_e,$),_e.prototype._error=function(_t){this._unsubscribe(),$.prototype._error.call(this,_t)},_e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),$.prototype._complete.call(this)},_e.prototype._unsubscribe=function(){var _t=this.connectable;if(_t){this.connectable=null;var Vt=_t._connection;_t._refCount=0,_t._subject=null,_t._connection=null,Vt&&Vt.unsubscribe()}},_e}(Aq);(function($){function _e(_t,Vt){return(_t=$.call(this,_t)||this).connectable=Vt,_t}O(_e,$),_e.prototype._unsubscribe=function(){var _t=this.connectable;if(_t){this.connectable=null;var Vt=_t._refCount;0>=Vt?this.connection=null:(_t._refCount=Vt-1,1<Vt?this.connection=null:(Vt=this.connection,_t=_t._connection,this.connection=null,!_t||Vt&&_t!==Vt||_t.unsubscribe()))}else this.connection=null}})(ia),function($){function _e(_t,Vt,Wt,_i,_s){return(_t=$.call(this,_t)||this).keySelector=Vt,_t.elementSelector=Wt,_t.durationSelector=_i,_t.subjectSelector=_s,_t.groups=null,_t.attemptedToUnsubscribe=!1,_t.count=0,_t}O(_e,$),_e.prototype._next=function(_t){try{var Vt=this.keySelector(_t)}catch(Wt){return void this.error(Wt)}this._group(_t,Vt)},_e.prototype._group=function(_t,Vt){var Wt=this.groups;Wt||(Wt=this.groups=new Map);var _i=Wt.get(Vt);if(this.elementSelector)try{var _s=this.elementSelector(_t)}catch(_c){this.error(_c)}else _s=_t;if(!_i&&(_i=this.subjectSelector?this.subjectSelector():new Pa,Wt.set(Vt,_i),_t=new Mk(Vt,_i,this),this.destination.next(_t),this.durationSelector)){_t=void 0;try{_t=this.durationSelector(new Mk(Vt,_i))}catch(_c){return void this.error(_c)}this.add(_t.subscribe(new ez(Vt,_i,this)))}_i.closed||_i.next(_s)},_e.prototype._error=function(_t){var Vt=this.groups;Vt&&(Vt.forEach(function(Wt,_i){Wt.error(_t)}),Vt.clear()),this.destination.error(_t)},_e.prototype._complete=function(){var _t=this.groups;_t&&(_t.forEach(function(Vt,Wt){Vt.complete()}),_t.clear()),this.destination.complete()},_e.prototype.removeGroup=function(_t){this.groups.delete(_t)},_e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,this.count===0&&$.prototype.unsubscribe.call(this))}}(ia);var ez=function($){function _e(_t,Vt,Wt){var _i=$.call(this,Vt)||this;return _i.key=_t,_i.group=Vt,_i.parent=Wt,_i}return O(_e,$),_e.prototype._next=function(_t){this.complete()},_e.prototype._unsubscribe=function(){var _t=this.parent,Vt=this.key;this.key=this.parent=null,_t&&_t.removeGroup(Vt)},_e}(ia),Mk=function($){function _e(_t,Vt,Wt){var _i=$.call(this)||this;return _i.key=_t,_i.groupSubject=Vt,_i.refCountSubscription=Wt,_i}return O(_e,$),_e.prototype._subscribe=function(_t){var Vt=new Oa,Wt=this.refCountSubscription,_i=this.groupSubject;return Wt&&!Wt.closed&&Vt.add(new fz(Wt)),Vt.add(_i.subscribe(_t)),Vt},_e}(Y),fz=function($){function _e(_t){var Vt=$.call(this)||this;return Vt.parent=_t,_t.count++,Vt}return O(_e,$),_e.prototype.unsubscribe=function(){var _t=this.parent;_t.closed||this.closed||($.prototype.unsubscribe.call(this),--_t.count,_t.count===0&&_t.attemptedToUnsubscribe&&_t.unsubscribe())},_e}(Oa),gz=function($){function _e(_t){var Vt=$.call(this)||this;return Vt._value=_t,Vt}return O(_e,$),Object.defineProperty(_e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),_e.prototype._subscribe=function(_t){var Vt=$.prototype._subscribe.call(this,_t);return Vt&&!Vt.closed&&_t.next(this._value),Vt},_e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new qd;return this._value},_e.prototype.next=function(_t){$.prototype.next.call(this,this._value=_t)},_e}(Pa),dg=function($){function _e(_t,Vt){var Wt=$.call(this,_t,Vt)||this;return Wt.scheduler=_t,Wt.work=Vt,Wt.pending=!1,Wt}return O(_e,$),_e.prototype.schedule=function(_t,Vt){if(Vt===void 0&&(Vt=0),this.closed)return this;this.state=_t,_t=this.id;var Wt=this.scheduler;return _t!=null&&(this.id=this.recycleAsyncId(Wt,_t,Vt)),this.pending=!0,this.delay=Vt,this.id=this.id||this.requestAsyncId(Wt,this.id,Vt),this},_e.prototype.requestAsyncId=function(_t,Vt,Wt){return Wt===void 0&&(Wt=0),setInterval(_t.flush.bind(_t,this),Wt)},_e.prototype.recycleAsyncId=function(_t,Vt,Wt){if(Wt===void 0&&(Wt=0),Wt!==null&&this.delay===Wt&&this.pending===!1)return Vt;clearInterval(Vt)},_e.prototype.execute=function(_t,Vt){return this.closed?Error("executing a cancelled action"):(this.pending=!1,(_t=this._execute(_t,Vt))?_t:void(this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))))},_e.prototype._execute=function(_t,Vt){Vt=!1;var Wt=void 0;try{this.work(_t)}catch(_i){Vt=!0,Wt=!!_i&&_i||Error(_i)}if(Vt)return this.unsubscribe(),Wt},_e.prototype._unsubscribe=function(){var _t=this.id,Vt=this.scheduler,Wt=Vt.actions,_i=Wt.indexOf(this);this.state=this.work=null,this.pending=!1,this.scheduler=null,_i!==-1&&Wt.splice(_i,1),_t!=null&&(this.id=this.recycleAsyncId(Vt,_t,null)),this.delay=null},_e}(function($){function _e(_t,Vt){return $.call(this)||this}return O(_e,$),_e.prototype.schedule=function(_t,Vt){return this},_e}(Oa)),hz=function($){function _e(_t,Vt){var Wt=$.call(this,_t,Vt)||this;return Wt.scheduler=_t,Wt.work=Vt,Wt}return O(_e,$),_e.prototype.schedule=function(_t,Vt){return Vt===void 0&&(Vt=0),0<Vt?$.prototype.schedule.call(this,_t,Vt):(this.delay=Vt,this.state=_t,this.scheduler.flush(this),this)},_e.prototype.execute=function(_t,Vt){return 0<Vt||this.closed?$.prototype.execute.call(this,_t,Vt):this._execute(_t,Vt)},_e.prototype.requestAsyncId=function(_t,Vt,Wt){return Wt===void 0&&(Wt=0),Wt!==null&&0<Wt||Wt===null&&0<this.delay?$.prototype.requestAsyncId.call(this,_t,Vt,Wt):_t.flush(this)},_e}(dg),Nk=function(){function $(_e,_t){_t===void 0&&(_t=$.now),this.SchedulerAction=_e,this.now=_t}return $.prototype.schedule=function(_e,_t,Vt){return _t===void 0&&(_t=0),new this.SchedulerAction(this,_e).schedule(Vt,_t)},$.now=function(){return Date.now()},$}(),eg=function($){function _e(_t,Vt){Vt===void 0&&(Vt=Nk.now);var Wt=$.call(this,_t,function(){return _e.delegate&&_e.delegate!==Wt?_e.delegate.now():Vt()})||this;return Wt.actions=[],Wt.active=!1,Wt.scheduled=void 0,Wt}return O(_e,$),_e.prototype.schedule=function(_t,Vt,Wt){return Vt===void 0&&(Vt=0),_e.delegate&&_e.delegate!==this?_e.delegate.schedule(_t,Vt,Wt):$.prototype.schedule.call(this,_t,Vt,Wt)},_e.prototype.flush=function(_t){var Vt=this.actions;if(this.active)Vt.push(_t);else{var Wt;this.active=!0;do if(Wt=_t.execute(_t.state,_t.delay))break;while(_t=Vt.shift());if(this.active=!1,Wt){for(;_t=Vt.shift();)_t.unsubscribe();throw Wt}}},_e}(Nk),fg=new(function($){function _e(){return $!==null&&$.apply(this,arguments)||this}return O(_e,$),_e}(eg))(hz),vb=new Y(function($){return $.complete()}),am=function($){return function(_e){for(var _t=0,Vt=$.length;_t<Vt&&!_e.closed;_t++)_e.next($[_t]);_e.complete()}},Ok;(function($){$.NEXT="N",$.ERROR="E",$.COMPLETE="C"})(Ok||(Ok={}));var Ve=function(){function $(_e,_t,Vt){this.kind=_e,this.value=_t,this.error=Vt,this.hasValue=_e==="N"}return $.prototype.observe=function(_e){switch(this.kind){case"N":return _e.next&&_e.next(this.value);case"E":return _e.error&&_e.error(this.error);case"C":return _e.complete&&_e.complete()}},$.prototype.do=function(_e,_t,Vt){switch(this.kind){case"N":return _e&&_e(this.value);case"E":return _t&&_t(this.error);case"C":return Vt&&Vt()}},$.prototype.accept=function(_e,_t,Vt){return _e&&typeof _e.next=="function"?this.observe(_e):this.do(_e,_t,Vt)},$.prototype.toObservable=function(){switch(this.kind){case"N":return bb(this.value);case"E":return Z(this.error);case"C":return mf()}throw Error("unexpected notification kind value")},$.createNext=function(_e){return _e!==void 0?new $("N",_e):$.undefinedValueNotification},$.createError=function(_e){return new $("E",void 0,_e)},$.createComplete=function(){return $.completeNotification},$.completeNotification=new $("C"),$.undefinedValueNotification=new $("N",void 0),$}(),Rs=function(){function $(_e,_t){_t===void 0&&(_t=0),this.scheduler=_e,this.delay=_t}return $.prototype.call=function(_e,_t){return _t.subscribe(new Dq(_e,this.scheduler,this.delay))},$}(),Dq=function($){function _e(_t,Vt,Wt){return Wt===void 0&&(Wt=0),(_t=$.call(this,_t)||this).scheduler=Vt,_t.delay=Wt,_t}return O(_e,$),_e.dispatch=function(_t){_t.notification.observe(_t.destination),this.unsubscribe()},_e.prototype.scheduleMessage=function(_t){this.destination.add(this.scheduler.schedule(_e.dispatch,this.delay,new iz(_t,this.destination)))},_e.prototype._next=function(_t){this.scheduleMessage(Ve.createNext(_t))},_e.prototype._error=function(_t){this.scheduleMessage(Ve.createError(_t)),this.unsubscribe()},_e.prototype._complete=function(){this.scheduleMessage(Ve.createComplete()),this.unsubscribe()},_e}(ia),iz=function($,_e){this.notification=$,this.destination=_e},qe=function($){function _e(_t,Vt,Wt){_t===void 0&&(_t=Number.POSITIVE_INFINITY),Vt===void 0&&(Vt=Number.POSITIVE_INFINITY);var _i=$.call(this)||this;return _i.scheduler=Wt,_i._events=[],_i._infiniteTimeWindow=!1,_i._bufferSize=1>_t?1:_t,_i._windowTime=1>Vt?1:Vt,Vt===Number.POSITIVE_INFINITY?(_i._infiniteTimeWindow=!0,_i.next=_i.nextInfiniteTimeWindow):_i.next=_i.nextTimeWindow,_i}return O(_e,$),_e.prototype.nextInfiniteTimeWindow=function(_t){if(!this.isStopped){var Vt=this._events;Vt.push(_t),Vt.length>this._bufferSize&&Vt.shift()}$.prototype.next.call(this,_t)},_e.prototype.nextTimeWindow=function(_t){this.isStopped||(this._events.push(new jz(this._getNow(),_t)),this._trimBufferThenGetEvents()),$.prototype.next.call(this,_t)},_e.prototype._subscribe=function(_t){var Vt=this._infiniteTimeWindow,Wt=Vt?this._events:this._trimBufferThenGetEvents(),_i=this.scheduler,_s=Wt.length;if(this.closed)throw new qd;if(this.isStopped||this.hasError)var _c=Oa.EMPTY;else this.observers.push(_t),_c=new zq(this,_t);if(_i&&_t.add(_t=new Dq(_t,_i)),Vt)for(Vt=0;Vt<_s&&!_t.closed;Vt++)_t.next(Wt[Vt]);else for(Vt=0;Vt<_s&&!_t.closed;Vt++)_t.next(Wt[Vt].value);return this.hasError?_t.error(this.thrownError):this.isStopped&&_t.complete(),_c},_e.prototype._getNow=function(){return(this.scheduler||fg).now()},_e.prototype._trimBufferThenGetEvents=function(){for(var _t=this._getNow(),Vt=this._bufferSize,Wt=this._windowTime,_i=this._events,_s=_i.length,_c=0;_c<_s&&!(_t-_i[_c].time<Wt);)_c++;return _s>Vt&&(_c=Math.max(_c,_s-Vt)),0<_c&&_i.splice(0,_c),_i},_e}(Pa),jz=function($,_e){this.time=$,this.value=_e},of=function($){function _e(){var _t=$!==null&&$.apply(this,arguments)||this;return _t.value=null,_t.hasNext=!1,_t.hasCompleted=!1,_t}return O(_e,$),_e.prototype._subscribe=function(_t){return this.hasError?(_t.error(this.thrownError),Oa.EMPTY):this.hasCompleted&&this.hasNext?(_t.next(this.value),_t.complete(),Oa.EMPTY):$.prototype._subscribe.call(this,_t)},_e.prototype.next=function(_t){this.hasCompleted||(this.value=_t,this.hasNext=!0)},_e.prototype.error=function(_t){this.hasCompleted||$.prototype.error.call(this,_t)},_e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&$.prototype.next.call(this,this.value),$.prototype.complete.call(this)},_e}(Pa),kz=1,lz=Promise.resolve(),ii={},Eq={setImmediate:function($){var _e=kz++;return ii[_e]=!0,lz.then(function(){return bm(_e)&&$()}),_e},clearImmediate:function($){bm($)}},mz=function($){function _e(_t,Vt){var Wt=$.call(this,_t,Vt)||this;return Wt.scheduler=_t,Wt.work=Vt,Wt}return O(_e,$),_e.prototype.requestAsyncId=function(_t,Vt,Wt){return Wt===void 0&&(Wt=0),Wt!==null&&0<Wt?$.prototype.requestAsyncId.call(this,_t,Vt,Wt):(_t.actions.push(this),_t.scheduled||(_t.scheduled=Eq.setImmediate(_t.flush.bind(_t,null))))},_e.prototype.recycleAsyncId=function(_t,Vt,Wt){if(Wt===void 0&&(Wt=0),Wt!==null&&0<Wt||Wt===null&&0<this.delay)return $.prototype.recycleAsyncId.call(this,_t,Vt,Wt);_t.actions.length===0&&(Eq.clearImmediate(Vt),_t.scheduled=void 0)},_e}(dg),ri=new(function($){function _e(){return $!==null&&$.apply(this,arguments)||this}return O(_e,$),_e.prototype.flush=function(_t){this.active=!0,this.scheduled=void 0;var Vt,Wt=this.actions,_i=-1,_s=Wt.length;_t=_t||Wt.shift();do if(Vt=_t.execute(_t.state,_t.delay))break;while(++_i<_s&&(_t=Wt.shift()));if(this.active=!1,Vt){for(;++_i<_s&&(_t=Wt.shift());)_t.unsubscribe();throw Vt}},_e}(eg))(mz),nz=ri,Pk=new eg(dg),bd=Pk,oz=function($){function _e(_t,Vt){var Wt=$.call(this,_t,Vt)||this;return Wt.scheduler=_t,Wt.work=Vt,Wt}return O(_e,$),_e.prototype.requestAsyncId=function(_t,Vt,Wt){return Wt===void 0&&(Wt=0),Wt!==null&&0<Wt?$.prototype.requestAsyncId.call(this,_t,Vt,Wt):(_t.actions.push(this),_t.scheduled||(_t.scheduled=requestAnimationFrame(function(){return _t.flush(null)})))},_e.prototype.recycleAsyncId=function(_t,Vt,Wt){if(Wt===void 0&&(Wt=0),Wt!==null&&0<Wt||Wt===null&&0<this.delay)return $.prototype.recycleAsyncId.call(this,_t,Vt,Wt);_t.actions.length===0&&(cancelAnimationFrame(Vt),_t.scheduled=void 0)},_e}(dg),Fq=new(function($){function _e(){return $!==null&&$.apply(this,arguments)||this}return O(_e,$),_e.prototype.flush=function(_t){this.active=!0,this.scheduled=void 0;var Vt,Wt=this.actions,_i=-1,_s=Wt.length;_t=_t||Wt.shift();do if(Vt=_t.execute(_t.state,_t.delay))break;while(++_i<_s&&(_t=Wt.shift()));if(this.active=!1,Vt){for(;++_i<_s&&(_t=Wt.shift());)_t.unsubscribe();throw Vt}},_e}(eg))(oz),pz=function($){function _e(_t,Vt){_t===void 0&&(_t=Gq),Vt===void 0&&(Vt=Number.POSITIVE_INFINITY);var Wt=$.call(this,_t,function(){return Wt.frame})||this;return Wt.maxFrames=Vt,Wt.frame=0,Wt.index=-1,Wt}return O(_e,$),_e.prototype.flush=function(){for(var _t,Vt,Wt=this.actions,_i=this.maxFrames;(Vt=Wt[0])&&Vt.delay<=_i&&(Wt.shift(),this.frame=Vt.delay,!(_t=Vt.execute(Vt.state,Vt.delay))););if(_t){for(;Vt=Wt.shift();)Vt.unsubscribe();throw _t}},_e.frameTimeFactor=10,_e}(eg),Gq=function($){function _e(_t,Vt,Wt){Wt===void 0&&(Wt=_t.index+=1);var _i=$.call(this,_t,Vt)||this;return _i.scheduler=_t,_i.work=Vt,_i.index=Wt,_i.active=!0,_i.index=_t.index=Wt,_i}return O(_e,$),_e.prototype.schedule=function(_t,Vt){if(Vt===void 0&&(Vt=0),!this.id)return $.prototype.schedule.call(this,_t,Vt);this.active=!1;var Wt=new _e(this.scheduler,this.work);return this.add(Wt),Wt.schedule(_t,Vt)},_e.prototype.requestAsyncId=function(_t,Vt,Wt){return Wt===void 0&&(Wt=0),this.delay=_t.frame+Wt,(_t=_t.actions).push(this),_t.sort(_e.sortActions),!0},_e.prototype.recycleAsyncId=function(_t,Vt,Wt){},_e.prototype._execute=function(_t,Vt){if(this.active===!0)return $.prototype._execute.call(this,_t,Vt)},_e.sortActions=function(_t,Vt){return _t.delay===Vt.delay?_t.index===Vt.index?0:_t.index>Vt.index?1:-1:_t.delay>Vt.delay?1:-1},_e}(dg),Qk=function(){function $(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return $.prototype=Object.create(Error.prototype),$}(),vg=function(){function $(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return $.prototype=Object.create(Error.prototype),$}(),pb=function(){function $(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return $.prototype=Object.create(Error.prototype),$}(),Ss=function(){function $(_e,_t){this.project=_e,this.thisArg=_t}return $.prototype.call=function(_e,_t){return _t.subscribe(new qz(_e,this.project,this.thisArg))},$}(),qz=function($){function _e(_t,Vt,Wt){return(_t=$.call(this,_t)||this).project=Vt,_t.count=0,_t.thisArg=Wt||_t,_t}return O(_e,$),_e.prototype._next=function(_t){try{var Vt=this.project.call(this.thisArg,_t,this.count++)}catch(Wt){return void this.destination.error(Wt)}this.destination.next(Vt)},_e}(ia),Rk=function($){function _e(){return $!==null&&$.apply(this,arguments)||this}return O(_e,$),_e.prototype.notifyNext=function(_t,Vt,Wt,_i,_s){this.destination.next(Vt)},_e.prototype.notifyError=function(_t,Vt){this.destination.error(_t)},_e.prototype.notifyComplete=function(_t){this.destination.complete()},_e}(ia),Xs=function($){function _e(_t,Vt,Wt){var _i=$.call(this)||this;return _i.parent=_t,_i.outerValue=Vt,_i.outerIndex=Wt,_i.index=0,_i}return O(_e,$),_e.prototype._next=function(_t){this.parent.notifyNext(this.outerValue,_t,this.outerIndex,this.index++,this)},_e.prototype._error=function(_t){this.parent.notifyError(_t,this),this.unsubscribe()},_e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},_e}(ia),rz=function($){return function(_e){return $.then(function(_t){_e.closed||(_e.next(_t),_e.complete())},function(_t){return _e.error(_t)}).then(null,me),_e}},$c=typeof Symbol=="function"&&Symbol.iterator?Symbol.iterator:"@@iterator",sz=function($){return function(_e){for(var _t=$[$c]();;){var Vt=void 0;try{Vt=_t.next()}catch(Wt){return _e.error(Wt),_e}if(Vt.done){_e.complete();break}if(_e.next(Vt.value),_e.closed)break}return typeof _t.return=="function"&&_e.add(function(){_t.return&&_t.return()}),_e}},tz=function($){return function(_e){var _t=$[ne]();if(typeof _t.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return _t.subscribe(_e)}},hm=function($){return $&&typeof $.length=="number"&&typeof $!="function"},pf=function($){if($&&typeof $[ne]=="function")return tz($);if(hm($))return am($);if(fm($))return rz($);if($&&typeof $[$c]=="function")return sz($);throw $=ei($)?"an invalid object":"'"+$+"'",new TypeError("You provided "+$+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")},Hq={},vz=function(){function $(_e){this.resultSelector=_e}return $.prototype.call=function(_e,_t){return _t.subscribe(new uz(_e,this.resultSelector))},$}(),uz=function($){function _e(_t,Vt){return(_t=$.call(this,_t)||this).resultSelector=Vt,_t.active=0,_t.values=[],_t.observables=[],_t}return O(_e,$),_e.prototype._next=function(_t){this.values.push(Hq),this.observables.push(_t)},_e.prototype._complete=function(){var _t=this.observables,Vt=_t.length;if(Vt===0)this.destination.complete();else{this.toRespond=this.active=Vt;for(var Wt=0;Wt<Vt;Wt++)this.add(ji(this,_t[Wt],void 0,Wt))}},_e.prototype.notifyComplete=function(_t){--this.active==0&&this.destination.complete()},_e.prototype.notifyNext=function(_t,Vt,Wt){var _i=(_t=this.values)[Wt];_i=this.toRespond?_i===Hq?--this.toRespond:this.toRespond:0,_t[Wt]=Vt,_i===0&&(this.resultSelector?this._tryResultSelector(_t):this.destination.next(_t.slice()))},_e.prototype._tryResultSelector=function(_t){try{var Vt=this.resultSelector.apply(this,_t)}catch(Wt){return void this.destination.error(Wt)}this.destination.next(Vt)},_e}(Rk),vc=function($){function _e(_t){var Vt=$.call(this)||this;return Vt.parent=_t,Vt}return O(_e,$),_e.prototype._next=function(_t){this.parent.notifyNext(_t)},_e.prototype._error=function(_t){this.parent.notifyError(_t),this.unsubscribe()},_e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},_e}(ia);(function($){function _e(_t,Vt,Wt){var _i=$.call(this)||this;return _i.parent=_t,_i.outerValue=Vt,_i.outerIndex=Wt,_i}O(_e,$),_e.prototype._next=function(_t){this.parent.notifyNext(this.outerValue,_t,this.outerIndex,this)},_e.prototype._error=function(_t){this.parent.notifyError(_t),this.unsubscribe()},_e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()}})(ia);var wc=function($){function _e(){return $!==null&&$.apply(this,arguments)||this}return O(_e,$),_e.prototype.notifyNext=function(_t){this.destination.next(_t)},_e.prototype.notifyError=function(_t){this.destination.error(_t)},_e.prototype.notifyComplete=function(){this.destination.complete()},_e}(ia);(function($){function _e(){return $!==null&&$.apply(this,arguments)||this}O(_e,$),_e.prototype.notifyNext=function(_t,Vt,Wt,_i){this.destination.next(Vt)},_e.prototype.notifyError=function(_t){this.destination.error(_t)},_e.prototype.notifyComplete=function(_t){this.destination.complete()}})(ia);var at=function(){function $(_e,_t){_t===void 0&&(_t=Number.POSITIVE_INFINITY),this.project=_e,this.concurrent=_t}return $.prototype.call=function(_e,_t){return _t.subscribe(new wz(_e,this.project,this.concurrent))},$}(),wz=function($){function _e(_t,Vt,Wt){return Wt===void 0&&(Wt=Number.POSITIVE_INFINITY),(_t=$.call(this,_t)||this).project=Vt,_t.concurrent=Wt,_t.hasCompleted=!1,_t.buffer=[],_t.active=0,_t.index=0,_t}return O(_e,$),_e.prototype._next=function(_t){this.active<this.concurrent?this._tryNext(_t):this.buffer.push(_t)},_e.prototype._tryNext=function(_t){var Vt=this.index++;try{var Wt=this.project(_t,Vt)}catch(_i){return void this.destination.error(_i)}this.active++,this._innerSub(Wt)},_e.prototype._innerSub=function(_t){var Vt=new vc(this),Wt=this.destination;Wt.add(Vt),(_t=ic(_t,Vt))!==Vt&&Wt.add(_t)},_e.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},_e.prototype.notifyNext=function(_t){this.destination.next(_t)},_e.prototype.notifyComplete=function(){var _t=this.buffer;this.active--,0<_t.length?this._next(_t.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},_e}(wc),Sk=y.parseFloat,Iq=-1/0!=1/Sk(`	
\v\f\r \u2028\u2029\uFEFF-0`)?function($){$=ik(String($));var _e=Sk($);return _e===0&&$.charAt(0)=="-"?-0:_e}:Sk;N({global:!0,forced:parseFloat!=Iq},{parseFloat:Iq});var Tk=new Y(hc),ft=function(){function $(_e,_t){this.predicate=_e,this.thisArg=_t}return $.prototype.call=function(_e,_t){return _t.subscribe(new xz(_e,this.predicate,this.thisArg))},$}(),xz=function($){function _e(_t,Vt,Wt){return(_t=$.call(this,_t)||this).predicate=Vt,_t.thisArg=Wt,_t.count=0,_t}return O(_e,$),_e.prototype._next=function(_t){try{var Vt=this.predicate.call(this.thisArg,_t,this.count++)}catch(Wt){return void this.destination.error(Wt)}Vt&&this.destination.next(_t)},_e}(ia),gt=function(){function $(){}return $.prototype.call=function(_e,_t){return _t.subscribe(new yz(_e))},$}(),yz=function($){function _e(_t){return(_t=$.call(this,_t)||this).hasFirst=!1,_t.observables=[],_t.subscriptions=[],_t}return O(_e,$),_e.prototype._next=function(_t){this.observables.push(_t)},_e.prototype._complete=function(){var _t=this.observables,Vt=_t.length;if(Vt===0)this.destination.complete();else{for(var Wt=0;Wt<Vt&&!this.hasFirst;Wt++){var _i=ji(this,_t[Wt],void 0,Wt);this.subscriptions&&this.subscriptions.push(_i),this.add(_i)}this.observables=null}},_e.prototype.notifyNext=function(_t,Vt,Wt){if(!this.hasFirst){for(this.hasFirst=!0,_t=0;_t<this.subscriptions.length;_t++)if(_t!==Wt){var _i=this.subscriptions[_t];_i.unsubscribe(),this.remove(_i)}this.subscriptions=null}this.destination.next(Vt)},_e}(Rk),jt=function(){function $(_e){this.resultSelector=_e}return $.prototype.call=function(_e,_t){return _t.subscribe(new zz(_e,this.resultSelector))},$}(),zz=function($){function _e(_t,Vt,Wt){return(_t=$.call(this,_t)||this).resultSelector=Vt,_t.iterators=[],_t.active=0,_t.resultSelector=typeof Vt=="function"?Vt:void 0,_t}return O(_e,$),_e.prototype._next=function(_t){var Vt=this.iterators;Jb(_t)?Vt.push(new Az(_t)):typeof _t[$c]=="function"?Vt.push(new Bz(_t[$c]())):Vt.push(new Cz(this.destination,this,_t))},_e.prototype._complete=function(){var _t=this.iterators,Vt=_t.length;if(this.unsubscribe(),Vt===0)this.destination.complete();else{this.active=Vt;for(var Wt=0;Wt<Vt;Wt++){var _i=_t[Wt];_i.stillUnsubscribed?this.destination.add(_i.subscribe()):this.active--}}},_e.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},_e.prototype.checkIterators=function(){for(var _t=this.iterators,Vt=_t.length,Wt=this.destination,_i=0;_i<Vt;_i++){var _s=_t[_i];if(typeof _s.hasValue=="function"&&!_s.hasValue())return}var _c=!1,_l=[];for(_i=0;_i<Vt;_i++){var _d=(_s=_t[_i]).next();if(_s.hasCompleted()&&(_c=!0),_d.done)return void Wt.complete();_l.push(_d.value)}this.resultSelector?this._tryresultSelector(_l):Wt.next(_l),_c&&Wt.complete()},_e.prototype._tryresultSelector=function(_t){try{var Vt=this.resultSelector.apply(this,_t)}catch(Wt){return void this.destination.error(Wt)}this.destination.next(Vt)},_e}(ia),Bz=function(){function $(_e){this.iterator=_e,this.nextResult=_e.next()}return $.prototype.hasValue=function(){return!0},$.prototype.next=function(){var _e=this.nextResult;return this.nextResult=this.iterator.next(),_e},$.prototype.hasCompleted=function(){var _e=this.nextResult;return!(!_e||!_e.done)},$}(),Az=function(){function $(_e){this.array=_e,this.length=this.index=0,this.length=_e.length}return $.prototype[$c]=function(){return this},$.prototype.next=function(_e){_e=this.index++;var _t=this.array;return _e<this.length?{value:_t[_e],done:!1}:{value:null,done:!0}},$.prototype.hasValue=function(){return this.array.length>this.index},$.prototype.hasCompleted=function(){return this.array.length===this.index},$}(),Cz=function($){function _e(_t,Vt,Wt){return(_t=$.call(this,_t)||this).parent=Vt,_t.observable=Wt,_t.stillUnsubscribed=!0,_t.buffer=[],_t.isComplete=!1,_t}return O(_e,$),_e.prototype[$c]=function(){return this},_e.prototype.next=function(){var _t=this.buffer;return _t.length===0&&this.isComplete?{value:null,done:!0}:{value:_t.shift(),done:!1}},_e.prototype.hasValue=function(){return 0<this.buffer.length},_e.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},_e.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},_e.prototype.notifyNext=function(_t){this.buffer.push(_t),this.parent.checkIterators()},_e.prototype.subscribe=function(){return ic(this.observable,new vc(this))},_e}(wc),Dz=Object.freeze({__proto__:null,Observable:Y,ConnectableObservable:Cq,GroupedObservable:Mk,observable:ne,Subject:Pa,BehaviorSubject:gz,ReplaySubject:qe,AsyncSubject:of,asap:nz,asapScheduler:ri,async:bd,asyncScheduler:Pk,queue:fg,queueScheduler:fg,animationFrame:Fq,animationFrameScheduler:Fq,VirtualTimeScheduler:pz,VirtualAction:Gq,Scheduler:Nk,Subscription:Oa,Subscriber:ia,Notification:Ve,get NotificationKind(){return Ok},pipe:gi,noop:hc,identity:Yc,isObservable:function($){return!!$&&($ instanceof Y||typeof $.lift=="function"&&typeof $.subscribe=="function")},ArgumentOutOfRangeError:Qk,EmptyError:vg,ObjectUnsubscribedError:qd,UnsubscriptionError:lf,TimeoutError:pb,bindCallback:cm,bindNodeCallback:dm,combineLatest:function(){for(var $=[],_e=0;_e<arguments.length;_e++)$[_e]=arguments[_e];var _t=_e=void 0;return Zc($[$.length-1])&&(_t=$.pop()),typeof $[$.length-1]=="function"&&(_e=$.pop()),$.length===1&&Jb($[0])&&($=$[0]),nf($,_t).lift(new vz(_e))},concat:im,defer:ad,empty:mf,forkJoin:jm,from:Kb,fromEvent:gb,fromEventPattern:lm,generate:function($,_e,_t,Vt,Wt){if(arguments.length==1){var _i=$.initialState;_e=$.condition,_t=$.iterate;var _s=$.resultSelector||Yc;Wt=$.scheduler}else Vt===void 0||Zc(Vt)?(_i=$,_s=Yc,Wt=Vt):(_i=$,_s=Vt);return new Y(function(_c){var _l=_i;if(Wt)return Wt.schedule(bt,0,{subscriber:_c,iterate:_t,condition:_e,resultSelector:_s,state:_l});for(;;){if(_e){var _d=void 0;try{_d=_e(_l)}catch(_m){_c.error(_m);break}if(!_d){_c.complete();break}}_d=void 0;try{_d=_s(_l)}catch(_m){_c.error(_m);break}if(_c.next(_d),_c.closed)break;try{_l=_t(_l)}catch(_m){_c.error(_m);break}}})},iif:function($,_e,_t){return _e===void 0&&(_e=vb),_t===void 0&&(_t=vb),ad(function(){return $()?_e:_t})},interval:mm,merge:Xb,never:function(){return Tk},of:bb,onErrorResumeNext:li,pairs:function($,_e){return new Y(_e?function(_t){var Vt=Object.keys($),Wt=new Oa;return Wt.add(_e.schedule(dt,0,{keys:Vt,index:0,subscriber:_t,subscription:Wt,obj:$})),Wt}:function(_t){for(var Vt=Object.keys($),Wt=0;Wt<Vt.length&&!_t.closed;Wt++){var _i=Vt[Wt];$.hasOwnProperty(_i)&&_t.next([_i,$[_i]])}_t.complete()})},partition:function($,_e,_t){return[wb(_e,_t)(new Y(pf($))),wb(et(_e,_t))(new Y(pf($)))]},race:Ca,range:function($,_e,_t){return $===void 0&&($=0),new Y(function(Vt){_e===void 0&&(_e=$,$=0);var Wt=0,_i=$;if(_t)return _t.schedule(ht,0,{index:Wt,count:_e,start:$,subscriber:Vt});for(;;){if(Wt++>=_e){Vt.complete();break}if(Vt.next(_i++),Vt.closed)break}})},throwError:Z,timer:Bc,using:function($,_e){return new Y(function(_t){try{var Vt=$()}catch(_s){return void _t.error(_s)}try{var Wt=_e(Vt)}catch(_s){return void _t.error(_s)}var _i=(Wt?Kb(Wt):vb).subscribe(_t);return function(){_i.unsubscribe(),Vt&&Vt.unsubscribe()}})},zip:mi,scheduled:gm,EMPTY:vb,NEVER:Tk,config:Ib}),kt=function(){function $(_e){this.selector=_e}return $.prototype.call=function(_e,_t){return _t.subscribe(new Ez(_e,this.selector,this.caught))},$}(),Ez=function($){function _e(_t,Vt,Wt){return(_t=$.call(this,_t)||this).selector=Vt,_t.caught=Wt,_t}return O(_e,$),_e.prototype.error=function(_t){if(!this.isStopped){var Vt=void 0;try{Vt=this.selector(_t,this.caught)}catch(Wt){return void $.prototype.error.call(this,Wt)}this._unsubscribeAndRecycle(),_t=new vc(this),this.add(_t),(Vt=ic(Vt,_t))!==_t&&this.add(Vt)}},_e}(wc),lt=function(){function $(_e){this.defaultValue=_e}return $.prototype.call=function(_e,_t){return _t.subscribe(new Fz(_e,this.defaultValue))},$}(),Fz=function($){function _e(_t,Vt){return(_t=$.call(this,_t)||this).defaultValue=Vt,_t.isEmpty=!0,_t}return O(_e,$),_e.prototype._next=function(_t){this.isEmpty=!1,this.destination.next(_t)},_e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},_e}(ia),mt=function(){function $(_e,_t){this.delay=_e,this.scheduler=_t}return $.prototype.call=function(_e,_t){return _t.subscribe(new Gz(_e,this.delay,this.scheduler))},$}(),Gz=function($){function _e(_t,Vt,Wt){return(_t=$.call(this,_t)||this).delay=Vt,_t.scheduler=Wt,_t.queue=[],_t.active=!1,_t.errored=!1,_t}return O(_e,$),_e.dispatch=function(_t){for(var Vt=_t.source,Wt=Vt.queue,_i=_t.scheduler,_s=_t.destination;0<Wt.length&&0>=Wt[0].time-_i.now();)Wt.shift().notification.observe(_s);0<Wt.length?(Vt=Math.max(0,Wt[0].time-_i.now()),this.schedule(_t,Vt)):(this.unsubscribe(),Vt.active=!1)},_e.prototype._schedule=function(_t){this.active=!0,this.destination.add(_t.schedule(_e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:_t}))},_e.prototype.scheduleNotification=function(_t){if(this.errored!==!0){var Vt=this.scheduler;_t=new Hz(Vt.now()+this.delay,_t),this.queue.push(_t),this.active===!1&&this._schedule(Vt)}},_e.prototype._next=function(_t){this.scheduleNotification(Ve.createNext(_t))},_e.prototype._error=function(_t){this.errored=!0,this.queue=[],this.destination.error(_t),this.unsubscribe()},_e.prototype._complete=function(){this.scheduleNotification(Ve.createComplete()),this.unsubscribe()},_e}(ia),Hz=function($,_e){this.time=$,this.notification=_e},nt=function(){function $(_e,_t){this.keySelector=_e,this.flushes=_t}return $.prototype.call=function(_e,_t){return _t.subscribe(new Iz(_e,this.keySelector,this.flushes))},$}(),Iz=function($){function _e(_t,Vt,Wt){return(_t=$.call(this,_t)||this).keySelector=Vt,_t.values=new Set,Wt&&_t.add(ic(Wt,new vc(_t))),_t}return O(_e,$),_e.prototype.notifyNext=function(){this.values.clear()},_e.prototype.notifyError=function(_t){this._error(_t)},_e.prototype._next=function(_t){this.keySelector?this._useKeySelector(_t):this._finalizeNext(_t,_t)},_e.prototype._useKeySelector=function(_t){var Vt=this.destination;try{var Wt=this.keySelector(_t)}catch(_i){return void Vt.error(_i)}this._finalizeNext(Wt,_t)},_e.prototype._finalizeNext=function(_t,Vt){var Wt=this.values;Wt.has(_t)||(Wt.add(_t),this.destination.next(Vt))},_e}(wc),pt=function(){function $(_e){this.errorFactory=_e}return $.prototype.call=function(_e,_t){return _t.subscribe(new Jz(_e,this.errorFactory))},$}(),Jz=function($){function _e(_t,Vt){return(_t=$.call(this,_t)||this).errorFactory=Vt,_t.hasValue=!1,_t}return O(_e,$),_e.prototype._next=function(_t){this.hasValue=!0,this.destination.next(_t)},_e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var _t=void 0;try{_t=this.errorFactory()}catch(Vt){_t=Vt}this.destination.error(_t)},_e}(ia),qt=function(){function $(_e){if(this.total=_e,0>this.total)throw new Qk}return $.prototype.call=function(_e,_t){return _t.subscribe(new Kz(_e,this.total))},$}(),Kz=function($){function _e(_t,Vt){return(_t=$.call(this,_t)||this).total=Vt,_t.count=0,_t}return O(_e,$),_e.prototype._next=function(_t){var Vt=this.total,Wt=++this.count;Wt<=Vt&&(this.destination.next(_t),Wt===Vt&&(this.destination.complete(),this.unsubscribe()))},_e}(ia),rt=function(){function $(_e){this.project=_e}return $.prototype.call=function(_e,_t){return _t.subscribe(new Lz(_e,this.project))},$}(),Lz=function($){function _e(_t,Vt){return(_t=$.call(this,_t)||this).project=Vt,_t.hasSubscription=!1,_t.hasCompleted=!1,_t.index=0,_t}return O(_e,$),_e.prototype._next=function(_t){this.hasSubscription||this.tryNext(_t)},_e.prototype.tryNext=function(_t){var Vt=this.index++;try{var Wt=this.project(_t,Vt)}catch(_i){return void this.destination.error(_i)}this.hasSubscription=!0,this._innerSub(Wt)},_e.prototype._innerSub=function(_t){var Vt=new vc(this),Wt=this.destination;Wt.add(Vt),(_t=ic(_t,Vt))!==Vt&&Wt.add(_t)},_e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},_e.prototype.notifyNext=function(_t){this.destination.next(_t)},_e.prototype.notifyError=function(_t){this.destination.error(_t)},_e.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},_e}(wc),st=function(){function $(_e){this.callback=_e}return $.prototype.call=function(_e,_t){return _t.subscribe(new Mz(_e,this.callback))},$}(),Mz=function($){function _e(_t,Vt){return(_t=$.call(this,_t)||this).add(new Oa(Vt)),_t}return O(_e,$),_e}(ia),ut=function(){function $(){}return $.prototype.call=function(_e,_t){return _t.subscribe(new Nz(_e))},$}(),Nz=function($){function _e(){return $!==null&&$.apply(this,arguments)||this}return O(_e,$),_e.prototype._next=function(_t){},_e}(ia),vt=function(){function $(_e){if(this.total=_e,0>this.total)throw new Qk}return $.prototype.call=function(_e,_t){return _t.subscribe(new Oz(_e,this.total))},$}(),Oz=function($){function _e(_t,Vt){return(_t=$.call(this,_t)||this).total=Vt,_t.ring=[],_t.count=0,_t}return O(_e,$),_e.prototype._next=function(_t){var Vt=this.ring,Wt=this.total,_i=this.count++;Vt.length<Wt?Vt.push(_t):Vt[_i%Wt]=_t},_e.prototype._complete=function(){var _t=this.destination,Vt=this.count;if(0<Vt)for(var Wt=this.count>=this.total?this.total:this.count,_i=this.ring,_s=0;_s<Wt;_s++){var _c=Vt++%Wt;_t.next(_i[_c])}_t.complete()},_e}(ia),wt=function(){function $(_e){this.value=_e}return $.prototype.call=function(_e,_t){return _t.subscribe(new Pz(_e,this.value))},$}(),Pz=function($){function _e(_t,Vt){return(_t=$.call(this,_t)||this).value=Vt,_t}return O(_e,$),_e.prototype._next=function(_t){this.destination.next(this.value)},_e}(ia),xt=function(){function $(_e,_t,Vt){Vt===void 0&&(Vt=!1),this.accumulator=_e,this.seed=_t,this.hasSeed=Vt}return $.prototype.call=function(_e,_t){return _t.subscribe(new Qz(_e,this.accumulator,this.seed,this.hasSeed))},$}(),Qz=function($){function _e(_t,Vt,Wt,_i){return(_t=$.call(this,_t)||this).accumulator=Vt,_t._seed=Wt,_t.hasSeed=_i,_t.index=0,_t}return O(_e,$),Object.defineProperty(_e.prototype,"seed",{get:function(){return this._seed},set:function(_t){this.hasSeed=!0,this._seed=_t},enumerable:!0,configurable:!0}),_e.prototype._next=function(_t){if(this.hasSeed)return this._tryNext(_t);this.seed=_t,this.destination.next(_t)},_e.prototype._tryNext=function(_t){var Vt=this.index++;try{var Wt=this.accumulator(this.seed,_t,Vt)}catch(_i){this.destination.error(_i)}this.seed=Wt,this.destination.next(Wt)},_e}(ia),zt=function(){function $(_e,_t){this.subjectFactory=_e,this.selector=_t}return $.prototype.call=function(_e,_t){var Vt=this.selector,Wt=this.subjectFactory();return(_e=Vt(Wt).subscribe(_e)).add(_t.subscribe(Wt)),_e},$}(),Bt=function(){function $(_e,_t){this.notifier=_e,this.source=_t}return $.prototype.call=function(_e,_t){return _t.subscribe(new Rz(_e,this.notifier,this.source))},$}(),Rz=function($){function _e(_t,Vt,Wt){return(_t=$.call(this,_t)||this).notifier=Vt,_t.source=Wt,_t}return O(_e,$),_e.prototype.error=function(_t){if(!this.isStopped){var Vt=this.errors,Wt=this.retries,_i=this.retriesSubscription;if(Wt)this.retriesSubscription=this.errors=void 0;else{Vt=new Pa;try{Wt=(0,this.notifier)(Vt)}catch(_s){return $.prototype.error.call(this,_s)}_i=ic(Wt,new vc(this))}this._unsubscribeAndRecycle(),this.errors=Vt,this.retries=Wt,this.retriesSubscription=_i,Vt.next(_t)}},_e.prototype._unsubscribe=function(){var _t=this.errors,Vt=this.retriesSubscription;_t&&(_t.unsubscribe(),this.errors=void 0),Vt&&(Vt.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},_e.prototype.notifyNext=function(){var _t=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=_t,this.source.subscribe(this)},_e}(wc),Et=function(){function $(_e){this.project=_e}return $.prototype.call=function(_e,_t){return _t.subscribe(new Sz(_e,this.project))},$}(),Sz=function($){function _e(_t,Vt){return(_t=$.call(this,_t)||this).project=Vt,_t.index=0,_t}return O(_e,$),_e.prototype._next=function(_t){var Vt=this.index++;try{var Wt=this.project(_t,Vt)}catch(_i){return void this.destination.error(_i)}this._innerSub(Wt)},_e.prototype._innerSub=function(_t){var Vt=this.innerSubscription;Vt&&Vt.unsubscribe(),Vt=new vc(this);var Wt=this.destination;Wt.add(Vt),this.innerSubscription=ic(_t,Vt),this.innerSubscription!==Vt&&Wt.add(this.innerSubscription)},_e.prototype._complete=function(){var _t=this.innerSubscription;_t&&!_t.closed||$.prototype._complete.call(this),this.unsubscribe()},_e.prototype._unsubscribe=function(){this.innerSubscription=void 0},_e.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&$.prototype._complete.call(this)},_e.prototype.notifyNext=function(_t){this.destination.next(_t)},_e}(wc),Ft=function(){function $(_e){this.notifier=_e}return $.prototype.call=function(_e,_t){_e=new Tz(_e);var Vt=ic(this.notifier,new vc(_e));return Vt&&!_e.seenValue?(_e.add(Vt),_t.subscribe(_e)):_e},$}(),Tz=function($){function _e(_t){return(_t=$.call(this,_t)||this).seenValue=!1,_t}return O(_e,$),_e.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},_e.prototype.notifyComplete=function(){},_e}(wc),Ht=function(){function $(_e,_t){this.predicate=_e,this.inclusive=_t}return $.prototype.call=function(_e,_t){return _t.subscribe(new Uz(_e,this.predicate,this.inclusive))},$}(),Uz=function($){function _e(_t,Vt,Wt){return(_t=$.call(this,_t)||this).predicate=Vt,_t.inclusive=Wt,_t.index=0,_t}return O(_e,$),_e.prototype._next=function(_t){var Vt=this.destination;try{var Wt=this.predicate(_t,this.index++)}catch(_i){return void Vt.error(_i)}this.nextOrComplete(_t,Wt)},_e.prototype.nextOrComplete=function(_t,Vt){var Wt=this.destination;Vt?Wt.next(_t):(this.inclusive&&Wt.next(_t),Wt.complete())},_e}(ia),It=function(){function $(_e,_t,Vt){this.nextOrObserver=_e,this.error=_t,this.complete=Vt}return $.prototype.call=function(_e,_t){return _t.subscribe(new Vz(_e,this.nextOrObserver,this.error,this.complete))},$}(),Vz=function($){function _e(_t,Vt,Wt,_i){return(_t=$.call(this,_t)||this)._tapNext=hc,_t._tapError=hc,_t._tapComplete=hc,_t._tapError=Wt||hc,_t._tapComplete=_i||hc,le(Vt)?(_t._context=_t,_t._tapNext=Vt):Vt&&(_t._context=Vt,_t._tapNext=Vt.next||hc,_t._tapError=Vt.error||hc,_t._tapComplete=Vt.complete||hc),_t}return O(_e,$),_e.prototype._next=function(_t){try{this._tapNext.call(this._context,_t)}catch(Vt){return void this.destination.error(Vt)}this.destination.next(_t)},_e.prototype._error=function(_t){try{this._tapError.call(this._context,_t)}catch(Vt){return void this.destination.error(Vt)}this.destination.error(_t)},_e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(_t){return void this.destination.error(_t)}return this.destination.complete()},_e}(ia),Kt={leading:!0,trailing:!1};(function($){function _e(_t,Vt,Wt,_i){var _s=$.call(this,_t)||this;return _s.destination=_t,_s.durationSelector=Vt,_s._leading=Wt,_s._trailing=_i,_s._hasValue=!1,_s}O(_e,$),_e.prototype._next=function(_t){this._hasValue=!0,this._sendValue=_t,this._throttled||(this._leading?this.send():this.throttle(_t))},_e.prototype.send=function(){var _t=this._sendValue;this._hasValue&&(this.destination.next(_t),this.throttle(_t)),this._hasValue=!1,this._sendValue=void 0},_e.prototype.throttle=function(_t){(_t=this.tryDurationSelector(_t))&&this.add(this._throttled=ic(_t,new vc(this)))},_e.prototype.tryDurationSelector=function(_t){try{return this.durationSelector(_t)}catch(Vt){return this.destination.error(Vt),null}},_e.prototype.throttlingDone=function(){var _t=this._throttled,Vt=this._trailing;_t&&_t.unsubscribe(),this._throttled=void 0,Vt&&this.send()},_e.prototype.notifyNext=function(){this.throttlingDone()},_e.prototype.notifyComplete=function(){this.throttlingDone()}})(wc);for(var Lt=function(){function $(_e,_t,Vt,Wt){this.duration=_e,this.scheduler=_t,this.leading=Vt,this.trailing=Wt}return $.prototype.call=function(_e,_t){return _t.subscribe(new Wz(_e,this.duration,this.scheduler,this.leading,this.trailing))},$}(),Wz=function($){function _e(_t,Vt,Wt,_i,_s){return(_t=$.call(this,_t)||this).duration=Vt,_t.scheduler=Wt,_t.leading=_i,_t.trailing=_s,_t._hasTrailingValue=!1,_t._trailingValue=null,_t}return O(_e,$),_e.prototype._next=function(_t){this.throttled?this.trailing&&(this._trailingValue=_t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(Mt,this.duration,{subscriber:this})),this.leading?this.destination.next(_t):this.trailing&&(this._trailingValue=_t,this._hasTrailingValue=!0))},_e.prototype._complete=function(){this._hasTrailingValue&&this.destination.next(this._trailingValue),this.destination.complete()},_e.prototype.clearThrottle=function(){var _t=this.throttled;_t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),_t.unsubscribe(),this.remove(_t),this.throttled=null)},_e}(ia),Ot=function(){function $(_e,_t,Vt,Wt){this.waitFor=_e,this.absoluteTimeout=_t,this.withObservable=Vt,this.scheduler=Wt}return $.prototype.call=function(_e,_t){return _t.subscribe(new Xz(_e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},$}(),Xz=function($){function _e(_t,Vt,Wt,_i,_s){return(_t=$.call(this,_t)||this).absoluteTimeout=Vt,_t.waitFor=Wt,_t.withObservable=_i,_t.scheduler=_s,_t.scheduleTimeout(),_t}return O(_e,$),_e.dispatchTimeout=function(_t){var Vt=_t.withObservable;_t._unsubscribeAndRecycle(),_t.add(ic(Vt,new vc(_t)))},_e.prototype.scheduleTimeout=function(){var _t=this.action;_t?this.action=_t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(_e.dispatchTimeout,this.waitFor,this))},_e.prototype._next=function(_t){this.absoluteTimeout||this.scheduleTimeout(),$.prototype._next.call(this,_t)},_e.prototype._unsubscribe=function(){this.action=void 0,this.withObservable=this.scheduler=null},_e}(wc),Qt=function(){function $(_e,_t){this.observables=_e,this.project=_t}return $.prototype.call=function(_e,_t){return _t.subscribe(new Yz(_e,this.observables,this.project))},$}(),Yz=function($){function _e(_t,Vt,Wt){(_t=$.call(this,_t)||this).observables=Vt,_t.project=Wt,_t.toRespond=[],Wt=Vt.length,_t.values=Array(Wt);for(var _i=0;_i<Wt;_i++)_t.toRespond.push(_i);for(_i=0;_i<Wt;_i++)_t.add(ji(_t,Vt[_i],void 0,_i));return _t}return O(_e,$),_e.prototype.notifyNext=function(_t,Vt,Wt){this.values[Wt]=Vt,0<(_t=this.toRespond).length&&(Wt=_t.indexOf(Wt))!==-1&&_t.splice(Wt,1)},_e.prototype.notifyComplete=function(){},_e.prototype._next=function(_t){this.toRespond.length===0&&(_t=[_t].concat(this.values),this.project?this._tryProject(_t):this.destination.next(_t))},_e.prototype._tryProject=function(_t){try{var Vt=this.project.apply(this,_t)}catch(Wt){return void this.destination.error(Wt)}this.destination.next(Vt)},_e}(Rk),Jq=$a(function($){var _e=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(_e){var _t=new Uint8Array(16);$.exports=function(){return _e(_t),_t}}else{var Vt=Array(16);$.exports=function(){for(var Wt,_i=0;16>_i;_i++)!(3&_i)&&(Wt=4294967296*Math.random()),Vt[_i]=Wt>>>((3&_i)<<3)&255;return Vt}}}),ab=[],Gh=0;256>Gh;++Gh)ab[Gh]=(Gh+256).toString(16).substr(1);var Kq=function($,_e){return _e=_e||0,[ab[$[_e++]],ab[$[_e++]],ab[$[_e++]],ab[$[_e++]],"-",ab[$[_e++]],ab[$[_e++]],"-",ab[$[_e++]],ab[$[_e++]],"-",ab[$[_e++]],ab[$[_e++]],"-",ab[$[_e++]],ab[$[_e++]],ab[$[_e++]],ab[$[_e++]],ab[$[_e++]],ab[$[_e++]]].join("")},Ud=function($,_e,_t){if(_t=_e&&_t||0,typeof $=="string"&&(_e=$==="binary"?Array(16):null,$=null),($=($=$||{}).random||($.rng||Jq)())[6]=15&$[6]|64,$[8]=63&$[8]|128,_e)for(var Vt=0;16>Vt;++Vt)_e[_t+Vt]=$[Vt];return _e||Kq($)},gg=Ud(),Uk=!1,Pc,rd,Vk,Wk,sd,Vd,ec,We,Rb,Xk,Qc,Wd,Rc,Sc,Tc,Xe,Uc,Vc;(function($){$[$.ATTRIBUTE_OPERATION_ERR_FAILURE=2]="ATTRIBUTE_OPERATION_ERR_FAILURE",$[$.ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT=3]="ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT",$[$.ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW=4]="ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW",$[$.ATTRIBUTE_OPERATION_ERR_TOO_OFTEN=5]="ATTRIBUTE_OPERATION_ERR_TOO_OFTEN",$[$.ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND=6]="ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND",$[$.ATTRIBUTE_OPERATION_ERR_TIMEOUT=7]="ATTRIBUTE_OPERATION_ERR_TIMEOUT",$[$.ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN=102]="ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN"})(Pc||(Pc={})),function($){$[$.CHANNEL_MESSAGE_ERR_FAILURE=1]="CHANNEL_MESSAGE_ERR_FAILURE",$[$.CHANNEL_MESSAGE_ERR_TIMEOUT=2]="CHANNEL_MESSAGE_ERR_TIMEOUT",$[$.CHANNEL_MESSAGE_ERR_TOO_OFTEN=3]="CHANNEL_MESSAGE_ERR_TOO_OFTEN",$[$.CHANNEL_MESSAGE_ERR_INVALID_MESSAGE=4]="CHANNEL_MESSAGE_ERR_INVALID_MESSAGE",$[$.CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL=5]="CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL",$[$.CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN=102]="CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN"}(rd||(rd={})),function($){$[$.CREATE_CHANNEL_ERR_INVALID_ARGUMENT=1]="CREATE_CHANNEL_ERR_INVALID_ARGUMENT"}(Vk||(Vk={})),function($){$[$.CREATE_INSTANCE_ERR_INVALID_ARGUMENT=1]="CREATE_INSTANCE_ERR_INVALID_ARGUMENT"}(Wk||(Wk={})),function($){$[$.GET_MEMBERS_ERR_FAILURE=1]="GET_MEMBERS_ERR_FAILURE",$[$.GET_MEMBERS_ERR_REJECTED=2]="GET_MEMBERS_ERR_REJECTED",$[$.GET_MEMBERS_ERR_TIMEOUT=3]="GET_MEMBERS_ERR_TIMEOUT",$[$.GET_MEMBERS_ERR_TOO_OFTEN=4]="GET_MEMBERS_ERR_TOO_OFTEN",$[$.GET_MEMBERS_ERR_NOT_IN_CHANNEL=5]="GET_MEMBERS_ERR_NOT_IN_CHANNEL",$[$.GET_MEMBERS_ERR_USER_NOT_LOGGED_IN=102]="GET_MEMBERS_ERR_USER_NOT_LOGGED_IN"}(sd||(sd={})),function($){$[$.INVITATION_API_CALL_ERR_INVALID_ARGUMENT=1]="INVITATION_API_CALL_ERR_INVALID_ARGUMENT",$[$.INVITATION_API_CALL_ERR_NOT_STARTED=2]="INVITATION_API_CALL_ERR_NOT_STARTED",$[$.INVITATION_API_CALL_ERR_ALREADY_END=3]="INVITATION_API_CALL_ERR_ALREADY_END",$[$.INVITATION_API_CALL_ERR_ALREADY_ACCEPT=4]="INVITATION_API_CALL_ERR_ALREADY_ACCEPT",$[$.INVITATION_API_CALL_ERR_ALREADY_SENT=5]="INVITATION_API_CALL_ERR_ALREADY_SENT"}(Vd||(Vd={})),function($){$[$.JOIN_CHANNEL_ERR_FAILURE=1]="JOIN_CHANNEL_ERR_FAILURE",$[$.JOIN_CHANNEL_ERR_REJECTED=2]="JOIN_CHANNEL_ERR_REJECTED",$[$.JOIN_CHANNEL_ERR_INVALID_ARGUMENT=3]="JOIN_CHANNEL_ERR_INVALID_ARGUMENT",$[$.JOIN_CHANNEL_TIMEOUT=4]="JOIN_CHANNEL_TIMEOUT",$[$.JOIN_CHANNEL_ERR_EXCEED_LIMIT=5]="JOIN_CHANNEL_ERR_EXCEED_LIMIT",$[$.JOIN_CHANNEL_ERR_ALREADY_JOINED=6]="JOIN_CHANNEL_ERR_ALREADY_JOINED",$[$.JOIN_CHANNEL_ERR_TOO_OFTEN=7]="JOIN_CHANNEL_ERR_TOO_OFTEN",$[$.JOIN_CHANNEL_ERR_JOIN_SAME_CHANNEL_TOO_OFTEN=8]="JOIN_CHANNEL_ERR_JOIN_SAME_CHANNEL_TOO_OFTEN",$[$.JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN=102]="JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN",$[$.JOIN_CHANNEL_ERR_ABORTED_BY_LEAVE=201]="JOIN_CHANNEL_ERR_ABORTED_BY_LEAVE",$[$.JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID=202]="JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID"}(ec||(ec={})),function($){$[$.LEAVE_CHANNEL_ERR_FAILURE=1]="LEAVE_CHANNEL_ERR_FAILURE",$[$.LEAVE_CHANNEL_ERR_REJECTED=2]="LEAVE_CHANNEL_ERR_REJECTED",$[$.LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL=3]="LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL",$[$.LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN=102]="LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN"}(We||(We={})),function($){$[$.LOGIN_ERR_UNKNOWN=1]="LOGIN_ERR_UNKNOWN",$[$.LOGIN_ERR_REJECTED=2]="LOGIN_ERR_REJECTED",$[$.LOGIN_ERR_INVALID_ARGUMENT=3]="LOGIN_ERR_INVALID_ARGUMENT",$[$.LOGIN_ERR_INVALID_APP_ID=4]="LOGIN_ERR_INVALID_APP_ID",$[$.LOGIN_ERR_INVALID_TOKEN=5]="LOGIN_ERR_INVALID_TOKEN",$[$.LOGIN_ERR_TOKEN_EXPIRED=6]="LOGIN_ERR_TOKEN_EXPIRED",$[$.LOGIN_ERR_NOT_AUTHORIZED=7]="LOGIN_ERR_NOT_AUTHORIZED",$[$.LOGIN_ERR_ALREADY_LOGIN=8]="LOGIN_ERR_ALREADY_LOGIN",$[$.LOGIN_ERR_TIMEOUT=9]="LOGIN_ERR_TIMEOUT",$[$.LOGIN_ERR_TOO_OFTEN=10]="LOGIN_ERR_TOO_OFTEN",$[$.LOGIN_ERR_ABORTED_BY_LOGOUT=201]="LOGIN_ERR_ABORTED_BY_LOGOUT"}(Rb||(Rb={})),function($){$[$.LOGOUT_ERR_USER_NOT_LOGGED_IN=102]="LOGOUT_ERR_USER_NOT_LOGGED_IN"}(Xk||(Xk={})),function($){$[$.PEER_MESSAGE_ERR_FAILURE=1]="PEER_MESSAGE_ERR_FAILURE",$[$.PEER_MESSAGE_ERR_TIMEOUT=2]="PEER_MESSAGE_ERR_TIMEOUT",$[$.PEER_MESSAGE_ERR_TOO_OFTEN=5]="PEER_MESSAGE_ERR_TOO_OFTEN",$[$.PEER_MESSAGE_ERR_INVALID_USERID=6]="PEER_MESSAGE_ERR_INVALID_USERID",$[$.PEER_MESSAGE_ERR_INVALID_MESSAGE=7]="PEER_MESSAGE_ERR_INVALID_MESSAGE",$[$.PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE=8]="PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE",$[$.PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN=102]="PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN"}(Qc||(Qc={})),function($){$[$.QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT=2]="QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT",$[$.QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED=3]="QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED",$[$.QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT=4]="QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT",$[$.QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN=5]="QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN",$[$.QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN=102]="QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN"}(Wd||(Wd={})),function($){$[$.RENEW_TOKEN_ERR_FAILURE=1]="RENEW_TOKEN_ERR_FAILURE",$[$.RENEW_TOKEN_ERR_INVALID_ARGUMENT=2]="RENEW_TOKEN_ERR_INVALID_ARGUMENT",$[$.RENEW_TOKEN_ERR_REJECTED=3]="RENEW_TOKEN_ERR_REJECTED",$[$.RENEW_TOKEN_ERR_TOO_OFTEN=4]="RENEW_TOKEN_ERR_TOO_OFTEN",$[$.RENEW_TOKEN_ERR_TOKEN_EXPIRED=5]="RENEW_TOKEN_ERR_TOKEN_EXPIRED",$[$.RENEW_TOKEN_ERR_INVALID_TOKEN=6]="RENEW_TOKEN_ERR_INVALID_TOKEN",$[$.RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN=102]="RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN",$[$.RENEW_TOKEN_ERR_ABORTED_BY_LOGOUT=201]="RENEW_TOKEN_ERR_ABORTED_BY_LOGOUT"}(Rc||(Rc={})),function($){$[$.GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE=1]="GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE",$[$.GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT=2]="GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT",$[$.GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN=3]="GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN",$[$.GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT=4]="GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT",$[$.GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT=5]="GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT",$[$.GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED=101]="GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED",$[$.GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN=102]="GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN"}(Sc||(Sc={})),function($){$[$.PEER_SUBSCRIPTION_STATUS_ERR_FAILURE=1]="PEER_SUBSCRIPTION_STATUS_ERR_FAILURE",$[$.PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT=2]="PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT",$[$.PEER_SUBSCRIPTION_STATUS_ERR_REJECTED=3]="PEER_SUBSCRIPTION_STATUS_ERR_REJECTED",$[$.PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT=4]="PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT",$[$.PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN=5]="PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN",$[$.PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW=6]="PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW",$[$.PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN=102]="PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN"}(Tc||(Tc={})),function($){$[$.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE=1]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE",$[$.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT=2]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT",$[$.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN=3]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN",$[$.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN=102]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN"}(Xe||(Xe={})),function($){$[$.UPLOAD_MEDIA_ERR_FAILURE=1]="UPLOAD_MEDIA_ERR_FAILURE",$[$.UPLOAD_MEDIA_ERR_INVALID_ARGUMENT=2]="UPLOAD_MEDIA_ERR_INVALID_ARGUMENT",$[$.UPLOAD_MEDIA_ERR_TIMEOUT=3]="UPLOAD_MEDIA_ERR_TIMEOUT",$[$.UPLOAD_MEDIA_ERR_SIZE_OVERFLOW=4]="UPLOAD_MEDIA_ERR_SIZE_OVERFLOW",$[$.UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED=5]="UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED",$[$.UPLOAD_MEDIA_ERR_INTERRUPTED=6]="UPLOAD_MEDIA_ERR_INTERRUPTED",$[$.UPLOAD_MEDIA_ERR_NOT_LOGGED_IN=102]="UPLOAD_MEDIA_ERR_NOT_LOGGED_IN"}(Uc||(Uc={})),function($){$[$.DOWNLOAD_MEDIA_ERR_FAILURE=1]="DOWNLOAD_MEDIA_ERR_FAILURE",$[$.DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT=2]="DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT",$[$.DOWNLOAD_MEDIA_ERR_TIMEOUT=3]="DOWNLOAD_MEDIA_ERR_TIMEOUT",$[$.DOWNLOAD_MEDIA_ERR_NOT_EXIST=4]="DOWNLOAD_MEDIA_ERR_NOT_EXIST",$[$.DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED=5]="DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED",$[$.DOWNLOAD_MEDIA_ERR_INTERRUPTED=6]="DOWNLOAD_MEDIA_ERR_INTERRUPTED",$[$.DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN=102]="DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN"}(Vc||(Vc={}));var Sb=Pc.ATTRIBUTE_OPERATION_ERR_FAILURE,Ja=Pc.ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT,se=Pc.ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW;Pc.ATTRIBUTE_OPERATION_ERR_TOO_OFTEN;var Lq=Pc.ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND,Tb=Pc.ATTRIBUTE_OPERATION_ERR_TIMEOUT,Ub=Pc.ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN,hg=rd.CHANNEL_MESSAGE_ERR_FAILURE,Yk=rd.CHANNEL_MESSAGE_ERR_TIMEOUT,Mq=rd.CHANNEL_MESSAGE_ERR_TOO_OFTEN,Hh=rd.CHANNEL_MESSAGE_ERR_INVALID_MESSAGE;rd.CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL;var ig=rd.CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN,Zz=Vk.CREATE_CHANNEL_ERR_INVALID_ARGUMENT,Nq=Wk.CREATE_INSTANCE_ERR_INVALID_ARGUMENT;Sc.GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE;var Oq=Sc.GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT;Sc.GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN;var Pq=Sc.GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT,$z=Sc.GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT;Sc.GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED;var aA=Sc.GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN,bA=sd.GET_MEMBERS_ERR_FAILURE,cA=sd.GET_MEMBERS_ERR_REJECTED;sd.GET_MEMBERS_ERR_TIMEOUT,sd.GET_MEMBERS_ERR_TOO_OFTEN;var dA=sd.GET_MEMBERS_ERR_NOT_IN_CHANNEL,eA=sd.GET_MEMBERS_ERR_USER_NOT_LOGGED_IN,xc=Vd.INVITATION_API_CALL_ERR_INVALID_ARGUMENT,fA=Vd.INVITATION_API_CALL_ERR_NOT_STARTED,Ih=Vd.INVITATION_API_CALL_ERR_ALREADY_END,Qq=Vd.INVITATION_API_CALL_ERR_ALREADY_ACCEPT,gA=Vd.INVITATION_API_CALL_ERR_ALREADY_SENT,Rq=ec.JOIN_CHANNEL_ERR_FAILURE;ec.JOIN_CHANNEL_ERR_REJECTED;var hA=ec.JOIN_CHANNEL_ERR_INVALID_ARGUMENT,Sq=ec.JOIN_CHANNEL_TIMEOUT,Tq=ec.JOIN_CHANNEL_ERR_EXCEED_LIMIT,Uq=ec.JOIN_CHANNEL_ERR_ALREADY_JOINED;ec.JOIN_CHANNEL_ERR_TOO_OFTEN;var Vq=ec.JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN,Wq=ec.JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID,Xq=We.LEAVE_CHANNEL_ERR_FAILURE,Yq=We.LEAVE_CHANNEL_ERR_REJECTED,iA=We.LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL,jA=We.LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN,Zq=Rb.LOGIN_ERR_UNKNOWN,jg=Rb.LOGIN_ERR_REJECTED,Jh=Rb.LOGIN_ERR_INVALID_ARGUMENT,$q=Rb.LOGIN_ERR_INVALID_APP_ID,ar=Rb.LOGIN_ERR_INVALID_TOKEN,Kh=Rb.LOGIN_ERR_TOKEN_EXPIRED;Rb.LOGIN_ERR_NOT_AUTHORIZED;var kA=Rb.LOGIN_ERR_ALREADY_LOGIN,lA=Rb.LOGIN_ERR_TIMEOUT,mA=Rb.LOGIN_ERR_TOO_OFTEN,br=Xk.LOGOUT_ERR_USER_NOT_LOGGED_IN,cr=Qc.PEER_MESSAGE_ERR_FAILURE,Zk=Qc.PEER_MESSAGE_ERR_TIMEOUT,dr=Qc.PEER_MESSAGE_ERR_TOO_OFTEN,$k=Qc.PEER_MESSAGE_ERR_INVALID_USERID,ve=Qc.PEER_MESSAGE_ERR_INVALID_MESSAGE,al=Qc.PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN,nA=Qc.PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE,er=Wd.QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT;Wd.QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED;var oA=Wd.QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT;Wd.QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN;var pA=Wd.QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN,qA=Rc.RENEW_TOKEN_ERR_FAILURE,rA=Rc.RENEW_TOKEN_ERR_INVALID_ARGUMENT;Rc.RENEW_TOKEN_ERR_REJECTED,Rc.RENEW_TOKEN_ERR_TOO_OFTEN;var sA=Rc.RENEW_TOKEN_ERR_TOKEN_EXPIRED,tA=Rc.RENEW_TOKEN_ERR_INVALID_TOKEN,uA=Rc.RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN,fr=Tc.PEER_SUBSCRIPTION_STATUS_ERR_FAILURE,kg=Tc.PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT;Tc.PEER_SUBSCRIPTION_STATUS_ERR_REJECTED;var vA=Tc.PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT;Tc.PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN;var gr=Tc.PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW,bl=Tc.PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN;Xe.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE,Xe.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT,Xe.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN,Xe.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN;var lg=Uc.UPLOAD_MEDIA_ERR_FAILURE,wf=Uc.UPLOAD_MEDIA_ERR_INVALID_ARGUMENT,Lh=Uc.UPLOAD_MEDIA_ERR_TIMEOUT,wA=Uc.UPLOAD_MEDIA_ERR_SIZE_OVERFLOW,xA=Uc.UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED,hr=Uc.UPLOAD_MEDIA_ERR_INTERRUPTED,yA=Uc.UPLOAD_MEDIA_ERR_NOT_LOGGED_IN,mg=Vc.DOWNLOAD_MEDIA_ERR_FAILURE,cl=Vc.DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT,zA=Vc.DOWNLOAD_MEDIA_ERR_TIMEOUT,AA=Vc.DOWNLOAD_MEDIA_ERR_NOT_EXIST,BA=Vc.DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED,ir=Vc.DOWNLOAD_MEDIA_ERR_INTERRUPTED,CA=Vc.DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN,DA=function($,_e){var _t;return Hk($,function(Vt,Wt,_i){return!(_t=_e(Vt,Wt,_i))}),!!_t},Mh=function($,_e,_t){if(!lb(_t))return!1;var Vt=X(_e);return!!(Vt=="number"?Ed(_t)&&wk(_e,_t.length):Vt=="string"&&_e in _t)&&$f(_t[_e],$)},dl=function($,_e,_t){var Vt=Va($)?tq:DA;return _t&&Mh($,_e,_t)&&(_e=void 0),Vt($,Te(_e))},EA=function($,_e){var _t=-1,Vt=Ed($)?Array($.length):[];return Hk($,function(Wt,_i,_s){Vt[++_t]=_e(Wt,_i,_s)}),Vt},FA=function($,_e){var _t=$.length;for($.sort(_e);_t--;)$[_t]=$[_t].value;return $},GA=function($,_e,_t){_e=_e.length?he(_e,function(Wt){return Va(Wt)?function(_i){return Ch(_i,Wt.length===1?Wt[0]:Wt)}:Wt}):[Dh];var Vt=-1;return _e=he(_e,zh(Te)),$=EA($,function(Wt,_i,_s){return{criteria:he(_e,function(_c){return _c(Wt)}),index:++Vt,value:Wt}}),FA($,function(Wt,_i){e:{for(var _s=-1,_c=Wt.criteria,_l=_i.criteria,_d=_c.length,_m=_t.length;++_s<_d;){t:{var e_=_c[_s],t_=_l[_s];if(e_!==t_){var i_=e_!==void 0,c_=e_===null,h_=e_==e_,y_=ie(e_),l_=t_!==void 0,d_=t_===null,f_=t_==t_,S_=ie(t_);if(!d_&&!S_&&!y_&&e_>t_||y_&&l_&&f_&&!d_&&!S_||c_&&l_&&f_||!i_&&f_||!h_){e_=1;break t}if(!c_&&!y_&&!S_&&e_<t_||S_&&i_&&h_&&!c_&&!y_||d_&&i_&&h_||!l_&&h_||!f_){e_=-1;break t}}e_=0}if(e_){Wt=_s>=_m?e_:e_*(_t[_s]=="desc"?-1:1);break e}}Wt=Wt.index-_i.index}return Wt})},jr=function($,_e){return rq(qq($,_e,Dh),$+"")},kr=jr(function($,_e){if($==null)return[];var _t=_e.length;return 1<_t&&Mh($,_e[0],_e[1])?_e=[]:2<_t&&Mh(_e[0],_e[1],_e[2])&&(_e=[_e[0]]),GA($,$h(_e,1),[])}),lr=function($){if($.__esModule)return $;var _e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys($).forEach(function(_t){var Vt=Object.getOwnPropertyDescriptor($,_t);Object.defineProperty(_e,_t,Vt.get?Vt:{enumerable:!0,get:function(){return $[_t]}})}),_e}(Dz),mr=$a(function($,_e){Object.defineProperty(_e,"__esModule",{value:!0});var _t=[],Vt=function(Wt,_i){return new WebSocket(Wt,_i)};_e.normalClosureMessage="Normal closure",_e.default=function(Wt,_i){var _s=(_i=_i===void 0?{protocols:_t,makeWebSocket:Vt}:_i).protocols,_c=_s===void 0?_t:_s,_l=(_i=_i.makeWebSocket)===void 0?Vt:_i;return new lr.Observable(function(_d){var _m,e_=new lr.Subject,t_=_l(Wt,_c),i_=!1,c_=!1,h_=function(y_){if(_m)throw i_=!0,y_=Error("Web socket message factory function called more than once"),_d.error(y_),y_;return _m=y_.subscribe(function(l_){t_.send(l_)}),e_};return t_.onopen=function(){c_?(i_=!0,t_.close()):_d.next(h_)},t_.onmessage=function(y_){e_.next(y_.data)},t_.onerror=function(y_){i_=!0,_d.error(Error(y_.message))},t_.onclose=function(y_){i_||(i_=!0,c_?(_d.complete(),e_.complete()):_d.error(Error(y_.code===1e3?_e.normalClosureMessage:y_.reason)))},function(){c_=!0,_m&&_m.unsubscribe(),i_||(i_=!0,t_.close())}})}});(function($){$&&$.__esModule&&Object.prototype.hasOwnProperty.call($,"default")&&$.default})(mr);var pi=function($,_e,_t){(_t===void 0||$f($[_e],_t))&&(_t!==void 0||_e in $)||bg($,_e,_t)},oi=function($,_e){if((_e!=="constructor"||typeof $[_e]!="function")&&_e!="__proto__")return $[_e]},HA=function($){return jr(function(_e,_t){var Vt=-1,Wt=_t.length,_i=1<Wt?_t[Wt-1]:void 0,_s=2<Wt?_t[2]:void 0;for(_i=3<$.length&&typeof _i=="function"?(Wt--,_i):void 0,_s&&Mh(_t[0],_t[1],_s)&&(_i=3>Wt?void 0:_i,Wt=1),_e=Object(_e);++Vt<Wt;)(_s=_t[Vt])&&$(_e,_s,Vt,_i);return _e})}(function($,_e,_t,Vt){tm($,_e,_t,Vt)}),IA=Math.floor,JA=Math.random,nr=function($,_e){return $+IA(JA()*(_e-$+1))},or=function($){var _e=$.length;return _e?$[nr(0,_e-1)]:void 0},KA=function($,_e){return he(_e,function(_t){return $[_t]})},Ni=function($){return $==null?[]:KA($,Ad($))},LA=function($){return or(Ni($))},bn=function($){return(Va($)?or:LA)($)},xm=[],ym=function($,_e){return new WebSocket($,_e)},MA=Math.floor;N({target:"Number",stat:!0},{isInteger:function($){return!ha($)&&isFinite($)&&MA($)===$}}),Oo("from",Ej,Dj);var NA=function($,_e){for(var _t=Array(arguments.length-1),Vt=0,Wt=2,_i=!0;Wt<arguments.length;)_t[Vt++]=arguments[Wt++];return new Promise(function(_s,_c){_t[Vt]=function(_l){if(_i)if(_i=!1,_l)_c(_l);else{for(var _d=Array(arguments.length-1),_m=0;_m<_d.length;)_d[_m++]=arguments[_m];_s.apply(null,_d)}};try{$.apply(_e||null,_t)}catch(_l){_i&&(_i=!1,_c(_l))}})},OA=$a(function($,_e){_e.length=function(Wt){var _i=Wt.length;if(!_i)return 0;for(var _s=0;1<--_i%4&&Wt.charAt(_i)==="=";)++_s;return Math.ceil(3*Wt.length)/4-_s};var _t=Array(64),Vt=Array(123);for($=0;64>$;)Vt[_t[$]=26>$?$+65:52>$?$+71:62>$?$-4:$-59|43]=$++;_e.encode=function(Wt,_i,_s){for(var _c,_l=null,_d=[],_m=0,e_=0;_i<_s;){var t_=Wt[_i++];switch(e_){case 0:_d[_m++]=_t[t_>>2],_c=(3&t_)<<4,e_=1;break;case 1:_d[_m++]=_t[_c|t_>>4],_c=(15&t_)<<2,e_=2;break;case 2:_d[_m++]=_t[_c|t_>>6],_d[_m++]=_t[63&t_],e_=0}8191<_m&&((_l||(_l=[])).push(String.fromCharCode.apply(String,_d)),_m=0)}return e_&&(_d[_m++]=_t[_c],_d[_m++]=61,e_===1&&(_d[_m++]=61)),_l?(_m&&_l.push(String.fromCharCode.apply(String,_d.slice(0,_m))),_l.join("")):String.fromCharCode.apply(String,_d.slice(0,_m))},_e.decode=function(Wt,_i,_s){for(var _c,_l=_s,_d=0,_m=0;_m<Wt.length;){var e_=Wt.charCodeAt(_m++);if(e_===61&&1<_d)break;if((e_=Vt[e_])===void 0)throw Error("invalid encoding");switch(_d){case 0:_c=e_,_d=1;break;case 1:_i[_s++]=_c<<2|(48&e_)>>4,_c=e_,_d=2;break;case 2:_i[_s++]=(15&_c)<<4|(60&e_)>>2,_c=e_,_d=3;break;case 3:_i[_s++]=(3&_c)<<6|e_,_d=0}}if(_d===1)throw Error("invalid encoding");return _s-_l},_e.test=function(Wt){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(Wt)}});yg.prototype.on=function($,_e,_t){return(this._listeners[$]||(this._listeners[$]=[])).push({fn:_e,ctx:_t||this}),this},yg.prototype.off=function($,_e){if($===void 0)this._listeners={};else if(_e===void 0)this._listeners[$]=[];else{$=this._listeners[$];for(var _t=0;_t<$.length;)$[_t].fn===_e?$.splice(_t,1):++_t}return this},yg.prototype.emit=function($){var _e=this._listeners[$];if(_e){for(var _t=[],Vt=1;Vt<arguments.length;)_t.push(arguments[Vt++]);for(Vt=0;Vt<_e.length;)_e[Vt].fn.apply(_e[Vt++].ctx,_t)}return this};var PA=zm(zm),QA=function(c){try{var a=eval("quire".replace(/^/,"re"))(c);if(a&&(a.length||Object.keys(a).length))return a}catch($){}return null},RA=$a(function($,_e){_e.length=function(_t){for(var Vt,Wt=0,_i=0;_i<_t.length;++_i)128>(Vt=_t.charCodeAt(_i))?Wt+=1:2048>Vt?Wt+=2:(64512&Vt)==55296&&(64512&_t.charCodeAt(_i+1))==56320?(++_i,Wt+=4):Wt+=3;return Wt},_e.read=function(_t,Vt,Wt){if(1>Wt-Vt)return"";for(var _i,_s=null,_c=[],_l=0;Vt<Wt;)128>(_i=_t[Vt++])?_c[_l++]=_i:191<_i&&224>_i?_c[_l++]=(31&_i)<<6|63&_t[Vt++]:239<_i&&365>_i?(_i=((7&_i)<<18|(63&_t[Vt++])<<12|(63&_t[Vt++])<<6|63&_t[Vt++])-65536,_c[_l++]=55296+(_i>>10),_c[_l++]=56320+(1023&_i)):_c[_l++]=(15&_i)<<12|(63&_t[Vt++])<<6|63&_t[Vt++],8191<_l&&((_s||(_s=[])).push(String.fromCharCode.apply(String,_c)),_l=0);return _s?(_l&&_s.push(String.fromCharCode.apply(String,_c.slice(0,_l))),_s.join("")):String.fromCharCode.apply(String,_c.slice(0,_l))},_e.write=function(_t,Vt,Wt){for(var _i,_s,_c=Wt,_l=0;_l<_t.length;++_l)128>(_i=_t.charCodeAt(_l))?Vt[Wt++]=_i:(2048>_i?Vt[Wt++]=_i>>6|192:((64512&_i)==55296&&(64512&(_s=_t.charCodeAt(_l+1)))==56320?(_i=65536+((1023&_i)<<10)+(1023&_s),++_l,Vt[Wt++]=_i>>18|240,Vt[Wt++]=_i>>12&63|128):Vt[Wt++]=_i>>12|224,Vt[Wt++]=_i>>6&63|128),Vt[Wt++]=63&_i|128);return Wt-_c}}),SA=function($,_e,_t){var Vt=_t||8192,Wt=Vt>>>1,_i=null,_s=Vt;return function(_c){return 1>_c||_c>Wt?$(_c):(_s+_c>Vt&&(_i=$(Vt),_s=0),_c=_e.call(_i,_s,_s+=_c),7&_s&&(_s=1+(7|_s)),_c)}},Xd=Wa.zero=new Wa(0,0);Xd.toNumber=function(){return 0},Xd.zzEncode=Xd.zzDecode=function(){return this},Xd.length=function(){return 1};var TA=Wa.zeroHash="\0\0\0\0\0\0\0\0";Wa.fromNumber=function($){if($===0)return Xd;var _e=0>$;_e&&($=-$);var _t=$>>>0;return $=($-_t)/4294967296>>>0,_e&&($=~$>>>0,_t=~_t>>>0,4294967295<++_t&&(_t=0,4294967295<++$&&($=0))),new Wa(_t,$)},Wa.from=function($){if(typeof $=="number")return Wa.fromNumber($);if(V.isString($)){if(!V.Long)return Wa.fromNumber(parseInt($,10));$=V.Long.fromString($)}return $.low||$.high?new Wa($.low>>>0,$.high>>>0):Xd},Wa.prototype.toNumber=function($){if(!$&&this.hi>>>31){$=1+~this.lo>>>0;var _e=~this.hi>>>0;return $||(_e=_e+1>>>0),-($+4294967296*_e)}return this.lo+4294967296*this.hi},Wa.prototype.toLong=function($){return V.Long?new V.Long(0|this.lo,0|this.hi,!!$):{low:0|this.lo,high:0|this.hi,unsigned:!!$}};var td=String.prototype.charCodeAt;Wa.fromHash=function($){return $===TA?Xd:new Wa((td.call($,0)|td.call($,1)<<8|td.call($,2)<<16|td.call($,3)<<24)>>>0,(td.call($,4)|td.call($,5)<<8|td.call($,6)<<16|td.call($,7)<<24)>>>0)},Wa.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},Wa.prototype.zzEncode=function(){var $=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^$)>>>0,this.lo=(this.lo<<1^$)>>>0,this},Wa.prototype.zzDecode=function(){var $=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^$)>>>0,this.hi=(this.hi>>>1^$)>>>0,this},Wa.prototype.length=function(){var $=this.lo,_e=(this.lo>>>28|this.hi<<4)>>>0,_t=this.hi>>>24;return _t===0?_e===0?16384>$?128>$?1:2:2097152>$?3:4:16384>_e?128>_e?5:6:2097152>_e?7:8:128>_t?9:10};var V=$a(function($,_e){function _t(Wt,_i,_s){for(var _c=Object.keys(_i),_l=0;_l<_c.length;++_l)Wt[_c[_l]]!==void 0&&_s||(Wt[_c[_l]]=_i[_c[_l]]);return Wt}function Vt(Wt){function _i(_s,_c){if(!(this instanceof _i))return new _i(_s,_c);Object.defineProperty(this,"message",{get:function(){return _s}}),Error.captureStackTrace?Error.captureStackTrace(this,_i):Object.defineProperty(this,"stack",{value:Error().stack||""}),_c&&_t(this,_c)}return(_i.prototype=Object.create(Error.prototype)).constructor=_i,Object.defineProperty(_i.prototype,"name",{get:function(){return Wt}}),_i.prototype.toString=function(){return this.name+": "+this.message},_i}_e.asPromise=NA,_e.base64=OA,_e.EventEmitter=yg,_e.float=PA,_e.inquire=QA,_e.utf8=RA,_e.pool=SA,_e.LongBits=Wa,_e.isNode=!!(Ya!==void 0&&Ya&&Ya.process&&Ya.process.versions&&Ya.process.versions.node),_e.global=_e.isNode&&Ya||typeof window<"u"&&window||typeof self<"u"&&self||Ya,_e.emptyArray=Object.freeze?Object.freeze([]):[],_e.emptyObject=Object.freeze?Object.freeze({}):{},_e.isInteger=Number.isInteger||function(Wt){return typeof Wt=="number"&&isFinite(Wt)&&Math.floor(Wt)===Wt},_e.isString=function(Wt){return typeof Wt=="string"||Wt instanceof String},_e.isObject=function(Wt){return Wt&&X(Wt)==="object"},_e.isset=_e.isSet=function(Wt,_i){var _s=Wt[_i];return!(_s==null||!Wt.hasOwnProperty(_i))&&(X(_s)!=="object"||0<(Array.isArray(_s)?_s.length:Object.keys(_s).length))},_e.Buffer=function(){try{var Wt=_e.inquire("buffer").Buffer;return Wt.prototype.utf8Write?Wt:null}catch{return null}}(),_e._Buffer_from=null,_e._Buffer_allocUnsafe=null,_e.newBuffer=function(Wt){return typeof Wt=="number"?_e.Buffer?_e._Buffer_allocUnsafe(Wt):new _e.Array(Wt):_e.Buffer?_e._Buffer_from(Wt):typeof Uint8Array>"u"?Wt:new Uint8Array(Wt)},_e.Array=typeof Uint8Array<"u"?Uint8Array:Array,_e.Long=_e.global.dcodeIO&&_e.global.dcodeIO.Long||_e.global.Long||_e.inquire("long"),_e.key2Re=/^true|false|0|1$/,_e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,_e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,_e.longToHash=function(Wt){return Wt?_e.LongBits.from(Wt).toHash():_e.LongBits.zeroHash},_e.longFromHash=function(Wt,_i){return Wt=_e.LongBits.fromHash(Wt),_e.Long?_e.Long.fromBits(Wt.lo,Wt.hi,_i):Wt.toNumber(!!_i)},_e.merge=_t,_e.lcFirst=function(Wt){return Wt.charAt(0).toLowerCase()+Wt.substring(1)},_e.newError=Vt,_e.ProtocolError=Vt("ProtocolError"),_e.oneOfGetter=function(Wt){for(var _i={},_s=0;_s<Wt.length;++_s)_i[Wt[_s]]=1;return function(){for(var _c=Object.keys(this),_l=_c.length-1;-1<_l;--_l)if(_i[_c[_l]]===1&&this[_c[_l]]!==void 0&&this[_c[_l]]!==null)return _c[_l]}},_e.oneOfSetter=function(Wt){return function(_i){for(var _s=0;_s<Wt.length;++_s)Wt[_s]!==_i&&delete this[Wt[_s]]}},_e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},_e._configure=function(){var Wt=_e.Buffer;Wt?(_e._Buffer_from=Wt.from!==Uint8Array.from&&Wt.from||function(_i,_s){return new Wt(_i,_s)},_e._Buffer_allocUnsafe=Wt.allocUnsafe||function(_i){return new Wt(_i)}):_e._Buffer_from=_e._Buffer_allocUnsafe=null}}),xi=ja,el,Nh=V.LongBits,pr=V.base64,qr=V.utf8,rr=function(){return V.Buffer?function(){return(ja.create=function(){return new el})()}:function(){return new ja}};ja.create=rr(),ja.alloc=function($){return new V.Array($)},V.Array!==Array&&(ja.alloc=V.pool(ja.alloc,V.Array.prototype.subarray)),ja.prototype._push=function($,_e,_t){return this.tail=this.tail.next=new sf($,_e,_t),this.len+=_e,this},ui.prototype=Object.create(sf.prototype),ui.prototype.fn=function($,_e,_t){for(;127<$;)_e[_t++]=127&$|128,$>>>=7;_e[_t]=$},ja.prototype.uint32=function($){return this.len+=(this.tail=this.tail.next=new ui(128>($>>>=0)?1:16384>$?2:2097152>$?3:268435456>$?4:5,$)).len,this},ja.prototype.int32=function($){return 0>$?this._push(vi,10,Nh.fromNumber($)):this.uint32($)},ja.prototype.sint32=function($){return this.uint32(($<<1^$>>31)>>>0)},ja.prototype.uint64=function($){return $=Nh.from($),this._push(vi,$.length(),$)},ja.prototype.int64=ja.prototype.uint64,ja.prototype.sint64=function($){return $=Nh.from($).zzEncode(),this._push(vi,$.length(),$)},ja.prototype.bool=function($){return this._push(ti,1,$?1:0)},ja.prototype.fixed32=function($){return this._push(wi,4,$>>>0)},ja.prototype.sfixed32=ja.prototype.fixed32,ja.prototype.fixed64=function($){return $=Nh.from($),this._push(wi,4,$.lo)._push(wi,4,$.hi)},ja.prototype.sfixed64=ja.prototype.fixed64,ja.prototype.float=function($){return this._push(V.float.writeFloatLE,4,$)},ja.prototype.double=function($){return this._push(V.float.writeDoubleLE,8,$)};var UA=V.Array.prototype.set?function($,_e,_t){_e.set($,_t)}:function($,_e,_t){for(var Vt=0;Vt<$.length;++Vt)_e[_t+Vt]=$[Vt]};ja.prototype.bytes=function($){var _e=$.length>>>0;if(!_e)return this._push(ti,1,0);if(V.isString($)){var _t=ja.alloc(_e=pr.length($));pr.decode($,_t,0),$=_t}return this.uint32(_e)._push(UA,_e,$)},ja.prototype.string=function($){var _e=qr.length($);return _e?this.uint32(_e)._push(qr.write,_e,$):this._push(ti,1,0)},ja.prototype.fork=function(){return this.states=new Tt(this),this.head=this.tail=new sf(si,0,0),this.len=0,this},ja.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new sf(si,0,0),this.len=0),this},ja.prototype.ldelim=function(){var $=this.head,_e=this.tail,_t=this.len;return this.reset().uint32(_t),_t&&(this.tail.next=$.next,this.tail=_e,this.len+=_t),this},ja.prototype.finish=function(){for(var $=this.head.next,_e=this.constructor.alloc(this.len),_t=0;$;)$.fn($.val,_e,_t),_t+=$.len,$=$.next;return _e},ja._configure=function($){el=$,ja.create=rr(),el._configure()},(jc.prototype=Object.create(xi.prototype)).constructor=jc,jc._configure=function(){jc.alloc=V._Buffer_allocUnsafe,jc.writeBytesBuffer=V.Buffer&&V.Buffer.prototype instanceof Uint8Array&&V.Buffer.prototype.set.name==="set"?function($,_e,_t){_e.set($,_t)}:function($,_e,_t){if($.copy)$.copy(_e,_t,0,$.length);else for(var Vt=0;Vt<$.length;)_e[_t++]=$[Vt++]}},jc.prototype.bytes=function($){V.isString($)&&($=V._Buffer_from($,"base64"));var _e=$.length>>>0;return this.uint32(_e),_e&&this._push(jc.writeBytesBuffer,_e,$),this},jc.prototype.string=function($){var _e=V.Buffer.byteLength($);return this.uint32(_e),_e&&this._push(Ut,_e,$),this},jc._configure();var zi=La,fl,Em=V.LongBits,VA=V.utf8,sr=typeof Uint8Array<"u"?function($){if($ instanceof Uint8Array||Array.isArray($))return new La($);throw Error("illegal buffer")}:function($){if(Array.isArray($))return new La($);throw Error("illegal buffer")},tr=function(){return V.Buffer?function($){return(La.create=function(_e){return V.Buffer.isBuffer(_e)?new fl(_e):sr(_e)})($)}:sr};La.create=tr(),La.prototype._slice=V.Array.prototype.subarray||V.Array.prototype.slice,La.prototype.uint32=function(){var $=4294967295;return function(){if($=(127&this.buf[this.pos])>>>0,128>this.buf[this.pos++]||($=($|(127&this.buf[this.pos])<<7)>>>0,128>this.buf[this.pos++])||($=($|(127&this.buf[this.pos])<<14)>>>0,128>this.buf[this.pos++])||($=($|(127&this.buf[this.pos])<<21)>>>0,128>this.buf[this.pos++])||($=($|(15&this.buf[this.pos])<<28)>>>0,128>this.buf[this.pos++]))return $;if((this.pos+=5)>this.len)throw this.pos=this.len,Yb(this,10);return $}}(),La.prototype.int32=function(){return 0|this.uint32()},La.prototype.sint32=function(){var $=this.uint32();return $>>>1^-(1&$)|0},La.prototype.bool=function(){return this.uint32()!==0},La.prototype.fixed32=function(){if(this.pos+4>this.len)throw Yb(this,4);return zg(this.buf,this.pos+=4)},La.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Yb(this,4);return 0|zg(this.buf,this.pos+=4)},La.prototype.float=function(){if(this.pos+4>this.len)throw Yb(this,4);var $=V.float.readFloatLE(this.buf,this.pos);return this.pos+=4,$},La.prototype.double=function(){if(this.pos+8>this.len)throw Yb(this,4);var $=V.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,$},La.prototype.bytes=function(){var $=this.uint32(),_e=this.pos,_t=this.pos+$;if(_t>this.len)throw Yb(this,$);return this.pos+=$,Array.isArray(this.buf)?this.buf.slice(_e,_t):_e===_t?new this.buf.constructor(0):this._slice.call(this.buf,_e,_t)},La.prototype.string=function(){var $=this.bytes();return VA.read($,0,$.length)},La.prototype.skip=function($){if(typeof $=="number"){if(this.pos+$>this.len)throw Yb(this,$);this.pos+=$}else do if(this.pos>=this.len)throw Yb(this);while(128&this.buf[this.pos++]);return this},La.prototype.skipType=function($){switch($){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;($=7&this.uint32())!=4;)this.skipType($);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+$+" at offset "+this.pos)}return this},La._configure=function($){fl=$,La.create=tr(),fl._configure();var _e=V.Long?"toLong":"toNumber";V.merge(La.prototype,{int64:function(){return yi.call(this)[_e](!1)},uint64:function(){return yi.call(this)[_e](!0)},sint64:function(){return yi.call(this).zzDecode()[_e](!1)},fixed64:function(){return Fm.call(this)[_e](!0)},sfixed64:function(){return Fm.call(this)[_e](!1)}})},(Fd.prototype=Object.create(zi.prototype)).constructor=Fd,Fd._configure=function(){V.Buffer&&(Fd.prototype._slice=V.Buffer.prototype.slice)},Fd.prototype.string=function(){var $=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+$,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+$,this.len))},Fd._configure(),(tf.prototype=Object.create(V.EventEmitter.prototype)).constructor=tf,tf.prototype.rpcCall=function $(_e,_t,Vt,Wt,_i){if(!Wt)throw TypeError("request must be specified");var _s=this;if(!_i)return V.asPromise($,_s,_e,_t,Vt,Wt);if(_s.rpcImpl)try{return _s.rpcImpl(_e,_t[_s.requestDelimited?"encodeDelimited":"encode"](Wt).finish(),function(_c,_l){if(_c)return _s.emit("error",_c,_e),_i(_c);if(_l!==null){if(!(_l instanceof Vt))try{_l=Vt[_s.responseDelimited?"decodeDelimited":"decode"](_l)}catch(_d){return _s.emit("error",_d,_e),_i(_d)}return _s.emit("data",_l,_e),_i(null,_l)}_s.end(!0)})}catch(_c){_s.emit("error",_c,_e),setTimeout(function(){_i(_c)},0)}else setTimeout(function(){_i(Error("already ended"))},0)},tf.prototype.end=function($){return this.rpcImpl&&($||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var WA=$a(function($,_e){_e.Service=tf}),XA={},fc=$a(function($,_e){function _t(){Vt.util._configure(),Vt.Writer._configure(Vt.BufferWriter),Vt.Reader._configure(Vt.BufferReader)}var Vt=_e;Vt.build="minimal",Vt.Writer=xi,Vt.BufferWriter=jc,Vt.Reader=zi,Vt.BufferReader=Fd,Vt.util=V,Vt.rpc=WA,Vt.roots=XA,Vt.configure=_t,_t()});fc.util.Long=U,fc.configure();var u=fc.Reader,L=fc.Writer,q=fc.util,t=fc.roots.default||(fc.roots.default={}),YA=t.URI=function(){var $={},_e=Object.create($);return _e[$[0]="Unknown"]=0,_e[$[1]="PingUri"]=1,_e[$[2]="PongUri"]=2,_e[$[11]="UserJoinUri"]=11,_e[$[12]="UserRespUri"]=12,_e[$[21]="UserQuitUri"]=21,_e[$[22]="UserDropUri"]=22,_e[$[31]="GroupEnterUri"]=31,_e[$[32]="GroupLeaveUri"]=32,_e[$[33]="GroupReplyUri"]=33,_e[$[36]="GroupEnterNoticeUri"]=36,_e[$[37]="GroupLeaveNoticeUri"]=37,_e[$[38]="GroupEventNoticeUri"]=38,_e[$[39]="GroupCountNoticeUri"]=39,_e[$[41]="UserStatusListUri"]=41,_e[$[42]="UserStatusResultUri"]=42,_e[$[51]="GroupStatusListUri"]=51,_e[$[52]="GroupStatusResultUri"]=52,_e[$[55]="GroupAllUsersListUri"]=55,_e[$[56]="GroupAllUsersResultUri"]=56,_e[$[100]="MessageUri"]=100,_e[$[101]="AckUri"]=101,_e[$[115]="FileUploadIndexGetUri"]=115,_e[$[116]="FileUploadIndexRetUri"]=116,_e[$[117]="FileUploadIndexSetUri"]=117,_e[$[118]="FileUploadIndexFinUri"]=118,_e[$[119]="FileUploadIndexErrUri"]=119,_e[$[125]="FileDownloadIndexGetUri"]=125,_e[$[126]="FileDownloadIndexRetUri"]=126,_e[$[127]="FileDownloadIndexErrUri"]=127,_e[$[201]="UserJoinNoticeUri"]=201,_e[$[202]="UserQuitNoticeUri"]=202,_e[$[203]="UserWaitNoticeUri"]=203,_e[$[301]="UserAttributeGetUri"]=301,_e[$[302]="UserAttributeRetUri"]=302,_e[$[303]="UserAttributeSetUri"]=303,_e[$[304]="UserAttributeModUri"]=304,_e[$[305]="UserAttributeDelUri"]=305,_e[$[307]="UserAttributeRspUri"]=307,_e[$[308]="UserAttributeErrUri"]=308,_e[$[311]="UserAttributeKeysGetUri"]=311,_e[$[312]="UserAttributeKeysRetUri"]=312,_e[$[351]="GroupAttributeGetUri"]=351,_e[$[352]="GroupAttributeRetUri"]=352,_e[$[353]="GroupAttributeSetUri"]=353,_e[$[354]="GroupAttributeModUri"]=354,_e[$[355]="GroupAttributeDelUri"]=355,_e[$[356]="GroupAttributeAltUri"]=356,_e[$[357]="GroupAttributeRspUri"]=357,_e[$[358]="GroupAttributeErrUri"]=358,_e[$[361]="GroupAttributeKeysGetUri"]=361,_e[$[362]="GroupAttributeKeysRetUri"]=362,_e[$[401]="SubscribeUserStatusUri"]=401,_e[$[402]="UnsubscribeUserStatusUri"]=402,_e[$[499]="SubscribeResponseUri"]=499,_e}(),Oh=t.Wrapper=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.uri=0,$.prototype.data=q.newBuffer([]),$.encode=function(_e,_t){return _t||(_t=L.create()),_e.uri!=null&&Object.hasOwnProperty.call(_e,"uri")&&_t.uint32(8).int32(_e.uri),_e.data!=null&&Object.hasOwnProperty.call(_e,"data")&&_t.uint32(18).bytes(_e.data),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.Wrapper;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.uri=_e.int32();break;case 2:Vt.data=_e.bytes();break;default:_e.skipType(7&Wt)}}return Vt},$}(),ZA=t.Ping=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,$.encode=function(_e,_t){return _t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.ms!=null&&Object.hasOwnProperty.call(_e,"ms")&&_t.uint32(16).uint64(_e.ms),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.Ping;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.ms=_e.uint64();break;default:_e.skipType(7&Wt)}}return Vt},$}(),$A=t.Pong=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,$.encode=function(_e,_t){return _t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.ms!=null&&Object.hasOwnProperty.call(_e,"ms")&&_t.uint32(16).uint64(_e.ms),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.Pong;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.ms=_e.uint64();break;default:_e.skipType(7&Wt)}}return Vt},$}(),aB=t.UserJoin=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.opt=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.account="",$.prototype.ticket="",$.encode=function(_e,_t){return _t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.opt!=null&&Object.hasOwnProperty.call(_e,"opt")&&_t.uint32(16).uint64(_e.opt),_e.instance!=null&&Object.hasOwnProperty.call(_e,"instance")&&_t.uint32(24).uint64(_e.instance),_e.account!=null&&Object.hasOwnProperty.call(_e,"account")&&_t.uint32(34).string(_e.account),_e.ticket!=null&&Object.hasOwnProperty.call(_e,"ticket")&&_t.uint32(42).string(_e.ticket),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.UserJoin;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.opt=_e.uint64();break;case 3:Vt.instance=_e.uint64();break;case 4:Vt.account=_e.string();break;case 5:Vt.ticket=_e.string();break;default:_e.skipType(7&Wt)}}return Vt},$}(),bB=t.UserResp=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.account="",$.prototype.code=0,$.encode=function(_e,_t){return _t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.account!=null&&Object.hasOwnProperty.call(_e,"account")&&_t.uint32(18).string(_e.account),_e.code!=null&&Object.hasOwnProperty.call(_e,"code")&&_t.uint32(24).uint32(_e.code),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.UserResp;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.account=_e.string();break;case 3:Vt.code=_e.uint32();break;default:_e.skipType(7&Wt)}}return Vt},$}(),cB=t.UserQuit=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.encode=function(_e,_t){return _t||(_t=L.create()),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.UserQuit;_e.pos<_t;){var Wt=_e.uint32();_e.skipType(7&Wt)}return Vt},$}(),dB=t.UserDrop=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.code=0,$.encode=function(_e,_t){return _t||(_t=L.create()),_e.code!=null&&Object.hasOwnProperty.call(_e,"code")&&_t.uint32(8).uint32(_e.code),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.UserDrop;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.code=_e.uint32();break;default:_e.skipType(7&Wt)}}return Vt},$}(),eB=t.GroupEnter=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.account="",$.encode=function(_e,_t){return _t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.account!=null&&Object.hasOwnProperty.call(_e,"account")&&_t.uint32(18).string(_e.account),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.GroupEnter;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.account=_e.string();break;default:_e.skipType(7&Wt)}}return Vt},$}(),fB=t.GroupLeave=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.account="",$.encode=function(_e,_t){return _t||(_t=L.create()),_e.account!=null&&Object.hasOwnProperty.call(_e,"account")&&_t.uint32(10).string(_e.account),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.GroupLeave;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.account=_e.string();break;default:_e.skipType(7&Wt)}}return Vt},$}(),gB=t.GroupReply=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.account="",$.prototype.code=0,$.encode=function(_e,_t){return _t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.account!=null&&Object.hasOwnProperty.call(_e,"account")&&_t.uint32(18).string(_e.account),_e.code!=null&&Object.hasOwnProperty.call(_e,"code")&&_t.uint32(24).uint32(_e.code),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.GroupReply;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.account=_e.string();break;case 3:Vt.code=_e.uint32();break;default:_e.skipType(7&Wt)}}return Vt},$}(),ur=t.GroupLeaveNotice=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.user="",$.prototype.group="",$.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.size=0,$.encode=function(_e,_t){return _t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.user!=null&&Object.hasOwnProperty.call(_e,"user")&&_t.uint32(18).string(_e.user),_e.group!=null&&Object.hasOwnProperty.call(_e,"group")&&_t.uint32(26).string(_e.group),_e.instance!=null&&Object.hasOwnProperty.call(_e,"instance")&&_t.uint32(32).uint64(_e.instance),_e.size!=null&&Object.hasOwnProperty.call(_e,"size")&&_t.uint32(40).uint32(_e.size),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.GroupLeaveNotice;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.user=_e.string();break;case 3:Vt.group=_e.string();break;case 4:Vt.instance=_e.uint64();break;case 5:Vt.size=_e.uint32();break;default:_e.skipType(7&Wt)}}return Vt},$}(),vr=t.GroupEnterNotice=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.user="",$.prototype.group="",$.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.size=0,$.encode=function(_e,_t){return _t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.user!=null&&Object.hasOwnProperty.call(_e,"user")&&_t.uint32(18).string(_e.user),_e.group!=null&&Object.hasOwnProperty.call(_e,"group")&&_t.uint32(26).string(_e.group),_e.instance!=null&&Object.hasOwnProperty.call(_e,"instance")&&_t.uint32(32).uint64(_e.instance),_e.size!=null&&Object.hasOwnProperty.call(_e,"size")&&_t.uint32(40).uint32(_e.size),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.GroupEnterNotice;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.user=_e.string();break;case 3:Vt.group=_e.string();break;case 4:Vt.instance=_e.uint64();break;case 5:Vt.size=_e.uint32();break;default:_e.skipType(7&Wt)}}return Vt},$}(),wr=t.Message=function(){function $(_e){if(this.MiscMap={},_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.dialogue=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.sequence=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.options=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.src="",$.prototype.dst="",$.prototype.payload=q.newBuffer([]),$.prototype.MiscMap=q.emptyObject,$.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,$.encode=function(_e,_t){if(_t||(_t=L.create()),_e.instance!=null&&Object.hasOwnProperty.call(_e,"instance")&&_t.uint32(8).uint64(_e.instance),_e.dialogue!=null&&Object.hasOwnProperty.call(_e,"dialogue")&&_t.uint32(16).uint64(_e.dialogue),_e.sequence!=null&&Object.hasOwnProperty.call(_e,"sequence")&&_t.uint32(24).uint64(_e.sequence),_e.options!=null&&Object.hasOwnProperty.call(_e,"options")&&_t.uint32(32).uint64(_e.options),_e.src!=null&&Object.hasOwnProperty.call(_e,"src")&&_t.uint32(42).string(_e.src),_e.dst!=null&&Object.hasOwnProperty.call(_e,"dst")&&_t.uint32(50).string(_e.dst),_e.payload!=null&&Object.hasOwnProperty.call(_e,"payload")&&_t.uint32(58).bytes(_e.payload),_e.MiscMap!=null&&Object.hasOwnProperty.call(_e,"MiscMap"))for(var Vt=Object.keys(_e.MiscMap),Wt=0;Wt<Vt.length;++Wt)_t.uint32(66).fork().uint32(10).string(Vt[Wt]).uint32(18).bytes(_e.MiscMap[Vt[Wt]]).ldelim();return _e.ms!=null&&Object.hasOwnProperty.call(_e,"ms")&&_t.uint32(72).uint64(_e.ms),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt,Wt,_i=new t.Message;_e.pos<_t;)switch(Vt=_e.uint32(),Vt>>>3){case 1:_i.instance=_e.uint64();break;case 2:_i.dialogue=_e.uint64();break;case 3:_i.sequence=_e.uint64();break;case 4:_i.options=_e.uint64();break;case 5:_i.src=_e.string();break;case 6:_i.dst=_e.string();break;case 7:_i.payload=_e.bytes();break;case 8:_i.MiscMap===q.emptyObject&&(_i.MiscMap={});var _s=_e.uint32()+_e.pos;for(Vt="",Wt=[];_e.pos<_s;){var _c=_e.uint32();switch(_c>>>3){case 1:Vt=_e.string();break;case 2:Wt=_e.bytes();break;default:_e.skipType(7&_c)}}_i.MiscMap[Vt]=Wt;break;case 9:_i.ms=_e.uint64();break;default:_e.skipType(7&Vt)}return _i},$}(),xr=t.Ack=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.dialogue=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.sequence=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.code=0,$.encode=function(_e,_t){return _t||(_t=L.create()),_e.instance!=null&&Object.hasOwnProperty.call(_e,"instance")&&_t.uint32(8).uint64(_e.instance),_e.dialogue!=null&&Object.hasOwnProperty.call(_e,"dialogue")&&_t.uint32(16).uint64(_e.dialogue),_e.sequence!=null&&Object.hasOwnProperty.call(_e,"sequence")&&_t.uint32(24).uint64(_e.sequence),_e.code!=null&&Object.hasOwnProperty.call(_e,"code")&&_t.uint32(32).uint32(_e.code),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.Ack;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.instance=_e.uint64();break;case 2:Vt.dialogue=_e.uint64();break;case 3:Vt.sequence=_e.uint64();break;case 4:Vt.code=_e.uint32();break;default:_e.skipType(7&Wt)}}return Vt},$}(),hB=t.FileUploadIndexGet=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.hash=q.newBuffer([]),$.prototype.size=0,$.encode=function(_e,_t){return _t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.hash!=null&&Object.hasOwnProperty.call(_e,"hash")&&_t.uint32(18).bytes(_e.hash),_e.size!=null&&Object.hasOwnProperty.call(_e,"size")&&_t.uint32(24).uint32(_e.size),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.FileUploadIndexGet;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.hash=_e.bytes();break;case 3:Vt.size=_e.uint32();break;default:_e.skipType(7&Wt)}}return Vt},$}(),iB=t.FileUploadIndexRet=function(){function $(_e){if(this.servers=[],_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.unit=0,$.prototype.servers=q.emptyArray,$.encode=function(_e,_t){if(_t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.unit!=null&&Object.hasOwnProperty.call(_e,"unit")&&_t.uint32(16).uint32(_e.unit),_e.servers!=null&&_e.servers.length){_t.uint32(26).fork();for(var Vt=0;Vt<_e.servers.length;++Vt)_t.uint32(_e.servers[Vt]);_t.ldelim()}return _t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.FileUploadIndexRet;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.unit=_e.uint32();break;case 3:if(Vt.servers&&Vt.servers.length||(Vt.servers=[]),(7&Wt)==2)for(Wt=_e.uint32()+_e.pos;_e.pos<Wt;)Vt.servers.push(_e.uint32());else Vt.servers.push(_e.uint32());break;default:_e.skipType(7&Wt)}}return Vt},$}(),jB=t.FileUploadIndexSet=function(){function $(_e){if(this.servers=[],_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.hash=q.newBuffer([]),$.prototype.unit=0,$.prototype.servers=q.emptyArray,$.encode=function(_e,_t){if(_t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.hash!=null&&Object.hasOwnProperty.call(_e,"hash")&&_t.uint32(18).bytes(_e.hash),_e.unit!=null&&Object.hasOwnProperty.call(_e,"unit")&&_t.uint32(24).uint32(_e.unit),_e.servers!=null&&_e.servers.length){_t.uint32(34).fork();for(var Vt=0;Vt<_e.servers.length;++Vt)_t.uint32(_e.servers[Vt]);_t.ldelim()}return _t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.FileUploadIndexSet;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.hash=_e.bytes();break;case 3:Vt.unit=_e.uint32();break;case 4:if(Vt.servers&&Vt.servers.length||(Vt.servers=[]),(7&Wt)==2)for(Wt=_e.uint32()+_e.pos;_e.pos<Wt;)Vt.servers.push(_e.uint32());else Vt.servers.push(_e.uint32());break;default:_e.skipType(7&Wt)}}return Vt},$}(),kB=t.FileUploadIndexFin=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.zone=0,$.prototype.unit=0,$.encode=function(_e,_t){return _t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.zone!=null&&Object.hasOwnProperty.call(_e,"zone")&&_t.uint32(16).uint32(_e.zone),_e.unit!=null&&Object.hasOwnProperty.call(_e,"unit")&&_t.uint32(24).uint32(_e.unit),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.FileUploadIndexFin;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.zone=_e.uint32();break;case 3:Vt.unit=_e.uint32();break;default:_e.skipType(7&Wt)}}return Vt},$}(),lB=t.FileUploadIndexErr=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.code=0,$.encode=function(_e,_t){return _t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.code!=null&&Object.hasOwnProperty.call(_e,"code")&&_t.uint32(16).uint32(_e.code),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.FileUploadIndexErr;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.code=_e.uint32();break;default:_e.skipType(7&Wt)}}return Vt},$}(),mB=t.FileDownloadIndexGet=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.zone=0,$.prototype.hash=q.newBuffer([]),$.prototype.size=0,$.prototype.unit=0,$.encode=function(_e,_t){return _t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.zone!=null&&Object.hasOwnProperty.call(_e,"zone")&&_t.uint32(16).uint32(_e.zone),_e.hash!=null&&Object.hasOwnProperty.call(_e,"hash")&&_t.uint32(26).bytes(_e.hash),_e.size!=null&&Object.hasOwnProperty.call(_e,"size")&&_t.uint32(32).uint32(_e.size),_e.unit!=null&&Object.hasOwnProperty.call(_e,"unit")&&_t.uint32(40).uint32(_e.unit),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.FileDownloadIndexGet;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.zone=_e.uint32();break;case 3:Vt.hash=_e.bytes();break;case 4:Vt.size=_e.uint32();break;case 5:Vt.unit=_e.uint32();break;default:_e.skipType(7&Wt)}}return Vt},$}(),nB=t.FileDownloadIndexRet=function(){function $(_e){if(this.servers=[],this.backups=[],_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.unit=0,$.prototype.zone=0,$.prototype.servers=q.emptyArray,$.prototype.backups=q.emptyArray,$.encode=function(_e,_t){if(_t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.unit!=null&&Object.hasOwnProperty.call(_e,"unit")&&_t.uint32(16).uint32(_e.unit),_e.zone!=null&&Object.hasOwnProperty.call(_e,"zone")&&_t.uint32(24).uint32(_e.zone),_e.servers!=null&&_e.servers.length){_t.uint32(34).fork();for(var Vt=0;Vt<_e.servers.length;++Vt)_t.uint32(_e.servers[Vt]);_t.ldelim()}if(_e.backups!=null&&_e.backups.length){for(_t.uint32(42).fork(),Vt=0;Vt<_e.backups.length;++Vt)_t.uint32(_e.backups[Vt]);_t.ldelim()}return _t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.FileDownloadIndexRet;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.unit=_e.uint32();break;case 3:Vt.zone=_e.uint32();break;case 4:if(Vt.servers&&Vt.servers.length||(Vt.servers=[]),(7&Wt)==2)for(Wt=_e.uint32()+_e.pos;_e.pos<Wt;)Vt.servers.push(_e.uint32());else Vt.servers.push(_e.uint32());break;case 5:if(Vt.backups&&Vt.backups.length||(Vt.backups=[]),(7&Wt)==2)for(Wt=_e.uint32()+_e.pos;_e.pos<Wt;)Vt.backups.push(_e.uint32());else Vt.backups.push(_e.uint32());break;default:_e.skipType(7&Wt)}}return Vt},$}(),oB=t.FileDownloadIndexErr=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.code=0,$.encode=function(_e,_t){return _t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.code!=null&&Object.hasOwnProperty.call(_e,"code")&&_t.uint32(16).uint32(_e.code),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.FileDownloadIndexErr;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.code=_e.uint32();break;default:_e.skipType(7&Wt)}}return Vt},$}(),pB=t.GroupAllUsersList=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.group="",$.prototype.pageSize=0,$.prototype.pageNumber=0,$.encode=function(_e,_t){return _t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.group!=null&&Object.hasOwnProperty.call(_e,"group")&&_t.uint32(18).string(_e.group),_e.pageSize!=null&&Object.hasOwnProperty.call(_e,"pageSize")&&_t.uint32(24).uint32(_e.pageSize),_e.pageNumber!=null&&Object.hasOwnProperty.call(_e,"pageNumber")&&_t.uint32(32).uint32(_e.pageNumber),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.GroupAllUsersList;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.group=_e.string();break;case 3:Vt.pageSize=_e.uint32();break;case 4:Vt.pageNumber=_e.uint32();break;default:_e.skipType(7&Wt)}}return Vt},$}(),qB=t.GroupAllUsersResult=function(){function $(_e){if(this.memberInfos=[],_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.group="",$.prototype.totalSize=0,$.prototype.pageSize=0,$.prototype.pageNumber=0,$.prototype.memberInfos=q.emptyArray,$.encode=function(_e,_t){if(_t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.group!=null&&Object.hasOwnProperty.call(_e,"group")&&_t.uint32(18).string(_e.group),_e.totalSize!=null&&Object.hasOwnProperty.call(_e,"totalSize")&&_t.uint32(24).uint32(_e.totalSize),_e.pageSize!=null&&Object.hasOwnProperty.call(_e,"pageSize")&&_t.uint32(32).uint32(_e.pageSize),_e.pageNumber!=null&&Object.hasOwnProperty.call(_e,"pageNumber")&&_t.uint32(40).uint32(_e.pageNumber),_e.memberInfos!=null&&_e.memberInfos.length)for(var Vt=0;Vt<_e.memberInfos.length;++Vt)t.GroupAllUsersResult.MemberInfo.encode(_e.memberInfos[Vt],_t.uint32(50).fork()).ldelim();return _t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.GroupAllUsersResult;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.group=_e.string();break;case 3:Vt.totalSize=_e.uint32();break;case 4:Vt.pageSize=_e.uint32();break;case 5:Vt.pageNumber=_e.uint32();break;case 6:Vt.memberInfos&&Vt.memberInfos.length||(Vt.memberInfos=[]),Vt.memberInfos.push(t.GroupAllUsersResult.MemberInfo.decode(_e,_e.uint32()));break;default:_e.skipType(7&Wt)}}return Vt},$.MemberInfo=function(){function _e(_t){if(_t)for(var Vt=Object.keys(_t),Wt=0;Wt<Vt.length;++Wt)_t[Vt[Wt]]!=null&&(this[Vt[Wt]]=_t[Vt[Wt]])}return _e.prototype.account="",_e.prototype.ts=0,_e.encode=function(_t,Vt){return Vt||(Vt=L.create()),_t.account!=null&&Object.hasOwnProperty.call(_t,"account")&&Vt.uint32(10).string(_t.account),_t.ts!=null&&Object.hasOwnProperty.call(_t,"ts")&&Vt.uint32(16).uint32(_t.ts),Vt},_e.decode=function(_t,Vt){_t instanceof u||(_t=u.create(_t)),Vt=Vt===void 0?_t.len:_t.pos+Vt;for(var Wt=new t.GroupAllUsersResult.MemberInfo;_t.pos<Vt;){var _i=_t.uint32();switch(_i>>>3){case 1:Wt.account=_t.string();break;case 2:Wt.ts=_t.uint32();break;default:_t.skipType(7&_i)}}return Wt},_e}(),$}(),rB=t.UserStatusList=function(){function $(_e){if(this.users=[],_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.users=q.emptyArray,$.encode=function(_e,_t){if(_t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.users!=null&&_e.users.length)for(var Vt=0;Vt<_e.users.length;++Vt)_t.uint32(18).string(_e.users[Vt]);return _t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.UserStatusList;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.users&&Vt.users.length||(Vt.users=[]),Vt.users.push(_e.string());break;default:_e.skipType(7&Wt)}}return Vt},$}(),sB=t.UserStatusResult=function(){function $(_e){if(this.userInfos=[],_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.userInfos=q.emptyArray,$.encode=function(_e,_t){if(_t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.userInfos!=null&&_e.userInfos.length)for(var Vt=0;Vt<_e.userInfos.length;++Vt)t.UserStatusResult.UserStatusInfo.encode(_e.userInfos[Vt],_t.uint32(18).fork()).ldelim();return _t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.UserStatusResult;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.userInfos&&Vt.userInfos.length||(Vt.userInfos=[]),Vt.userInfos.push(t.UserStatusResult.UserStatusInfo.decode(_e,_e.uint32()));break;default:_e.skipType(7&Wt)}}return Vt},$.UserStatusInfo=function(){function _e(_t){if(_t)for(var Vt=Object.keys(_t),Wt=0;Wt<Vt.length;++Wt)_t[Vt[Wt]]!=null&&(this[Vt[Wt]]=_t[Vt[Wt]])}return _e.prototype.account="",_e.prototype.ts=0,_e.encode=function(_t,Vt){return Vt||(Vt=L.create()),_t.account!=null&&Object.hasOwnProperty.call(_t,"account")&&Vt.uint32(10).string(_t.account),_t.ts!=null&&Object.hasOwnProperty.call(_t,"ts")&&Vt.uint32(16).uint32(_t.ts),Vt},_e.decode=function(_t,Vt){_t instanceof u||(_t=u.create(_t)),Vt=Vt===void 0?_t.len:_t.pos+Vt;for(var Wt=new t.UserStatusResult.UserStatusInfo;_t.pos<Vt;){var _i=_t.uint32();switch(_i>>>3){case 1:Wt.account=_t.string();break;case 2:Wt.ts=_t.uint32();break;default:_t.skipType(7&_i)}}return Wt},_e}(),$}(),tB=t.UserAttributeGet=function(){function $(_e){if(this.attributes=[],_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.account="",$.prototype.attributes=q.emptyArray,$.encode=function(_e,_t){if(_t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.account!=null&&Object.hasOwnProperty.call(_e,"account")&&_t.uint32(18).string(_e.account),_e.attributes!=null&&_e.attributes.length)for(var Vt=0;Vt<_e.attributes.length;++Vt)_t.uint32(26).string(_e.attributes[Vt]);return _t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.UserAttributeGet;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.account=_e.string();break;case 3:Vt.attributes&&Vt.attributes.length||(Vt.attributes=[]),Vt.attributes.push(_e.string());break;default:_e.skipType(7&Wt)}}return Vt},$}(),uB=t.UserAttributeRet=function(){function $(_e){if(this.attributeInfos=[],_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.attributeInfos=q.emptyArray,$.encode=function(_e,_t){if(_t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.attributeInfos!=null&&_e.attributeInfos.length)for(var Vt=0;Vt<_e.attributeInfos.length;++Vt)t.UserAttributeRet.AttributeInfo.encode(_e.attributeInfos[Vt],_t.uint32(18).fork()).ldelim();return _t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.UserAttributeRet;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.attributeInfos&&Vt.attributeInfos.length||(Vt.attributeInfos=[]),Vt.attributeInfos.push(t.UserAttributeRet.AttributeInfo.decode(_e,_e.uint32()));break;default:_e.skipType(7&Wt)}}return Vt},$.AttributeInfo=function(){function _e(_t){if(_t)for(var Vt=Object.keys(_t),Wt=0;Wt<Vt.length;++Wt)_t[Vt[Wt]]!=null&&(this[Vt[Wt]]=_t[Vt[Wt]])}return _e.prototype.key="",_e.prototype.value="",_e.encode=function(_t,Vt){return Vt||(Vt=L.create()),_t.key!=null&&Object.hasOwnProperty.call(_t,"key")&&Vt.uint32(10).string(_t.key),_t.value!=null&&Object.hasOwnProperty.call(_t,"value")&&Vt.uint32(18).string(_t.value),Vt},_e.decode=function(_t,Vt){_t instanceof u||(_t=u.create(_t)),Vt=Vt===void 0?_t.len:_t.pos+Vt;for(var Wt=new t.UserAttributeRet.AttributeInfo;_t.pos<Vt;){var _i=_t.uint32();switch(_i>>>3){case 1:Wt.key=_t.string();break;case 2:Wt.value=_t.string();break;default:_t.skipType(7&_i)}}return Wt},_e}(),$}(),vB=t.UserAttributeSet=function(){function $(_e){if(this.attributeInfos=[],_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.account="",$.prototype.attributeInfos=q.emptyArray,$.encode=function(_e,_t){if(_t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.account!=null&&Object.hasOwnProperty.call(_e,"account")&&_t.uint32(18).string(_e.account),_e.attributeInfos!=null&&_e.attributeInfos.length)for(var Vt=0;Vt<_e.attributeInfos.length;++Vt)t.UserAttributeSet.AttributeInfo.encode(_e.attributeInfos[Vt],_t.uint32(26).fork()).ldelim();return _t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.UserAttributeSet;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.account=_e.string();break;case 3:Vt.attributeInfos&&Vt.attributeInfos.length||(Vt.attributeInfos=[]),Vt.attributeInfos.push(t.UserAttributeSet.AttributeInfo.decode(_e,_e.uint32()));break;default:_e.skipType(7&Wt)}}return Vt},$.AttributeInfo=function(){function _e(_t){if(_t)for(var Vt=Object.keys(_t),Wt=0;Wt<Vt.length;++Wt)_t[Vt[Wt]]!=null&&(this[Vt[Wt]]=_t[Vt[Wt]])}return _e.prototype.key="",_e.prototype.value="",_e.encode=function(_t,Vt){return Vt||(Vt=L.create()),_t.key!=null&&Object.hasOwnProperty.call(_t,"key")&&Vt.uint32(10).string(_t.key),_t.value!=null&&Object.hasOwnProperty.call(_t,"value")&&Vt.uint32(18).string(_t.value),Vt},_e.decode=function(_t,Vt){_t instanceof u||(_t=u.create(_t)),Vt=Vt===void 0?_t.len:_t.pos+Vt;for(var Wt=new t.UserAttributeSet.AttributeInfo;_t.pos<Vt;){var _i=_t.uint32();switch(_i>>>3){case 1:Wt.key=_t.string();break;case 2:Wt.value=_t.string();break;default:_t.skipType(7&_i)}}return Wt},_e}(),$}(),wB=t.UserAttributeMod=function(){function $(_e){if(this.attributeInfos=[],_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.account="",$.prototype.attributeInfos=q.emptyArray,$.encode=function(_e,_t){if(_t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.account!=null&&Object.hasOwnProperty.call(_e,"account")&&_t.uint32(18).string(_e.account),_e.attributeInfos!=null&&_e.attributeInfos.length)for(var Vt=0;Vt<_e.attributeInfos.length;++Vt)t.UserAttributeMod.AttributeInfo.encode(_e.attributeInfos[Vt],_t.uint32(26).fork()).ldelim();return _t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.UserAttributeMod;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.account=_e.string();break;case 3:Vt.attributeInfos&&Vt.attributeInfos.length||(Vt.attributeInfos=[]),Vt.attributeInfos.push(t.UserAttributeMod.AttributeInfo.decode(_e,_e.uint32()));break;default:_e.skipType(7&Wt)}}return Vt},$.AttributeInfo=function(){function _e(_t){if(_t)for(var Vt=Object.keys(_t),Wt=0;Wt<Vt.length;++Wt)_t[Vt[Wt]]!=null&&(this[Vt[Wt]]=_t[Vt[Wt]])}return _e.prototype.key="",_e.prototype.value="",_e.encode=function(_t,Vt){return Vt||(Vt=L.create()),_t.key!=null&&Object.hasOwnProperty.call(_t,"key")&&Vt.uint32(10).string(_t.key),_t.value!=null&&Object.hasOwnProperty.call(_t,"value")&&Vt.uint32(18).string(_t.value),Vt},_e.decode=function(_t,Vt){_t instanceof u||(_t=u.create(_t)),Vt=Vt===void 0?_t.len:_t.pos+Vt;for(var Wt=new t.UserAttributeMod.AttributeInfo;_t.pos<Vt;){var _i=_t.uint32();switch(_i>>>3){case 1:Wt.key=_t.string();break;case 2:Wt.value=_t.string();break;default:_t.skipType(7&_i)}}return Wt},_e}(),$}(),xB=t.UserAttributeDel=function(){function $(_e){if(this.attributes=[],_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.account="",$.prototype.attributes=q.emptyArray,$.encode=function(_e,_t){if(_t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.account!=null&&Object.hasOwnProperty.call(_e,"account")&&_t.uint32(18).string(_e.account),_e.attributes!=null&&_e.attributes.length)for(var Vt=0;Vt<_e.attributes.length;++Vt)_t.uint32(26).string(_e.attributes[Vt]);return _t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.UserAttributeDel;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.account=_e.string();break;case 3:Vt.attributes&&Vt.attributes.length||(Vt.attributes=[]),Vt.attributes.push(_e.string());break;default:_e.skipType(7&Wt)}}return Vt},$}(),yB=t.UserAttributeErr=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.code=0,$.encode=function(_e,_t){return _t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.code!=null&&Object.hasOwnProperty.call(_e,"code")&&_t.uint32(16).uint32(_e.code),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.UserAttributeErr;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.code=_e.uint32();break;default:_e.skipType(7&Wt)}}return Vt},$}(),zB=t.UserAttributeKeysGet=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.account="",$.encode=function(_e,_t){return _t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.account!=null&&Object.hasOwnProperty.call(_e,"account")&&_t.uint32(18).string(_e.account),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.UserAttributeKeysGet;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.account=_e.string();break;default:_e.skipType(7&Wt)}}return Vt},$}(),AB=t.UserAttributeKeysRet=function(){function $(_e){if(this.keys=[],_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.keys=q.emptyArray,$.encode=function(_e,_t){if(_t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.keys!=null&&_e.keys.length)for(var Vt=0;Vt<_e.keys.length;++Vt)_t.uint32(18).string(_e.keys[Vt]);return _t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.UserAttributeKeysRet;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.keys&&Vt.keys.length||(Vt.keys=[]),Vt.keys.push(_e.string());break;default:_e.skipType(7&Wt)}}return Vt},$}(),BB=t.UserAttributeRsp=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.encode=function(_e,_t){return _t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.UserAttributeRsp;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;default:_e.skipType(7&Wt)}}return Vt},$}(),CB=t.GroupStatusList=function(){function $(_e){if(this.groups=[],_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.groups=q.emptyArray,$.encode=function(_e,_t){if(_t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.groups!=null&&_e.groups.length)for(var Vt=0;Vt<_e.groups.length;++Vt)_t.uint32(18).string(_e.groups[Vt]);return _t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.GroupStatusList;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.groups&&Vt.groups.length||(Vt.groups=[]),Vt.groups.push(_e.string());break;default:_e.skipType(7&Wt)}}return Vt},$}(),DB=t.GroupStatusResult=function(){function $(_e){if(this.groupInfos=[],_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.groupInfos=q.emptyArray,$.encode=function(_e,_t){if(_t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.groupInfos!=null&&_e.groupInfos.length)for(var Vt=0;Vt<_e.groupInfos.length;++Vt)t.GroupStatusResult.GroupInfo.encode(_e.groupInfos[Vt],_t.uint32(18).fork()).ldelim();return _t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.GroupStatusResult;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.groupInfos&&Vt.groupInfos.length||(Vt.groupInfos=[]),Vt.groupInfos.push(t.GroupStatusResult.GroupInfo.decode(_e,_e.uint32()));break;default:_e.skipType(7&Wt)}}return Vt},$.GroupInfo=function(){function _e(_t){if(_t)for(var Vt=Object.keys(_t),Wt=0;Wt<Vt.length;++Wt)_t[Vt[Wt]]!=null&&(this[Vt[Wt]]=_t[Vt[Wt]])}return _e.prototype.group="",_e.prototype.memberCount=0,_e.encode=function(_t,Vt){return Vt||(Vt=L.create()),_t.group!=null&&Object.hasOwnProperty.call(_t,"group")&&Vt.uint32(10).string(_t.group),_t.memberCount!=null&&Object.hasOwnProperty.call(_t,"memberCount")&&Vt.uint32(16).uint32(_t.memberCount),Vt},_e.decode=function(_t,Vt){_t instanceof u||(_t=u.create(_t)),Vt=Vt===void 0?_t.len:_t.pos+Vt;for(var Wt=new t.GroupStatusResult.GroupInfo;_t.pos<Vt;){var _i=_t.uint32();switch(_i>>>3){case 1:Wt.group=_t.string();break;case 2:Wt.memberCount=_t.uint32();break;default:_t.skipType(7&_i)}}return Wt},_e}(),$}(),EB=t.GroupCountNotice=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.group="",$.prototype.size=0,$.encode=function(_e,_t){return _t||(_t=L.create()),_e.instance!=null&&Object.hasOwnProperty.call(_e,"instance")&&_t.uint32(8).uint64(_e.instance),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(16).uint64(_e.seq),_e.group!=null&&Object.hasOwnProperty.call(_e,"group")&&_t.uint32(26).string(_e.group),_e.size!=null&&Object.hasOwnProperty.call(_e,"size")&&_t.uint32(32).uint32(_e.size),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.GroupCountNotice;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.instance=_e.uint64();break;case 2:Vt.seq=_e.uint64();break;case 3:Vt.group=_e.string();break;case 4:Vt.size=_e.uint32();break;default:_e.skipType(7&Wt)}}return Vt},$}(),FB=t.GroupAttributeGet=function(){function $(_e){if(this.attributes=[],_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.group="",$.prototype.attributes=q.emptyArray,$.encode=function(_e,_t){if(_t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.group!=null&&Object.hasOwnProperty.call(_e,"group")&&_t.uint32(18).string(_e.group),_e.attributes!=null&&_e.attributes.length)for(var Vt=0;Vt<_e.attributes.length;++Vt)_t.uint32(26).string(_e.attributes[Vt]);return _t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.GroupAttributeGet;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.group=_e.string();break;case 3:Vt.attributes&&Vt.attributes.length||(Vt.attributes=[]),Vt.attributes.push(_e.string());break;default:_e.skipType(7&Wt)}}return Vt},$}(),GB=t.GroupAttributeRet=function(){function $(_e){if(this.attributeMaps=[],_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.attributeMaps=q.emptyArray,$.encode=function(_e,_t){if(_t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.attributeMaps!=null&&_e.attributeMaps.length)for(var Vt=0;Vt<_e.attributeMaps.length;++Vt)t.GroupAttributeRet.AttributeMap.encode(_e.attributeMaps[Vt],_t.uint32(18).fork()).ldelim();return _t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.GroupAttributeRet;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.attributeMaps&&Vt.attributeMaps.length||(Vt.attributeMaps=[]),Vt.attributeMaps.push(t.GroupAttributeRet.AttributeMap.decode(_e,_e.uint32()));break;default:_e.skipType(7&Wt)}}return Vt},$.AttributeMap=function(){function _e(_t){if(_t)for(var Vt=Object.keys(_t),Wt=0;Wt<Vt.length;++Wt)_t[Vt[Wt]]!=null&&(this[Vt[Wt]]=_t[Vt[Wt]])}return _e.prototype.key="",_e.prototype.value="",_e.prototype.origin="",_e.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,_e.encode=function(_t,Vt){return Vt||(Vt=L.create()),_t.key!=null&&Object.hasOwnProperty.call(_t,"key")&&Vt.uint32(10).string(_t.key),_t.value!=null&&Object.hasOwnProperty.call(_t,"value")&&Vt.uint32(18).string(_t.value),_t.origin!=null&&Object.hasOwnProperty.call(_t,"origin")&&Vt.uint32(26).string(_t.origin),_t.ms!=null&&Object.hasOwnProperty.call(_t,"ms")&&Vt.uint32(32).uint64(_t.ms),Vt},_e.decode=function(_t,Vt){_t instanceof u||(_t=u.create(_t)),Vt=Vt===void 0?_t.len:_t.pos+Vt;for(var Wt=new t.GroupAttributeRet.AttributeMap;_t.pos<Vt;){var _i=_t.uint32();switch(_i>>>3){case 1:Wt.key=_t.string();break;case 2:Wt.value=_t.string();break;case 3:Wt.origin=_t.string();break;case 4:Wt.ms=_t.uint64();break;default:_t.skipType(7&_i)}}return Wt},_e}(),$}(),HB=t.GroupAttributeSet=function(){function $(_e){if(this.attributeInfos=[],_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.group="",$.prototype.broadcast=!1,$.prototype.attributeInfos=q.emptyArray,$.encode=function(_e,_t){if(_t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.group!=null&&Object.hasOwnProperty.call(_e,"group")&&_t.uint32(18).string(_e.group),_e.broadcast!=null&&Object.hasOwnProperty.call(_e,"broadcast")&&_t.uint32(24).bool(_e.broadcast),_e.attributeInfos!=null&&_e.attributeInfos.length)for(var Vt=0;Vt<_e.attributeInfos.length;++Vt)t.GroupAttributeSet.AttributeInfo.encode(_e.attributeInfos[Vt],_t.uint32(34).fork()).ldelim();return _t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.GroupAttributeSet;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.group=_e.string();break;case 3:Vt.broadcast=_e.bool();break;case 4:Vt.attributeInfos&&Vt.attributeInfos.length||(Vt.attributeInfos=[]),Vt.attributeInfos.push(t.GroupAttributeSet.AttributeInfo.decode(_e,_e.uint32()));break;default:_e.skipType(7&Wt)}}return Vt},$.AttributeInfo=function(){function _e(_t){if(_t)for(var Vt=Object.keys(_t),Wt=0;Wt<Vt.length;++Wt)_t[Vt[Wt]]!=null&&(this[Vt[Wt]]=_t[Vt[Wt]])}return _e.prototype.key="",_e.prototype.value="",_e.encode=function(_t,Vt){return Vt||(Vt=L.create()),_t.key!=null&&Object.hasOwnProperty.call(_t,"key")&&Vt.uint32(10).string(_t.key),_t.value!=null&&Object.hasOwnProperty.call(_t,"value")&&Vt.uint32(18).string(_t.value),Vt},_e.decode=function(_t,Vt){_t instanceof u||(_t=u.create(_t)),Vt=Vt===void 0?_t.len:_t.pos+Vt;for(var Wt=new t.GroupAttributeSet.AttributeInfo;_t.pos<Vt;){var _i=_t.uint32();switch(_i>>>3){case 1:Wt.key=_t.string();break;case 2:Wt.value=_t.string();break;default:_t.skipType(7&_i)}}return Wt},_e}(),$}(),IB=t.GroupAttributeMod=function(){function $(_e){if(this.attributeInfos=[],_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.group="",$.prototype.broadcast=!1,$.prototype.attributeInfos=q.emptyArray,$.encode=function(_e,_t){if(_t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.group!=null&&Object.hasOwnProperty.call(_e,"group")&&_t.uint32(18).string(_e.group),_e.broadcast!=null&&Object.hasOwnProperty.call(_e,"broadcast")&&_t.uint32(24).bool(_e.broadcast),_e.attributeInfos!=null&&_e.attributeInfos.length)for(var Vt=0;Vt<_e.attributeInfos.length;++Vt)t.GroupAttributeMod.AttributeInfo.encode(_e.attributeInfos[Vt],_t.uint32(34).fork()).ldelim();return _t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.GroupAttributeMod;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.group=_e.string();break;case 3:Vt.broadcast=_e.bool();break;case 4:Vt.attributeInfos&&Vt.attributeInfos.length||(Vt.attributeInfos=[]),Vt.attributeInfos.push(t.GroupAttributeMod.AttributeInfo.decode(_e,_e.uint32()));break;default:_e.skipType(7&Wt)}}return Vt},$.AttributeInfo=function(){function _e(_t){if(_t)for(var Vt=Object.keys(_t),Wt=0;Wt<Vt.length;++Wt)_t[Vt[Wt]]!=null&&(this[Vt[Wt]]=_t[Vt[Wt]])}return _e.prototype.key="",_e.prototype.value="",_e.encode=function(_t,Vt){return Vt||(Vt=L.create()),_t.key!=null&&Object.hasOwnProperty.call(_t,"key")&&Vt.uint32(10).string(_t.key),_t.value!=null&&Object.hasOwnProperty.call(_t,"value")&&Vt.uint32(18).string(_t.value),Vt},_e.decode=function(_t,Vt){_t instanceof u||(_t=u.create(_t)),Vt=Vt===void 0?_t.len:_t.pos+Vt;for(var Wt=new t.GroupAttributeMod.AttributeInfo;_t.pos<Vt;){var _i=_t.uint32();switch(_i>>>3){case 1:Wt.key=_t.string();break;case 2:Wt.value=_t.string();break;default:_t.skipType(7&_i)}}return Wt},_e}(),$}(),JB=t.GroupAttributeDel=function(){function $(_e){if(this.attributes=[],_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.group="",$.prototype.broadcast=!1,$.prototype.attributes=q.emptyArray,$.encode=function(_e,_t){if(_t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.group!=null&&Object.hasOwnProperty.call(_e,"group")&&_t.uint32(18).string(_e.group),_e.broadcast!=null&&Object.hasOwnProperty.call(_e,"broadcast")&&_t.uint32(24).bool(_e.broadcast),_e.attributes!=null&&_e.attributes.length)for(var Vt=0;Vt<_e.attributes.length;++Vt)_t.uint32(34).string(_e.attributes[Vt]);return _t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.GroupAttributeDel;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.group=_e.string();break;case 3:Vt.broadcast=_e.bool();break;case 4:Vt.attributes&&Vt.attributes.length||(Vt.attributes=[]),Vt.attributes.push(_e.string());break;default:_e.skipType(7&Wt)}}return Vt},$}(),KB=t.GroupAttributeAlt=function(){function $(_e){if(this.attributeMaps=[],_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.group="",$.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.attributeMaps=q.emptyArray,$.encode=function(_e,_t){if(_t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.group!=null&&Object.hasOwnProperty.call(_e,"group")&&_t.uint32(18).string(_e.group),_e.instance!=null&&Object.hasOwnProperty.call(_e,"instance")&&_t.uint32(24).uint64(_e.instance),_e.attributeMaps!=null&&_e.attributeMaps.length)for(var Vt=0;Vt<_e.attributeMaps.length;++Vt)t.GroupAttributeAlt.AttributeMap.encode(_e.attributeMaps[Vt],_t.uint32(34).fork()).ldelim();return _t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.GroupAttributeAlt;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.group=_e.string();break;case 3:Vt.instance=_e.uint64();break;case 4:Vt.attributeMaps&&Vt.attributeMaps.length||(Vt.attributeMaps=[]),Vt.attributeMaps.push(t.GroupAttributeAlt.AttributeMap.decode(_e,_e.uint32()));break;default:_e.skipType(7&Wt)}}return Vt},$.AttributeMap=function(){function _e(_t){if(_t)for(var Vt=Object.keys(_t),Wt=0;Wt<Vt.length;++Wt)_t[Vt[Wt]]!=null&&(this[Vt[Wt]]=_t[Vt[Wt]])}return _e.prototype.key="",_e.prototype.value="",_e.prototype.origin="",_e.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,_e.encode=function(_t,Vt){return Vt||(Vt=L.create()),_t.key!=null&&Object.hasOwnProperty.call(_t,"key")&&Vt.uint32(10).string(_t.key),_t.value!=null&&Object.hasOwnProperty.call(_t,"value")&&Vt.uint32(18).string(_t.value),_t.origin!=null&&Object.hasOwnProperty.call(_t,"origin")&&Vt.uint32(26).string(_t.origin),_t.ms!=null&&Object.hasOwnProperty.call(_t,"ms")&&Vt.uint32(32).uint64(_t.ms),Vt},_e.decode=function(_t,Vt){_t instanceof u||(_t=u.create(_t)),Vt=Vt===void 0?_t.len:_t.pos+Vt;for(var Wt=new t.GroupAttributeAlt.AttributeMap;_t.pos<Vt;){var _i=_t.uint32();switch(_i>>>3){case 1:Wt.key=_t.string();break;case 2:Wt.value=_t.string();break;case 3:Wt.origin=_t.string();break;case 4:Wt.ms=_t.uint64();break;default:_t.skipType(7&_i)}}return Wt},_e}(),$}(),LB=t.GroupAttributeRsp=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.encode=function(_e,_t){return _t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.GroupAttributeRsp;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;default:_e.skipType(7&Wt)}}return Vt},$}(),MB=t.GroupAttributeErr=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.code=0,$.encode=function(_e,_t){return _t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.code!=null&&Object.hasOwnProperty.call(_e,"code")&&_t.uint32(16).uint32(_e.code),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.GroupAttributeErr;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.code=_e.uint32();break;default:_e.skipType(7&Wt)}}return Vt},$}(),NB=t.GroupAttributeKeysGet=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.group="",$.encode=function(_e,_t){return _t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.group!=null&&Object.hasOwnProperty.call(_e,"group")&&_t.uint32(18).string(_e.group),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.GroupAttributeKeysGet;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.group=_e.string();break;default:_e.skipType(7&Wt)}}return Vt},$}(),OB=t.GroupAttributeKeysRet=function(){function $(_e){if(this.keys=[],_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.keys=q.emptyArray,$.encode=function(_e,_t){if(_t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.keys!=null&&_e.keys.length)for(var Vt=0;Vt<_e.keys.length;++Vt)_t.uint32(18).string(_e.keys[Vt]);return _t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.GroupAttributeKeysRet;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.keys&&Vt.keys.length||(Vt.keys=[]),Vt.keys.push(_e.string());break;default:_e.skipType(7&Wt)}}return Vt},$}(),PB=t.SubscribeUserStatus=function(){function $(_e){if(this.users=[],_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.users=q.emptyArray,$.encode=function(_e,_t){if(_t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.users!=null&&_e.users.length)for(var Vt=0;Vt<_e.users.length;++Vt)_t.uint32(18).string(_e.users[Vt]);return _t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.SubscribeUserStatus;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.users&&Vt.users.length||(Vt.users=[]),Vt.users.push(_e.string());break;default:_e.skipType(7&Wt)}}return Vt},$}(),QB=t.UnsubscribeUserStatus=function(){function $(_e){if(this.users=[],_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.users=q.emptyArray,$.encode=function(_e,_t){if(_t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.users!=null&&_e.users.length)for(var Vt=0;Vt<_e.users.length;++Vt)_t.uint32(18).string(_e.users[Vt]);return _t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.UnsubscribeUserStatus;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.users&&Vt.users.length||(Vt.users=[]),Vt.users.push(_e.string());break;default:_e.skipType(7&Wt)}}return Vt},$}(),RB=t.UserJoinNotice=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.user="",$.encode=function(_e,_t){return _t||(_t=L.create()),_e.instance!=null&&Object.hasOwnProperty.call(_e,"instance")&&_t.uint32(8).uint64(_e.instance),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(16).uint64(_e.seq),_e.user!=null&&Object.hasOwnProperty.call(_e,"user")&&_t.uint32(26).string(_e.user),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.UserJoinNotice;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.instance=_e.uint64();break;case 2:Vt.seq=_e.uint64();break;case 3:Vt.user=_e.string();break;default:_e.skipType(7&Wt)}}return Vt},$}(),SB=t.UserQuitNotice=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.user="",$.encode=function(_e,_t){return _t||(_t=L.create()),_e.instance!=null&&Object.hasOwnProperty.call(_e,"instance")&&_t.uint32(8).uint64(_e.instance),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(16).uint64(_e.seq),_e.user!=null&&Object.hasOwnProperty.call(_e,"user")&&_t.uint32(26).string(_e.user),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.UserQuitNotice;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.instance=_e.uint64();break;case 2:Vt.seq=_e.uint64();break;case 3:Vt.user=_e.string();break;default:_e.skipType(7&Wt)}}return Vt},$}(),TB=t.UserWaitNotice=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.user="",$.encode=function(_e,_t){return _t||(_t=L.create()),_e.instance!=null&&Object.hasOwnProperty.call(_e,"instance")&&_t.uint32(8).uint64(_e.instance),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(16).uint64(_e.seq),_e.user!=null&&Object.hasOwnProperty.call(_e,"user")&&_t.uint32(26).string(_e.user),_t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.UserWaitNotice;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.instance=_e.uint64();break;case 2:Vt.seq=_e.uint64();break;case 3:Vt.user=_e.string();break;default:_e.skipType(7&Wt)}}return Vt},$}(),UB=t.SubscribeResponse=function(){function $(_e){if(this.errors=[],_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,$.prototype.errors=q.emptyArray,$.encode=function(_e,_t){if(_t||(_t=L.create()),_e.seq!=null&&Object.hasOwnProperty.call(_e,"seq")&&_t.uint32(8).uint64(_e.seq),_e.errors!=null&&_e.errors.length)for(var Vt=0;Vt<_e.errors.length;++Vt)t.SubscribeResponse.SubscribeErrorsType.encode(_e.errors[Vt],_t.uint32(18).fork()).ldelim();return _t},$.decode=function(_e,_t){_e instanceof u||(_e=u.create(_e)),_t=_t===void 0?_e.len:_e.pos+_t;for(var Vt=new t.SubscribeResponse;_e.pos<_t;){var Wt=_e.uint32();switch(Wt>>>3){case 1:Vt.seq=_e.uint64();break;case 2:Vt.errors&&Vt.errors.length||(Vt.errors=[]),Vt.errors.push(t.SubscribeResponse.SubscribeErrorsType.decode(_e,_e.uint32()));break;default:_e.skipType(7&Wt)}}return Vt},$.SubscribeErrorsType=function(){function _e(_t){if(_t)for(var Vt=Object.keys(_t),Wt=0;Wt<Vt.length;++Wt)_t[Vt[Wt]]!=null&&(this[Vt[Wt]]=_t[Vt[Wt]])}return _e.prototype.account="",_e.prototype.code=0,_e.encode=function(_t,Vt){return Vt||(Vt=L.create()),_t.account!=null&&Object.hasOwnProperty.call(_t,"account")&&Vt.uint32(10).string(_t.account),_t.code!=null&&Object.hasOwnProperty.call(_t,"code")&&Vt.uint32(16).uint32(_t.code),Vt},_e.decode=function(_t,Vt){_t instanceof u||(_t=u.create(_t)),Vt=Vt===void 0?_t.len:_t.pos+Vt;for(var Wt=new t.SubscribeResponse.SubscribeErrorsType;_t.pos<Vt;){var _i=_t.uint32();switch(_i>>>3){case 1:Wt.account=_t.string();break;case 2:Wt.code=_t.uint32();break;default:_t.skipType(7&_i)}}return Wt},_e}(),$}(),VB=Object.freeze({__proto__:null,URI:YA,Wrapper:Oh,Ping:ZA,Pong:$A,UserJoin:aB,UserResp:bB,UserQuit:cB,UserDrop:dB,GroupEnter:eB,GroupLeave:fB,GroupReply:gB,GroupLeaveNotice:ur,GroupEnterNotice:vr,Message:wr,Ack:xr,FileUploadIndexGet:hB,FileUploadIndexRet:iB,FileUploadIndexSet:jB,FileUploadIndexFin:kB,FileUploadIndexErr:lB,FileDownloadIndexGet:mB,FileDownloadIndexRet:nB,FileDownloadIndexErr:oB,GroupAllUsersList:pB,GroupAllUsersResult:qB,UserStatusList:rB,UserStatusResult:sB,UserAttributeGet:tB,UserAttributeRet:uB,UserAttributeSet:vB,UserAttributeMod:wB,UserAttributeDel:xB,UserAttributeErr:yB,UserAttributeKeysGet:zB,UserAttributeKeysRet:AB,UserAttributeRsp:BB,GroupStatusList:CB,GroupStatusResult:DB,GroupCountNotice:EB,GroupAttributeGet:FB,GroupAttributeRet:GB,GroupAttributeSet:HB,GroupAttributeMod:IB,GroupAttributeDel:JB,GroupAttributeAlt:KB,GroupAttributeRsp:LB,GroupAttributeErr:MB,GroupAttributeKeysGet:NB,GroupAttributeKeysRet:OB,SubscribeUserStatus:PB,UnsubscribeUserStatus:QB,UserJoinNotice:RB,UserQuitNotice:SB,UserWaitNotice:TB,SubscribeResponse:UB,default:t}),WB=Math.ceil,yr=function($){return function(_e,_t,Vt){var Wt=(_e=String(jb(_e))).length;return Vt=Vt===void 0?" ":String(Vt),(_t=ta(_t))<=Wt||Vt==""?_e:(_t-=Wt,(Wt=Pn.call(Vt,WB(_t/Vt.length))).length>_t&&(Wt=Wt.slice(0,_t)),$?_e+Wt:Wt+_e)}},XB=yr(!1),YB=yr(!0),zr=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(De);N({target:"String",proto:!0,forced:zr},{padEnd:function($){return YB(this,$,1<arguments.length?arguments[1]:void 0)}});var ZB=zf,Ar=function($){return function(_e){_e=qb(_e);for(var _t,Vt=Dc(_e),Wt=Vt.length,_i=0,_s=[];Wt>_i;)_t=Vt[_i++],ka&&!ZB.call(_e,_t)||_s.push($?[_t,_e[_t]]:_e[_t]);return _s}},$B=Ar(!0),aC=Ar(!1);N({target:"Object",stat:!0},{entries:function($){return $B($)}});var bC=Fb.f,Br="".endsWith,cC=Math.min,Cr=dk("endsWith"),dC=!Cr&&!!function(){var $=bC(String.prototype,"endsWith");return $&&!$.writable}();N({target:"String",proto:!0,forced:!dC&&!Cr},{endsWith:function($){var _e=String(jb(this));ck($);var _t=1<arguments.length?arguments[1]:void 0,Vt=ta(_e.length);return _t=_t===void 0?Vt:cC(ta(_t),Vt),Vt=String($),Br?Br.call(_e,Vt,_t):_e.slice(_t-Vt.length,_t)===Vt}}),dh("match",1,function($,_e,_t){return[function(Vt){var Wt=jb(this),_i=Vt==null?void 0:Vt[$];return _i!==void 0?_i.call(Vt,Wt):new RegExp(Vt)[$](String(Wt))},function(Vt){var Wt=_t(_e,Vt,this);if(Wt.done)return Wt.value;if(Vt=va(Vt),Wt=String(this),!Vt.global)return Ke(Vt,Wt);var _i=Vt.unicode;Vt.lastIndex=0;for(var _s,_c=[],_l=0;(_s=Ke(Vt,Wt))!==null;)_s=String(_s[0]),_c[_l]=_s,_s===""&&(Vt.lastIndex=xj(Wt,ta(Vt.lastIndex),_i)),_l++;return _l===0?null:_c}]});var eC=Fb.f,Dr="".startsWith,fC=Math.min,Er=dk("startsWith"),gC=!Er&&!!function(){var $=eC(String.prototype,"startsWith");return $&&!$.writable}();N({target:"String",proto:!0,forced:!gC&&!Er},{startsWith:function($){var _e=String(jb(this));ck($);var _t=ta(fC(1<arguments.length?arguments[1]:void 0,_e.length)),Vt=String($);return Dr?Dr.call(_e,Vt,_t):_e.slice(_t,_t+Vt.length)===Vt}});var Nm=function($){var _e=/(%?)(%([jds]))/g,_t=Array.prototype.slice.call(arguments,1);return _t.length&&($=$.replace(_e,function(Vt,Wt,_i,_s){switch(_i=_t.shift(),_s){case"s":_i=""+_i;break;case"d":_i=Number(_i);break;case"j":_i=JSON.stringify(_i)}return Wt?(_t.unshift(_i),Vt):_i})),_t.length&&($+=" "+_t.join(" ")),""+($=$.replace(/%{2,2}/g,"%"))},hC=/\s/,iC=function($){for(var _e=$.length;_e--&&hC.test($.charAt(_e)););return _e},jC=/^\s+/,Fr=NaN,kC=/^[-+]0x[0-9a-f]+$/i,lC=/^0b[01]+$/i,mC=/^0o[0-7]+$/i,nC=parseInt,gl=function($){if(typeof $=="number")return $;if(ie($))return Fr;if(lb($)&&($=typeof $.valueOf=="function"?$.valueOf():$,$=lb($)?$+"":$),typeof $!="string")return $===0?$:+$;$=$&&$.slice(0,iC($)+1).replace(jC,"");var _e=lC.test($);return _e||mC.test($)?nC($.slice(2),_e?2:8):kC.test($)?Fr:+$},oC=Math.max,pC=Math.min,qC=function($,_e,_t){function Vt(d_){var f_=_l,S_=_d;return _l=_d=void 0,i_=d_,_m=$.apply(S_,f_)}function Wt(d_){var f_=d_-t_;return d_-=i_,t_===void 0||f_>=_e||0>f_||h_&&d_>=l_}function _i(){var d_=Cb.Date.now();if(Wt(d_))return _s(d_);var f_=setTimeout,S_=d_-i_;d_=_e-(d_-t_),S_=h_?pC(d_,l_-S_):d_,e_=f_(_i,S_)}function _s(d_){return e_=void 0,y_&&_l?Vt(d_):(_l=_d=void 0,_m)}function _c(){var d_=Cb.Date.now(),f_=Wt(d_);if(_l=arguments,_d=this,t_=d_,f_){if(e_===void 0)return i_=d_=t_,e_=setTimeout(_i,_e),c_?Vt(d_):_m;if(h_)return clearTimeout(e_),e_=setTimeout(_i,_e),Vt(t_)}return e_===void 0&&(e_=setTimeout(_i,_e)),_m}var _l,_d,_m,e_,t_,i_=0,c_=!1,h_=!1,y_=!0;if(typeof $!="function")throw new TypeError("Expected a function");if(_e=gl(_e)||0,lb(_t)){c_=!!_t.leading;var l_=(h_="maxWait"in _t)?oC(gl(_t.maxWait)||0,_e):l_;y_="trailing"in _t?!!_t.trailing:y_}return _c.cancel=function(){e_!==void 0&&clearTimeout(e_),i_=0,_l=t_=_d=e_=void 0},_c.flush=function(){return e_===void 0?_m:_s(Cb.Date.now())},_c},yc=function($){function _e(Vt,Wt){return W(this,_e),m(n(Vt=_t.call(this,Mm(Vt,Wt))),"originalError",void 0),m(n(Vt),"code",void 0),m(n(Vt),"serverCode",void 0),typeof Wt=="number"?Vt.code=Wt:typeof Wt=="string"?Vt.name=Wt:Wt!==void 0&&(Wt.originalError&&(Vt.originalError=Wt.originalError),Wt.code!==void 0&&(Vt.code=Wt.code),Wt.serverCode!==void 0&&(Vt.serverCode=Wt.serverCode)),Vt}la(_e,$);var _t=ma(_e);return _e}(ef(Error)),Ia=function($){function _e(Vt,Wt){return W(this,_e),m(n(Vt=_t.call(this,Mm(Vt,Wt))),"name","RtmInternalError"),m(n(Vt),"code",void 0),Vt.code=Wt,Vt}la(_e,$);var _t=ma(_e);return _e}(ef(Error)),Ph=function(){return function($){function _e(Vt){W(this,_e);var Wt=Object.keys(Vt);return _t.call(this,Vt[Wt[0]],Wt[0])}la(_e,$);var _t=ma(_e);return _e}(Ia)},Fa=Ph(),db=function($){function _e(){W(this,_e);for(var Vt=arguments.length,Wt=Array(Vt),_i=0;_i<Vt;_i++)Wt[_i]=arguments[_i];return m(n(Vt=_t.call.apply(_t,[this].concat(Wt))),"name","RtmTimeoutError"),Vt}la(_e,$);var _t=ma(_e);return _e}(yc),I=function($){function _e(){W(this,_e);for(var Vt=arguments.length,Wt=Array(Vt),_i=0;_i<Vt;_i++)Wt[_i]=arguments[_i];return m(n(Vt=_t.call.apply(_t,[this].concat(Wt))),"name","RtmInvalidArgumentError"),Vt}la(_e,$);var _t=ma(_e);return _e}(yc),K=function($){function _e(){W(this,_e);for(var Vt=arguments.length,Wt=Array(Vt),_i=0;_i<Vt;_i++)Wt[_i]=arguments[_i];return m(n(Vt=_t.call.apply(_t,[this].concat(Wt))),"name","RtmInvalidStatusError"),Vt}la(_e,$);var _t=ma(_e);return _e}(yc),hl=function($){function _e(){W(this,_e);for(var Vt=arguments.length,Wt=Array(Vt),_i=0;_i<Vt;_i++)Wt[_i]=arguments[_i];return m(n(Vt=_t.call.apply(_t,[this].concat(Wt))),"name","RtmInterruptedError"),Vt}la(_e,$);var _t=ma(_e);return _e}(yc),ib=function($){function _e(){W(this,_e);for(var Vt=arguments.length,Wt=Array(Vt),_i=0;_i<Vt;_i++)Wt[_i]=arguments[_i];return m(n(Vt=_t.call.apply(_t,[this].concat(Wt))),"name","RtmLimitExceededError"),Vt}la(_e,$);var _t=ma(_e);return _e}(yc),rC=function($){function _e(){W(this,_e);for(var Vt=arguments.length,Wt=Array(Vt),_i=0;_i<Vt;_i++)Wt[_i]=arguments[_i];return m(n(Vt=_t.call.apply(_t,[this].concat(Wt))),"name","RtmInvokeTooOftenError"),Vt}la(_e,$);var _t=ma(_e);return _e}(yc),da=function($){function _e(){W(this,_e);for(var Vt=arguments.length,Wt=Array(Vt),_i=0;_i<Vt;_i++)Wt[_i]=arguments[_i];return m(n(Vt=_t.call.apply(_t,[this].concat(Wt))),"name","RtmUnavailableError"),m(n(Vt),"serverCode",void 0),m(n(Vt),"statusCode",void 0),Vt}la(_e,$);var _t=ma(_e);return _e}(yc),Ye=function($){function _e(){W(this,_e);for(var Vt=arguments.length,Wt=Array(Vt),_i=0;_i<Vt;_i++)Wt[_i]=arguments[_i];return m(n(Vt=_t.call.apply(_t,[this].concat(Wt))),"name","RtmUnauthenticatedError"),m(n(Vt),"serverCode",void 0),Vt}la(_e,$);var _t=ma(_e);return _e}(yc),Wc=function($){function _e(){W(this,_e);for(var Vt=arguments.length,Wt=Array(Vt),_i=0;_i<Vt;_i++)Wt[_i]=arguments[_i];return m(n(Vt=_t.call.apply(_t,[this].concat(Wt))),"name","RtmUnknownError"),Vt}la(_e,$);var _t=ma(_e);return _e}(yc),Sa=function($){return $ instanceof db||$ instanceof pb},sa=function($){return $ instanceof yc},Yd=function($,_e,_t){return['Executing "%s.%s" timed out after %ds',$,_e,_t/1e3]},Lm=new Map,sC=function(){var $=new Date;return"".concat($.toISOString().split("T")[1].replace(/\..+/,""),".").concat($.getMilliseconds())},xf=Object.keys,Hg=Object.entries.bind(Object),Cg=function($){return typeof $=="string"?$.endsWith(".")?$:"".concat($,"."):$},Sm=function($){for(var _e="",_t=($=new Uint8Array($)).byteLength,Vt=-1;++Vt<_t;)_e+=String.fromCharCode($[Vt]);return _e=btoa(_e),"data:;base64,".concat(_e)},tC=R(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});N({target:"Date",proto:!0,forced:tC},{toJSON:function($){$=Qa(this);var _e=lc($);return typeof _e!="number"||isFinite(_e)?$.toISOString():null}}),N({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});var $t=Object.prototype.hasOwnProperty,Gr=function($,_e,_t){return JSON.stringify(Ym($),_e,_t)};Gr.ensureProperties=Ym;var uC=function($,_e){_e=_e||{};var _t=X($);if(_t==="string"&&0<$.length)return au($);if(_t==="number"&&isFinite($))return _e.long?$=864e5<=(_e=Math.abs($))?Jg($,_e,864e5,"day"):36e5<=_e?Jg($,_e,36e5,"hour"):6e4<=_e?Jg($,_e,6e4,"minute"):1e3<=_e?Jg($,_e,1e3,"second"):$+" ms":$=864e5<=(_e=Math.abs($))?Math.round($/864e5)+"d":36e5<=_e?Math.round($/36e5)+"h":6e4<=_e?Math.round($/6e4)+"m":1e3<=_e?Math.round($/1e3)+"s":$+"ms",$;throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify($))},vC=function($){function _e(Wt){function _i(){for(var _l=arguments.length,_d=Array(_l),_m=0;_m<_l;_m++)_d[_m]=arguments[_m];if(_i.enabled){_l=Number(new Date),_i.diff=_l-(_s||_l),_i.prev=_s,_s=_i.curr=_l,_d[0]=_e.coerce(_d[0]),typeof _d[0]!="string"&&_d.unshift("%O");var e_=0;_d[0]=_d[0].replace(/%([a-zA-Z%])/g,function(t_,i_){return t_==="%%"?"%":(e_++,typeof(i_=_e.formatters[i_])=="function"&&(t_=i_.call(_i,_d[e_]),_d.splice(e_,1),e_--),t_)}),_e.formatArgs.call(_i,_d),(_i.log||_e.log).apply(_i,_d)}}var _s,_c=null;return _i.namespace=Wt,_i.useColors=_e.useColors(),_i.color=_e.selectColor(Wt),_i.extend=_t,_i.destroy=_e.destroy,Object.defineProperty(_i,"enabled",{enumerable:!0,configurable:!1,get:function(){return _c===null?_e.enabled(Wt):_c},set:function(_l){_c=_l}}),typeof _e.init=="function"&&_e.init(_i),_i}function _t(Wt,_i){return(Wt=_e(this.namespace+(_i===void 0?":":_i)+Wt)).log=this.log,Wt}function Vt(Wt){return Wt.toString().substring(2,Wt.toString().length-2).replace(/\.\*\?$/,"*")}return _e.debug=_e,_e.default=_e,_e.coerce=function(Wt){return Wt instanceof Error?Wt.stack||Wt.message:Wt},_e.disable=function(){var Wt=[].concat(G(_e.names.map(Vt)),G(_e.skips.map(Vt).map(function(_i){return"-"+_i}))).join(",");return _e.enable(""),Wt},_e.enable=function(Wt){_e.save(Wt),_e.names=[],_e.skips=[];var _i,_s=(typeof Wt=="string"?Wt:"").split(/[\s,]+/),_c=_s.length;for(_i=0;_i<_c;_i++)_s[_i]&&((Wt=_s[_i].replace(/\*/g,".*?"))[0]==="-"?_e.skips.push(new RegExp("^"+Wt.substr(1)+"$")):_e.names.push(new RegExp("^"+Wt+"$")))},_e.enabled=function(Wt){if(Wt[Wt.length-1]==="*")return!0;var _i,_s=0;for(_i=_e.skips.length;_s<_i;_s++)if(_e.skips[_s].test(Wt))return!1;for(_s=0,_i=_e.names.length;_s<_i;_s++)if(_e.names[_s].test(Wt))return!0;return!1},_e.humanize=uC,_e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys($).forEach(function(Wt){_e[Wt]=$[Wt]}),_e.names=[],_e.skips=[],_e.formatters={},_e.selectColor=function(Wt){for(var _i=0,_s=0;_s<Wt.length;_s++)_i=(_i<<5)-_i+Wt.charCodeAt(_s),_i|=0;return _e.colors[Math.abs(_i)%_e.colors.length]},_e.enable(_e.load()),_e},Hr=$a(function($,_e){_e.formatArgs=function(Vt){if(Vt[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+Vt[0]+(this.useColors?"%c ":" ")+"+"+$.exports.humanize(this.diff),this.useColors){var Wt="color: "+this.color;Vt.splice(1,0,Wt,"color: inherit");var _i=0,_s=0;Vt[0].replace(/%[a-zA-Z%]/g,function(_c){_c!=="%%"&&(_i++,_c==="%c"&&(_s=_i))}),Vt.splice(_s,0,Wt)}},_e.save=function(Vt){try{Vt?_e.storage.setItem("debug",Vt):_e.storage.removeItem("debug")}catch{}},_e.load=function(){try{var Vt=_e.storage.getItem("debug")}catch{}return!Vt&&typeof process<"u"&&"env"in process&&(Vt={}.DEBUG),Vt},_e.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer"&&!window.process.__nwjs)||(typeof navigator>"u"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))};e:{try{var _t=localStorage;break e}catch{}_t=void 0}_e.storage=_t,_e.destroy=function(){var Vt=!1;return function(){Vt||(Vt=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}}(),_e.colors="#0000CC #0000FF #0033CC #0033FF #0066CC #0066FF #0099CC #0099FF #00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF #3300CC #3300FF #3333CC #3333FF #3366CC #3366FF #3399CC #3399FF #33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF #6600CC #6600FF #6633CC #6633FF #66CC00 #66CC33 #9900CC #9900FF #9933CC #9933FF #99CC00 #99CC33 #CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF #CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF #CC6600 #CC6633 #CC9900 #CC9933 #CCCC00 #CCCC33 #FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF #FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF #FF6600 #FF6633 #FF9900 #FF9933 #FFCC00 #FFCC33".split(" "),_e.log=console.debug||console.log||function(){},$.exports=vC(_e),$.exports.formatters.j=function(Vt){try{return JSON.stringify(Vt)}catch(Wt){return"[UnexpectedJSONParseError]: "+Wt.message}}}),Ir=Hr("RTM:DEBUG"),Ze;Ir.enabled=!1,function($){$[$.Uploading=0]="Uploading",$[$.Free=1]="Free"}(Ze||(Ze={}));var wC=function(){function $(_e){W(this,$),m(this,"uploadRequest",void 0),m(this,"uploadState",void 0),m(this,"uploadResendCount",void 0),m(this,"LogCache",void 0),m(this,"LogsToPost",void 0),m(this,"processId",void 0),m(this,"sdkVersion",void 0),m(this,"logId",void 0),m(this,"rtmConfig",void 0),this.processId=_e.processId,this.sdkVersion=_e.sdkVersion,this.rtmConfig=_e.rtmConfig,this.uploadRequest=_e.uploadRequest,this.uploadState=Ze.Free,this.uploadResendCount=0,this.LogCache=[],this.LogsToPost=[],this.logId=0}return Ha($,[{key:"upload",value:function(_e){this.LogCache.push(_e),this.uploadState===Ze.Free&&(this.LogsToPost=40>this.LogCache.length?this.LogCache.splice(0,this.LogCache.length):this.LogCache.splice(0,40),this.postLog(this.LogsToPost))}},{key:"postLog",value:function(_e){var _t=this;this.uploadState=Ze.Uploading,setTimeout(J(w.mark(function Vt(){var Wt,_i,_s;return w.wrap(function(_c){for(;;)switch(_c.prev=_c.next){case 0:return Wt={sdk_version:_t.sdkVersion,process_id:_t.processId,payload:JSON.stringify(_e)},_c.prev=1,_c.next=4,_t.uploadRequest(Wt,(_i=_t.rtmConfig.enableCloudProxy)!==null&&_i!==void 0&&_i);case 4:if(!Uk){_c.next=6;break}throw Error("RTM is busy");case 6:_c.next=13;break;case 8:return _c.prev=8,_c.t0=_c.catch(1),_s=2>_t.uploadResendCount++?2e3:1e4,setTimeout(function(){return _t.postLog(_t.LogsToPost)},_s),_c.abrupt("return");case 13:if(Ir('The logs uploaded for "process-'.concat(gg,'"')),_t.LogCache.length!==0){_c.next=17;break}return _t.uploadState=Ze.Free,_c.abrupt("return");case 17:_t.uploadResendCount=0,_t.LogsToPost=40>_t.LogCache.length?_t.LogCache.splice(0,_t.LogCache.length):_t.LogCache.splice(0,40),_t.postLog(_t.LogsToPost);case 20:case"end":return _c.stop()}},Vt,null,[[1,8]])})),Zd.getParameter("LOG_UPLOAD_INTERVAL"))}}]),$}(),Jr=function($,_e,_t,Vt,Wt,_i,_s,_c){var _l=0;for(_s=!!_s&&Id(_s,_c,3);_l<Vt;){if(_l in _t){if(_c=_s?_s(_t[_l],_l,_e):_t[_l],0<_i&&gd(_c))Wt=Jr($,_e,_c,ta(_c.length),Wt,_i-1)-1;else{if(9007199254740991<=Wt)throw TypeError("Exceed the acceptable array length");$[Wt]=_c}Wt++}_l++}return Wt},xC=Jr;N({target:"Array",proto:!0},{flat:function(){var $=arguments.length?arguments[0]:void 0,_e=Qa(this),_t=ta(_e.length),Vt=Sg(_e,0);return Vt.length=xC(Vt,_e,_e,_t,0,$===void 0?1:$b($)),Vt}}),N({target:"Object",stat:!0},{values:function($){return aC($)}});var yC=["CODE"],Db,ud,F;(function($){$.CHINA="CN",$.ASIA="AS",$.NORTH_AMERICA="NA",$.EUROPE="EU",$.JAPAN="JP",$.INDIA="IN",$.OCEANIA="OC",$.SOUTH_AMERICA="SA",$.AFRICA="AF",$.OVERSEA="OVERSEA",$.GLOBAL="GLOBAL"})(F||(F={}));var zC={CN:F.CHINA,NA:F.NORTH_AMERICA,EU:F.EUROPE,AS:F.ASIA,JP:F.JAPAN,IN:F.INDIA,GLOB:F.GLOBAL,AF:F.AFRICA,OC:F.OVERSEA,OVS:F.OVERSEA,SA:F.SOUTH_AMERICA},Kg=Wm((Db={},m(Db,F.ASIA,{CODE:F.ASIA,AP_DOMAINS:["ap-web-1-asia.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-asia.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_AP:["proxy-ap-web-asia.agora.io"],PROXY_NGINX:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.NORTH_AMERICA,{CODE:F.NORTH_AMERICA,AP_DOMAINS:["ap-web-1-north-america.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-north-america.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_AP:["proxy-ap-web-america.agora.io"],PROXY_NGINX:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.EUROPE,{CODE:F.EUROPE,AP_DOMAINS:["ap-web-1-europe.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-europe.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_AP:["proxy-ap-web-europe.agora.io"],PROXY_NGINX:["europe.webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.JAPAN,{CODE:F.JAPAN,AP_DOMAINS:["ap-web-1-japan.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-japan.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_AP:["proxy-ap-web-japan.agora.io"],PROXY_NGINX:["japan.webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.INDIA,{CODE:F.INDIA,AP_DOMAINS:["ap-web-1-india.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-india.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_AP:["proxy-ap-web-india.agora.io"],PROXY_NGINX:["india.webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.OVERSEA,{CODE:F.OVERSEA,AP_DOMAINS:["ap-web-1-oversea.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_AP:["proxy-ap-web-oversea.agora.io"],PROXY_NGINX:["webrtc-cloud-proxy.agora.io"]}),m(Db,F.GLOBAL,{CODE:F.GLOBAL,AP_DOMAINS:["ap-web-1.agora.io","ap-web-2.agora.io"],AP_BACKUP_DOMAINS:["ap-web-3.agora.io","ap-web-4.agora.io"],EVENT_REPORT_DOMAIN:["webcollector-rtm.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["webcollector-1.agora.io"],LOG_UPLOAD_SERVER:["logservice-rtm.agora.io"],PROXY_AP:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],PROXY_NGINX:["webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.OCEANIA,{CODE:F.OCEANIA,AP_DOMAINS:["ap-web-1-oceania.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-oceania.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_AP:["proxy-ap-web-oceania.agora.io"],PROXY_NGINX:["oceania.webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.SOUTH_AMERICA,{CODE:F.SOUTH_AMERICA,AP_DOMAINS:["ap-web-1-south-america.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-south-america.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_AP:["proxy-ap-web-south-america.agora.io"],PROXY_NGINX:["south-america.webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.AFRICA,{CODE:F.AFRICA,AP_DOMAINS:["ap-web-1-africa.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-africa.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_AP:["proxy-ap-web-africa.agora.io"],PROXY_NGINX:["africa.webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.CHINA,{CODE:F.CHINA,AP_DOMAINS:["webrtc2-2.ap.sd-rtn.com"],AP_BACKUP_DOMAINS:["webrtc2-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_AP:["proxy-ap-web.agoraio.cn"],PROXY_NGINX:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),Db)),yf=(ud={},m(ud,F.ASIA,[F.CHINA,F.JAPAN,F.INDIA]),m(ud,F.EUROPE,[]),m(ud,F.NORTH_AMERICA,[]),m(ud,F.SOUTH_AMERICA,[]),m(ud,F.OCEANIA,[]),m(ud,F.AFRICA,[]),ud),Kr=[F.OVERSEA,F.GLOBAL,F.CHINA,F.NORTH_AMERICA,F.EUROPE,F.ASIA,F.JAPAN,F.INDIA,F.OCEANIA,F.SOUTH_AMERICA,F.AFRICA],Zm=function($){return Object.values(yf).flat().includes($)},cu=function($){var _e;return(_e=Hg(yf).find(function(_t){return(_t=ra(_t,2))[0],_t[1].includes($)}))===null||_e===void 0?void 0:_e[0]},AC=function($){return $.sort(function(_e,_t){return Kr.indexOf(_e)-Kr.indexOf(_t)})},xe=function($){var _e=new Set;if(($=AC($).slice(0,3).map(function(_t){var Vt=Kg[_t];if(Vt===void 0)throw new Ia("invalid area key");return _t=Vt.CODE,Vt=ff(Vt,yC),_e.add(_t),Vt})).length===0)throw new Ia("areas cannot be empty");return ua({CODES:_e},$.reduce(function(_t,Vt){for(var Wt=0,_i=Hg(_t);Wt<_i.length;Wt++){var _s=ra(_i[Wt],2),_c=_s[0];_s=_s[1],_t[_c]=Array.from(new Set([].concat(G(Vt[_c]),G(_s))))}return _t}))},M,Lr=function(){var $=J(w.mark(function _e(_t,Vt){var Wt,_i,_s,_c,_l,_d=arguments;return w.wrap(function(_m){for(;;)switch(_m.prev=_m.next){case 0:if(!(2<(_i=2<_d.length&&_d[2]!==void 0?_d[2]:0))){_m.next=3;break}return _m.abrupt("return");case 3:return _s={withCredentials:!0,body:_t,timeout:2e4},_c=0<_i?(M==null?void 0:M.LOG_UPLOAD_SERVER[0])||"rtm.logservice.sd-rtn.com":(M==null?void 0:M.LOG_UPLOAD_SERVER[0])||"logservice-rtm.agora.io",_l=Vt?"https://".concat((Wt=M==null?void 0:M.PROXY_NGINX[0])!==null&&Wt!==void 0?Wt:"webrtc-cloud-proxy.sd-rtn.com","/ls/?h=").concat(_c,"&p=443&d=upload/v1"):"https://".concat(_c,"/upload/v1"),_m.next=8,te(_l,_s).catch(function(e_){return Lr(_t,Vt,_i+1)});case 8:case"end":return _m.stop()}},_e)}));return function(_e,_t){return $.apply(this,arguments)}}(),Mr=new wC({processId:"process-".concat(gg),sdkVersion:"Agora_RTM_SDK_for_Web_".concat("v1.4.3-17-g1e27aa38"),uploadRequest:Lr,rtmConfig:{}}),il="text payload rawMessage thumbnail attributeInfos keys value extra".split(" "),Nr="account ticket uid detail token account fileName cname user group key origin users src dst lastUpdateUserId channel cert wan_ip".split(" "),Or="serverReceivedTs isOfflineMessage enableHistoricalMessaging enableOfflineMessaging hasPeerReceived messageType enableNotificationToChannelMembers lastUpdateTs".split(" "),BC="ChannelMessage MemberLeft MessageFromPeer LocalInvitationRefused LocalInvitationAccepted RemoteInvitationCanceled PeersOnlineStatusChanged AttributesUpdated MemberJoined".split(" "),ye=function($){if(typeof $=="string")return oa($);if(Array.isArray($)&&$.every(function(_i){return typeof _i=="string"}))return $.map(function(_i){return oa(_i)});if(!Il($)){for(var _e={},_t=0;_t<Or.length;_t++){var Vt=Or[_t];Vt in $&&(_e[Vt]=$[Vt])}if(0<Object.keys(_e).length)return _e;if(5>Object.keys($).length){for(_t=0,$=Object.entries($);_t<$.length;_t++){var Wt=ra($[_t],2);Vt=Wt[0],Wt=Wt[1],il.includes(Vt)?_e[Vt]="[Hidden Info]":_e[oa(Vt)]=typeof Wt=="string"?oa(Wt):"[Sensitive Info]"}return _e}return"[Sensitive Info]"}return $},Pr=function($){return X($)==="object"?yd($)?Vm(fe($,5),il,Nr):$.constructor&&$.constructor.name:$},Qr=function($,_e){return $ instanceof Error?$.message:typeof $!="string"?JSON.stringify(Vm(fe($,5),il,Nr)):(_e=_e.map(function(_t){return _t instanceof Error?_t.message:X(_t)==="object"?Gr(Array.isArray(_t)?_t.map(Pr):Pr(_t)):_t}),Nm.apply(void 0,[$.replace(/%[%Oo]/g,function(_t){return _t==="%%"?"%":_t==="%o"||_t==="%O"?"%s":_t})].concat(G(_e))))},CC=1,Rr=function($,_e,_t){var Vt=Hr($);return Vt.enabled=!0,Vt.log=_t,Vt.useColors=!1,function(Wt){for(var _i=arguments.length,_s=Array(1<_i?_i-1:0),_c=1;_c<_i;_c++)_s[_c-1]=arguments[_c];if(_e.enableLogUpload){_i=Cg(Wt);var _l=Qr(_i,_s);Mr.upload({log_item_id:"".concat(CC++),log_level:$,payload_str:"[".concat(sC(),"] ").concat($," - ").concat(256<_l.length?_l.slice(0,256):_l)})}switch(_i=function(_d){var _m=_l||Qr(Cg(Wt),_s),e_=Nc.LOG_HANDLER;typeof e_=="function"&&e_({level:_d,message:_m}),Vt(_m)},$){case"RTM:INFO":_e.logFilter.info&&_i("log");break;case"RTM:WARN":_e.logFilter.warn&&_i("warning");break;case"RTM:ERROR":_e.logFilter.error&&_i("error");break;case"RTM:TRACK":_e.logFilter.track&&_i("log");break;case"RTM:MSG:RECV":case"RTM:MSG:SEND":_e.logFilter.debug&&_i("debug");break;case"RTM:DEBUG":_e.logFilter.debug&&_i("debug")}}},jl,Sr=function($){return function(_e){var _t=jl===1||$===void 0?"":"Ins#".concat($," ");return"".concat(_t).concat(_e)}},kl=function($,_e,_t){var Vt=Sr(jl);return Rr("RTM:".concat(_e),_t,function(Wt){return $(Vt(Wt))})},tb=function(){return function($){function _e(Vt,Wt){var _i=2<arguments.length&&arguments[2]!==void 0&&arguments[2];W(this,_e);var _s=_t.call(this);if(m(n(_s),"logError",void 0),m(n(_s),"invokeTracker",void 0),m(n(_s),"resultTracker",void 0),m(n(_s),"errorTracker",void 0),m(n(_s),"eventTracker",void 0),m(n(_s),"info",void 0),m(n(_s),"warn",void 0),m(n(_s),"log",void 0),m(n(_s),"genLogger",void 0),m(n(_s),"loggerId",void 0),m(n(_s),"logger",void 0),m(n(_s),"name",void 0),_s.logger=Vt,_s.name=Wt,_s.loggerId=Vt.loggerId,_s.info=Vt.info,_s.warn=Vt.warn,_s.logError=Vt.logError,_s.genLogger=Vt.genLogger,_s.log=Vt.genLogger("RTM:DEBUG","<".concat(Wt,"> ")),_s.invokeTracker=Vt.genTracker("Invoke"),_s.eventTracker=Vt.genTracker("Event"),_s.resultTracker=Vt.genTracker("Result"),_s.errorTracker=Vt.genTracker("Error"),_i){var _c=_s.emit.bind(n(_s));_s.emit=function(){for(var _l=arguments.length,_d=Array(_l),_m=0;_m<_l;_m++)_d[_m]=arguments[_m];_l=_d[0],_m=_d.slice(1);var e_=BC.includes(_l);_s.eventTracker.apply(_s,["%s: ".concat(0<_m.length?"%s emitted with args: ".concat(_m.map(function(){return"%o"})):"%s emitted"),Wt,_l].concat(G(e_?_m.map(ye):_m)));try{_c.apply(void 0,_d)}catch(t_){_s.logError("Caught in the callback function of the event %s",_l,t_)}}}return _s}la(_e,$);var _t=ma(_e);return _e}(ea)},DC=function($){return kl(console.log.bind(console),"INFO",$)},EC=function($){return kl(console.warn.bind(console),"WARN",$)},FC=function($){return kl(console.error.bind(console),"ERROR",$)},Tr=function($,_e){return function(_t){var Vt=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"",Wt=Sr($),_i=console.debug.bind(console),_s=Rr(_t,_e,function(_c){return _i(Wt(_c))});return function(_c){for(var _l=arguments.length,_d=Array(1<_l?_l-1:0),_m=1;_m<_l;_m++)_d[_m-1]=arguments[_m];return _s.apply(void 0,[Vt+_c].concat(_d))}}},GC=function($,_e){return function(_t){return Tr($,_e)("RTM:TRACK","[".concat(_t,"] "))}},Li=t.URI,eu=Oh,HC=ff(VB,["Wrapper"]),$m=Gk(HC,"URI"),Ur=function($,_e){var _t=-1,Vt=$.length,Wt=Vt-1;for(_e=_e===void 0?Vt:_e;++_t<_e;){var _i=$[Vt=nr(_t,Wt)];$[Vt]=$[_t],$[_t]=_i}return $.length=_e,$},IC=function($){return Ur(Xh($))},JC=function($){return Ur(Ni($))},$e=function($){return(Va($)?IC:JC)($)},af={0:9591,1:9593},$d=function($){return"https://".concat($,"/api/v1")},KC=bb.apply(void 0,G($e(["web-1.ap.sd-rtn.com","web-2.ap.sd-rtn.com"].map($d)))),LC=bb.apply(void 0,G($e(["ap-web-1.agora.io","ap-web-2.agora.io"].map($d)))),MC=bb.apply(void 0,G($e(["web-3.ap.sd-rtn.com","web-4.ap.sd-rtn.com"].map($d)))),NC=bb.apply(void 0,G($e(["ap-web-3.agora.io","ap-web-4.agora.io"].map($d)))),ll=Ph(),ml=function($){function _e(Vt,Wt,_i,_s,_c,_l){W(this,_e);var _d=_t.call(this,_c,Ai("Socket-",_c.loggerId));if(m(n(_d),"isActiveClose",!1),m(n(_d),"loggedIn",!1),m(n(_d),"useNewDomain",void 0),m(n(_d),"receivedPacket",new Pa),m(n(_d),"open$",void 0),m(n(_d),"input$",new Pa),m(n(_d),"userJoin$",new Pa),m(n(_d),"attemptsSinceLastError",0),m(n(_d),"message$",new Pa),m(n(_d),"socket$",void 0),m(n(_d),"toClose",new Pa),m(n(_d),"toReconnect",new Pa),m(n(_d),"sendLogger",void 0),m(n(_d),"receiveLogger",void 0),m(n(_d),"ip",void 0),m(n(_d),"env",void 0),m(n(_d),"ticket",void 0),m(n(_d),"context",void 0),m(n(_d),"getDomain",function(){return an(_d.ip,_d.useNewDomain)}),m(n(_d),"socketReconnector",function(t_){var i_=function(c_){return _d.attemptsSinceLastError+=1,_d.warn("The %s of Env %d reconnecting %s",_d.name,_d.env,c_.message),Bc(3e3)};return t_.pipe(Ga(function(c_){return _d.log("socket connection closed"),_d.loggedIn=!1,2<=_d.attemptsSinceLastError?(_d.warn("socket connection failure"),_d.emit("connectionFailure"),_d.close(),Z(c_)):_d.isActiveClose?vb:(_d.emit("reconnect"),_d.useNewDomain=!_d.useNewDomain,Z(c_))}),oe(function(c_){return c_.pipe(Cc(i_))}))}),_d.ip=Vt,_d.env=Wt,_d.ticket=_i,_d.context=_s,_d.useNewDomain=_l??.5<=Math.random(),_d.sendLogger=_d.genLogger("RTM:MSG:SEND"),_d.receiveLogger=_d.genLogger("RTM:MSG:RECV"),Wt!==0&&Wt!==1)throw new ll({ILLEGAL_RTM_ENV:"The env number is out of rtm env count"});if(!Gm(Vt))throw new ll({IP_NOT_VALID:"The ip from ap is not valid"});var _m=af[Wt];_d.log("Opening websocket address %s for the Env %d",_d.ip,_d.env);var e_=Xb(_d.input$,_d.userJoin$.pipe(Rt(2)),_d.message$).pipe(ba(function(t_){return Oh.encode(t_).finish()}));return Vt=Xb(St("",{protocols:[],makeWebSocket:function(){if(_d.context.config.enableCloudProxy){if(_d.context.cloudProxyServers.length===0)throw _d.logError("No cloud proxy server to connect"),new da;var t_="wss://".concat(an(bn(_d.context.cloudProxyServers),!1),"/");t_=we(t_,"sid",_d.context.sid),t_=we(t_,"remote_port",_m.toString()),t_=we(t_,"remote_ip",_d.ip),t_=we(t_,"token",_d.context.key),t_=new WebSocket(t_)}else t_=new WebSocket("wss://".concat(_d.getDomain(),":").concat(_m));return t_.binaryType="arraybuffer",t_}}),_d.toReconnect),_d.socket$=Ca(Vt,Tk.pipe(hb(15e3),Ga(function(t_){return Sa(t_)&&_d.warn("socket open timed out"),Z(t_)}))).pipe(ba(function(t_){if(t_ instanceof Error)throw _d.warn("Env_%d: Force reconnect the socket",_d.env),t_;return t_(e_).pipe(ba(function(i_){return Oh.decode(new Uint8Array(i_))}))}),_d.socketReconnector),_d.open$=_d.socket$.pipe(ca(function(t_){_d.log("Websocket opened",_d.name),t_.subscribe(function(i_){var c_=i_.data;i_=Li[i_.uri].slice(0,-3),c_=$m[i_].decode(c_);var h_=HA({},Gk(c_,"toJSON"),function(f_,S_){return S_ instanceof U?Km(S_):S_}),y_=!1;if((c_ instanceof vr||c_ instanceof ur)&&c_.instance.lessThanOrEqual(4294967295)&&(y_=!0),c_ instanceof wr||c_ instanceof xr){var l_=c_.instance,d_=c_.sequence;(c_.dialogue.lessThanOrEqual(4294967295)||l_.lessThanOrEqual(4294967295)||d_.lessThan(1))&&(y_=!0)}y_?_d.warn("Env_%d: Illegal %s, abandoned %o",_d.env,i_,h_):(i_!=="Pong"&&_d.receiveLogger("Env_%d: %s %o",_d.env,i_,h_),_d.receivedPacket.next([i_,c_]))},function(){})}),qf(void 0),ob(_d.toClose),pe()),_d}la(_e,$);var _t=ma(_e);return Ha(_e,[{key:"address",get:function(){return"".concat(this.ip,":").concat(af[this.env])}},{key:"sendPacket",value:function(Vt,Wt){if(Vt!=="Ping"){var _i=uc(Wt,function(_s){return _s instanceof U?Km(_s):_s});this.sendLogger("Env_%d: %s %o",this.env,Vt,_i)}Wt=du(Vt,Wt),Vt==="UserJoin"?this.userJoin$.next(Wt):Vt==="Message"?this.message$.next(Wt):this.input$.next(Wt)}},{key:"close",value:function(){this.isActiveClose=!0,this.loggedIn=!1,this.toClose.next()}},{key:"fromReceived",value:function(Vt){var Wt=this;return this.receivedPacket.pipe(ca(function(_i){var _s=ra(_i,2);_i=_s[0],_s=_s[1],_i==="UserResp"&&(Wt.attemptsSinceLastError=0,Wt.loggedIn=!0),_i==="UserDrop"&&Wt.emit("socketUserDrop",_s)}),wb(function(_i){return ra(_i,1)[0]===Vt}),ba(function(_i){return ra(_i,2)[1]}))}},{key:"forceReconnect",value:function(){this.toReconnect.next(new ll({FORCE_RECONNECTING:"Connection seems broken, try force reconnecting"}))}}]),_e}(tb());N({target:"String",proto:!0,forced:zr},{padStart:function($){return XB(this,$,1<arguments.length?arguments[1]:void 0)}});var OC=function($){var _e=xf(Kg);$=Yt($);for(var _t=0;_t<_e.length;_t++){var Vt=Kg[_e[_t]];if(Vt!=null&&Vt.AP_DOMAINS.includes($)||Vt!=null&&Vt.AP_BACKUP_DOMAINS.includes($)||Vt!=null&&Vt.PROXY_AP.includes($))return[Vt.CODE]}return[F.CHINA,F.GLOBAL]},PC={INVALID_APP_ID:"Illegal App ID",NO_AUTHORIZED:"Signature verification failed",TOKEN_TIMEOUT:"Dynamic key expired",INVALID_TOKEN_UID:"UID in the security key(token) is not valid",APP_ID_NO_ACTIVATED:"The vendor is not activated",DYNAMIC_KEY_NOT_ENABLED:"The vendor did not enable the dynamic key, but uses the dynamic key",DYNAMIC_ENABLED_BUT_STATIC_KEY:"The vendor enabled the dynamic key, but uses the static key",TOKEN_EXPIRED:"The token has expired",INVALID_USER_ID:"The user ID to login does not match the token",FORBIDDEN_REGION:"Forbidden to access the request in this area",CANNOT_MEET_AREA_DEMAND:"Cannot allocate to meet the requirements of the given area limit"},Vr={5:"INVALID_APP_ID",7:"INVALID_USER_ID",9:"NO_AUTHORIZED",10:"TOKEN_TIMEOUT",11:"APP_ID_NO_ACTIVATED",12:"INVALID_TOKEN_UID",13:"TOKEN_EXPIRED",14:"DYNAMIC_KEY_NOT_ENABLED",15:"DYNAMIC_ENABLED_BUT_STATIC_KEY",18:"FORBIDDEN_REGION",19:"CANNOT_MEET_AREA_DEMAND"},QC=[100,101,102],Qh=/web-(\d)/,Wr=function($){function _e(Vt,Wt){var _i=2<arguments.length&&arguments[2]!==void 0&&arguments[2];W(this,_e);var _s=_t.call(this,Wt,"AccessPoint");return m(n(_s),"handleUniLbsError",function(_c,_l){var _d=_c;if(4<_c.toString().length){var _m=_c.toString().padStart(8,"0"),e_=parseInt(_m.slice(0,4),10);if(_m=parseInt(_m.slice(4,8),10),e_===201)_d=_m;else if(e_===101&&!QC.includes(_m))return Z(Error("service is currently unavailable"))}if(e_=_d.toString(),!Object.keys(Vr).includes(e_))return(_c=new da(["Login is rejected by the server. The response code is %d",_c],jg)).serverCode=_d,Z(_c);switch(e_=Vr[e_],_d=PC[e_],e_){case"INVALID_APP_ID":case"APP_ID_NO_ACTIVATED":return(_l=new Ye(_d,$q)).serverCode=_c,Z(_l);case"INVALID_USER_ID":return(_l=new Ye(_d,Jh)).serverCode=_c,Z(_l);case"TOKEN_EXPIRED":case"TOKEN_TIMEOUT":return(_l=new Ye(_d,Kh)).serverCode=_c,Z(_l);case"NO_AUTHORIZED":case"INVALID_TOKEN_UID":case"DYNAMIC_KEY_NOT_ENABLED":case"DYNAMIC_ENABLED_BUT_STATIC_KEY":return(_l=new Ye(_d,ar)).serverCode=_c,Z(_l);case"CANNOT_MEET_AREA_DEMAND":return(_l=OC(_l)).forEach(function(t_){return _s.failedAreas.add(t_)}),_s.failedAreas.size===(M===void 0?2:M.CODES.size)?((_l=new I(_d,jg)).serverCode=_c,Z(_l)):Z(Error("ap ".concat(_l.join(", ")," cannot meet requirement")));case"FORBIDDEN_REGION":return(_l=new da(_d,jg)).serverCode=_c,Z(_l);default:return Z(Im("ApResErrType",e_))}}),m(n(_s),"getApEdgeInfo$",void 0),m(n(_s),"getApEdgeInfoEndFirst$",void 0),m(n(_s),"apFinish$",new Pa),m(n(_s),"retryCount",0),m(n(_s),"failedAreas",new Set),m(n(_s),"usedUrl",[]),m(n(_s),"newDomainUsed",!1),m(n(_s),"backupNewDomainUsed",!1),m(n(_s),"genUrl",function(){return M===void 0?mi.apply(void 0,G($e([KC,LC]))).pipe(ni(function(_c){return bb.apply(void 0,G(_c))})):bb.apply(void 0,G(M.AP_DOMAINS.slice(0,3).map($d)))}),m(n(_s),"genBackupUrl",function(){return M===void 0?mi.apply(void 0,G($e([MC,NC]))).pipe(ni(function(_c){return bb.apply(void 0,G(_c))})):bb.apply(void 0,G(M.AP_BACKUP_DOMAINS.slice(0,3).map($d)))}),m(n(_s),"getApUrl$",function(_c){var _l,_d;return _s.genUrl().pipe(wb(function(_m){return(!_s.newDomainUsed||!_m.includes("sd-rtn.com"))&&(_m.includes("sd-rtn.com")&&(_s.newDomainUsed=!0),!dl(_s.usedUrl,function(e_){var t_;return e_===((t_=_m.match(Qh))===null||t_===void 0?void 0:t_[1])}))}),ca(function(_m){var e_;M===void 0&&typeof(_m=(e_=_m.match(Qh))===null||e_===void 0?void 0:e_[1])=="string"&&_s.usedUrl.push(_m)}),Ka(_c?Math.max(Nc.RECONNECTING_AP_NUM,(_l=M==null?void 0:M.CODES.size)!==null&&_l!==void 0?_l:0):(_d=M==null?void 0:M.CODES.size)!==null&&_d!==void 0?_d:2),Dd(function(){return _e.runOutOfUrlSymbol}),Ga(function(_m,e_){return _s.newDomainUsed=!1,_m===_e.runOutOfUrlSymbol?(_s.usedUrl=[],e_):Z(_m)}))}),m(n(_s),"getBackupApUrl$",function(_c){var _l,_d;return _s.genBackupUrl().pipe(wb(function(_m){return(!_s.backupNewDomainUsed||!_m.includes("sd-rtn.com"))&&(_m.includes("sd-rtn.com")&&(_s.backupNewDomainUsed=!0),!dl(_s.usedUrl,function(e_){var t_;return e_===((t_=_m.match(Qh))===null||t_===void 0?void 0:t_[1])}))}),ca(function(_m){var e_;M===void 0&&typeof(_m=(e_=_m.match(Qh))===null||e_===void 0?void 0:e_[1])=="string"&&_s.usedUrl.push(_m)}),Ka(_c?Math.max(Nc.RECONNECTING_AP_NUM,(_l=M==null?void 0:M.CODES.size)!==null&&_l!==void 0?_l:0):(_d=M==null?void 0:M.CODES.size)!==null&&_d!==void 0?_d:2),Dd(function(){return _e.runOutOfUrlSymbol}),Ga(function(_m,e_){return _s.backupNewDomainUsed=!1,_m===_e.runOutOfUrlSymbol?(_s.usedUrl=[],e_):Z(_m)}))}),m(n(_s),"getProxyApUrl$",function(_c){var _l,_d;return bb.apply(void 0,G(((M==null?void 0:M.PROXY_AP.slice(0,3))||["ap-proxy-1.agora.io","ap-proxy-2.agora.io"]).map($d))).pipe(Ka(_c?Math.max(Nc.RECONNECTING_AP_NUM,(_l=M==null?void 0:M.CODES.size)!==null&&_l!==void 0?_l:0):(_d=M==null?void 0:M.CODES.size)!==null&&_d!==void 0?_d:2))}),m(n(_s),"context",void 0),m(n(_s),"fetchCloudProxy",function(_c,_l){var _d=Ai("AP-",_s.loggerId);_s.log("The AccessPoint requests %s(%s)",_c,_d);var _m=new AbortController;return _s.apFinish$.pipe(Ka(1)).subscribe(function(){return _m.abort()}),ad(J(w.mark(function e_(){var t_;return w.wrap(function(i_){for(;;)switch(i_.prev=i_.next){case 0:return t_=Ag(0,Number.MAX_SAFE_INTEGER),_s.log("%s request opid: %d",_d,t_),i_.abrupt("return",te(_c,{headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"90","Content-Type":"application/json"},body:{sid:_s.context.sid,opid:t_,appid:_s.context.appId,client_ts:Math.ceil(Date.now()/1e3),request_bodies:[{uri:22,buffer:{service_ids:[7,16],key:_l??_s.context.key,cname:_s.context.uid,uid:0,detail:ua({},M===void 0?{11:[F.CHINA,F.GLOBAL].join()}:{11:Array.from(M.CODES).map(function(c_){return c_===F.OVERSEA?"".concat(F.ASIA,",").concat(F.EUROPE,",").concat(F.AFRICA,",").concat(F.NORTH_AMERICA,",").concat(F.SOUTH_AMERICA,",").concat(F.OCEANIA):c_}).join(",")})}}]},signal:_m.signal}));case 3:case"end":return i_.stop()}},e_)}))).pipe(Ga(function(e_){return e_.name!=="AbortError"&&(_s.logError(e_),_s.warn("The AP server %s request failure",_c,e_)),vb}),cb(function(){var e_=J(w.mark(function t_(i_){var c_,h_,y_,l_,d_,f_,S_,T_,R_,C_,j_,W_,A_,$_,q_,G_,I_,x_,Y_;return w.wrap(function(z_){for(;;)switch(z_.prev=z_.next){case 0:if(c_=i_.responseText,h_=JSON.parse(c_),_s.log("The %s response is %o",_d,h_),((y_=h_.response_body)===void 0||y_.length===0||y_.some(function(B_){var Q_;return((Q_=B_.buffer)===null||Q_===void 0?void 0:Q_.code)===void 0||B_.uri!==23}))&&Z(new da("cloud proxy response_body not valid",jg)),(l_=y_.filter(function(B_){return B_.buffer.code!==0})).length===0){z_.next=14;break}if((d_=l_.find(function(B_){return B_.buffer.flag===128}))===void 0){z_.next=12;break}return z_.abrupt("return",_s.handleUniLbsError(d_.buffer.code,_c));case 12:return _s.logError("cloud proxy error response"),z_.abrupt("return",_s.handleUniLbsError(l_[0].buffer.code,_c));case 14:for(f_=[],S_=0;S_<y_.length;S_++)if(((C_=y_[S_])==null||(T_=C_.buffer)===null||T_===void 0?void 0:T_.flag)===262144)(j_=C_.buffer)===null||j_===void 0||(W_=j_.edges_services)===null||W_===void 0||(A_=W_.forEach)===null||A_===void 0||A_.call(W_,function(B_){Gm(B_=B_.ip)&&_s.context.cloudProxyServers.indexOf(B_)===-1&&(_s.log("got cloud proxy server: %s",B_),_s.context.cloudProxyServers.push(B_))});else if((C_==null||(R_=C_.buffer)===null||R_===void 0?void 0:R_.flag)===128){for(I_=function(B_,Q_){var K_=Q_[B_];f_.some(function(rE){return rE.ip===K_.ip})||f_.push({ip:K_.ip,ticket:C_.buffer.cert})},x_=0,Y_=C_.buffer.edges_services;x_<Y_.length;x_++)I_(x_,Y_);_s.context.rtmArea=($_=(q_=C_.buffer)===null||q_===void 0||(G_=q_.detail)===null||G_===void 0?void 0:G_[9])!==null&&$_!==void 0?$_:""}return z_.abrupt("return",bb.apply(void 0,G(f_).concat([fg])));case 19:case"end":return z_.stop()}},t_)}));return function(t_){return e_.apply(this,arguments)}}()),Ga(function(e_){return sa(e_)?Z(e_):vb}),tg(),wb(function(e_){return e_!==void 0&&typeof e_.ip=="string"&&typeof e_.ticket=="string"}))}),m(n(_s),"fetchAp",function(_c,_l){var _d=Ai("AP-",_s.loggerId);_s.log("The AccessPoint requests %s(%s)",_c,_d);var _m=new AbortController;return _s.apFinish$.pipe(Ka(1)).subscribe(function(){return _m.abort()}),ad(J(w.mark(function e_(){var t_;return w.wrap(function(i_){for(;;)switch(i_.prev=i_.next){case 0:return t_=Ag(0,Number.MAX_SAFE_INTEGER),_s.log("%s request opid: %d",_d,t_),i_.abrupt("return",te(_c,{headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"69","Content-Type":"application/json"},body:{flag:128,opid:t_,key:_l||_s.context.key,cname:_s.context.uid,detail:ua({},M===void 0?{11:[F.CHINA,F.GLOBAL].join()}:{11:Array.from(M.CODES).map(function(c_){return c_===F.OVERSEA?"".concat(F.ASIA,",").concat(F.EUROPE,",").concat(F.AFRICA,",").concat(F.NORTH_AMERICA,",").concat(F.SOUTH_AMERICA,",").concat(F.OCEANIA):c_}).join(",")}),uid:0,sid:_s.context.sid},signal:_m.signal}));case 3:case"end":return i_.stop()}},e_)}))).pipe(Ga(function(e_){return e_.name!=="AbortError"&&(_s.logError(e_),_s.warn("The AP server %s request failure",_c,e_)),vb}),cb(function(){var e_=J(w.mark(function t_(i_){var c_,h_,y_,l_,d_,f_,S_;return w.wrap(function(T_){for(;;)switch(T_.prev=T_.next){case 0:if(c_=i_.responseText,h_=JSON.parse(c_),_s.log("The %s response is %o",_d,h_),l_=(y_=h_).code,d_=y_.addresses,f_=y_.detail,l_===0){T_.next=6;break}return T_.abrupt("return",_s.handleUniLbsError(l_,_c));case 6:if((S_=d_).length!==0){T_.next=11;break}return T_.abrupt("return",Z(Error("No available edge address to connect")));case 11:return _s.context.rtmArea=f_==null?void 0:f_[9],T_.abrupt("return",bb.apply(void 0,G(S_).concat([fg])));case 13:case"end":return T_.stop()}},t_)}));return function(t_){return e_.apply(this,arguments)}}()),tg(),Ga(function(e_){return sa(e_)?Z(e_):vb}),wb(function(e_){return e_!==void 0&&typeof e_.ip=="string"&&typeof e_.ticket=="string"}))}),_s.context=Vt,_s.getApEdgeInfoEndFirst$=function(){var _c=0<arguments.length&&arguments[0]!==void 0&&arguments[0];return Bc(0,_c||_i?Nc.RECONNECTING_AP_INTERVAL:2e3).pipe(Ka(1),ca(function(){_s.retryCount+=1}),cb(function(){return _s.context.config.enableCloudProxy?_s.getProxyApUrl$(_c||_i):(4<=_s.retryCount&&(_s.retryCount=0),3>=_s.retryCount?_s.getApUrl$(_c||_i):_s.getBackupApUrl$(_c||_i))}),cb(function(_l){return _s.context.config.enableCloudProxy?_s.fetchCloudProxy(_l):_s.fetchAp(_l)}),Ga(function(_l){return _l instanceof pb&&_s.warn("AP request timeout"),Z(_l)}),om(function(_l){return _l.ip}),ob(_s.apFinish$))},_s.getApEdgeInfo$=function(_c){return Bc(0,_c||_i?Nc.RECONNECTING_AP_INTERVAL:2e3).pipe(Ka(8),ca(function(){_s.retryCount+=1}),cb(function(){return _s.context.config.enableCloudProxy?_s.getProxyApUrl$(_c||_i):3>=_s.retryCount?_s.getApUrl$(_c||_i):_s.getBackupApUrl$(_c||_i)}),cb(function(_l){return(_s.context.config.enableCloudProxy?_s.fetchCloudProxy(_l):_s.fetchAp(_l)).pipe()}),Ga(function(_l){return _l instanceof pb&&_s.warn("AP request timeout"),Z(_l)}),om(function(_l){return _l.ip}),ob(_s.apFinish$))},_s}la(_e,$);var _t=ma(_e);return Ha(_e,[{key:"clearUp",value:function(){this.failedAreas.clear(),this.retryCount=0}}]),_e}(tb());m(Wr,"runOutOfUrlSymbol",Symbol("AP urls are used up"));var Xr=Ph(),Yr=function($){function _e(Vt,Wt,_i){W(this,_e);var _s=_t.call(this,Wt,"Connection");m(n(_s),"apClient",void 0),m(n(_s),"lastOpenSockets",[new qe(1),new qe(1)]),m(n(_s),"curOpenSockets",[void 0,void 0]),m(n(_s),"ipIterator",0),m(n(_s),"firstEnv",.5<=Math.random()?1:0),m(n(_s),"firstSocketOpener",void 0),m(n(_s),"secondSocketOpener",void 0),m(n(_s),"firstOpenKeeperSubject",new Pa),m(n(_s),"secondOpenKeeperSubject",new Pa),m(n(_s),"edgeInfoReplayed",void 0),m(n(_s),"firstEnvOpenSocket",void 0),m(n(_s),"firstOpenKeeperSub",void 0),m(n(_s),"secondOpenKeeperSub",void 0),m(n(_s),"context",void 0),m(n(_s),"logger",void 0),_s.context=Vt,_s.logger=Wt,_s.apClient=new Wr(_s.context,Wt),_s.apClient.apFinish$.subscribe(function(){_s.log("Ap client fetch finished")});var _c,_l=[];return _s.edgeInfoReplayed=_s.apClient.getApEdgeInfo$(_i).pipe(oe(function(_d){return _d.pipe(ca(function(_m){if(sa(_m))throw _m}),cd(_i?Zd.getParameter("RECONNECTING_AP_INTERVAL"):900),ob(Bc(2e4)))}),wb(function(_d){return!dl(_l,_d)}),Dd(function(){return new Xr({AP_NO_AVAILABLE_EDGE:"No available edge address to connect"})}),ca(function(_d){_l.push(_d),_s.log("An edge info got %o",_d)}),ca({error:function(_d){_s.emit("connectionInitFailure",_d)}}),wg(function(){_s.apClient.clearUp()}),sm()),_s.firstEnvOpenSocket=_s.edgeInfoReplayed.pipe(cb(function(_d){if(_d===void 0)return Z(Error("Invalid edge info"));var _m=new ml(_d.ip,_s.firstEnv,_d.ticket,_s.context,Wt,_c);return _s.firstEnv=_s.firstEnv===1?0:1,_m.on("connectionFailure",function(){return _s.onSocketConnectionFailure(_m)}),_c=!_m.useNewDomain,_m.open$.pipe(qf(_m))}),ca(function(_d){_s.log("The websocket of ENV_%d opened to %s:%d",_d.env,_d.ip,af[_d.env]),_s.curOpenSockets[_d.env]=_d,_s.lastOpenSockets[_d.env].next(_d),_s.firstEnv=_d.env,_s.openSecondSocket(_d.env,_d.ip,_d.useNewDomain)}),Ka(1),pe()),_s.firstSocketOpener=_s.firstEnvOpenSocket.pipe(cb(function(_d){return _d.open$.pipe(ca(function(){_s.log("The websocket of first ENV_%d re-opened to %s:%d",_d.env,_d.ip,af[_d.env]),_s.curOpenSockets[_d.env]=_d,_s.lastOpenSockets[_d.env].next(_d)}))})),Vt=_s.firstOpenKeeperSubject.pipe(Cc(Yc)),_s.firstOpenKeeperSub=Vt.subscribe({error:_s.logError}),_s}la(_e,$);var _t=ma(_e);return Ha(_e,[{key:"initConnection",value:function(){this.firstOpenKeeperSubject.next(this.firstSocketOpener)}},{key:"closeSocket",value:function(Vt,Wt){if(![0,1].includes(Vt))throw new Fa({INVALID_ENV:"The env argument is not 0 or 1"});var _i=Vt===this.firstEnv?this.firstOpenKeeperSub:this.secondOpenKeeperSub;this.firstOpenKeeperSub=void 0;var _s=this.curOpenSockets[Vt];this.curOpenSockets[Vt]=void 0,_s&&(_s.isActiveClose=!0,setTimeout(function(){_s.close()},Wt)),_i!==void 0&&setTimeout(function(){_i==null||_i.unsubscribe()},Wt)}},{key:"waitClosing",value:function(Vt){var Wt=this;return Vt.isActiveClose=!0,Vt.open$.pipe(tt(),Ga(function(_i){return _i.message===mr.normalClosureMessage?vb:Z(_i)}),hb(5e3),Ga(function(_i){return _i instanceof pb?(Wt.warn("Force closing the ENV_%d connection",Vt.env),vb):Z(_i)}))}},{key:"onSocketConnectionFailure",value:function(Vt){var Wt=[0,1].filter(function(_i){return _i!==Vt.env})[0];(Wt=this.curOpenSockets[Wt])&&Wt.loggedIn?this.reopenSocketWithApRequest(Vt.env):this.emit("socketsFailure")}},{key:"openSecondSocket",value:function(Vt,Wt,_i){var _s=this,_c=Vt===1?0:1;this.secondSocketOpener=this.edgeInfoReplayed.pipe(rm(function(_l,_d){return[].concat(G(_l),[_d])},[]),ba(function(_l){return kr(_l,function(_d){return Jm(Wt,_d.ip)}).slice(-1)[0]}),Ka(1),cb(function(_l){if(_l===void 0)return Z(Error("Invalid edge info"));var _d=new ml(_l.ip,_c,_l.ticket,_s.context,_s.logger,_i);return _d.on("connectionFailure",function(){return _s.onSocketConnectionFailure(_d)}),_d.open$.pipe(ca(function(){_s.lastOpenSockets[_c].next(_d),_s.curOpenSockets[_c]=_d}))}),pe()),this.secondOpenKeeperSub=this.secondOpenKeeperSubject.pipe(Cc(Yc)).subscribe({error:this.logError}),this.secondOpenKeeperSubject.next(this.secondSocketOpener)}},{key:"reopenSocketWithApRequest",value:function(Vt){var Wt=this,_i=[0,1].filter(function(_l){return _l!==Vt})[0];if((_i=this.curOpenSockets[_i])!==void 0){var _s,_c=_i.ip;_i=this.apClient.getApEdgeInfoEndFirst$(!0).pipe(Dd(function(){return new Xr({AP_NO_AVAILABLE_EDGE:"No available edge address to connect"})}),oe(function(_l){return _l.pipe(ca(function(_d){if(_d.code===Kh)Wt.emit("tokenExpired"),Wt.apClient.apFinish$.next(void 0);else if(sa(_d))throw _d}),cd(Zd.getParameter("RECONNECTING_AP_INTERVAL")),ob(Bc(15e3)))}),ca(function(_l){Wt.log("An edge info got %o",_l)}),wg(function(){Wt.apClient.clearUp()})).pipe(rm(function(_l,_d){return[].concat(G(_l),[_d])},[]),ba(function(_l){return(_l=kr(_l,function(_d){return Jm(_c,_d.ip)})).length-1>=Wt.ipIterator?_l.slice(-Wt.ipIterator++-1)[0]:(Wt.ipIterator=0,_l.slice(-1)[0])}),Dd(),cb(function(_l){if(_l===void 0)return Z(Error("Invalid edge info"));var _d=new ml(_l.ip,Vt,_l.ticket,Wt.context,Wt.logger,_s);return _d.on("connectionFailure",function(){return Wt.onSocketConnectionFailure(_d)}),_s=!_d.useNewDomain,_d.open$.pipe(qf(_d))}),ca(function(_l){Wt.log("The websocket of ENV_%d re-opened to %s:%d using ap",_l.env,_l.ip,af[_l.env]),Wt.curOpenSockets[Vt]=_l,Wt.lastOpenSockets[Vt].next(_l)}),cb(function(_l){return _l.open$.pipe(ca(function(){Wt.log("The websocket of ENV_%d re-opened to %s:%d",_l.env,_l.ip,af[_l.env]),Wt.curOpenSockets[Vt]=_l,Wt.lastOpenSockets[Vt].next(_l)}))}),pe()),Vt===this.firstEnv?this.firstOpenKeeperSubject.next(_i):this.secondOpenKeeperSubject.next(_i)}}}]),_e}(tb()),Xc=fc.Writer,na=fc.util,zc=fc.roots.default||(fc.roots.default={}),RC=zc.Session=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.sid="",$.prototype.userId="",$.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,$.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,$.prototype.appId="",$.prototype.ver="",$.prototype.buildno=0,$.prototype.installId="",$.prototype.os=0,$.prototype.did="",$.prototype.index=null,$.prototype.token="",$.prototype.version=0,$.prototype.subVersion=0,$.encode=function(_e,_t){return _t||(_t=Xc.create()),_e.sid!=null&&Object.hasOwnProperty.call(_e,"sid")&&_t.uint32(10).string(_e.sid),_e.userId!=null&&Object.hasOwnProperty.call(_e,"userId")&&_t.uint32(18).string(_e.userId),_e.lts!=null&&Object.hasOwnProperty.call(_e,"lts")&&_t.uint32(24).int64(_e.lts),_e.elapse!=null&&Object.hasOwnProperty.call(_e,"elapse")&&_t.uint32(32).int64(_e.elapse),_e.appId!=null&&Object.hasOwnProperty.call(_e,"appId")&&_t.uint32(42).string(_e.appId),_e.ver!=null&&Object.hasOwnProperty.call(_e,"ver")&&_t.uint32(50).string(_e.ver),_e.buildno!=null&&Object.hasOwnProperty.call(_e,"buildno")&&_t.uint32(56).int32(_e.buildno),_e.installId!=null&&Object.hasOwnProperty.call(_e,"installId")&&_t.uint32(66).string(_e.installId),_e.os!=null&&Object.hasOwnProperty.call(_e,"os")&&_t.uint32(128).int32(_e.os),_e.did!=null&&Object.hasOwnProperty.call(_e,"did")&&_t.uint32(138).string(_e.did),_e.index!=null&&Object.hasOwnProperty.call(_e,"index")&&zc.Session.CommonIndex.encode(_e.index,_t.uint32(162).fork()).ldelim(),_e.token!=null&&Object.hasOwnProperty.call(_e,"token")&&_t.uint32(170).string(_e.token),_e.version!=null&&Object.hasOwnProperty.call(_e,"version")&&_t.uint32(176).int32(_e.version),_e.subVersion!=null&&Object.hasOwnProperty.call(_e,"subVersion")&&_t.uint32(184).int32(_e.subVersion),_t},$.CommonIndex=function(){function _e(_t){if(_t)for(var Vt=Object.keys(_t),Wt=0;Wt<Vt.length;++Wt)_t[Vt[Wt]]!=null&&(this[Vt[Wt]]=_t[Vt[Wt]])}return _e.prototype.index1="",_e.prototype.index2="",_e.prototype.index3="",_e.encode=function(_t,Vt){return Vt||(Vt=Xc.create()),_t.index1!=null&&Object.hasOwnProperty.call(_t,"index1")&&Vt.uint32(10).string(_t.index1),_t.index2!=null&&Object.hasOwnProperty.call(_t,"index2")&&Vt.uint32(18).string(_t.index2),_t.index3!=null&&Object.hasOwnProperty.call(_t,"index3")&&Vt.uint32(26).string(_t.index3),Vt},_e}(),$}(),SC=zc.Link=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.sid="",$.prototype.userId="",$.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,$.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,$.prototype.ec=0,$.prototype.sc=0,$.prototype.destServerIp="",$.prototype.ackedServerIp="",$.prototype.responseTime=0,$.encode=function(_e,_t){return _t||(_t=Xc.create()),_e.sid!=null&&Object.hasOwnProperty.call(_e,"sid")&&_t.uint32(10).string(_e.sid),_e.userId!=null&&Object.hasOwnProperty.call(_e,"userId")&&_t.uint32(18).string(_e.userId),_e.lts!=null&&Object.hasOwnProperty.call(_e,"lts")&&_t.uint32(24).int64(_e.lts),_e.elapse!=null&&Object.hasOwnProperty.call(_e,"elapse")&&_t.uint32(32).int64(_e.elapse),_e.ec!=null&&Object.hasOwnProperty.call(_e,"ec")&&_t.uint32(40).int32(_e.ec),_e.sc!=null&&Object.hasOwnProperty.call(_e,"sc")&&_t.uint32(48).int32(_e.sc),_e.destServerIp!=null&&Object.hasOwnProperty.call(_e,"destServerIp")&&_t.uint32(58).string(_e.destServerIp),_e.ackedServerIp!=null&&Object.hasOwnProperty.call(_e,"ackedServerIp")&&_t.uint32(66).string(_e.ackedServerIp),_e.responseTime!=null&&Object.hasOwnProperty.call(_e,"responseTime")&&_t.uint32(72).int32(_e.responseTime),_t},$}(),TC=zc.Logout=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.sid="",$.prototype.userId="",$.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,$.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,$.encode=function(_e,_t){return _t||(_t=Xc.create()),_e.sid!=null&&Object.hasOwnProperty.call(_e,"sid")&&_t.uint32(10).string(_e.sid),_e.userId!=null&&Object.hasOwnProperty.call(_e,"userId")&&_t.uint32(18).string(_e.userId),_e.lts!=null&&Object.hasOwnProperty.call(_e,"lts")&&_t.uint32(24).int64(_e.lts),_e.elapse!=null&&Object.hasOwnProperty.call(_e,"elapse")&&_t.uint32(32).int64(_e.elapse),_t},$}(),UC=zc.KickedOff=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.sid="",$.prototype.userId="",$.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,$.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,$.prototype.linkId=0,$.prototype.code=0,$.prototype.server="",$.prototype.serverCode=0,$.encode=function(_e,_t){return _t||(_t=Xc.create()),_e.sid!=null&&Object.hasOwnProperty.call(_e,"sid")&&_t.uint32(10).string(_e.sid),_e.userId!=null&&Object.hasOwnProperty.call(_e,"userId")&&_t.uint32(18).string(_e.userId),_e.lts!=null&&Object.hasOwnProperty.call(_e,"lts")&&_t.uint32(24).int64(_e.lts),_e.elapse!=null&&Object.hasOwnProperty.call(_e,"elapse")&&_t.uint32(32).int64(_e.elapse),_e.linkId!=null&&Object.hasOwnProperty.call(_e,"linkId")&&_t.uint32(48).int32(_e.linkId),_e.code!=null&&Object.hasOwnProperty.call(_e,"code")&&_t.uint32(56).int32(_e.code),_e.server!=null&&Object.hasOwnProperty.call(_e,"server")&&_t.uint32(66).string(_e.server),_e.serverCode!=null&&Object.hasOwnProperty.call(_e,"serverCode")&&_t.uint32(72).int32(_e.serverCode),_t},$}(),VC=zc.ChnJoin=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.sid="",$.prototype.userId="",$.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,$.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,$.prototype.cname="",$.prototype.errCode=0,$.encode=function(_e,_t){return _t||(_t=Xc.create()),_e.sid!=null&&Object.hasOwnProperty.call(_e,"sid")&&_t.uint32(10).string(_e.sid),_e.userId!=null&&Object.hasOwnProperty.call(_e,"userId")&&_t.uint32(18).string(_e.userId),_e.lts!=null&&Object.hasOwnProperty.call(_e,"lts")&&_t.uint32(24).int64(_e.lts),_e.elapse!=null&&Object.hasOwnProperty.call(_e,"elapse")&&_t.uint32(32).int64(_e.elapse),_e.cname!=null&&Object.hasOwnProperty.call(_e,"cname")&&_t.uint32(50).string(_e.cname),_e.errCode!=null&&Object.hasOwnProperty.call(_e,"errCode")&&_t.uint32(56).int32(_e.errCode),_t},$}(),WC=zc.ChnJoinRes=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.sid="",$.prototype.userId="",$.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,$.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,$.prototype.cname="",$.prototype.errCode=0,$.prototype.serverErrCode=0,$.encode=function(_e,_t){return _t||(_t=Xc.create()),_e.sid!=null&&Object.hasOwnProperty.call(_e,"sid")&&_t.uint32(10).string(_e.sid),_e.userId!=null&&Object.hasOwnProperty.call(_e,"userId")&&_t.uint32(18).string(_e.userId),_e.lts!=null&&Object.hasOwnProperty.call(_e,"lts")&&_t.uint32(24).int64(_e.lts),_e.elapse!=null&&Object.hasOwnProperty.call(_e,"elapse")&&_t.uint32(32).int64(_e.elapse),_e.cname!=null&&Object.hasOwnProperty.call(_e,"cname")&&_t.uint32(50).string(_e.cname),_e.errCode!=null&&Object.hasOwnProperty.call(_e,"errCode")&&_t.uint32(56).int32(_e.errCode),_e.serverErrCode!=null&&Object.hasOwnProperty.call(_e,"serverErrCode")&&_t.uint32(64).int32(_e.serverErrCode),_t},$}(),XC=zc.ChnLeave=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.sid="",$.prototype.userId="",$.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,$.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,$.prototype.cname="",$.prototype.errCode=0,$.encode=function(_e,_t){return _t||(_t=Xc.create()),_e.sid!=null&&Object.hasOwnProperty.call(_e,"sid")&&_t.uint32(10).string(_e.sid),_e.userId!=null&&Object.hasOwnProperty.call(_e,"userId")&&_t.uint32(18).string(_e.userId),_e.lts!=null&&Object.hasOwnProperty.call(_e,"lts")&&_t.uint32(24).int64(_e.lts),_e.elapse!=null&&Object.hasOwnProperty.call(_e,"elapse")&&_t.uint32(32).int64(_e.elapse),_e.cname!=null&&Object.hasOwnProperty.call(_e,"cname")&&_t.uint32(50).string(_e.cname),_e.errCode!=null&&Object.hasOwnProperty.call(_e,"errCode")&&_t.uint32(56).int32(_e.errCode),_t},$}(),YC=zc.ConnectionStateChange=function(){function $(_e){if(_e)for(var _t=Object.keys(_e),Vt=0;Vt<_t.length;++Vt)_e[_t[Vt]]!=null&&(this[_t[Vt]]=_e[_t[Vt]])}return $.prototype.sid="",$.prototype.userId="",$.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,$.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,$.prototype.oldState=0,$.prototype.newState=0,$.prototype.reason=0,$.prototype.reconnId=0,$.encode=function(_e,_t){return _t||(_t=Xc.create()),_e.sid!=null&&Object.hasOwnProperty.call(_e,"sid")&&_t.uint32(10).string(_e.sid),_e.userId!=null&&Object.hasOwnProperty.call(_e,"userId")&&_t.uint32(18).string(_e.userId),_e.lts!=null&&Object.hasOwnProperty.call(_e,"lts")&&_t.uint32(24).int64(_e.lts),_e.elapse!=null&&Object.hasOwnProperty.call(_e,"elapse")&&_t.uint32(32).int64(_e.elapse),_e.oldState!=null&&Object.hasOwnProperty.call(_e,"oldState")&&_t.uint32(40).int32(_e.oldState),_e.newState!=null&&Object.hasOwnProperty.call(_e,"newState")&&_t.uint32(48).int32(_e.newState),_e.reason!=null&&Object.hasOwnProperty.call(_e,"reason")&&_t.uint32(56).int32(_e.reason),_e.reconnId!=null&&Object.hasOwnProperty.call(_e,"reconnId")&&_t.uint32(64).int32(_e.reconnId),_t},$}(),fu=Object.freeze({__proto__:null,Session:RC,Link:SC,Logout:TC,KickedOff:UC,ChnJoin:VC,ChnJoinRes:WC,ChnLeave:XC,ConnectionStateChange:YC,default:zc}),gu=Object.freeze({__proto__:null,Counter:1,ApiExec:154,Session:164,ApEvent:165,Link:166,Logout:167,TxMessage:168,RxMessage:169,KickedOff:170,TxMessageRes:171,ChnJoin:172,ChnJoinRes:173,ChnLeave:174,ChnGetMembers:175,ChnGetMembersRes:176,ChnMemberJoined:177,ChnMemberLeft:178,QueryPeersOnlineStatus:179,QueryPeersOnlineStatusRes:180,RenewToken:181,OperateAttribute:186,OperateAttributeRes:187,ApRequest:188,LinkTcpEvent:189,LinkLoginRequest:190,ConnectionStateChange:191,default:{Counter:1,ApiExec:154,Session:164,ApEvent:165,Link:166,Logout:167,TxMessage:168,RxMessage:169,KickedOff:170,TxMessageRes:171,ChnJoin:172,ChnJoinRes:173,ChnLeave:174,ChnGetMembers:175,ChnGetMembersRes:176,ChnMemberJoined:177,ChnMemberLeft:178,QueryPeersOnlineStatus:179,QueryPeersOnlineStatusRes:180,RenewToken:181,OperateAttribute:186,OperateAttributeRes:187,ApRequest:188,LinkTcpEvent:189,LinkLoginRequest:190,ConnectionStateChange:191}}),ZC=function($){function _e(Vt,Wt,_i){return W(this,_e),m(n(_i=_t.call(this,_i,"Context")),"_token",void 0),m(n(_i),"config",void 0),m(n(_i),"_uid",void 0),m(n(_i),"_sid",void 0),m(n(_i),"_area","CN"),m(n(_i),"appId",void 0),m(n(_i),"enableCloudProxy",!1),m(n(_i),"cloudProxyServers",[]),_i.appId=Vt,_i.config=Wt,_i}la(_e,$);var _t=ma(_e);return Ha(_e,[{key:"token",set:function(Vt){this._token=typeof Vt=="string"&&Vt?Vt:void 0}},{key:"uid",get:function(){if(typeof this._uid=="string"&&this._uid)return this._uid;throw new Ia("Cannot get illegal uid")},set:function(Vt){if(this.log("The user ID is set to %s",oa(Vt)),!za(Vt))throw new Ia;this._uid=Vt}},{key:"key",get:function(){if(typeof this._token=="string"&&this._token)return this._token;if(typeof this.appId=="string"&&this.appId)return this.appId;throw new Ia("Cannot get illegal key")}},{key:"sid",get:function(){if(typeof this._sid=="string"&&this._sid)return this._sid;throw new Ia("Cannot get illegal sid")},set:function(Vt){if(this.log("sid is set to %s",Vt),typeof Vt!="string"||!Vt)throw new Ia;this._sid=Vt}},{key:"rtmArea",get:function(){if(typeof this._area=="string"&&this._area)return this._area;throw new Ia("Cannot get illegal area")},set:function(Vt){this.log("area is set to %s",Vt),typeof Vt=="string"&&Vt?this._area=Vt:this.warn("set area failed")}}]),_e}(tb()),$C=!!Fc&&R(function(){Fc.prototype.finally.call({then:function(){}},function(){})});if(N({target:"Promise",proto:!0,real:!0,forced:$C},{finally:function($){var _e=kd(this,mc("Promise")),_t=typeof $=="function";return this.then(_t?function(Vt){return mj(_e,$()).then(function(){return Vt})}:$,_t?function(Vt){return mj(_e,$()).then(function(){throw Vt})}:$)}}),typeof Fc=="function"){var Zr=mc("Promise").prototype.finally;Fc.prototype.finally!==Zr&&Ta(Fc.prototype,"finally",Zr,{unsafe:!0})}var aD=function(){var $=J(w.mark(function _e(_t){return w.wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:return Vt.t0=Uint8Array,Vt.next=3,crypto.subtle.digest("SHA-256",_t);case 3:return Vt.t1=Vt.sent,Vt.abrupt("return",new Vt.t0(Vt.t1));case 5:case"end":return Vt.stop()}},_e)}));return function(_e){return $.apply(this,arguments)}}(),$r=function($){return Array.from($).map(function(_e){return _e.toString(16).padStart(2,"0")}).join("")},bD=function($){if(typeof $!="string")throw new TypeError("Expected input to be a string");if($.length%2!=0)throw new RangeError("Expected string to be an even number of characters");for(var _e=new Uint8Array($.length/2),_t=0;_t<$.length;_t+=2)_e[_t/2]=parseInt($.substring(_t,_t+2),16);return _e},as=function($){return btoa(String.fromCharCode.apply(String,G($))).replace(/={1,2}$/,"")},bs=function(){var $=J(w.mark(function _e(_t){var Vt;return w.wrap(function(Wt){for(;;)switch(Wt.prev=Wt.next){case 0:return Wt.prev=0,Wt.next=3,crypto.subtle.digest("SHA-1",_t);case 3:Vt=Wt.sent,Wt.next=9;break;case 6:Wt.prev=6,Wt.t0=Wt.catch(0),Vt=sha1.arrayBuffer(_t);case 9:return Wt.abrupt("return",as(new Uint8Array(Vt)));case 10:case"end":return Wt.stop()}},_e,null,[[0,6]])}));return function(_e){return $.apply(this,arguments)}}(),cs=function($,_e,_t,Vt){Vt[_e]=!0,_t.has($)?_t.get($).add(_e):_t.set($,new Set([_e]))},cD=function($){switch($){case"89504E47":return"image/png";case"47494638":return"image/gif";case"25504446":return"application/pdf";case"FFD8FFDB":case"FFD8FFE0":case"FFD8FFE1":return"image/jpeg";case"504B0304":return"application/zip";default:return"application/octet-stream"}},ds=function($){function _e(Vt,Wt,_i,_s){W(this,_e);var _c=_t.call(this,_i,"ChunkDownloadManager");if(m(n(_c),"abortController",new AbortController),m(n(_c),"downloadedSize",0),m(n(_c),"successCount",0),m(n(_c),"timer",void 0),m(n(_c),"chunks",[]),m(n(_c),"retUnit",void 0),m(n(_c),"singleThread",!1),m(n(_c),"initialized",!1),m(n(_c),"ee",void 0),m(n(_c),"chunkCount",void 0),m(n(_c),"aborted",!1),m(n(_c),"serverToIndices",new Map),m(n(_c),"backupToIndices",new Map),m(n(_c),"indexToBackupServers",[]),m(n(_c),"busyBackupServers",new Map),m(n(_c),"downloadingChunks",new Set),m(n(_c),"metaInfo",void 0),m(n(_c),"transHandler",void 0),_c.metaInfo=Vt,_c.transHandler=Wt,_c.ee=_s===void 0?new ea:_s,_i=Vt.size,Vt=Vt.unit,_i===0)throw new Ia("size cannot be 0");return Wt.cancelSignal!==void 0&&Wt.cancelSignal.addEventListener("abort",function(){_c.abortController.abort()},{once:!0}),_c.abortController.signal.addEventListener("abort",function(){_c.aborted=!0},{once:!0}),_c.chunkCount=Math.ceil(_i/(32768*Vt)),_c}la(_e,$);var _t=ma(_e);return Ha(_e,[{key:"setInfoByResponse",value:function(Vt){var Wt=this,_i=Vt.serverList,_s=Vt.backupList;if(Vt=Vt.unit,_i.length<this.chunkCount&&_s.length<this.chunkCount)throw new Ia("servers is not enough");this.updateProgress(0),this.initialized=!0;var _c=Array(this.chunkCount).fill(!1);if(_i.forEach(function(_l,_d){return _l.forEach(function(_m){return cs(_m,_d,Wt.serverToIndices,_c)})}),_s.forEach(function(_l,_d){return _l.forEach(function(_m){return cs(_m,_d,Wt.backupToIndices,_c)})}),_c.some(function(){return!1}))throw new da("Not enough servers to download",mg);this.indexToBackupServers=_s.map(function(_l){return new Set(_l)}),this.retUnit=Vt}},{key:"downloadChunks",value:function(){this.aborted?this.warn("downloadChunks after abort, ignored"):this.serverToIndices.size===1&&Array.from(this.serverToIndices.keys())[0]===0?this.serversDownload(this.backupToIndices):1<=this.serverToIndices.size?this.serversDownload(this.serverToIndices,!0):this.ee.emit("error",new da("not enough servers to download",mg))}},{key:"updateProgress",value:function(Vt){var Wt=this,_i=this.downloadedSize+Vt;this.downloadedSize>this.metaInfo.size?(this.warn("Invalid download size, overflowed"),this.ee.emit("error",new Wc("Invalid download size",mg))):(this.downloadedSize=_i,this.timer!==void 0&&Vt!==0&&(clearTimeout(this.timer),this.timer=void 0),this.timer===void 0&&this.successCount!==this.chunkCount&&(this.timer=setTimeout(function(){Wt.ee.emit("timedOut"),Wt.abortController.abort()},12e4)),this.initialized&&Vt===0||this.transHandler.onOperationProgress===void 0||this.transHandler.onOperationProgress({totalSize:this.metaInfo.size,currentSize:this.downloadedSize}))}},{key:"getPayload",value:function(){for(var Vt=0,Wt=0,_i=this.chunks;Wt<_i.length;Wt++)Vt+=_i[Wt].byteLength;if(Vt!==this.metaInfo.size)throw new Ia("invalid chunks total size");Vt=new Uint8Array(Vt),_i=Wt=0;for(var _s=this.chunks;_i<_s.length;_i++){var _c=_s[_i];Vt.set(new Uint8Array(_c),Wt),Wt+=_c.byteLength}return Wt=Array.from(Vt.subarray(0,4)).map(function(_l){return _l.toString(16)}).join("").toUpperCase(),Zt(Vt.buffer,cD(Wt))}},{key:"getDownloadUrl",value:function(Vt){var Wt=this.metaInfo.useNewDomain?"sd-rtn.com":"agora.io";return"https://".concat(Dg(Vt).split(".").join("-"),".edge.").concat(Wt,":9601/api/v1/chuck/download")}},{key:"serversDownload",value:function(){var Vt=J(w.mark(function Wt(_i){var _s,_c=this,_l=arguments;return w.wrap(function(_d){for(;;)switch(_d.prev=_d.next){case 0:return _s=1<_l.length&&_l[1]!==void 0&&_l[1],_d.next=3,Promise.all(Array.from(_i.entries()).map(function(_m){return _m=ra(_m,2),_c.postDownloadRequest(_m[0],Array.from(_m[1]),_s).catch(function(e_){e_.statusCode===404?(_c.ee.emit("notExist"),_c.abortController.abort()):e_.name!=="AbortError"&&(Sa(e_)?_c.singleThread?(_c.abortController.abort(),_c.ee.emit("timedOut")):(_c.warn("%d download timed out after %d, retrying use single thread",e_.index,_c.singleThread?6e4:3e4),_c.abortController.abort(),_c.singleThread=!0,_c.ee.emit("multiTimeOut")):(_c.ee.emit("error",e_),_c.abortController.abort()))})}));case 3:case"end":return _d.stop()}},Wt)}));return function(Wt){return Vt.apply(this,arguments)}}()},{key:"postDownloadRequest",value:function(){var Vt=J(w.mark(function Wt(_i,_s,_c){var _l,_d,_m,e_,t_,i_,c_,h_,y_,l_=this;return w.wrap(function(d_){for(;;)switch(d_.prev=d_.next){case 0:if(y_=function(){return(y_=J(w.mark(function f_(S_){var T_,R_,C_,j_,W_,A_,$_,q_,G_;return w.wrap(function(I_){for(;;)switch(I_.prev=I_.next){case 0:if(I_.prev=0,S_!==void 0||_i!==0){I_.next=5;break}throw new Ia("Invalid serverIp");case 5:T_=S_===void 0?c_.getDownloadUrl(_i):S_;case 6:return c_.downloadingChunks.add(_l),I_.next=9,i_(T_);case 9:return R_=I_.sent,C_=R_.responseData,c_.downloadingChunks.delete(_l),I_.abrupt("return",C_);case 15:if(I_.prev=15,I_.t0=I_.catch(0),c_.downloadingChunks.delete(_l),_s.unshift(_l),c_.metaInfo.useNewDomain=!1,I_.t0.name!=="AbortError"){I_.next=22;break}throw I_.t0;case 22:if(!Sa(I_.t0)){I_.next=25;break}throw I_.t0.index=_l,I_.t0;case 25:if(j_=e_,e_+=1,!(2>j_)){I_.next=30;break}return I_.t0 instanceof Ia||c_.warn("%o, %d download failed, retrying",I_.t0,_l),I_.abrupt("return",h_());case 30:if(I_.t0.statusCode!==504){I_.next=34;break}throw(W_=new db("download server timed out",{originalError:I_.t0,serverCode:504})).index=_l,W_;case 34:if(!_c||j_!==2||t_[0]===0){I_.next=45;break}return I_.t0 instanceof Ia||c_.warn("%d download failed, using backup: %d, %o",_l,t_[0],I_.t0),I_.next=38,c_.busyBackupServers.get(t_[0]);case 38:return A_=h_(c_.getDownloadUrl(t_[0])),c_.busyBackupServers.set(t_[0],A_),I_.next=42,A_;case 42:return $_=I_.sent,c_.busyBackupServers.delete(t_[0]),I_.abrupt("return",$_);case 45:if(!(_c&&2<j_&&t_[1]!==void 0&&t_[1]!==0)){I_.next=56;break}return c_.warn("%d download failed, using backup 1: %d",_l,t_[1]),I_.next=49,c_.busyBackupServers.get(t_[1]);case 49:return q_=h_(c_.getDownloadUrl(t_[1])),c_.busyBackupServers.set(t_[1],q_),I_.next=53,q_;case 53:return G_=I_.sent,c_.busyBackupServers.delete(t_[1]),I_.abrupt("return",G_);case 56:throw I_.t0.index=_l,I_.t0;case 58:case"end":return I_.stop()}},f_,null,[[0,15]])}))).apply(this,arguments)},h_=function(f_){return y_.apply(this,arguments)},!this.aborted){d_.next=4;break}throw new Ia("download already aborted");case 4:if((_l=_s.shift())!==void 0){d_.next=8;break}return this.log("%s download finished",_i),d_.abrupt("return");case 8:if(!(this.singleThread&&0<this.downloadingChunks.size)){d_.next=10;break}return d_.abrupt("return");case 10:if(!this.downloadingChunks.has(_l)){d_.next=13;break}return this.log("%s already downloading, return",_l),d_.abrupt("return");case 13:if(this.chunks[_l]===void 0){d_.next=19;break}return this.successCount===this.chunkCount&&(this.log("chunks all download"),this.ee.emit("finished")),this.log("%s already downloaded, do next",_l),d_.next=18,this.postDownloadRequest(_i,_s,_c);case 18:return d_.abrupt("return");case 19:return _d=new FormData,_m={hash:hu(this.metaInfo.hashHexStr),unit:this.retUnit===void 0?this.metaInfo.unit:this.retUnit,instance:this.metaInfo.instance,loginOpt:this.metaInfo.loginOpt,ticket:this.metaInfo.ticket,index:_l},_d.append("parameter",JSON.stringify(_m)),e_=0,t_=Array.from(this.indexToBackupServers[_l]),i_=function(f_){return te(f_,{body:_d,signal:l_.abortController.signal,timeout:l_.singleThread?12e4:3e4},{useBinaryResponse:!0})},c_=this,d_.next=28,h_().then(function(f_){return l_.chunks[_l]!==void 0?l_.log("chunk %d download duplicated",_l):(l_.chunks[_l]=f_,l_.log("chunk %d downloaded",_l),l_.successCount+=1,l_.updateProgress(l_.chunks[_l].byteLength)),l_.successCount===l_.chunkCount&&(l_.log("chunks all download"),l_.ee.emit("finished")),l_.singleThread?(l_.downloadChunks(),Promise.resolve()):l_.postDownloadRequest(_i,_s,_c)});case 28:case"end":return d_.stop()}},Wt,this)}));return function(Wt,_i,_s){return Vt.apply(this,arguments)}}()}]),_e}(tb()),es=function($){function _e(Vt,Wt,_i,_s){W(this,_e);var _c=_t.call(this,_i,"ChunkUploadManager");if(m(n(_c),"chunkCount",0),m(n(_c),"chunks",[]),m(n(_c),"uploadedChunks",[]),m(n(_c),"totalFailures",0),m(n(_c),"timer",void 0),m(n(_c),"initState","uninitialized"),m(n(_c),"ee",void 0),m(n(_c),"unit",0),m(n(_c),"uploadedSize",0),m(n(_c),"singleThread",!1),m(n(_c),"abortController",new AbortController),m(n(_c),"servers",[]),m(n(_c),"aborted",!1),m(n(_c),"metaInfo",void 0),m(n(_c),"transHandler",void 0),_c.metaInfo=Vt,_c.transHandler=Wt,_c.ee=_s===void 0?new ea:_s,Vt.file.length===0)throw new I("file not found or is empty",wf);return Wt.cancelSignal!==void 0&&Wt.cancelSignal.addEventListener("abort",function(){_c.abortController.abort()},{once:!0}),_c.abortController.signal.addEventListener("abort",function(){_c.aborted=!0},{once:!0}),_c}la(_e,$);var _t=ma(_e);return Ha(_e,[{key:"initChunks",value:function(){var Vt=J(w.mark(function Wt(_i){var _s,_c,_l,_d,_m,e_=this;return w.wrap(function(t_){for(;;)switch(t_.prev=t_.next){case 0:if(this.initState!=="initialized"&&this.initState!=="initializing"){t_.next=2;break}throw new Ia("cannot re-initialize");case 2:for(this.initState="initializing",this.unit=_i,_s=this.sliceFile(_i,this.metaInfo.file),this.chunkCount=_s.length,_c=[],_l=function(i_,c_){var h_=(i_=ra(c_[i_],2))[0],y_=i_[1];i_=bs(y_).then(function(l_){e_.chunks[h_]={payload:y_,sha1:l_,uploadedTo:void 0,index:h_,processed:!1}}),_c.push(i_)},_d=0,_m=Array.from(_s.entries());_d<_m.length;_d++)_l(_d,_m);return t_.next=11,Promise.all(_c);case 11:this.updateProgress(0),this.initState="initialized",this.log("upload chunks initialized");case 14:case"end":return t_.stop()}},Wt,this)}));return function(Wt){return Vt.apply(this,arguments)}}()},{key:"uploadToServers",value:function(){var Vt=this;if(!this.aborted){for(var Wt=this.chunks.filter(function(_c){return!_c.processed}),_i=function(_c){var _l=Wt[_c],_d=Vt.servers.filter(function(e_){return!e_.isUploading}).sort(function(e_,t_){return e_.successCount-t_.successCount}).sort(function(e_,t_){return e_.failureCount-t_.failureCount})[0];if(_d===void 0||1<_d.failureCount)return Vt.log("Upload server not available, waiting"),Vt.ee.emit("serverUsedUp"),Om(1e3).then(function(){Vt.totalFailures>2*Vt.chunkCount&&Vt.ee.emit("error"),Vt.totalFailures+=1,_d!==void 0&&(_d.failureCount=0),Vt.uploadToServers()}).catch(function(){}),"break";_l.processed=!0,_d.isUploading=!0,Vt.log("uploading chunk %d to server %s",_l.index,Dg(_d.ip));var _m=Vt.getUploadUrl(_d.ip);return J(w.mark(function e_(){var t_;return w.wrap(function(i_){for(;;)switch(i_.prev=i_.next){case 0:return i_.prev=0,i_.next=3,Vt.postChunk(_l.payload,_m,_l.index);case 3:t_=Vt.chunks.findIndex(function(c_){return c_===_l}),_l.uploadedTo=_d.ip,Vt.chunks.splice(t_,1),Vt.uploadedChunks.push(_l),_d.successCount+=1,_d.isUploading=!1,Vt.updateProgress(_l.payload.byteLength),Vt.log("upload chunk %d successfully",_l.index),i_.next=31;break;case 13:if(i_.prev=13,i_.t0=i_.catch(0),_d.isUploading=!1,_l.processed=!1,i_.t0.statusCode!==504&&!Sa(i_.t0)){i_.next=27;break}if(Vt.singleThread){i_.next=24;break}return Vt.warn("%d upload timed out after %d, retrying use single thread",_l.index,Vt.singleThread?12e4:3e4),Vt.abortController.abort(),Vt.singleThread=!0,Vt.ee.emit("multiTimeOut"),i_.abrupt("return");case 24:return Vt.ee.emit("timedOut"),Vt.abortController.abort(),i_.abrupt("return");case 27:return Vt.metaInfo.useNewDomain=!1,_d.failureCount+=1,i_.next=31,Om(1e3);case 31:Vt.uploadedChunks.length===Vt.chunkCount?(Vt.log("chunks uploaded"),Vt.ee.emit("finished")):(Vt.singleThread||Vt.chunks.filter(function(c_){return!c_.processed}).length===1)&&Vt.uploadToServers();case 32:case"end":return i_.stop()}},e_,null,[[0,13]])}))(),Vt.singleThread?"break":void 0},_s=0;_s<Wt.length&&_i(_s)!=="break";_s++);Wt.length===0&&this.uploadedChunks.length!==this.chunkCount&&this.log("%d chunks left uploading",this.chunkCount-this.uploadedChunks.length)}}},{key:"getUploadServerIPs",value:function(){var Vt=!0,Wt=[],_i=G(this.uploadedChunks).sort(function(_l,_d){return _l.index-_d.index}),_s=0;for(_i=Array.from(_i.values());_s<_i.length;_s++){var _c=_i[_s].uploadedTo;if(_c===void 0){Vt=!1;break}Wt.push(_c)}if(!Vt)throw new Ia("some chunks not uploaded, cannot get upload server ips");return Wt}},{key:"addServers",value:function(Vt){var Wt=this;Vt.forEach(function(_i){var _s=Wt.servers.findIndex(function(_c){return _c.ip===_i});_s!==-1?Wt.servers[_s].failureCount=0:(Wt.log("server %s added",Dg(_i)),Wt.servers.push({successCount:0,isUploading:!1,ip:_i,failureCount:0}))})}},{key:"updateProgress",value:function(Vt){var Wt=this,_i=Vt!==void 0?this.uploadedSize+Vt:this.metaInfo.file.length;_i>this.metaInfo.file.length?(this.warn("Invalid upload size, overflowed"),this.ee.emit("error",new Wc("Invalid upload size",lg))):(this.uploadedSize=_i,this.timer!==void 0&&Vt!==0&&(clearTimeout(this.timer),this.timer=void 0),this.timer===void 0&&Vt!==void 0&&this.uploadedChunks.length!==this.chunkCount&&(this.timer=setTimeout(function(){Wt.ee.emit("timedOut"),Wt.abortController.abort()},12e4)),this.initState==="initialized"&&Vt===0||this.transHandler.onOperationProgress===void 0||this.transHandler.onOperationProgress({totalSize:this.metaInfo.file.length,currentSize:this.uploadedSize}))}},{key:"sliceFile",value:function(Vt,Wt){var _i=0,_s=[],_c=Wt.length;for(Vt*=32768;_i<_c;)_s.push(Wt.slice(_i,_i+Vt)),_i+=Vt;return this.log("chunks split into %d",_s.length),_s}},{key:"postChunk",value:function(){var Vt=J(w.mark(function Wt(_i,_s,_c){var _l,_d,_m,e_,t_,i_,c_,h_;return w.wrap(function(y_){for(;;)switch(y_.prev=y_.next){case 0:if(!this.aborted){y_.next=2;break}throw new Ia("upload already aborted");case 2:if(this.unit!==void 0){y_.next=4;break}throw new Ia("unit is undefined");case 4:return _l=this.metaInfo,_d=_l.ticket,_m=_l.instance,e_=_l.loginOpt,t_=_l.hashStr,y_.t0=_c,y_.t1=t_,y_.next=9,bs(_i);case 9:return y_.t2=y_.sent,y_.t3=this.unit,y_.t4=_d,y_.t5=_m,y_.t6=e_,i_={index:y_.t0,hash:y_.t1,sha1:y_.t2,unit:y_.t3,ticket:y_.t4,instance:y_.t5,loginOpt:y_.t6},(c_=new FormData).append("parameter",JSON.stringify(i_)),c_.append("payload",new Blob([_i])),y_.next=20,te(_s,{headers:{Accept:"application/json"},body:c_,timeout:this.singleThread?12e4:3e4,signal:this.abortController.signal});case 20:if(h_=y_.sent,h_.status===201){y_.next=24;break}throw new da("uploading chunk ".concat(_c," failed"));case 24:case"end":return y_.stop()}},Wt,this)}));return function(Wt,_i,_s){return Vt.apply(this,arguments)}}()},{key:"getUploadUrl",value:function(Vt){var Wt=this.metaInfo.useNewDomain?"sd-rtn.com":"agora.io";return"https://".concat(Dg(Vt).split(".").join("-"),".edge.").concat(Wt,":9601/api/v1/chuck/upload")}}]),_e}(tb()),fs=function($){function _e(Vt){W(this,_e);var Wt=_t.call(this,Vt,"MediaTaskManager");return m(n(Wt),"isProcessing",!1),m(n(Wt),"authInfo",void 0),m(n(Wt),"taskFinishers",{}),m(n(Wt),"mediaTasks",new Map),m(n(Wt),"ongoingTask",void 0),Wt.on("connectionStateChanged",function(_i){if(_i===S.ConnectionState.ABORTED||_i===S.ConnectionState.DISCONNECTED){Wt.ongoingTask!==void 0&&Wt.cancelTask(Wt.ongoingTask),_i=0;for(var _s=Array.from(Wt.mediaTasks.entries());_i<_s.length;_i++){var _c=ra(_s[_i],2)[1];Wt.cancelTask(_c)}Wt.mediaTasks.clear(),Wt.taskFinishers={}}else _i===S.ConnectionState.RECONNECTING?Wt.ongoingTask!==void 0&&Wt.ongoingTask.manager.abortController.abort():_i===S.ConnectionState.CONNECTED&&Wt.ongoingTask!==void 0&&Wt.ongoingTask.manager.ee.emit("reconnected")}),Wt}la(_e,$);var _t=ma(_e);return Ha(_e,[{key:"setAuthInfo",value:function(Vt){this.authInfo=Vt}},{key:"waitMediaTask",value:function(Vt){var Wt=this;return new Promise(function(_i,_s){Wt.taskFinishers[Vt]={resolve:_i,reject:_s},Wt.isProcessing||Wt.processMediaTask()}).finally(function(){Wt.ongoingTask!==void 0&&Wt.ongoingTask.manager.timer!==void 0&&clearTimeout(Wt.ongoingTask.manager.timer),delete Wt.taskFinishers[Vt],Wt.mediaTasks.size!==0?Wt.processMediaTask():Wt.isProcessing=!1})}},{key:"addUploadTask",value:function(Vt,Wt,_i,_s){var _c=Vt.file;if(Vt=Vt.hash,this.authInfo===void 0)throw new Ia("session not found");if(this.mediaTasks.size>=_e.MAX_PENDING_TASK_COUNT-1)throw new ib("Upload media failed, exceed max pending jobs",xA);return _s=new es({hashStr:as(Vt),file:_c,ticket:this.authInfo.ticket,instance:this.authInfo.instance.toString(),loginOpt:this.authInfo.loginOpt.toString(),useNewDomain:this.authInfo.useNewDomain},_s,this.logger),_c=Ud(),this.mediaTasks.set(_c,{type:"UPLOAD",manager:_s,hash:Vt,setter:_i,fetcher:Wt,taskId:_c}),_c}},{key:"addDownloadTask",value:function(Vt,Wt,_i){var _s=Vt.hashHexStr,_c=Vt.size,_l=Vt.unit;if(Vt=Vt.zone,this.authInfo===void 0)throw new Ia("session not found");if(this.mediaTasks.size>=_e.MAX_PENDING_TASK_COUNT-1)throw new ib("Download media failed, exceed max pending jobs",BA);return _i=new ds({hashHexStr:_s,ticket:this.authInfo.ticket,useNewDomain:this.authInfo.useNewDomain,instance:this.authInfo.instance.toString(),loginOpt:this.authInfo.loginOpt.toString(),size:_c,zone:Vt,unit:_l},_i,this.logger),_s=Ud(),this.mediaTasks.set(_s,{type:"DOWNLOAD",manager:_i,fetcher:Wt,taskId:_s}),_s}},{key:"doDownloadTaskImpl",value:function(){var Vt=J(w.mark(function Wt(_i,_s){var _c,_l,_d,_m,e_,t_,i_,c_,h_=this,y_=arguments;return w.wrap(function(l_){for(;;)switch(l_.prev=l_.next){case 0:return _c=2<y_.length&&y_[2]!==void 0&&y_[2],_d=_l=_i.manager,_c&&(_l=new ds(_d.metaInfo,_d.transHandler,this.logger,_d.ee)),_m=_i.fetcher,l_.next=7,_m();case 7:if(e_=l_.sent,t_=e_.serverList,i_=e_.backupList,c_=e_.unit,!_c||c_===_d.retUnit){l_.next=13;break}throw new da("download unit is different, reject to continue",mg);case 13:_c&&(_i.manager=_l,_l.downloadedSize=_d.downloadedSize,_l.successCount=_d.successCount,_l.timer=_d.timer,_l.chunks=_d.chunks,_l.initialized=_d.initialized,_l.singleThread=_d.singleThread,_l.updateProgress(0)),_l.ee.once("reconnected",function(){_l.ee.removeAllListeners(),h_.doDownloadTaskImpl(_i,_s,!0).catch(function(d_){_s.reject(d_)})}),_l.ee.once("multiTimeOut",function(){_l.ee.removeAllListeners(),h_.doDownloadTaskImpl(_i,_s,!0).catch(function(d_){_s.reject(d_)})}),_l.ee.once("error",function(d_){_l.ee.removeAllListeners(),_s.reject(new da(["download file file, index %d",d_.index],{code:mg,originalError:d_}))}),_l.ee.once("notExist",function(){_l.abortController.abort(),_l.ee.removeAllListeners(),_s.reject(new da("download file not found",AA))}),_l.ee.once("timedOut",function(){_l.ee.removeAllListeners(),_l.abortController.abort(),_s.reject(new db("download timed out",zA))}),_l.transHandler.cancelSignal!==void 0&&_l.transHandler.cancelSignal.addEventListener("abort",function(){_s.reject(new hl("Downloading canceled",ir))},{once:!0}),_l.ee.once("finished",function(){_s.resolve({type:"DOWNLOAD",payload:_l.getPayload()})}),_l.setInfoByResponse({serverList:t_,backupList:i_,unit:c_}),_l.downloadChunks();case 23:case"end":return l_.stop()}},Wt,this)}));return function(Wt,_i){return Vt.apply(this,arguments)}}()},{key:"doDownloadTask",value:function(Vt,Wt){var _i=this,_s=2<arguments.length&&arguments[2]!==void 0&&arguments[2],_c=Vt.taskId;return _s||(this.mediaTasks.delete(_c),this.ongoingTask=Vt),new Promise(function(_l,_d){_i.doDownloadTaskImpl(Vt,Wt,_s).then(_l).catch(_d)})}},{key:"doUploadTaskImpl",value:function(){var Vt=J(w.mark(function Wt(_i,_s){var _c,_l,_d,_m,e_,t_,i_,c_,h_,y_=this,l_=arguments;return w.wrap(function(d_){for(;;)switch(d_.prev=d_.next){case 0:return _c=2<l_.length&&l_[2]!==void 0&&l_[2],_d=_l=_i.manager,_c&&(_l=new es(_d.metaInfo,_d.transHandler,this.logger,_d.ee)),_m=_i.fetcher,e_=new Pa,i_=new Promise(function(f_,S_){var T_=_m(),R_=T_.ret,C_=T_.err,j_=T_.timeout;T_.fin.pipe(ob(e_)).subscribe({next:function(W_){_s.resolve({type:"UPLOAD",retUnit:W_.unit,zone:W_.zone})},complete:function(){f_({hasExist:!0}),e_.next(),e_.complete()}}),R_.pipe(ob(e_),cb(function(){var W_=J(w.mark(function A_($_){var q_,G_;return w.wrap(function(I_){for(;;)switch(I_.prev=I_.next){case 0:if(q_=$_.servers,G_=$_.unit,_c&&_d.unit!==G_?_s.reject(new da("upload unit is different, reject to continue",lg)):_c&&(_i.manager=_l,_l.chunkCount=_d.chunkCount,_l.chunks=_d.chunks,_l.totalFailures=_d.totalFailures,_l.uploadedChunks=_d.uploadedChunks,_l.timer=_d.timer,_l.initState=_d.initState,_l.unit=_d.unit,_l.uploadedSize=_d.uploadedSize,_l.singleThread=_d.singleThread,_l.updateProgress(0)),_l.addServers(q_),_l.initState!=="uninitialized"){I_.next=7;break}return t_=_l.initChunks(G_),I_.next=7,t_;case 7:case"end":return I_.stop()}},A_)}));return function(A_){return W_.apply(this,arguments)}}())).subscribe({complete:function(){return f_({hasExist:!1})},error:S_}),T_=function(W_){_l.initState!=="uninitialized"&&t_?f_(t_.then(function(){return{hasExist:!1}})):S_(W_)},C_.pipe(ob(e_)).subscribe({error:T_}),j_.pipe(ob(e_)).subscribe({error:T_})}),d_.next=9,i_;case 9:if(c_=d_.sent,!c_.hasExist){d_.next=15;break}return _l.updateProgress(),this.log("file already exists, skipping upload"),d_.abrupt("return");case 15:e_.next(),e_.complete(),this.log("chunks initialization promise resolved"),h_=gb(_l.ee,"serverUsedUp").pipe(Gt(function(){return _l.chunkCount!==_l.uploadedChunks.length}),Jt(5e3,void 0,{leading:!1}),pm(function(){return _m().ret})).subscribe(function(f_){_l.addServers(f_.servers)}),_l.ee.once("reconnected",function(){_l.ee.removeAllListeners(),y_.doUploadTask(_i,_s,!0).catch(function(f_){_s.reject(f_)})}),_l.ee.once("multiTimeOut",function(){_l.ee.removeAllListeners(),y_.doUploadTask(_i,_s,!0).catch(function(f_){_s.reject(f_)})}),_l.ee.once("timedOut",function(){h_.unsubscribe(),_l.ee.removeAllListeners(),_l.abortController.abort(),_s.reject(new db("upload timed out",Lh))}),_l.ee.once("error",function(f_){h_.unsubscribe(),_l.ee.removeAllListeners(),_l.abortController.abort(),_s.reject(f_||new da("upload error",lg))}),_l.transHandler.cancelSignal!==void 0&&_l.transHandler.cancelSignal.addEventListener("abort",function(){_s.reject(new hl("Uploading canceled",hr))},{once:!0}),_l.ee.once("finished",J(w.mark(function f_(){var S_,T_,R_;return w.wrap(function(C_){for(;;)switch(C_.prev=C_.next){case 0:return h_.unsubscribe(),C_.next=3,_i.setter(_l.unit,_l.getUploadServerIPs());case 3:S_=C_.sent,T_=S_.zone,R_=S_.unit,_l.ee.removeAllListeners(),_s.resolve({type:"UPLOAD",retUnit:R_,zone:T_});case 8:case"end":return C_.stop()}},f_)}))),_l.uploadToServers();case 26:case"end":return d_.stop()}},Wt,this)}));return function(Wt,_i){return Vt.apply(this,arguments)}}()},{key:"doUploadTask",value:function(Vt,Wt){var _i=this,_s=2<arguments.length&&arguments[2]!==void 0&&arguments[2],_c=Vt.taskId;return _s||(this.mediaTasks.delete(_c),this.ongoingTask=Vt),new Promise(function(_l,_d){_i.doUploadTaskImpl(Vt,Wt,_s).then(_l).catch(_d)})}},{key:"processMediaTask",value:function(){var Vt=J(w.mark(function Wt(){var _i,_s,_c;return w.wrap(function(_l){for(;;)switch(_l.prev=_l.next){case 0:if(this.mediaTasks.size!==0){_l.next=2;break}throw Error("no upload tasks");case 2:if(this.isProcessing=!0,_i=this.mediaTasks.keys().next().value,(_s=this.taskFinishers[_i])!==void 0){_l.next=7;break}throw Error("top task not found");case 7:if((_c=this.mediaTasks.get(_i))!==void 0){_l.next=10;break}throw new Ia("task invalid");case 10:if(_c.type!=="UPLOAD"){_l.next=15;break}return _l.next=13,this.doUploadTask(_c,_s).catch(function(_d){_c.manager.ee.removeAllListeners(),_s.reject(_d)});case 13:_l.next=18;break;case 15:if(_c.type!=="DOWNLOAD"){_l.next=18;break}return _l.next=18,this.doDownloadTask(_c,_s).catch(function(_d){_c.manager.ee.removeAllListeners(),_s.reject(_d)});case 18:case"end":return _l.stop()}},Wt,this)}));return function(){return Vt.apply(this,arguments)}}()},{key:"cancelTask",value:function(Vt){var Wt=Vt.type==="DOWNLOAD"?ir:hr;Vt.manager.ee.removeAllListeners(),Vt.manager.abortController.abort(),this.taskFinishers[Vt.taskId]!==void 0&&this.taskFinishers[Vt.taskId].reject(new hl("User logged out or kicked off, media task canceled",Wt))}}]),_e}(tb());m(fs,"MAX_PENDING_TASK_COUNT",9),Oo("of",function(){for(var $=0,_e=arguments.length,_t=new(Ne(this))(_e);_e>$;)_t[$]=arguments[$++];return _t},Dj);var gs=1/0,dD=Math.max,ju=function($,_e,_t){var Vt=Object($);if(!Ed($)){var Wt=Te(_e);$=Ad($),_e=function(_i){return Wt(Vt[_i],_i,Vt)}}return-1<(_e=function(_i,_s,_c){var _l=_i==null?0:_i.length;if(!_l)return-1;if(_c==null)_c=0;else{var _d=(_c=_c?(_c=gl(_c))===gs||_c===-gs?17976931348623157e292*(0>_c?-1:1):_c==_c?_c:0:_c===0?_c:0)%1;_c=_c==_c?_d?_c-_d:_c:0}return 0>_c&&(_c=dD(_l+_c,0)),Xp(_i,Te(_s),_c)}($,_e,_t))?Vt[Wt?$[_e]:_e]:void 0},iu=function($,_e){return $&&$.length?vk($,void 0,typeof _e=="function"?_e:void 0):[]},hs=function(){function $(){W(this,$),m(this,"size",0),m(this,"fields",new Map)}return Ha($,[{key:"define",value:function(_e,_t,Vt){if(this.size+=Vt,64<this.size)throw new RangeError("the struct over 64 bits is not supported");Mg(_t={val:0,isNumber:_t==="number",isBoolean:_t==="boolean",oneof:_t==="number"||_t==="boolean"?void 0:_t,len:Vt}),this.fields.set(_e,_t)}},{key:"set",value:function(_e,_t){if(!(_e=this.fields.get(_e)))throw Error("field not found");var Vt=_e.oneof;if(!U.isLong(_t)&&typeof _t!="number")if(typeof _t=="boolean")_t=_t?1:0;else{if(Vt===void 0)throw Error("invalid field type");if((_t=Vt[_t])===void 0)throw Error("field type not found")}Mg(_e,_t),_e.val=_t}},{key:"toNumber",value:function(){for(var _e=0,_t=0,Vt=0,Wt=Array.from(this.fields);Vt<Wt.length;Vt++){var _i=ra(Wt[Vt],2)[1],_s=_i.len;(_i=_i.val)!==void 0&&(_e+=U.fromValue(_i).shiftLeft(_t).toNumber(),_t+=_s)}return _e}},{key:"toLong",value:function(){for(var _e=U.fromNumber(0,!0),_t=0,Vt=0,Wt=Array.from(this.fields);Vt<Wt.length;Vt++){var _i=ra(Wt[Vt],2)[1],_s=_i.len;(_i=_i.val)!==void 0&&(_e=U.fromValue(_i).shiftLeft(_t).add(_e),_t+=_s)}return _e}},{key:"assert",value:function(_e,_t){function Vt(_s){if(!U.isLong(_s)&&typeof _s!="number")if(typeof _s=="boolean")_s=_s?1:0;else{if(_i===void 0)throw Error("invalid field type");if((_s=_i[_s])===void 0)throw Error("field type not found")}return Mg(Wt,_s),Lg(_s,Wt.val)}var Wt=this.fields.get(_e);if(!Wt)throw Error("field not found");var _i=Wt.oneof;if(!Array.isArray(_t))return Vt(_t);if(_t.length===1)return Vt(_t[0]);if(_t.every(function(_s){return typeof _s=="string"})&&_i!==void 0)return _t.some(function(_s){return Vt(_s)});throw Error("invalid valueTypes")}},{key:"from",value:function(_e){_e=U.fromValue(_e);for(var _t=0,Vt=0,Wt=Array.from(this.fields);Vt<Wt.length;Vt++){var _i=ra(Wt[Vt],2)[1],_s=_i.len,_c=U.fromNumber(Math.pow(2,_s)-1,!0).shiftLeft(_t);Mg(_i,_c=_e.and(_c).shiftRightUnsigned(_t)),_i.val=_c,_t+=_s}}},{key:"typeOf",value:function(_e){if((_e=this.fields.get(_e))!==void 0){var _t=_e.oneof;if(_e=_e.val,_t!==void 0){var Vt=0;for(_t=Object.entries(_t);Vt<_t.length;Vt++){var Wt=ra(_t[Vt],2),_i=Wt[0];if(Lg(_e,Wt[1]))return _i}}}throw new TypeError("can only get type of oneof type")}}]),$}(),is=function($){function _e(Vt){W(this,_e);var Wt=_t.call(this);return Wt.define("Rejoin","boolean",1),Wt.define("Unused","number",31),Wt.define("Platform","number",8),Wt.define("Version","number",12),Wt.define("Subversion","number",12),Wt.set("Platform",7),Wt.set("Version",4),Wt.set("Subversion",203),Wt.set("Rejoin",Vt),Wt}la(_e,$);var _t=ma(_e);return _e}(hs),eD=ua(ua(ua(ua({},{PeerTextMessage:0,ChannelTextMessage:1,VendorTextMessage:2}),{PeerRawMessage:3,ChannelRawMessage:4,VendorRawMessage:5}),{PeerImageMessage:6,ChannelImageMessage:7,VendorImageMessage:8}),{PeerFileMessage:15,ChannelFileMessage:16,VendorFileMessage:17}),js={CallInvite:101,CallAccept:102,CallReject:103,CallCancel:104},fD=ua(ua({},eD),js),gD={Uncompressed:0,Zlib:1},ae=function($){function _e(Vt){W(this,_e);var Wt=_t.call(this);if(Wt.define("MessageType",fD,8),Wt.define("BroadcastJumps","number",2),Wt.define("ToCache","boolean",1),Wt.define("FromCache","boolean",1),Wt.define("CompressionMethod",gD,2),Wt.define("IterationNumber","number",4),Wt.define("BufferedMessage","boolean",1),Wt.define("ToArchive","boolean",1),Wt.define("FromArchive","boolean",1),typeof Vt=="number"||U.isLong(Vt))Wt.from(Vt);else if(Vt!==void 0){var _i=0;for(Vt=Hg(Vt);_i<Vt.length;_i++){var _s=ra(Vt[_i],2);Wt.set(_s[0],_s[1])}}return Wt}la(_e,$);var _t=ma(_e);return Ha(_e,[{key:"isTextMessage",value:function(){return this.assert("MessageType",["PeerTextMessage","ChannelTextMessage","VendorTextMessage"])}},{key:"isRawMessage",value:function(){return this.assert("MessageType",["ChannelRawMessage","PeerRawMessage","VendorRawMessage"])}},{key:"isRawPeerMessage",value:function(){return this.assert("MessageType","PeerRawMessage")}},{key:"isRawChannelMessage",value:function(){return this.assert("MessageType","ChannelRawMessage")}},{key:"isPeerTextMessage",value:function(){return this.assert("MessageType","PeerTextMessage")}},{key:"isChannelTextMessage",value:function(){return this.assert("MessageType","ChannelTextMessage")}},{key:"isInvitation",value:function(Vt){var Wt=this;return Vt!==void 0?this.assert("MessageType",Vt):xf(js).some(function(_i){return Wt.assert("MessageType",_i)})}},{key:"isFileMessage",value:function(){return this.assert("MessageType",["PeerFileMessage","ChannelFileMessage","VendorFileMessage"])}},{key:"isImageMessage",value:function(){return this.assert("MessageType",["PeerImageMessage","ChannelImageMessage","VendorImageMessage"])}},{key:"isPeerMessage",value:function(){return this.assert("MessageType",["PeerFileMessage","PeerTextMessage","PeerImageMessage","PeerRawMessage"])}},{key:"isZlibCompressed",value:function(){return this.assert("CompressionMethod","Zlib")}},{key:"isFromCache",value:function(){return this.assert("FromCache",!0)}},{key:"isBufferedMessage",value:function(){return this.assert("BufferedMessage",!0)}},{key:"getInvitationType",value:function(){if(!this.isInvitation())throw new TypeError("cannot get InvitationType of a normal message type");return this.typeOf("MessageType")}}]),_e}(hs),hD=function($){function _e(Vt){return W(this,_e),m(n(Vt=_t.call(this,Vt,"ChatManager")),"dialogueLru",new Sx(void 0,{maxlen:1e4,ttl:1e4})),Vt}la(_e,$);var _t=ma(_e);return Ha(_e,[{key:"getChatInfo",value:function(Vt){var Wt=this.dialogueLru.get(Vt);if(this.dialogueLru.prune(),Wt){var _i=Wt.dialogue,_s={dialogue:_i,sequence:Wt=Wt.sequence.add(1)};return this.dialogueLru.set(Vt,{dialogue:_i,sequence:Wt}),_s}return _i={dialogue:Bg(),sequence:U.fromNumber(1,!0)},this.dialogueLru.set(Vt,_i),_i}}]),_e}(tb()),v={};X(module)=="object"&&(module.exports=v),v.parse=function($,_e){var _t,Vt=v.bin.readUshort,Wt=v.bin.readUint,_i={};for(_t=($=new Uint8Array($)).length-4;Wt($,_t)!=101010256;)_t--;var _s=Vt($,_t=_t+4+4);Vt($,_t+=2),Wt($,_t+=2),_t=Wt($,_t+=4);for(var _c=0;_c<_s;_c++){Wt($,_t),_t+=4,_t+=4,_t+=4,Wt($,_t+=4);var _l=Wt($,_t+=4),_d=Wt($,_t+=4),_m=Vt($,_t+=4),e_=Vt($,_t+2),t_=Vt($,_t+4);_t+=6;var i_=Wt($,_t+=8);_t+=4,_t+=_m+e_+t_,v._readLocal($,i_,_i,_l,_d,_e)}return _i},v._readLocal=function($,_e,_t,Vt,Wt,_i){var _s=v.bin.readUshort,_c=v.bin.readUint;_c($,_e),_s($,_e+=4),_s($,_e+=2);var _l=_s($,_e+=2);_c($,_e+=2),_c($,_e+=4),_c=_s($,_e=_e+4+8);var _d=_s($,_e+=2);if(_e+=2,_s=v.bin.readUTF8($,_e,_c),_e=_e+_c+_d,_i)_t[_s]={size:Wt,csize:Vt};else if($=new Uint8Array($.buffer,_e),_l==0)_t[_s]=new Uint8Array($.buffer.slice(_e,_e+Vt));else{if(_l!=8)throw"unknown compression method: "+_l;_e=new Uint8Array(Wt),v.inflateRaw($,_e),_t[_s]=_e}},v.inflateRaw=function($,_e){return v.F.inflate($,_e)},v.inflate=function($,_e){return $[0],$[1],v.inflateRaw(new Uint8Array($.buffer,$.byteOffset+2,$.length-2),_e)},v.deflate=function($,_e){_e==null&&(_e={level:6});var _t=0,Vt=new Uint8Array(50+Math.floor(1.1*$.length));return Vt[_t]=120,Vt[_t+1]=156,_t=v.F.deflateRaw($,Vt,_t+2,_e.level),$=v.adler($,0,$.length),Vt[_t+0]=$>>>24&255,Vt[_t+1]=$>>>16&255,Vt[_t+2]=$>>>8&255,Vt[_t+3]=$>>>0&255,new Uint8Array(Vt.buffer,0,_t+4)},v.deflateRaw=function($,_e){_e==null&&(_e={level:6});var _t=new Uint8Array(50+Math.floor(1.1*$.length)),Vt=v.F.deflateRaw($,_t,Vt,_e.level);return new Uint8Array(_t.buffer,0,Vt)},v.encode=function($,_e){_e==null&&(_e=!1);var _t,Vt=0,Wt=v.bin.writeUint,_i=v.bin.writeUshort,_s={};for(_t in $){var _c=!v._noNeed(_t)&&!_e,_l=$[_t],_d=v.crc.crc(_l,0,_l.length);_s[_t]={cpr:_c,usize:_l.length,crc:_d,file:_c?v.deflateRaw(_l):_l}}for(_t in _s)Vt+=_s[_t].file.length+30+46+2*v.bin.sizeUTF8(_t);for(_t in $=new Uint8Array(Vt+22),_e=0,_l=[],_s)_d=_s[_t],_l.push(_e),_e=v._writeHeader($,_e,_t,_d,0);for(_t in Vt=0,_c=_e,_s)_d=_s[_t],_l.push(_e),_e=v._writeHeader($,_e,_t,_d,1,_l[Vt++]);return _s=_e-_c,Wt($,_e,101010256),_i($,_e=_e+4+4,Vt),_i($,_e+=2,Vt),Wt($,_e+=2,_s),Wt($,_e+4,_c),$.buffer},v._noNeed=function($){return $=$.split(".").pop().toLowerCase(),"png,jpg,jpeg,zip".indexOf($)!=-1},v._writeHeader=function($,_e,_t,Vt,Wt,_i){var _s=v.bin.writeUint,_c=v.bin.writeUshort,_l=Vt.file;return _s($,_e,Wt==0?67324752:33639248),_e+=4,Wt==1&&(_e+=2),_c($,_e,20),_c($,_e+=2,0),_c($,_e+=2,Vt.cpr?8:0),_s($,_e+=2,0),_s($,_e+=4,Vt.crc),_s($,_e+=4,_l.length),_s($,_e+=4,Vt.usize),_c($,_e+=4,v.bin.sizeUTF8(_t)),_c($,_e+=2,0),_e+=2,Wt==1&&(_s($,_e=_e+2+2+6,_i),_e+=4),_e+=_t=v.bin.writeUTF8($,_e,_t),Wt==0&&($.set(_l,_e),_e+=_l.length),_e},v.crc={table:function(){for(var $=new Uint32Array(256),_e=0;256>_e;_e++){for(var _t=_e,Vt=0;8>Vt;Vt++)_t=1&_t?3988292384^_t>>>1:_t>>>1;$[_e]=_t}return $}(),update:function($,_e,_t,Vt){for(var Wt=0;Wt<Vt;Wt++)$=v.crc.table[255&($^_e[_t+Wt])]^$>>>8;return $},crc:function($,_e,_t){return 4294967295^v.crc.update(4294967295,$,_e,_t)}},v.adler=function($,_e,_t){var Vt=1,Wt=0,_i=_e;for(_e+=_t;_i<_e;){for(_t=Math.min(_i+5552,_e);_i<_t;)Wt+=Vt+=$[_i++];Vt%=65521,Wt%=65521}return Wt<<16|Vt},v.bin={readUshort:function($,_e){return $[_e]|$[_e+1]<<8},writeUshort:function($,_e,_t){$[_e]=255&_t,$[_e+1]=_t>>8&255},readUint:function($,_e){return 16777216*$[_e+3]+($[_e+2]<<16|$[_e+1]<<8|$[_e])},writeUint:function($,_e,_t){$[_e]=255&_t,$[_e+1]=_t>>8&255,$[_e+2]=_t>>16&255,$[_e+3]=_t>>24&255},readASCII:function($,_e,_t){for(var Vt="",Wt=0;Wt<_t;Wt++)Vt+=String.fromCharCode($[_e+Wt]);return Vt},writeASCII:function($,_e,_t){for(var Vt=0;Vt<_t.length;Vt++)$[_e+Vt]=_t.charCodeAt(Vt)},pad:function($){return 2>$.length?"0"+$:$},readUTF8:function($,_e,_t){for(var Vt,Wt="",_i=0;_i<_t;_i++)Wt+="%"+v.bin.pad($[_e+_i].toString(16));try{Vt=decodeURIComponent(Wt)}catch{return v.bin.readASCII($,_e,_t)}return Vt},writeUTF8:function($,_e,_t){for(var Vt=_t.length,Wt=0,_i=0;_i<Vt;_i++){var _s=_t.charCodeAt(_i);if(!(4294967168&_s))$[_e+Wt]=_s,Wt++;else if(!(4294965248&_s))$[_e+Wt]=192|_s>>6,$[_e+Wt+1]=128|_s>>0&63,Wt+=2;else if(!(4294901760&_s))$[_e+Wt]=224|_s>>12,$[_e+Wt+1]=128|_s>>6&63,$[_e+Wt+2]=128|_s>>0&63,Wt+=3;else{if(4292870144&_s)throw"e";$[_e+Wt]=240|_s>>18,$[_e+Wt+1]=128|_s>>12&63,$[_e+Wt+2]=128|_s>>6&63,$[_e+Wt+3]=128|_s>>0&63,Wt+=4}}return Wt},sizeUTF8:function($){for(var _e=$.length,_t=0,Vt=0;Vt<_e;Vt++){var Wt=$.charCodeAt(Vt);if(!(4294967168&Wt))_t++;else if(!(4294965248&Wt))_t+=2;else if(!(4294901760&Wt))_t+=3;else{if(4292870144&Wt)throw"e";_t+=4}}return _t}},v.F={},v.F.deflateRaw=function($,_e,_t,Vt){var Wt=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][Vt],_i=v.F.U,_s=v.F._goodIndex;v.F._hash;var _c=v.F._putsE,_l=0;_t<<=3;var _d=0,_m=$.length;if(Vt==0){for(;_l<_m;){var e_=Math.min(65535,_m-_l);_c(_e,_t,_l+e_==_m?1:0),_t=v.F._copyExact($,_l,e_,_e,_t+8),_l+=e_}return _t>>>3}_c=_i.lits,Vt=_i.strt;var t_=_i.prev,i_=0,c_=0,h_=0,y_=0,l_=0;for(2<_m&&(Vt[l_=v.F._hash($,0)]=0),_l=0;_l<_m;_l++){if(e_=l_,_l+1<_m-2){l_=v.F._hash($,_l+1);var d_=_l+1&32767;t_[d_]=Vt[l_],Vt[l_]=d_}if(_d<=_l){if((14e3<i_||26697<c_)&&100<_m-_l&&(_d<_l&&(_c[i_]=_l-_d,i_+=2,_d=_l),_t=v.F._writeBlock(_l==_m-1||_d==_m?1:0,_c,i_,y_,$,h_,_l-h_,_e,_t),i_=c_=y_=0,h_=_l),d_=0,_l<_m-2&&(d_=v.F._bestMatch($,_l,t_,e_,Math.min(Wt[2],_m-_l),Wt[3])),d_!=0){e_=d_>>>16,d_&=65535;var f_=_s(e_,_i.of0);_i.lhst[257+f_]++;var S_=_s(d_,_i.df0);_i.dhst[S_]++,y_+=_i.exb[f_]+_i.dxb[S_],_c[i_]=e_<<23|_l-_d,_c[i_+1]=d_<<16|f_<<8|S_,i_+=2,_d=_l+e_}else _i.lhst[$[_l]]++;c_++}}for(h_==_l&&$.length!=0||(_d<_l&&(_c[i_]=_l-_d,i_+=2),_t=v.F._writeBlock(1,_c,i_,y_,$,h_,_l-h_,_e,_t));7&_t;)_t++;return _t>>>3},v.F._bestMatch=function($,_e,_t,Vt,Wt,_i){var _s=32767&_e,_c=_t[_s],_l=_s-_c+32768&32767;if(_c==_s||Vt!=v.F._hash($,_e-_l))return 0;for(var _d=Vt=0,_m=Math.min(32767,_e);_l<=_m&&--_i!=0&&_c!=_s;){if((Vt==0||$[_e+Vt]==$[_e+Vt-_l])&&(_s=v.F._howLong($,_e,_l))>Vt){if(_d=_l,(Vt=_s)>=Wt)break;_l+2<_s&&(_s=_l+2);for(var e_=0,t_=0;t_<_s-2;t_++){var i_=_e-_l+t_+32768&32767,c_=i_-_t[i_]+32768&32767;c_>e_&&(e_=c_,_c=i_)}}_l+=(_s=_c)-(_c=_t[_s])+32768&32767}return Vt<<16|_d},v.F._howLong=function($,_e,_t){if($[_e]!=$[_e-_t]||$[_e+1]!=$[_e+1-_t]||$[_e+2]!=$[_e+2-_t])return 0;var Vt=_e,Wt=Math.min($.length,_e+258);for(_e+=3;_e<Wt&&$[_e]==$[_e-_t];)_e++;return _e-Vt},v.F._hash=function($,_e){return($[_e]<<8|$[_e+1])+($[_e+2]<<4)&65535},v.saved=0,v.F._writeBlock=function($,_e,_t,Vt,Wt,_i,_s,_c,_l){var _d=v.F.U,_m=v.F._putsF,e_=v.F._putsE;_d.lhst[256]++;var t_=v.F.getTrees(),i_=t_[0],c_=t_[1],h_=t_[2],y_=t_[3],l_=t_[4],d_=t_[5],f_=t_[6];t_=t_[7];var S_=32+(_l+3&7?8-(_l+3&7):0)+(_s<<3),T_=Vt+v.F.contSize(_d.fltree,_d.lhst)+v.F.contSize(_d.fdtree,_d.dhst);Vt=Vt+v.F.contSize(_d.ltree,_d.lhst)+v.F.contSize(_d.dtree,_d.dhst),Vt+=14+3*d_+v.F.contSize(_d.itree,_d.ihst)+(2*_d.ihst[16]+3*_d.ihst[17]+7*_d.ihst[18]);for(var R_=0;286>R_;R_++)_d.lhst[R_]=0;for(R_=0;30>R_;R_++)_d.dhst[R_]=0;for(R_=0;19>R_;R_++)_d.ihst[R_]=0;if(S_=S_<T_&&S_<Vt?0:T_<Vt?1:2,_m(_c,_l,$),_m(_c,_l+1,S_),_l+=3,S_==0){for(;7&_l;)_l++;_l=v.F._copyExact(Wt,_i,_s,_c,_l)}else{if(S_==1)var C_=_d.fltree,j_=_d.fdtree;if(S_==2){for(v.F.makeCodes(_d.ltree,i_),v.F.revCodes(_d.ltree,i_),v.F.makeCodes(_d.dtree,c_),v.F.revCodes(_d.dtree,c_),v.F.makeCodes(_d.itree,h_),v.F.revCodes(_d.itree,h_),C_=_d.ltree,j_=_d.dtree,e_(_c,_l,y_-257),e_(_c,_l+=5,l_-1),e_(_c,_l+=5,d_-4),_l+=4,$=0;$<d_;$++)e_(_c,_l+3*$,_d.itree[1+(_d.ordr[$]<<1)]);_l=v.F._codeTiny(f_,_d.itree,_c,_l+3*d_),_l=v.F._codeTiny(t_,_d.itree,_c,_l)}for(d_=0;d_<_t;d_+=2){for(f_=($=_e[d_])>>>23,$=_i+(8388607&$);_i<$;)_l=v.F._writeLit(Wt[_i++],C_,_c,_l);f_!=0&&($=(i_=_e[d_+1])>>16,_s=i_>>8&255,i_&=255,e_(_c,_l=v.F._writeLit(257+_s,C_,_c,_l),f_-_d.of0[_s]),_l+=_d.exb[_s],_m(_c,_l=v.F._writeLit(i_,j_,_c,_l),$-_d.df0[i_]),_l+=_d.dxb[i_],_i+=f_)}_l=v.F._writeLit(256,C_,_c,_l)}return _l},v.F._copyExact=function($,_e,_t,Vt,Wt){var _i=Wt>>>3;return Vt[_i]=_t,Vt[_i+1]=_t>>>8,Vt[_i+2]=255-Vt[_i],Vt[_i+3]=255-Vt[_i+1],_i+=4,Vt.set(new Uint8Array($.buffer,_e,_t),_i),Wt+(_t+4<<3)},v.F.getTrees=function(){for(var $=v.F.U,_e=v.F._hufTree($.lhst,$.ltree,15),_t=v.F._hufTree($.dhst,$.dtree,15),Vt=[],Wt=v.F._lenCodes($.ltree,Vt),_i=[],_s=v.F._lenCodes($.dtree,_i),_c=0;_c<Vt.length;_c+=2)$.ihst[Vt[_c]]++;for(_c=0;_c<_i.length;_c+=2)$.ihst[_i[_c]]++;_c=v.F._hufTree($.ihst,$.itree,7);for(var _l=19;4<_l&&$.itree[1+($.ordr[_l-1]<<1)]==0;)_l--;return[_e,_t,_c,Wt,_s,_l,Vt,_i]},v.F.getSecond=function($){for(var _e=[],_t=0;_t<$.length;_t+=2)_e.push($[_t+1]);return _e},v.F.nonZero=function($){for(var _e="",_t=0;_t<$.length;_t+=2)$[_t+1]!=0&&(_e+=(_t>>1)+",");return _e},v.F.contSize=function($,_e){for(var _t=0,Vt=0;Vt<_e.length;Vt++)_t+=_e[Vt]*$[1+(Vt<<1)];return _t},v.F._codeTiny=function($,_e,_t,Vt){for(var Wt=0;Wt<$.length;Wt+=2){var _i=$[Wt],_s=$[Wt+1];Vt=v.F._writeLit(_i,_e,_t,Vt);var _c=_i==16?2:_i==17?3:7;15<_i&&(v.F._putsE(_t,Vt,_s,_c),Vt+=_c)}return Vt},v.F._lenCodes=function($,_e){for(var _t=$.length;_t!=2&&$[_t-1]==0;)_t-=2;for(var Vt=0;Vt<_t;Vt+=2){var Wt=$[Vt+1],_i=Vt+3<_t?$[Vt+3]:-1,_s=Vt+5<_t?$[Vt+5]:-1,_c=Vt==0?-1:$[Vt-1];if(Wt==0&&_i==Wt&&_s==Wt){for(_i=Vt+5;_i+2<_t&&$[_i+2]==Wt;)_i+=2;11>(Wt=Math.min(_i+1-Vt>>>1,138))?_e.push(17,Wt-3):_e.push(18,Wt-11),Vt+=2*Wt-2}else if(Wt==_c&&_i==Wt&&_s==Wt){for(_i=Vt+5;_i+2<_t&&$[_i+2]==Wt;)_i+=2;Wt=Math.min(_i+1-Vt>>>1,6),_e.push(16,Wt-3),Vt+=2*Wt-2}else _e.push(Wt,0)}return _t>>>1},v.F._hufTree=function($,_e,_t){var Vt=[],Wt=$.length,_i=_e.length,_s=0;for(_s=0;_s<_i;_s+=2)_e[_s]=0,_e[_s+1]=0;for(_s=0;_s<Wt;_s++)$[_s]!=0&&Vt.push({lit:_s,f:$[_s]});if($=Vt.length,Wt=Vt.slice(0),$==0)return 0;if($==1)return _e[1+((_t=Vt[0].lit)<<1)]=1,_e[1+((_t==0?1:0)<<1)]=1;Vt.sort(function(_m,e_){return _m.f-e_.f}),_s=Vt[0],_i=Vt[1];var _c=0,_l=1,_d=2;for(Vt[0]={lit:-1,f:_s.f+_i.f,l:_s,r:_i,d:0};_l!=$-1;)_s=_c!=_l&&(_d==$||Vt[_c].f<Vt[_d].f)?Vt[_c++]:Vt[_d++],_i=_c!=_l&&(_d==$||Vt[_c].f<Vt[_d].f)?Vt[_c++]:Vt[_d++],Vt[_l++]={lit:-1,f:_s.f+_i.f,l:_s,r:_i};for((Vt=v.F.setDepth(Vt[_l-1],0))>_t&&(v.F.restrictDepth(Wt,_t,Vt),Vt=_t),_s=0;_s<$;_s++)_e[1+(Wt[_s].lit<<1)]=Wt[_s].d;return Vt},v.F.setDepth=function($,_e){return $.lit!=-1?$.d=_e:Math.max(v.F.setDepth($.l,_e+1),v.F.setDepth($.r,_e+1))},v.F.restrictDepth=function($,_e,_t){var Vt=0,Wt=1<<_t-_e,_i=0;for($.sort(function(_c,_l){return _l.d==_c.d?_c.f-_l.f:_l.d-_c.d}),Vt=0;Vt<$.length&&$[Vt].d>_e;Vt++){var _s=$[Vt].d;$[Vt].d=_e,_i+=Wt-(1<<_t-_s)}for(_i>>>=_t-_e;0<_i;)(_s=$[Vt].d)<_e?($[Vt].d++,_i-=1<<_e-_s-1):Vt++;for(;0<=Vt;Vt--)$[Vt].d==_e&&0>_i&&($[Vt].d--,_i++);_i!=0&&console.log("debt left")},v.F._goodIndex=function($,_e){var _t=0;return _e[16|_t]<=$&&(_t|=16),_e[8|_t]<=$&&(_t|=8),_e[4|_t]<=$&&(_t|=4),_e[2|_t]<=$&&(_t|=2),_e[1|_t]<=$&&(_t|=1),_t},v.F._writeLit=function($,_e,_t,Vt){return v.F._putsF(_t,Vt,_e[$<<1]),Vt+_e[1+($<<1)]},v.F.inflate=function($,_e){var _t=Uint8Array;if($[0]==3&&$[1]==0)return _e||new _t(0);var Vt=v.F,Wt=Vt._bitsF,_i=Vt._bitsE,_s=Vt._decodeTiny,_c=Vt.makeCodes,_l=Vt.codes2map,_d=Vt._get17,_m=Vt.U,e_=_e==null;e_&&(_e=new _t($.length>>>2<<3));for(var t_,i_,c_,h_,y_=0,l_=0,d_=i_=0,f_=0;y_==0;)if(y_=Wt($,f_,1),t_=Wt($,f_+1,2),f_+=3,t_==0)7&f_&&(f_+=8-(7&f_)),t_=$[(f_=4+(f_>>>3))-4]|$[f_-3]<<8,e_&&(_e=v.F._check(_e,d_+t_)),_e.set(new _t($.buffer,$.byteOffset+f_,t_),d_),f_=f_+t_<<3,d_+=t_;else{if(e_&&(_e=v.F._check(_e,d_+131072)),t_==1&&(c_=_m.flmap,h_=_m.fdmap,l_=511,i_=31),t_==2){for(i_=_i($,f_,5)+257,t_=_i($,f_+5,5)+1,c_=_i($,f_+10,4)+4,f_+=14,h_=0;38>h_;h_+=2)_m.itree[h_]=0,_m.itree[h_+1]=0;for(l_=1,h_=0;h_<c_;h_++){var S_=_i($,f_+3*h_,3);_m.itree[1+(_m.ordr[h_]<<1)]=S_,S_>l_&&(l_=S_)}f_+=3*c_,_c(_m.itree,l_),_l(_m.itree,l_,_m.imap),c_=_m.lmap,h_=_m.dmap,f_=_s(_m.imap,(1<<l_)-1,i_+t_,$,f_,_m.ttree),l_=(1<<(S_=Vt._copyOut(_m.ttree,0,i_,_m.ltree)))-1,i_=(1<<(t_=Vt._copyOut(_m.ttree,i_,t_,_m.dtree)))-1,_c(_m.ltree,S_),_l(_m.ltree,S_,c_),_c(_m.dtree,t_),_l(_m.dtree,t_,h_)}for(;;)if(f_+=15&(t_=c_[_d($,f_)&l_]),(S_=t_>>>4)>>>8==0)_e[d_++]=S_;else{if(S_==256)break;t_=d_+S_-254,264<S_&&(t_=d_+((S_=_m.ldef[S_-257])>>>3)+_i($,f_,7&S_),f_+=7&S_),f_+=15&(S_=h_[_d($,f_)&i_]);var T_=((S_=_m.ddef[S_>>>4])>>>4)+Wt($,f_,15&S_);for(f_+=15&S_,e_&&(_e=v.F._check(_e,d_+131072));d_<t_;)_e[d_]=_e[d_++-T_],_e[d_]=_e[d_++-T_],_e[d_]=_e[d_++-T_],_e[d_]=_e[d_++-T_];d_=t_}}return _e.length==d_?_e:_e.slice(0,d_)},v.F._check=function($,_e){var _t=$.length;return _e<=_t?$:((_e=new Uint8Array(Math.max(_t<<1,_e))).set($,0),_e)},v.F._decodeTiny=function($,_e,_t,Vt,Wt,_i){for(var _s=v.F._bitsE,_c=v.F._get17,_l=0;_l<_t;){var _d=$[_c(Vt,Wt)&_e];Wt+=15&_d;var _m=_d>>>4;if(15>=_m)_i[_l]=_m,_l++;else{var e_=_d=0;for(_m==16?(e_=3+_s(Vt,Wt,2),Wt+=2,_d=_i[_l-1]):_m==17?(e_=3+_s(Vt,Wt,3),Wt+=3):_m==18&&(e_=11+_s(Vt,Wt,7),Wt+=7),_m=_l+e_;_l<_m;)_i[_l]=_d,_l++}}return Wt},v.F._copyOut=function($,_e,_t,Vt){for(var Wt=0,_i=0,_s=Vt.length>>>1;_i<_t;){var _c=$[_i+_e];Vt[_i<<1]=0,Vt[1+(_i<<1)]=_c,_c>Wt&&(Wt=_c),_i++}for(;_i<_s;)Vt[_i<<1]=0,Vt[1+(_i<<1)]=0,_i++;return Wt},v.F.makeCodes=function($,_e){var _t,Vt,Wt=v.F.U,_i=$.length,_s=Wt.bl_count;for(_t=0;_t<=_e;_t++)_s[_t]=0;for(_t=1;_t<_i;_t+=2)_s[$[_t]]++;for(Wt=Wt.next_code,_t=0,_s[0]=0,Vt=1;Vt<=_e;Vt++)_t=_t+_s[Vt-1]<<1,Wt[Vt]=_t;for(_e=0;_e<_i;_e+=2)(_s=$[_e+1])!=0&&($[_e]=Wt[_s],Wt[_s]++)},v.F.codes2map=function($,_e,_t){for(var Vt=$.length,Wt=v.F.U.rev15,_i=0;_i<Vt;_i+=2)if($[_i+1]!=0){var _s=$[_i+1],_c=_i>>1<<4|_s,_l=_e-_s;for(_l=(_s=$[_i]<<_l)+(1<<_l);_s!=_l;)_t[Wt[_s]>>>15-_e]=_c,_s++}},v.F.revCodes=function($,_e){for(var _t=v.F.U.rev15,Vt=15-_e,Wt=0;Wt<$.length;Wt+=2)$[Wt]=_t[$[Wt]<<_e-$[Wt+1]]>>>Vt},v.F._putsE=function($,_e,_t){_t<<=7&_e,$[_e>>>=3]|=_t,$[_e+1]|=_t>>>8},v.F._putsF=function($,_e,_t){_t<<=7&_e,$[_e>>>=3]|=_t,$[_e+1]|=_t>>>8,$[_e+2]|=_t>>>16},v.F._bitsE=function($,_e,_t){return($[_e>>>3]|$[1+(_e>>>3)]<<8)>>>(7&_e)&(1<<_t)-1},v.F._bitsF=function($,_e,_t){return($[_e>>>3]|$[1+(_e>>>3)]<<8|$[2+(_e>>>3)]<<16)>>>(7&_e)&(1<<_t)-1},v.F._get17=function($,_e){return($[_e>>>3]|$[1+(_e>>>3)]<<8|$[2+(_e>>>3)]<<16)>>>(7&_e)},v.F._get25=function($,_e){return($[_e>>>3]|$[1+(_e>>>3)]<<8|$[2+(_e>>>3)]<<16|$[3+(_e>>>3)]<<24)>>>(7&_e)},v.F.U=function(){var $=Uint16Array,_e=Uint32Array;return{next_code:new $(16),bl_count:new $(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new $(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new _e(32),flmap:new $(512),fltree:[],fdmap:new $(32),fdtree:[],lmap:new $(32768),ltree:[],ttree:[],dmap:new $(32768),dtree:[],imap:new $(512),itree:[],rev15:new $(32768),lhst:new _e(286),dhst:new _e(30),ihst:new _e(19),lits:new _e(15e3),strt:new $(65536),prev:new $(32768)}}(),function(){function $(Wt,_i,_s){for(;_i--!=0;)Wt.push(0,_s)}for(var _e=v.F.U,_t=0;32768>_t;_t++){var Vt=_t;Vt=(4278255360&(Vt=(4042322160&(Vt=(3435973836&(Vt=(2863311530&Vt)>>>1|(1431655765&Vt)<<1))>>>2|(858993459&Vt)<<2))>>>4|(252645135&Vt)<<4))>>>8|(16711935&Vt)<<8,_e.rev15[_t]=(Vt>>>16|Vt<<16)>>>17}for(_t=0;32>_t;_t++)_e.ldef[_t]=_e.of0[_t]<<3|_e.exb[_t],_e.ddef[_t]=_e.df0[_t]<<4|_e.dxb[_t];$(_e.fltree,144,8),$(_e.fltree,112,9),$(_e.fltree,24,7),$(_e.fltree,8,8),v.F.makeCodes(_e.fltree,9),v.F.codes2map(_e.fltree,9,_e.flmap),v.F.revCodes(_e.fltree,9),$(_e.fdtree,32,5),v.F.makeCodes(_e.fdtree,5),v.F.codes2map(_e.fdtree,5,_e.fdmap),v.F.revCodes(_e.fdtree,5),$(_e.itree,19,0),$(_e.ltree,286,0),$(_e.dtree,30,0),$(_e.ttree,320,0)}();var iD=["backups","servers"],jD=["backups","servers"],kD=["group"],nl=v.inflate,ks=v.deflate,ls=function($){function _e(Vt,Wt,_i,_s){W(this,_e);var _c=_t.call(this,_s,"Session");return m(n(_c),"chatManager",void 0),m(n(_c),"joinedChannels",new Set),m(n(_c),"msgDedupLru",new tc(void 0,{maxlen:200})),m(n(_c),"startTime",Date.now()),m(n(_c),"seq",U.fromNumber(1,!0)),m(n(_c),"userJoinOptions",new is(!1)),m(n(_c),"seqSentStatuses",[!1,!1]),m(n(_c),"dialogueSequenceLru",new tc(void 0,{maxlen:1e4})),m(n(_c),"loggedOut",!1),m(n(_c),"messageSentTimes",[]),m(n(_c),"curLoginSockets",[void 0,void 0]),m(n(_c),"loginSocketSubs",[{channels:new Map,receivers:[]},{channels:new Map,receivers:[]}]),m(n(_c),"lastLoginSockets",[new qe(1),new qe(1)]),m(n(_c),"dialPendingMsgSubjectMap",new Map),m(n(_c),"context",void 0),m(n(_c),"connection",void 0),m(n(_c),"instanceId",void 0),m(n(_c),"registerSocketsFailureListener",function(){_c.connection.once("socketsFailure",function(){_c.log("socketsFailure, creating a new connection"),ad(function(){return _c.connection.removeAllListeners(),_c.connection=new Yr(_c.context,_c.logger,!0),_c.loginHandler(15e3,!0)}).pipe(oe(function(_l){return _l.pipe(cd(Zd.getParameter("RECONNECTING_AP_INTERVAL")))}),ob(_c.connection.apClient.apFinish$)).subscribe(function(){_c.log("new connection connected")})}),_c.connection.listenerCount("tokenExpired")===0&&_c.connection.on("tokenExpired",function(){_c.emit("tokenExpired")})}),_c.context=Vt,_c.connection=Wt,_c.instanceId=_i,_c.chatManager=new hD(_s),_c.log("The instanceId is %s",_c.instanceId.toString()),_c}la(_e,$);var _t=ma(_e);return Ha(_e,[{key:"fetchFileUploadIndexGet",value:function(Vt){var Wt=Vt.hash,_i=Vt.size;if((Vt=this.getLoginSockets()).length===0)throw new K("Client is not logged in");var _s=this.incGetSeq();return Vt.forEach(function(_c){_c.sendPacket("FileUploadIndexGet",{seq:_s,hash:Wt,size:_i})}),{ret:Ca.apply(void 0,G(Vt.map(function(_c){return _c.fromReceived("FileUploadIndexRet").pipe(aa(function(_l){return _s.eq(_l.seq)}))}))),fin:Ca.apply(void 0,G(Vt.map(function(_c){return _c.fromReceived("FileUploadIndexFin").pipe(aa(function(_l){return _s.eq(_l.seq)}))}))),err:Xb.apply(void 0,G(Vt.map(function(_c){return _c.fromReceived("FileUploadIndexErr").pipe(aa(function(_l){return _s.eq(_l.seq)}),ba(function(_l){throw new da(["The media message upload failure, code %d",_l.code],lg)}))}))),timeout:_e.genTimeoutError(Lh)}}},{key:"requestFileUploadIndexSet",value:function(Vt){var Wt=Vt.hash,_i=Vt.unit,_s=Vt.servers;if((Vt=this.getLoginSockets()).length===0)throw new K("Client is not logged in");var _c=this.incGetSeq();return Vt.forEach(function(_l){_l.sendPacket("FileUploadIndexSet",{seq:_c,servers:_s,hash:Wt,unit:_i})}),Ca.apply(void 0,[_e.genTimeoutError(Lh)].concat(G(Vt.map(function(_l){return _l.fromReceived("FileUploadIndexErr").pipe(aa(function(_d){return _c.eq(_d.seq)}),ba(function(_d){throw new da(["FileUploadIndexSet failure, code %d",_d.code],lg)}))})),G(Vt.map(function(_l){return _l.fromReceived("FileUploadIndexFin").pipe(aa(function(_d){return _c.eq(_d.seq)}))}))))}},{key:"requestFileDownloadIndexGet",value:function(Vt){var Wt=Vt.size,_i=Vt.zone,_s=Vt.unit,_c=Vt.hash,_l=this.getLoginSockets();if(_l.length===0)throw new K("Client is not logged in");var _d=this.incGetSeq();return _l.forEach(function(_m){_m.sendPacket("FileDownloadIndexGet",{seq:_d,size:Wt,zone:_i,unit:_s,hash:_c})}),Vt=Ca.apply(void 0,G(_l.map(function(_m){return _m.fromReceived("FileDownloadIndexRet").pipe(aa(function(e_){return _d.eq(e_.seq)}))}))).pipe(ba(function(_m){var e_=_m.backups,t_=_m.servers;return _m=ff(_m,iD),ua({backupList:e_.map(function(i_){return[i_]}),serverList:t_.map(function(i_){return[i_]})},_m)}),cd(500)),_l=jm(_l.map(function(_m){return _m.fromReceived("FileDownloadIndexRet").pipe(aa(function(e_){return _d.eq(e_.seq)}))})),Ca(Vt,_l.pipe(ba(function(_m){return _m.reduce(function(e_,t_){var i_=e_.backupList,c_=e_.serverList;e_=t_.backups;var h_=t_.servers;return t_=ff(t_,jD),ua({backupList:e_.map(function(y_,l_){return[y_].concat(G(i_!==void 0&&Array.isArray(i_[l_])?i_[l_]:[]))}),serverList:h_.map(function(y_,l_){return[y_].concat(G(i_!==void 0&&Array.isArray(c_[l_])?c_[l_]:[]))})},t_)},{})})),_e.genTimeoutError(Lh))}},{key:"loginHandler",value:function(){var Vt=this,Wt=0<arguments.length&&arguments[0]!==void 0?arguments[0]:2e4,_i=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(this.loggedOut&&_i)throw new K("Already logged out, request ignored");_i&&this.registerSocketsFailureListener(),this.connection.initConnection();var _s=this.getSocketLoginObservables(this.connection.lastOpenSockets,this.seq),_c=Date.now();return _s.forEach(function(_l,_d){var _m=Vt.loginSocketSubs[_d].login;_m!==void 0&&_m.unsubscribe(),Vt.loginSocketSubs[_d].login=_l.pipe(ca(function(e_){var t_;Vt.curLoginSockets[_d]=e_;var i_=Date.now();eb("Link",{ackedServerIp:e_.address,destServerIp:e_.ip,ec:0,sc:0,elapse:fb(Vt.startTime),lts:U.fromNumber(i_),responseTime:_c-i_,sid:Xa(Vt.instanceId),userId:Vt.context.uid},(t_=Vt.context.config.enableCloudProxy)!==null&&t_!==void 0&&t_),Vt.emit("userJoined",e_.env),_i&&Vt.connection.apClient.apFinish$.next(void 0)})).subscribe(Vt.lastLoginSockets[_d])}),this.initKeepAliveSender(),this.initKeepAliveReconnector(),this.initLoginReceiver(),Xb.apply(void 0,G(_s).concat([gb(this.connection,"connectionInitFailure").pipe(ca(function(_l){throw sa(_l)||Sa(_l)?_l:new da("Login failure",{code:Zq,originalError:_l})}))])).pipe(Ka(1),hb(Wt),Ga(function(_l){return _l instanceof pb&&Vt.warn("Client login timeout"),_l&&_l.code===Kh&&(Vt.connection.emit("tokenExpired"),Vt.connection.apClient.apFinish$.next(void 0)),Vt.clearSockets(0,_i),Z(_l)}),ca(function(){_i||Vt.registerSocketsFailureListener()}),wg(function(){_i||Vt.connection.apClient.apFinish$.next(void 0)}))}},{key:"logoutHandler",value:function(){var Vt=J(w.mark(function Wt(){var _i,_s,_c,_l=this;return w.wrap(function(_d){for(;;)switch(_d.prev=_d.next){case 0:return this.loggedOut=!0,this.connection.apClient.apFinish$.next(void 0),_i=this.getLoginSockets(),_s=_i.map(function(_m){return _m.sendPacket("UserQuit",{}),_l.connection.waitClosing(_m)}),this.clearSockets(5e3),_c=_i.map(function(_m){return _m.env}),[0,1].filter(function(_m){return!_c.includes(_m)}).forEach(function(_m){_l.connection.closeSocket(_m,0)}),_d.abrupt("return",Xb.apply(void 0,G(_s)).toPromise());case 9:case"end":return _d.stop()}},Wt,this)}));return function(){return Vt.apply(this,arguments)}}()},{key:"requestChannelJoin",value:function(){var Vt=J(w.mark(function Wt(_i,_s){var _c,_l,_d,_m=this;return w.wrap(function(e_){for(;;)switch(e_.prev=e_.next){case 0:if(this.getLoginSockets().length!==0){e_.next=2;break}throw new K("Client is not logged in. Cannot join the channel",Vq);case 2:return _c=gb(this,"channelLeft").pipe(wb(function(t_){return t_===_i}),Ka(1)),_l=this.incGetSeq(),(_d=this.lastLoginSockets.map(function(t_){return t_.pipe(Cc(function(i_,c_){c_!==0&&_m.incSeqIfNeeded(i_.env);var h_=c_===0?_l:_m.seq;return i_.sendPacket("GroupEnter",{account:_s,seq:h_}),i_.fromReceived("GroupReply").pipe(aa(function(y_){return h_.eq(y_.seq)}),ca(function(y_){if((y_=y_.code)!==0)throw new da(["Channel join failure. The response code is %d",y_],Rq)}))}),ob(_c),pe())})).forEach(function(t_,i_){var c_=function(){return _m.loginSocketSubs[i_].channels.delete(_i.channelId)};_m.loginSocketSubs[i_].channels.set(_i.channelId,t_.subscribe({error:c_,complete:c_}))}),e_.next=8,Xb.apply(void 0,G(_d)).pipe(Ka(1),hb(1e4),Ga(function(t_){return t_ instanceof pb&&_m.warn("Channel join timeout"),Z(t_)})).toPromise();case 8:this.joinedChannels.add(_i);case 9:case"end":return e_.stop()}},Wt,this)}));return function(Wt,_i){return Vt.apply(this,arguments)}}()},{key:"requestChannelLeave",value:function(Vt,Wt){this.emit("channelLeft",Vt),this.joinedChannels.delete(Vt),this.getLoginSockets().forEach(function(_i){_i.sendPacket("GroupLeave",{account:Wt})})}},{key:"requestChannelMemberList",value:function(Vt){var Wt=this.getLoginSockets();if(Wt.length===0)throw new K("Client is not logged in. Cannot get the channel members",cA);var _i=this.incGetSeq();return Wt.forEach(function(_s){_s.sendPacket("GroupAllUsersList",{group:Vt,pageNumber:0,pageSize:200,seq:_i})}),Ca.apply(void 0,[_e.genTimeoutError(Pq)].concat(G(Wt.map(function(_s){return _s.fromReceived("GroupAllUsersResult").pipe(aa(function(_c){var _l=_c.seq;return _c.group===Vt&&_i.eq(_l)}))}))))}},{key:"requestPeersOnlineStatus",value:function(Vt){var Wt=this.getLoginSockets();if(Wt.length===0)throw new K("Client is not logged in");var _i=this.incGetSeq();return Wt.forEach(function(_s){_s.sendPacket("UserStatusList",{users:Vt,seq:_i})}),Ca.apply(void 0,[_e.genTimeoutError(oA)].concat(G(Wt.map(function(_s){return _s.fromReceived("UserStatusResult").pipe(aa(function(_c){return _i.eq(_c.seq)}))}))))}},{key:"requestSetLocalUserAttributes",value:function(Vt,Wt){var _i=this,_s=this.getLoginSockets();if(_s.length===0)throw new K("Client is not logged in");var _c=this.incGetSeq();return _s.forEach(function(_l,_d){Wt!==void 0&&_d!==Wt||_l.sendPacket("UserAttributeSet",{account:_i.context.uid,attributeInfos:Object.entries(Vt).map(function(_m){return{key:(_m=ra(_m,2))[0],value:_m[1]}}),seq:_c})}),Ca.apply(void 0,G(_s.map(function(_l){return _l.fromReceived("UserAttributeErr").pipe(aa(function(_d){return _c.eq(_d.seq)}),ba(function(_d){throw new da(["The user attributes set failure, code %d",_d.code],Sb)}))})).concat([_e.genTimeoutError(Tb)],G(_s.map(function(_l){return _l.fromReceived("UserAttributeRsp").pipe(aa(function(_d){return _c.eq(_d.seq)}))}))))}},{key:"requestSetChannelAttributes",value:function(Vt,Wt,_i){var _s=this.getLoginSockets();if(_s.length===0)throw new K("Client is not logged in");var _c=this.incGetSeq();return _s.forEach(function(_l){_l.sendPacket("GroupAttributeSet",{broadcast:_i,group:Vt,attributeInfos:Object.entries(Wt).map(function(_d){return{key:(_d=ra(_d,2))[0],value:_d[1]}}),seq:_c})}),Ca.apply(void 0,G(_s.map(function(_l){return _l.fromReceived("GroupAttributeErr").pipe(aa(function(_d){return _c.eq(_d.seq)}),ba(function(_d){throw new da(["The group attributes set failure, code %d",_d.code],Sb)}))})).concat([_e.genTimeoutError(Tb)],G(_s.map(function(_l){return _l.fromReceived("GroupAttributeRsp").pipe(aa(function(_d){return _c.eq(_d.seq)}))}))))}},{key:"requestAddOrUpdateLocalUserAttributes",value:function(Vt){var Wt=this,_i=this.getLoginSockets();if(_i.length===0)throw new K("Client is not logged in");var _s=this.incGetSeq();return _i.forEach(function(_c){_c.sendPacket("UserAttributeMod",{account:Wt.context.uid,attributeInfos:Object.entries(Vt).map(function(_l){return{key:(_l=ra(_l,2))[0],value:_l[1]}}),seq:_s})}),Ca.apply(void 0,G(_i.map(function(_c){return _c.fromReceived("UserAttributeErr").pipe(aa(function(_l){return _s.eq(_l.seq)}),ba(function(_l){throw new da(["The user attributes add or update failure, code %d",_l.code],Sb)}))})).concat([_e.genTimeoutError(Tb)],G(_i.map(function(_c){return _c.fromReceived("UserAttributeRsp").pipe(aa(function(_l){return _s.eq(_l.seq)}))}))))}},{key:"requestAddOrUpdateChannelAttributes",value:function(Vt,Wt,_i){var _s=this.getLoginSockets();if(_s.length===0)throw new K("Client is not logged in");var _c=this.incGetSeq();return _s.forEach(function(_l){_l.sendPacket("GroupAttributeMod",{broadcast:_i,group:Vt,attributeInfos:Object.entries(Wt).map(function(_d){return{key:(_d=ra(_d,2))[0],value:_d[1]}}),seq:_c})}),Ca.apply(void 0,G(_s.map(function(_l){return _l.fromReceived("GroupAttributeErr").pipe(aa(function(_d){return _c.eq(_d.seq)}),ba(function(_d){throw new da(["The group attributes add or update failure, code %d",_d.code],Sb)}))})).concat([_e.genTimeoutError(Tb)],G(_s.map(function(_l){return _l.fromReceived("GroupAttributeRsp").pipe(aa(function(_d){return _c.eq(_d.seq)}))}))))}},{key:"requestDeleteLocalUserAttributesByKeys",value:function(Vt){var Wt=this,_i=this.getLoginSockets();if(_i.length===0)throw new K("Client is not logged in");var _s=this.incGetSeq();return _i.forEach(function(_c){_c.sendPacket("UserAttributeDel",{account:Wt.context.uid,attributes:Vt,seq:_s})}),Ca.apply(void 0,G(_i.map(function(_c){return _c.fromReceived("UserAttributeErr").pipe(aa(function(_l){return _s.eq(_l.seq)}),ba(function(_l){throw new da(["The user attributes delete failure, code %d",_l.code],Sb)}))})).concat([_e.genTimeoutError(Tb)],G(_i.map(function(_c){return _c.fromReceived("UserAttributeRsp").pipe(aa(function(_l){return _s.eq(_l.seq)}))}))))}},{key:"requestDeleteChannelAttributesByKeys",value:function(Vt,Wt,_i){var _s=this.getLoginSockets();if(_s.length===0)throw new K("Client is not logged in");var _c=this.incGetSeq();return _s.forEach(function(_l){_l.sendPacket("GroupAttributeDel",{group:Vt,broadcast:_i,attributes:Wt,seq:_c})}),Ca.apply(void 0,G(_s.map(function(_l){return _l.fromReceived("GroupAttributeErr").pipe(aa(function(_d){return _c.eq(_d.seq)}),ba(function(_d){throw new da(["The channel attributes delete failure, code %d",_d.code],Sb)}))})).concat([_e.genTimeoutError(Tb)],G(_s.map(function(_l){return _l.fromReceived("GroupAttributeRsp").pipe(aa(function(_d){return _c.eq(_d.seq)}))}))))}},{key:"requestClearLocalUserAttributes",value:function(){var Vt=this,Wt=this.getLoginSockets();if(Wt.length===0)throw new K("Client is not logged in");var _i=this.incGetSeq();return Wt.forEach(function(_s){_s.sendPacket("UserAttributeSet",{account:Vt.context.uid,seq:_i,attributeInfos:[]})}),Ca.apply(void 0,G(Wt.map(function(_s){return _s.fromReceived("UserAttributeErr").pipe(aa(function(_c){return _i.eq(_c.seq)}),ba(function(_c){throw new da(["The user attributes clear failure, code %d",_c.code],Sb)}))})).concat([_e.genTimeoutError(Tb)],G(Wt.map(function(_s){return _s.fromReceived("UserAttributeRsp").pipe(aa(function(_c){return _i.eq(_c.seq)}))}))))}},{key:"requestClearChannelAttributes",value:function(Vt,Wt){var _i=this.getLoginSockets();if(_i.length===0)throw new K("Client is not logged in");var _s=this.incGetSeq();return _i.forEach(function(_c){_c.sendPacket("GroupAttributeSet",{group:Vt,seq:_s,attributeInfos:[],broadcast:Wt})}),Ca.apply(void 0,G(_i.map(function(_c){return _c.fromReceived("GroupAttributeErr").pipe(aa(function(_l){return _s.eq(_l.seq)}),ba(function(_l){throw new da(["The channel attributes clear failure, code %d",_l.code],Sb)}))})).concat([_e.genTimeoutError(Tb)],G(_i.map(function(_c){return _c.fromReceived("GroupAttributeRsp").pipe(aa(function(_l){return _s.eq(_l.seq)}))}))))}},{key:"requestGetUserAttributesByKeys",value:function(Vt,Wt){var _i=this.getLoginSockets();if(_i.length===0)throw new K("Client is not logged in");var _s=this.incGetSeq();return _i.forEach(function(_c){_c.sendPacket("UserAttributeGet",{account:Vt,seq:_s,attributes:Wt})}),Ca.apply(void 0,[_e.genTimeoutError(Tb)].concat(G(_i.map(function(_c){return _c.fromReceived("UserAttributeErr").pipe(aa(function(_l){return _s.eq(_l.seq)}),ba(function(_l){throw(_l=_l.code)===10008?new da("The user requested is not online",Lq):new Wc(["User attribute operation unknown error code: %d",_l],Sb)}))})),G(_i.map(function(_c){return _c.fromReceived("UserAttributeRet").pipe(aa(function(_l){return _s.eq(_l.seq)}))}))))}},{key:"requestGetChannelAttributesByKeys",value:function(Vt,Wt){var _i=this.getLoginSockets();if(_i.length===0)throw new K("Client is not logged in");var _s=this.incGetSeq();return _i.forEach(function(_c){_c.sendPacket("GroupAttributeGet",{group:Vt,seq:_s,attributes:Wt})}),Ca.apply(void 0,[_e.genTimeoutError(Tb)].concat(G(_i.map(function(_c){return _c.fromReceived("GroupAttributeErr").pipe(aa(function(_l){return _s.eq(_l.seq)}),ba(function(_l){throw new da(["The channel attributes get failure, code %d",_l.code],Sb)}))})),G(_i.map(function(_c){return _c.fromReceived("GroupAttributeRet").pipe(aa(function(_l){return _s.eq(_l.seq)}))}))))}},{key:"requestGetUserAttributeKeys",value:function(Vt){var Wt=this.getLoginSockets();if(Wt.length===0)throw new K("Client is not logged in");var _i=this.incGetSeq();return Wt.forEach(function(_s){_s.sendPacket("UserAttributeKeysGet",{account:Vt,seq:_i})}),Ca.apply(void 0,[_e.genTimeoutError(Tb)].concat(G(Wt.map(function(_s){return _s.fromReceived("UserAttributeErr").pipe(aa(function(_c){return _i.eq(_c.seq)}),ba(function(_c){throw(_c=_c.code)===10008?new da("The user requested is not online",Lq):new Wc(["User attribute operation unknown error code: %d",_c],Sb)}))})),G(Wt.map(function(_s){return _s.fromReceived("UserAttributeKeysRet").pipe(aa(function(_c){return _i.eq(_c.seq)}))}))))}},{key:"requestGetChannelAttributesKeys",value:function(Vt){var Wt=this.getLoginSockets();if(Wt.length===0)throw new K("Client is not logged in");var _i=this.incGetSeq();return Wt.forEach(function(_s){_s.sendPacket("GroupAttributeKeysGet",{group:Vt,seq:_i})}),Ca.apply(void 0,[_e.genTimeoutError(Tb)].concat(G(Wt.map(function(_s){return _s.fromReceived("GroupAttributeErr").pipe(aa(function(_c){return _i.eq(_c.seq)}),ba(function(_c){throw new Wc(["Channel attribute operation unknown error code: %d",_c.code],Sb)}))})),G(Wt.map(function(_s){return _s.fromReceived("GroupAttributeKeysRet").pipe(aa(function(_c){return _i.eq(_c.seq)}))}))))}},{key:"requestGetChannelMemberCount",value:function(Vt){var Wt=this.getLoginSockets();if(Wt.length===0)throw new K("Client is not logged in");var _i=this.incGetSeq();return Wt.forEach(function(_s){_s.sendPacket("GroupStatusList",{groups:Vt,seq:_i})}),Ca.apply(void 0,[_e.genTimeoutError(Pq)].concat(G(Wt.map(function(_s){return _s.fromReceived("GroupStatusResult").pipe(aa(function(_c){return _i.eq(_c.seq)}))}))))}},{key:"requestSubscribePeersOnlineStatus",value:function(Vt){var Wt=this.getLoginSockets();if(Wt.length===0)throw new K("Client is not logged in");var _i=this.incGetSeq();return Wt.forEach(function(_s){_s.sendPacket("SubscribeUserStatus",{seq:_i,users:Vt})}),Ca.apply(void 0,[_e.genTimeoutError(vA)].concat(G(Wt.map(function(_s){return _s.fromReceived("SubscribeResponse").pipe(aa(function(_c){return _i.eq(_c.seq)}))}))))}},{key:"requestUnsubscribePeersOnlineStatus",value:function(Vt){var Wt=this.getLoginSockets();if(Wt.length===0)throw new K("Client is not logged in");var _i=this.incGetSeq();Wt.forEach(function(_s){_s.sendPacket("UnsubscribeUserStatus",{seq:_i,users:Vt})})}},{key:"sendInvitationMessage",value:function(){var Vt=J(w.mark(function Wt(_i){var _s,_c,_l,_d,_m,e_,t_,i_,c_,h_,y_,l_,d_=this;return w.wrap(function(f_){for(;;)switch(f_.prev=f_.next){case 0:if(_s=_i.peerId,_c=_i.callId,_l=_i.extra,_d=_i.isAcceptAck,_m=_i.channelId,e_=_i.type,t_={callId:_c},_d===void 0){f_.next=6;break}if(e_==="CallAccept"){f_.next=5;break}throw Error("invalid invitation type");case 5:t_.type=_d?"ack":"request";case 6:return t_.channel=_m,(e_==="CallInvite"||e_==="CallCancel"||e_==="CallReject"||e_==="CallAccept"&&_d===!1)&&_l!==void 0&&(t_.extra=_l),i_=Bg(),this.log("The sent invitation body is %o",t_),c_=function(S_){return{MiscMap:{},sequence:U.fromNumber(1),dialogue:i_,instance:d_.instanceId,dst:_s,ms:U.fromNumber(Date.now(),!0),options:new ae({IterationNumber:S_,MessageType:e_}).toLong(),payload:new TextEncoder().encode(JSON.stringify(t_)),src:d_.context.uid}},f_.next=14,Kb(this.sendMessageToRetry(c_,!0)).pipe(hb(1e4),Ga(function(S_){return S_ instanceof pb&&d_.warn("Send invitation timeout"),Z(S_)})).toPromise();case 14:return h_=f_.sent,y_=h_.code,l_=h_.retryTimes,f_.abrupt("return",{hasPeerReceived:y_===0,hasReSent:l_!==0});case 18:case"end":return f_.stop()}},Wt,this)}));return function(Wt){return Vt.apply(this,arguments)}}()},{key:"sendMediaMessage",value:function(){var Vt=J(w.mark(function Wt(_i,_s,_c,_l,_d,_m){var e_,t_,i_,c_,h_,y_,l_,d_,f_,S_,T_,R_,C_,j_,W_,A_,$_,q_,G_,I_,x_,Y_,z_,B_,Q_,K_,rE,aE,gE,kE=this;return w.wrap(function(xE){for(;;)switch(xE.prev=xE.next){case 0:if(t_=_s.width,i_=t_===void 0?0:t_,c_=_s.height,h_=c_===void 0?0:c_,y_=_s.fileName,l_=y_===void 0?"":y_,d_=_s.description,f_=d_===void 0?"":d_,S_=_s.thumbnail,T_=S_===void 0?new Blob:S_,R_=_s.thumbnailHeight,C_=R_===void 0?0:R_,j_=_s.thumbnailWidth,W_=j_===void 0?0:j_,A_=_s.size,$_=A_===void 0?0:A_,q_=_s.mediaId,G_=_d.enableOfflineMessaging,I_=_d.enableHistoricalMessaging,za(_c)){xE.next=4;break}throw new I("The send message arguments are not valid",_l?$k:hg);case 4:if(!(32768<new Blob([l_,T_,f_]).size)){xE.next=6;break}throw new I("The size of message overflowed ",_l?ve:Hh);case 6:return x_=this.chatManager.getChatInfo(_c),Y_=x_.dialogue,z_=x_.sequence,B_=this.instanceId,this.log('A%s media message is sending to %s: "'.concat(B_,"-").concat(Y_,"#").concat(z_,'"'),_l?" peer":" channel",oa(_c)),m(e_={},"media_description",f_),m(e_,"media_width",i_),m(e_,"media_height",h_),m(e_,"media_thumbnailwidth",W_),m(e_,"media_thumbnailheight",C_),m(e_,"media_size",$_),m(e_,"media_id",q_),m(e_,"media_filename",l_),Q_=uc(e_,function(YE){return new TextEncoder().encode(YE.toString())}),xE.t0=Uint8Array,xE.next=14,Ji(T_);case 14:return xE.t1=xE.sent,Q_.media_thumbnail=new xE.t0(xE.t1),K_=_l&&_i==="IMAGE"?"PeerImageMessage":_l&&_i==="FILE"?"PeerFileMessage":_l||_i!=="IMAGE"?"ChannelFileMessage":"ChannelImageMessage",rE=function(YE){return{MiscMap:Q_,sequence:z_,dialogue:Y_,instance:B_,dst:_c,ms:U.fromNumber(Date.now(),!0),options:new ae({IterationNumber:YE,CompressionMethod:"Uncompressed",MessageType:K_,ToCache:G_,ToArchive:I_}).toLong(),payload:new Uint8Array,src:kE.context.uid}},xE.next=20,Kb(this.sendMessageToRetry(rE,!0)).pipe(hb(_m===void 0?1e4:_m),Ga(function(YE){return YE instanceof pb&&kE.warn("Send message timeout"),Z(YE)})).toPromise();case 20:if(aE=xE.sent,(gE=aE.code)!==2){xE.next=24;break}throw new da("The peer does not support this type of message",nA);case 24:return xE.abrupt("return",{hasPeerReceived:gE===0});case 25:case"end":return xE.stop()}},Wt,this)}));return function(Wt,_i,_s,_c,_l,_d){return Vt.apply(this,arguments)}}()},{key:"sendRawMessage",value:function(){var Vt=J(w.mark(function Wt(_i,_s,_c,_l,_d,_m){var e_,t_,i_,c_,h_,y_,l_,d_,f_,S_,T_=this;return w.wrap(function(R_){for(;;)switch(R_.prev=R_.next){case 0:if(e_=_d.enableOfflineMessaging,t_=_d.enableHistoricalMessaging,za(_c)&&_i instanceof Uint8Array&&typeof _s=="string"){R_.next=3;break}throw new I("The send message arguments are not valid",_l?$k:hg);case 3:if(!(32768<_i.byteLength+new Blob([_s]).size)){R_.next=5;break}throw new ib("The message size is over the 32KB limit",_l?ve:Hh);case 5:return i_=!Zd.getParameter("DISABLE_MESSAGE_COMPRESSION")&&128<=_i.byteLength,c_=this.chatManager.getChatInfo(_c),h_=c_.dialogue,y_=c_.sequence,l_=this.instanceId,this.log('A%s %s raw message is sending to %s: "'.concat(l_,"-").concat(h_,"#").concat(y_,'"'),i_?" compressed":"",_l?"peer":"channel",oa(_c)),d_=function(C_){return{MiscMap:{description:new TextEncoder().encode(_s)},sequence:y_,dialogue:h_,instance:l_,dst:_c,ms:U.fromNumber(Date.now(),!0),options:new ae({IterationNumber:C_,CompressionMethod:i_?"Zlib":"Uncompressed",MessageType:_l?"PeerRawMessage":"ChannelRawMessage",ToCache:e_,ToArchive:t_}).toLong(),payload:i_?ks(_i):_i,src:T_.context.uid}},R_.next=12,Kb(this.sendMessageToRetry(d_,!0)).pipe(hb(_m===void 0?1e4:_m),Ga(function(C_){return C_ instanceof pb&&T_.warn("Send message timeout"),Z(C_)})).toPromise();case 12:return f_=R_.sent,S_=f_.code,R_.abrupt("return",{hasPeerReceived:S_===0});case 15:case"end":return R_.stop()}},Wt,this)}));return function(Wt,_i,_s,_c,_l,_d){return Vt.apply(this,arguments)}}()},{key:"sendTextMessage",value:function(){var Vt=J(w.mark(function Wt(_i,_s,_c,_l,_d){var _m,e_,t_,i_,c_,h_,y_,l_,d_,f_,S_,T_=this;return w.wrap(function(R_){for(;;)switch(R_.prev=R_.next){case 0:if(_m=_l.enableOfflineMessaging,e_=_l.enableHistoricalMessaging,za(_s)){R_.next=3;break}throw new I("The send message arguments are not valid",_c?$k:hg);case 3:if(!(32768<new Blob([_i]).size)){R_.next=5;break}throw new ib("The message size is over the 32KB limit",_c?ve:Hh);case 5:return t_=!Zd.getParameter("DISABLE_MESSAGE_COMPRESSION")&&128<=new Blob([_i]).size,i_=this.chatManager.getChatInfo(_s),c_=i_.dialogue,h_=i_.sequence,y_=this.instanceId,this.log('A%s %s message is sending to %s: "'.concat(y_,"-").concat(c_,"#").concat(h_,'"'),t_?" compressed":"",_c?"peer":"channel",oa(_s)),l_=new TextEncoder().encode(_i),d_=function(C_){return{MiscMap:{},sequence:h_,dialogue:c_,instance:y_,dst:_s,ms:U.fromNumber(Date.now(),!0),options:new ae({IterationNumber:C_,CompressionMethod:t_?"Zlib":"Uncompressed",MessageType:_c?"PeerTextMessage":"ChannelTextMessage",ToCache:_m,ToArchive:e_}).toLong(),payload:t_?ks(l_):l_,src:T_.context.uid}},R_.next=13,Kb(this.sendMessageToRetry(d_,!0)).pipe(hb(_d===void 0?1e4:_d),Ga(function(C_){return C_ instanceof pb&&T_.warn("Send message timeout"),Z(C_)})).toPromise();case 13:return f_=R_.sent,S_=f_.code,R_.abrupt("return",{hasPeerReceived:S_===0});case 16:case"end":return R_.stop()}},Wt,this)}));return function(Wt,_i,_s,_c,_l){return Vt.apply(this,arguments)}}()},{key:"cleanLoginSubs",value:function(Vt,Wt){Object.entries(this.loginSocketSubs[Vt]).forEach(function(_i){var _s=(_i=ra(_i,2))[1];_i[0]==="channels"&&Wt||(Array.isArray(_s)||_s instanceof Map?_s.forEach(function(_c){return _c.unsubscribe()}):_s&&_s.unsubscribe())}),this.loginSocketSubs[Vt]={channels:Wt?this.loginSocketSubs[Vt].channels:new Map,receivers:[]}}},{key:"sendMessageToRetry",value:function(){var Vt=J(w.mark(function Wt(_i,_s){var _c,_l,_d,_m,e_,t_,i_,c_,h_,y_=this,l_=arguments;return w.wrap(function(d_){for(;;)switch(d_.prev=d_.next){case 0:if(_c=2<l_.length&&l_[2]!==void 0?l_[2]:0,this.log("Attempt to send the message ".concat(_s?" with retrying, %o":"without retrying"),{retryTimes:_c}),(_l=this.getLoginSockets()).length!==0){d_.next=5;break}throw Error("no logged-in sockets");case 5:return _d=_i(_c),_l.forEach(function(f_){f_.sendPacket("Message",_d)}),_m=_d.dialogue,e_=_d.sequence,t_=_d.instance,i_=_l.map(function(f_){return f_.fromReceived("Ack").pipe(wb(function(S_){return _m.eq(S_.dialogue)&&e_.eq(S_.sequence)&&t_.eq(S_.instance)}))}),d_.prev=9,d_.next=12,Xb.apply(void 0,G(i_)).pipe(hb(6e3),Ga(function(f_){return Sa(f_)&&y_.warn("Message send timeout, retry times %d",_c),Z(f_)}),Ka(1)).toPromise();case 12:return c_=d_.sent,h_=c_.code,this.log("The message has been acked, %o",{code:h_}),d_.abrupt("return",{code:h_,retryTimes:_c});case 18:if(d_.prev=18,d_.t0=d_.catch(9),!(d_.t0 instanceof pb&&_s)){d_.next=22;break}return d_.abrupt("return",this.sendMessageToRetry(_i,!1,_c+1));case 22:throw d_.t0;case 23:case"end":return d_.stop()}},Wt,this,[[9,18]])}));return function(Wt,_i){return Vt.apply(this,arguments)}}()},{key:"initKeepAliveSender",value:function(){var Vt=this;this.lastLoginSockets.map(function(Wt){return Wt.pipe(Cc(function(_i){return Bc(0,2750).pipe(ca(function(){Vt.incSeqIfNeeded(_i.env),_i.sendPacket("Ping",{ms:U.fromNumber(Date.now(),!0),seq:Vt.seq})}))}))}).forEach(function(Wt,_i){var _s=Vt.loginSocketSubs[_i].keepAlive;_s!==void 0&&_s.unsubscribe(),Vt.loginSocketSubs[_i].keepAlive=Wt.subscribe({error:function(){}})})}},{key:"initKeepAliveReconnector",value:function(){var Vt=this;this.lastLoginSockets.map(function(Wt){return Wt.pipe(Cc(function(_i){var _s,_c=!1,_l=_i.userJoin$.pipe(ca(function(){_c=!0})),_d=_i.input$.pipe(ca(function(_m){Li[_m.uri].slice(0,-3)!=="Ping"&&(_c=!1)}));return Xb(Bc(15e3,1e4).pipe(Pt(_i.receivedPacket),ca(function(_m){_m=ra(_m,2),_m=ra(_m[1],2)[1],_s!==_m||_c||_i.forceReconnect(),_s=_m})),_l,_d)}))}).forEach(function(Wt,_i){var _s=Vt.loginSocketSubs[_i].keepAliveReconnector;_s!==void 0&&_s.unsubscribe(),Vt.loginSocketSubs[_i].keepAliveReconnector=Wt.subscribe({error:function(){}})})}},{key:"initLoginReceiver",value:function(){var Vt=this;this.lastLoginSockets.map(function(Wt){return Wt.pipe(Cc(function(_i){return Xb(gb(_i,"reconnect").pipe(ca(Vt.onSocketReconnect(_i))),_i.fromReceived("Message").pipe(ca(Vt.onMessage(_i))),_i.fromReceived("GroupEnterNotice").pipe(ca(Vt.onGroupEnterNotice())),_i.fromReceived("GroupLeaveNotice").pipe(ca(Vt.onGroupLeaveNotice())),_i.fromReceived("GroupCountNotice").pipe(ca(Vt.onGroupCountNotice())),_i.fromReceived("GroupAttributeAlt").pipe(ca(Vt.onGroupAttributeAlt())),_i.fromReceived("UserJoinNotice").pipe(ca(Vt.onUserNotice(S.PeerOnlineState.ONLINE))),_i.fromReceived("UserQuitNotice").pipe(ca(Vt.onUserNotice(S.PeerOnlineState.OFFLINE))),_i.fromReceived("UserWaitNotice").pipe(ca(Vt.onUserNotice(S.PeerOnlineState.UNREACHABLE)))).pipe(qf(void 0))}))}).forEach(function(Wt,_i){Vt.loginSocketSubs[_i].receivers.push(Wt.subscribe({error:function(){}}))})}},{key:"requestSocketLogin",value:function(Vt,Wt,_i){var _s=this;return im(ad(function(){_s.userJoinOptions=new is(Wt),Vt.sendPacket("UserJoin",{account:_s.context.uid,instance:_s.instanceId,opt:_s.userJoinOptions.toLong(),seq:_i,ticket:Vt.ticket})}),Vt.fromReceived("UserResp").pipe(aa(function(_c){return _i.eq(_c.seq)}),ca(function(_c){if((_c=_c.code)!==0)throw _s.clearSockets(),_s.logError("Connected to gateway success but the Rtm server rejected login"),new da(["Login failure. The response code from the RTM service is %d",_c],jg);_s.log("ENV_%d logged in",Vt.env)}),qf(Vt),hb(15e3))).pipe(wb(function(_c){return _c!==void 0}),Ga(function(_c){return _c instanceof pb&&_s.warn("Login response timeout, rejoin: %s",Wt),Z(_c)}))}},{key:"getSocketLoginObservables",value:function(Vt,Wt){var _i=this;return Vt.map(function(_s){return _s.pipe(ca(function(_c){_c.listenerCount("socketUserDrop")===0&&_c.on("socketUserDrop",function(_l){return _i.onUserDrop(_l,_c)})}),Cc(function(_c,_l){return _i.incSeqIfNeeded(_c.env),_i.requestSocketLogin(_c,_l!==0,_l===0?Wt:_i.seq)}),pe())})}},{key:"incSeqIfNeeded",value:function(Vt){if(![0,1].includes(Vt))throw new Fa({INVALID_ENV:"The env argument is not 0 or 1"});this.seqSentStatuses[Vt]&&(this.seq=this.seq.add(1),this.seqSentStatuses=[!1,!1]),this.seqSentStatuses[Vt]=!0}},{key:"incGetSeq",value:function(){return this.seq=this.seq.add(1),this.seqSentStatuses=[!0,!0],this.seq}},{key:"getLoginSockets",value:function(){for(var Vt=this.curLoginSockets,Wt=-1,_i=Vt==null?0:Vt.length,_s=0,_c=[];++Wt<_i;){var _l=Vt[Wt];_l&&(_c[_s++]=_l)}return _c}},{key:"emitMessage",value:function(Vt,Wt){var _i=Vt.options,_s=Vt.payload,_c=Vt.src,_l=Vt.dst,_d=Vt.instance,_m=Vt.dialogue,e_=Vt.sequence,t_=Vt.ms,i_=Vt.MiscMap;this.dialogueSequenceLru.set(_m.toString(),e_),_d="".concat(_d,"-").concat(_m,"#").concat(e_),this.msgDedupLru.has(_d)?this.warn("Env_%d: Messages out-of-order or not start with 1: %s",Wt,_d):(this.msgDedupLru.set(_d,void 0),Wt=new ae(_i),this.lastLoginSockets.forEach(function(){var c_=J(w.mark(function h_(y_){var l_;return w.wrap(function(d_){for(;;)switch(d_.prev=d_.next){case 0:return d_.next=2,y_.pipe(Ka(1)).toPromise();case 2:l_=d_.sent,_e.sendMessageAck(Vt,l_);case 4:case"end":return d_.stop()}},h_)}));return function(h_){return c_.apply(this,arguments)}}()),_i=Wt.isZlibCompressed(),Wt.isInvitation()?(_l=pa(_i?nl(Xm(_s,Uint8Array.of(0,0,0,0))):_s),_l=JSON.parse(_l),this.log("The received invitation body is %o",_l),this.emit("invitationMessage",{body:_l,type:Wt.getInvitationType(),peerId:_c,serverReceivedTs:t_.toNumber()})):Wt.isTextMessage()?(i_=Wt.isPeerTextMessage(),_s=pa(_i?nl(Xm(_s,Uint8Array.of(0,0,0,0))):_s),this.info("Received a %s %s text message from %s to %s, %s",_i?" compressed":"",i_?"peer":"channel",oa(_c),oa(_l),_d),i_?(_c={text:_s,peerId:_c,properties:{serverReceivedTs:t_.toNumber(),isOfflineMessage:Wt.isFromCache()}},this.emit("peerTextMessage",_c)):this.emit("channelTextMessage",{channelId:_l,memberId:_c,text:_s,properties:{serverReceivedTs:t_.toNumber(),isOfflineMessage:!1}})):Wt.isRawMessage()?(_m=Wt.isRawPeerMessage(),i_=(i_=i_.description)===void 0?"":pa(i_),_s=_i?nl(_s):_s,this.info("Received a %s %s raw message from %s to %s, %s",_i?" compressed":"",_m?"peer":"channel",oa(_c),oa(_l),_d),_m?(_c={desc:i_,raw:_s,peerId:_c,properties:{serverReceivedTs:t_.toNumber(),isOfflineMessage:Wt.isFromCache()}},this.emit("peerRawMessage",_c)):this.emit("channelRawMessage",{desc:i_,raw:_s,channelId:_l,memberId:_c,properties:{serverReceivedTs:t_.toNumber(),isOfflineMessage:!1}})):(Wt.isImageMessage()||Wt.isFileMessage())&&(_s=Wt.isPeerMessage(),this.info("Received a %s media message from %s to %s, %s",_s?"peer":"channel",oa(_c),oa(_l),_d),_s?this.emit("peerMediaMessage",{messageType:Wt.isImageMessage()?"IMAGE":"FILE",details:i_,peerId:_c,properties:{serverReceivedTs:t_.toNumber(),isOfflineMessage:Wt.isFromCache()}}):this.emit("channelMediaMessage",{messageType:Wt.isImageMessage()?"IMAGE":"FILE",details:i_,memberId:_c,channelId:_l,properties:{serverReceivedTs:t_.toNumber(),isOfflineMessage:Wt.isFromCache()}})))}},{key:"onSocketReconnect",value:function(Vt){var Wt=this;return function(){var _i=[0,1].filter(function(_s){return _s!==Vt.env})[0];(_i=Wt.connection.curOpenSockets[_i])&&!_i.loggedIn&&Wt.emit("connectionLost")}}},{key:"onUserDrop",value:function(Vt,Wt){var _i;Vt=Vt.code,eb("KickedOff",{code:0,elapse:fb(this.startTime),linkId:parseInt(Wt.name.split("-")[1],10),lts:U.fromNumber(Date.now()),server:Wt.address,serverCode:Vt,sid:Xa(this.instanceId),userId:this.context.uid},(_i=this.context.config.enableCloudProxy)!==null&&_i!==void 0&&_i),Vt===10006||Vt===10001?this.warn("Login too often and kicked off, reconnect and login"):Vt===10009?(this.warn("The instance ID conflicts, reconnecting"),this.instanceId=Bg(),this.context.sid=Xa(this.instanceId),this.emit("instanceChanged",this.instanceId)):[11,14,15,16].includes(Vt)&&(this.emit("userDrop",Vt),this.clearSockets())}},{key:"clearSockets",value:function(){var Vt=this,Wt=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0,_i=1<arguments.length&&arguments[1]!==void 0&&arguments[1];[0,1].forEach(function(_s){Vt.cleanLoginSubs(_s,_i),Vt.connection.closeSocket(_s,Wt)})}},{key:"onMessage",value:function(Vt){var Wt=this;return function(_i){var _s=_i.dialogue,_c=_i.instance,_l=_i.sequence,_d=_i.options;if(_i.src===Wt.context.uid)Wt.log("The message is from the local account, ignored");else{var _m=_s.toString(),e_=Wt.dialPendingMsgSubjectMap.get(_m);if(_s="".concat(_c,"-").concat(_s,"#").concat(_l),e_)e_.next(_i),Wt.log("Env_%d: The dialogue has pending messages, next: %s",Vt.env,_s);else{var t_=Wt.dialogueSequenceLru.get(_m);if(e_=!t_&&_l.eq(1),_c=t_!==void 0&&_l.sub(t_).eq(1),e_||_c)Wt.emitMessage(_i,Vt.env);else{if(t_){if(_l.lte(t_))return;Wt.log("Env_%d: The message pended, the sequence is not continuous with the last: %s",Vt.env,_s)}else Wt.log("Env_%d: The message pended, the first sequence is not equal to 1: %s",Vt.env,_s);_l=new Pa,Wt.dialPendingMsgSubjectMap.set(_m,_l);var i_=_l.pipe(Qs(Pk),xg(function(c_,h_){return[].concat(G(c_),[h_])},[]),ba(function(c_){return G(c_).sort(function(h_,y_){return h_=h_.sequence,y_=y_.sequence,h_.eq(y_)?0:h_.gt(y_)?1:-1})}),sm(1));_d=!(_d=new ae(_d)).isFromCache()&&!_d.isBufferedMessage(),i_.pipe(ob(Bc(_d?750:1500)),aa(function(c_){if(2>c_.length)return!1;for(var h_=t_===void 0?U.fromNumber(1,!0):t_.add(1),y_=0;y_<c_.length;h_=h_.add(1),y_++)if(!c_[y_].sequence.eq(h_))return!1;return!0}),wg(function(){Wt.dialPendingMsgSubjectMap.delete(_m)})).subscribe(function(c_){c_.forEach(function(h_){Wt.emitMessage(h_,Vt.env),Wt.log("Env_%d: The message queue has fully ordered, emitting: %s",Vt.env,"".concat(h_.instance,"-").concat(h_.dialogue,"#").concat(h_.sequence))})},function(c_){c_ instanceof vg&&i_.pipe(Ka(1)).subscribe(function(h_){return h_.forEach(function(y_){Wt.log("Env_%d: The message pending queue expired, emitting: %s",Vt.env,"".concat(y_.instance,"-").concat(y_.dialogue,"#").concat(y_.sequence)),Wt.emitMessage(y_,Vt.env)})})}),_l.next(_i)}}}}}},{key:"onGroupEnterNotice",value:function(){var Vt=this;return function(Wt){Vt.emit("memberNotice",{channelId:Wt.group,seq:Wt.seq,instance:Wt.instance,memberId:Wt.user,type:"MemberJoined",size:Wt.size})}}},{key:"onGroupLeaveNotice",value:function(){var Vt=this;return function(Wt){Vt.emit("memberNotice",{channelId:Wt.group,seq:Wt.seq,instance:Wt.instance,memberId:Wt.user,type:"MemberLeft",size:Wt.size})}}},{key:"onGroupCountNotice",value:function(){var Vt=this;return function(Wt){Vt.emit("memberNotice",{channelId:Wt.group,seq:Wt.seq,instance:Wt.instance,type:"MemberCountUpdated",size:Wt.size})}}},{key:"onGroupAttributeAlt",value:function(){var Vt=this;return function(Wt){var _i=Wt.group;Wt=ff(Wt,kD),Vt.emit("channelAttributesUpdated",ua({channelId:_i},Wt))}}},{key:"onUserNotice",value:function(Vt){var Wt=this;return function(_i){Wt.emit("peerOnlineStatusChanged",{peerId:_i.user,instance:_i.instance,seq:_i.seq,state:Vt})}}}],[{key:"sendMessageAck",value:function(Vt,Wt){var _i=new ae(Vt.options);(_i.isInvitation()||_i.isPeerMessage())&&Wt.sendPacket("Ack",{code:0,dialogue:Vt.dialogue,instance:Vt.instance,sequence:Vt.sequence})}}]),_e}(tb());m(ls,"genTimeoutError",function($,_e){return bb(void 0).pipe(cd(_e===void 0?1e4:_e),ba(function(){throw new db(["Request timed out after %ds",_e===void 0?1e4:_e],$)}))});var ms,ol,pl=0,ql=0;Ud.v1=function($,_e,_t){_t=_e&&_t||0;var Vt=_e||[],Wt=($=$||{}).node||ms,_i=$.clockseq!==void 0?$.clockseq:ol;if(Wt==null||_i==null){var _s=Jq();Wt==null&&(Wt=ms=[1|_s[0],_s[1],_s[2],_s[3],_s[4],_s[5]]),_i==null&&(_i=ol=16383&(_s[6]<<8|_s[7]))}_s=$.msecs!==void 0?$.msecs:new Date().getTime();var _c=$.nsecs!==void 0?$.nsecs:ql+1,_l=_s-pl+(_c-ql)/1e4;if(0>_l&&$.clockseq===void 0&&(_i=_i+1&16383),(0>_l||_s>pl)&&$.nsecs===void 0&&(_c=0),1e4<=_c)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");for(pl=_s,ql=_c,ol=_i,$=(1e4*(268435455&(_s+=122192928e5))+_c)%4294967296,Vt[_t++]=$>>>24&255,Vt[_t++]=$>>>16&255,Vt[_t++]=$>>>8&255,Vt[_t++]=255&$,$=_s/4294967296*1e4&268435455,Vt[_t++]=$>>>8&255,Vt[_t++]=255&$,Vt[_t++]=$>>>24&15|16,Vt[_t++]=$>>>16&255,Vt[_t++]=_i>>>8|128,Vt[_t++]=255&_i,_i=0;6>_i;++_i)Vt[_t+_i]=Wt[_i];return _e||Kq(Vt)},Ud.v4=Ud;var rl=Ph(),vd,bf=S.LocalInvitationFailureReason,Ba=S.LocalInvitationState,lD=(vd=function($){function _e(Vt,Wt,_i){W(this,_e);var _s=_t.call(this,_i,"RtmLocalInvitation",!0);return m(n(_s),"state",Ba.IDLE),m(n(_s),"localInvitationEnd$",Ca(gb(n(_s),"LocalInvitationAccepted"),gb(n(_s),"LocalInvitationRefused"),gb(n(_s),"LocalInvitationFailure"),gb(n(_s),"LocalInvitationCanceled")).pipe(Ka(1))),m(n(_s),"callId",Ud.v4()),m(n(_s),"_content",""),m(n(_s),"_channelId",""),m(n(_s),"_response",""),m(n(_s),"calleeId",void 0),m(n(_s),"logger",void 0),m(n(_s),"getSession",void 0),_s.calleeId=Vt,_s.getSession=Wt,_s.logger=_i,_s}la(_e,$);var _t=ma(_e);return Ha(_e,[{key:"channelId",get:function(){return this._channelId},set:function(Vt){this.state!==Ba.IDLE?this.info("set channelId only allow before invitation sent to remote"):(this.log("set channelId for %s",this.callId),this._channelId=Vt)}},{key:"content",get:function(){return this._content},set:function(Vt){this.log("set content for %s",this.callId),this._content=Vt}},{key:"response",get:function(){return this._response},set:function(Vt){throw new I('Cannot set the "response" of the LocalInvitation instance.',xc)}},{key:"send",value:function(){var Vt,Wt=this;if(this.state===Ba.SENT_TO_REMOTE||this.state===Ba.RECEIVED_BY_REMOTE)throw new K("The local invitation send failure. The call invitation has already been sent.",gA);if(this.isLocalInvitationEnd())throw new K("The local invitation send failure. The call invitation has ended.",Ih);if(0<this._channelId.length&&!za(this._channelId))throw new I("Illegal invitation channel ID",xc);if(!za(this.calleeId))throw new I("Illegal invitation callee user ID",xc);if(8192<Ig(this._content))throw new I('The length of the "content" overflows. The number of bytes representing content must not exceed 8  1024 if encoded in UTF-8.',xc);this.state=Ba.SENT_TO_REMOTE,ad(J(w.mark(function _i(){var _s,_c,_l;return w.wrap(function(_d){for(;;)switch(_d.prev=_d.next){case 0:return _d.next=2,Wt.getSession().sendInvitationMessage({peerId:Wt.calleeId,callId:Wt.callId,extra:Wt._content,type:"CallInvite",channelId:Wt._channelId});case 2:if(_s=_d.sent,_c=_s.hasPeerReceived,_l=_s.hasReSent,!Wt.isLocalInvitationEnd()){_d.next=7;break}throw new db("send invitation timeout");case 7:if(Wt.log("The local invitation has sent to the callee"),_c||_l){_d.next=11;break}throw Vt=new rl({PEER_NOT_ONLINE:"The peer of the invitation is not online"});case 11:if(_c){_d.next=14;break}throw Vt=new rl({RESENT_AND_OFFLINE:"Resent and the peer of the invitation is not online"});case 14:case"end":return _d.stop()}},_i)}))).pipe(oe(function(_i){return _i.pipe(ca(function(_s){if(!(_s instanceof rl))throw _s}),cd(2e3))}),hb(3e4),Ga(function(_i){return Sa(_i)&&Wt.warn("local invitation ack timed out"),Z(_i)}),ob(this.localInvitationEnd$)).subscribe({next:function(){Wt.state===Ba.RECEIVED_BY_REMOTE?Wt.log('The local invitation state is already "RECEIVED_BY_REMOTE", skipped emitting "LocalInvitationReceivedByPeer"'):Wt.state!==Ba.SENT_TO_REMOTE?Wt.log("The invitation has ended, skipped emitting the %s event","LocalInvitationReceivedByPeer"):(Wt.info("The peer received the local invitation %s.",Wt.callId),Wt.state=Ba.RECEIVED_BY_REMOTE,Wt.emit("LocalInvitationReceivedByPeer"),Wt.localInvitationEnd$.pipe(hb(6e4),Ga(function(_i){return Sa(_i)&&Wt.warn("local invitation expired"),Z(_i)})).subscribe({error:function(){Wt.state=Ba.FAILURE,Wt.emit("LocalInvitationFailure",bf.INVITATION_EXPIRE)}}))},error:function(_i){Wt.isLocalInvitationEnd()?Wt.log("The invitation has ended, skipped emitting the %s event","LocalInvitationFailure"):(Wt.state=Ba.FAILURE,Sa(_i)&&Vt?Vt.code==="PEER_NOT_ONLINE"?Wt.emit("LocalInvitationFailure",bf.PEER_OFFLINE):Vt.code==="RESENT_AND_OFFLINE"&&Wt.emit("LocalInvitationFailure",bf.PEER_NO_RESPONSE):Sa(_i)?Wt.emit("LocalInvitationFailure",bf.PEER_NO_RESPONSE):_i.name==="RtmInvalidStatusError"?Wt.emit("LocalInvitationFailure",bf.NOT_LOGGEDIN):Wt.emit("LocalInvitationFailure",bf.UNKNOWN))}})}},{key:"cancel",value:function(){if(this.isLocalInvitationEnd())throw new K("The local invitation cancel failure",Ih);if(this.state===Ba.IDLE)throw new K("The local invitation has not been sent",fA);if(8192<Ig(this._content))throw new I('The length of the "content" overflows. The number of bytes representing content must not exceed 8  1024 if encoded in UTF-8.',xc);this.getSession().sendInvitationMessage({callId:this.callId,peerId:this.calleeId,type:"CallCancel",channelId:this._channelId,extra:this._content}),this.state=Ba.CANCELED,this.emit("LocalInvitationCanceled")}},{key:"onAcceptReceived",value:function(Vt){if(this.isLocalInvitationEnd()&&this.state!==Ba.ACCEPTED_BY_REMOTE)this.log("The invitation has ended, skipped emitting the %s event","LocalInvitationAccepted");else{if(this.state===Ba.IDLE)throw new K("the local have not sent the invitation, how can remote accept it?");this.getSession().sendInvitationMessage({callId:this.callId,isAcceptAck:!0,type:"CallAccept",peerId:this.calleeId,channelId:this.channelId}),this.state===Ba.ACCEPTED_BY_REMOTE?this.log("already in ACCEPTED_BY_REMOTE state, ignore emit ACCEPTED_BY_REMOTE"):(this.state===Ba.SENT_TO_REMOTE&&(this.log("receive LocalInvitationAccepted before remote response to the invitation"),this.state=Ba.RECEIVED_BY_REMOTE,this.emit("LocalInvitationReceivedByPeer")),this.state=Ba.ACCEPTED_BY_REMOTE,this._response=Vt,this.emit("LocalInvitationAccepted",Vt))}}},{key:"onRefuseReceived",value:function(Vt){if(this.isLocalInvitationEnd())this.log("The invitation has ended, skipped emitting the %s event","LocalInvitationRefused");else{if(this.state===Ba.IDLE)throw new K("the local have not sent the invitation, how can remote refuse it?");this.state===Ba.SENT_TO_REMOTE&&(this.log("receive LocalInvitationRefused before remote response to the invitation"),this.state=Ba.RECEIVED_BY_REMOTE,this.emit("LocalInvitationReceivedByPeer")),this._response=Vt,this.state=Ba.REFUSED_BY_REMOTE,this.emit("LocalInvitationRefused",Vt)}}},{key:"isLocalInvitationEnd",value:function(){return[Ba.CANCELED,Ba.FAILURE,Ba.ACCEPTED_BY_REMOTE,Ba.REFUSED_BY_REMOTE].includes(this.state)}}]),_e}(tb()),fa(vd.prototype,"send",[Nb],Object.getOwnPropertyDescriptor(vd.prototype,"send"),vd.prototype),fa(vd.prototype,"cancel",[Nb],Object.getOwnPropertyDescriptor(vd.prototype,"cancel"),vd.prototype),vd),Rh=S.RemoteInvitationFailureReason,kb=S.RemoteInvitationState,mD=function($){function _e(Vt){var Wt=Vt.invitationChannel,_i=Vt.extraContent,_s=Vt.callId,_c=Vt.callerId,_l=Vt.logger;Vt=Vt.getSession,W(this,_e);var _d=_t.call(this,_l,"RtmRemoteInvitation",!0);return m(n(_d),"state",kb.INVITATION_RECEIVED),m(n(_d),"remoteInvitationEnd$",Ca(gb(n(_d),"RemoteInvitationCanceled"),gb(n(_d),"RemoteInvitationRefused"),gb(n(_d),"RemoteInvitationAccepted"),gb(n(_d),"RemoteInvitationFailure")).pipe(Ka(1))),m(n(_d),"callerId",void 0),m(n(_d),"callId",void 0),m(n(_d),"_getSession",void 0),m(n(_d),"logger",void 0),m(n(_d),"_content",void 0),m(n(_d),"_channelId",void 0),m(n(_d),"_response",""),_d._channelId=Wt,_d._content=_i,_d.callId=_s,_d.callerId=_c,_d._getSession=Vt,_d.logger=_l,_d.remoteInvitationEnd$.pipe(hb(6e4),Ga(function(_m){return Sa(_m)&&_d.warn("Remote invitation expired"),Z(_m)})).subscribe({error:function(){_d.state=kb.FAILURE,_d.emit("RemoteInvitationFailure",Rh.INVITATION_EXPIRE)}}),_d}la(_e,$);var _t=ma(_e);return Ha(_e,[{key:"channelId",get:function(){return this._channelId},set:function(Vt){throw new I('Cannot set the "response" of the RemoteInvitation instance.',xc)}},{key:"content",get:function(){return this._content},set:function(Vt){throw new I('Cannot set the "content" of the RemoteInvitation instance.',xc)}},{key:"response",get:function(){return this._response},set:function(Vt){this._response=Vt}},{key:"accept",value:function(){var Vt,Wt=this;if(this.isRemoteInvitationEnd())throw new K("The local invitation has ended. Cannot accept.",Ih);if(this.state===kb.ACCEPT_SENT_TO_LOCAL)throw new K("The remote invitation is accepting. Cannot do the operation.",Qq);if(8192<Ig(this._response))throw new I('The length of the "response" overflows. The number of bytes representing content must not exceed 8  1024 if encoded in UTF-8.',xc);this.state=kb.ACCEPT_SENT_TO_LOCAL,Xb(mm(1e3).pipe(cb(function(){return ad(J(w.mark(function _i(){return w.wrap(function(_s){for(;;)switch(_s.prev=_s.next){case 0:return _s.abrupt("return",Wt._getSession().sendInvitationMessage({peerId:Wt.callerId,callId:Wt.callId,extra:Wt.response,type:"CallAccept",isAcceptAck:!1,channelId:Wt.channelId}));case 1:case"end":return _s.stop()}},_i)})))}),wb(function(_i){return Vt=_i.hasPeerReceived}),Ka(1)),gb(this,"RemoteInvitationAccepted")).pipe(hb(5e3),ob(this.remoteInvitationEnd$)).subscribe({error:function(_i){if(Wt.logError(_i),Wt.state=kb.FAILURE,Sa(_i))switch(Vt){case void 0:case!0:return void Wt.emit("RemoteInvitationFailure",Rh.ACCEPT_FAILURE);case!1:return void Wt.emit("RemoteInvitationFailure",Rh.PEER_OFFLINE)}Wt.emit("RemoteInvitationFailure",Rh.UNKNOWN)}})}},{key:"refuse",value:function(){if(this.state===kb.ACCEPT_SENT_TO_LOCAL)throw new K("The remote invitation is accepting. Cannot do the operation.",Qq);if(this.isRemoteInvitationEnd())throw new K("The invitation is end. Cannot refuse",Ih);if(8192<Ig(this._response))throw new I('The length of the "response" overflows. The number of bytes representing content must not exceed 8  1024 if encoded in UTF-8.',xc);this._getSession().sendInvitationMessage({peerId:this.callerId,callId:this.callId,extra:this.response,type:"CallReject",channelId:this.channelId}),this.state=kb.REFUSED,this.emit("RemoteInvitationRefused")}},{key:"onCancelReceived",value:function(Vt){this.isRemoteInvitationEnd()?this.log("The invitation has ended, skipped emitting the %s event","RemoteInvitationCanceled"):(this.state===kb.ACCEPT_SENT_TO_LOCAL&&this.log("caller canceled before receive accept"),this._content=Vt,this.state=kb.CANCELED,this.emit("RemoteInvitationCanceled",Vt))}},{key:"onAcceptAckReceived",value:function(){this.state!==kb.ACCEPT_SENT_TO_LOCAL?this.log("The invitation has ended, skipped emitting the %s event","ori:".concat(this.state,", to: RemoteInvitationAccepted")):(this.state=kb.ACCEPTED,this.emit("RemoteInvitationAccepted"))}},{key:"isRemoteInvitationEnd",value:function(){return[kb.ACCEPTED,kb.REFUSED,kb.CANCELED,kb.FAILURE].includes(this.state)}}]),_e}(tb()),nD=function($){function _e(Vt,Wt){W(this,_e);var _i=_t.call(this,Wt,"InvitationManager");return m(n(_i),"getSession",void 0),m(n(_i),"invitationDispatcher",new ea.EventEmitter),m(n(_i),"outgoingLocalInvitations",new Map),m(n(_i),"receivedRemoteInvitations",new tc(void 0,{maxlen:1e4})),m(n(_i),"logger",void 0),_i.getSession=cn(Vt),_i.logger=Wt,_i.invitationDispatcher.on("remoteInvitationToManager",function(_s){var _c=_s.callId,_l=_s.extra,_d=_s.callerId;_s=_s.channelId,_i.receivedRemoteInvitations.has(_c)||((_l=new mD({callerId:_d,callId:_c,getSession:_i.getSession,logger:Wt,extraContent:_l,invitationChannel:_s})).remoteInvitationEnd$.subscribe(function(){_i.receivedRemoteInvitations.delete(_c)}),_i.receivedRemoteInvitations.set(_c,_l),_i.emit("remoteInvitationInstance",_l))}),_i.invitationDispatcher.on("acceptAckToRemoteInvitation",function(_s){(_s=_i.receivedRemoteInvitations.get(_s.callId))&&_s.onAcceptAckReceived()}),_i.invitationDispatcher.on("cancelToRemoteInvitation",function(_s){var _c=_s.extra;(_s=_i.receivedRemoteInvitations.get(_s.callId))&&_s.onCancelReceived(_c)}),_i.invitationDispatcher.on("acceptToLocalInvitation",function(_s){var _c=_s.extra;(_s=_i.outgoingLocalInvitations.get(_s.callId))&&_s.onAcceptReceived(_c)}),_i.invitationDispatcher.on("refuseToLocalInvitation",function(_s){var _c=_s.extra;(_s=_i.outgoingLocalInvitations.get(_s.callId))&&_s.onRefuseReceived(_c)}),_i}la(_e,$);var _t=ma(_e);return Ha(_e,[{key:"invitationMessageHandler",value:function(Vt){var Wt=Vt.body,_i=Wt.callId,_s=Wt.extra;_s=_s===void 0?"":_s;var _c=Wt.type,_l=(Wt=Wt.channel)===void 0?"":Wt,_d=Vt.type;switch(Wt=Vt.peerId,Vt=Vt.serverReceivedTs,_d){case"CallAccept":_c==="ack"?this.invitationDispatcher.emit("acceptAckToRemoteInvitation",{callId:_i}):_c==="request"&&this.invitationDispatcher.emit("acceptToLocalInvitation",{callId:_i,extra:_s});break;case"CallInvite":this.invitationDispatcher.emit("remoteInvitationToManager",{callId:_i,callerId:Wt,extra:_s,channelId:_l});break;case"CallCancel":if(_i==="0"){_i="".concat("AgoraRTMLegacyEndcallCompatibleMessagePrefix","_").concat(_l,"_").concat(_s),this.getSession().emit("peerTextMessage",{peerId:Wt,properties:{serverReceivedTs:Vt,isOfflineMessage:!1},text:_i});break}this.invitationDispatcher.emit("cancelToRemoteInvitation",{callId:_i,extra:_s});break;case"CallReject":this.invitationDispatcher.emit("refuseToLocalInvitation",{callId:_i,extra:_s});break;default:throw Im("invitationType",_d)}}},{key:"genLocalInvitation",value:function(Vt){var Wt=this,_i=new lD(Vt,this.getSession,this.logger);return _i.localInvitationEnd$.subscribe(function(){Wt.outgoingLocalInvitations.delete(_i.callId)}),this.outgoingLocalInvitations.set(_i.callId,_i),_i}}]),_e}(tb()),oD=function($,_e,_t){var Vt=!0,Wt=!0;if(typeof $!="function")throw new TypeError("Expected a function");return lb(_t)&&(Vt="leading"in _t?!!_t.leading:Vt,Wt="trailing"in _t?!!_t.trailing:Wt),qC($,_e,{leading:Vt,maxWait:_e,trailing:Wt})},ub,cf;(function($){$[$.JOINED=0]="JOINED",$[$.LEFT=1]="LEFT"})(cf||(cf={}));var ns=S.ConnectionState,pD=(ub=function($){function _e(Vt,Wt,_i,_s){W(this,_e);var _c=_t.call(this,_s,"RtmChannel",!0);return m(n(_c),"onMemberCountUpdated",oD(function(_l){_l!==_c.memberCount&&(_c.memberCount=_l,_c.emit("MemberCountUpdated",_l))},1e3)),m(n(_c),"getSession",void 0),m(n(_c),"memberCount",0),m(n(_c),"memberJoinedLru",new tc(void 0,{maxlen:1e4})),m(n(_c),"memberLeftLru",new tc(void 0,{maxlen:1e4})),m(n(_c),"memberJoinStateLru",new tc(void 0,{maxlen:1e4})),m(n(_c),"attributesSeqLru",new tc(void 0,{maxlen:1e4})),m(n(_c),"channelId",void 0),m(n(_c),"client",void 0),m(n(_c),"onAttributesUpdated",function(_l){var _d=_l.channelId,_m=_l.attributeMaps,e_=_l.seq;_l=_l.instance.toString();var t_=_c.attributesSeqLru.get(_l);if((!t_||e_.greaterThan(t_))&&(_c.attributesSeqLru.set(_l,e_),_d===_c.channelId)){for(_d={},e_=0;e_<_m.length;e_++){var i_=_m[e_];_l=i_.key,t_=i_.ms;var c_=i_.value;if(i_=i_.origin,typeof _l!="string"||!U.isLong(t_)||typeof c_!="string"||!za(i_))break;_d[_l]={value:c_,lastUpdateUserId:i_,lastUpdateTs:t_.toNumber()}}_c.emit("AttributesUpdated",_d)}}),m(n(_c),"onChannelTextMessage",function(_l){var _d=_l.memberId,_m=_l.text,e_=_l.properties;_l.channelId===_c.channelId&&_c.emit("ChannelMessage",{text:_m,messageType:S.MessageType.TEXT},_d,e_)}),m(n(_c),"onChannelMediaMessage",function(_l){var _d=_l.memberId,_m=_l.properties,e_=_l.details,t_=_l.messageType;_l.channelId===_c.channelId&&(t_==="FILE"?_c.emit("ChannelMessage",{messageType:S.MessageType.FILE,size:parseInt(pa(e_.media_size),10),description:pa(e_.media_description),fileName:pa(e_.media_filename),mediaId:pa(e_.media_id),thumbnail:new Blob([e_.media_thumbnail])},_d,_m):t_==="IMAGE"&&_c.emit("ChannelMessage",{messageType:S.MessageType.IMAGE,size:parseInt(pa(e_.media_size),10),description:pa(e_.media_description),fileName:pa(e_.media_filename),mediaId:pa(e_.media_id),thumbnail:new Blob([e_.media_thumbnail]),height:parseInt(pa(e_.media_height),10),width:parseInt(pa(e_.media_width),10),thumbnailHeight:parseInt(pa(e_.media_thumbnailheight),10),thumbnailWidth:parseInt(pa(e_.media_thumbnailwidth),10)},_d,_m))}),m(n(_c),"onChannelRawMessage",function(_l){var _d=_l.desc,_m=_l.raw,e_=_l.memberId,t_=_l.properties;_l.channelId===_c.channelId&&_c.emit("ChannelMessage",{messageType:S.MessageType.RAW,rawMessage:_m,description:_d},e_,t_)}),m(n(_c),"onMemberNotice",function(_l){var _d=_l.memberId,_m=_l.type,e_=_l.size;if(_l.channelId===_c.channelId){var t_=_l.instance.toString();_l=_l.seq.toString();var i_={MemberLeft:_c.memberLeftLru,MemberJoined:_c.memberJoinedLru,MemberCountUpdated:void 0}[_m];if(i_){if(i_.has(t_+_l))return void _c.log("received duplicated %s notice (seq: %s), channel '%s', member '%s'",_m,_l,oa(_c.channelId),oa(_d||""));if(i_.set(t_+_l,void 0),typeof _d!="string")return;if(_d!==_c.getSession().context.uid&&((t_=_c.memberJoinStateLru.get(_d))===cf.JOINED&&_m==="MemberJoined"||t_===cf.LEFT&&_m==="MemberLeft"))return void _c.log("received duplicated %s state (seq: %s), channel '%s', member '%s'",_m,_l,oa(_c.channelId),oa(_d||""));_c.memberJoinStateLru.set(_d,_m==="MemberJoined"?cf.JOINED:cf.LEFT)}_c.info("Channel %s - %s, memberId: %s",_m,oa(_c.channelId),_m==="MemberCountUpdated"?"[unknown]":oa(_d||"")),t_=_d===_c.getSession().context.uid,_m==="MemberLeft"&&za(_d)||_m==="MemberJoined"&&za(_d)?(t_||_c.emit(_m,_d),_c.onMemberCountUpdated(e_)):_m==="MemberCountUpdated"&&typeof e_=="number"&&_c.onMemberCountUpdated(e_)}}),_c.getSession=cn(Wt),_c.channelId=Vt,_c.client=_i,_c.info("A channel created, id %s",oa(Vt)),_c}la(_e,$);var _t=ma(_e);return Ha(_e,[{key:"join",value:function(){var Vt=J(w.mark(function Wt(){var _i,_s,_c,_l,_d,_m,e_;return w.wrap(function(t_){for(;;)switch(t_.prev=t_.next){case 0:if(za(this.channelId)){t_.next=2;break}throw new I(["The %s in the arguments is invalid","channelId"],hA);case 2:t_.prev=2,_i=this.getSession(),t_.next=9;break;case 6:throw t_.prev=6,t_.t0=t_.catch(2),new K("The client is not logged in. Cannot do the operation",Vq);case 9:if(!_i.joinedChannels.has(this)){t_.next=12;break}throw eb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:_i.context.uid,elapse:fb(_i.startTime),errCode:Uq,sid:Xa(_i.instanceId)},(_s=this.client.context.config.enableCloudProxy)!==null&&_s!==void 0&&_s),new K("The channel has joined. Cannot rejoin",Uq);case 12:if(t_.prev=12,this.log("Joining the channel %s",oa(this.channelId)),!this.hasOtherChannelJoined()){t_.next=17;break}throw eb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:_i.context.uid,elapse:fb(_i.startTime),errCode:Wq,sid:Xa(_i.instanceId)},(_d=this.client.context.config.enableCloudProxy)!==null&&_d!==void 0&&_d),new K("A channel of the same channel ID has already joined. Cannot rejoin",Wq);case 17:if(_i.joinedChannels.size!==20){t_.next=20;break}throw eb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:_i.context.uid,elapse:fb(_i.startTime),errCode:Tq,sid:Xa(_i.instanceId)},(_m=this.client.context.config.enableCloudProxy)!==null&&_m!==void 0&&_m),new ib("The joined channels has exceeded the limit of 20",Tq);case 20:return eb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:_i.context.uid,elapse:fb(_i.startTime),errCode:0,sid:Xa(_i.instanceId)},(_c=this.client.context.config.enableCloudProxy)!==null&&_c!==void 0&&_c),t_.next=23,_i.requestChannelJoin(this,this.channelId);case 23:eb("ChnJoinRes",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:fb(_i.startTime),errCode:0,sid:Xa(_i.instanceId),serverErrCode:0,userId:_i.context.uid},(_l=this.client.context.config.enableCloudProxy)!==null&&_l!==void 0&&_l),this.info("The channel %s joined successfully",oa(this.channelId)),_i.on("channelTextMessage",this.onChannelTextMessage),_i.on("channelRawMessage",this.onChannelRawMessage),_i.on("channelMediaMessage",this.onChannelMediaMessage),_i.on("memberNotice",this.onMemberNotice),_i.on("channelAttributesUpdated",this.onAttributesUpdated),t_.next=41;break;case 32:if(t_.prev=32,t_.t1=t_.catch(12),this.logError(t_.t1),!sa(t_.t1)){t_.next=37;break}throw t_.t1;case 37:if(!Sa(t_.t1)){t_.next=40;break}throw eb("ChnJoinRes",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:fb(_i.startTime),errCode:Sq,sid:Xa(_i.instanceId),serverErrCode:0,userId:_i.context.uid},(e_=this.client.context.config.enableCloudProxy)!==null&&e_!==void 0&&e_),new db(["Join channel %s timed out",oa(this.channelId)],Sq);case 40:throw new Wc(["The channel %s join failure",oa(this.channelId)],{code:Rq,originalError:t_.t1});case 41:case"end":return t_.stop()}},Wt,this,[[2,6],[12,32]])}));return function(){return Vt.apply(this,arguments)}}()},{key:"leave",value:function(){var Vt=J(w.mark(function Wt(){var _i,_s,_c,_l;return w.wrap(function(_d){for(;;)switch(_d.prev=_d.next){case 0:_d.prev=0,_s=this.getSession(),_d.next=7;break;case 4:throw _d.prev=4,_d.t0=_d.catch(0),new K("The client is not logged in. Cannot do the operation",jA);case 7:if(_s.joinedChannels.has(this)){_d.next=9;break}throw new K("The channel does not join. Cannot do the operation",iA);case 9:_d.prev=9,_s.requestChannelLeave(this,this.channelId),this.memberLeftLru.empty(),this.memberJoinedLru.empty(),this.attributesSeqLru.empty(),this.memberJoinStateLru.empty(),this.memberCount=0,_s.removeListener("channelTextMessage",this.onChannelTextMessage),_s.removeListener("channelRawMessage",this.onChannelRawMessage),_s.removeListener("channelMediaMessage",this.onChannelMediaMessage),_s.removeListener("memberNotice",this.onMemberNotice),_s.removeListener("channelAttributesUpdated",this.onAttributesUpdated),_d.next=32;break;case 23:if(_d.prev=23,_d.t1=_d.catch(9),this.logError(_d.t1),!sa(_d.t1)){_d.next=30;break}throw _d.t1.code===void 0&&(_d.t1.code=Yq),eb("ChnLeave",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:fb(_s.startTime),errCode:Yq,sid:Xa(_s.instanceId),userId:_s.context.uid},(_l=this.client.context.config.enableCloudProxy)!==null&&_l!==void 0&&_l),_d.t1;case 30:throw eb("ChnLeave",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:fb(_s.startTime),errCode:Xq,sid:Xa(_s.instanceId),userId:_s.context.uid},(_c=this.client.context.config.enableCloudProxy)!==null&&_c!==void 0&&_c),new Wc("The channel leave failure",{code:Xq,originalError:_d.t1});case 32:eb("ChnLeave",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:fb(_s.startTime),errCode:0,sid:Xa(_s.instanceId),userId:_s.context.uid},(_i=this.client.context.config.enableCloudProxy)!==null&&_i!==void 0&&_i);case 33:case"end":return _d.stop()}},Wt,this,[[0,4],[9,23]])}));return function(){return Vt.apply(this,arguments)}}()},{key:"sendMessage",value:function(){var Vt=J(w.mark(function Wt(_i){var _s,_c,_l,_d,_m,e_=this,t_=arguments;return w.wrap(function(i_){for(;;)switch(i_.prev=i_.next){case 0:_s=1<t_.length&&t_[1]!==void 0?t_[1]:{},_c=_s.enableHistoricalMessaging,_l=_c!==void 0&&_c,Tm(_i,Hh),i_.prev=2,_d=this.getSession(),i_.next=9;break;case 6:throw i_.prev=6,i_.t0=i_.catch(2),new K("The client is not logged in. Cannot do the operation",ig);case 9:if(_d.joinedChannels.has(this)){i_.next=11;break}throw new K("The channel does not join. Cannot do the operation",ig);case 11:if(this.client.connectionState!==ns.RECONNECTING){i_.next=16;break}return _m=Date.now(),i_.next=15,new Promise(function(c_,h_){var y_=function(){var d_=J(w.mark(function f_(){var S_;return w.wrap(function(T_){for(;;)switch(T_.prev=T_.next){case 0:return S_=Date.now()-_m,T_.prev=1,T_.next=4,Gg({message:_i,peerId:e_.channelId,toPeer:!1,session:e_.getSession(),errorCodes:{NOT_LOGGED_IN:ig,TOO_OFTEN:Mq},diff:S_,logger:e_.logger,options:{enableHistoricalMessaging:_l,enableOfflineMessaging:!1}});case 4:c_(),T_.next=12;break;case 7:T_.prev=7,T_.t0=T_.catch(1),Sa(T_.t0)&&h_(new db(Yd(e_.name,"sendMessageToPeer",1e4),Yk)),sa(T_.t0)&&h_(T_.t0),h_(new da("Channel message send failure",{code:hg,originalError:T_.t0}));case 12:return T_.prev=12,clearTimeout(l_),T_.finish(12);case 15:case"end":return T_.stop()}},f_,null,[[1,7,12,15]])}));return function(){return d_.apply(this,arguments)}}();e_.client.internalEmitter.once("RECONNECTED",y_);var l_=setTimeout(function(){e_.client.internalEmitter.off("RECONNECTED",y_),h_(new db(Yd(e_.name,"sendMessageToPeer",1e4),Yk))},9e3)});case 15:return i_.abrupt("return");case 16:if(this.client.connectionState===ns.CONNECTED){i_.next=18;break}throw new K("The client is not logged in. Cannot do the operation",ig);case 18:return i_.prev=18,i_.next=21,Gg({message:_i,peerId:this.channelId,toPeer:!1,session:this.getSession(),errorCodes:{NOT_LOGGED_IN:ig,TOO_OFTEN:Mq},diff:0,logger:this.logger,options:{enableHistoricalMessaging:_l,enableOfflineMessaging:!1}});case 21:i_.next=31;break;case 23:if(i_.prev=23,i_.t1=i_.catch(18),!Sa(i_.t1)){i_.next=27;break}throw new db(Yd(this.name,"sendMessage",1e4),Yk);case 27:if(!sa(i_.t1)){i_.next=30;break}throw this.logError(i_.t1),i_.t1;case 30:throw new Wc("The channel message send failure",hg);case 31:case"end":return i_.stop()}},Wt,this,[[2,6],[18,23]])}));return function(Wt){return Vt.apply(this,arguments)}}()},{key:"getMembers",value:function(){var Vt=J(w.mark(function Wt(){var _i,_s,_c;return w.wrap(function(_l){for(;;)switch(_l.prev=_l.next){case 0:_l.prev=0,_l.prev=1,_i=this.getSession(),_l.next=8;break;case 5:throw _l.prev=5,_l.t0=_l.catch(1),new K("The client is not logged in. Cannot do the operation",eA);case 8:if(_i.joinedChannels.has(this)){_l.next=10;break}throw new K("The channel does not join. Cannot do the operation",dA);case 10:return _s=this.getSession().requestChannelMemberList(this.channelId),_l.next=13,_s.pipe(ba(function(_d){return _d.memberInfos.map(function(_m){return _m.account})})).toPromise();case 13:return _c=_l.sent,this.info("Channel %s - get members success, %o",oa(this.channelId),_c.map(oa)),_l.abrupt("return",_c);case 18:if(_l.prev=18,_l.t1=_l.catch(0),!sa(_l.t1)){_l.next=23;break}throw this.logError(_l.t1),_l.t1;case 23:throw new Wc("The channel members get failure",bA);case 24:case"end":return _l.stop()}},Wt,this,[[0,18],[1,5]])}));return function(){return Vt.apply(this,arguments)}}()},{key:"hasOtherChannelJoined",value:function(){var Vt=this;return!this.getSession().joinedChannels.has(this)&&Array.from(this.getSession().joinedChannels).some(function(Wt){return Wt.channelId===Vt.channelId})}}]),_e}(tb()),fa(ub.prototype,"join",[Nb],Object.getOwnPropertyDescriptor(ub.prototype,"join"),ub.prototype),fa(ub.prototype,"leave",[Nb],Object.getOwnPropertyDescriptor(ub.prototype,"leave"),ub.prototype),fa(ub.prototype,"sendMessage",[Nb],Object.getOwnPropertyDescriptor(ub.prototype,"sendMessage"),ub.prototype),fa(ub.prototype,"getMembers",[Ma],Object.getOwnPropertyDescriptor(ub.prototype,"getMembers"),ub.prototype),ub),E,Eb=S.ConnectionChangeReason,T=S.ConnectionState,os={DISCONNECTED:1,CONNECTING:2,CONNECTED:3,RECONNECTING:4,ABORTED:5},qD={LOGIN:1,LOGIN_SUCCESS:2,LOGIN_FAILURE:3,LOGIN_TIMEOUT:4,INTERRUPTED:5,LOGOUT:6,BANNED_BY_SERVER:7,REMOTE_LOGIN:8},rD=(E=function($){function _e(Vt,Wt,_i,_s){W(this,_e);var _c=_t.call(this,Wt,"RtmClient",!0);return m(n(_c),"connectionState",T.DISCONNECTED),m(n(_c),"internalEmitter",new ea),m(n(_c),"context",void 0),m(n(_c),"attributes",{}),m(n(_c),"loginPromise",void 0),m(n(_c),"attributeDrafts",new Set),m(n(_c),"session",void 0),m(n(_c),"lastLoginTime",void 0),m(n(_c),"reconnId",0),m(n(_c),"channelAttributesCacheLru",new tc(void 0,{maxlen:1e4})),m(n(_c),"invitationManager",void 0),m(n(_c),"subscribedPeerStatusCache",{}),m(n(_c),"peerStatusSeqLru",new tc(void 0,{maxlen:1e4})),m(n(_c),"peerUnreachableTimers",{}),m(n(_c),"mediaTaskManager",void 0),m(n(_c),"setParameters",void 0),m(n(_c),"updateConfig",void 0),m(n(_c),"userDropHandler",function(_l){if(_c.connectionState!==T.ABORTED)switch(_l){case 11:_c.logError("Kicked off by remote session"),_c.onConnectionStateChanged(T.ABORTED,Eb.REMOTE_LOGIN);break;case 14:case 15:case 16:_c.logError("Server banned because of illegal ".concat({14:"User ID",15:"IP",16:"Channel Name"}[_l])),_c.onConnectionStateChanged(T.ABORTED,Eb.BANNED_BY_SERVER);break;default:_c.logError("User kicked off for unknown code: ".concat(_l)),_c.onConnectionStateChanged(T.ABORTED,Eb.INTERRUPTED)}}),_c.context=new ZC(Vt,_i,Wt),_c.mediaTaskManager=new fs(Wt),_c.context.config=_i,_c.internalEmitter.setMaxListeners(512),_c.setParameters=_s.bind(n(_c)),_c.updateConfig=_s.bind(n(_c)),_c.invitationManager=new nD(function(){return _c.session},Wt),_c.invitationManager.on("remoteInvitationInstance",function(_l){_c.emit("RemoteInvitationReceived",_l)}),_c}la(_e,$);var _t=ma(_e);return Ha(_e,[{key:"renewToken",value:function(){var Vt=J(w.mark(function Wt(_i){var _s,_c,_l,_d=this;return w.wrap(function(_m){for(;;)switch(_m.prev=_m.next){case 0:if(typeof _i=="string"&&_i.length!==0){_m.next=2;break}throw new I("Invalid argument",rA);case 2:if(this.connectionState!==T.ABORTED){_m.next=5;break}return _m.next=5,new Promise(function(){});case 5:if(this.connectionState===T.CONNECTED||this.connectionState===T.RECONNECTING){_m.next=7;break}throw new K("The client is not logged in",uA);case 7:if(this.session!==void 0){_m.next=9;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return _m.prev=9,_s=this.context.token,this.context.token=_i,_m.next=14,this.session.connection.apClient.getApEdgeInfo$(!1).pipe(Dd(function(){return Error("No available edge address to connect")}),oe(function(e_){return e_.pipe(ca(function(t_){if(sa(t_))throw t_}),cd(2500),Ka(4))}),Ka(1),hb(2e4),Ga(function(e_){return Sa(e_)&&_d.warn("renewToken timed out"),Z(e_)})).toPromise();case 14:_c=_m.sent,_l=_c.ticket,_m.next=27;break;case 18:if(_m.prev=18,_m.t0=_m.catch(9),this.context.token=_s,_m.t0.code!==$q&&_m.t0.code!==ar){_m.next=23;break}throw new Ye("Invalid token",tA);case 23:if(_m.t0.code!==Kh){_m.next=25;break}throw new Ye("The token expired",sA);case 25:if(!Sa(_m.t0)){_m.next=27;break}throw new db("Renew token timed out",qA);case 27:this.session.curLoginSockets.filter(function(e_){return e_!==void 0}).forEach(function(e_){return e_.ticket=_l});case 28:case"end":return _m.stop()}},Wt,this,[[9,18]])}));return function(Wt){return Vt.apply(this,arguments)}}()},{key:"queryPeersOnlineStatus",value:function(){var Vt=J(w.mark(function Wt(_i){var _s,_c,_l=this;return w.wrap(function(_d){for(;;)switch(_d.prev=_d.next){case 0:if(this.connectionState===T.CONNECTED){_d.next=2;break}throw new K("The client is not logged in",pA);case 2:if(this.session!==void 0){_d.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(!(!Array.isArray(_i)||_i.length===0||_i.some(function(_m){return!za(_m)})||256<_i.length)){_d.next=6;break}throw new I("invalid arguments",er);case 6:return _d.next=8,this.session.requestPeersOnlineStatus(_i).toPromise();case 8:return _s=_d.sent,_c=uc(Jk(_s.userInfos,"account"),function(_m){return!!_m.ts}),Object.keys(_c).forEach(function(_m){if(_m in _l.subscribedPeerStatusCache&&_l.subscribedPeerStatusCache[_m]!==S.PeerOnlineState.UNREACHABLE){var e_=_c[_m]?S.PeerOnlineState.ONLINE:S.PeerOnlineState.OFFLINE;_l.emit("PeersOnlineStatusChanged",m({},_m,e_)),_l.subscribedPeerStatusCache[_m]=e_}}),_d.abrupt("return",_c);case 12:case"end":return _d.stop()}},Wt,this)}));return function(Wt){return Vt.apply(this,arguments)}}()},{key:"getChannelMemberCount",value:function(){var Vt=J(w.mark(function Wt(_i){var _s,_c,_l,_d,_m,e_,t_,i_=this;return w.wrap(function(c_){for(;;)switch(c_.prev=c_.next){case 0:if(this.connectionState===T.CONNECTED){c_.next=2;break}throw new K("The client is not logged in",aA);case 2:if(this.session!==void 0){c_.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(_i)&&_i.every(function(h_){return typeof h_=="string"})&&_i.length!==0){c_.next=6;break}throw new I("Invalid arguments: channelIds",Oq);case 6:if(!(32<_i.length)){c_.next=8;break}throw new I("getChannelMemberCount exceed limit of 32 channelIds",$z);case 8:_s=0;case 9:if(!(_s<_i.length)){c_.next=16;break}if(za(_c=_i[_s])){c_.next=13;break}throw new I(["getChannelMemberCount channel id %s is invalid",_c],Oq);case 13:_s++,c_.next=9;break;case 16:return c_.next=18,this.session.requestGetChannelMemberCount(_i).toPromise();case 18:for(_l=c_.sent,_d=_l.groupInfos,_m={},e_=function(h_){var y_=(h_=_d[h_]).group,l_=h_.memberCount;za(y_)&&typeof l_=="number"&&(i_.session.joinedChannels.forEach(function(d_){d_.channelId===y_&&d_.onMemberCountUpdated(l_)}),_m[y_]=l_)},t_=0;t_<_d.length;t_++)e_(t_);return c_.abrupt("return",_m);case 24:case"end":return c_.stop()}},Wt,this)}));return function(Wt){return Vt.apply(this,arguments)}}()},{key:"setLocalUserAttributes",value:function(){var Vt=J(w.mark(function Wt(_i){var _s,_c;return w.wrap(function(_l){for(;;)switch(_l.prev=_l.next){case 0:if(uf({attributes:_i,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),this.connectionState===T.CONNECTED){_l.next=3;break}throw new K("The client is not logged in",Ub);case 3:if(this.session!==void 0){_l.next=5;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 5:return _s=this.session.requestSetLocalUserAttributes(_i).toPromise(),_c={attribute:_i,promise:_s},this.attributeDrafts.add(_c),_l.prev=8,_l.next=11,_s;case 11:this.attributes=_i,_l.next=19;break;case 14:if(_l.prev=14,_l.t0=_l.catch(8),!sa(_l.t0)){_l.next=18;break}throw _l.t0;case 18:throw new I("arguments is not valid",Ja);case 19:return _l.prev=19,this.attributeDrafts.delete(_c),_l.finish(19);case 22:case"end":return _l.stop()}},Wt,this,[[8,14,19,22]])}));return function(Wt){return Vt.apply(this,arguments)}}()},{key:"setChannelAttributes",value:function(){var Vt=J(w.mark(function Wt(_i,_s){var _c,_l,_d,_m,e_,t_=arguments;return w.wrap(function(i_){for(;;)switch(i_.prev=i_.next){case 0:if(_c=2<t_.length&&t_[2]!==void 0?t_[2]:{},_l=_c.enableNotificationToChannelMembers,_d=_l!==void 0&&_l,uf({attributes:_s,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:32768}),this.connectionState===T.CONNECTED){i_.next=4;break}throw new K("The client is not logged in",Ub);case 4:if(this.session!==void 0){i_.next=6;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return _m=this.session.requestSetChannelAttributes(_i,_s,_d).toPromise(),i_.prev=7,i_.next=10,_m;case 10:e_=uc(_s,function(c_){return new Blob([c_]).size}),this.channelAttributesCacheLru.set(_i,e_),i_.next=19;break;case 14:if(i_.prev=14,i_.t0=i_.catch(7),!sa(i_.t0)){i_.next=18;break}throw i_.t0;case 18:throw new I("arguments is not valid",Ja);case 19:case"end":return i_.stop()}},Wt,this,[[7,14]])}));return function(Wt,_i){return Vt.apply(this,arguments)}}()},{key:"addOrUpdateLocalUserAttributes",value:function(){var Vt=J(w.mark(function Wt(_i){var _s,_c,_l;return w.wrap(function(_d){for(;;)switch(_d.prev=_d.next){case 0:if(_s=ua(ua({},this.attributes),_i),uf({attributes:_i,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),uf({attributes:_s,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),this.connectionState===T.CONNECTED){_d.next=5;break}throw new K("The client is not logged in",Ub);case 5:if(this.session!==void 0){_d.next=7;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 7:return _c=this.session.requestAddOrUpdateLocalUserAttributes(_i).toPromise(),_l={attribute:_s,promise:_c},this.attributeDrafts.add(_l),_d.prev=10,_d.next=13,_c;case 13:this.attributes=_s,_d.next=21;break;case 16:if(_d.prev=16,_d.t0=_d.catch(10),!sa(_d.t0)){_d.next=20;break}throw _d.t0;case 20:throw new I("arguments is not valid",er);case 21:return _d.prev=21,this.attributeDrafts.delete(_l),_d.finish(21);case 24:case"end":return _d.stop()}},Wt,this,[[10,16,21,24]])}));return function(Wt){return Vt.apply(this,arguments)}}()},{key:"addOrUpdateChannelAttributes",value:function(){var Vt=J(w.mark(function Wt(_i,_s){var _c,_l,_d,_m,e_,t_,i_,c_=arguments;return w.wrap(function(h_){for(;;)switch(h_.prev=h_.next){case 0:if(_c=2<c_.length&&c_[2]!==void 0?c_[2]:{},_l=_c.enableNotificationToChannelMembers,_d=_l!==void 0&&_l,_m=this.channelAttributesCacheLru.get(_i,{}),e_=uc(_s,function(y_){return new Blob([y_]).size}),t_=ua(ua({},_m),e_),uf({attributes:_s,attrSizeMap:t_,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:32768}),this.connectionState===T.CONNECTED){h_.next=7;break}throw new K("The client is not logged in",Ub);case 7:if(this.session!==void 0){h_.next=9;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return i_=this.session.requestAddOrUpdateChannelAttributes(_i,_s,_d).toPromise(),h_.prev=10,h_.next=13,i_;case 13:this.channelAttributesCacheLru.set(_i,t_),h_.next=21;break;case 16:if(h_.prev=16,h_.t0=h_.catch(10),!sa(h_.t0)){h_.next=20;break}throw h_.t0;case 20:throw new I("arguments is not valid",Ja);case 21:case"end":return h_.stop()}},Wt,this,[[10,16]])}));return function(Wt,_i){return Vt.apply(this,arguments)}}()},{key:"deleteLocalUserAttributesByKeys",value:function(){var Vt=J(w.mark(function Wt(_i){var _s,_c,_l,_d;return w.wrap(function(_m){for(;;)switch(_m.prev=_m.next){case 0:if(Array.isArray(_i)&&_i.length!==0&&!_i.some(function(e_){return e_.length===0})){_m.next=2;break}throw new K("arguments is not valid",Ja);case 2:if(this.connectionState===T.CONNECTED){_m.next=4;break}throw new K("The client is not logged in",Ub);case 4:if(this.session!==void 0){_m.next=6;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return _s=this.session.requestDeleteLocalUserAttributesByKeys(_i).toPromise(),_c={attribute:Gk(this.attributes,_i),promise:_s},this.attributeDrafts.add(_c),_m.prev=9,_m.next=12,_s;case 12:for(_l=0;_l<_i.length;_l++)_d=_i[_l],delete this.attributes[_d];_m.next=20;break;case 15:if(_m.prev=15,_m.t0=_m.catch(9),!sa(_m.t0)){_m.next=19;break}throw _m.t0;case 19:throw new I("arguments is not valid",Ja);case 20:return _m.prev=20,this.attributeDrafts.delete(_c),_m.finish(20);case 23:case"end":return _m.stop()}},Wt,this,[[9,15,20,23]])}));return function(Wt){return Vt.apply(this,arguments)}}()},{key:"deleteChannelAttributesByKeys",value:function(){var Vt=J(w.mark(function Wt(_i,_s){var _c,_l,_d,_m,e_,t_,i_,c_=arguments;return w.wrap(function(h_){for(;;)switch(h_.prev=h_.next){case 0:if(_c=2<c_.length&&c_[2]!==void 0?c_[2]:{},_l=_c.enableNotificationToChannelMembers,_d=_l!==void 0&&_l,Array.isArray(_s)&&_s.length!==0&&za(_i)&&!_s.some(function(y_){return y_.length===0||512<y_.length})){h_.next=3;break}throw new K("arguments is not valid",Ja);case 3:if(this.connectionState===T.CONNECTED){h_.next=5;break}throw new K("The client is not logged in",Ub);case 5:if(this.session!==void 0){h_.next=7;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 7:return _m=this.session.requestDeleteChannelAttributesByKeys(_i,_s,_d).toPromise(),h_.prev=8,h_.next=11,_m;case 11:if(e_=this.channelAttributesCacheLru.get(_i))for(t_=0;t_<_s.length;t_++)i_=_s[t_],delete e_[i_];h_.next=20;break;case 15:if(h_.prev=15,h_.t0=h_.catch(8),!sa(h_.t0)){h_.next=19;break}throw h_.t0;case 19:throw new I("arguments is not valid",Ja);case 20:case"end":return h_.stop()}},Wt,this,[[8,15]])}));return function(Wt,_i){return Vt.apply(this,arguments)}}()},{key:"clearLocalUserAttributes",value:function(){var Vt=J(w.mark(function Wt(){var _i,_s;return w.wrap(function(_c){for(;;)switch(_c.prev=_c.next){case 0:if(this.connectionState===T.CONNECTED){_c.next=2;break}throw new K("The client is not logged in",Ub);case 2:if(this.session!==void 0){_c.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return _i=this.session.requestClearLocalUserAttributes().toPromise(),_s={attribute:{},promise:_i},this.attributeDrafts.add(_s),_c.prev=7,_c.next=10,_i;case 10:this.attributes={},_c.next=18;break;case 13:if(_c.prev=13,_c.t0=_c.catch(7),!sa(_c.t0)){_c.next=17;break}throw _c.t0;case 17:throw new I("arguments is not valid",Ja);case 18:return _c.prev=18,this.attributeDrafts.delete(_s),_c.finish(18);case 21:case"end":return _c.stop()}},Wt,this,[[7,13,18,21]])}));return function(){return Vt.apply(this,arguments)}}()},{key:"clearChannelAttributes",value:function(){var Vt=J(w.mark(function Wt(_i){var _s,_c,_l,_d,_m=arguments;return w.wrap(function(e_){for(;;)switch(e_.prev=e_.next){case 0:if(_s=1<_m.length&&_m[1]!==void 0?_m[1]:{},_c=_s.enableNotificationToChannelMembers,_l=_c!==void 0&&_c,this.connectionState===T.CONNECTED){e_.next=3;break}throw new K("The client is not logged in",Ub);case 3:if(this.session!==void 0){e_.next=5;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 5:return _d=this.session.requestClearChannelAttributes(_i,_l).toPromise(),e_.prev=6,e_.next=9,_d;case 9:this.channelAttributesCacheLru.delete(_i),e_.next=17;break;case 12:if(e_.prev=12,e_.t0=e_.catch(6),!sa(e_.t0)){e_.next=16;break}throw e_.t0;case 16:throw new I("arguments is not valid",Ja);case 17:case"end":return e_.stop()}},Wt,this,[[6,12]])}));return function(Wt){return Vt.apply(this,arguments)}}()},{key:"getUserAttributes",value:function(){var Vt=J(w.mark(function Wt(_i){var _s,_c,_l;return w.wrap(function(_d){for(;;)switch(_d.prev=_d.next){case 0:if(za(_i)){_d.next=2;break}throw new I("Not a valid user ID",Ja);case 2:if(this.connectionState===T.CONNECTED){_d.next=4;break}throw new K("The client is not logged in",Ub);case 4:if(this.session!==void 0){_d.next=6;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return _d.prev=6,_d.next=9,this.session.requestGetUserAttributeKeys(_i).toPromise();case 9:return _s=_d.sent,_c=_s.keys,_d.next=13,this.session.requestGetUserAttributesByKeys(_i,_c.slice(0,512)).toPromise();case 13:_l=_d.sent,_d.next=21;break;case 16:if(_d.prev=16,_d.t0=_d.catch(6),!sa(_d.t0)){_d.next=20;break}throw _d.t0;case 20:throw new I("arguments is not valid",Ja);case 21:return _d.abrupt("return",Yp(_l.attributeInfos.map(function(_m){return[_m.key,_m.value]})));case 22:case"end":return _d.stop()}},Wt,this,[[6,16]])}));return function(Wt){return Vt.apply(this,arguments)}}()},{key:"getChannelAttributes",value:function(){var Vt=J(w.mark(function Wt(_i){var _s,_c,_l,_d,_m,e_,t_,i_,c_,h_,y_;return w.wrap(function(l_){for(;;)switch(l_.prev=l_.next){case 0:if(za(_i)){l_.next=2;break}throw new I("Not a valid channel ID",Ja);case 2:if(this.connectionState===T.CONNECTED){l_.next=4;break}throw new K("The client is not logged in",Ub);case 4:if(this.session!==void 0){l_.next=6;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return l_.prev=6,l_.next=9,this.session.requestGetChannelAttributesKeys(_i).toPromise();case 9:return _s=l_.sent,_c=_s.keys,l_.next=13,this.session.requestGetChannelAttributesByKeys(_i,_c).toPromise();case 13:_l=l_.sent,_d=_l.attributeMaps,l_.next=22;break;case 17:if(l_.prev=17,l_.t0=l_.catch(6),!sa(l_.t0)){l_.next=21;break}throw l_.t0;case 21:throw new I("arguments is not valid",Ja);case 22:_m={},e_=0;case 24:if(!(e_<_d.length)){l_.next=32;break}if(t_=_d[e_],i_=t_.key,c_=t_.ms,h_=t_.value,y_=t_.origin,typeof i_=="string"&&U.isLong(c_)&&typeof h_=="string"&&za(y_)){l_.next=28;break}return l_.abrupt("break",32);case 28:_m[i_]={value:h_,lastUpdateUserId:y_,lastUpdateTs:c_.toNumber()};case 29:e_++,l_.next=24;break;case 32:return this.channelAttributesCacheLru.set(_i,uc(_m,function(d_){return new Blob([d_.value]).size})),l_.abrupt("return",_m);case 34:case"end":return l_.stop()}},Wt,this,[[6,17]])}));return function(Wt){return Vt.apply(this,arguments)}}()},{key:"getChannelAttributesByKeys",value:function(){var Vt=J(w.mark(function Wt(_i,_s){var _c,_l,_d,_m,e_,t_,i_,c_,h_,y_;return w.wrap(function(l_){for(;;)switch(l_.prev=l_.next){case 0:if(this.connectionState===T.CONNECTED){l_.next=2;break}throw new K("The client is not logged in",Ub);case 2:if(this.session!==void 0){l_.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return Hm(_i,_s),l_.prev=5,l_.next=8,this.session.requestGetChannelAttributesByKeys(_i,_s).toPromise();case 8:_c=l_.sent,_l=_c.attributeMaps,l_.next=17;break;case 12:if(l_.prev=12,l_.t0=l_.catch(5),!sa(l_.t0)){l_.next=16;break}throw l_.t0;case 16:throw new I("arguments is not valid",Ja);case 17:_d={},_m=this.channelAttributesCacheLru.get(_i,{}),e_=0;case 20:if(!(e_<_l.length)){l_.next=29;break}if(t_=_l[e_],i_=t_.key,c_=t_.ms,h_=t_.value,y_=t_.origin,typeof i_=="string"&&U.isLong(c_)&&typeof h_=="string"&&za(y_)){l_.next=24;break}return l_.abrupt("break",29);case 24:_m[i_]=new Blob([h_]).size,_d[i_]={value:h_,lastUpdateUserId:y_,lastUpdateTs:c_.toNumber()};case 26:e_++,l_.next=20;break;case 29:return this.channelAttributesCacheLru.set(_i,_m),l_.abrupt("return",_d);case 31:case"end":return l_.stop()}},Wt,this,[[5,12]])}));return function(Wt,_i){return Vt.apply(this,arguments)}}()},{key:"getUserAttributesByKeys",value:function(){var Vt=J(w.mark(function Wt(_i,_s){var _c;return w.wrap(function(_l){for(;;)switch(_l.prev=_l.next){case 0:if(this.connectionState===T.CONNECTED){_l.next=2;break}throw new K("The client is not logged in",Ub);case 2:if(this.session!==void 0){_l.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return Hm(_i,_s),_l.prev=5,_l.next=8,this.session.requestGetUserAttributesByKeys(_i,_s).toPromise();case 8:_c=_l.sent,_l.next=16;break;case 11:if(_l.prev=11,_l.t0=_l.catch(5),!sa(_l.t0)){_l.next=15;break}throw _l.t0;case 15:throw new I("arguments is not valid",Ja);case 16:return _l.abrupt("return",Yp(_c.attributeInfos.map(function(_d){return[_d.key,_d.value]})));case 17:case"end":return _l.stop()}},Wt,this,[[5,11]])}));return function(Wt,_i){return Vt.apply(this,arguments)}}()},{key:"login",value:function(){var Vt=J(w.mark(function Wt(_i){var _s,_c,_l,_d,_m=this;return w.wrap(function(e_){for(;;)switch(e_.prev=e_.next){case 0:if(Uk=!0,_s=Bg(),_c=_i.token,_i.token===this.context.appId&&(_c=void 0),setTimeout(function(){var t_;eb("Session",{appId:_m.context.appId,did:navigator.userAgent,elapse:fb(_m.session&&_m.session.startTime),index:{index1:_i.uid,index2:_m.context.appId,index3:"enableLogUpload=".concat(_m.context.config.enableLogUpload)},installId:gg,lts:U.fromNumber(Date.now()),os:7,sid:Xa(_s),token:_c||"",userId:_i.uid,ver:"1.4.3-203",buildno:603,subVersion:203,version:4},(t_=_m.context.config.enableCloudProxy)!==null&&t_!==void 0&&t_)},1e4),yd(_i)&&za(_i.uid)){e_.next=7;break}throw new I("not a valid user id",Jh);case 7:if(typeof _c!="string"||!_c){e_.next=11;break}this.context.token=_c,e_.next=13;break;case 11:if(typeof _c=="string"||_c==null){e_.next=13;break}throw new I('The "token" is not a valid string.',Jh);case 13:return _l=Date.now(),this.context.sid=Xa(_s),this.loginPromise=this.loginImpl({uid:_i.uid,instanceId:_s}),this.info("RTM Client logging in as ".concat(oa(_i.uid))),e_.prev=17,e_.next=20,this.loginPromise;case 20:e_.next=27;break;case 22:throw e_.prev=22,e_.t0=e_.catch(17),sa(e_.t0)&&eb("Link",{ackedServerIp:"",destServerIp:"",ec:e_.t0.code||1,sc:e_.t0.serverCode,elapse:fb(this.session&&this.session.startTime),lts:U.fromNumber(Date.now()),responseTime:Date.now()-_l,sid:Xa(_s),userId:_i.uid},(_d=this.context.config.enableCloudProxy)!==null&&_d!==void 0&&_d),this.context.token=void 0,e_.t0;case 27:return e_.prev=27,this.loginPromise=void 0,e_.finish(27);case 30:Uk=!1;case 31:case"end":return e_.stop()}},Wt,this,[[17,22,27,30]])}));return function(Wt){return Vt.apply(this,arguments)}}()},{key:"logout",value:function(){var Vt=J(w.mark(function Wt(){var _i;return w.wrap(function(_s){for(;;)switch(_s.prev=_s.next){case 0:if(!this.loginPromise){_s.next=3;break}return _s.next=3,this.loginPromise;case 3:if(this.connectionState!==T.DISCONNECTED){_s.next=6;break}throw this.logError("Already in logout state"),new K("Logout failure. The client has already been logged out",br);case 6:if(this.connectionState!==T.ABORTED){_s.next=10;break}return this.info('Reset connection state from "ABORTED" to "DISCONNECTED"'),this.onConnectionStateChanged(T.DISCONNECTED,Eb.LOGOUT),_s.abrupt("return");case 10:if(this.session!==void 0){_s.next=13;break}return this.onConnectionStateChanged(T.DISCONNECTED,Eb.LOGOUT),_s.abrupt("return");case 13:return eb("Logout",{elapse:fb(this.session.startTime),lts:U.fromNumber(Date.now()),sid:Xa(this.session.instanceId),userId:this.context.uid},(_i=this.context.config.enableCloudProxy)!==null&&_i!==void 0&&_i),_s.next=16,this.session.logoutHandler();case 16:this.onConnectionStateChanged(T.DISCONNECTED,Eb.LOGOUT),this.log("Log out success");case 18:case"end":return _s.stop()}},Wt,this)}));return function(){return Vt.apply(this,arguments)}}()},{key:"logoutSync",value:function(){var Vt,Wt=this;if(this.connectionState===T.DISCONNECTED)throw this.logError("Already in logout state"),new K("Logout failure. The client has already been logged out",br);this.connectionState===T.ABORTED?this.info('Reset connection state from "ABORTED" to "DISCONNECTED"'):this.session!==void 0&&(eb("Logout",{elapse:fb(this.session.startTime),lts:U.fromNumber(Date.now()),sid:Xa(this.session.instanceId),userId:this.context.uid},(Vt=this.context.config.enableCloudProxy)!==null&&Vt!==void 0&&Vt),this.session.logoutHandler().then(function(){Wt.log("Log out success")})),this.onConnectionStateChanged(T.DISCONNECTED,Eb.LOGOUT)}},{key:"sendMessageToPeer",value:function(){var Vt=J(w.mark(function Wt(_i,_s){var _c,_l,_d,_m,e_,t_,i_=this,c_=arguments;return w.wrap(function(h_){for(;;)switch(h_.prev=h_.next){case 0:if(_c=2<c_.length&&c_[2]!==void 0?c_[2]:{},_l=_c.enableOfflineMessaging,_d=_l!==void 0&&_l,_m=_c.enableHistoricalMessaging,e_=_m!==void 0&&_m,Tm(_i,ve),this.connectionState!==T.RECONNECTING){h_.next=5;break}return t_=Date.now(),h_.abrupt("return",new Promise(function(y_,l_){var d_=function(){var S_=J(w.mark(function T_(){var R_;return w.wrap(function(C_){for(;;)switch(C_.prev=C_.next){case 0:if(i_.session!==void 0){C_.next=2;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 2:return R_=Date.now()-t_,C_.prev=3,C_.t0=y_,C_.next=7,Gg({message:_i,peerId:_s,toPeer:!0,session:i_.session,errorCodes:{NOT_LOGGED_IN:al,TOO_OFTEN:dr},diff:R_,logger:i_.logger,options:{enableHistoricalMessaging:e_,enableOfflineMessaging:_d}});case 7:C_.t1=C_.sent,(0,C_.t0)(C_.t1),C_.next=16;break;case 11:C_.prev=11,C_.t2=C_.catch(3),Sa(C_.t2)&&l_(new db(Yd(i_.name,"sendMessageToPeer",1e4),Zk)),sa(C_.t2)&&l_(C_.t2),l_(new da("Peer-to-peer message send failure",{code:cr,originalError:C_.t2}));case 16:return C_.prev=16,clearTimeout(f_),C_.finish(16);case 19:case"end":return C_.stop()}},T_,null,[[3,11,16,19]])}));return function(){return S_.apply(this,arguments)}}();i_.internalEmitter.once("RECONNECTED",d_);var f_=setTimeout(function(){i_.internalEmitter.off("RECONNECTED",d_),l_(new db(Yd(i_.name,"sendMessageToPeer",1e4),Zk))},9e3)}));case 5:if(this.connectionState===T.CONNECTED){h_.next=7;break}throw new K("Failed to send the peer-to-peer message. The client is not logged in",al);case 7:if(this.session!==void 0){h_.next=9;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return h_.prev=9,h_.next=12,Gg({message:_i,peerId:_s,toPeer:!0,session:this.session,errorCodes:{NOT_LOGGED_IN:al,TOO_OFTEN:dr},diff:0,logger:this.logger,options:{enableHistoricalMessaging:e_,enableOfflineMessaging:_d}});case 12:return h_.abrupt("return",h_.sent);case 15:if(h_.prev=15,h_.t0=h_.catch(9),!Sa(h_.t0)){h_.next=19;break}throw new db(Yd(this.name,"sendMessageToPeer",1e4),Zk);case 19:if(!sa(h_.t0)){h_.next=21;break}throw h_.t0;case 21:throw new da("Peer-to-peer message send failure",{code:cr,originalError:h_.t0});case 22:case"end":return h_.stop()}},Wt,this,[[9,15]])}));return function(Wt,_i){return Vt.apply(this,arguments)}}()},{key:"createChannel",value:function(Vt){var Wt=this;if(!za(Vt))throw new I(["The %s in the arguments is invalid",Object.keys({channelId:Vt})[0]],Zz);return new pD(Vt,function(){return Wt.session},this,this.logger)}},{key:"createLocalInvitation",value:function(Vt){if(!za(Vt))throw new I(["The %s in the arguments is invalid",Object.keys({calleeId:Vt})[0]],xc);return this.invitationManager.genLocalInvitation(Vt)}},{key:"subscribePeersOnlineStatus",value:function(){var Vt=J(w.mark(function Wt(_i){var _s,_c,_l,_d,_m,e_,t_,i_,c_,h_,y_,l_,d_,f_=this;return w.wrap(function(S_){for(;;)switch(S_.prev=S_.next){case 0:if(this.connectionState===T.CONNECTED){S_.next=2;break}throw new K("The client is not logged in",bl);case 2:if(this.session!==void 0){S_.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(_i)&&_i.length!==0){S_.next=6;break}throw new I("Invalid arguments: peerIds",kg);case 6:_s=0;case 7:if(!(_s<_i.length)){S_.next=14;break}if(za(_c=_i[_s])){S_.next=11;break}throw new I(["subscribePeersOnlineStatus peer id %s is invalid",_c],kg);case 11:_s++,S_.next=7;break;case 14:if(!(512<(_l=_i&&_i.length?vk(_i):[]).length+Object.keys(this.subscribedPeerStatusCache).length)){S_.next=17;break}throw new ib("Subscribed peers overflows",gr);case 17:return S_.next=19,this.session.requestSubscribePeersOnlineStatus(_l).toPromise();case 19:_d=S_.sent,_m=_d.errors,e_=[],t_=[],i_=0;case 24:if(!(i_<_m.length)){S_.next=32;break}if(c_=_m[i_],h_=c_.code,typeof(y_=c_.account)=="string"){S_.next=28;break}throw new da("Returned account is invalid",fr);case 28:h_!==0&&e_.push(y_);case 29:i_++,S_.next=24;break;case 32:for(l_=0;l_<_l.length;l_++)d_=_l[l_],e_.includes(d_)||(t_.push(d_),this.subscribedPeerStatusCache[d_]=void 0);if(this.session.requestPeersOnlineStatus(t_).pipe(ba(function(T_){return uc(Jk(T_.userInfos,"account"),function(R_){return!!R_.ts})})).subscribe(function(T_){T_=uc(T_,function(R_,C_){return R_=R_?S.PeerOnlineState.ONLINE:S.PeerOnlineState.OFFLINE,f_.subscribedPeerStatusCache[C_]=R_}),f_.emit("PeersOnlineStatusChanged",T_)}),e_.length===0){S_.next=36;break}throw new da("Subscription failed",fr);case 36:case"end":return S_.stop()}},Wt,this)}));return function(Wt){return Vt.apply(this,arguments)}}()},{key:"unsubscribePeersOnlineStatus",value:function(){var Vt=J(w.mark(function Wt(_i){var _s,_c,_l,_d,_m;return w.wrap(function(e_){for(;;)switch(e_.prev=e_.next){case 0:if(this.connectionState===T.CONNECTED){e_.next=2;break}throw new K("The client is not logged in",bl);case 2:if(this.session!==void 0){e_.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(_i)&&_i.length!==0){e_.next=6;break}throw new I("Invalid arguments: peerIds",kg);case 6:_s=0;case 7:if(!(_s<_i.length)){e_.next=14;break}if(za(_c=_i[_s])){e_.next=11;break}throw new I(["subscribePeersOnlineStatus peer id %s is invalid",_c],kg);case 11:_s++,e_.next=7;break;case 14:if(!(512<_i.length)){e_.next=16;break}throw new ib("Unsubscribed peers overflows",gr);case 16:for(_l=_i&&_i.length?vk(_i):[],this.session.requestUnsubscribePeersOnlineStatus(_l),_d=0;_d<_l.length;_d++)_m=_l[_d],delete this.subscribedPeerStatusCache[_m];case 19:case"end":return e_.stop()}},Wt,this)}));return function(Wt){return Vt.apply(this,arguments)}}()},{key:"queryPeersBySubscriptionOption",value:function(){var Vt=J(w.mark(function Wt(_i){return w.wrap(function(_s){for(;;)switch(_s.prev=_s.next){case 0:if(this.connectionState===T.CONNECTED){_s.next=2;break}throw new K("The client is not logged in",bl);case 2:if(_i!==S.PeerSubscriptionOption.ONLINE_STATUS){_s.next=4;break}return _s.abrupt("return",Object.keys(this.subscribedPeerStatusCache));case 4:throw new I("Subscription option not supported",kg);case 5:case"end":return _s.stop()}},Wt,this)}));return function(Wt){return Vt.apply(this,arguments)}}()},{key:"createMessage",value:function(Vt){return Vt.messageType==="IMAGE"?ua({width:0,height:0,fileName:"",description:"",thumbnail:new Blob,thumbnailWidth:0,thumbnailHeight:0,size:0},Vt):Vt.messageType==="FILE"?ua({fileName:"",description:"",thumbnail:new Blob,size:0},Vt):Vt}},{key:"downloadMedia",value:function(){var Vt=J(w.mark(function Wt(_i){var _s,_c,_l,_d,_m,e_,t_,i_,c_,h_,y_,l_,d_,f_,S_=this,T_=arguments;return w.wrap(function(R_){for(;;)switch(R_.prev=R_.next){case 0:if(_s=1<T_.length&&T_[1]!==void 0?T_[1]:{},typeof _i=="string"){R_.next=3;break}throw new I("invalid mediaId format",cl);case 3:if(R_.prev=3,_c=_i.split("z"),_l=ra(_c,3),_d=_l[0],_m=_l[1],e_=_l[2],t_=_d.slice(1,65),i_=bD(t_),c_=parseInt(_d.slice(65),10),h_=parseInt(_m,10),y_=parseInt(e_,10),!(Number.isNaN(c_)||Number.isNaN(h_)||Number.isNaN(y_))){R_.next=12;break}throw new I("Invalid mediaId content",cl);case 12:R_.next=19;break;case 14:if(R_.prev=14,R_.t0=R_.catch(3),!sa(R_.t0)){R_.next=18;break}throw R_.t0;case 18:throw new I("parse mediaId failure",{code:cl,originalError:R_.t0});case 19:if(this.connectionState===T.CONNECTED){R_.next=21;break}throw new K("The client is not logged in, cannot download",CA);case 21:if(this.session!==void 0){R_.next=23;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 23:return l_=this.mediaTaskManager.addDownloadTask({unit:h_,zone:c_,hashHexStr:t_,size:y_},function(){if(S_.session===void 0)throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});return S_.session.requestFileDownloadIndexGet({hash:i_,zone:c_,unit:h_,size:y_}).toPromise()},_s),R_.next=26,this.mediaTaskManager.waitMediaTask(l_);case 26:return d_=R_.sent,f_=d_.payload,R_.abrupt("return",f_);case 29:case"end":return R_.stop()}},Wt,this,[[3,14]])}));return function(Wt){return Vt.apply(this,arguments)}}()},{key:"createMediaMessageByUploading",value:function(){var Vt=J(w.mark(function Wt(_i){var _s,_c,_l,_d,_m,e_,t_,i_,c_,h_,y_,l_,d_,f_,S_,T_,R_,C_,j_,W_,A_,$_,q_,G_,I_=this,x_=arguments;return w.wrap(function(Y_){for(;;)switch(Y_.prev=Y_.next){case 0:if(_s=1<x_.length&&x_[1]!==void 0?x_[1]:{},_c=2<x_.length&&x_[2]!==void 0?x_[2]:{},yd(_s)){Y_.next=4;break}throw new I("Invalid params",wf);case 4:if(_l="thumbnailWidth"in _s||"thumbnailHeight"in _s||"width"in _s||"height"in _s,_d=_s.messageType,_m=_d===void 0?_l?"IMAGE":"FILE":_d,e_=_s.description,t_=e_===void 0?"":e_,i_=_s.fileName,c_=i_===void 0?"":i_,h_=_s.thumbnail,typeof _s.messageType=="string"&&typeof t_=="string"&&typeof c_=="string"&&(Pm(h_)||h_===void 0)&&Pm(_i)){Y_.next=8;break}throw new I("Invalid message params type",wf);case 8:if(!_l||_m!=="FILE"){Y_.next=10;break}throw new I("Invalid message params, unexpected field in RtmFileMessage",wf);case 10:if(!(33554432<(y_=_i.size))){Y_.next=13;break}throw new ib("The payload size overflow 32 MB",wA);case 13:return Y_.next=15,Ji(_i);case 15:return l_=Y_.sent,Y_.next=18,aD(l_);case 18:if(d_=Y_.sent,this.connectionState===T.CONNECTED){Y_.next=21;break}throw new K("The client is not logged in",yA);case 21:if(_m!=="IMAGE"){Y_.next=29;break}return Y_.next=24,Xt(_s,l_);case 24:f_=Y_.sent,S_=f_.height,T_=f_.width,R_=f_.thumbnailWidth,C_=f_.thumbnailHeight;case 29:return j_=this.mediaTaskManager.addUploadTask({file:new Uint8Array(l_),hash:d_},function(){if(I_.session===void 0)throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});return I_.session.fetchFileUploadIndexGet({hash:d_,size:y_})},function(z_,B_){if(I_.session===void 0)throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});return I_.session.requestFileUploadIndexSet({hash:d_,unit:z_,servers:B_}).toPromise()},_c),Y_.next=32,this.mediaTaskManager.waitMediaTask(j_);case 32:if(W_=Y_.sent,A_=W_.zone,$_=W_.retUnit,_m!=="IMAGE"){Y_.next=38;break}return q_={height:S_,width:T_,fileName:c_,size:y_,description:t_,thumbnail:h_,messageType:_m,thumbnailWidth:R_,thumbnailHeight:C_,mediaId:"0".concat($r(d_)).concat(A_,"z").concat($_,"z").concat(y_,"z").concat(S_,"z").concat(T_)},Y_.abrupt("return",q_);case 38:return G_={fileName:c_,size:y_,description:t_,mediaId:"0".concat($r(d_)).concat(A_,"z").concat($_,"z").concat(y_),thumbnail:h_,messageType:_m},Y_.abrupt("return",G_);case 40:case"end":return Y_.stop()}},Wt,this)}));return function(Wt){return Vt.apply(this,arguments)}}()},{key:"loginImpl",value:function(){var Vt=J(w.mark(function Wt(_i){var _s,_c,_l,_d,_m=this;return w.wrap(function(e_){for(;;)switch(e_.prev=e_.next){case 0:if(_s=_i.uid,_c=_i.instanceId,!(this.lastLoginTime!==void 0&&500>Date.now()-this.lastLoginTime)){e_.next=4;break}throw new rC(["The frequency of login exceeded the limit of %d queries per second",2],mA);case 4:if(this.connectionState===T.DISCONNECTED){e_.next=6;break}throw new K("The SDK is either logging in or has logged in the Agora RTM system",kA);case 6:e_.prev=6,this.context.uid=_s,e_.next=13;break;case 10:throw e_.prev=10,e_.t0=e_.catch(6),new I(["The %s in the arguments is invalid",Object.keys({uid:_s})[0]],Jh);case 13:return this.onConnectionStateChanged(T.CONNECTING,Eb.LOGIN),this.session=_l=new ls(this.context,new Yr(this.context,this.logger,!1),_c,this.logger),_d=function(){_m.connectionState===T.CONNECTED&&(_m.onConnectionStateChanged(T.RECONNECTING,Eb.INTERRUPTED),_m.session)&&_m.session.once("userJoined",function(){_m.onConnectionStateChanged(T.CONNECTED,Eb.LOGIN_SUCCESS)})},_l.on("connectionLost",_d),_l.on("tokenExpired",function(){_m.emit("TokenExpired")}),_l.once("userDrop",this.userDropHandler),this.session.on("peerTextMessage",function(t_){_m.emit("MessageFromPeer",{text:t_.text,messageType:S.MessageType.TEXT},t_.peerId,t_.properties)}),this.session.on("peerMediaMessage",function(t_){var i_=t_.peerId,c_=t_.properties,h_=t_.messageType;t_=t_.details,h_==="FILE"?_m.emit("MessageFromPeer",{messageType:S.MessageType.FILE,size:parseInt(pa(t_.media_size),10),description:pa(t_.media_description),fileName:pa(t_.media_filename),mediaId:pa(t_.media_id),thumbnail:new Blob([t_.media_thumbnail])},i_,c_):h_==="IMAGE"&&_m.emit("MessageFromPeer",{messageType:S.MessageType.IMAGE,size:parseInt(pa(t_.media_size),10),description:pa(t_.media_description),fileName:pa(t_.media_filename),mediaId:pa(t_.media_id),thumbnail:new Blob([t_.media_thumbnail]),height:parseInt(pa(t_.media_height),10),width:parseInt(pa(t_.media_width),10),thumbnailHeight:parseInt(pa(t_.media_thumbnailheight),10),thumbnailWidth:parseInt(pa(t_.media_thumbnailwidth),10)},i_,c_)}),this.session.on("peerRawMessage",function(t_){_m.emit("MessageFromPeer",{rawMessage:t_.raw,description:t_.desc,messageType:S.MessageType.RAW},t_.peerId,t_.properties)}),_l.on("instanceChanged",function(t_){return _c=t_}),_l.on("peerOnlineStatusChanged",function(t_){var i_=t_.instance.toString()+t_.state,c_=_m.peerStatusSeqLru.get(i_);!c_||t_.seq.greaterThan(c_)?(_m.peerStatusSeqLru.set(i_,t_.seq),t_.state!==_m.subscribedPeerStatusCache[t_.peerId]&&_m.emit("PeersOnlineStatusChanged",m({},t_.peerId,t_.state)),_m.subscribedPeerStatusCache[t_.peerId]=t_.state,clearTimeout(_m.peerUnreachableTimers[i_]),t_.state===S.PeerOnlineState.UNREACHABLE&&(_m.peerUnreachableTimers[i_]=setTimeout(function(){_m.subscribedPeerStatusCache[t_.peerId]===S.PeerOnlineState.UNREACHABLE&&(_m.subscribedPeerStatusCache[t_.peerId]=S.PeerOnlineState.ONLINE,_m.emit("PeersOnlineStatusChanged",m({},t_.peerId,S.PeerOnlineState.ONLINE)))},3e4))):_m.log("peerOnlineStatusChanged dedup for %s, %d",i_,t_.seq.toNumber())}),_l.on("invitationMessage",this.invitationManager.invitationMessageHandler.bind(this.invitationManager)),_l.on("channelAttributesUpdated",function(t_){var i_=t_.channelId;t_=t_.attributeMaps;for(var c_={},h_=0;h_<t_.length;h_++){var y_=t_[h_],l_=y_.key,d_=y_.ms,f_=y_.value;if(y_=y_.origin,typeof l_!="string"||!U.isLong(d_)||typeof f_!="string"||!za(y_))break;c_[l_]=new Blob([f_]).size}_m.channelAttributesCacheLru.set(i_,c_)}),_l.on("userJoined",function(t_){if(Object.keys(_m.attributes).length!==0){if(_m.session===void 0)return;_m.session.requestSetLocalUserAttributes(_m.attributes,t_).toPromise()}if(_m.attributeDrafts.size!==0)for(var i_=function(y_,l_){var d_=(y_=l_[y_]).attribute;y_.promise.then(function(){_m.session!==void 0&&_m.session.requestSetLocalUserAttributes(d_,t_).toPromise()})},c_=0,h_=Array.from(_m.attributeDrafts);c_<h_.length;c_++)i_(c_,h_);Object.keys(_m.subscribedPeerStatusCache).length!==0&&_l.requestSubscribePeersOnlineStatus(Object.keys(_m.subscribedPeerStatusCache))}),this.lastLoginTime=Date.now(),e_.prev=29,e_.next=32,_l.loginHandler().toPromise();case 32:this.mediaTaskManager.setAuthInfo({ticket:_l.connection.curOpenSockets.filter(function(t_){return t_!==void 0})[0].ticket,instance:_l.instanceId,useNewDomain:.5<=Math.random(),loginOpt:_l.userJoinOptions.toLong()}),e_.next=44;break;case 35:if(e_.prev=35,e_.t1=e_.catch(29),!Sa(e_.t1)){e_.next=40;break}throw this.onConnectionStateChanged(T.DISCONNECTED,Eb.LOGIN_TIMEOUT),new db(Yd(this.name,"login",2e4),lA);case 40:if(this.onConnectionStateChanged(T.DISCONNECTED,Eb.LOGIN_FAILURE),!sa(e_.t1)){e_.next=43;break}throw e_.t1;case 43:throw new da("Login failure",{code:Zq,originalError:e_.t1});case 44:this.onConnectionStateChanged(T.CONNECTED,Eb.LOGIN_SUCCESS);case 45:case"end":return e_.stop()}},Wt,this,[[6,10],[29,35]])}));return function(Wt){return Vt.apply(this,arguments)}}()},{key:"onConnectionStateChanged",value:function(Vt,Wt){var _i,_s=this;Vt===T.RECONNECTING&&(this.reconnId+=1),eb("ConnectionStateChange",{elapse:fb(this.session&&this.session.startTime),lts:U.fromNumber(Date.now()),newState:os[Vt],oldState:os[this.connectionState],reason:qD[Wt],sid:Xa(this.session&&this.session.instanceId||U.fromNumber(0)),userId:this.context.uid,reconnId:this.reconnId},(_i=this.context.config.enableCloudProxy)!==null&&_i!==void 0&&_i),this.connectionState===T.RECONNECTING&&Vt===T.CONNECTED&&(Object.keys(this.subscribedPeerStatusCache).length!==0&&this.session!==void 0&&this.session.requestPeersOnlineStatus(Object.keys(this.subscribedPeerStatusCache)).pipe(ba(function(_c){return uc(Jk(_c.userInfos,"account"),function(_l){return!!_l.ts})})).subscribe(function(_c){_c=uc(_c,function(_l,_d){return _l=_l?S.PeerOnlineState.ONLINE:S.PeerOnlineState.OFFLINE,_s.subscribedPeerStatusCache[_d]=_l}),_s.emit("PeersOnlineStatusChanged",_c)}),this.internalEmitter.emit("RECONNECTED")),this.connectionState=Vt,Vt!==T.ABORTED&&Vt!==T.DISCONNECTED||(this.reconnId=0,this.attributes={},this.session&&(this.session.removeAllListeners(),this.session.joinedChannels.clear(),this.session.msgDedupLru.empty(),this.session.dialogueSequenceLru.empty(),this.session.dialPendingMsgSubjectMap.clear()),this.session=void 0,this.channelAttributesCacheLru.empty(),this.peerStatusSeqLru.empty(),this.peerUnreachableTimers={},this.subscribedPeerStatusCache={},this.attributeDrafts.clear(),this.context.token=void 0),this.mediaTaskManager.emit("connectionStateChanged",Vt),this.emit("ConnectionStateChanged",Vt,Wt)}}]),_e}(tb()),fa(E.prototype,"renewToken",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"renewToken"),E.prototype),fa(E.prototype,"queryPeersOnlineStatus",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"queryPeersOnlineStatus"),E.prototype),fa(E.prototype,"getChannelMemberCount",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"getChannelMemberCount"),E.prototype),fa(E.prototype,"setLocalUserAttributes",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"setLocalUserAttributes"),E.prototype),fa(E.prototype,"setChannelAttributes",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"setChannelAttributes"),E.prototype),fa(E.prototype,"addOrUpdateLocalUserAttributes",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"addOrUpdateLocalUserAttributes"),E.prototype),fa(E.prototype,"addOrUpdateChannelAttributes",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"addOrUpdateChannelAttributes"),E.prototype),fa(E.prototype,"deleteLocalUserAttributesByKeys",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"deleteLocalUserAttributesByKeys"),E.prototype),fa(E.prototype,"deleteChannelAttributesByKeys",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"deleteChannelAttributesByKeys"),E.prototype),fa(E.prototype,"clearLocalUserAttributes",[Nb],Object.getOwnPropertyDescriptor(E.prototype,"clearLocalUserAttributes"),E.prototype),fa(E.prototype,"clearChannelAttributes",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"clearChannelAttributes"),E.prototype),fa(E.prototype,"getUserAttributes",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"getUserAttributes"),E.prototype),fa(E.prototype,"getChannelAttributes",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"getChannelAttributes"),E.prototype),fa(E.prototype,"getChannelAttributesByKeys",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"getChannelAttributesByKeys"),E.prototype),fa(E.prototype,"getUserAttributesByKeys",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"getUserAttributesByKeys"),E.prototype),fa(E.prototype,"login",[Nb],Object.getOwnPropertyDescriptor(E.prototype,"login"),E.prototype),fa(E.prototype,"logout",[Nb],Object.getOwnPropertyDescriptor(E.prototype,"logout"),E.prototype),fa(E.prototype,"logoutSync",[Nb],Object.getOwnPropertyDescriptor(E.prototype,"logoutSync"),E.prototype),fa(E.prototype,"sendMessageToPeer",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"sendMessageToPeer"),E.prototype),fa(E.prototype,"createChannel",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"createChannel"),E.prototype),fa(E.prototype,"createLocalInvitation",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"createLocalInvitation"),E.prototype),fa(E.prototype,"subscribePeersOnlineStatus",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"subscribePeersOnlineStatus"),E.prototype),fa(E.prototype,"unsubscribePeersOnlineStatus",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"unsubscribePeersOnlineStatus"),E.prototype),fa(E.prototype,"queryPeersBySubscriptionOption",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"queryPeersBySubscriptionOption"),E.prototype),fa(E.prototype,"createMessage",[Nb],Object.getOwnPropertyDescriptor(E.prototype,"createMessage"),E.prototype),fa(E.prototype,"downloadMedia",[Nb],Object.getOwnPropertyDescriptor(E.prototype,"downloadMedia"),E.prototype),fa(E.prototype,"createMediaMessageByUploading",[Nb],Object.getOwnPropertyDescriptor(E.prototype,"createMediaMessageByUploading"),E.prototype),E),ps={LOG_FILTER_OFF:{error:!1,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_ERROR:{error:!0,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_WARNING:{error:!0,warn:!0,info:!1,track:!1,debug:!1},LOG_FILTER_INFO:{error:!0,warn:!0,info:!0,track:!1,debug:!1},LOG_FILTER_DEBUG:{error:!0,warn:!0,info:!0,track:!0,debug:!0}},qs={enableLogUpload:!1,logFilter:ps.LOG_FILTER_INFO,enableCloudProxy:!1},Zd=ua(ua({createInstance:function($){var _e=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},_t=2<arguments.length?arguments[2]:void 0;if(!/^[\dA-Za-z]{32}$/.test($))throw new I(["The %s in the arguments is invalid",Object.keys({appId:$})[0]],Nq);var Vt=Object.keys(_e).filter(function(_m){return!(_m in qs)});if(Vt.length!==0)throw new I("Invalid RTM config: ".concat(Vt.join(", ")),Nq);var Wt=ua(ua({},qs),_e);if(_t!==void 0&&(!Array.isArray(_t)||_t.length===0))throw new I("Invalid area config");if(_t!=null){if(!_t.every(function(_m){return _m in S.LegacyAreaCode}))throw new I("Invalid area codes: ".concat(_t.filter(function(_m){return!(_m in S)}).join(", ")));M=xe(_t.map(function(_m){return zC[_m]}))}_t=jl=Ya.__global_unique_id__=(Ya.__global_unique_id__||0)+1;var _i=DC(Wt);Vt=EC(Wt);var _s=FC(Wt),_c=GC(_t,Wt),_l=Tr(_t,Wt),_d=_l("RTM:DEBUG","<Entry> ");return Mr.rtmConfig=Wt,_i("The Agora RTM Web SDK version is %s","1.4.3-203"),_e.enableCloudProxy&&_i("RTM cloud proxy enabled"),_e.enableLogUpload&&_i("Log upload enabled"),M&&_d("Area is set to %s",Array.from(M.CODES).map(function(_m){return xf(F).find(function(e_){return F[e_]===_m})}).join(", ")),_d("Creating an RtmClient instance"),_d('The Git commit ID is "'.concat("v1.4.3-17-g1e27aa38",'"')),_d("The App ID is %s",Um($,4,10,"*".repeat(6))),_i("The process ID is %s",gg),_d("The build is %s","v1.4.3-17-g1e27aa38"),_d("NODE_ENV is %s","production"),new rD($,{genLogger:_l,genTracker:_c,info:_i,warn:Vt,logError:_s,loggerId:_t},Wt,function(_m){for(var e_=0,t_=xf(_m);e_<t_.length;e_++){var i_=t_[e_];try{var c_=_m[i_];c_!=null&&(_m.enableCloudProxy&&_i("RTM cloud proxy enabled"),_m.enableLogUpload&&_i("Log upload enabled"),Wt[i_]=c_)}catch{throw new I(["The %s in the arguments is invalid",i_],void 0)}}})},BUILD:"v1.4.3-17-g1e27aa38",VERSION:"1.4.3-203",END_CALL_PREFIX:"AgoraRTMLegacyEndcallCompatibleMessagePrefix",processId:gg,ConnectionChangeReason:S.ConnectionChangeReason,ConnectionState:S.ConnectionState,LocalInvitationFailureReason:S.LocalInvitationFailureReason,LocalInvitationState:S.LocalInvitationState,RemoteInvitationFailureReason:S.RemoteInvitationFailureReason,RemoteInvitationState:S.RemoteInvitationState,MessageType:S.MessageType,PeerOnlineState:S.PeerOnlineState,PeerSubscriptionOption:S.PeerSubscriptionOption},ps),{},{setParameter:function($,_e){Object.keys(Nc).includes($)&&(Nc[$]=_e)},getParameter:function($){return Nc[$]},setArea:function($){var _e=$.areaCodes;if($=$.excludedArea,!Array.isArray(_e)||_e.length===0||!_e.every(function(_t){return _t in S.AreaCode}))throw new I("Invalid area config");if($!==void 0&&$===S.AreaCode.GLOBAL)throw new I("Excluded area cannot be global");if($===void 0)M=xe(_e.map(function(_t){return F[_t]}));else{if(_e.includes($))throw new I("Excluded area cannot be in areaCodes");if(!($ in F))throw new I("Invalid excludedArea:",$);M=bu({areas:_e.map(function(_t){return F[_t]}),excludedArea:F[$]})}}});return Zd})})(agoraRtmSdk);const AgoraRTM__default=getDefaultExportFromCjs$1(agoraRtmSdkExports);var createLazyClient=function $(){var _e;function _t(Vt,Wt,_i){return _e||(_e=AgoraRTM__default.createInstance(Vt,Wt,_i)),_e}return function(Vt,Wt,_i){return _t(Vt,Wt,_i)}},createLazyChannel=function $(){var _e;function _t(Vt,Wt){return _e||(_e=Vt.createChannel(Wt)),_e}return function(Vt,Wt){return _t(Vt,Wt)}},AreaCode;(function($){$.GLOBAL="GLOBAL",$.INDIA="INDIA",$.JAPAN="JAPAN",$.ASIA="ASIA",$.EUROPE="EUROPE",$.CHINA="CHINA",$.NORTH_AMERICA="NORTH_AMERICA"})(AreaCode||(AreaCode={}));function _extends(){return _extends=Object.assign||function($){for(var _e=1;_e<arguments.length;_e++){var _t=arguments[_e];for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&($[Vt]=_t[Vt])}return $},_extends.apply(this,arguments)}typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function _catch($,_e){try{var _t=$()}catch(Vt){return _e(Vt)}return _t&&_t.then?_t.then(void 0,_e):_t}var RtcContext=React.createContext({}),RtcProvider=RtcContext.Provider;RtcContext.Consumer;var remoteTrackState;(function($){$[$.yes=0]="yes",$[$.subbed=1]="subbed",$[$.no=2]="no"})(remoteTrackState||(remoteTrackState={}));var layout;(function($){$[$.grid=0]="grid",$[$.pin=1]="pin"})(layout||(layout={}));var ToggleState;(function($){$[$.disabled=0]="disabled",$[$.enabled=1]="enabled",$[$.disabling=2]="disabling",$[$.enabling=3]="enabling"})(ToggleState||(ToggleState={}));var initialValue={rtcProps:{appId:"",channel:"",role:"host"},rtmProps:{}},PropsContext=React.createContext(initialValue),PropsProvider=PropsContext.Provider,MaxUidContext=React.createContext([]),MaxUidProvider=MaxUidContext.Provider,MaxUidConsumer=MaxUidContext.Consumer,MinUidContext=React.createContext([]),MinUidProvider=MinUidContext.Provider,MinUidConsumer=MinUidContext.Consumer,TracksContext=React.createContext({}),TracksProvider=TracksContext.Provider,initState={max:[{uid:0,hasAudio:remoteTrackState.no,hasVideo:remoteTrackState.no}],min:[],isScreensharing:!1},reducer=function $(_e,_t){var Vt=initState,Wt=[].concat(_e.max,_e.min).map(function(_d){return _d.uid});switch(_t.type){case"Screensharing":Vt=_extends({},_e,{isScreensharing:_t.value[0]}),console.log("!Screensharingstate",_e,Vt);break;case"update-user-video":Vt={min:_e.min.map(function(_d){return _d.uid===0?{uid:0,hasAudio:remoteTrackState.subbed,hasVideo:remoteTrackState.subbed}:_d}),max:_e.max.map(function(_d){return _d.uid===0?{uid:0,hasAudio:remoteTrackState.subbed,hasVideo:remoteTrackState.subbed}:_d}),isScreensharing:_e.isScreensharing};break;case"user-joined":if(Wt.indexOf(_t.value[0].uid)===-1){var _i=[].concat(_e.min,[{uid:_t.value[0].uid,hasAudio:remoteTrackState.no,hasVideo:remoteTrackState.no}]);_i.length===1&&_e.max[0].uid===0?Vt={max:_i,min:_e.max,isScreensharing:_e.isScreensharing}:Vt={min:_i,max:_e.max,isScreensharing:_e.isScreensharing}}break;case"user-unpublished":if(_e.max[0].uid===_t.value[0].uid)Vt={max:[{uid:_t.value[0].uid,hasAudio:_t.value[1]==="audio"?remoteTrackState.no:_e.max[0].hasAudio,hasVideo:_t.value[1]==="video"?remoteTrackState.no:_e.max[0].hasVideo}],min:_e.min,isScreensharing:_e.isScreensharing};else{var _s=_e.min.find(function(_d){return _d.uid===_t.value[0].uid});if(_s){var _c=[].concat(_e.min.filter(function(_d){return _d.uid!==_t.value[0].uid}),[{uid:_t.value[0].uid,hasAudio:_t.value[1]==="audio"?remoteTrackState.no:_s.hasAudio,hasVideo:_t.value[1]==="video"?remoteTrackState.no:_s.hasVideo}]);Vt={min:_c,max:_e.max,isScreensharing:_e.isScreensharing}}}break;case"user-published":_e.max[0].uid===_t.value[0].uid?Vt={max:[{uid:_t.value[0].uid,hasAudio:_t.value[1]==="audio"?remoteTrackState.subbed:_e.max[0].hasAudio,hasVideo:_t.value[1]==="video"?remoteTrackState.subbed:_e.max[0].hasVideo}],min:_e.min,isScreensharing:_e.isScreensharing}:Vt={min:_e.min.map(function(_d){return _d.uid!==_t.value[0].uid?_d:{uid:_d.uid,hasAudio:_t.value[1]==="audio"?remoteTrackState.subbed:_d.hasAudio,hasVideo:_t.value[1]==="video"?remoteTrackState.subbed:_d.hasVideo}}),max:_e.max,isScreensharing:_e.isScreensharing};break;case"user-left":if(_e.max[0].uid===_t.value[0].uid){var _l=[].concat(_e.min);Vt={max:[_l.pop()],min:_l,isScreensharing:_e.isScreensharing}}else Vt={min:_e.min.filter(function(_d){return _d.uid!==_t.value[0].uid}),max:_e.max,isScreensharing:_e.isScreensharing};break;case"user-swap":_e.max[0].uid===_t.value[0].uid||(Vt={max:[_t.value[0]],min:[].concat(_e.min.filter(function(_d){return _d.uid!==_t.value[0].uid}),[_e.max[0]]),isScreensharing:_e.isScreensharing});break;case"local-user-mute-video":Vt={min:_e.min.map(function(_d){return _d.uid===0?{uid:0,hasAudio:_d.hasAudio,hasVideo:_t.value[0]}:_d}),max:_e.max.map(function(_d){return _d.uid===0?{uid:0,hasAudio:_d.hasAudio,hasVideo:_t.value[0]}:_d}),isScreensharing:_e.isScreensharing};break;case"local-user-mute-audio":Vt={min:_e.min.map(function(_d){return _d.uid===0?{uid:0,hasAudio:_t.value[0],hasVideo:_d.hasVideo}:_d}),max:_e.max.map(function(_d){return _d.uid===0?{uid:0,hasAudio:_t.value[0],hasVideo:_d.hasVideo}:_d}),isScreensharing:_e.isScreensharing};break;case"remote-user-mute-video":Vt={min:_e.min.map(function(_d){return _d.uid===_t.value[0].uid?{uid:_d.uid,hasVideo:_t.value[1],hasAudio:_d.hasAudio}:_d}),max:_e.max.map(function(_d){return _d.uid===_t.value[0].uid?{uid:_d.uid,hasVideo:_t.value[1],hasAudio:_d.hasAudio}:_d}),isScreensharing:_e.isScreensharing};break;case"remote-user-mute-audio":Vt={min:_e.min.map(function(_d){return _d.uid===_t.value[0].uid?{uid:_d.uid,hasAudio:_t.value[1],hasVideo:_d.hasVideo}:_d}),max:_e.max.map(function(_d){return _d.uid===_t.value[0].uid?{uid:_d.uid,hasAudio:_t.value[1],hasVideo:_d.hasVideo}:_d}),isScreensharing:_e.isScreensharing};break;case"leave-channel":Vt=initState;break;case"ActiveSpeaker":_e.max[0].uid===_t.value[0]?Vt=_extends({},_e):Vt={max:[_e.min.find(function(_d){return _d.uid===_t.value[0]})],min:[].concat(_e.min.filter(function(_d){return _d.uid!==_t.value[0]}),[_e.max[0]]),isScreensharing:_e.isScreensharing};break}return console.log("!state-update",_extends({},_e,Vt),Vt),_extends({},_e,Vt)},startScreenshare=function $(_e,_t,Vt,Wt,_i,_s,_c){try{var _l=function(){try{try{console.log(e_),_s&&(e_.on("token-privilege-will-expire",function(){try{return console.log("token will expire"),Promise.resolve(fetch(_s+"/rtc/"+_t+"/publisher/uid/"+i_+"/")).then(function(l_){return Promise.resolve(l_.json()).then(function(d_){var f_=d_.rtcToken;e_.renewToken(f_)})})}catch(l_){return Promise.reject(l_)}}),e_.on("token-privilege-did-expire",function(){try{return Promise.resolve(fetch(_s+"/rtc/"+_t+"/publisher/uid/"+i_+"/")).then(function(l_){return Promise.resolve(l_.json()).then(function(d_){var f_=d_.rtcToken;e_.renewToken(f_)})})}catch(l_){return Promise.reject(l_)}})),Vt.on("track-ended",function(){e_.leave(),e_.removeAllListeners()})}catch(l_){console.log(l_)}return Promise.resolve()}catch(l_){return Promise.reject(l_)}},_d=function(){try{e_.setClientRole("host");var l_=function(){if(_s){var d_=_catch(function(){return Promise.resolve(fetch(_s+"/rtc/"+_t+"/publisher/uid/"+i_+"/")).then(function(f_){return Promise.resolve(f_.json()).then(function(S_){var T_=S_.rtcToken;return Promise.resolve(e_.join(_e,_t,T_,i_)).then(function(R_){t_=R_})})})},function(f_){console.log(f_)});if(d_&&d_.then)return d_.then(function(){})}else return Promise.resolve(e_.join(_e,_t,Wt||null,i_||0)).then(function(f_){t_=f_})}();return Promise.resolve(l_&&l_.then?l_.then(function(){}):void 0)}catch(d_){return Promise.reject(d_)}},_m=function(){try{var l_=function(){var S_=function(){if(Vt.enabled){var T_=function(){if(!c_)return Promise.resolve(e_.publish([Vt]).then(function(){c_=!0})).then(function(){})}();if(T_&&T_.then)return T_.then(function(){})}}();if(S_&&S_.then)return S_.then(function(){})},d_=function(){if(_c)return Promise.resolve(e_.enableDualStream()).then(function(){})}();return Promise.resolve(d_&&d_.then?d_.then(l_):l_(d_))}catch(f_){return Promise.reject(f_)}},e_=AgoraRTC__default.createClient({mode:"live",role:"host",codec:"vp8"}),t_=0,i_=_i||1,c_=!1,h_=function(){try{var l_=_catch(function(){return Vt.close(),Promise.resolve(e_.leave()).then(function(){e_.removeAllListeners()})},function(d_){console.log(d_)});return Promise.resolve(l_&&l_.then?l_.then(function(){}):void 0)}catch(d_){return Promise.reject(d_)}};return stopScreenshare=h_,Promise.resolve(_l()).then(function(){return Promise.resolve(_d()).then(function(){return Promise.resolve(_m()).then(function(){t_&&console.log(t_)})})})}catch(y_){return Promise.reject(y_)}},stopScreenshare=function $(){},useClient=createClient({codec:"vp8",mode:"live"}),RtcConfigure=function $(_e){var _t=reactExports.useRef(),Vt=reactExports.useRef(),Wt=reactExports.useRef(!1),_i=reactExports.useContext(TracksContext),_s=_i.localVideoTrack,_c=_i.localAudioTrack,_l=reactExports.useContext(PropsContext),_d=_l.callbacks,_m=_l.rtcProps,e_=reactExports.useState(!1),t_=e_[0],i_=e_[1],c_=reactExports.useState(!1),h_=c_[0],y_=c_[1],l_=null,d_=reactExports.useRef(new Promise(function(q_,G_){l_=q_,console.log(G_)})),f_=useClient();_m.customRtcClient&&(f_.removeAllListeners(),f_=_m.customRtcClient);var S_=!1,T_=!1,R_=reactExports.useRef({}),C_=_e.callActive;C_===void 0&&(C_=!0);var j_=reactExports.useReducer(reducer,initState),W_=j_[0],A_=j_[1];reactExports.useEffect(function(){var q_=function(){try{try{if(console.log(f_),f_.on("user-joined",function(){try{for(var B_=arguments.length,Q_=new Array(B_),K_=0;K_<B_;K_++)Q_[K_]=arguments[K_];var rE=Q_[0];return rE.uid===_e.screenshareUid&&Wt.current||rE.uid===1&&Wt.current||(R_.current[rE.uid]={}),A_({type:"user-joined",value:Q_}),Promise.resolve()}catch(aE){return Promise.reject(aE)}}),f_.on("user-published",function(){for(var B_=arguments.length,Q_=new Array(B_),K_=0;K_<B_;K_++)Q_[K_]=arguments[K_];try{var rE=Q_[0],aE=Q_[1];return console.log("user-published",rE.uid),rE.uid===_e.screenshareUid&&Wt.current||rE.uid===1&&Wt.current?A_({type:"user-published",value:Q_}):f_.subscribe(rE,aE).then(function(gE){if(R_.current[rE.uid][aE+"Track"]=rE[aE+"Track"],aE==="audio"){var kE;(kE=rE.audioTrack)===null||kE===void 0||kE.play()}else _m.enableDualStream&&_m.dualStreamMode&&f_.setStreamFallbackOption(rE.uid,_m.dualStreamMode);A_({type:"user-published",value:Q_})}).catch(function(gE){return console.log(gE)}),Promise.resolve()}catch(gE){return Promise.reject(gE)}}),f_.on("user-unpublished",function(){try{for(var B_=arguments.length,Q_=new Array(B_),K_=0;K_<B_;K_++)Q_[K_]=arguments[K_];var rE=Q_[0],aE=Q_[1];if(console.log("user-unpublished",rE.uid),aE==="audio"){var gE;(gE=rE.audioTrack)===null||gE===void 0||gE.stop()}return A_({type:"user-unpublished",value:Q_}),Promise.resolve()}catch(kE){return Promise.reject(kE)}}),f_.on("connection-state-change",function(){try{for(var B_=arguments.length,Q_=new Array(B_),K_=0;K_<B_;K_++)Q_[K_]=arguments[K_];var rE=Q_[0],aE=Q_[1],gE=Q_[2];if(console.log("connection",aE,rE,gE),rE==="CONNECTED")y_(!0);else if(rE==="DISCONNECTED"){try{stopScreenshare(),Wt.current=!1}catch(kE){console.log("stopscreenshare",kE)}A_({type:"leave-channel",value:null})}else y_(!1);return Promise.resolve()}catch(kE){return Promise.reject(kE)}}),f_.on("user-left",function(){for(var B_=arguments.length,Q_=new Array(B_),K_=0;K_<B_;K_++)Q_[K_]=arguments[K_];A_({type:"user-left",value:Q_})}),_m.tokenUrl){var I_=_m.tokenUrl,x_=_m.channel,Y_=_m.uid;f_.on("token-privilege-will-expire",function(){try{return console.log("token will expire"),Promise.resolve(fetch(I_+"/rtc/"+x_+"/publisher/uid/"+(Y_||0)+"/")).then(function(B_){return Promise.resolve(B_.json()).then(function(Q_){var K_=Q_.rtcToken;f_.renewToken(K_)})})}catch(B_){return Promise.reject(B_)}}),f_.on("token-privilege-did-expire",function(){try{return Promise.resolve(fetch(I_+"/rtc/"+x_+"/publisher/uid/"+(Y_||0)+"/")).then(function(B_){return Promise.resolve(B_.json()).then(function(Q_){var K_=Q_.rtcToken;f_.renewToken(K_)})})}catch(B_){return Promise.reject(B_)}})}if(_d){var z_=Object.keys(_d);z_.map(function(B_){try{f_.on(B_,function(){for(var Q_=arguments.length,K_=new Array(Q_),rE=0;rE<Q_;rE++)K_[rE]=arguments[rE];_d[B_].apply(null,K_)})}catch(Q_){console.log(Q_)}})}l_(!0),i_(!0)}catch(B_){console.log("!!!",B_)}return Promise.resolve()}catch(B_){return Promise.reject(B_)}};return l_?(q_(),function(){try{f_.removeAllListeners()}catch(G_){console.log(G_)}}):function(){}},[_m.appId]),reactExports.useEffect(function(){var q_=function(){try{return Promise.resolve(d_.current).then(function(){var x_=_m.tokenUrl,Y_=_m.channel,z_=_m.uid,B_=_m.appId,Q_=_m.token,K_=function(){if(f_&&!G_){_m.role==="audience"?f_.setClientRole(_m.role):f_.setClientRole("host");var rE=function(){if(x_){var aE=_catch(function(){return Promise.resolve(fetch(x_+"/rtc/"+Y_+"/publisher/uid/"+(z_||0)+"/")).then(function(gE){return Promise.resolve(gE.json()).then(function(kE){var xE=kE.rtcToken;return Promise.resolve(f_.join(B_,Y_,xE,z_||0)).then(function(YE){_t.current=YE})})})},function(gE){console.log(gE)});if(aE&&aE.then)return aE.then(function(){})}else return Promise.resolve(f_.join(B_,Y_,Q_||null,z_||0)).then(function(gE){_t.current=gE})}();if(rE&&rE.then)return rE.then(function(){})}else console.error("trying to join before RTC Engine was initialized")}();if(K_&&K_.then)return K_.then(function(){})})}catch(x_){return Promise.reject(x_)}},G_=!1;return C_?(q_(),console.log("Attempted join: ",_m.channel)):console.log("In precall - waiting to join"),function(){if(G_=!0,C_){console.log("Leaving channel");try{stopScreenshare(),Wt.current=!1}catch(I_){console.log(I_)}d_.current=f_.leave().catch(function(I_){return console.log(I_)})}}},[_m.channel,_m.uid,C_,_m.tokenUrl]),reactExports.useEffect(function(){var q_=function(){try{var I_=function(){function z_(){var Q_=function(){if(_s!=null&&_s.enabled&&h_){var K_=function(){if(!S_)return Promise.resolve(f_.publish([_s]).then(function(){S_=!0})).then(function(){})}();if(K_&&K_.then)return K_.then(function(){})}}();if(Q_&&Q_.then)return Q_.then(function(){})}var B_=function(){if(_c!=null&&_c.enabled&&h_){var Q_=function(){if(!T_)return Promise.resolve(f_.publish([_c]).then(function(){T_=!0})).then(function(){})}();if(Q_&&Q_.then)return Q_.then(function(){})}}();return B_&&B_.then?B_.then(z_):z_(B_)},x_=function(){if(_m.enableDualStream)return Promise.resolve(f_.enableDualStream()).then(function(){})}();return Promise.resolve(x_&&x_.then?x_.then(I_):I_(x_))}catch(Y_){return Promise.reject(Y_)}};console.log("Publish",_s,_c,C_),C_&&q_()},[C_,_s==null?void 0:_s.enabled,_c==null?void 0:_c.enabled,h_]),reactExports.useEffect(function(){_s&&_c!==null&&(R_.current[0]={audioTrack:_c,videoTrack:_s},A_({type:"update-user-video",value:[_c,_s]}))},[_m.channel,h_]),reactExports.useEffect(function(){h_&&_m.token&&f_.renewToken(_m.token).then(function(q_){return console.log("renewed token",q_)})},[_m.token,h_]),reactExports.useEffect(function(){_m.role&&f_.setClientRole(_m.role).then(function(q_){return console.log("changed role",q_)})},[_m.role,h_]),reactExports.useEffect(function(){var q_=function(){try{var I_=function(){if(_m.activeSpeaker&&_m.layout!==layout.grid)return f_.on("volume-indicator",function(x_){var Y_=x_.reduce(function(Q_,K_){return Q_===null||K_.level>Q_.level?K_:Q_},null),z_=Y_?Y_.uid:void 0,B_=z_===_t.current?0:z_;z_!==void 0&&A_({type:"ActiveSpeaker",value:[B_]})}),Promise.resolve(f_.enableAudioVolumeIndicator()).then(function(){})}();return Promise.resolve(I_&&I_.then?I_.then(function(){}):void 0)}catch(x_){return Promise.reject(x_)}};return C_&&q_(),function(){f_.removeAllListeners("volume-indicator")}},[_m.activeSpeaker,_m.layout]);var $_=function(){try{var G_=function(){try{return A_({type:"Screensharing",value:[!0]}),Promise.resolve(AgoraRTC__default.createScreenVideoTrack({},"disable")).then(function(Y_){Vt.current=Y_;var z_=_m.screenshareUid||1;return R_.current[z_]={videoTrack:Vt.current},Vt.current.on("track-ended",function(){Wt.current=!1,A_({type:"Screensharing",value:[!1]})}),Wt.current=!0,Promise.resolve(startScreenshare(_m.appId,_m.channel,Vt.current,_m.screenshareToken,_m.screenshareUid,_m.tokenUrl,_m.enableDualStream)).then(function(){})})}catch(Y_){return Promise.reject(Y_)}},I_=function(){stopScreenshare(),Wt.current=!1};return Wt.current?I_():G_(),Promise.resolve()}catch(x_){return Promise.reject(x_)}};return React.createElement(RtcProvider,{value:{client:f_,mediaStore:R_.current,localVideoTrack:_s,localAudioTrack:_c,dispatch:A_,localUid:_t,channelJoined:h_,toggleScreensharing:$_,isScreensharing:Wt.current}},React.createElement(MaxUidProvider,{value:W_.max},React.createElement(MinUidProvider,{value:W_.min},t_?_e.children:null)))},icons={videocam:React.createElement(React.Fragment,null,React.createElement("polygon",{points:"23 7 16 12 23 17 23 7"}),React.createElement("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})),videocamOff:React.createElement(React.Fragment,null,React.createElement("path",{d:"M16 16v1a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2m5.66 0H14a2 2 0 0 1 2 2v3.34l1 1L23 7v10"}),React.createElement("line",{x1:"1",y1:"1",x2:"23",y2:"23"})),remoteSwap:React.createElement(React.Fragment,null,React.createElement("polyline",{points:"15 3 21 3 21 9"}),React.createElement("polyline",{points:"9 21 3 21 3 15"}),React.createElement("line",{x1:"21",y1:"3",x2:"14",y2:"10"}),React.createElement("line",{x1:"3",y1:"21",x2:"10",y2:"14"})),callEnd:React.createElement(React.Fragment,null,React.createElement("path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91"}),React.createElement("line",{x1:"23",y1:"1",x2:"1",y2:"23"})),mic:React.createElement(React.Fragment,null,React.createElement("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),React.createElement("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),React.createElement("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),React.createElement("line",{x1:"8",y1:"23",x2:"16",y2:"23"})),micOff:React.createElement(React.Fragment,null,React.createElement("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),React.createElement("path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"}),React.createElement("path",{d:"M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"}),React.createElement("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),React.createElement("line",{x1:"8",y1:"23",x2:"16",y2:"23"})),screen:React.createElement(React.Fragment,null,React.createElement("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),React.createElement("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),React.createElement("line",{x1:"12",y1:"17",x2:"12",y2:"21"})),stop:React.createElement(React.Fragment,null,React.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),React.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))},BtnTemplate=function $(_e){var _t=_e.onClick,Vt=_e.name,Wt=_e.disabled,_i=_e.style,_s=reactExports.useContext(PropsContext),_c=_s.styleProps,_l=_c||{},_d=_l.theme,_m=_l.BtnTemplateStyles,e_=_l.iconSize,t_=_l.customIcon;return React.createElement("div",{style:_extends({},{width:35,height:35,borderRadius:"100%",borderWidth:2,borderStyle:"solid",borderColor:"#fff",backgroundColor:"rgba(0,80,180,0.2)",alignItems:"center",justifyContent:"center",display:"flex",cursor:Wt?"auto":"pointer",margin:4},_m,_i),onClick:_t},t_?React.createElement("img",{src:t_[Vt],alt:Vt}):React.createElement("svg",{style:{width:e_||24,height:e_||24},xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",opacity:Wt?"0.5":"1",stroke:_d||"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},icons[Vt]))};function EndCall(){var $=reactExports.useContext(PropsContext),_e=$.styleProps,_t=$.callbacks,Vt=_e||{},Wt=Vt.localBtnStyles,_i=Wt||{},_s=_i.endCall;return React.createElement(BtnTemplate,{style:_s||{backgroundColor:"#ef5588",borderColor:"#f00"},name:"callEnd",onClick:function(){return(_t==null?void 0:_t.EndCall)&&_t.EndCall()}})}var LocalContext=reactExports.createContext({}),LocalUserContext=function $(_e){var _t=reactExports.useContext(MaxUidContext),Vt=reactExports.useContext(MinUidContext),Wt;return _t[0].uid===0?Wt=_t[0]:Wt=Vt.find(function(_i){return _i.uid===0}),React.createElement(LocalContext.Provider,{value:Wt},_e.children)},muteAudio=function($,_e,_t,Vt){try{var Wt=function(){if($.uid===0){var _i=$.hasAudio,_s=function(){if(_i===ToggleState.enabled||_i===ToggleState.disabled){var _c=_i===ToggleState.enabled?ToggleState.disabling:ToggleState.enabling;_e({type:"local-user-mute-audio",value:[_c]}),Vt&&Vt["local-user-mute-audio"]&&Vt["local-user-mute-audio"](_c);var _l=_catch(function(){return Promise.resolve(_t==null?void 0:_t.setEnabled(_i!==ToggleState.enabled)).then(function(){_c=_i===ToggleState.enabled?ToggleState.disabled:ToggleState.enabled,Vt&&Vt["local-user-mute-audio"]&&Vt["local-user-mute-audio"](_c),_e({type:"local-user-mute-audio",value:[_i===ToggleState.enabled?ToggleState.disabled:ToggleState.enabled]})})},function(){_e({type:"local-user-mute-audio",value:[_i]})});if(_l&&_l.then)return _l.then(function(){})}}();if(_s&&_s.then)return _s.then(function(){})}}();return Promise.resolve(Wt&&Wt.then?Wt.then(function(){}):void 0)}catch(_i){return Promise.reject(_i)}};function LocalAudioMute(){var $=reactExports.useContext(PropsContext),_e=$.styleProps,_t=$.callbacks,Vt=_e||{},Wt=Vt.localBtnStyles,_i=Wt||{},_s=_i.muteLocalAudio,_c=reactExports.useContext(RtcContext),_l=_c.dispatch,_d=_c.localAudioTrack,_m=reactExports.useContext(LocalContext);return React.createElement("div",null,React.createElement(BtnTemplate,{style:_s,name:_m.hasAudio===ToggleState.enabled?"mic":"micOff",onClick:function(){return _d&&muteAudio(_m,_l,_d,_t)}}))}function Screenshare(){var $=reactExports.useContext(PropsContext),_e=$.styleProps,_t=_e||{},Vt=_t.localBtnStyles,Wt=Vt||{},_i=Wt.screenshare,_s=reactExports.useContext(RtcContext),_c=_s.toggleScreensharing,_l=_s.isScreensharing;return React.createElement("div",null,React.createElement(BtnTemplate,{style:_i,name:_l?"stop":"screen",onClick:function(){return _c()}}))}var muteVideo=function($,_e,_t,Vt){try{var Wt=function(){if($.uid===0){var _i=$.hasVideo,_s=function(){if(_i===ToggleState.enabled||_i===ToggleState.disabled){var _c=_i===ToggleState.enabled?ToggleState.disabling:ToggleState.enabling;_e({type:"local-user-mute-video",value:[_c]}),Vt&&Vt["local-user-mute-video"]&&Vt["local-user-mute-video"](_c);var _l=_catch(function(){return Promise.resolve(_t==null?void 0:_t.setEnabled(_i!==ToggleState.enabled)).then(function(){_c=_i===ToggleState.enabled?ToggleState.disabled:ToggleState.enabled,Vt&&Vt["local-user-mute-video"]&&Vt["local-user-mute-video"](_c),_e({type:"local-user-mute-video",value:[_c]})})},function(){_e({type:"local-user-mute-video",value:[_i]})});if(_l&&_l.then)return _l.then(function(){})}}();if(_s&&_s.then)return _s.then(function(){})}}();return Promise.resolve(Wt&&Wt.then?Wt.then(function(){}):void 0)}catch(_i){return Promise.reject(_i)}};function LocalVideoMute(){var $=reactExports.useContext(PropsContext),_e=$.styleProps,_t=$.callbacks,Vt=_e||{},Wt=Vt.localBtnStyles,_i=Wt||{},_s=_i.muteLocalVideo,_c=reactExports.useContext(RtcContext),_l=_c.dispatch,_d=_c.localVideoTrack,_m=reactExports.useContext(LocalContext);return React.createElement("div",null,React.createElement(BtnTemplate,{style:_s,name:_m.hasVideo===ToggleState.enabled?"videocam":"videocamOff",onClick:function(){return _d&&muteVideo(_m,_l,_d,_t)}}))}function LocalControls(){var $=reactExports.useContext(PropsContext),_e=$.styleProps,_t=$.rtcProps,Vt=_e||{},Wt=Vt.localBtnContainer;return React.createElement("div",{style:_extends({},{backgroundColor:"#007bff",width:"100%",height:70,zIndex:10,display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"},Wt)},_t.role!=="audience"&&React.createElement(LocalVideoMute,null),_t.role!=="audience"&&React.createElement(LocalAudioMute,null),_t.role!=="audience"&&_t.enableScreensharing&&React.createElement(Screenshare,null),React.createElement(EndCall,null))}var rtmStatusEnum;(function($){$[$.initFailed=0]="initFailed",$[$.offline=1]="offline",$[$.initialising=2]="initialising",$[$.loggingIn=3]="loggingIn",$[$.loggedIn=4]="loggedIn",$[$.connected=5]="connected",$[$.loginFailed=6]="loginFailed"})(rtmStatusEnum||(rtmStatusEnum={}));var clientRoleRaw;(function($){$[$.broadcaster=0]="broadcaster",$[$.audience=1]="audience"})(clientRoleRaw||(clientRoleRaw={}));var mutingDevice;(function($){$[$.camera=0]="camera",$[$.microphone=1]="microphone"})(mutingDevice||(mutingDevice={}));var popUpStateEnum;(function($){$[$.closed=0]="closed",$[$.muteMic=1]="muteMic",$[$.muteCamera=2]="muteCamera",$[$.unmuteMic=3]="unmuteMic",$[$.unmuteCamera=4]="unmuteCamera"})(popUpStateEnum||(popUpStateEnum={}));var RtmContext=reactExports.createContext(null),RtmProvider=RtmContext.Provider;RtmContext.Consumer;function RemoteVideoMute($){var _e=reactExports.useContext(PropsContext),_t=_e.styleProps,Vt=reactExports.useContext(RtmContext),Wt=Vt.sendMuteRequest,_i=Vt.uidMap,_s=_t||{},_c=_s.remoteBtnStyles,_l=_c||{},_d=_l.muteRemoteVideo,_m=$.UIKitUser,e_=_m.hasVideo===remoteTrackState.no;return _m.uid!==0&&_i[_m.uid]?React.createElement("div",null,React.createElement(BtnTemplate,{name:_m.hasVideo===remoteTrackState.subbed?"videocam":"videocamOff",style:_d,onClick:function(){return Wt(mutingDevice.camera,_m.uid,!e_)}})):null}function RemoteAudioMute($){var _e=reactExports.useContext(PropsContext),_t=_e.styleProps,Vt=_t||{},Wt=Vt.remoteBtnStyles,_i=reactExports.useContext(RtmContext),_s=_i.sendMuteRequest,_c=_i.uidMap,_l=Wt||{},_d=_l.muteRemoteAudio,_m=$.UIKitUser,e_=_m.hasAudio===remoteTrackState.no;return _m.uid!==0&&_c[_m.uid]?React.createElement("div",null,React.createElement(BtnTemplate,{style:_d,name:_m.hasAudio===remoteTrackState.subbed?"mic":"micOff",onClick:function(){return _s(mutingDevice.microphone,_m.uid,!e_)}})):null}function SwapUser($){var _e=reactExports.useContext(RtcContext),_t=_e.dispatch,Vt=$.UIKitUser;return React.createElement("div",null,React.createElement(BtnTemplate,{name:"remoteSwap",onClick:function(){return _t({type:"user-swap",value:[Vt]})}}))}var VideoPlaceholder=function $(_e){var _t=reactExports.useContext(PropsContext),Vt=_t.styleProps,Wt=_t.rtcProps,_i=Vt||{},_s=_i.maxViewStyles,_c=_i.maxViewOverlayContainer,_l=_e.user,_d=Wt.CustomVideoPlaceholder;return _d?_d&&_d(_extends({},_e),null):React.createElement("div",{key:_l.uid,style:_extends({},style.max,_s)},React.createElement("div",{style:style.imgContainer},React.createElement("img",{style:style.img,src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJmZWF0aGVyIGZlYXRoZXItdXNlciI+PHBhdGggZD0iTTIwIDIxdi0yYTQgNCAwIDAgMC00LTRIOGE0IDQgMCAwIDAtNCA0djIiPjwvcGF0aD48Y2lyY2xlIGN4PSIxMiIgY3k9IjciIHI9IjQiPjwvY2lyY2xlPjwvc3ZnPg=="})),_e.isShown&&React.createElement("div",{style:_extends({},style.btnContainer,_c)},_e.showButtons&&React.createElement(React.Fragment,null,!Wt.disableRtm&&React.createElement(RemoteVideoMute,{UIKitUser:_l}),!Wt.disableRtm&&React.createElement(RemoteAudioMute,{UIKitUser:_l}),_e.showSwap&&React.createElement(SwapUser,{UIKitUser:_l}))))},style={max:{flex:1,display:"flex",backgroundColor:"#007bff33",flexDirection:"row",position:"relative"},imgContainer:{flex:10,display:"flex",justifyContent:"center"},img:{width:100,height:100,position:"absolute",alignSelf:"center",justifySelf:"center",margin:"auto",display:"flex"},btnContainer:{position:"absolute",margin:5,flexDirection:"column",display:"flex"}},Username=function $(_e){var _t=reactExports.useContext(RtmContext),Vt=_t.usernames,Wt=reactExports.useContext(PropsContext),_i=Wt.rtmProps,_s=Wt.styleProps,_c=_e.user;return _i!=null&&_i.displayUsername?React.createElement("p",{style:_extends({},styles.username,_s==null?void 0:_s.usernameText)},_c.uid===1?"Screenshare":Vt[_c.uid]):React.createElement(React.Fragment,null)},styles={username:{position:"absolute",background:"#007bffaa",padding:"2px 8px",color:"#fff",margin:0,bottom:0,right:0,zIndex:90}},MaxVideoView=function $(_e){var _t=reactExports.useContext(RtcContext),Vt=_t.mediaStore,Wt=reactExports.useContext(PropsContext),_i=Wt.styleProps,_s=Wt.rtcProps,_c=_i||{},_l=_c.maxViewStyles,_d=_c.videoMode,_m=_c.maxViewOverlayContainer,e_=_d==null?void 0:_d.max,t_=reactExports.useState(!1),i_=t_[0],c_=t_[1],h_=_e.user;return React.createElement("div",{style:_extends({},styles$1.container,_e.style,_l),onMouseEnter:function(){return c_(!0)},onMouseLeave:function(){return c_(!1)}},h_.hasVideo===1?React.createElement("div",{style:styles$1.videoContainer},!_s.disableRtm&&React.createElement(Username,{user:h_}),React.createElement(AgoraVideoPlayer,{style:styles$1.videoplayer,config:{fit:e_||"cover"},videoTrack:Vt[h_.uid].videoTrack}),i_&&React.createElement("div",{style:_extends({},styles$1.overlay,_m)},!_s.disableRtm&&React.createElement(RemoteVideoMute,{UIKitUser:h_}),!_s.disableRtm&&React.createElement(RemoteAudioMute,{UIKitUser:h_}))):React.createElement("div",{style:styles$1.videoContainer},!_s.disableRtm&&React.createElement(Username,{user:h_}),React.createElement(VideoPlaceholder,{user:h_,isShown:i_,showButtons:!0})))},styles$1={container:{display:"flex",flex:1},videoContainer:{display:"flex",flex:1,position:"relative"},videoplayer:{width:"100%",display:"flex",flex:1},overlay:{position:"absolute",margin:5,flexDirection:"column",display:"flex"},username:{position:"absolute",background:"#007bffaa",padding:"2px 8px",color:"#fff",margin:0,bottom:0,right:0,zIndex:90}},MinVideoView=function $(_e){var _t=reactExports.useContext(RtcContext),Vt=_t.mediaStore,Wt=reactExports.useContext(PropsContext),_i=Wt.styleProps,_s=Wt.rtcProps,_c=_i||{},_l=_c.minViewStyles,_d=_c.videoMode,_m=_c.minViewOverlayContainer,e_=_d==null?void 0:_d.min,t_=reactExports.useState(!1),i_=t_[0],c_=t_[1],h_=_e.user;return React.createElement("div",{style:_extends({},{display:"flex",flex:1},_l),onMouseEnter:function(){return c_(!0)},onMouseLeave:function(){return c_(!1)}},h_.hasVideo===1?React.createElement("div",{style:_extends({},{display:"flex",flex:1,position:"relative"})},React.createElement(AgoraVideoPlayer,{style:{flex:10,display:"flex"},config:{fit:e_!==void 0?e_:"cover"},videoTrack:Vt[h_.uid].videoTrack}),i_&&React.createElement("div",{style:_extends({},{margin:4,position:"absolute",flex:1,display:"flex",flexDirection:"column"},_m)},!_s.disableRtm&&React.createElement(RemoteVideoMute,{UIKitUser:h_}),!_s.disableRtm&&React.createElement(RemoteAudioMute,{UIKitUser:h_}),React.createElement(SwapUser,{UIKitUser:h_}))):React.createElement(VideoPlaceholder,{user:h_,isShown:i_,showButtons:!0,showSwap:!0}))},styles$2={test:"_3ybTi",scrollbar:"_3Sxu7"},PinnedVideo=function $(){var _e=reactExports.useContext(PropsContext),_t=_e.styleProps,Vt=_e.rtcProps,Wt=_t||{},_i=Wt.minViewContainer,_s=Wt.pinnedVideoContainer,_c=Wt.maxViewContainer,_l=Wt.scrollViewContainer,_d=reactExports.useRef(null),_m=reactExports.useState(0),e_=_m[0],t_=_m[1],i_=reactExports.useState(0),c_=i_[0],h_=i_[1],y_=e_>c_;return reactExports.useEffect(function(){var l_=function(){_d.current&&(t_(_d.current.offsetWidth),h_(_d.current.offsetHeight))};return window.addEventListener("resize",l_),_d.current&&(t_(_d.current.offsetWidth),h_(_d.current.offsetHeight)),function(){window.removeEventListener("resize",l_)}},[]),React.createElement("div",{ref:_d,style:_extends({},{display:"flex",flex:1,flexDirection:y_?"row":"column-reverse",overflow:"hidden"},_s)},React.createElement("div",{style:_extends({},{display:"flex",flex:y_?5:4},_c)},React.createElement(MaxUidConsumer,null,function(l_){return Vt.role==="audience"&&l_[0].uid===0?null:React.createElement(MaxVideoView,{user:l_[0]})})),React.createElement("div",{className:styles$2.scrollbar,style:_extends({},{overflowY:y_?"scroll":"hidden",overflowX:y_?"hidden":"scroll",display:"flex",flex:1,flexDirection:y_?"column":"row"},_l)},React.createElement(MinUidConsumer,null,function(l_){return l_.map(function(d_){return Vt.role==="audience"&&d_.uid===0?null:React.createElement("div",{style:_extends({},{minHeight:y_?"35vh":"99%",minWidth:y_?"99%":"40vw",margin:2,display:"flex"},_i),key:d_.uid},React.createElement(MinVideoView,{user:d_}))})})))},GridVideo=function $(){var _e=reactExports.useContext(PropsContext),_t=_e.styleProps,Vt=_e.rtcProps,Wt=_t||{},_i=Wt.gridVideoCells,_s=Wt.gridVideoContainer,_c=reactExports.useContext(MaxUidContext),_l=reactExports.useContext(MinUidContext),_d=Vt.role==="audience"?[].concat(_c,_l).filter(function(f_){return f_.uid!==0}):[].concat(_c,_l),_m=reactExports.useRef(null),e_=reactExports.useState(window.innerWidth),t_=e_[0],i_=e_[1],c_=reactExports.useState(window.innerHeight),h_=c_[0],y_=c_[1],l_=t_>h_,d_="minmax(0, 1fr) ";return reactExports.useEffect(function(){var f_=function(){_m.current&&(i_(_m.current.offsetWidth),y_(_m.current.offsetHeight))};return window.addEventListener("resize",f_),_m.current&&(i_(_m.current.offsetWidth),y_(_m.current.offsetHeight)),function(){window.removeEventListener("resize",f_)}},[]),React.createElement("div",{ref:_m,style:_extends({},{width:"100%",height:"100%",display:"grid",gridTemplateColumns:l_?_d.length>9?d_.repeat(4):_d.length>4?d_.repeat(3):_d.length>1?d_.repeat(2):d_:_d.length>8?d_.repeat(3):_d.length>2?d_.repeat(2):d_},_s)},_d.map(function(f_){return React.createElement(MaxVideoView,{user:f_,style:_extends({},{height:"100%",width:"100%"},_i),key:f_.uid})}))},useTracks=createMicrophoneAndCameraTracks({encoderConfig:{}},{encoderConfig:{}}),TracksConfigure=function $(_e){var _t=reactExports.useState(!1),Vt=_t[0],Wt=_t[1],_i=reactExports.useState(null),_s=_i[0],_c=_i[1],_l=reactExports.useState(null),_d=_l[0],_m=_l[1],e_=useTracks(),t_=e_.ready,i_=e_.tracks,c_=e_.error,h_=reactExports.useRef({});return reactExports.useEffect(function(){return i_!==null?(_m(i_[0]),_c(i_[1]),h_.current[0]={audioTrack:i_[0],videoTrack:i_[1]},Wt(!0)):c_&&(console.error(c_),Wt(!1)),function(){if(i_){var y_,l_;(y_=i_[0])===null||y_===void 0||y_.close(),(l_=i_[1])===null||l_===void 0||l_.close()}}},[t_,c_]),React.createElement(TracksProvider,{value:{localVideoTrack:_s,localAudioTrack:_d}},Vt?_e.children:null)},timeNow=function $(){return new Date().getTime()},useChannel=createLazyChannel(),useClient$1=createLazyClient(),RtmConfigure=function $(_e){var _t=reactExports.useContext(PropsContext),Vt=_t.rtcProps,Wt=_t.rtmProps,_i=reactExports.useState(!1),_s=_i[0],_c=_i[1],_l=useClient$1(Vt.appId),_d=useChannel(_l,Vt.channel),_m=reactExports.useRef(""),e_=reactExports.useRef(5),t_=reactExports.useContext(LocalContext),i_=reactExports.useContext(PropsContext),c_=i_.rtmCallbacks,h_=reactExports.useState({}),y_=h_[0],l_=h_[1],d_=reactExports.useState({}),f_=d_[0],S_=d_[1],T_=reactExports.useState({}),R_=T_[0],C_=T_[1],j_=reactExports.useState(popUpStateEnum.closed),W_=j_[0],A_=j_[1],$_=reactExports.useState(rtmStatusEnum.offline),q_=$_[0],G_=$_[1],I_=reactExports.useContext(RtcContext),x_=I_.localUid,Y_=I_.localAudioTrack,z_=I_.localVideoTrack,B_=I_.dispatch,Q_=I_.channelJoined,K_=function f0(){try{var $E=Vt.tokenUrl,m0=function(){if($E){var SE=_catch(function(){return Promise.resolve(fetch($E+"/rtm/"+((Wt==null?void 0:Wt.uid)||_m.current))).then(function(N0){return Promise.resolve(N0.json()).then(function(K0){var RE=K0.rtmToken;return Promise.resolve(_l.login({uid:(Wt==null?void 0:Wt.uid)||_m.current,token:RE})).then(function(){e_.current=5})})})},function(){setTimeout(function(){try{return e_.current=e_.current+e_.current,f0(),Promise.resolve()}catch(N0){return Promise.reject(N0)}},e_.current*1e3)});if(SE&&SE.then)return SE.then(function(){})}else{var zE=_catch(function(){return Promise.resolve(_l.login({uid:(Wt==null?void 0:Wt.uid)||_m.current,token:(Wt==null?void 0:Wt.token)||void 0})).then(function(){e_.current=5})},function(){setTimeout(function(){try{return e_.current=e_.current+e_.current,f0(),Promise.resolve()}catch(N0){return Promise.reject(N0)}},e_.current*1e3)});if(zE&&zE.then)return zE.then(function(){})}}();return Promise.resolve(m0&&m0.then?m0.then(function(){}):void 0)}catch(SE){return Promise.reject(SE)}},rE=function f0(){try{var $E=_catch(function(){return Promise.resolve(_d.join()).then(function(){e_.current=5})},function(){setTimeout(function(){try{return e_.current=e_.current+e_.current,f0(),Promise.resolve()}catch(m0){return Promise.reject(m0)}},e_.current*1e3)});return Promise.resolve($E&&$E.then?$E.then(function(){}):void 0)}catch(m0){return Promise.reject(m0)}},aE=function(){try{if(G_(rtmStatusEnum.initialising),Vt.uid?_m.current=String(Vt.uid):_m.current=String(timeNow()),_l.on("ConnectionStateChanged",function(SE,zE){console.log(SE,zE)}),_l.on("TokenExpired",function(){try{var SE=Vt.tokenUrl;console.log("token expired - renewing");var zE=function(){if(SE){var N0=_catch(function(){return Promise.resolve(fetch(SE+"/rtm/"+((Wt==null?void 0:Wt.uid)||_m.current))).then(function(K0){return Promise.resolve(K0.json()).then(function(RE){var VE=RE.rtmToken;return Promise.resolve(_l.renewToken(VE)).then(function(){e_.current=5})})})},function(K0){console.error("TokenExpiredError",K0)});if(N0&&N0.then)return N0.then(function(){})}}();return Promise.resolve(zE&&zE.then?zE.then(function(){}):void 0)}catch(N0){return Promise.reject(N0)}}),_l.on("MessageFromPeer",function(SE,zE){xE(SE,zE)}),_d.on("ChannelMessage",function(SE,zE){xE(SE,zE)}),_d.on("MemberJoined",function(SE){try{return Promise.resolve(C0(gE(),SE)).then(function(){})}catch(zE){return Promise.reject(zE)}}),_d.on("MemberCountUpdated",function(SE){try{return console.log("RTM-MemberCountUpdated: ",SE),Promise.resolve()}catch(zE){return Promise.reject(zE)}}),c_!=null&&c_.channel?Object.keys(c_.channel).map(function(SE){c_.channel&&_d.on(SE,c_.channel[SE])}):c_!=null&&c_.client&&Object.keys(c_.client).map(function(SE){c_.client&&_l.on(SE,c_.client[SE])}),Vt.tokenUrl){var $E=Vt.tokenUrl,m0=Vt.uid;_l.on("TokenExpired",function(){try{return console.log("token expired"),Promise.resolve(fetch($E+"/rtm/"+(m0||0)+"/")).then(function(SE){return Promise.resolve(SE.json()).then(function(zE){var N0=zE.rtmToken;_l.renewToken(N0)})})}catch(SE){return Promise.reject(SE)}})}return G_(rtmStatusEnum.loggingIn),Promise.resolve(K_()).then(function(){return G_(rtmStatusEnum.loggedIn),Promise.resolve(rE()).then(function(){G_(rtmStatusEnum.connected),S_(function(SE){return _extends({},SE,{0:Wt==null?void 0:Wt.username})}),D0(gE())})})}catch(SE){return Promise.reject(SE)}},gE=function(){return{messageType:"UserData",rtmId:(Wt==null?void 0:Wt.uid)||_m.current,rtcId:x_.current,username:Wt==null?void 0:Wt.username,role:Vt.role==="audience"?1:0,uikit:{platform:"web",framework:"react",version:"1.2.0"},agora:{rtm:AgoraRTM__default.VERSION,rtc:AgoraRTC__default.VERSION}}},kE=function($E,m0,SE){var zE=(Wt==null?void 0:Wt.showPopUpBeforeRemoteMute)===!1,N0={messageType:"MuteRequest",device:$E,rtcId:m0,mute:SE,isForceful:zE},K0=y_[m0];zE&&!SE?console.log("cannot send force unmute request"):K0?C0(N0,K0):console.log("peer not found")},xE=function($E,m0){var SE;if($E.messageType==="RAW"?SE=parsePayload($E.rawMessage):$E.messageType==="TEXT"&&(SE=JSON.parse($E.text)),console.log(SE,m0),SE)switch(SE.messageType){case"UserData":YE(SE);break;case"MuteRequest":d0(SE);break;case"RtmDataRequest":switch(SE.type){case"ping":M0(m0);break;case"userData":u0(m0);break;default:console.log(m0)}break;default:console.log("unknown message content")}else console.log("unknown rtm message type")},YE=function($E){l_(function(m0){var SE;return _extends({},m0,(SE={},SE[$E.rtcId]=$E.rtmId,SE))}),S_(function(m0){var SE;return _extends({},m0,(SE={},SE[$E.rtcId]=$E.username,SE))}),C_(function(m0){var SE;return _extends({},m0,(SE={},SE[$E.rtmId]=$E,SE))})},d0=function($E){x_.current===$E.rtcId&&($E.isForceful?$E.mute?$E.device===mutingDevice.microphone?Y_&&muteAudio(t_,B_,Y_):$E.device===mutingDevice.camera&&z_&&muteVideo(t_,B_,z_):console.error("cannot force unmute"):$E.device===mutingDevice.microphone?$E.mute?A_(popUpStateEnum.muteMic):A_(popUpStateEnum.unmuteMic):$E.device===mutingDevice.camera&&($E.mute?A_(popUpStateEnum.muteCamera):A_(popUpStateEnum.unmuteCamera)))},M0=function($E){C0({messageType:"RtmDataRequest",type:"pong"},$E)},u0=function($E){C0(gE(),$E)},D0=function($E){try{var m0=_l.createMessage({text:JSON.stringify($E),messageType:AgoraRTM__default.MessageType.TEXT}),SE=_catch(function(){return Promise.resolve(_d.sendMessage(m0)).then(function(){})},function(zE){console.error(zE)});return Promise.resolve(SE&&SE.then?SE.then(function(){}):void 0)}catch(zE){return Promise.reject(zE)}},C0=function($E,m0){try{var SE=_l.createMessage({text:JSON.stringify($E),messageType:AgoraRTM__default.MessageType.TEXT}),zE=_catch(function(){return Promise.resolve(_l.sendMessageToPeer(SE,String(m0))).then(function(){})},function(N0){console.error(N0)});return Promise.resolve(zE&&zE.then?zE.then(function(){}):void 0)}catch(N0){return Promise.reject(N0)}},QE=function(){try{return Promise.resolve(_l.logout()).then(function(){return Promise.resolve(_l.removeAllListeners()).then(function(){})})}catch($E){return Promise.reject($E)}};return reactExports.useEffect(function(){return Q_&&(aE(),_c(!0)),function(){Q_&&QE()}},[Vt.channel,Vt.appId,Q_]),React.createElement(RtmProvider,{value:{rtmStatus:q_,sendPeerMessage:C0,sendChannelMessage:D0,sendMuteRequest:kE,rtmClient:_l,uidMap:y_,usernames:f_,userDataMap:R_,popUpState:W_,setPopUpState:A_}},_s?_e.children:React.createElement(React.Fragment,null))};new TextEncoder;var dec=new TextDecoder,parsePayload=function $(_e){return JSON.parse(dec.decode(_e))};function PopUp(){var $=reactExports.useContext(PropsContext),_e=$.styleProps,_t=reactExports.useContext(RtmContext),Vt=_t.popUpState,Wt=_t.setPopUpState,_i=_e||{},_s=_i.popUpContainer,_c=reactExports.useContext(RtcContext),_l=_c.dispatch,_d=_c.localVideoTrack,_m=_c.localAudioTrack,e_=reactExports.useContext(LocalContext);return Vt!==popUpStateEnum.closed?React.createElement("div",{style:_extends({},styles$3.container,_s)},React.createElement("div",{style:{color:"#fff",fontSize:18,fontWeight:700}},Vt===popUpStateEnum.muteCamera||Vt===popUpStateEnum.muteMic?"Mute ":"Unmute ",Vt===popUpStateEnum.muteCamera||Vt===popUpStateEnum.unmuteCamera?"Camera":"Mic","?"),React.createElement("div",{style:{flexDirection:"row",display:"flex",width:"100%",justifyContent:"space-around"}},React.createElement("div",{onClick:function(){switch(Vt){case popUpStateEnum.muteCamera:e_.hasVideo&&_d&&muteVideo(e_,_l,_d);break;case popUpStateEnum.muteMic:e_.hasAudio&&_m&&muteAudio(e_,_l,_m);break;case popUpStateEnum.unmuteCamera:!e_.hasVideo&&_d&&muteVideo(e_,_l,_d);break;case popUpStateEnum.unmuteMic:!e_.hasAudio&&_m&&muteAudio(e_,_l,_m);break}Wt(popUpStateEnum.closed)},style:styles$3.button},"Confirm"),React.createElement("div",{style:styles$3.buttonClose,onClick:function(){return Wt(popUpStateEnum.closed)}},"Close"))):null}var styles$3={button:{color:"#fff",cursor:"pointer",borderWidth:2,borderStyle:"solid",borderColor:"#fff",padding:"2px 4px",borderRadius:4},buttonClose:{color:"#fff",cursor:"pointer",borderWidth:2,borderStyle:"solid",borderColor:"#fff",padding:"2px 4px",borderRadius:4},container:{backgroundColor:"#007bffaa",position:"absolute",width:240,height:80,top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:100,display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},AgoraUIKit=function $(_e){var _t=_e.styleProps,Vt=_e.rtcProps,Wt=_t||{},_i=Wt.UIKitContainer;return React.createElement(PropsProvider,{value:_e},React.createElement("div",{style:_extends({},style$1,_i)},Vt.role==="audience"?React.createElement(VideocallUI,null):React.createElement(TracksConfigure,null,React.createElement(VideocallUI,null))))},VideocallUI=function $(){var _e=reactExports.useContext(PropsContext),_t=_e.rtcProps;return React.createElement(RtcConfigure,{callActive:_t.callActive},React.createElement(LocalUserContext,null,_t.disableRtm?React.createElement(React.Fragment,null,(_t==null?void 0:_t.layout)===layout.grid?React.createElement(GridVideo,null):React.createElement(PinnedVideo,null),React.createElement(LocalControls,null)):React.createElement(RtmConfigure,null,React.createElement(PopUp,null),(_t==null?void 0:_t.layout)===layout.grid?React.createElement(GridVideo,null):React.createElement(PinnedVideo,null),React.createElement(LocalControls,null))))},style$1={display:"flex",flex:1,minHeight:0,flexDirection:"column"};function VideoCallComponent({videoToken:$,videoChannel:_e,currentChat:_t,socket:Vt,receiverId:Wt}){const[_i,_s]=useEndSessionMutation(),_c=useSelector(c_=>c_.user.user),_l=useNavigate(),[_d,_m]=reactExports.useState(!0),e_=JSON.parse(localStorage.getItem("check"));function t_(){var c_;return _t?(c_=_t.members)==null?void 0:c_.filter(h_=>h_!==(_c==null?void 0:_c._id))[0]:!1}const i_={rtcProps:{appId:"8c8115633818496bb363251d6909fcb0",channel:_e,token:$},callbacks:{EndCall:()=>{const c_={appointmentId:_e,conversationId:_t._id};_m(!1),_s.isLoading||_i(c_).then(h_=>{h_!=null&&h_.data.success&&(Vt.current.emit("endSession",{receiverid:t_()}),e_!=null&&e_.isDoctor?_l("/doctor/preparePrescription",{state:{appointmentId:_e,receiverid:Wt}}):_l("/user/feedback"))})}}};return reactExports.useEffect(()=>{Vt.current.on("getEndSession",()=>{Swal.fire({title:"Session Ended",text:"Your session has ended. You will be redirected.",icon:"warning",showCancelButton:!1,confirmButtonText:"OK"}).then(()=>{e_!=null&&e_.isDoctor?_l("/doctor/preparePrescription",{state:{appointmentId:_e,receiverid:Wt}}):_l("/user/feedback")})})},[]),jsx("div",{className:"flex flex-col flex-auto bg-blue-10 h-full p-6 w-full",children:jsx("div",{className:"flex flex-col flex-auto flex-shrink-0 rounded-2xl bg-blue-100 h-full p-4",children:jsx("div",{className:"flex flex-col h-full overflow-x-auto mb-4",children:jsx("div",{className:"flex flex-col h-full",children:_d?jsx(AgoraUIKit,{rtcProps:i_.rtcProps,callbacks:i_.callbacks}):null})})})})}function VideoSessionRight({appointmentId:$,currentChat:_e,socket:_t,receiverId:Vt}){const Wt=useNavigate(),[_i,_s]=useEndSessionMutation(),_c=useSelector(e_=>e_.user.user),_l=JSON.parse(localStorage.getItem("check"));function _d(){var e_;return _e?(e_=_e.members)==null?void 0:e_.filter(t_=>t_!==(_c==null?void 0:_c._id))[0]:!1}function _m(){const e_={appointmentId:$,conversationId:_e._id};Swal.fire({title:"Are you sure?",text:"Do you want to end the session?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, end it!",customClass:{popup:"my-custom-popup-class",container:"my-custom-container-class",content:"my-custom-content-class",confirmButton:"my-custom-confirm-button-class",cancelButton:"my-custom-cancel-button-class"}}).then(t_=>{t_.isConfirmed&&(_s.isLoading||_i(e_).then(()=>{_t.current.emit("endSession",{receiverid:_d()}),_l!=null&&_l.isDoctor?Wt("/doctor/preparePrescription",{state:{appointmentId:$,receiverid:Vt}}):Wt("/user/feedback")}))})}return reactExports.useEffect(()=>{_t.current.on("getEndSession",()=>{Swal.fire({title:"Session Ended",text:"Your session has ended. You will be redirected.",icon:"warning",showCancelButton:!1,confirmButtonText:"OK"}).then(()=>{_l!=null&&_l.isDoctor?Wt("/doctor/preparePrescription",{state:{appointmentId:$,receiverid:Vt}}):Wt("/user/feedback")})})},[]),jsxs("div",{className:"w-3/12  h-screen items-center border-l-2 border-gray-300 rounded-md scroll-container ",children:[jsx("div",{className:"h-10 bg-blue-400 rounded-md flex justify-center mt-[1px] items-center",children:jsxs("h5",{className:"font-semibold text-base text-white",children:["Logged in as : ",_c==null?void 0:_c.name]})}),jsx("div",{className:"flex flex-col h-2/4 bg-white mx-2 items-center mb-4 justify-center",children:jsx("div",{className:"justify-center items-center h- hidden md:flex",children:jsxs(js.Carousel,{showThumbs:!1,showArrows:!1,showIndicators:!1,showStatus:!1,autoPlay:!0,infiniteLoop:!0,className:"w-40",children:[jsxs("div",{children:[jsx("img",{src:"https://www.practo.com/consult/bundles/cwipage/images/ic-chats-v1.png",alt:" 1"}),jsx("span",{className:"font-semibold",children:"Free Follow-up"})]}),jsxs("div",{children:[jsx("img",{src:"https://www.practo.com/consult/bundles/cwipage/images/qualified_doctors.png",alt:" 2"}),jsx("span",{className:"font-semibold",children:"Verified Doctors"})]}),jsxs("div",{children:[jsx("img",{src:"https://www.practo.com/consult/bundles/cwipage/images/ic-security-v1.png",alt:" 3"}),jsx("span",{className:"font-semibold",children:"Secure Chats"})]})]})})}),jsx("div",{className:"justify-center flex flex-col items-center h-1/4",children:jsx("div",{className:"justify-center flex flex-col",children:jsxs("button",{type:"button",onClick:_m,className:"bg-red-500 p-2 flex font-semibold text-white rounded-lg hover:bg-orange-500 duration-700",children:[jsx("span",{className:"flex items-center mt-1 mr-2",children:jsx("ion-icon",{name:"close-circle-outline"})})," End Session"]})})})]})}function VideoCall({socket:$}){var e_;const _e=useLocation();console.log(_e.state);const{appointmentId:_t,receiverId:Vt}=_e.state,[Wt,_i]=reactExports.useState(null),_s=useFetchConversationQuery(),{data:_c,isSuccess:_l}=useFetchVideoTokenQuery(_t),_d=(e_=_s.data)==null?void 0:e_.conversation,_m=_d==null?void 0:_d.filter(t_=>t_.active===!0)[0];if(_s!=null&&_s.isSuccess&&_l)return jsxs(ChatLayout,{children:[jsx(SessionLeft,{setcurrentChat:_i,convos:_d,active:_m}),jsx(VideoCallComponent,{receiverId:Vt,videoChannel:_t,videoToken:_c==null?void 0:_c.AgoraToken,socket:$,currentChat:Wt}),jsx(VideoSessionRight,{receiverId:Vt,appointmentId:_t,currentChat:Wt,socket:$})]})}function DoctorRouter({socket:$}){const _e=useSelector(Wt=>Wt.user.user);reactExports.useEffect(()=>{var Wt,_i;(Wt=$.current)==null||Wt.emit("adduser",_e==null?void 0:_e._id),(_i=$.current)==null||_i.on("getuser",()=>{})},[_e==null?void 0:_e._id]);const _t=useNavigate(),Vt=JSON.parse(localStorage.getItem("check"));return reactExports.useEffect(()=>{Vt!=null&&Vt.isProfileComplete?Vt!=null&&Vt.isVerified||_t("/pendingVerification"):_t("/doctorForm")},[Vt]),jsxs(Routes,{children:[jsx(Route,{path:"/",element:jsx(DocHome,{})}),jsx(Route,{path:"/profile",element:jsx(DocProfile,{})}),jsx(Route,{path:"/availability",element:jsx(Availability,{})}),jsx(Route,{path:"/appointments",element:jsx(Appointments$1,{})}),jsx(Route,{path:"/appointmentHistory",element:jsx(AppointmentsHistory,{})}),jsx(Route,{path:"/startSession/*",element:jsx(SessionScreen,{socket:$})}),jsx(Route,{path:"/preparePrescription",element:jsx(PreparePrescription,{socket:$})}),jsx(Route,{path:"/videoCall",element:jsx(VideoCall,{socket:$})})]})}const carousel_min="";function Selector({specialities:$,set:_e}){const[_t,Vt]=reactExports.useState(null),[Wt,_i]=reactExports.useState(""),[_s,_c]=reactExports.useState(""),[_l,_d]=reactExports.useState(!1);return reactExports.useEffect(()=>{Vt($)},[]),jsxs("div",{className:"w-72 font-medium relative",children:[jsxs("div",{onClick:()=>_d(!_l),className:`bg-gray-50 w-full border-blue-100 border p-2 flex items-center justify-between rounded ${!_s&&"text-gray-700"}`,children:[_s?(_s==null?void 0:_s.length)>25?`${_s==null?void 0:_s.substring(0,25)}...`:_s:"Please Select",jsx("ion-icon",{name:"chevron-down-outline"})]}),jsxs("ul",{className:`bg-white mt-2 overflow-y-auto ${_l?"max-h-60":"max-h-0"} absolute w-full left-0 top-12 z-10`,children:[jsxs("div",{className:"flex items-center px-2 sticky top-0 bg-white",children:[jsx("ion-icon",{name:"search-outline"}),jsx("input",{type:"text",value:Wt,onChange:_m=>_i(_m.target.value.toLowerCase()),placeholder:"search...",className:"placeholder:text-gray-700 p-2 outline-none"})]}),_t==null?void 0:_t.map(_m=>{var e_,t_;return jsx("li",{className:`p-2 text-sm hover:bg-sky-600 hover:text-white
            ${((e_=_m==null?void 0:_m.name)==null?void 0:e_.toLowerCase())===(_s==null?void 0:_s.toLowerCase())&&"bg-sky-600 text-white"}
            ${(t_=_m==null?void 0:_m.name)!=null&&t_.toLowerCase().startsWith(Wt)?"block":"hidden"}`,onClick:()=>{var i_;((i_=_m==null?void 0:_m.name)==null?void 0:i_.toLowerCase())!==_s.toLowerCase()&&(_c(_m==null?void 0:_m.name),_d(!1),_i(""),_e(_m==null?void 0:_m.name))},children:_m==null?void 0:_m.name},_m==null?void 0:_m.name)})]})]})}function ConsultDoctor(){const $=useNavigate(),_e=useDispatch(),{data:_t,isSuccess:Vt}=useFetchSpecialitiesQuery(),Wt=useSelector(i_=>i_.user.user),[_i,_s]=reactExports.useState(null),[_c]=useUpdatePhoneMutation(),[_l,_d]=reactExports.useState(""),_m=reactExports.useRef(null),e_={phone:_i},t_=async()=>{_e(showloading()),_i?await _c(e_).then(i_=>{i_.data.success?(_l!==""?$(`/user/findDoctors/${_l}`):Q$1.error("please select a speciality"),_e(hideLoading())):(_e(hideLoading()),Q$1.error(i_.data.message))}).catch(()=>jsx(WentWrong,{})):(_l!==""?$(`/user/findDoctors/${_l}`):Q$1.error("please select a speciality"),_e(hideLoading()))};return reactExports.useEffect(()=>{_m.current=Wt==null?void 0:Wt.phone},[Wt]),Vt?jsx("div",{children:jsx(Navbar,{children:jsx("div",{className:"flex items-center justify-center",children:jsxs("div",{className:"shadow-lg w-full md:w-[60%] justify-center box-border flex flex-col md:flex-row h-[65vh] md:mt-20 rounded-lg",children:[jsxs("div",{className:"w-full md:w-2/3 flex flex-col items-baseline p-6 bg-gray-50",children:[jsxs("h1",{className:"font-bold text-center text-2xl",children:["Consult ",jsx("span",{className:"text-blue-700",children:"Doctors"})]}),jsx("h3",{className:"m-5 text-xl font-semibold text-center",children:"Enter Your Preferred Speciality"}),jsx("div",{className:"items-center w-full",children:jsx(Selector,{set:_d,specialities:_t==null?void 0:_t.specialities})}),jsx("h3",{className:"m-5 text-base font-semibold text-center",children:"Enter Your Phone Number"}),jsx("div",{className:"items-center w-full",children:jsx("input",{className:" md:w-72 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg border-2",type:"text",value:(_m==null?void 0:_m.current)||null,disabled:_m==null?void 0:_m.current,onChange:i_=>{_s(i_.target.value)}})}),jsx("button",{type:"button",className:"bg-blue-800 mt-5 w-full md:w-32 rounded p-2 text-white font-bold",onClick:t_,children:"Find Doctors"})]}),jsx("div",{className:"justify-center items-center w-1/3 hidden md:flex",children:jsxs(js.Carousel,{showThumbs:!1,showArrows:!1,showIndicators:!1,showStatus:!1,autoPlay:!0,infiniteLoop:!0,className:"w-40",children:[jsxs("div",{children:[jsx("img",{src:"https://www.practo.com/consult/bundles/cwipage/images/ic-chats-v1.png",alt:" 1"}),jsx("span",{className:"font-semibold",children:"Free Follow-up"})]}),jsxs("div",{children:[jsx("img",{src:"https://www.practo.com/consult/bundles/cwipage/images/qualified_doctors.png",alt:" 2"}),jsx("span",{className:"font-semibold",children:"Verified Doctors"})]}),jsxs("div",{children:[jsx("img",{src:"https://www.practo.com/consult/bundles/cwipage/images/ic-security-v1.png",alt:" 3"}),jsx("span",{className:"font-semibold",children:"Secure Chats"})]})]})})]})})})}):jsx("div",{children:jsx(WentWrong,{})})}const img1="/assets/img1-1e6fba21.jpg",img2="/assets/img2-30360f0c.jpeg",img3="/assets/img3-6c1531d7.jpg";function DoctorList(){const $=useNavigate(),_t=useParams()["*"],{data:Vt,isSuccess:Wt,isLoading:_i,isFetching:_s}=useFetchDoctorsQuery(_t),[_c,_l]=reactExports.useState([]);function _d(_m){$(`/user/doctorDetails/${_m}`)}return reactExports.useEffect(()=>{Wt&&_l(Vt==null?void 0:Vt.updatedDoctors)},[Wt]),Wt?Vt.noDoctor?jsx("div",{children:jsx(Navbar,{children:jsxs("div",{className:"flex items-center h-screen justify-center flex-col",children:[jsx("p",{className:"text-3xl font-bold uppercase text-red-500",children:"Sorry :("}),jsx("p",{className:"text-3xl font-bold uppercase",children:"no doctors in the selected speciality is available"})]})})}):jsx("div",{children:jsx(Navbar,{children:jsxs("div",{className:"p-10 flex",children:[jsxs("div",{className:"flex flex-col w-1/2",children:[jsx("h1",{className:"font-semibold text-xl text-blue-900",children:"Select Your Preferred Doctor "}),_c==null?void 0:_c.map(_m=>jsxs("div",{className:"flex items-start mt-4",children:[jsx("img",{className:"w-16 h-16 rounded-full mr-4",src:_m.additionalDetails.profileImage,alt:"Doctor's "}),jsxs("div",{children:[jsx("h2",{className:"text-lg font-semibold",children:_m.name}),jsx("p",{className:"text-sm text-gray-500",children:_m.specialty}),jsxs("p",{className:"text-sm text-gray-500",children:["Availability: ",_m.availability]}),jsxs("p",{className:"text-sm text-gray-500",children:["Rating: ",_m.rating," stars"]}),jsxs("p",{className:"text-base font-semibold text-black",children:["Specialization: ",_m==null?void 0:_m.additionalDetails.speciality]}),jsxs("p",{className:"text-sm font-semibold text-black",children:["Experience:"," ",_m!=null&&_m.additionalDetails.regYear?new Date().getFullYear()-_m.additionalDetails.regYear:"N/A"," ","years"]}),jsx("button",{type:"button",className:"mt-2 bg-blue-500 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded",onClick:()=>_d(_m._id),children:"Book an appointment"})]})]}))]}),jsx("div",{className:"w-1/2 md:block hidden",children:jsxs(js.Carousel,{showThumbs:!1,showArrows:!1,showIndicators:!1,showStatus:!1,autoPlay:!0,infiniteLoop:!0,className:"",children:[jsx("div",{children:jsx("img",{className:"rounded-lg",src:img1,alt:" 1"})}),jsx("div",{children:jsx("img",{className:"rounded-lg",src:img2,alt:" 3"})}),jsx("div",{children:jsx("img",{className:"rounded-lg",src:img3,alt:" 2"})})]})})]})})}):jsx("div",{children:jsx(WentWrong,{})})}function DoctorDetails(){const $=useDispatch(),[_e,_t]=useCreateCheckOutSessionMutation(),[Vt,Wt]=useBookSlotMutation(),_s=useParams()["*"],[_c,_l]=reactExports.useState(null),{data:_d,isSuccess:_m}=useFetchDoctorProfileQuery(_s),[e_,t_]=reactExports.useState(null),[i_,c_]=reactExports.useState(!1),h_=useNavigate();if(reactExports.useEffect(()=>{_m&&t_(_d.doctor)}),!_m)return jsx("div",{children:jsx(WentWrong,{})});if(!_d.success)return jsx("div",{children:jsx(WentWrong,{})});const y_=f_=>{$(showloading());const S_={doctorId:e_==null?void 0:e_._id};if(i_)if(_c){const T_={time:f_,doctorId:e_==null?void 0:e_._id,sessionDate:_c.startDate};_t.isLoading||_e(S_).then(R_=>{Wt.isLoading||Vt(T_).then(C_=>{C_!=null&&C_.data.success&&R_!=null&&R_.data.success&&($(hideLoading()),window.location.href=R_==null?void 0:R_.data.url)})})}else Q$1.warning("Please select the date"),$(hideLoading());else{const T_=new Date,R_=T_.getFullYear(),C_=String(T_.getMonth()+1).padStart(2,"0"),j_=String(T_.getDate()).padStart(2,"0"),W_=`${R_}-${C_}-${j_}`,A_={time:f_,doctorId:e_==null?void 0:e_._id,sessionDate:W_};_t.isLoading||_e(S_).then($_=>{$_!=null&&$_.data.success&&(Wt.isLoading||Vt(A_).then(q_=>{q_!=null&&q_.data.success&&($(hideLoading()),window.location.href=$_==null?void 0:$_.data.url)}))})}},l_=()=>{c_(!i_)},d_=f_=>{_l(f_)};return jsx("div",{children:jsx(Navbar,{children:jsx("section",{className:" bg-blueGray-50",children:jsx("div",{className:"container mx-auto",children:jsxs("div",{className:"flex m-8 items-center",children:[jsx("div",{className:" md:w-[22%] px-12 md:px-4 mr-auto ml-auto",children:jsxs("div",{className:" flex flex-col min-w-0 break-words w-full mb-6 shadow-lg bg-blue-900 rounded-2xl",children:[jsx("div",{children:jsx("img",{alt:"...",src:e_==null?void 0:e_.additionalDetails.profileImage,className:"w-full align-middle rounded"})}),jsxs("blockquote",{className:"p-1 mb-4 text-center",children:[jsx("h2",{className:"text-2xl \\ font-semibold text-white",children:e_==null?void 0:e_.name}),jsx("p",{className:"text-lg font-light  text-white",children:e_==null?void 0:e_.additionalDetails.qualification})]})]})}),jsx("div",{className:" md:w-[30%]",children:jsxs("div",{className:"flex flex-wrap",children:[jsxs("div",{className:"w-[45%] px-4",children:[jsx("div",{className:" flex flex-col h-[35%]",children:jsxs("div",{className:"px-4 flex-auto",children:[jsx("div",{className:"text-blueGray-500 p-3 text-center inline-flex items-center justify-center w-12 h-12 mb-5 shadow-lg rounded-full bg-white",children:jsx("ion-icon",{name:"school"})}),jsx("h6",{className:"text-base mb-1 font-semibold",children:"Qualification"}),jsx("p",{className:"mb-4 text-blueGray-500 text-base",children:e_==null?void 0:e_.additionalDetails.qualification})]})}),jsx("div",{className:" flex flex-col min-w-0",children:jsxs("div",{className:"px-4 flex-auto",children:[jsx("div",{className:"text-blueGray-500 p-3 text-center inline-flex items-center justify-center w-12 h-12 mb-5 shadow-lg rounded-full bg-white",children:jsx("ion-icon",{name:"language"})}),jsx("h6",{className:"text-base mb-1 font-semibold",children:"Languages"}),jsx("p",{className:"mb-4 text-blueGray-500 text-base",children:"English, Hindi, Malayalam"})]})}),jsx("div",{className:"w-full px-4",children:jsx("div",{className:" flex flex-col min-w-0",children:jsxs("div",{className:"px- flex-auto",children:[jsx("div",{className:"text-blueGray-500 p-3 text-center inline-flex items-center justify-center w-12 h-12 mb-5 shadow-lg rounded-full bg-white",children:jsx("ion-icon",{name:"card"})}),jsx("h6",{className:"text-base mb-1 font-semibold",children:"Fee"}),jsxs("p",{className:"mb-4 text-blueGray-500 text-base",children:[" ",e_==null?void 0:e_.additionalDetails.Fee,"/-"]})]})})})]}),jsxs("div",{className:"w-full md:w-6/12 px-4",children:[jsx("div",{className:"flex flex-col min-w-0 mt-2",children:jsxs("div",{className:"px-4 py- flex-auto",children:[jsx("div",{className:"text-blueGray-500 p-3 text-center inline-flex items-center justify-center w-12 h-12 mb-5 shadow-lg rounded-full bg-white",children:jsx("ion-icon",{name:"checkmark-done"})}),jsx("h6",{className:"text-base mb-1 font-semibold",children:"Specializations"}),jsx("p",{className:"mb-4 text-blueGray-500 text-base",children:e_==null?void 0:e_.additionalDetails.speciality})]})}),jsx("div",{className:" flex flex-col min-w-0 ",children:jsxs("div",{className:"px-4 py-5 flex-auto",children:[jsx("div",{className:"text-blueGray-500 p-3 text-center inline-flex items-center justify-center w-12 h-12 mb-5 shadow-lg rounded-full bg-white",children:jsx("ion-icon",{name:"accessibility"})}),jsx("h6",{className:"text-base mb-1 font-semibold",children:"Consulting since"}),jsx("p",{className:"mb-4 text-blueGray-500 text-base",children:e_==null?void 0:e_.additionalDetails.regYear})]})})]})]})}),jsx("div",{className:"w-[50%] px-4 mb-10",children:jsxs("div",{className:"h-auto mb-5 rounded-lg border-2 border-dashed border-gray-600",children:[jsx("h5",{className:"text-lg font-semibold text-center mt-2",children:"SELECT YOUR CONVENIENT SLOT"}),jsxs("h5",{className:"font-semibold m-4",children:["Booking for"," ",jsxs("span",{type:"button",onClick:l_,className:"cursor-pointer text-blue-500",children:[" ","another date?"]})]}),i_?jsx("div",{className:"flex justify-center p-2 border-b-2 border-double border-gray-500 transition-all duration-700",children:jsx(Datepicker,{asSingle:!0,primaryColor:"red",value:_c,disabledDates:_d==null?void 0:_d.leaveDates,onChange:d_})}):"",jsx("div",{className:"grid mt-3 pb-2 md:grid-cols-3 sm:grid-cols-2 text-center",children:(e_==null?void 0:e_.timeSlots.length)>0?e_==null?void 0:e_.timeSlots.map((f_,S_)=>f_.booked?jsx("div",{className:"w-20 h-12 ml-12 mt-5 bg-red-100 border-2 border-red-700 rounded flex disabled items-center justify-center",disabled:!0,children:f_.time}):jsx("div",{onClick:()=>{y_(f_.time)},className:"w-20 h-12 ml-12 mt-5 bg-green-100 border-2 border-green-700 rounded flex disabled items-center justify-center hover:bg-slate-500 cursor-pointer",children:jsx("p",{className:f_.booked?"text-red-500":"text-blue-900",children:f_.time},S_)})):e_==null?void 0:e_.timeSlots.map((f_,S_)=>jsx("div",{onClick:()=>{h_("/user/paymentWIndow",{state:{time:f_.time,doctorId:e_._id,sessionDate:_c.startDate}})},className:"w-20 h-12 ml-12 mt-5 bg-green-100 border-2 border-green-700 rounded flex items-center justify-center hover:bg-slate-500 cursor-pointer",children:jsx("p",{className:f_.booked?"text-red-500":"text-blue-900",children:f_.time},S_)}))})]})})]})})})})})}function PaymentScreen(){const[$,_e]=useBookSlotMutation(),Vt=useLocation().state;return jsx("div",{children:jsxs(Navbar,{children:["payment completed for fee",jsx("button",{type:"button",className:"bg-blue-800 m-8 w-16 rounded-lg",onClick:()=>{_e.isLoading||$(Vt)},children:"done"})]})})}const navElements=[{id:0,title:"Profile",icon:jsx("ion-icon",{name:"person"}),route:"/"},{id:1,title:"Appointments",icon:jsx("ion-icon",{name:"chatbubbles"}),route:"/user/appointments"},{id:2,title:"Appt. records",icon:jsx("ion-icon",{name:"clipboard"}),route:"/user/feedback"},{id:3,title:"Manage",icon:jsx("ion-icon",{name:"cog"}),route:"/"},{id:4,title:"Logout",icon:jsx("ion-icon",{name:"exit"}),route:"/"}];function SideBar({active:$}){return jsx("nav",{className:"col-span-2  h-screen bg-blue-900  md:block border-r border-gray-200 min-h-[90vh] w-[80px] xl:w-[225px] pt-8 px-1 flex flex-col items-start justify-between",style:{overflow:"hidden"},children:jsxs("div",{className:"space-y-8 w-full ",children:[navElements.slice(0,4).map(_e=>jsx(NavItem,{link:_e,active:$},_e.id)),jsx("div",{className:"w-full border-t border-gray-200"}),navElements.slice(4,6).map(_e=>jsx(NavItem,{link:_e,active:$},_e.id))]})})}function NavItem({link:$,active:_e}){const _t=useNavigate(),Vt=_e;return jsxs("div",{onClick:()=>{_t($.route)},className:`w-full flex items-center justify-start space-x-8 px-5 cursor-pointer
       group hover:border-gray-900 border-l-4  ${Vt===$.id&&"border-gray-900"} `,children:[jsxs("span",{className:"text-white",children:[" ",$.icon]}),jsx("h1",{className:`text-white font-semibold group-hover:text-black xl:flex hidden ${Vt===$.id&&"text-black "}} `,children:$.title})]},$.id)}const AppointmentsList=({appointments:$})=>{function _e(Vt){_t("/user/startSession",{state:{appointmentId:Vt}})}const _t=useNavigate();return jsxs("div",{className:"bg-gray-100 p-4 rounded-lg w-full overflow-y-auto max-h-screen",children:[jsx("h2",{className:"text-lg font-semibold mb-4",children:"Appointments"}),$==null?void 0:$.map(Vt=>jsxs("div",{children:[Vt.active?jsx("div",{className:"bg-green-500 rounded-t-md",children:jsx("p",{className:"font-semibold text-white text-center",children:"Active Session"})}):"",jsxs("div",{className:"bg-white w-full rounded-lg shadow p-4 mb-4 flex justify-between items-center",children:[jsx("div",{className:"w-[7%]",children:jsx("img",{className:"rounded-xl",src:Vt.profileImage,alt:""})}),jsxs("div",{className:"w-[40%]",children:[jsxs("h3",{className:"text-xl font-semibold mb-2",children:["Dr.",Vt.doctorName]}),jsxs("p",{className:"text-gray-600",children:["Appointment ID: ",Vt._id]}),jsx("p",{className:"text-yellow-600 font-semibold",children:"Session Duration: 1 Hour"})]}),jsxs("div",{className:"w-[30%]",children:[jsxs("h5",{className:"text-red-600 font-semibold text-xl ",children:["Time: ",Vt.time]}),jsxs("p",{className:"text-gray-600",children:["Date: ",Vt.date]})]}),jsx("div",{className:"w-[15%]",children:Vt.completed?jsx("h3",{className:"font-semibold text-gray-500",children:"Session Completed"}):Vt.active?jsx("button",{type:"button",onClick:()=>_e(Vt==null?void 0:Vt._id),className:"bg-green-500 rounded-md p-1 font-semibold text-white",children:"Join Session"}):jsx("h3",{className:"font-semibold text-red-400",children:"Waiting for Doctor"})})]},Vt.id)]}))]})};function Appointments(){const{data:$,isSuccess:_e}=usePatientAppointmentsQuery();return _e?jsx("div",{children:jsx(Navbar,{children:jsxs("div",{className:"flex",children:[jsx(SideBar,{active:1}),jsx("div",{className:"flex w-3/4 justify-center m-5",children:jsx(AppointmentsList,{appointments:$==null?void 0:$.updatedAppointments})})]})})}):jsx(WentWrong,{})}var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),__assign=globalThis&&globalThis.__assign||function(){return __assign=Object.assign||function($){for(var _e,_t=1,Vt=arguments.length;_t<Vt;_t++){_e=arguments[_t];for(var Wt in _e)Object.prototype.hasOwnProperty.call(_e,Wt)&&($[Wt]=_e[Wt])}return $},__assign.apply(this,arguments)},__rest=globalThis&&globalThis.__rest||function($,_e){var _t={};for(var Vt in $)Object.prototype.hasOwnProperty.call($,Vt)&&_e.indexOf(Vt)<0&&(_t[Vt]=$[Vt]);if($!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Wt=0,Vt=Object.getOwnPropertySymbols($);Wt<Vt.length;Wt++)_e.indexOf(Vt[Wt])<0&&Object.prototype.propertyIsEnumerable.call($,Vt[Wt])&&(_t[Vt[Wt]]=$[Vt[Wt]]);return _t};function Tree2Element($){return $&&$.map(function(_e,_t){return React.createElement(_e.tag,__assign({key:_t},_e.attr),Tree2Element(_e.child))})}function GenIcon($){return function(_e){return React.createElement(IconBase,__assign({attr:__assign({},$.attr)},_e),Tree2Element($.child))}}function IconBase($){var _e=function(_t){var Vt=$.attr,Wt=$.size,_i=$.title,_s=__rest($,["attr","size","title"]),_c=Wt||_t.size||"1em",_l;return _t.className&&(_l=_t.className),$.className&&(_l=(_l?_l+" ":"")+$.className),React.createElement("svg",__assign({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},_t.attr,Vt,_s,{className:_l,style:__assign(__assign({color:$.color||_t.color},_t.style),$.style),height:_c,width:_c,xmlns:"http://www.w3.org/2000/svg"}),_i&&React.createElement("title",null,_i),$.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,function(_t){return _e(_t)}):_e(DefaultContext)}function FaCalendarAlt($){return GenIcon({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"}}]})($)}function FaCheckCircle($){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"}}]})($)}function FaStar($){return GenIcon({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"}}]})($)}const UserAppointmentRecords=({appointments:$,socket:_e,refetch:_t})=>{const[Vt,Wt]=useSubmitReviewMutation();function _i(c_,h_){getrequest(`/downloadPrescription/${c_}`).then(y_=>{const l_=new Blob([y_.data],{type:"application/pdf"});FileSaver_minExports.saveAs(l_,`${h_} Prescription.pdf`)}).catch(()=>{})}const[_s,_c]=reactExports.useState(0),_l=c_=>{_c(c_)},[_d,_m]=reactExports.useState(""),e_=c_=>{_m(c_.target.value)},t_=(c_,h_)=>{const y_={appointmentId:c_,doctorId:h_,review:_d,rating:_s};!Wt.isLoading&&_d&&_s!==0&&Vt(y_).then(l_=>{l_!=null&&l_.data.success&&l_!=null&&l_.data.success&&Swal.fire({title:"Success!",text:"Review submitted successfully",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"OK",customClass:{popup:"custom-swal-popup",title:"custom-swal-title",content:"custom-swal-content"}})}),_m("")};reactExports.useEffect(()=>{const c_=()=>{Q$1.info("Your prescription is ready for download",{position:Q$1.POSITION.TOP_CENTER,autoClose:3e3,hideProgressBar:!0,draggable:!1}),_t()};return _e.current.on("getPrescriptionDone",c_),()=>{_e.current.off("getPrescriptionDone",c_)}},[]);function i_(c_){if(c_.length===0)return 0;if(c_.length===1)return c_[0];let h_=0;for(let y_=0;y_<c_.length;y_++)h_+=c_[y_];return h_/c_.length}return jsxs("div",{className:"bg-gray-100 p-4 rounded-lg w-full overflow-y-auto max-h-screen",children:[jsx("h2",{className:"text-lg font-semibold mb-4",children:"Appointments"}),$==null?void 0:$.map(c_=>jsxs("div",{className:"mb-4 bg-white shadow rounded-lg pb-4",children:[c_.prescriptionDone?null:jsx("div",{className:"bg-yellow-500 rounded-t-md",children:jsx("p",{className:"font-semibold text-white px-5",children:"Just a moment, Doctor is working on your prescription."})}),jsxs("div",{className:"w-full p-4 flex justify-between items-center",children:[jsx("div",{className:"w-[7%]",children:jsx("img",{className:"rounded-xl",src:c_.profileImage,alt:""})}),jsxs("div",{className:"w-[40%]",children:[jsxs("h3",{className:"text-xl font-semibold mb-2",children:["Dr.",c_.doctorName]}),jsxs("p",{className:"text-gray-600",children:["Appointment ID: ",c_._id]}),jsx("p",{className:"text-green-600 font-semibold",children:"Session Completed"})]}),jsxs("div",{className:"w-[30%]",children:[jsxs("h5",{className:"text-red-600 font-semibold text-xl ",children:["Time: ",c_.time]}),jsxs("p",{className:"text-gray-600",children:["Date: ",c_.date]})]}),jsx("div",{className:"w-[15%]",children:c_.prescriptionDone?jsx("button",{type:"button",onClick:()=>_i(c_._id,c_.prescription.patientName),className:"bg-green-500 rounded-md text-sm font-semibold text-white p-2",children:"Download Prescription"}):jsx("button",{type:"button",className:"bg-gray-300 rounded-md text-sm font-semibold text-gray-400 p-2 cursor-not-allowed",children:"Download Prescription"})})]},c_.id),jsxs("div",{className:"flex mx-5 justify-between",children:[jsxs("div",{className:"flex flex-col w-1/4",children:[jsx("h4",{className:"my-2 font-semibold text-lg",children:"Rate the Session"}),jsx("div",{className:"flex",children:[...Array(5)].map((h_,y_)=>{const l_=y_+1;return jsxs("label",{children:[jsx("input",{type:"radio",name:"rating",hidden:!0,value:l_,onClick:()=>_l(l_)}),c_.rating.length!==0?jsx(FaStar,{className:"star text-xl",color:l_<=i_(c_.rating)?"#ffc107":"#e4e5e9"}):jsx(FaStar,{className:"star text-xl",color:l_<=_s?"#ffc107":"#e4e5e9"})]},l_)})})]}),c_.reviews?jsx("div",{className:"w-3/4 border p-1",children:jsx("p",{className:"",children:c_.reviews})}):jsxs("div",{className:"flex w-3/4",children:[jsx("textarea",{className:"border h-full w-full",value:_d,onChange:e_,placeholder:"Write your review..."}),jsx("button",{onClick:()=>t_(c_._id,c_.DoctorId),type:"button",className:"bg-blue-700 px-5 text-white font-semibold rounded m-3",children:"Submit"})]})]})]}))]})};function AppointmentHistory({socket:$}){const{data:_e,isSuccess:_t,refetch:Vt}=usePatientAppointmentsQuery(),Wt=_e==null?void 0:_e.updatedAppointments.filter(_i=>_i.completed===!0);return _t?jsx("div",{children:jsx(Navbar,{children:jsxs("div",{className:"flex",children:[jsx(SideBar,{active:2}),jsx("div",{className:"flex w-3/4 justify-center m-5",children:jsx(UserAppointmentRecords,{refetch:Vt,socket:$,appointments:Wt})})]})})}):jsx(WentWrong,{})}function Success(){const{data:$,isSuccess:_e}=usePatientAppointmentsQuery();if(!_e)return jsx(WentWrong,{});const _t=$==null?void 0:$.updatedAppointments[0];return jsx("div",{children:jsx(Navbar,{children:jsx("div",{className:"flex justify-center items-center",children:jsx("div",{className:"max-w-[800px] justify-center mt-[-66px] text-center  w-full h-screen mx-auto flex flex-col",children:jsxs("div",{className:"flex flex-col items-center justify-center h-screen",children:[jsx("div",{className:"text-6xl text-green-500",children:jsx(FaCheckCircle,{})}),jsx("h1",{className:"text-4xl font-bold mt-4",children:"Appointment Booked Successfully!"}),jsxs("div",{className:"flex items-center text-xl mt-3 font-semibold text-gray-700",children:[jsx(FaCalendarAlt,{className:"mr-2 text-4xl text-blue-800"}),jsx("span",{children:_t==null?void 0:_t.date})]}),jsxs("p",{className:"text-xl font-semibold  text-gray-700 mt-3",children:["Time: ",_t.time]}),jsxs("p",{className:"text-xl font-semibold text-gray-700 mt-3",children:["Doctor: ",_t.doctorName]}),jsx(Link,{to:"/user/appointments",className:"mt-4 px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600",children:"Go to Appointments"})]})})})})})}const UserProfilePage=()=>{var c_;const{data:$,isLoading:_e,isSuccess:_t}=useGetUserDetailsQuery(),Vt=useFetchAppointmentsCountQuery(),Wt=$==null?void 0:$.data,[_i,_s]=reactExports.useState(Wt==null?void 0:Wt.name),[_c,_l]=reactExports.useState(Wt==null?void 0:Wt.phone),[_d,_m]=useUpdateUserProfileMutation(),e_=h_=>{_s(h_.target.value)},t_=h_=>{_l(h_.target.value)};function i_(){const h_={name:_i,phone:_c};_i&&_c&&(_m.isLoading?Q$1.error("please fill the fields to continue"):_d(h_).then(y_=>{y_!=null&&y_.data.success&&Q$1.success("updated successfully")}))}return!_e&&!_t?jsx(WentWrong,{}):jsx("div",{children:jsx(Navbar,{children:jsxs("div",{className:"flex",children:[jsx(SideBar,{active:0}),jsx("div",{className:"flex w-3/4 justify-center m-5",children:jsx("div",{className:" w-full p-5",children:jsxs("div",{className:"max-w-xl mx-auto",children:[jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[jsx("h2",{className:"text-2xl font-bold mb-4",children:"Total Consultations"}),jsx("div",{className:"bg-blue-100 rounded-lg p-4",children:jsxs("h3",{className:"text-lg font-bold mb-2",children:["You have attended ",(c_=Vt==null?void 0:Vt.data)==null?void 0:c_.count," consultations"]})})]}),jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[jsx("h2",{className:"text-2xl font-bold mb-4",children:"Edit your Profile"}),jsxs("div",{className:"mb-4",children:[jsx("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"name",children:"Name"}),jsx("input",{type:"text",id:"name",className:"border border-gray-400 rounded w-full py-2 px-3",value:Wt==null?void 0:Wt.name,onChange:e_})]}),jsxs("div",{className:"mb-4",children:[jsx("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"phone",children:"Phone"}),jsx("input",{type:"text",id:"phone",className:"border border-gray-400 rounded w-full py-2 px-3",value:Wt==null?void 0:Wt.phone,onChange:t_})]}),jsx("button",{onClick:i_,type:"button",className:"bg-blue-800 text-white text-lg font-semibold px-4 rounded-md py-2",children:"Update"})]})]})})})]})})})};function UserRouter({socket:$}){const _e=useSelector(_t=>_t.user.user);return reactExports.useEffect(()=>{var _t,Vt;(_t=$.current)==null||_t.emit("adduser",_e==null?void 0:_e._id),(Vt=$.current)==null||Vt.on("getuser",()=>{})},[_e==null?void 0:_e._id]),jsxs(Routes,{children:[jsx(Route,{path:"/consultDoctor",element:jsx(ConsultDoctor,{})}),jsx(Route,{path:"/findDoctors/*",element:jsx(DoctorList,{})}),jsx(Route,{path:"/doctorDetails/*",element:jsx(DoctorDetails,{})}),jsx(Route,{path:"/paymentScreen",element:jsx(PaymentScreen,{})}),jsx(Route,{path:"/appointments",element:jsx(Appointments,{})}),jsx(Route,{path:"/startSession",element:jsx(SessionScreen,{socket:$})}),jsx(Route,{path:"/feedback",element:jsx(AppointmentHistory,{socket:$})}),jsx(Route,{path:"/videoCall",element:jsx(VideoCall,{socket:$})}),jsx(Route,{path:"/success/*",element:jsx(Success,{})}),jsx(Route,{path:"/profile",element:jsx(UserProfilePage,{})})]})}function App(){const $=useSelector(Wt=>Wt.alerts.loading),_e=reactExports.useRef(),_t=useSelector(Wt=>Wt.user.user),Vt=_t==null?void 0:_t.isDoctor;return reactExports.useEffect(()=>(_e.current=lookup("http://localhost:8080",{path:"/server/socket.io/"}),()=>{_e.current.disconnect()}),[]),jsxs(BrowserRouter,{children:[$&&jsx(spinner,{}),jsxs(Routes,{children:[jsx(Route,{path:"/",element:Vt?jsx(ProtectedRoute,{children:jsx(DoctorRouter,{socket:_e})}):jsx(ProtectedRoute,{children:jsx(HomePage,{})})}),jsx(Route,{path:"/login",element:jsx(publicRoute,{children:jsx(Login,{})})}),jsx(Route,{path:"/register",element:jsx(publicRoute,{children:jsx(Register,{})})}),jsx(Route,{path:"/otpSubmit",element:jsx(publicRoute,{children:jsx(OtpInput,{})})}),jsx(Route,{path:"/doctorForm",element:jsx(ProtectedRoute,{children:jsx(DoctorForm,{})})}),jsx(Route,{path:"/doctor/*",element:jsx(ProtectedRoute,{children:jsx(DoctorRouter,{socket:_e})})}),jsx(Route,{path:"/pendingVerification",element:jsx(ProtectedRoute,{children:jsx(DocterPendingVerification,{})})}),jsx(Route,{path:"/user/*",element:jsx(ProtectedRoute,{children:jsx(UserRouter,{socket:_e})})})]}),jsx(k$1,{position:"top-center",autoClose:2e3,limit:3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored"})]})}const index="",store=configureStore({reducer:{[apiSlice.reducerPath]:apiSlice.reducer,alerts:alertSlice.reducer,user:userSlice.reducer},middleware:$=>$().concat(apiSlice.middleware)});setupListeners(store.dispatch);client.createRoot(document.getElementById("root")).render(jsx(Provider$1,{store,children:jsx(React.StrictMode,{children:jsx(App,{})})}));
